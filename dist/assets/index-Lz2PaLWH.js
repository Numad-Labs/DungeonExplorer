const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ccip-Dgl-voLH.js","./phaser-CPm-u6kw.js"])))=>i.map(i=>d[i]);
var e,t,s,n,a,i,r,o,l,c,h,u,d,p,f,m,g,y,b,v,w,x,k,A,E,S,P,T,B,C,M,R,I,_,D,N,L,F,O,j,U,G,H,z,V,W,$,q,K,Q,Z,X,Y,J,ee,te,se,ne,ae,ie,re,oe,le,ce,he,ue,de,pe,fe,me,ge,ye,be,ve,we,xe,ke,Ae,Ee,Se,Pe,Te,Be,Ce,Me,Re,Ie,_e,De,Ne,Le,Fe,Oe,je,Ue,Ge,He,ze,Ve,We,$e,qe,Ke,Qe,Ze,Xe,Ye,Je,et,tt,st,nt,at,it,rt,ot,lt,ct,ht,ut,dt,pt,ft,mt,gt,yt,bt,vt,wt,xt,kt,At,Et,St,Pt,Tt,Bt,Ct,Mt,Rt,It,_t,Dt,Nt,Lt,Ft,Ot,jt,Ut,Gt,Ht,zt,Vt,Wt,$t,qt,Kt,Qt,Zt,Xt,Yt,Jt,es,ts,ss,ns,as,is,rs,os,ls,cs,hs,us,ds,ps,fs,ms,gs,ys,bs,vs,ws,xs,ks,As,Es,Ss,Ps,Ts,Bs,Cs,Ms,Rs,Is,_s,Ds,Ns,Ls,Fs,Os,js,Us,Gs,Hs,zs,Vs,Ws,$s,qs,Ks,Qs,Zs,Xs,Ys,Js,en,tn,sn,nn,an,rn,on,ln,cn,hn,un,dn,pn,fn,mn,gn,yn,bn,vn,wn,xn,kn=Object.defineProperty,An=e=>{throw TypeError(e)},En=(e,t,s)=>((e,t,s)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),Sn=(e,t,s)=>t.has(e)||An("Cannot "+s),Pn=(e,t,s)=>(Sn(e,t,"read from private field"),s?s.call(e):t.get(e)),Tn=(e,t,s)=>t.has(e)?An("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Bn=(e,t,s,n)=>(Sn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Cn=(e,t,s)=>(Sn(e,t,"access private method"),s),Mn=(e,t,s,n)=>({set _(n){Bn(e,t,n,s)},get _(){return Pn(e,t,n)}});import{g as Rn,P as In}from"./phaser-CPm-u6kw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var _n={exports:{}},Dn={},Nn={exports:{}},Ln={},Fn=Symbol.for("react.element"),On=Symbol.for("react.portal"),jn=Symbol.for("react.fragment"),Un=Symbol.for("react.strict_mode"),Gn=Symbol.for("react.profiler"),Hn=Symbol.for("react.provider"),zn=Symbol.for("react.context"),Vn=Symbol.for("react.forward_ref"),Wn=Symbol.for("react.suspense"),$n=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Kn=Symbol.iterator,Qn={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zn=Object.assign,Xn={};function Yn(e,t,s){this.props=e,this.context=t,this.refs=Xn,this.updater=s||Qn}function Jn(){}function ea(e,t,s){this.props=e,this.context=t,this.refs=Xn,this.updater=s||Qn}Yn.prototype.isReactComponent={},Yn.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},Yn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Jn.prototype=Yn.prototype;var ta=ea.prototype=new Jn;ta.constructor=ea,Zn(ta,Yn.prototype),ta.isPureReactComponent=!0;var sa=Array.isArray,na=Object.prototype.hasOwnProperty,aa={current:null},ia={key:!0,ref:!0,__self:!0,__source:!0};function ra(e,t,s){var n,a={},i=null,r=null;if(null!=t)for(n in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(i=""+t.key),t)na.call(t,n)&&!ia.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(1===o)a.children=s;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return{$$typeof:Fn,type:e,key:i,ref:r,props:a,_owner:aa.current}}function oa(e){return"object"==typeof e&&null!==e&&e.$$typeof===Fn}var la=/\/+/g;function ca(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function ha(e,t,s,n,a){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var r=!1;if(null===e)r=!0;else switch(i){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Fn:case On:r=!0}}if(r)return a=a(r=e),e=""===n?"."+ca(r,0):n,sa(a)?(s="",null!=e&&(s=e.replace(la,"$&/")+"/"),ha(a,t,s,"",(function(e){return e}))):null!=a&&(oa(a)&&(a=function(e,t){return{$$typeof:Fn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||r&&r.key===a.key?"":(""+a.key).replace(la,"$&/")+"/")+e)),t.push(a)),1;if(r=0,n=""===n?".":n+":",sa(e))for(var o=0;o<e.length;o++){var l=n+ca(i=e[o],o);r+=ha(i,t,s,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Kn&&e[Kn]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(i=e.next()).done;)r+=ha(i=i.value,t,s,l=n+ca(i,o++),a);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return r}function ua(e,t,s){if(null==e)return e;var n=[],a=0;return ha(e,n,"","",(function(e){return t.call(s,e,a++)})),n}function da(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var pa={current:null},fa={transition:null},ma={ReactCurrentDispatcher:pa,ReactCurrentBatchConfig:fa,ReactCurrentOwner:aa};function ga(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:ua,forEach:function(e,t,s){ua(e,(function(){t.apply(this,arguments)}),s)},count:function(e){var t=0;return ua(e,(function(){t++})),t},toArray:function(e){return ua(e,(function(e){return e}))||[]},only:function(e){if(!oa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Ln.Component=Yn,Ln.Fragment=jn,Ln.Profiler=Gn,Ln.PureComponent=ea,Ln.StrictMode=Un,Ln.Suspense=Wn,Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ma,Ln.act=ga,Ln.cloneElement=function(e,t,s){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Zn({},e.props),a=e.key,i=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,r=aa.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)na.call(t,l)&&!ia.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=s;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Fn,type:e.type,key:a,ref:i,props:n,_owner:r}},Ln.createContext=function(e){return(e={$$typeof:zn,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Hn,_context:e},e.Consumer=e},Ln.createElement=ra,Ln.createFactory=function(e){var t=ra.bind(null,e);return t.type=e,t},Ln.createRef=function(){return{current:null}},Ln.forwardRef=function(e){return{$$typeof:Vn,render:e}},Ln.isValidElement=oa,Ln.lazy=function(e){return{$$typeof:qn,_payload:{_status:-1,_result:e},_init:da}},Ln.memo=function(e,t){return{$$typeof:$n,type:e,compare:void 0===t?null:t}},Ln.startTransition=function(e){var t=fa.transition;fa.transition={};try{e()}finally{fa.transition=t}},Ln.unstable_act=ga,Ln.useCallback=function(e,t){return pa.current.useCallback(e,t)},Ln.useContext=function(e){return pa.current.useContext(e)},Ln.useDebugValue=function(){},Ln.useDeferredValue=function(e){return pa.current.useDeferredValue(e)},Ln.useEffect=function(e,t){return pa.current.useEffect(e,t)},Ln.useId=function(){return pa.current.useId()},Ln.useImperativeHandle=function(e,t,s){return pa.current.useImperativeHandle(e,t,s)},Ln.useInsertionEffect=function(e,t){return pa.current.useInsertionEffect(e,t)},Ln.useLayoutEffect=function(e,t){return pa.current.useLayoutEffect(e,t)},Ln.useMemo=function(e,t){return pa.current.useMemo(e,t)},Ln.useReducer=function(e,t,s){return pa.current.useReducer(e,t,s)},Ln.useRef=function(e){return pa.current.useRef(e)},Ln.useState=function(e){return pa.current.useState(e)},Ln.useSyncExternalStore=function(e,t,s){return pa.current.useSyncExternalStore(e,t,s)},Ln.useTransition=function(){return pa.current.useTransition()},Ln.version="18.3.1",Nn.exports=Ln;var ya=Nn.exports;const ba=Rn(ya);var va=ya,wa=Symbol.for("react.element"),xa=Symbol.for("react.fragment"),ka=Object.prototype.hasOwnProperty,Aa=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ea={key:!0,ref:!0,__self:!0,__source:!0};function Sa(e,t,s){var n,a={},i=null,r=null;for(n in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(r=t.ref),t)ka.call(t,n)&&!Ea.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:wa,type:e,key:i,ref:r,props:a,_owner:Aa.current}}Dn.Fragment=xa,Dn.jsx=Sa,Dn.jsxs=Sa,_n.exports=Dn;var Pa=_n.exports,Ta={},Ba={exports:{}},Ca={},Ma={exports:{}},Ra={};!function(e){function t(e,t){var s=e.length;e.push(t);e:for(;0<s;){var n=s-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[s]=i,s=n}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var n=0,i=e.length,r=i>>>1;n<r;){var o=2*(n+1)-1,l=e[o],c=o+1,h=e[c];if(0>a(l,s))c<i&&0>a(h,l)?(e[n]=h,e[c]=s,n=c):(e[n]=l,e[o]=s,n=o);else{if(!(c<i&&0>a(h,s)))break e;e[n]=h,e[c]=s,n=c}}}return t}function a(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var r=Date,o=r.now();e.unstable_now=function(){return r.now()-o}}var l=[],c=[],h=1,u=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=s(c);null!==a;){if(null===a.callback)n(c);else{if(!(a.startTime<=e))break;n(c),a.sortIndex=a.expirationTime,t(l,a)}a=s(c)}}function w(e){if(m=!1,v(e),!f)if(null!==s(l))f=!0,I(x);else{var t=s(c);null!==t&&_(w,t.startTime-e)}}function x(t,a){f=!1,m&&(m=!1,y(S),S=-1),p=!0;var i=d;try{for(v(a),u=s(l);null!==u&&(!(u.expirationTime>a)||t&&!B());){var r=u.callback;if("function"==typeof r){u.callback=null,d=u.priorityLevel;var o=r(u.expirationTime<=a);a=e.unstable_now(),"function"==typeof o?u.callback=o:u===s(l)&&n(l),v(a)}else n(l);u=s(l)}if(null!==u)var h=!0;else{var g=s(c);null!==g&&_(w,g.startTime-a),h=!1}return h}finally{u=null,d=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,E=null,S=-1,P=5,T=-1;function B(){return!(e.unstable_now()-T<P)}function C(){if(null!==E){var t=e.unstable_now();T=t;var s=!0;try{s=E(!0,t)}finally{s?k():(A=!1,E=null)}}else A=!1}if("function"==typeof b)k=function(){b(C)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,R=M.port2;M.port1.onmessage=C,k=function(){R.postMessage(null)}}else k=function(){g(C,0)};function I(e){E=e,A||(A=!0,k())}function _(t,s){S=g((function(){t(e.unstable_now())}),s)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,I(x))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return s(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var s=d;d=t;try{return e()}finally{d=s}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=d;d=e;try{return t()}finally{d=s}},e.unstable_scheduleCallback=function(n,a,i){var r=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?r+i:r,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:h++,callback:a,priorityLevel:n,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>r?(n.sortIndex=i,t(c,n),null===s(l)&&n===s(c)&&(m?(y(S),S=-1):m=!0,_(w,i-r))):(n.sortIndex=o,t(l,n),f||p||(f=!0,I(x))),n},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(e){var t=d;return function(){var s=d;d=t;try{return e.apply(this,arguments)}finally{d=s}}}}(Ra),Ma.exports=Ra;var Ia=Ma.exports,_a=ya,Da=Ia;function Na(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var La=new Set,Fa={};function Oa(e,t){ja(e,t),ja(e+"Capture",t)}function ja(e,t){for(Fa[e]=t,e=0;e<t.length;e++)La.add(t[e])}var Ua=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ga=Object.prototype.hasOwnProperty,Ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,za={},Va={};function Wa(e,t,s,n,a,i,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=r}var $a={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$a[e]=new Wa(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$a[t]=new Wa(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$a[e]=new Wa(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$a[e]=new Wa(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$a[e]=new Wa(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$a[e]=new Wa(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){$a[e]=new Wa(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){$a[e]=new Wa(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){$a[e]=new Wa(e,5,!1,e.toLowerCase(),null,!1,!1)}));var qa=/[\-:]([a-z])/g;function Ka(e){return e[1].toUpperCase()}function Qa(e,t,s,n){var a=$a.hasOwnProperty(t)?$a[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,n){if(null==t||function(e,t,s,n){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,n))return!0;if(n)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,a,n)&&(s=null),n||null===a?function(e){return!!Ga.call(Va,e)||!Ga.call(za,e)&&(Ha.test(e)?Va[e]=!0:(za[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=null===s?3!==a.type&&"":s:(t=a.attributeName,n=a.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(a=a.type)||4===a&&!0===s?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(qa,Ka);$a[t]=new Wa(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(qa,Ka);$a[t]=new Wa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(qa,Ka);$a[t]=new Wa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){$a[e]=new Wa(e,1,!1,e.toLowerCase(),null,!1,!1)})),$a.xlinkHref=new Wa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){$a[e]=new Wa(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Za=_a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xa=Symbol.for("react.element"),Ya=Symbol.for("react.portal"),Ja=Symbol.for("react.fragment"),ei=Symbol.for("react.strict_mode"),ti=Symbol.for("react.profiler"),si=Symbol.for("react.provider"),ni=Symbol.for("react.context"),ai=Symbol.for("react.forward_ref"),ii=Symbol.for("react.suspense"),ri=Symbol.for("react.suspense_list"),oi=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),ci=Symbol.for("react.offscreen"),hi=Symbol.iterator;function ui(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=hi&&e[hi]||e["@@iterator"])?e:null}var di,pi=Object.assign;function fi(e){if(void 0===di)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);di=t&&t[1]||""}return"\n"+di+e}var mi=!1;function gi(e,t){if(!e||mi)return"";mi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var a=c.stack.split("\n"),i=n.stack.split("\n"),r=a.length-1,o=i.length-1;1<=r&&0<=o&&a[r]!==i[o];)o--;for(;1<=r&&0<=o;r--,o--)if(a[r]!==i[o]){if(1!==r||1!==o)do{if(r--,0>--o||a[r]!==i[o]){var l="\n"+a[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=o);break}}}finally{mi=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?fi(e):""}function yi(e){switch(e.tag){case 5:return fi(e.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return gi(e.type,!1);case 11:return gi(e.type.render,!1);case 1:return gi(e.type,!0);default:return""}}function bi(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ja:return"Fragment";case Ya:return"Portal";case ti:return"Profiler";case ei:return"StrictMode";case ii:return"Suspense";case ri:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ni:return(e.displayName||"Context")+".Consumer";case si:return(e._context.displayName||"Context")+".Provider";case ai:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case oi:return null!==(t=e.displayName||null)?t:bi(e.type)||"Memo";case li:t=e._payload,e=e._init;try{return bi(e(t))}catch(s){}}return null}function vi(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bi(t);case 8:return t===ei?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function wi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function xi(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ki(e){e._valueTracker||(e._valueTracker=function(e){var t=xi(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ai(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=xi(e)?e.checked?"true":"false":e.value),(e=n)!==s&&(t.setValue(e),!0)}function Ei(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Si(e,t){var s=t.checked;return pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function Pi(e,t){var s=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;s=wi(null!=t.value?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ti(e,t){null!=(t=t.checked)&&Qa(e,"checked",t,!1)}function Bi(e,t){Ti(e,t);var s=wi(t.value),n=t.type;if(null!=s)"number"===n?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Mi(e,t.type,s):t.hasOwnProperty("defaultValue")&&Mi(e,t.type,wi(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ci(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function Mi(e,t,s){"number"===t&&Ei(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ri=Array.isArray;function Ii(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+wi(s),t=null,a=0;a<e.length;a++){if(e[a].value===s)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function _i(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Na(91));return pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Di(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(Na(92));if(Ri(s)){if(1<s.length)throw Error(Na(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:wi(s)}}function Ni(e,t){var s=wi(t.value),n=wi(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=n&&(e.defaultValue=""+n)}function Li(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Fi(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oi(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fi(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ji,Ui,Gi=(Ui=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ji=ji||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ji.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,n){MSApp.execUnsafeLocalFunction((function(){return Ui(e,t)}))}:Ui);function Hi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];function Wi(e,t,s){return null==t||"boolean"==typeof t||""===t?"":s||"number"!=typeof t||0===t||zi.hasOwnProperty(e)&&zi[e]?(""+t).trim():t+"px"}function $i(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var n=0===s.indexOf("--"),a=Wi(s,t[s],n);"float"===s&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}Object.keys(zi).forEach((function(e){Vi.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zi[t]=zi[e]}))}));var qi=pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ki(e,t){if(t){if(qi[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Na(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Na(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Na(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Na(62))}}function Qi(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zi=null;function Xi(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Yi=null,Ji=null,er=null;function tr(e){if(e=Qc(e)){if("function"!=typeof Yi)throw Error(Na(280));var t=e.stateNode;t&&(t=Xc(t),Yi(e.stateNode,e.type,t))}}function sr(e){Ji?er?er.push(e):er=[e]:Ji=e}function nr(){if(Ji){var e=Ji,t=er;if(er=Ji=null,tr(e),t)for(e=0;e<t.length;e++)tr(t[e])}}function ar(e,t){return e(t)}function ir(){}var rr=!1;function or(e,t,s){if(rr)return e(t,s);rr=!0;try{return ar(e,t,s)}finally{rr=!1,(null!==Ji||null!==er)&&(ir(),nr())}}function lr(e,t){var s=e.stateNode;if(null===s)return null;var n=Xc(s);if(null===n)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(s&&"function"!=typeof s)throw Error(Na(231,t,typeof s));return s}var cr=!1;if(Ua)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){cr=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch(Ui){cr=!1}function ur(e,t,s,n,a,i,r,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(h){this.onError(h)}}var dr=!1,pr=null,fr=!1,mr=null,gr={onError:function(e){dr=!0,pr=e}};function yr(e,t,s,n,a,i,r,o,l){dr=!1,pr=null,ur.apply(gr,arguments)}function br(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function vr(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function wr(e){if(br(e)!==e)throw Error(Na(188))}function xr(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=br(e)))throw Error(Na(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return wr(a),e;if(i===n)return wr(a),t;i=i.sibling}throw Error(Na(188))}if(s.return!==n.return)s=a,n=i;else{for(var r=!1,o=a.child;o;){if(o===s){r=!0,s=a,n=i;break}if(o===n){r=!0,n=a,s=i;break}o=o.sibling}if(!r){for(o=i.child;o;){if(o===s){r=!0,s=i,n=a;break}if(o===n){r=!0,n=i,s=a;break}o=o.sibling}if(!r)throw Error(Na(189))}}if(s.alternate!==n)throw Error(Na(190))}if(3!==s.tag)throw Error(Na(188));return s.stateNode.current===s?e:t}(e))?kr(e):null}function kr(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=kr(e);if(null!==t)return t;e=e.sibling}return null}var Ar=Da.unstable_scheduleCallback,Er=Da.unstable_cancelCallback,Sr=Da.unstable_shouldYield,Pr=Da.unstable_requestPaint,Tr=Da.unstable_now,Br=Da.unstable_getCurrentPriorityLevel,Cr=Da.unstable_ImmediatePriority,Mr=Da.unstable_UserBlockingPriority,Rr=Da.unstable_NormalPriority,Ir=Da.unstable_LowPriority,_r=Da.unstable_IdlePriority,Dr=null,Nr=null,Lr=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Fr(e)/Or|0)|0},Fr=Math.log,Or=Math.LN2,jr=64,Ur=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hr(e,t){var s=e.pendingLanes;if(0===s)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,r=268435455&s;if(0!==r){var o=r&~a;0!==o?n=Gr(o):0!=(i&=r)&&(n=Gr(i))}else 0!=(r=s&~a)?n=Gr(r):0!==i&&(n=Gr(i));if(0===n)return 0;if(0!==t&&t!==n&&!(t&a)&&((a=n&-n)>=(i=t&-t)||16===a&&4194240&i))return t;if(4&n&&(n|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(s=31-Lr(t)),n|=e[s],t&=~a;return n}function zr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Vr(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wr(){var e=jr;return!(4194240&(jr<<=1))&&(jr=64),e}function $r(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function qr(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Lr(t)]=s}function Kr(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Lr(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var Qr=0;function Zr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Xr,Yr,Jr,eo,to,so=!1,no=[],ao=null,io=null,ro=null,oo=new Map,lo=new Map,co=[],ho="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uo(e,t){switch(e){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(t.pointerId)}}function po(e,t,s,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=Qc(t))&&Yr(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function fo(e){var t=Kc(e.target);if(null!==t){var s=br(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=vr(s)))return e.blockedOn=t,void to(e.priority,(function(){Jr(s)}))}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function mo(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Po(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=Qc(s))&&Yr(t),e.blockedOn=s,!1;var n=new(s=e.nativeEvent).constructor(s.type,s);Zi=n,s.target.dispatchEvent(n),Zi=null,t.shift()}return!0}function go(e,t,s){mo(e)&&s.delete(t)}function yo(){so=!1,null!==ao&&mo(ao)&&(ao=null),null!==io&&mo(io)&&(io=null),null!==ro&&mo(ro)&&(ro=null),oo.forEach(go),lo.forEach(go)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,so||(so=!0,Da.unstable_scheduleCallback(Da.unstable_NormalPriority,yo)))}function vo(e){function t(t){return bo(t,e)}if(0<no.length){bo(no[0],e);for(var s=1;s<no.length;s++){var n=no[s];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==ao&&bo(ao,e),null!==io&&bo(io,e),null!==ro&&bo(ro,e),oo.forEach(t),lo.forEach(t),s=0;s<co.length;s++)(n=co[s]).blockedOn===e&&(n.blockedOn=null);for(;0<co.length&&null===(s=co[0]).blockedOn;)fo(s),null===s.blockedOn&&co.shift()}var wo=Za.ReactCurrentBatchConfig,xo=!0;function ko(e,t,s,n){var a=Qr,i=wo.transition;wo.transition=null;try{Qr=1,Eo(e,t,s,n)}finally{Qr=a,wo.transition=i}}function Ao(e,t,s,n){var a=Qr,i=wo.transition;wo.transition=null;try{Qr=4,Eo(e,t,s,n)}finally{Qr=a,wo.transition=i}}function Eo(e,t,s,n){if(xo){var a=Po(e,t,s,n);if(null===a)wc(e,t,n,So,s),uo(e,n);else if(function(e,t,s,n,a){switch(t){case"focusin":return ao=po(ao,e,t,s,n,a),!0;case"dragenter":return io=po(io,e,t,s,n,a),!0;case"mouseover":return ro=po(ro,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return oo.set(i,po(oo.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,lo.set(i,po(lo.get(i)||null,e,t,s,n,a)),!0}return!1}(a,e,t,s,n))n.stopPropagation();else if(uo(e,n),4&t&&-1<ho.indexOf(e)){for(;null!==a;){var i=Qc(a);if(null!==i&&Xr(i),null===(i=Po(e,t,s,n))&&wc(e,t,n,So,s),i===a)break;a=i}null!==a&&n.stopPropagation()}else wc(e,t,n,null,s)}}var So=null;function Po(e,t,s,n){if(So=null,null!==(e=Kc(e=Xi(n))))if(null===(t=br(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=vr(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function To(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Br()){case Cr:return 1;case Mr:return 4;case Rr:case Ir:return 16;case _r:return 536870912;default:return 16}default:return 16}}var Bo=null,Co=null,Mo=null;function Ro(){if(Mo)return Mo;var e,t,s=Co,n=s.length,a="value"in Bo?Bo.value:Bo.textContent,i=a.length;for(e=0;e<n&&s[e]===a[e];e++);var r=n-e;for(t=1;t<=r&&s[n-t]===a[i-t];t++);return Mo=a.slice(e,1<t?1-t:void 0)}function Io(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function _o(){return!0}function Do(){return!1}function No(e){function t(t,s,n,a,i){for(var r in this._reactName=t,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(a):a[r]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?_o:Do,this.isPropagationStopped=Do,this}return pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),t}var Lo,Fo,Oo,jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=No(jo),Go=pi({},jo,{view:0,detail:0}),Ho=No(Go),zo=pi({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tl,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oo&&(Oo&&"mousemove"===e.type?(Lo=e.screenX-Oo.screenX,Fo=e.screenY-Oo.screenY):Fo=Lo=0,Oo=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:Fo}}),Vo=No(zo),Wo=No(pi({},zo,{dataTransfer:0})),$o=No(pi({},Go,{relatedTarget:0})),qo=No(pi({},jo,{animationName:0,elapsedTime:0,pseudoElement:0})),Ko=pi({},jo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qo=No(Ko),Zo=No(pi({},jo,{data:0})),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Jo[e])&&!!t[e]}function tl(){return el}var sl=pi({},Go,{key:function(e){if(e.key){var t=Xo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Io(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Yo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tl,charCode:function(e){return"keypress"===e.type?Io(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Io(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),nl=No(sl),al=No(pi({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),il=No(pi({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tl})),rl=No(pi({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0})),ol=pi({},zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ll=No(ol),cl=[9,13,27,32],hl=Ua&&"CompositionEvent"in window,ul=null;Ua&&"documentMode"in document&&(ul=document.documentMode);var dl=Ua&&"TextEvent"in window&&!ul,pl=Ua&&(!hl||ul&&8<ul&&11>=ul),fl=String.fromCharCode(32),ml=!1;function gl(e,t){switch(e){case"keyup":return-1!==cl.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var bl=!1,vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!vl[e.type]:"textarea"===t}function xl(e,t,s,n){sr(n),0<(t=kc(t,"onChange")).length&&(s=new Uo("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var kl=null,Al=null;function El(e){fc(e,0)}function Sl(e){if(Ai(Zc(e)))return e}function Pl(e,t){if("change"===e)return t}var Tl=!1;if(Ua){var Bl;if(Ua){var Cl="oninput"in document;if(!Cl){var Ml=document.createElement("div");Ml.setAttribute("oninput","return;"),Cl="function"==typeof Ml.oninput}Bl=Cl}else Bl=!1;Tl=Bl&&(!document.documentMode||9<document.documentMode)}function Rl(){kl&&(kl.detachEvent("onpropertychange",Il),Al=kl=null)}function Il(e){if("value"===e.propertyName&&Sl(Al)){var t=[];xl(t,Al,e,Xi(e)),or(El,t)}}function _l(e,t,s){"focusin"===e?(Rl(),Al=s,(kl=t).attachEvent("onpropertychange",Il)):"focusout"===e&&Rl()}function Dl(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Sl(Al)}function Nl(e,t){if("click"===e)return Sl(t)}function Ll(e,t){if("input"===e||"change"===e)return Sl(t)}var Fl="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ol(e,t){if(Fl(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Ga.call(t,a)||!Fl(e[a],t[a]))return!1}return!0}function jl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ul(e,t){var s,n=jl(e);for(e=0;n;){if(3===n.nodeType){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jl(n)}}function Gl(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Gl(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Hl(){for(var e=window,t=Ei();t instanceof e.HTMLIFrameElement;){try{var s="string"==typeof t.contentWindow.location.href}catch(n){s=!1}if(!s)break;t=Ei((e=t.contentWindow).document)}return t}function zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Vl(e){var t=Hl(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Gl(s.ownerDocument.documentElement,s)){if(null!==n&&zl(s))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=void 0===n.end?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Ul(s,i);var r=Ul(s,n);a&&r&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wl=Ua&&"documentMode"in document&&11>=document.documentMode,$l=null,ql=null,Kl=null,Ql=!1;function Zl(e,t,s){var n=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Ql||null==$l||$l!==Ei(n)||(n="selectionStart"in(n=$l)&&zl(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kl&&Ol(Kl,n)||(Kl=n,0<(n=kc(ql,"onSelect")).length&&(t=new Uo("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=$l)))}function Xl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Yl={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Jl={},ec={};function tc(e){if(Jl[e])return Jl[e];if(!Yl[e])return e;var t,s=Yl[e];for(t in s)if(s.hasOwnProperty(t)&&t in ec)return Jl[e]=s[t];return e}Ua&&(ec=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);var sc=tc("animationend"),nc=tc("animationiteration"),ac=tc("animationstart"),ic=tc("transitionend"),rc=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lc(e,t){rc.set(e,t),Oa(t,[e])}for(var cc=0;cc<oc.length;cc++){var hc=oc[cc];lc(hc.toLowerCase(),"on"+(hc[0].toUpperCase()+hc.slice(1)))}lc(sc,"onAnimationEnd"),lc(nc,"onAnimationIteration"),lc(ac,"onAnimationStart"),lc("dblclick","onDoubleClick"),lc("focusin","onFocus"),lc("focusout","onBlur"),lc(ic,"onTransitionEnd"),ja("onMouseEnter",["mouseout","mouseover"]),ja("onMouseLeave",["mouseout","mouseover"]),ja("onPointerEnter",["pointerout","pointerover"]),ja("onPointerLeave",["pointerout","pointerover"]),Oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dc=new Set("cancel close invalid load scroll toggle".split(" ").concat(uc));function pc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,n,a,i,r,o,l){if(yr.apply(this,arguments),dr){if(!dr)throw Error(Na(198));var c=pr;dr=!1,pr=null,fr||(fr=!0,mr=c)}}(n,t,void 0,e),e.currentTarget=null}function fc(e,t){t=!!(4&t);for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var r=n.length-1;0<=r;r--){var o=n[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;pc(a,o,c),i=l}else for(r=0;r<n.length;r++){if(l=(o=n[r]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;pc(a,o,c),i=l}}}if(fr)throw e=mr,fr=!1,mr=null,e}function mc(e,t){var s=t[Wc];void 0===s&&(s=t[Wc]=new Set);var n=e+"__bubble";s.has(n)||(vc(t,e,2,!1),s.add(n))}function gc(e,t,s){var n=0;t&&(n|=4),vc(s,e,n,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function bc(e){if(!e[yc]){e[yc]=!0,La.forEach((function(t){"selectionchange"!==t&&(dc.has(t)||gc(t,!1,e),gc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[yc]||(t[yc]=!0,gc("selectionchange",!1,t))}}function vc(e,t,s,n){switch(To(t)){case 1:var a=ko;break;case 4:a=Ao;break;default:a=Eo}s=a.bind(null,t,s,e),a=void 0,!cr||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):void 0!==a?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function wc(e,t,s,n,a){var i=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var r=n.tag;if(3===r||4===r){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===r)for(r=n.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;r=r.return}for(;null!==o;){if(null===(r=Kc(o)))return;if(5===(l=r.tag)||6===l){n=i=r;continue e}o=o.parentNode}}n=n.return}or((function(){var n=i,a=Xi(s),r=[];e:{var o=rc.get(e);if(void 0!==o){var l=Uo,c=e;switch(e){case"keypress":if(0===Io(s))break e;case"keydown":case"keyup":l=nl;break;case"focusin":c="focus",l=$o;break;case"focusout":c="blur",l=$o;break;case"beforeblur":case"afterblur":l=$o;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=il;break;case sc:case nc:case ac:l=qo;break;case ic:l=rl;break;case"scroll":l=Ho;break;case"wheel":l=ll;break;case"copy":case"cut":case"paste":l=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=al}var h=!!(4&t),u=!h&&"scroll"===e,d=h?null!==o?o+"Capture":null:o;h=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=lr(f,d))&&h.push(xc(f,m,p))),u)break;f=f.return}0<h.length&&(o=new l(o,c,null,s,a),r.push({event:o,listeners:h}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===Zi||!(c=s.relatedTarget||s.fromElement)||!Kc(c)&&!c[Vc])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=s.relatedTarget||s.toElement)?Kc(c):null)&&(c!==(u=br(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=Vo,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=al,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==l?o:Zc(l),p=null==c?o:Zc(c),(o=new h(m,f+"leave",l,s,a)).target=u,o.relatedTarget=p,m=null,Kc(a)===n&&((h=new h(d,f+"enter",c,s,a)).target=p,h.relatedTarget=u,m=h),u=m,l&&c)e:{for(d=c,f=0,p=h=l;p;p=Ac(p))f++;for(p=0,m=d;m;m=Ac(m))p++;for(;0<f-p;)h=Ac(h),f--;for(;0<p-f;)d=Ac(d),p--;for(;f--;){if(h===d||null!==d&&h===d.alternate)break e;h=Ac(h),d=Ac(d)}h=null}else h=null;null!==l&&Ec(r,o,l,h,!1),null!==c&&null!==u&&Ec(r,u,c,h,!0)}if("select"===(l=(o=n?Zc(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Pl;else if(wl(o))if(Tl)g=Ll;else{g=Dl;var y=_l}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Nl);switch(g&&(g=g(e,n))?xl(r,g,s,a):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&Mi(o,"number",o.value)),y=n?Zc(n):window,e){case"focusin":(wl(y)||"true"===y.contentEditable)&&($l=y,ql=n,Kl=null);break;case"focusout":Kl=ql=$l=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Zl(r,s,a);break;case"selectionchange":if(Wl)break;case"keydown":case"keyup":Zl(r,s,a)}var b;if(hl)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else bl?gl(e,s)&&(v="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(v="onCompositionStart");v&&(pl&&"ko"!==s.locale&&(bl||"onCompositionStart"!==v?"onCompositionEnd"===v&&bl&&(b=Ro()):(Co="value"in(Bo=a)?Bo.value:Bo.textContent,bl=!0)),0<(y=kc(n,v)).length&&(v=new Zo(v,e,null,s,a),r.push({event:v,listeners:y}),(b||null!==(b=yl(s)))&&(v.data=b))),(b=dl?function(e,t){switch(e){case"compositionend":return yl(t);case"keypress":return 32!==t.which?null:(ml=!0,fl);case"textInput":return(e=t.data)===fl&&ml?null:e;default:return null}}(e,s):function(e,t){if(bl)return"compositionend"===e||!hl&&gl(e,t)?(e=Ro(),Mo=Co=Bo=null,bl=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pl&&"ko"!==t.locale?null:t.data}}(e,s))&&0<(n=kc(n,"onBeforeInput")).length&&(a=new Zo("onBeforeInput","beforeinput",null,s,a),r.push({event:a,listeners:n}),a.data=b)}fc(r,t)}))}function xc(e,t,s){return{instance:e,listener:t,currentTarget:s}}function kc(e,t){for(var s=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=lr(e,s))&&n.unshift(xc(e,i,a)),null!=(i=lr(e,t))&&n.push(xc(e,i,a))),e=e.return}return n}function Ac(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ec(e,t,s,n,a){for(var i=t._reactName,r=[];null!==s&&s!==n;){var o=s,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=lr(s,i))&&r.unshift(xc(s,l,o)):a||null!=(l=lr(s,i))&&r.push(xc(s,l,o))),s=s.return}0!==r.length&&e.push({event:t,listeners:r})}var Sc=/\r\n?/g,Pc=/\u0000|\uFFFD/g;function Tc(e){return("string"==typeof e?e:""+e).replace(Sc,"\n").replace(Pc,"")}function Bc(e,t,s){if(t=Tc(t),Tc(e)!==t&&s)throw Error(Na(425))}function Cc(){}var Mc=null,Rc=null;function Ic(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _c="function"==typeof setTimeout?setTimeout:void 0,Dc="function"==typeof clearTimeout?clearTimeout:void 0,Nc="function"==typeof Promise?Promise:void 0,Lc="function"==typeof queueMicrotask?queueMicrotask:void 0!==Nc?function(e){return Nc.resolve(null).then(e).catch(Fc)}:_c;function Fc(e){setTimeout((function(){throw e}))}function Oc(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&8===a.nodeType)if("/$"===(s=a.data)){if(0===n)return e.removeChild(a),void vo(t);n--}else"$"!==s&&"$?"!==s&&"$!"!==s||n++;s=a}while(s);vo(t)}function jc(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Uc(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),Hc="__reactFiber$"+Gc,zc="__reactProps$"+Gc,Vc="__reactContainer$"+Gc,Wc="__reactEvents$"+Gc,$c="__reactListeners$"+Gc,qc="__reactHandles$"+Gc;function Kc(e){var t=e[Hc];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Vc]||s[Hc]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=Uc(e);null!==e;){if(s=e[Hc])return s;e=Uc(e)}return t}s=(e=s).parentNode}return null}function Qc(e){return!(e=e[Hc]||e[Vc])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zc(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Na(33))}function Xc(e){return e[zc]||null}var Yc=[],Jc=-1;function eh(e){return{current:e}}function th(e){0>Jc||(e.current=Yc[Jc],Yc[Jc]=null,Jc--)}function sh(e,t){Jc++,Yc[Jc]=e.current,e.current=t}var nh={},ah=eh(nh),ih=eh(!1),rh=nh;function oh(e,t){var s=e.type.contextTypes;if(!s)return nh;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in s)i[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function lh(e){return null!=e.childContextTypes}function ch(){th(ih),th(ah)}function hh(e,t,s){if(ah.current!==nh)throw Error(Na(168));sh(ah,t),sh(ih,s)}function uh(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return s;for(var a in n=n.getChildContext())if(!(a in t))throw Error(Na(108,vi(e)||"Unknown",a));return pi({},s,n)}function dh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nh,rh=ah.current,sh(ah,e),sh(ih,ih.current),!0}function ph(e,t,s){var n=e.stateNode;if(!n)throw Error(Na(169));s?(e=uh(e,t,rh),n.__reactInternalMemoizedMergedChildContext=e,th(ih),th(ah),sh(ah,e)):th(ih),sh(ih,s)}var fh=null,mh=!1,gh=!1;function yh(e){null===fh?fh=[e]:fh.push(e)}function bh(){if(!gh&&null!==fh){gh=!0;var e=0,t=Qr;try{var s=fh;for(Qr=1;e<s.length;e++){var n=s[e];do{n=n(!0)}while(null!==n)}fh=null,mh=!1}catch(a){throw null!==fh&&(fh=fh.slice(e+1)),Ar(Cr,bh),a}finally{Qr=t,gh=!1}}return null}var vh=[],wh=0,xh=null,kh=0,Ah=[],Eh=0,Sh=null,Ph=1,Th="";function Bh(e,t){vh[wh++]=kh,vh[wh++]=xh,xh=e,kh=t}function Ch(e,t,s){Ah[Eh++]=Ph,Ah[Eh++]=Th,Ah[Eh++]=Sh,Sh=e;var n=Ph;e=Th;var a=32-Lr(n)-1;n&=~(1<<a),s+=1;var i=32-Lr(t)+a;if(30<i){var r=a-a%5;i=(n&(1<<r)-1).toString(32),n>>=r,a-=r,Ph=1<<32-Lr(t)+a|s<<a|n,Th=i+e}else Ph=1<<i|s<<a|n,Th=e}function Mh(e){null!==e.return&&(Bh(e,1),Ch(e,1,0))}function Rh(e){for(;e===xh;)xh=vh[--wh],vh[wh]=null,kh=vh[--wh],vh[wh]=null;for(;e===Sh;)Sh=Ah[--Eh],Ah[Eh]=null,Th=Ah[--Eh],Ah[Eh]=null,Ph=Ah[--Eh],Ah[Eh]=null}var Ih=null,_h=null,Dh=!1,Nh=null;function Lh(e,t){var s=om(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function Fh(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ih=e,_h=jc(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ih=e,_h=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Sh?{id:Ph,overflow:Th}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=om(18,null,null,0)).stateNode=t,s.return=e,e.child=s,Ih=e,_h=null,!0);default:return!1}}function Oh(e){return!(!(1&e.mode)||128&e.flags)}function jh(e){if(Dh){var t=_h;if(t){var s=t;if(!Fh(e,t)){if(Oh(e))throw Error(Na(418));t=jc(s.nextSibling);var n=Ih;t&&Fh(e,t)?Lh(n,s):(e.flags=-4097&e.flags|2,Dh=!1,Ih=e)}}else{if(Oh(e))throw Error(Na(418));e.flags=-4097&e.flags|2,Dh=!1,Ih=e}}}function Uh(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ih=e}function Gh(e){if(e!==Ih)return!1;if(!Dh)return Uh(e),Dh=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Ic(e.type,e.memoizedProps)),t&&(t=_h)){if(Oh(e))throw Hh(),Error(Na(418));for(;t;)Lh(e,t),t=jc(t.nextSibling)}if(Uh(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Na(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){_h=jc(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}_h=null}}else _h=Ih?jc(e.stateNode.nextSibling):null;return!0}function Hh(){for(var e=_h;e;)e=jc(e.nextSibling)}function zh(){_h=Ih=null,Dh=!1}function Vh(e){null===Nh?Nh=[e]:Nh.push(e)}var Wh=Za.ReactCurrentBatchConfig;function $h(e,t,s){if(null!==(e=s.ref)&&"function"!=typeof e&&"object"!=typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(Na(309));var n=s.stateNode}if(!n)throw Error(Na(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Na(284));if(!s._owner)throw Error(Na(290,e))}return e}function qh(e,t){throw e=Object.prototype.toString.call(t),Error(Na(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Kh(e){return(0,e._init)(e._payload)}function Qh(e){function t(t,s){if(e){var n=t.deletions;null===n?(t.deletions=[s],t.flags|=16):n.push(s)}}function s(s,n){if(!e)return null;for(;null!==n;)t(s,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=cm(e,t)).index=0,e.sibling=null,e}function i(t,s,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<s?(t.flags|=2,s):n:(t.flags|=2,s):(t.flags|=1048576,s)}function r(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,n){return null===t||6!==t.tag?((t=pm(s,e.mode,n)).return=e,t):((t=a(t,s)).return=e,t)}function l(e,t,s,n){var i=s.type;return i===Ja?h(e,t,s.props.children,n,s.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===li&&Kh(i)===t.type)?((n=a(t,s.props)).ref=$h(e,t,s),n.return=e,n):((n=hm(s.type,s.key,s.props,null,e.mode,n)).ref=$h(e,t,s),n.return=e,n)}function c(e,t,s,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=fm(s,e.mode,n)).return=e,t):((t=a(t,s.children||[])).return=e,t)}function h(e,t,s,n,i){return null===t||7!==t.tag?((t=um(s,e.mode,n,i)).return=e,t):((t=a(t,s)).return=e,t)}function u(e,t,s){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=pm(""+t,e.mode,s)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Xa:return(s=hm(t.type,t.key,t.props,null,e.mode,s)).ref=$h(e,null,t),s.return=e,s;case Ya:return(t=fm(t,e.mode,s)).return=e,t;case li:return u(e,(0,t._init)(t._payload),s)}if(Ri(t)||ui(t))return(t=um(t,e.mode,s,null)).return=e,t;qh(e,t)}return null}function d(e,t,s,n){var a=null!==t?t.key:null;if("string"==typeof s&&""!==s||"number"==typeof s)return null!==a?null:o(e,t,""+s,n);if("object"==typeof s&&null!==s){switch(s.$$typeof){case Xa:return s.key===a?l(e,t,s,n):null;case Ya:return s.key===a?c(e,t,s,n):null;case li:return d(e,t,(a=s._init)(s._payload),n)}if(Ri(s)||ui(s))return null!==a?null:h(e,t,s,n,null);qh(e,s)}return null}function p(e,t,s,n,a){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(s)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xa:return l(t,e=e.get(null===n.key?s:n.key)||null,n,a);case Ya:return c(t,e=e.get(null===n.key?s:n.key)||null,n,a);case li:return p(e,t,s,(0,n._init)(n._payload),a)}if(Ri(n)||ui(n))return h(t,e=e.get(s)||null,n,a,null);qh(t,n)}return null}return function o(l,c,h,f){if("object"==typeof h&&null!==h&&h.type===Ja&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case Xa:e:{for(var m=h.key,g=c;null!==g;){if(g.key===m){if((m=h.type)===Ja){if(7===g.tag){s(l,g.sibling),(c=a(g,h.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===li&&Kh(m)===g.type){s(l,g.sibling),(c=a(g,h.props)).ref=$h(l,g,h),c.return=l,l=c;break e}s(l,g);break}t(l,g),g=g.sibling}h.type===Ja?((c=um(h.props.children,l.mode,f,h.key)).return=l,l=c):((f=hm(h.type,h.key,h.props,null,l.mode,f)).ref=$h(l,c,h),f.return=l,l=f)}return r(l);case Ya:e:{for(g=h.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){s(l,c.sibling),(c=a(c,h.children||[])).return=l,l=c;break e}s(l,c);break}t(l,c),c=c.sibling}(c=fm(h,l.mode,f)).return=l,l=c}return r(l);case li:return o(l,c,(g=h._init)(h._payload),f)}if(Ri(h))return function(a,r,o,l){for(var c=null,h=null,f=r,m=r=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var y=d(a,f,o[m],l);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(a,f),r=i(y,r,m),null===h?c=y:h.sibling=y,h=y,f=g}if(m===o.length)return s(a,f),Dh&&Bh(a,m),c;if(null===f){for(;m<o.length;m++)null!==(f=u(a,o[m],l))&&(r=i(f,r,m),null===h?c=f:h.sibling=f,h=f);return Dh&&Bh(a,m),c}for(f=n(a,f);m<o.length;m++)null!==(g=p(f,a,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),r=i(g,r,m),null===h?c=g:h.sibling=g,h=g);return e&&f.forEach((function(e){return t(a,e)})),Dh&&Bh(a,m),c}(l,c,h,f);if(ui(h))return function(a,r,o,l){var c=ui(o);if("function"!=typeof c)throw Error(Na(150));if(null==(o=c.call(o)))throw Error(Na(151));for(var h=c=null,f=r,m=r=0,g=null,y=o.next();null!==f&&!y.done;m++,y=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=d(a,f,y.value,l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(a,f),r=i(b,r,m),null===h?c=b:h.sibling=b,h=b,f=g}if(y.done)return s(a,f),Dh&&Bh(a,m),c;if(null===f){for(;!y.done;m++,y=o.next())null!==(y=u(a,y.value,l))&&(r=i(y,r,m),null===h?c=y:h.sibling=y,h=y);return Dh&&Bh(a,m),c}for(f=n(a,f);!y.done;m++,y=o.next())null!==(y=p(f,a,m,y.value,l))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),r=i(y,r,m),null===h?c=y:h.sibling=y,h=y);return e&&f.forEach((function(e){return t(a,e)})),Dh&&Bh(a,m),c}(l,c,h,f);qh(l,h)}return"string"==typeof h&&""!==h||"number"==typeof h?(h=""+h,null!==c&&6===c.tag?(s(l,c.sibling),(c=a(c,h)).return=l,l=c):(s(l,c),(c=pm(h,l.mode,f)).return=l,l=c),r(l)):s(l,c)}}var Zh=Qh(!0),Xh=Qh(!1),Yh=eh(null),Jh=null,eu=null,tu=null;function su(){tu=eu=Jh=null}function nu(e){var t=Yh.current;th(Yh),e._currentValue=t}function au(e,t,s){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function iu(e,t){Jh=e,tu=eu=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Kd=!0),e.firstContext=null)}function ru(e){var t=e._currentValue;if(tu!==e)if(e={context:e,memoizedValue:t,next:null},null===eu){if(null===Jh)throw Error(Na(308));eu=e,Jh.dependencies={lanes:0,firstContext:e}}else eu=eu.next=e;return t}var ou=null;function lu(e){null===ou?ou=[e]:ou.push(e)}function cu(e,t,s,n){var a=t.interleaved;return null===a?(s.next=s,lu(t)):(s.next=a.next,a.next=s),t.interleaved=s,hu(e,n)}function hu(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var uu=!1;function du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mu(e,t,s){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&nf){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,hu(e,s)}return null===(a=n.interleaved)?(t.next=t,lu(n)):(t.next=a.next,a.next=t),n.interleaved=t,hu(e,s)}function gu(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&s)){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Kr(e,s)}}function yu(e,t){var s=e.updateQueue,n=e.alternate;if(null!==n&&s===(n=n.updateQueue)){var a=null,i=null;if(null!==(s=s.firstBaseUpdate)){do{var r={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===i?a=i=r:i=i.next=r,s=s.next}while(null!==s);null===i?a=i=t:i=i.next=t}else a=i=t;return s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function bu(e,t,s,n){var a=e.updateQueue;uu=!1;var i=a.firstBaseUpdate,r=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===r?i=c:r.next=c,r=l;var h=e.alternate;null!==h&&(o=(h=h.updateQueue).lastBaseUpdate)!==r&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l)}if(null!==i){var u=a.baseState;for(r=0,h=c=l=null,o=i;;){var d=o.lane,p=o.eventTime;if((n&d)===d){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=s,m.tag){case 1:if("function"==typeof(f=m.payload)){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,u,d):f))break e;u=pi({},u,d);break e;case 2:uu=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,l=u):h=h.next=p,r|=d;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(d=o).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===h&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=h,null!==(t=a.shared.interleaved)){a=t;do{r|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);df|=r,e.lanes=r,e.memoizedState=u}}function vu(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=s,"function"!=typeof a)throw Error(Na(191,a));a.call(n)}}}var wu={},xu=eh(wu),ku=eh(wu),Au=eh(wu);function Eu(e){if(e===wu)throw Error(Na(174));return e}function Su(e,t){switch(sh(Au,t),sh(ku,e),sh(xu,wu),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oi(null,"");break;default:t=Oi(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}th(xu),sh(xu,t)}function Pu(){th(xu),th(ku),th(Au)}function Tu(e){Eu(Au.current);var t=Eu(xu.current),s=Oi(t,e.type);t!==s&&(sh(ku,e),sh(xu,s))}function Bu(e){ku.current===e&&(th(xu),th(ku))}var Cu=eh(0);function Mu(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ru=[];function Iu(){for(var e=0;e<Ru.length;e++)Ru[e]._workInProgressVersionPrimary=null;Ru.length=0}var _u=Za.ReactCurrentDispatcher,Du=Za.ReactCurrentBatchConfig,Nu=0,Lu=null,Fu=null,Ou=null,ju=!1,Uu=!1,Gu=0,Hu=0;function zu(){throw Error(Na(321))}function Vu(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Fl(e[s],t[s]))return!1;return!0}function Wu(e,t,s,n,a,i){if(Nu=i,Lu=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_u.current=null===e||null===e.memoizedState?Bd:Cd,e=s(n,a),Uu){i=0;do{if(Uu=!1,Gu=0,25<=i)throw Error(Na(301));i+=1,Ou=Fu=null,t.updateQueue=null,_u.current=Md,e=s(n,a)}while(Uu)}if(_u.current=Td,t=null!==Fu&&null!==Fu.next,Nu=0,Ou=Fu=Lu=null,ju=!1,t)throw Error(Na(300));return e}function $u(){var e=0!==Gu;return Gu=0,e}function qu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ou?Lu.memoizedState=Ou=e:Ou=Ou.next=e,Ou}function Ku(){if(null===Fu){var e=Lu.alternate;e=null!==e?e.memoizedState:null}else e=Fu.next;var t=null===Ou?Lu.memoizedState:Ou.next;if(null!==t)Ou=t,Fu=e;else{if(null===e)throw Error(Na(310));e={memoizedState:(Fu=e).memoizedState,baseState:Fu.baseState,baseQueue:Fu.baseQueue,queue:Fu.queue,next:null},null===Ou?Lu.memoizedState=Ou=e:Ou=Ou.next=e}return Ou}function Qu(e,t){return"function"==typeof t?t(e):t}function Zu(e){var t=Ku(),s=t.queue;if(null===s)throw Error(Na(311));s.lastRenderedReducer=e;var n=Fu,a=n.baseQueue,i=s.pending;if(null!==i){if(null!==a){var r=a.next;a.next=i.next,i.next=r}n.baseQueue=a=i,s.pending=null}if(null!==a){i=a.next,n=n.baseState;var o=r=null,l=null,c=i;do{var h=c.lane;if((Nu&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,r=n):l=l.next=u,Lu.lanes|=h,df|=h}c=c.next}while(null!==c&&c!==i);null===l?r=n:l.next=o,Fl(n,t.memoizedState)||(Kd=!0),t.memoizedState=n,t.baseState=r,t.baseQueue=l,s.lastRenderedState=n}if(null!==(e=s.interleaved)){a=e;do{i=a.lane,Lu.lanes|=i,df|=i,a=a.next}while(a!==e)}else null===a&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Xu(e){var t=Ku(),s=t.queue;if(null===s)throw Error(Na(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(null!==a){s.pending=null;var r=a=a.next;do{i=e(i,r.action),r=r.next}while(r!==a);Fl(i,t.memoizedState)||(Kd=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Yu(){}function Ju(e,t){var s=Lu,n=Ku(),a=t(),i=!Fl(n.memoizedState,a);if(i&&(n.memoizedState=a,Kd=!0),n=n.queue,ud(sd.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||null!==Ou&&1&Ou.memoizedState.tag){if(s.flags|=2048,rd(9,td.bind(null,s,n,a,t),void 0,null),null===af)throw Error(Na(349));30&Nu||ed(s,t,a)}return a}function ed(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=Lu.updateQueue)?(t={lastEffect:null,stores:null},Lu.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function td(e,t,s,n){t.value=s,t.getSnapshot=n,nd(t)&&ad(e)}function sd(e,t,s){return s((function(){nd(t)&&ad(e)}))}function nd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Fl(e,s)}catch(n){return!0}}function ad(e){var t=hu(e,1);null!==t&&If(t,e,1,-1)}function id(e){var t=qu();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:e},t.queue=e,e=e.dispatch=Ad.bind(null,Lu,e),[t.memoizedState,e]}function rd(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},null===(t=Lu.updateQueue)?(t={lastEffect:null,stores:null},Lu.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function od(){return Ku().memoizedState}function ld(e,t,s,n){var a=qu();Lu.flags|=e,a.memoizedState=rd(1|t,s,void 0,void 0===n?null:n)}function cd(e,t,s,n){var a=Ku();n=void 0===n?null:n;var i=void 0;if(null!==Fu){var r=Fu.memoizedState;if(i=r.destroy,null!==n&&Vu(n,r.deps))return void(a.memoizedState=rd(t,s,i,n))}Lu.flags|=e,a.memoizedState=rd(1|t,s,i,n)}function hd(e,t){return ld(8390656,8,e,t)}function ud(e,t){return cd(2048,8,e,t)}function dd(e,t){return cd(4,2,e,t)}function pd(e,t){return cd(4,4,e,t)}function fd(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function md(e,t,s){return s=null!=s?s.concat([e]):null,cd(4,4,fd.bind(null,t,e),s)}function gd(){}function yd(e,t){var s=Ku();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&Vu(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function bd(e,t){var s=Ku();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&Vu(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function vd(e,t,s){return 21&Nu?(Fl(s,t)||(s=Wr(),Lu.lanes|=s,df|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kd=!0),e.memoizedState=s)}function wd(e,t){var s=Qr;Qr=0!==s&&4>s?s:4,e(!0);var n=Du.transition;Du.transition={};try{e(!1),t()}finally{Qr=s,Du.transition=n}}function xd(){return Ku().memoizedState}function kd(e,t,s){var n=Rf(e);s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Ed(e)?Sd(t,s):null!==(s=cu(e,t,s,n))&&(If(s,e,n,Mf()),Pd(s,t,n))}function Ad(e,t,s){var n=Rf(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ed(e))Sd(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=i(r,s);if(a.hasEagerState=!0,a.eagerState=o,Fl(o,r)){var l=t.interleaved;return null===l?(a.next=a,lu(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(s=cu(e,t,a,n))&&(If(s,e,n,a=Mf()),Pd(s,t,n))}}function Ed(e){var t=e.alternate;return e===Lu||null!==t&&t===Lu}function Sd(e,t){Uu=ju=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pd(e,t,s){if(4194240&s){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Kr(e,s)}}var Td={readContext:ru,useCallback:zu,useContext:zu,useEffect:zu,useImperativeHandle:zu,useInsertionEffect:zu,useLayoutEffect:zu,useMemo:zu,useReducer:zu,useRef:zu,useState:zu,useDebugValue:zu,useDeferredValue:zu,useTransition:zu,useMutableSource:zu,useSyncExternalStore:zu,useId:zu,unstable_isNewReconciler:!1},Bd={readContext:ru,useCallback:function(e,t){return qu().memoizedState=[e,void 0===t?null:t],e},useContext:ru,useEffect:hd,useImperativeHandle:function(e,t,s){return s=null!=s?s.concat([e]):null,ld(4194308,4,fd.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ld(4194308,4,e,t)},useInsertionEffect:function(e,t){return ld(4,2,e,t)},useMemo:function(e,t){var s=qu();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=qu();return t=void 0!==s?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=kd.bind(null,Lu,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},qu().memoizedState=e},useState:id,useDebugValue:gd,useDeferredValue:function(e){return qu().memoizedState=e},useTransition:function(){var e=id(!1),t=e[0];return e=wd.bind(null,e[1]),qu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Lu,a=qu();if(Dh){if(void 0===s)throw Error(Na(407));s=s()}else{if(s=t(),null===af)throw Error(Na(349));30&Nu||ed(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,hd(sd.bind(null,n,i,e),[e]),n.flags|=2048,rd(9,td.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=qu(),t=af.identifierPrefix;if(Dh){var s=Th;t=":"+t+"R"+(s=(Ph&~(1<<32-Lr(Ph)-1)).toString(32)+s),0<(s=Gu++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=Hu++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cd={readContext:ru,useCallback:yd,useContext:ru,useEffect:ud,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:bd,useReducer:Zu,useRef:od,useState:function(){return Zu(Qu)},useDebugValue:gd,useDeferredValue:function(e){return vd(Ku(),Fu.memoizedState,e)},useTransition:function(){return[Zu(Qu)[0],Ku().memoizedState]},useMutableSource:Yu,useSyncExternalStore:Ju,useId:xd,unstable_isNewReconciler:!1},Md={readContext:ru,useCallback:yd,useContext:ru,useEffect:ud,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:bd,useReducer:Xu,useRef:od,useState:function(){return Xu(Qu)},useDebugValue:gd,useDeferredValue:function(e){var t=Ku();return null===Fu?t.memoizedState=e:vd(t,Fu.memoizedState,e)},useTransition:function(){return[Xu(Qu)[0],Ku().memoizedState]},useMutableSource:Yu,useSyncExternalStore:Ju,useId:xd,unstable_isNewReconciler:!1};function Rd(e,t){if(e&&e.defaultProps){for(var s in t=pi({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function Id(e,t,s,n){s=null==(s=s(n,t=e.memoizedState))?t:pi({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var _d={isMounted:function(e){return!!(e=e._reactInternals)&&br(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Mf(),a=Rf(e),i=fu(n,a);i.payload=t,null!=s&&(i.callback=s),null!==(t=mu(e,i,a))&&(If(t,e,a,n),gu(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Mf(),a=Rf(e),i=fu(n,a);i.tag=1,i.payload=t,null!=s&&(i.callback=s),null!==(t=mu(e,i,a))&&(If(t,e,a,n),gu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Mf(),n=Rf(e),a=fu(s,n);a.tag=2,null!=t&&(a.callback=t),null!==(t=mu(e,a,n))&&(If(t,e,n,s),gu(t,e,n))}};function Dd(e,t,s,n,a,i,r){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,r):!(t.prototype&&t.prototype.isPureReactComponent&&Ol(s,n)&&Ol(a,i))}function Nd(e,t,s){var n=!1,a=nh,i=t.contextType;return"object"==typeof i&&null!==i?i=ru(i):(a=lh(t)?rh:ah.current,i=(n=null!=(n=t.contextTypes))?oh(e,a):nh),t=new t(s,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_d,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ld(e,t,s,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&_d.enqueueReplaceState(t,t.state,null)}function Fd(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},du(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=ru(i):(i=lh(t)?rh:ah.current,a.context=oh(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Id(e,t,i,s),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&_d.enqueueReplaceState(a,a.state,null),bu(e,s,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function Od(e,t){try{var s="",n=t;do{s+=yi(n),n=n.return}while(n);var a=s}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function jd(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function Ud(e,t){try{console.error(t.value)}catch(s){setTimeout((function(){throw s}))}}var Gd="function"==typeof WeakMap?WeakMap:Map;function Hd(e,t,s){(s=fu(-1,s)).tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){wf||(wf=!0,xf=n),Ud(0,t)},s}function zd(e,t,s){(s=fu(-1,s)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Ud(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(s.callback=function(){Ud(0,t),"function"!=typeof n&&(null===kf?kf=new Set([this]):kf.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function Vd(e,t,s){var n=e.pingCache;if(null===n){n=e.pingCache=new Gd;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=tm.bind(null,e,t,s),t.then(e,e))}function Wd(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function $d(e,t,s,n,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=fu(-1,1)).tag=2,mu(s,t,1))),s.lanes|=1),e)}var qd=Za.ReactCurrentOwner,Kd=!1;function Qd(e,t,s,n){t.child=null===e?Xh(t,null,s,n):Zh(t,e.child,s,n)}function Zd(e,t,s,n,a){s=s.render;var i=t.ref;return iu(t,a),n=Wu(e,t,s,n,i,a),s=$u(),null===e||Kd?(Dh&&s&&Mh(t),t.flags|=1,Qd(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vp(e,t,a))}function Xd(e,t,s,n,a){if(null===e){var i=s.type;return"function"!=typeof i||lm(i)||void 0!==i.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=hm(s.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Yd(e,t,i,n,a))}if(i=e.child,!(e.lanes&a)){var r=i.memoizedProps;if((s=null!==(s=s.compare)?s:Ol)(r,n)&&e.ref===t.ref)return vp(e,t,a)}return t.flags|=1,(e=cm(i,n)).ref=t.ref,e.return=t,t.child=e}function Yd(e,t,s,n,a){if(null!==e){var i=e.memoizedProps;if(Ol(i,n)&&e.ref===t.ref){if(Kd=!1,t.pendingProps=n=i,!(e.lanes&a))return t.lanes=e.lanes,vp(e,t,a);131072&e.flags&&(Kd=!0)}}return tp(e,t,s,n,a)}function Jd(e,t,s){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&s))return e=null!==i?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sh(cf,lf),lf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:s,sh(cf,lf),lf|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sh(cf,lf),lf|=s;else null!==i?(n=i.baseLanes|s,t.memoizedState=null):n=s,sh(cf,lf),lf|=n;return Qd(e,t,a,s),t.child}function ep(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function tp(e,t,s,n,a){var i=lh(s)?rh:ah.current;return i=oh(t,i),iu(t,a),s=Wu(e,t,s,n,i,a),n=$u(),null===e||Kd?(Dh&&n&&Mh(t),t.flags|=1,Qd(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vp(e,t,a))}function sp(e,t,s,n,a){if(lh(s)){var i=!0;dh(t)}else i=!1;if(iu(t,a),null===t.stateNode)bp(e,t),Nd(t,s,n),Fd(t,s,n,a),n=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var l=r.context,c=s.contextType;c="object"==typeof c&&null!==c?ru(c):oh(t,c=lh(s)?rh:ah.current);var h=s.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof r.getSnapshotBeforeUpdate;u||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==n||l!==c)&&Ld(t,r,n,c),uu=!1;var d=t.memoizedState;r.state=d,bu(t,n,r,a),l=t.memoizedState,o!==n||d!==l||ih.current||uu?("function"==typeof h&&(Id(t,s,h,n),l=t.memoizedState),(o=uu||Dd(t,s,o,n,d,l,c))?(u||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),r.props=n,r.state=l,r.context=c,n=o):("function"==typeof r.componentDidMount&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,pu(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Rd(t.type,o),r.props=c,u=t.pendingProps,d=r.context,l="object"==typeof(l=s.contextType)&&null!==l?ru(l):oh(t,l=lh(s)?rh:ah.current);var p=s.getDerivedStateFromProps;(h="function"==typeof p||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==u||d!==l)&&Ld(t,r,n,l),uu=!1,d=t.memoizedState,r.state=d,bu(t,n,r,a);var f=t.memoizedState;o!==u||d!==f||ih.current||uu?("function"==typeof p&&(Id(t,s,p,n),f=t.memoizedState),(c=uu||Dd(t,s,c,n,d,f,l)||!1)?(h||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(n,f,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),r.props=n,r.state=f,r.context=l,n=c):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return np(e,t,s,n,i,a)}function np(e,t,s,n,a,i){ep(e,t);var r=!!(128&t.flags);if(!n&&!r)return a&&ph(t,s,!1),vp(e,t,i);n=t.stateNode,qd.current=t;var o=r&&"function"!=typeof s.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&r?(t.child=Zh(t,e.child,null,i),t.child=Zh(t,null,o,i)):Qd(e,t,o,i),t.memoizedState=n.state,a&&ph(t,s,!0),t.child}function ap(e){var t=e.stateNode;t.pendingContext?hh(0,t.pendingContext,t.pendingContext!==t.context):t.context&&hh(0,t.context,!1),Su(e,t.containerInfo)}function ip(e,t,s,n,a){return zh(),Vh(a),t.flags|=256,Qd(e,t,s,n),t.child}var rp,op,lp,cp,hp={dehydrated:null,treeContext:null,retryLane:0};function up(e){return{baseLanes:e,cachePool:null,transitions:null}}function dp(e,t,s){var n,a=t.pendingProps,i=Cu.current,r=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&i)),n?(r=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),sh(Cu,1&i),null===e)return jh(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,r?(a=t.mode,r=t.child,o={mode:"hidden",children:o},1&a||null===r?r=dm(o,a,0,null):(r.childLanes=0,r.pendingProps=o),e=um(e,a,s,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=up(s),t.memoizedState=hp,e):pp(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,s,n,a,i,r){if(s)return 256&t.flags?(t.flags&=-257,fp(e,t,r,n=jd(Error(Na(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=dm({mode:"visible",children:n.children},a,0,null),(i=um(i,a,r,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,1&t.mode&&Zh(t,e.child,null,r),t.child.memoizedState=up(r),t.memoizedState=hp,i);if(!(1&t.mode))return fp(e,t,r,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var o=n.dgst;return n=o,fp(e,t,r,n=jd(i=Error(Na(419)),n,void 0))}if(o=!!(r&e.childLanes),Kd||o){if(null!==(n=af)){switch(r&-r){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=a&(n.suspendedLanes|r)?0:a)&&a!==i.retryLane&&(i.retryLane=a,hu(e,a),If(n,e,a,-1))}return Wf(),fp(e,t,r,n=jd(Error(Na(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=nm.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,_h=jc(a.nextSibling),Ih=t,Dh=!0,Nh=null,null!==e&&(Ah[Eh++]=Ph,Ah[Eh++]=Th,Ah[Eh++]=Sh,Ph=e.id,Th=e.overflow,Sh=t),(t=pp(t,n.children)).flags|=4096,t)}(e,t,o,a,n,i,s);if(r){r=a.fallback,o=t.mode,n=(i=e.child).sibling;var l={mode:"hidden",children:a.children};return 1&o||t.child===i?(a=cm(i,l)).subtreeFlags=14680064&i.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null),null!==n?r=cm(n,r):(r=um(r,o,s,null)).flags|=2,r.return=t,a.return=t,a.sibling=r,t.child=a,a=r,r=t.child,o=null===(o=e.child.memoizedState)?up(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~s,t.memoizedState=hp,a}return e=(r=e.child).sibling,a=cm(r,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=s),a.return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function pp(e,t){return(t=dm({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function fp(e,t,s,n){return null!==n&&Vh(n),Zh(t,e.child,null,s),(e=pp(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function mp(e,t,s){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),au(e.return,t,s)}function gp(e,t,s,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function yp(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Qd(e,t,n.children,s),2&(n=Cu.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&mp(e,s,t);else if(19===e.tag)mp(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(sh(Cu,n),1&t.mode)switch(a){case"forwards":for(s=t.child,a=null;null!==s;)null!==(e=s.alternate)&&null===Mu(e)&&(a=s),s=s.sibling;null===(s=a)?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),gp(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Mu(e)){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}gp(t,!0,s,null,i);break;case"together":gp(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function bp(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vp(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),df|=t.lanes,!(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Na(153));if(null!==t.child){for(s=cm(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=cm(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function wp(e,t){if(!Dh)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;null!==s;)null!==s.alternate&&(n=s),s=s.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xp(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;null!==a;)s|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function kp(e,t,s){var n=t.pendingProps;switch(Rh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xp(t),null;case 1:case 17:return lh(t.type)&&ch(),xp(t),null;case 3:return n=t.stateNode,Pu(),th(ih),th(ah),Iu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Gh(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Nh&&(Lf(Nh),Nh=null))),op(e,t),xp(t),null;case 5:Bu(t);var a=Eu(Au.current);if(s=t.type,null!==e&&null!=t.stateNode)lp(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(Na(166));return xp(t),null}if(e=Eu(xu.current),Gh(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Hc]=t,n[zc]=i,e=!!(1&t.mode),s){case"dialog":mc("cancel",n),mc("close",n);break;case"iframe":case"object":case"embed":mc("load",n);break;case"video":case"audio":for(a=0;a<uc.length;a++)mc(uc[a],n);break;case"source":mc("error",n);break;case"img":case"image":case"link":mc("error",n),mc("load",n);break;case"details":mc("toggle",n);break;case"input":Pi(n,i),mc("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},mc("invalid",n);break;case"textarea":Di(n,i),mc("invalid",n)}for(var r in Ki(s,i),a=null,i)if(i.hasOwnProperty(r)){var o=i[r];"children"===r?"string"==typeof o?n.textContent!==o&&(!0!==i.suppressHydrationWarning&&Bc(n.textContent,o,e),a=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==i.suppressHydrationWarning&&Bc(n.textContent,o,e),a=["children",""+o]):Fa.hasOwnProperty(r)&&null!=o&&"onScroll"===r&&mc("scroll",n)}switch(s){case"input":ki(n),Ci(n,i,!0);break;case"textarea":ki(n),Li(n);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(n.onclick=Cc)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{r=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Fi(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=r.createElement(s,{is:n.is}):(e=r.createElement(s),"select"===s&&(r=e,n.multiple?r.multiple=!0:n.size&&(r.size=n.size))):e=r.createElementNS(e,s),e[Hc]=t,e[zc]=n,rp(e,t,!1,!1),t.stateNode=e;e:{switch(r=Qi(s,n),s){case"dialog":mc("cancel",e),mc("close",e),a=n;break;case"iframe":case"object":case"embed":mc("load",e),a=n;break;case"video":case"audio":for(a=0;a<uc.length;a++)mc(uc[a],e);a=n;break;case"source":mc("error",e),a=n;break;case"img":case"image":case"link":mc("error",e),mc("load",e),a=n;break;case"details":mc("toggle",e),a=n;break;case"input":Pi(e,n),a=Si(e,n),mc("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=pi({},n,{value:void 0}),mc("invalid",e);break;case"textarea":Di(e,n),a=_i(e,n),mc("invalid",e)}for(i in Ki(s,a),o=a)if(o.hasOwnProperty(i)){var l=o[i];"style"===i?$i(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&Gi(e,l):"children"===i?"string"==typeof l?("textarea"!==s||""!==l)&&Hi(e,l):"number"==typeof l&&Hi(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(Fa.hasOwnProperty(i)?null!=l&&"onScroll"===i&&mc("scroll",e):null!=l&&Qa(e,i,l,r))}switch(s){case"input":ki(e),Ci(e,n,!1);break;case"textarea":ki(e),Li(e);break;case"option":null!=n.value&&e.setAttribute("value",""+wi(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?Ii(e,!!n.multiple,i,!1):null!=n.defaultValue&&Ii(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Cc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return xp(t),null;case 6:if(e&&null!=t.stateNode)cp(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(Na(166));if(s=Eu(Au.current),Eu(xu.current),Gh(t)){if(n=t.stateNode,s=t.memoizedProps,n[Hc]=t,(i=n.nodeValue!==s)&&null!==(e=Ih))switch(e.tag){case 3:Bc(n.nodeValue,s,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Bc(n.nodeValue,s,!!(1&e.mode))}i&&(t.flags|=4)}else(n=(9===s.nodeType?s:s.ownerDocument).createTextNode(n))[Hc]=t,t.stateNode=n}return xp(t),null;case 13:if(th(Cu),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Dh&&null!==_h&&1&t.mode&&!(128&t.flags))Hh(),zh(),t.flags|=98560,i=!1;else if(i=Gh(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(Na(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(Na(317));i[Hc]=t}else zh(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;xp(t),i=!1}else null!==Nh&&(Lf(Nh),Nh=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=s,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Cu.current?0===hf&&(hf=3):Wf())),null!==t.updateQueue&&(t.flags|=4),xp(t),null);case 4:return Pu(),op(e,t),null===e&&bc(t.stateNode.containerInfo),xp(t),null;case 10:return nu(t.type._context),xp(t),null;case 19:if(th(Cu),null===(i=t.memoizedState))return xp(t),null;if(n=!!(128&t.flags),null===(r=i.rendering))if(n)wp(i,!1);else{if(0!==hf||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(r=Mu(e))){for(t.flags|=128,wp(i,!1),null!==(n=r.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;null!==s;)e=n,(i=s).flags&=14680066,null===(r=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,e=r.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return sh(Cu,1&Cu.current|2),t.child}e=e.sibling}null!==i.tail&&Tr()>bf&&(t.flags|=128,n=!0,wp(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Mu(r))){if(t.flags|=128,n=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),wp(i,!0),null===i.tail&&"hidden"===i.tailMode&&!r.alternate&&!Dh)return xp(t),null}else 2*Tr()-i.renderingStartTime>bf&&1073741824!==s&&(t.flags|=128,n=!0,wp(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(null!==(s=i.last)?s.sibling=r:t.child=r,i.last=r)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Tr(),t.sibling=null,s=Cu.current,sh(Cu,n?1&s|2:1&s),t):(xp(t),null);case 22:case 23:return Gf(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&lf)&&(xp(t),6&t.subtreeFlags&&(t.flags|=8192)):xp(t),null;case 24:case 25:return null}throw Error(Na(156,t.tag))}function Ap(e,t){switch(Rh(t),t.tag){case 1:return lh(t.type)&&ch(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Pu(),th(ih),th(ah),Iu(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Bu(t),null;case 13:if(th(Cu),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Na(340));zh()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return th(Cu),null;case 4:return Pu(),null;case 10:return nu(t.type._context),null;case 22:case 23:return Gf(),null;default:return null}}rp=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},op=function(){},lp=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Eu(xu.current);var i,r=null;switch(s){case"input":a=Si(e,a),n=Si(e,n),r=[];break;case"select":a=pi({},a,{value:void 0}),n=pi({},n,{value:void 0}),r=[];break;case"textarea":a=_i(e,a),n=_i(e,n),r=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(e.onclick=Cc)}for(c in Ki(s,n),s=null,a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var o=a[c];for(i in o)o.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Fa.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var l=n[c];if(o=null!=a?a[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(s||(s={}),s[i]=l[i])}else s||(r||(r=[]),r.push(c,s)),s=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(r=r||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(r=r||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Fa.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&mc("scroll",e),r||o===l||(r=[])):(r=r||[]).push(c,l))}s&&(r=r||[]).push("style",s);var c=r;(t.updateQueue=c)&&(t.flags|=4)}},cp=function(e,t,s,n){s!==n&&(t.flags|=4)};var Ep=!1,Sp=!1,Pp="function"==typeof WeakSet?WeakSet:Set,Tp=null;function Bp(e,t){var s=e.ref;if(null!==s)if("function"==typeof s)try{s(null)}catch(n){em(e,t,n)}else s.current=null}function Cp(e,t,s){try{s()}catch(n){em(e,t,n)}}var Mp=!1;function Rp(e,t,s){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&Cp(t,s,i)}a=a.next}while(a!==n)}}function Ip(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function _p(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"==typeof t?t(e):t.current=e}}function Dp(e){var t=e.alternate;null!==t&&(e.alternate=null,Dp(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[Hc],delete t[zc],delete t[Wc],delete t[$c],delete t[qc]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Np(e){return 5===e.tag||3===e.tag||4===e.tag}function Lp(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Fp(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!=(s=s._reactRootContainer)||null!==t.onclick||(t.onclick=Cc));else if(4!==n&&null!==(e=e.child))for(Fp(e,t,s),e=e.sibling;null!==e;)Fp(e,t,s),e=e.sibling}function Op(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==n&&null!==(e=e.child))for(Op(e,t,s),e=e.sibling;null!==e;)Op(e,t,s),e=e.sibling}var jp=null,Up=!1;function Gp(e,t,s){for(s=s.child;null!==s;)Hp(e,t,s),s=s.sibling}function Hp(e,t,s){if(Nr&&"function"==typeof Nr.onCommitFiberUnmount)try{Nr.onCommitFiberUnmount(Dr,s)}catch(o){}switch(s.tag){case 5:Sp||Bp(s,t);case 6:var n=jp,a=Up;jp=null,Gp(e,t,s),Up=a,null!==(jp=n)&&(Up?(e=jp,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):jp.removeChild(s.stateNode));break;case 18:null!==jp&&(Up?(e=jp,s=s.stateNode,8===e.nodeType?Oc(e.parentNode,s):1===e.nodeType&&Oc(e,s),vo(e)):Oc(jp,s.stateNode));break;case 4:n=jp,a=Up,jp=s.stateNode.containerInfo,Up=!0,Gp(e,t,s),jp=n,Up=a;break;case 0:case 11:case 14:case 15:if(!Sp&&null!==(n=s.updateQueue)&&null!==(n=n.lastEffect)){a=n=n.next;do{var i=a,r=i.destroy;i=i.tag,void 0!==r&&(2&i||4&i)&&Cp(s,t,r),a=a.next}while(a!==n)}Gp(e,t,s);break;case 1:if(!Sp&&(Bp(s,t),"function"==typeof(n=s.stateNode).componentWillUnmount))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){em(s,t,o)}Gp(e,t,s);break;case 21:Gp(e,t,s);break;case 22:1&s.mode?(Sp=(n=Sp)||null!==s.memoizedState,Gp(e,t,s),Sp=n):Gp(e,t,s);break;default:Gp(e,t,s)}}function zp(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Pp),t.forEach((function(t){var n=am.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))}))}}function Vp(e,t){var s=t.deletions;if(null!==s)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,r=t,o=r;e:for(;null!==o;){switch(o.tag){case 5:jp=o.stateNode,Up=!1;break e;case 3:case 4:jp=o.stateNode.containerInfo,Up=!0;break e}o=o.return}if(null===jp)throw Error(Na(160));Hp(i,r,a),jp=null,Up=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){em(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Wp(t,e),t=t.sibling}function Wp(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vp(t,e),$p(e),4&n){try{Rp(3,e,e.return),Ip(3,e)}catch(m){em(e,e.return,m)}try{Rp(5,e,e.return)}catch(m){em(e,e.return,m)}}break;case 1:Vp(t,e),$p(e),512&n&&null!==s&&Bp(s,s.return);break;case 5:if(Vp(t,e),$p(e),512&n&&null!==s&&Bp(s,s.return),32&e.flags){var a=e.stateNode;try{Hi(a,"")}catch(m){em(e,e.return,m)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,r=null!==s?s.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===i.type&&null!=i.name&&Ti(a,i),Qi(o,r);var c=Qi(o,i);for(r=0;r<l.length;r+=2){var h=l[r],u=l[r+1];"style"===h?$i(a,u):"dangerouslySetInnerHTML"===h?Gi(a,u):"children"===h?Hi(a,u):Qa(a,h,u,c)}switch(o){case"input":Bi(a,i);break;case"textarea":Ni(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?Ii(a,!!i.multiple,p,!1):d!==!!i.multiple&&(null!=i.defaultValue?Ii(a,!!i.multiple,i.defaultValue,!0):Ii(a,!!i.multiple,i.multiple?[]:"",!1))}a[zc]=i}catch(m){em(e,e.return,m)}}break;case 6:if(Vp(t,e),$p(e),4&n){if(null===e.stateNode)throw Error(Na(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){em(e,e.return,m)}}break;case 3:if(Vp(t,e),$p(e),4&n&&null!==s&&s.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(m){em(e,e.return,m)}break;case 4:default:Vp(t,e),$p(e);break;case 13:Vp(t,e),$p(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(yf=Tr())),4&n&&zp(e);break;case 22:if(h=null!==s&&null!==s.memoizedState,1&e.mode?(Sp=(c=Sp)||h,Vp(t,e),Sp=c):Vp(t,e),$p(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&1&e.mode)for(Tp=e,h=e.child;null!==h;){for(u=Tp=h;null!==Tp;){switch(p=(d=Tp).child,d.tag){case 0:case 11:case 14:case 15:Rp(4,d,d.return);break;case 1:Bp(d,d.return);var f=d.stateNode;if("function"==typeof f.componentWillUnmount){n=d,s=d.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){em(n,s,m)}}break;case 5:Bp(d,d.return);break;case 22:if(null!==d.memoizedState){Zp(u);continue}}null!==p?(p.return=d,Tp=p):Zp(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{a=u.stateNode,c?"function"==typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=u.stateNode,r=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=Wi("display",r))}catch(m){em(e,e.return,m)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){em(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Vp(t,e),$p(e),4&n&&zp(e);case 21:}}function $p(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(Np(s)){var n=s;break e}s=s.return}throw Error(Na(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(Hi(a,""),n.flags&=-33),Op(e,Lp(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;Fp(e,Lp(e),i);break;default:throw Error(Na(161))}}catch(r){em(e,e.return,r)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qp(e,t,s){Tp=e,Kp(e)}function Kp(e,t,s){for(var n=!!(1&e.mode);null!==Tp;){var a=Tp,i=a.child;if(22===a.tag&&n){var r=null!==a.memoizedState||Ep;if(!r){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Sp;o=Ep;var c=Sp;if(Ep=r,(Sp=l)&&!c)for(Tp=a;null!==Tp;)l=(r=Tp).child,22===r.tag&&null!==r.memoizedState?Xp(a):null!==l?(l.return=r,Tp=l):Xp(a);for(;null!==i;)Tp=i,Kp(i),i=i.sibling;Tp=a,Ep=o,Sp=c}Qp(e)}else 8772&a.subtreeFlags&&null!==i?(i.return=a,Tp=i):Qp(e)}}function Qp(e){for(;null!==Tp;){var t=Tp;if(8772&t.flags){var s=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Sp||Ip(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Sp)if(null===s)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Rd(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&vu(t,i,n);break;case 3:var r=t.updateQueue;if(null!==r){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}vu(t,r,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break;case"img":l.src&&(s.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var u=h.dehydrated;null!==u&&vo(u)}}}break;default:throw Error(Na(163))}Sp||512&t.flags&&_p(t)}catch(d){em(t,t.return,d)}}if(t===e){Tp=null;break}if(null!==(s=t.sibling)){s.return=t.return,Tp=s;break}Tp=t.return}}function Zp(e){for(;null!==Tp;){var t=Tp;if(t===e){Tp=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Tp=s;break}Tp=t.return}}function Xp(e){for(;null!==Tp;){var t=Tp;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ip(4,t)}catch(l){em(t,s,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){em(t,a,l)}}var i=t.return;try{_p(t)}catch(l){em(t,i,l)}break;case 5:var r=t.return;try{_p(t)}catch(l){em(t,r,l)}}}catch(l){em(t,t.return,l)}if(t===e){Tp=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Tp=o;break}Tp=t.return}}var Yp,Jp=Math.ceil,ef=Za.ReactCurrentDispatcher,tf=Za.ReactCurrentOwner,sf=Za.ReactCurrentBatchConfig,nf=0,af=null,rf=null,of=0,lf=0,cf=eh(0),hf=0,uf=null,df=0,pf=0,ff=0,mf=null,gf=null,yf=0,bf=1/0,vf=null,wf=!1,xf=null,kf=null,Af=!1,Ef=null,Sf=0,Pf=0,Tf=null,Bf=-1,Cf=0;function Mf(){return 6&nf?Tr():-1!==Bf?Bf:Bf=Tr()}function Rf(e){return 1&e.mode?2&nf&&0!==of?of&-of:null!==Wh.transition?(0===Cf&&(Cf=Wr()),Cf):0!==(e=Qr)?e:e=void 0===(e=window.event)?16:To(e.type):1}function If(e,t,s,n){if(50<Pf)throw Pf=0,Tf=null,Error(Na(185));qr(e,s,n),2&nf&&e===af||(e===af&&(!(2&nf)&&(pf|=s),4===hf&&Ff(e,of)),_f(e,n),1===s&&0===nf&&!(1&t.mode)&&(bf=Tr()+500,mh&&bh()))}function _f(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var r=31-Lr(i),o=1<<r,l=a[r];-1===l?o&s&&!(o&n)||(a[r]=zr(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var n=Hr(e,e===af?of:0);if(0===n)null!==s&&Er(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=s&&Er(s),1===t)0===e.tag?function(e){mh=!0,yh(e)}(Of.bind(null,e)):yh(Of.bind(null,e)),Lc((function(){!(6&nf)&&bh()})),s=null;else{switch(Zr(n)){case 1:s=Cr;break;case 4:s=Mr;break;case 16:default:s=Rr;break;case 536870912:s=_r}s=im(s,Df.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Df(e,t){if(Bf=-1,Cf=0,6&nf)throw Error(Na(327));var s=e.callbackNode;if(Yf()&&e.callbackNode!==s)return null;var n=Hr(e,e===af?of:0);if(0===n)return null;if(30&n||n&e.expiredLanes||t)t=$f(e,n);else{t=n;var a=nf;nf|=2;var i=Vf();for(af===e&&of===t||(vf=null,bf=Tr()+500,Hf(e,t));;)try{Kf();break}catch(o){zf(e,o)}su(),ef.current=i,nf=a,null!==rf?t=0:(af=null,of=0,t=hf)}if(0!==t){if(2===t&&0!==(a=Vr(e))&&(n=a,t=Nf(e,a)),1===t)throw s=uf,Hf(e,0),Ff(e,n),_f(e,Tr()),s;if(6===t)Ff(e,n);else{if(a=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Fl(i(),a))return!1}catch(r){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=$f(e,n),2===t&&(i=Vr(e),0!==i&&(n=i,t=Nf(e,i))),1!==t)))throw s=uf,Hf(e,0),Ff(e,n),_f(e,Tr()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Na(345));case 2:case 5:Xf(e,gf,vf);break;case 3:if(Ff(e,n),(130023424&n)===n&&10<(t=yf+500-Tr())){if(0!==Hr(e,0))break;if(((a=e.suspendedLanes)&n)!==n){Mf(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=_c(Xf.bind(null,e,gf,vf),t);break}Xf(e,gf,vf);break;case 4:if(Ff(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var r=31-Lr(n);i=1<<r,(r=t[r])>a&&(a=r),n&=~i}if(n=a,10<(n=(120>(n=Tr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jp(n/1960))-n)){e.timeoutHandle=_c(Xf.bind(null,e,gf,vf),n);break}Xf(e,gf,vf);break;default:throw Error(Na(329))}}}return _f(e,Tr()),e.callbackNode===s?Df.bind(null,e):null}function Nf(e,t){var s=mf;return e.current.memoizedState.isDehydrated&&(Hf(e,t).flags|=256),2!==(e=$f(e,t))&&(t=gf,gf=s,null!==t&&Lf(t)),e}function Lf(e){null===gf?gf=e:gf.push.apply(gf,e)}function Ff(e,t){for(t&=~ff,t&=~pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Lr(t),n=1<<s;e[s]=-1,t&=~n}}function Of(e){if(6&nf)throw Error(Na(327));Yf();var t=Hr(e,0);if(!(1&t))return _f(e,Tr()),null;var s=$f(e,t);if(0!==e.tag&&2===s){var n=Vr(e);0!==n&&(t=n,s=Nf(e,n))}if(1===s)throw s=uf,Hf(e,0),Ff(e,t),_f(e,Tr()),s;if(6===s)throw Error(Na(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xf(e,gf,vf),_f(e,Tr()),null}function jf(e,t){var s=nf;nf|=1;try{return e(t)}finally{0===(nf=s)&&(bf=Tr()+500,mh&&bh())}}function Uf(e){null!==Ef&&0===Ef.tag&&!(6&nf)&&Yf();var t=nf;nf|=1;var s=sf.transition,n=Qr;try{if(sf.transition=null,Qr=1,e)return e()}finally{Qr=n,sf.transition=s,!(6&(nf=t))&&bh()}}function Gf(){lf=cf.current,th(cf)}function Hf(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,Dc(s)),null!==rf)for(s=rf.return;null!==s;){var n=s;switch(Rh(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&ch();break;case 3:Pu(),th(ih),th(ah),Iu();break;case 5:Bu(n);break;case 4:Pu();break;case 13:case 19:th(Cu);break;case 10:nu(n.type._context);break;case 22:case 23:Gf()}s=s.return}if(af=e,rf=e=cm(e.current,null),of=lf=t,hf=0,uf=null,ff=pf=df=0,gf=mf=null,null!==ou){for(t=0;t<ou.length;t++)if(null!==(n=(s=ou[t]).interleaved)){s.interleaved=null;var a=n.next,i=s.pending;if(null!==i){var r=i.next;i.next=a,n.next=r}s.pending=n}ou=null}return e}function zf(e,t){for(;;){var s=rf;try{if(su(),_u.current=Td,ju){for(var n=Lu.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ju=!1}if(Nu=0,Ou=Fu=Lu=null,Uu=!1,Gu=0,tf.current=null,null===s||null===s.return){hf=1,uf=t,rf=null;break}e:{var i=e,r=s.return,o=s,l=t;if(t=of,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=o,u=h.tag;if(!(1&h.mode||0!==u&&11!==u&&15!==u)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Wd(r);if(null!==p){p.flags&=-257,$d(p,r,o,0,t),1&p.mode&&Vd(i,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){Vd(i,c,t),Wf();break e}l=Error(Na(426))}else if(Dh&&1&o.mode){var g=Wd(r);if(null!==g){!(65536&g.flags)&&(g.flags|=256),$d(g,r,o,0,t),Vh(Od(l,o));break e}}i=l=Od(l,o),4!==hf&&(hf=2),null===mf?mf=[i]:mf.push(i),i=r;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,yu(i,Hd(0,l,t));break e;case 1:o=l;var y=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==kf&&kf.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,yu(i,zd(i,o,t));break e}}i=i.return}while(null!==i)}Zf(s)}catch(v){t=v,rf===s&&null!==s&&(rf=s=s.return);continue}break}}function Vf(){var e=ef.current;return ef.current=Td,null===e?Td:e}function Wf(){0!==hf&&3!==hf&&2!==hf||(hf=4),null===af||!(268435455&df)&&!(268435455&pf)||Ff(af,of)}function $f(e,t){var s=nf;nf|=2;var n=Vf();for(af===e&&of===t||(vf=null,Hf(e,t));;)try{qf();break}catch(a){zf(e,a)}if(su(),nf=s,ef.current=n,null!==rf)throw Error(Na(261));return af=null,of=0,hf}function qf(){for(;null!==rf;)Qf(rf)}function Kf(){for(;null!==rf&&!Sr();)Qf(rf)}function Qf(e){var t=Yp(e.alternate,e,lf);e.memoizedProps=e.pendingProps,null===t?Zf(e):rf=t,tf.current=null}function Zf(e){var t=e;do{var s=t.alternate;if(e=t.return,32768&t.flags){if(null!==(s=Ap(s,t)))return s.flags&=32767,void(rf=s);if(null===e)return hf=6,void(rf=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(s=kp(s,t,lf)))return void(rf=s);if(null!==(t=t.sibling))return void(rf=t);rf=t=e}while(null!==t);0===hf&&(hf=5)}function Xf(e,t,s){var n=Qr,a=sf.transition;try{sf.transition=null,Qr=1,function(e,t,s,n){do{Yf()}while(null!==Ef);if(6&nf)throw Error(Na(327));s=e.finishedWork;var a=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Na(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Lr(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}(e,i),e===af&&(rf=af=null,of=0),!(2064&s.subtreeFlags)&&!(2064&s.flags)||Af||(Af=!0,im(Rr,(function(){return Yf(),null}))),i=!!(15990&s.flags),15990&s.subtreeFlags||i){i=sf.transition,sf.transition=null;var r=Qr;Qr=1;var o=nf;nf|=4,tf.current=null,function(e,t){if(Mc=xo,zl(e=Hl())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(n&&0!==n.rangeCount){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch(w){s=null;break e}var r=0,o=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var p;u!==s||0!==a&&3!==u.nodeType||(o=r+a),u!==i||0!==n&&3!==u.nodeType||(l=r+n),3===u.nodeType&&(r+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===e)break t;if(d===s&&++c===a&&(o=r),d===i&&++h===n&&(l=r),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}s=-1===o||-1===l?null:{start:o,end:l}}else s=null}s=s||{start:0,end:0}}else s=null;for(Rc={focusedElem:e,selectionRange:s},xo=!1,Tp=t;null!==Tp;)if(e=(t=Tp).child,1028&t.subtreeFlags&&null!==e)e.return=t,Tp=e;else for(;null!==Tp;){t=Tp;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Rd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(Na(163))}}catch(w){em(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Tp=e;break}Tp=t.return}f=Mp,Mp=!1}(e,s),Wp(s,e),Vl(Rc),xo=!!Mc,Rc=Mc=null,e.current=s,qp(s),Pr(),nf=o,Qr=r,sf.transition=i}else e.current=s;if(Af&&(Af=!1,Ef=e,Sf=a),0===(i=e.pendingLanes)&&(kf=null),function(e){if(Nr&&"function"==typeof Nr.onCommitFiberRoot)try{Nr.onCommitFiberRoot(Dr,e,void 0,!(128&~e.current.flags))}catch(t){}}(s.stateNode),_f(e,Tr()),null!==t)for(n=e.onRecoverableError,s=0;s<t.length;s++)n((a=t[s]).value,{componentStack:a.stack,digest:a.digest});if(wf)throw wf=!1,e=xf,xf=null,e;!!(1&Sf)&&0!==e.tag&&Yf(),1&(i=e.pendingLanes)?e===Tf?Pf++:(Pf=0,Tf=e):Pf=0,bh()}(e,t,s,n)}finally{sf.transition=a,Qr=n}return null}function Yf(){if(null!==Ef){var e=Zr(Sf),t=sf.transition,s=Qr;try{if(sf.transition=null,Qr=16>e?16:e,null===Ef)var n=!1;else{if(e=Ef,Ef=null,Sf=0,6&nf)throw Error(Na(331));var a=nf;for(nf|=4,Tp=e.current;null!==Tp;){var i=Tp,r=i.child;if(16&Tp.flags){var o=i.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Tp=c;null!==Tp;){var h=Tp;switch(h.tag){case 0:case 11:case 15:Rp(8,h,i)}var u=h.child;if(null!==u)u.return=h,Tp=u;else for(;null!==Tp;){var d=(h=Tp).sibling,p=h.return;if(Dp(h),h===c){Tp=null;break}if(null!==d){d.return=p,Tp=d;break}Tp=p}}}var f=i.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Tp=i}}if(2064&i.subtreeFlags&&null!==r)r.return=i,Tp=r;else e:for(;null!==Tp;){if(2048&(i=Tp).flags)switch(i.tag){case 0:case 11:case 15:Rp(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Tp=y;break e}Tp=i.return}}var b=e.current;for(Tp=b;null!==Tp;){var v=(r=Tp).child;if(2064&r.subtreeFlags&&null!==v)v.return=r,Tp=v;else e:for(r=b;null!==Tp;){if(2048&(o=Tp).flags)try{switch(o.tag){case 0:case 11:case 15:Ip(9,o)}}catch(x){em(o,o.return,x)}if(o===r){Tp=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Tp=w;break e}Tp=o.return}}if(nf=a,bh(),Nr&&"function"==typeof Nr.onPostCommitFiberRoot)try{Nr.onPostCommitFiberRoot(Dr,e)}catch(x){}n=!0}return n}finally{Qr=s,sf.transition=t}}return!1}function Jf(e,t,s){e=mu(e,t=Hd(0,t=Od(s,t),1),1),t=Mf(),null!==e&&(qr(e,1,t),_f(e,t))}function em(e,t,s){if(3===e.tag)Jf(e,e,s);else for(;null!==t;){if(3===t.tag){Jf(t,e,s);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===kf||!kf.has(n))){t=mu(t,e=zd(t,e=Od(s,e),1),1),e=Mf(),null!==t&&(qr(t,1,e),_f(t,e));break}}t=t.return}}function tm(e,t,s){var n=e.pingCache;null!==n&&n.delete(t),t=Mf(),e.pingedLanes|=e.suspendedLanes&s,af===e&&(of&s)===s&&(4===hf||3===hf&&(130023424&of)===of&&500>Tr()-yf?Hf(e,0):ff|=s),_f(e,t)}function sm(e,t){0===t&&(1&e.mode?(t=Ur,!(130023424&(Ur<<=1))&&(Ur=4194304)):t=1);var s=Mf();null!==(e=hu(e,t))&&(qr(e,t,s),_f(e,s))}function nm(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),sm(e,s)}function am(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Na(314))}null!==n&&n.delete(t),sm(e,s)}function im(e,t){return Ar(e,t)}function rm(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function om(e,t,s,n){return new rm(e,t,s,n)}function lm(e){return!(!(e=e.prototype)||!e.isReactComponent)}function cm(e,t){var s=e.alternate;return null===s?((s=om(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function hm(e,t,s,n,a,i){var r=2;if(n=e,"function"==typeof e)lm(e)&&(r=1);else if("string"==typeof e)r=5;else e:switch(e){case Ja:return um(s.children,a,i,t);case ei:r=8,a|=8;break;case ti:return(e=om(12,s,t,2|a)).elementType=ti,e.lanes=i,e;case ii:return(e=om(13,s,t,a)).elementType=ii,e.lanes=i,e;case ri:return(e=om(19,s,t,a)).elementType=ri,e.lanes=i,e;case ci:return dm(s,a,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case si:r=10;break e;case ni:r=9;break e;case ai:r=11;break e;case oi:r=14;break e;case li:r=16,n=null;break e}throw Error(Na(130,null==e?e:typeof e,""))}return(t=om(r,s,t,a)).elementType=e,t.type=n,t.lanes=i,t}function um(e,t,s,n){return(e=om(7,e,n,t)).lanes=s,e}function dm(e,t,s,n){return(e=om(22,e,n,t)).elementType=ci,e.lanes=s,e.stateNode={isHidden:!1},e}function pm(e,t,s){return(e=om(6,e,null,t)).lanes=s,e}function fm(e,t,s){return(t=om(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mm(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function gm(e,t,s,n,a,i,r,o,l){return e=new mm(e,t,s,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=om(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},du(i),e}function ym(e){if(!e)return nh;e:{if(br(e=e._reactInternals)!==e||1!==e.tag)throw Error(Na(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lh(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Na(171))}if(1===e.tag){var s=e.type;if(lh(s))return uh(e,s,t)}return t}function bm(e,t,s,n,a,i,r,o,l){return(e=gm(s,n,!0,e,0,i,0,o,l)).context=ym(null),s=e.current,(i=fu(n=Mf(),a=Rf(s))).callback=null!=t?t:null,mu(s,i,a),e.current.lanes=a,qr(e,a,n),_f(e,n),e}function vm(e,t,s,n){var a=t.current,i=Mf(),r=Rf(a);return s=ym(s),null===t.context?t.context=s:t.pendingContext=s,(t=fu(i,r)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=mu(a,t,r))&&(If(e,a,r,i),gu(e,a,r)),r}function wm(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function xm(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function km(e,t){xm(e,t),(e=e.alternate)&&xm(e,t)}Yp=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||ih.current)Kd=!0;else{if(!(e.lanes&s||128&t.flags))return Kd=!1,function(e,t,s){switch(t.tag){case 3:ap(t),zh();break;case 5:Tu(t);break;case 1:lh(t.type)&&dh(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;sh(Yh,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(sh(Cu,1&Cu.current),t.flags|=128,null):s&t.child.childLanes?dp(e,t,s):(sh(Cu,1&Cu.current),null!==(e=vp(e,t,s))?e.sibling:null);sh(Cu,1&Cu.current);break;case 19:if(n=!!(s&t.childLanes),128&e.flags){if(n)return yp(e,t,s);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),sh(Cu,Cu.current),n)break;return null;case 22:case 23:return t.lanes=0,Jd(e,t,s)}return vp(e,t,s)}(e,t,s);Kd=!!(131072&e.flags)}else Kd=!1,Dh&&1048576&t.flags&&Ch(t,kh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bp(e,t),e=t.pendingProps;var a=oh(t,ah.current);iu(t,s),a=Wu(null,t,n,e,a,s);var i=$u();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lh(n)?(i=!0,dh(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,du(t),a.updater=_d,t.stateNode=a,a._reactInternals=t,Fd(t,n,e,s),t=np(null,t,n,!0,i,s)):(t.tag=0,Dh&&i&&Mh(t),Qd(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(bp(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"==typeof e)return lm(e)?1:0;if(null!=e){if((e=e.$$typeof)===ai)return 11;if(e===oi)return 14}return 2}(n),e=Rd(n,e),a){case 0:t=tp(null,t,n,e,s);break e;case 1:t=sp(null,t,n,e,s);break e;case 11:t=Zd(null,t,n,e,s);break e;case 14:t=Xd(null,t,n,Rd(n.type,e),s);break e}throw Error(Na(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,tp(e,t,n,a=t.elementType===n?a:Rd(n,a),s);case 1:return n=t.type,a=t.pendingProps,sp(e,t,n,a=t.elementType===n?a:Rd(n,a),s);case 3:e:{if(ap(t),null===e)throw Error(Na(387));n=t.pendingProps,a=(i=t.memoizedState).element,pu(e,t),bu(t,n,null,s);var r=t.memoizedState;if(n=r.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ip(e,t,n,s,a=Od(Error(Na(423)),t));break e}if(n!==a){t=ip(e,t,n,s,a=Od(Error(Na(424)),t));break e}for(_h=jc(t.stateNode.containerInfo.firstChild),Ih=t,Dh=!0,Nh=null,s=Xh(t,null,n,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(zh(),n===a){t=vp(e,t,s);break e}Qd(e,t,n,s)}t=t.child}return t;case 5:return Tu(t),null===e&&jh(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,r=a.children,Ic(n,a)?r=null:null!==i&&Ic(n,i)&&(t.flags|=32),ep(e,t),Qd(e,t,r,s),t.child;case 6:return null===e&&jh(t),null;case 13:return dp(e,t,s);case 4:return Su(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Zh(t,null,n,s):Qd(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,Zd(e,t,n,a=t.elementType===n?a:Rd(n,a),s);case 7:return Qd(e,t,t.pendingProps,s),t.child;case 8:case 12:return Qd(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,r=a.value,sh(Yh,n._currentValue),n._currentValue=r,null!==i)if(Fl(i.value,r)){if(i.children===a.children&&!ih.current){t=vp(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){r=i.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===i.tag){(l=fu(-1,s&-s)).tag=2;var c=i.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=s,null!==(l=i.alternate)&&(l.lanes|=s),au(i.return,s,t),o.lanes|=s;break}l=l.next}}else if(10===i.tag)r=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(r=i.return))throw Error(Na(341));r.lanes|=s,null!==(o=r.alternate)&&(o.lanes|=s),au(r,s,t),r=i.sibling}else r=i.child;if(null!==r)r.return=i;else for(r=i;null!==r;){if(r===t){r=null;break}if(null!==(i=r.sibling)){i.return=r.return,r=i;break}r=r.return}i=r}Qd(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,iu(t,s),n=n(a=ru(a)),t.flags|=1,Qd(e,t,n,s),t.child;case 14:return a=Rd(n=t.type,t.pendingProps),Xd(e,t,n,a=Rd(n.type,a),s);case 15:return Yd(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Rd(n,a),bp(e,t),t.tag=1,lh(n)?(e=!0,dh(t)):e=!1,iu(t,s),Nd(t,n,a),Fd(t,n,a,s),np(null,t,n,!0,e,s);case 19:return yp(e,t,s);case 22:return Jd(e,t,s)}throw Error(Na(156,t.tag))};var Am="function"==typeof reportError?reportError:function(e){console.error(e)};function Em(e){this._internalRoot=e}function Sm(e){this._internalRoot=e}function Pm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Tm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bm(){}function Cm(e,t,s,n,a){var i=s._reactRootContainer;if(i){var r=i;if("function"==typeof a){var o=a;a=function(){var e=wm(r);o.call(e)}}vm(t,r,e,a)}else r=function(e,t,s,n,a){if(a){if("function"==typeof n){var i=n;n=function(){var e=wm(r);i.call(e)}}var r=bm(t,n,e,0,null,!1,0,"",Bm);return e._reactRootContainer=r,e[Vc]=r.current,bc(8===e.nodeType?e.parentNode:e),Uf(),r}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof n){var o=n;n=function(){var e=wm(l);o.call(e)}}var l=gm(e,0,!1,null,0,!1,0,"",Bm);return e._reactRootContainer=l,e[Vc]=l.current,bc(8===e.nodeType?e.parentNode:e),Uf((function(){vm(t,l,s,n)})),l}(s,t,e,a,n);return wm(r)}Sm.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Na(409));vm(e,t,null,null)},Sm.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Uf((function(){vm(null,e,null,null)})),t[Vc]=null}},Sm.prototype.unstable_scheduleHydration=function(e){if(e){var t=eo();e={blockedOn:null,target:e,priority:t};for(var s=0;s<co.length&&0!==t&&t<co[s].priority;s++);co.splice(s,0,e),0===s&&fo(e)}},Xr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Gr(t.pendingLanes);0!==s&&(Kr(t,1|s),_f(t,Tr()),!(6&nf)&&(bf=Tr()+500,bh()))}break;case 13:Uf((function(){var t=hu(e,1);if(null!==t){var s=Mf();If(t,e,1,s)}})),km(e,1)}},Yr=function(e){if(13===e.tag){var t=hu(e,134217728);null!==t&&If(t,e,134217728,Mf()),km(e,134217728)}},Jr=function(e){if(13===e.tag){var t=Rf(e),s=hu(e,t);null!==s&&If(s,e,t,Mf()),km(e,t)}},eo=function(){return Qr},to=function(e,t){var s=Qr;try{return Qr=e,t()}finally{Qr=s}},Yi=function(e,t,s){switch(t){case"input":if(Bi(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Xc(n);if(!a)throw Error(Na(90));Ai(n),Bi(n,a)}}}break;case"textarea":Ni(e,s);break;case"select":null!=(t=s.value)&&Ii(e,!!s.multiple,t,!1)}},ar=jf,ir=Uf;var Mm={usingClientEntryPoint:!1,Events:[Qc,Zc,Xc,sr,nr,jf]},Rm={findFiberByHostInstance:Kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Im={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Za.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=xr(e))?null:e.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var _m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_m.isDisabled&&_m.supportsFiber)try{Dr=_m.inject(Im),Nr=_m}catch(Ui){}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm,Ca.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Pm(t))throw Error(Na(200));return function(e,t,s){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ya,key:null==n?null:""+n,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},Ca.createRoot=function(e,t){if(!Pm(e))throw Error(Na(299));var s=!1,n="",a=Am;return null!=t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=gm(e,1,!1,null,0,s,0,n,a),e[Vc]=t.current,bc(8===e.nodeType?e.parentNode:e),new Em(t)},Ca.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Na(188));throw e=Object.keys(e).join(","),Error(Na(268,e))}return null===(e=xr(t))?null:e.stateNode},Ca.flushSync=function(e){return Uf(e)},Ca.hydrate=function(e,t,s){if(!Tm(t))throw Error(Na(200));return Cm(null,e,t,!0,s)},Ca.hydrateRoot=function(e,t,s){if(!Pm(e))throw Error(Na(405));var n=null!=s&&s.hydratedSources||null,a=!1,i="",r=Am;if(null!=s&&(!0===s.unstable_strictMode&&(a=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(r=s.onRecoverableError)),t=bm(t,null,e,1,null!=s?s:null,a,0,i,r),e[Vc]=t.current,bc(e),n)for(e=0;e<n.length;e++)a=(a=(s=n[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Sm(t)},Ca.render=function(e,t,s){if(!Tm(t))throw Error(Na(200));return Cm(null,e,t,!1,s)},Ca.unmountComponentAtNode=function(e){if(!Tm(e))throw Error(Na(40));return!!e._reactRootContainer&&(Uf((function(){Cm(null,null,e,!1,(function(){e._reactRootContainer=null,e[Vc]=null}))})),!0)},Ca.unstable_batchedUpdates=jf,Ca.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Tm(s))throw Error(Na(200));if(null==e||void 0===e._reactInternals)throw Error(Na(38));return Cm(e,t,s,!1,n)},Ca.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Ba.exports=Ca;var Dm=Ba.exports;Ta.createRoot=Dm.createRoot,Ta.hydrateRoot=Dm.hydrateRoot;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.parse=function(e,t){const s=new Gm,n=e.length;if(n<2)return s;const a=(null==t?void 0:t.decode)||Vm;let i=0;do{const t=e.indexOf("=",i);if(-1===t)break;const r=e.indexOf(";",i),o=-1===r?n:r;if(t>o){i=e.lastIndexOf(";",t-1)+1;continue}const l=Hm(e,i,t),c=zm(e,t,l),h=e.slice(l,c);if(void 0===s[h]){let n=Hm(e,t+1,o),i=zm(e,o,n);const r=a(e.slice(n,i));s[h]=r}i=o+1}while(i<n);return s},Nm.serialize=function(e,t,s){const n=(null==s?void 0:s.encode)||encodeURIComponent;if(!Lm.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=n(t);if(!Fm.test(a))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+a;if(!s)return i;if(void 0!==s.maxAge){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!Om.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!jm.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!function(e){return"[object Date]"===Um.call(e)}(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i};const Lm=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Fm=/^[\u0021-\u003A\u003C-\u007E]*$/,Om=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,jm=/^[\u0020-\u003A\u003D-\u007E]*$/,Um=Object.prototype.toString,Gm=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Hm(e,t,s){do{const s=e.charCodeAt(t);if(32!==s&&9!==s)return t}while(++t<s);return s}function zm(e,t,s){for(;t>s;){const s=e.charCodeAt(--t);if(32!==s&&9!==s)return t+1}return s}function Vm(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}var Wm="popstate";function $m(e,t){if(!1===e||null==e)throw new Error(t)}function qm(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function Km(e,t){return{usr:e.state,key:e.key,idx:t}}function Qm(e,t,s=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Xm(t):t,state:s,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Zm({pathname:e="/",search:t="",hash:s=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),s&&"#"!==s&&(e+="#"===s.charAt(0)?s:"#"+s),e}function Xm(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Ym(e,t,s="/"){return function(e,t,s){let n=dg(("string"==typeof t?Xm(t):t).pathname||"/",s);if(null==n)return null;let a=Jm(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,s)=>e===t[s]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let i=null;for(let r=0;null==i&&r<a.length;++r){let e=ug(n);i=cg(a[r],e,false)}return i}(e,t,s)}function Jm(e,t=[],s=[],n=""){let a=(e,a,i)=>{let r={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};r.relativePath.startsWith("/")&&($m(r.relativePath.startsWith(n),`Absolute route path "${r.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),r.relativePath=r.relativePath.slice(n.length));let o=gg([n,r.relativePath]),l=s.concat(r);e.children&&e.children.length>0&&($m(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),Jm(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:lg(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var s;if(""!==e.path&&(null==(s=e.path)?void 0:s.includes("?")))for(let n of eg(e.path))a(e,t,n);else a(e,t)})),t}function eg(e){let t=e.split("/");if(0===t.length)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let r=eg(n.join("/")),o=[];return o.push(...r.map((e=>""===e?i:[i,e].join("/")))),a&&o.push(...r),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var tg=/^:[\w-]+$/,sg=3,ng=2,ag=1,ig=10,rg=-2,og=e=>"*"===e;function lg(e,t){let s=e.split("/"),n=s.length;return s.some(og)&&(n+=rg),t&&(n+=ng),s.filter((e=>!og(e))).reduce(((e,t)=>e+(tg.test(t)?sg:""===t?ag:ig)),n)}function cg(e,t,s=!1){let{routesMeta:n}=e,a={},i="/",r=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",h=hg({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&s&&!n[n.length-1].route.index&&(h=hg({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(a,h.params),r.push({params:a,pathname:gg([i,h.pathname]),pathnameBase:yg(gg([i,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(i=gg([i,h.pathnameBase]))}return r}function hg(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=function(e,t=!1,s=!0){qm("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,s)=>(n.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],r=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce(((e,{paramName:t,isOptional:s},n)=>{if("*"===t){let e=o[n]||"";r=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const a=o[n];return e[t]=s&&!a?void 0:(a||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:r,pattern:e}}function ug(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return qm(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function dg(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&"/"!==n?null:e.slice(s)||"/"}function pg(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fg(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,s)=>s===t.length-1?e.pathname:e.pathnameBase))}function mg(e,t,s,n=!1){let a;"string"==typeof e?a=Xm(e):(a={...e},$m(!a.pathname||!a.pathname.includes("?"),pg("?","pathname","search",a)),$m(!a.pathname||!a.pathname.includes("#"),pg("#","pathname","hash",a)),$m(!a.search||!a.search.includes("#"),pg("#","search","hash",a)));let i,r=""===e||""===a.pathname,o=r?"/":a.pathname;if(null==o)i=s;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:s,search:n="",hash:a=""}="string"==typeof e?Xm(e):e,i=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)})),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:i,search:bg(n),hash:vg(a)}}(a,i),c=o&&"/"!==o&&o.endsWith("/"),h=(r||"."===o)&&s.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}var gg=e=>e.join("/").replace(/\/\/+/g,"/"),yg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bg=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",vg=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",wg=["POST","PUT","PATCH","DELETE"];new Set(wg);var xg=["GET",...wg];new Set(xg);var kg=ya.createContext(null);kg.displayName="DataRouter";var Ag=ya.createContext(null);Ag.displayName="DataRouterState";var Eg=ya.createContext({isTransitioning:!1});Eg.displayName="ViewTransition",ya.createContext(new Map).displayName="Fetchers",ya.createContext(null).displayName="Await";var Sg=ya.createContext(null);Sg.displayName="Navigation";var Pg=ya.createContext(null);Pg.displayName="Location";var Tg=ya.createContext({outlet:null,matches:[],isDataRoute:!1});Tg.displayName="Route";var Bg=ya.createContext(null);function Cg(){return null!=ya.useContext(Pg)}function Mg(){return $m(Cg(),"useLocation() may be used only in the context of a <Router> component."),ya.useContext(Pg).location}Bg.displayName="RouteError";var Rg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ig(e){ya.useContext(Sg).static||ya.useLayoutEffect(e)}function _g(){let{isDataRoute:e}=ya.useContext(Tg);return e?function(){let{router:e}=function(){let e=ya.useContext(kg);return $m(e,Gg("useNavigate")),e}(),t=Hg("useNavigate"),s=ya.useRef(!1);return Ig((()=>{s.current=!0})),ya.useCallback((async(n,a={})=>{qm(s.current,Rg),s.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...a}))}),[e,t])}():function(){$m(Cg(),"useNavigate() may be used only in the context of a <Router> component.");let e=ya.useContext(kg),{basename:t,navigator:s}=ya.useContext(Sg),{matches:n}=ya.useContext(Tg),{pathname:a}=Mg(),i=JSON.stringify(fg(n)),r=ya.useRef(!1);return Ig((()=>{r.current=!0})),ya.useCallback(((n,o={})=>{if(qm(r.current,Rg),!r.current)return;if("number"==typeof n)return void s.go(n);let l=mg(n,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:gg([t,l.pathname])),(o.replace?s.replace:s.push)(l,o.state,o)}),[t,s,i,a,e])}()}var Dg=ya.createContext(null);function Ng(e,{relative:t}={}){let{matches:s}=ya.useContext(Tg),{pathname:n}=Mg(),a=JSON.stringify(fg(s));return ya.useMemo((()=>mg(e,JSON.parse(a),n,"path"===t)),[e,a,n,t])}function Lg(e,t,s,n){var a;$m(Cg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:r}=ya.useContext(Sg),{matches:o}=ya.useContext(Tg),l=o[o.length-1],c=l?l.params:{},h=l?l.pathname:"/",u=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";Vg(h,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=Mg();if(t){let e="string"==typeof t?Xm(t):t;$m("/"===u||(null==(a=e.pathname)?void 0:a.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=!r&&s&&s.matches&&s.matches.length>0?s.matches:Ym(e,{pathname:g});qm(d||null!=y,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),qm(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],s=null){if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let n=e,a=null==s?void 0:s.errors;if(null!=a){let e=n.findIndex((e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id])));$m(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let i=!1,r=-1;if(s)for(let o=0;o<n.length;o++){let e=n[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(r=o),e.route.id){let{loaderData:t,errors:a}=s,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||o){i=!0,n=r>=0?n.slice(0,r+1):[n[0]];break}}}return n.reduceRight(((e,o,l)=>{let c,h=!1,u=null,d=null;s&&(c=a&&o.route.id?a[o.route.id]:void 0,u=o.route.errorElement||Og,i&&(r<0&&0===l?(Vg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,d=null):r===l&&(h=!0,d=o.route.hydrateFallbackElement||null)));let p=t.concat(n.slice(0,l+1)),f=()=>{let t;return t=c?u:h?d:o.route.Component?ya.createElement(o.route.Component,null):o.route.element?o.route.element:e,ya.createElement(Ug,{match:o,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?ya.createElement(jg,{location:s.location,revalidation:s.revalidation,component:u,error:c,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:gg([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:gg([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,s);return t&&b?ya.createElement(Pg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Fg(){let e=function(){var e;let t=ya.useContext(Bg),s=function(){let e=ya.useContext(Ag);return $m(e,Gg("useRouteError")),e}(),n=Hg("useRouteError");return void 0!==t?t:null==(e=s.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=ya.createElement(ya.Fragment,null,ya.createElement("p",null,"💿 Hey developer 👋"),ya.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ya.createElement("code",{style:i},"ErrorBoundary")," or"," ",ya.createElement("code",{style:i},"errorElement")," prop on your route.")),ya.createElement(ya.Fragment,null,ya.createElement("h2",null,"Unexpected Application Error!"),ya.createElement("h3",{style:{fontStyle:"italic"}},t),s?ya.createElement("pre",{style:a},s):null,r)}var Og=ya.createElement(Fg,null),jg=class extends ya.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?ya.createElement(Tg.Provider,{value:this.props.routeContext},ya.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ug({routeContext:e,match:t,children:s}){let n=ya.useContext(kg);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),ya.createElement(Tg.Provider,{value:e},s)}function Gg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hg(e){let t=function(e){let t=ya.useContext(Tg);return $m(t,Gg(e)),t}(e),s=t.matches[t.matches.length-1];return $m(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}var zg={};function Vg(e,t,s){t||zg[e]||(zg[e]=!0,qm(!1,s))}function Wg({to:e,replace:t,state:s,relative:n}){$m(Cg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=ya.useContext(Sg);qm(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=ya.useContext(Tg),{pathname:r}=Mg(),o=_g(),l=mg(e,fg(i),r,"path"===n),c=JSON.stringify(l);return ya.useEffect((()=>{o(JSON.parse(c),{replace:t,state:s,relative:n})}),[o,c,n,t,s]),null}function $g(e){return function(e){let t=ya.useContext(Tg).outlet;return t?ya.createElement(Dg.Provider,{value:e},t):t}(e.context)}function qg(e){$m(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kg({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){$m(!Cg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),o=ya.useMemo((()=>({basename:r,navigator:a,static:i,future:{}})),[r,a,i]);"string"==typeof s&&(s=Xm(s));let{pathname:l="/",search:c="",hash:h="",state:u=null,key:d="default"}=s,p=ya.useMemo((()=>{let e=dg(l,r);return null==e?null:{location:{pathname:e,search:c,hash:h,state:u,key:d},navigationType:n}}),[r,l,c,h,u,d,n]);return qm(null!=p,`<Router basename="${r}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:ya.createElement(Sg.Provider,{value:o},ya.createElement(Pg.Provider,{children:t,value:p}))}function Qg({children:e,location:t}){return Lg(Zg(e),t)}function Zg(e,t=[]){let s=[];return ya.Children.forEach(e,((e,n)=>{if(!ya.isValidElement(e))return;let a=[...t,n];if(e.type===ya.Fragment)return void s.push.apply(s,Zg(e.props.children,a));$m(e.type===qg,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$m(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Zg(e.props.children,a)),s.push(i)})),s}ya.memo((function({routes:e,future:t,state:s}){return Lg(e,void 0,s)}));var Xg="get",Yg="application/x-www-form-urlencoded";function Jg(e){return null!=e&&"string"==typeof e.tagName}var ey=null,ty=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sy(e){return null==e||ty.has(e)?e:(qm(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yg}"`),null)}function ny(e,t){if(!1===e||null==e)throw new Error(t)}function ay(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function iy(e,t,s,n,a,i){let r=(e,t)=>!s[t]||e.route.id!==s[t].route.id,o=(e,t)=>{var n;return s[t].pathname!==e.pathname||(null==(n=s[t].route.path)?void 0:n.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>r(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(r(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null==(l=s[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0})):[]}function ry(){let e=ya.useContext(kg);return ny(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oy=ya.createContext(void 0);function ly(){let e=ya.useContext(oy);return ny(e,"You must render this element inside a <HydratedRouter> element"),e}function cy(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function hy({page:e,...t}){let{router:s}=ry(),n=ya.useMemo((()=>Ym(s.routes,e,s.basename)),[s.routes,e,s.basename]);return n?ya.createElement(uy,{page:e,matches:n,...t}):null}function uy({page:e,matches:t,...s}){let n=Mg(),{manifest:a,routeModules:i}=ly(),{basename:r}=ry(),{loaderData:o,matches:l}=function(){let e=ya.useContext(Ag);return ny(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=ya.useMemo((()=>iy(e,t,l,a,n,"data")),[e,t,l,a,n]),h=ya.useMemo((()=>iy(e,t,l,a,n,"assets")),[e,t,l,a,n]),u=ya.useMemo((()=>{if(e===n.pathname+n.search+n.hash)return[];let s=new Set,l=!1;if(t.forEach((e=>{var t;let n=a.routes[e.route.id];n&&n.hasLoader&&(!c.some((t=>t.route.id===e.route.id))&&e.route.id in o&&(null==(t=i[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?l=!0:s.add(e.route.id))})),0===s.size)return[];let h=function(e,t){let s="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===s.pathname?s.pathname="_root.data":t&&"/"===dg(s.pathname,t)?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}(e,r);return l&&s.size>0&&h.searchParams.set("_routes",t.filter((e=>s.has(e.route.id))).map((e=>e.route.id)).join(",")),[h.pathname+h.search]}),[r,o,n,a,c,t,e,i]),d=ya.useMemo((()=>function(e,t,{includeHydrateFallback:s}={}){return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a})).flat(1),[...new Set(n)];var n}(h,a)),[h,a]),p=function(e){let{manifest:t,routeModules:s}=ly(),[n,a]=ya.useState([]);return ya.useEffect((()=>{let n=!1;return async function(e,t,s){return function(e){let t=new Set;return new Set(void 0),e.reduce(((e,s)=>{let n=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}(s));return t.has(n)||(t.add(n),e.push({key:n,link:s})),e}),[])}((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(n,s);return e.links?e.links():[]}return[]})))).flat(1).filter(ay).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,s).then((e=>{n||a(e)})),()=>{n=!0}}),[e,t,s]),n}(h);return ya.createElement(ya.Fragment,null,u.map((e=>ya.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s}))),d.map((e=>ya.createElement("link",{key:e,rel:"modulepreload",href:e,...s}))),p.map((({key:e,link:t})=>ya.createElement("link",{key:e,...t}))))}function dy(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}oy.displayName="FrameworkContext";var py="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{py&&(window.__reactRouterVersion="7.6.0")}catch(IV){}function fy({basename:e,children:t,window:s}){let n=ya.useRef();null==n.current&&(n.current=function(e={}){return function(e,t,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,r=a.history,o="POP",l=null,c=h();function h(){return(r.state||{idx:null}).idx}function u(){o="POP";let e=h(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function d(e){return function(e,t=!1){let s="http://localhost";"undefined"!=typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href),$m(s,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:Zm(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=s+n),new URL(n,s)}(e)}null==c&&(c=0,r.replaceState({...r.state,idx:c},""));let p={get action(){return o},get location(){return e(a,r)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Wm,u),l=e,()=>{a.removeEventListener(Wm,u),l=null}},createHref:e=>t(a,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let s=Qm(p.location,e,t);c=h()+1;let n=Km(s,c),u=p.createHref(s);try{r.pushState(n,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;a.location.assign(u)}i&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let s=Qm(p.location,e,t);c=h();let n=Km(s,c),a=p.createHref(s);r.replaceState(n,"",a),i&&l&&l({action:o,location:p.location,delta:0})},go:e=>r.go(e)};return p}((function(e,t){let{pathname:s,search:n,hash:a}=e.location;return Qm("",{pathname:s,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:Zm(t)}),0,e)}({window:s,v5Compat:!0}));let a=n.current,[i,r]=ya.useState({action:a.action,location:a.location}),o=ya.useCallback((e=>{ya.startTransition((()=>r(e)))}),[r]);return ya.useLayoutEffect((()=>a.listen(o)),[a,o]),ya.createElement(Kg,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gy=ya.forwardRef((function({onClick:e,discover:t="render",prefetch:s="none",relative:n,reloadDocument:a,replace:i,state:r,target:o,to:l,preventScrollReset:c,viewTransition:h,...u},d){let p,{basename:f}=ya.useContext(Sg),m="string"==typeof l&&my.test(l),g=!1;if("string"==typeof l&&m&&(p=l,py))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),s=dg(t.pathname,f);t.origin===e.origin&&null!=s?l=s+t.search+t.hash:g=!0}catch(IV){qm(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){$m(Cg(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=ya.useContext(Sg),{hash:a,pathname:i,search:r}=Ng(e,{relative:t}),o=i;return"/"!==s&&(o="/"===i?s:gg([s,i])),n.createHref({pathname:o,search:r,hash:a})}(l,{relative:n}),[b,v,w]=function(e,t){let s=ya.useContext(oy),[n,a]=ya.useState(!1),[i,r]=ya.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:u}=t,d=ya.useRef(null);ya.useEffect((()=>{if("render"===e&&r(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{r(e.isIntersecting)}))}),{threshold:.5});return d.current&&e.observe(d.current),()=>{e.disconnect()}}}),[e]),ya.useEffect((()=>{if(n){let e=setTimeout((()=>{r(!0)}),100);return()=>{clearTimeout(e)}}}),[n]);let p=()=>{a(!0)},f=()=>{a(!1),r(!1)};return s?"intent"!==e?[i,d,{}]:[i,d,{onFocus:cy(o,p),onBlur:cy(l,f),onMouseEnter:cy(c,p),onMouseLeave:cy(h,f),onTouchStart:cy(u,p)}]:[!1,d,{}]}(s,u),x=function(e,{target:t,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:r}={}){let o=_g(),l=Mg(),c=Ng(e,{relative:i});return ya.useCallback((h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==s?s:Zm(l)===Zm(c);o(e,{replace:t,state:n,preventScrollReset:a,relative:i,viewTransition:r})}}),[l,o,c,s,n,t,e,a,i,r])}(l,{replace:i,state:r,target:o,preventScrollReset:c,relative:n,viewTransition:h}),k=ya.createElement("a",{...u,...w,href:p||y,onClick:g||a?e:function(t){e&&e(t),t.defaultPrevented||x(t)},ref:dy(d,v),target:o,"data-discover":m||"render"!==t?void 0:"true"});return b&&!m?ya.createElement(ya.Fragment,null,k,ya.createElement(hy,{page:y})):k}));function yy(e){let t=ya.useContext(kg);return $m(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}gy.displayName="Link",ya.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:n=!1,style:a,to:i,viewTransition:r,children:o,...l},c){let h=Ng(i,{relative:l.relative}),u=Mg(),d=ya.useContext(Ag),{navigator:p,basename:f}=ya.useContext(Sg),m=null!=d&&function(e,t={}){let s=ya.useContext(Eg);$m(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=yy("useViewTransitionState"),a=Ng(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=dg(s.currentLocation.pathname,n)||s.currentLocation.pathname,r=dg(s.nextLocation.pathname,n)||s.nextLocation.pathname;return null!=hg(a.pathname,r)||null!=hg(a.pathname,i)}(h)&&!0===r,g=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,y=u.pathname,b=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&f&&(b=dg(b,f)||b);const v="/"!==g&&g.endsWith("/")?g.length-1:g.length;let w,x=y===g||!n&&y.startsWith(g)&&"/"===y.charAt(v),k=null!=b&&(b===g||!n&&b.startsWith(g)&&"/"===b.charAt(g.length)),A={isActive:x,isPending:k,isTransitioning:m},E=x?e:void 0;w="function"==typeof s?s(A):[s,x?"active":null,k?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let S="function"==typeof a?a(A):a;return ya.createElement(gy,{...l,"aria-current":E,className:w,ref:c,style:S,to:i,viewTransition:r},"function"==typeof o?o(A):o)})).displayName="NavLink",ya.forwardRef((({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:a,state:i,method:r=Xg,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:u,...d},p)=>{let f=function(){let{router:e}=yy("useSubmit"),{basename:t}=ya.useContext(Sg),s=Hg("useRouteId");return ya.useCallback((async(n,a={})=>{let{action:i,method:r,encType:o,formData:l,body:c}=function(e,t){let s,n,a,i,r;if(Jg(o=e)&&"form"===o.tagName.toLowerCase()){let r=e.getAttribute("action");n=r?dg(r,t):null,s=e.getAttribute("method")||Xg,a=sy(e.getAttribute("enctype"))||Yg,i=new FormData(e)}else if(function(e){return Jg(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Jg(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let r=e.form;if(null==r)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||r.getAttribute("action");if(n=o?dg(o,t):null,s=e.getAttribute("formmethod")||r.getAttribute("method")||Xg,a=sy(e.getAttribute("formenctype"))||sy(r.getAttribute("enctype"))||Yg,i=new FormData(r,e),!function(){if(null===ey)try{new FormData(document.createElement("form"),0),ey=!1}catch(IV){ey=!0}return ey}()){let{name:t,type:s,value:n}=e;if("image"===s){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,n)}}else{if(Jg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Xg,n=null,a=Yg,r=e}var o;return i&&"text/plain"===a&&(r=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:r}}(n,t);if(!1===a.navigate){let t=a.fetcherKey||vy();await e.fetch(t,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||r,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||r,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,t,s])}(),m=function(e,{relative:t}={}){let{basename:s}=ya.useContext(Sg),n=ya.useContext(Tg);$m(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Ng(e||".",{relative:t})},r=Mg();if(null==e){i.search=r.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let s=e.toString();i.search=s?`?${s}`:""}}return e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),"/"!==s&&(i.pathname="/"===i.pathname?s:gg([s,i.pathname])),Zm(i)}(o,{relative:c}),g="get"===r.toLowerCase()?"get":"post",y="string"==typeof o&&my.test(o);return ya.createElement("form",{ref:p,method:g,action:m,onSubmit:n?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,o=(null==n?void 0:n.getAttribute("formmethod"))||r;f(n||e.currentTarget,{fetcherKey:t,method:o,navigate:s,replace:a,state:i,relative:c,preventScrollReset:h,viewTransition:u})},...d,"data-discover":y||"render"!==e?void 0:"true"})})).displayName="Form";var by=0,vy=()=>`__${String(++by)}__`;function wy(e,t){return function(){return e.apply(t,arguments)}}const{toString:xy}=Object.prototype,{getPrototypeOf:ky}=Object,{iterator:Ay,toStringTag:Ey}=Symbol,Sy=(e=>t=>{const s=xy.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Py=e=>(e=e.toLowerCase(),t=>Sy(t)===e),Ty=e=>t=>typeof t===e,{isArray:By}=Array,Cy=Ty("undefined"),My=Py("ArrayBuffer"),Ry=Ty("string"),Iy=Ty("function"),_y=Ty("number"),Dy=e=>null!==e&&"object"==typeof e,Ny=e=>{if("object"!==Sy(e))return!1;const t=ky(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ey in e||Ay in e)},Ly=Py("Date"),Fy=Py("File"),Oy=Py("Blob"),jy=Py("FileList"),Uy=Py("URLSearchParams"),[Gy,Hy,zy,Vy]=["ReadableStream","Request","Response","Headers"].map(Py);function Wy(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),By(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const a=s?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let r;for(n=0;n<i;n++)r=a[n],t.call(null,e[r],r,e)}}function $y(e,t){t=t.toLowerCase();const s=Object.keys(e);let n,a=s.length;for(;a-- >0;)if(n=s[a],t===n.toLowerCase())return n;return null}const qy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ky=e=>!Cy(e)&&e!==qy,Qy=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&ky(Uint8Array)),Zy=Py("HTMLFormElement"),Xy=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Yy=Py("RegExp"),Jy=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Wy(s,((s,a)=>{let i;!1!==(i=t(s,a,e))&&(n[a]=i||s)})),Object.defineProperties(e,n)},eb=Py("AsyncFunction"),tb=(sb="function"==typeof setImmediate,nb=Iy(qy.postMessage),sb?setImmediate:nb?(ab=`axios@${Math.random()}`,ib=[],qy.addEventListener("message",(({source:e,data:t})=>{e===qy&&t===ab&&ib.length&&ib.shift()()}),!1),e=>{ib.push(e),qy.postMessage(ab,"*")}):e=>setTimeout(e));var sb,nb,ab,ib;const rb="undefined"!=typeof queueMicrotask?queueMicrotask.bind(qy):"undefined"!=typeof process&&process.nextTick||tb,ob={isArray:By,isArrayBuffer:My,isBuffer:function(e){return null!==e&&!Cy(e)&&null!==e.constructor&&!Cy(e.constructor)&&Iy(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Iy(e.append)&&("formdata"===(t=Sy(e))||"object"===t&&Iy(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&My(e.buffer),t},isString:Ry,isNumber:_y,isBoolean:e=>!0===e||!1===e,isObject:Dy,isPlainObject:Ny,isReadableStream:Gy,isRequest:Hy,isResponse:zy,isHeaders:Vy,isUndefined:Cy,isDate:Ly,isFile:Fy,isBlob:Oy,isRegExp:Yy,isFunction:Iy,isStream:e=>Dy(e)&&Iy(e.pipe),isURLSearchParams:Uy,isTypedArray:Qy,isFileList:jy,forEach:Wy,merge:function e(){const{caseless:t}=Ky(this)&&this||{},s={},n=(n,a)=>{const i=t&&$y(s,a)||a;Ny(s[i])&&Ny(n)?s[i]=e(s[i],n):Ny(n)?s[i]=e({},n):By(n)?s[i]=n.slice():s[i]=n};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Wy(arguments[a],n);return s},extend:(e,t,s,{allOwnKeys:n}={})=>(Wy(t,((t,n)=>{s&&Iy(t)?e[n]=wy(t,s):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let a,i,r;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)r=a[i],n&&!n(r,e,t)||o[r]||(t[r]=e[r],o[r]=!0);e=!1!==s&&ky(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:Sy,kindOfTest:Py,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if(By(e))return e;let t=e.length;if(!_y(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Ay]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:Zy,hasOwnProperty:Xy,hasOwnProp:Xy,reduceDescriptors:Jy,freezeMethods:e=>{Jy(e,((t,s)=>{if(Iy(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];Iy(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))}))},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach((e=>{s[e]=!0}))};return By(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,s){return t.toUpperCase()+s})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$y,global:qy,isContextDefined:Ky,isSpecCompliantForm:function(e){return!!(e&&Iy(e.append)&&"FormData"===e[Ey]&&e[Ay])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(Dy(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const a=By(e)?[]:{};return Wy(e,((e,t)=>{const i=s(e,n+1);!Cy(i)&&(a[t]=i)})),t[n]=void 0,a}}return e};return s(e,0)},isAsyncFn:eb,isThenable:e=>e&&(Dy(e)||Iy(e))&&Iy(e.then)&&Iy(e.catch),setImmediate:tb,asap:rb,isIterable:e=>null!=e&&Iy(e[Ay])};function lb(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}ob.inherits(lb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ob.toJSONObject(this.config),code:this.code,status:this.status}}});const cb=lb.prototype,hb={};function ub(e){return ob.isPlainObject(e)||ob.isArray(e)}function db(e){return ob.endsWith(e,"[]")?e.slice(0,-2):e}function pb(e,t,s){return e?e.concat(t).map((function(e,t){return e=db(e),!s&&t?"["+e+"]":e})).join(s?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{hb[e]={value:e}})),Object.defineProperties(lb,hb),Object.defineProperty(cb,"isAxiosError",{value:!0}),lb.from=(e,t,s,n,a,i)=>{const r=Object.create(cb);return ob.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),lb.call(r,e.message,t,s,n,a),r.cause=e,r.name=e.name,i&&Object.assign(r,i),r};const fb=ob.toFlatObject(ob,{},null,(function(e){return/^is[A-Z]/.test(e)}));function mb(e,t,s){if(!ob.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=ob.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ob.isUndefined(t[e])}))).metaTokens,a=s.visitor||c,i=s.dots,r=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&ob.isSpecCompliantForm(t);if(!ob.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ob.isDate(e))return e.toISOString();if(ob.isBoolean(e))return e.toString();if(!o&&ob.isBlob(e))throw new lb("Blob is not supported. Use a Buffer instead.");return ob.isArrayBuffer(e)||ob.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,a){let o=e;if(e&&!a&&"object"==typeof e)if(ob.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(ob.isArray(e)&&function(e){return ob.isArray(e)&&!e.some(ub)}(e)||(ob.isFileList(e)||ob.endsWith(s,"[]"))&&(o=ob.toArray(e)))return s=db(s),o.forEach((function(e,n){!ob.isUndefined(e)&&null!==e&&t.append(!0===r?pb([s],n,i):null===r?s:s+"[]",l(e))})),!1;return!!ub(e)||(t.append(pb(a,s,i),l(e)),!1)}const h=[],u=Object.assign(fb,{defaultVisitor:c,convertValue:l,isVisitable:ub});if(!ob.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!ob.isUndefined(s)){if(-1!==h.indexOf(s))throw Error("Circular reference detected in "+n.join("."));h.push(s),ob.forEach(s,(function(s,i){!0===(!(ob.isUndefined(s)||null===s)&&a.call(t,s,ob.isString(i)?i.trim():i,n,u))&&e(s,n?n.concat(i):[i])})),h.pop()}}(e),t}function gb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function yb(e,t){this._pairs=[],e&&mb(e,this,t)}const bb=yb.prototype;function vb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wb(e,t,s){if(!t)return e;const n=s&&s.encode||vb;ob.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(i=a?a(t,s):ob.isURLSearchParams(t)?t.toString():new yb(t,s).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}bb.append=function(e,t){this._pairs.push([e,t])},bb.toString=function(e){const t=e?function(t){return e.call(this,t,gb)}:gb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class xb{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ob.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const kb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ab={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:yb,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Eb="undefined"!=typeof window&&"undefined"!=typeof document,Sb="object"==typeof navigator&&navigator||void 0,Pb=Eb&&(!Sb||["ReactNative","NativeScript","NS"].indexOf(Sb.product)<0),Tb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Bb=Eb&&window.location.href||"http://localhost",Cb={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Eb,hasStandardBrowserEnv:Pb,hasStandardBrowserWebWorkerEnv:Tb,navigator:Sb,origin:Bb},Symbol.toStringTag,{value:"Module"})),...Ab};function Mb(e){function t(e,s,n,a){let i=e[a++];if("__proto__"===i)return!0;const r=Number.isFinite(+i),o=a>=e.length;return i=!i&&ob.isArray(n)?n.length:i,o?(ob.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!r):(n[i]&&ob.isObject(n[i])||(n[i]=[]),t(e,s,n[i],a)&&ob.isArray(n[i])&&(n[i]=function(e){const t={},s=Object.keys(e);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],t[i]=e[i];return t}(n[i])),!r)}if(ob.isFormData(e)&&ob.isFunction(e.entries)){const s={};return ob.forEachEntry(e,((e,n)=>{t(function(e){return ob.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,s,0)})),s}return null}const Rb={transitional:kb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,a=ob.isObject(e);if(a&&ob.isHTMLForm(e)&&(e=new FormData(e)),ob.isFormData(e))return n?JSON.stringify(Mb(e)):e;if(ob.isArrayBuffer(e)||ob.isBuffer(e)||ob.isStream(e)||ob.isFile(e)||ob.isBlob(e)||ob.isReadableStream(e))return e;if(ob.isArrayBufferView(e))return e.buffer;if(ob.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return mb(e,new Cb.classes.URLSearchParams,Object.assign({visitor:function(e,t,s,n){return Cb.isNode&&ob.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=ob.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return mb(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e){if(ob.isString(e))try{return(0,JSON.parse)(e),ob.trim(e)}catch(IV){if("SyntaxError"!==IV.name)throw IV}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Rb.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(ob.isResponse(e)||ob.isReadableStream(e))return e;if(e&&ob.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(IV){if(s){if("SyntaxError"===IV.name)throw lb.from(IV,lb.ERR_BAD_RESPONSE,this,null,this.response);throw IV}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cb.classes.FormData,Blob:Cb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ob.forEach(["delete","get","head","post","put","patch"],(e=>{Rb.headers[e]={}}));const Ib=ob.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_b=Symbol("internals");function Db(e){return e&&String(e).trim().toLowerCase()}function Nb(e){return!1===e||null==e?e:ob.isArray(e)?e.map(Nb):String(e)}function Lb(e,t,s,n,a){return ob.isFunction(n)?n.call(this,t,s):(a&&(t=s),ob.isString(t)?ob.isString(n)?-1!==t.indexOf(n):ob.isRegExp(n)?n.test(t):void 0:void 0)}let Fb=class{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function a(e,t,s){const a=Db(t);if(!a)throw new Error("header name must be a non-empty string");const i=ob.findKey(n,a);(!i||void 0===n[i]||!0===s||void 0===s&&!1!==n[i])&&(n[i||t]=Nb(e))}const i=(e,t)=>ob.forEach(e,((e,s)=>a(e,s,t)));if(ob.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(ob.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let s,n,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),s=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!s||t[s]&&Ib[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)})),t})(e),t);else if(ob.isObject(e)&&ob.isIterable(e)){let s,n,a={};for(const t of e){if(!ob.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(s=a[n])?ob.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,s);return this}get(e,t){if(e=Db(e)){const s=ob.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(ob.isFunction(t))return t.call(this,e,s);if(ob.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Db(e)){const s=ob.findKey(this,e);return!(!s||void 0===this[s]||t&&!Lb(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function a(e){if(e=Db(e)){const a=ob.findKey(s,e);!a||t&&!Lb(0,s[a],a,t)||(delete s[a],n=!0)}}return ob.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const a=t[s];e&&!Lb(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,s={};return ob.forEach(this,((n,a)=>{const i=ob.findKey(s,a);if(i)return t[i]=Nb(n),void delete t[a];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,s)=>t.toUpperCase()+s))}(a):String(a).trim();r!==a&&delete t[a],t[r]=Nb(n),s[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ob.forEach(this,((s,n)=>{null!=s&&!1!==s&&(t[n]=e&&ob.isArray(s)?s.join(", "):s)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach((e=>s.set(e))),s}static accessor(e){const t=(this[_b]=this[_b]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=Db(e);t[n]||(function(e,t){const s=ob.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+s,{value:function(e,s,a){return this[n].call(this,t,e,s,a)},configurable:!0})}))}(s,e),t[n]=!0)}return ob.isArray(e)?e.forEach(n):n(e),this}};function Ob(e,t){const s=this||Rb,n=t||s,a=Fb.from(n.headers);let i=n.data;return ob.forEach(e,(function(e){i=e.call(s,i,a.normalize(),t?t.status:void 0)})),a.normalize(),i}function jb(e){return!(!e||!e.__CANCEL__)}function Ub(e,t,s){lb.call(this,null==e?"canceled":e,lb.ERR_CANCELED,t,s),this.name="CanceledError"}function Gb(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new lb("Request failed with status code "+s.status,[lb.ERR_BAD_REQUEST,lb.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}Fb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ob.reduceDescriptors(Fb.prototype,(({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}})),ob.freezeMethods(Fb),ob.inherits(Ub,lb,{__CANCEL__:!0});const Hb=(e,t,s=3)=>{let n=0;const a=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a,i=0,r=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[r];a||(a=l),s[i]=o,n[i]=l;let h=r,u=0;for(;h!==i;)u+=s[h++],h%=e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),l-a<t)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}}(50,250);return function(e,t){let s,n,a=0,i=1e3/t;const r=(t,i=Date.now())=>{a=i,s=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=i?r(e,t):(s=e,n||(n=setTimeout((()=>{n=null,r(s)}),i-o)))},()=>s&&r(s)]}((s=>{const i=s.loaded,r=s.lengthComputable?s.total:void 0,o=i-n,l=a(o);n=i,e({loaded:i,total:r,progress:r?i/r:void 0,bytes:o,rate:l||void 0,estimated:l&&r&&i<=r?(r-i)/l:void 0,event:s,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),s)},zb=(e,t)=>{const s=null!=e;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Vb=e=>(...t)=>ob.asap((()=>e(...t))),Wb=Cb.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Cb.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Cb.origin),Cb.navigator&&/(msie|trident)/i.test(Cb.navigator.userAgent)):()=>!0,$b=Cb.hasStandardBrowserEnv?{write(e,t,s,n,a,i){const r=[e+"="+encodeURIComponent(t)];ob.isNumber(s)&&r.push("expires="+new Date(s).toGMTString()),ob.isString(n)&&r.push("path="+n),ob.isString(a)&&r.push("domain="+a),!0===i&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function qb(e,t,s){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kb=e=>e instanceof Fb?{...e}:e;function Qb(e,t){t=t||{};const s={};function n(e,t,s,n){return ob.isPlainObject(e)&&ob.isPlainObject(t)?ob.merge.call({caseless:n},e,t):ob.isPlainObject(t)?ob.merge({},t):ob.isArray(t)?t.slice():t}function a(e,t,s,a){return ob.isUndefined(t)?ob.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function i(e,t){if(!ob.isUndefined(t))return n(void 0,t)}function r(e,t){return ob.isUndefined(t)?ob.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(s,a,i){return i in t?n(s,a):i in e?n(void 0,s):void 0}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(e,t,s)=>a(Kb(e),Kb(t),0,!0)};return ob.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||a,r=i(e[n],t[n],n);ob.isUndefined(r)&&i!==o||(s[n]=r)})),s}const Zb=e=>{const t=Qb({},e);let s,{data:n,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=t;if(t.headers=o=Fb.from(o),t.url=wb(qb(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ob.isFormData(n))if(Cb.hasStandardBrowserEnv||Cb.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(s=o.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Cb.hasStandardBrowserEnv&&(a&&ob.isFunction(a)&&(a=a(t)),a||!1!==a&&Wb(t.url))){const e=i&&r&&$b.read(r);e&&o.set(i,e)}return t},Xb="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,s){const n=Zb(e);let a=n.data;const i=Fb.from(n.headers).normalize();let r,o,l,c,h,{responseType:u,onUploadProgress:d,onDownloadProgress:p}=n;function f(){c&&c(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(r),n.signal&&n.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=Fb.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Gb((function(e){t(e),f()}),(function(e){s(e),f()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(s(new lb("Request aborted",lb.ECONNABORTED,e,m)),m=null)},m.onerror=function(){s(new lb("Network Error",lb.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||kb;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),s(new lb(t,a.clarifyTimeoutError?lb.ETIMEDOUT:lb.ECONNABORTED,e,m)),m=null},void 0===a&&i.setContentType(null),"setRequestHeader"in m&&ob.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),ob.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),u&&"json"!==u&&(m.responseType=n.responseType),p&&([l,h]=Hb(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([o,c]=Hb(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(r=t=>{m&&(s(!t||t.type?new Ub(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(r),n.signal&&(n.signal.aborted?r():n.signal.addEventListener("abort",r)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===Cb.protocols.indexOf(y)?s(new lb("Unsupported protocol "+y+":",lb.ERR_BAD_REQUEST,e)):m.send(a||null)}))},Yb=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,n=new AbortController;const a=function(e){if(!s){s=!0,r();const t=e instanceof Error?e:this.reason;n.abort(t instanceof lb?t:new Ub(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,a(new lb(`timeout ${t} of ms exceeded`,lb.ETIMEDOUT))}),t);const r=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:o}=n;return o.unsubscribe=()=>ob.asap(r),o}},Jb=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let n,a=0;for(;a<s;)n=a+t,yield e.slice(a,n),a=n},ev=(e,t,s,n)=>{const a=async function*(e,t){for await(const s of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}}(e))yield*Jb(s,t)}(e,t);let i,r=0,o=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let i=n.byteLength;if(s){let e=r+=i;s(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},tv="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,sv=tv&&"function"==typeof ReadableStream,nv=tv&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),av=(e,...t)=>{try{return!!e(...t)}catch(IV){return!1}},iv=sv&&av((()=>{let e=!1;const t=new Request(Cb.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),rv=sv&&av((()=>ob.isReadableStream(new Response("").body))),ov={stream:rv&&(e=>e.body)};var lv;tv&&(lv=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ov[e]&&(ov[e]=ob.isFunction(lv[e])?t=>t[e]():(t,s)=>{throw new lb(`Response type '${e}' is not supported`,lb.ERR_NOT_SUPPORT,s)})})));const cv={http:null,xhr:Xb,fetch:tv&&(async e=>{let{url:t,method:s,data:n,signal:a,cancelToken:i,timeout:r,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:h,withCredentials:u="same-origin",fetchOptions:d}=Zb(e);c=c?(c+"").toLowerCase():"text";let p,f=Yb([a,i&&i.toAbortSignal()],r);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&iv&&"get"!==s&&"head"!==s&&0!==(g=await(async(e,t)=>{const s=ob.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(ob.isBlob(e))return e.size;if(ob.isSpecCompliantForm(e)){const t=new Request(Cb.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ob.isArrayBufferView(e)||ob.isArrayBuffer(e)?e.byteLength:(ob.isURLSearchParams(e)&&(e+=""),ob.isString(e)?(await nv(e)).byteLength:void 0)})(t):s})(h,n))){let e,s=new Request(t,{method:"POST",body:n,duplex:"half"});if(ob.isFormData(n)&&(e=s.headers.get("content-type"))&&h.setContentType(e),s.body){const[e,t]=zb(g,Hb(Vb(l)));n=ev(s.body,65536,e,t)}}ob.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:a?u:void 0});let i=await fetch(p,d);const r=rv&&("stream"===c||"response"===c);if(rv&&(o||r&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=ob.toFiniteNumber(i.headers.get("content-length")),[s,n]=o&&zb(t,Hb(Vb(o),!0))||[];i=new Response(ev(i.body,65536,s,(()=>{n&&n(),m&&m()})),e)}c=c||"text";let y=await ov[ob.findKey(ov,c)||"text"](i,e);return!r&&m&&m(),await new Promise(((t,s)=>{Gb(t,s,{data:y,headers:Fb.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new lb("Network Error",lb.ERR_NETWORK,e,p),{cause:y.cause||y});throw lb.from(y,y&&y.code,e,p)}})};ob.forEach(cv,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(IV){}Object.defineProperty(e,"adapterName",{value:t})}}));const hv=e=>`- ${e}`,uv=e=>ob.isFunction(e)||null===e||!1===e,dv=e=>{e=ob.isArray(e)?e:[e];const{length:t}=e;let s,n;const a={};for(let i=0;i<t;i++){let t;if(s=e[i],n=s,!uv(s)&&(n=cv[(t=String(s)).toLowerCase()],void 0===n))throw new lb(`Unknown adapter '${t}'`);if(n)break;a[t||"#"+i]=n}if(!n){const e=Object.entries(a).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new lb("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(hv).join("\n"):" "+hv(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function pv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ub(null,e)}function fv(e){return pv(e),e.headers=Fb.from(e.headers),e.data=Ob.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dv(e.adapter||Rb.adapter)(e).then((function(t){return pv(e),t.data=Ob.call(e,e.transformResponse,t),t.headers=Fb.from(t.headers),t}),(function(t){return jb(t)||(pv(e),t&&t.response&&(t.response.data=Ob.call(e,e.transformResponse,t.response),t.response.headers=Fb.from(t.response.headers))),Promise.reject(t)}))}const mv="1.10.0",gv={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{gv[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));const yv={};gv.transitional=function(e,t,s){function n(e,t){return"[Axios v"+mv+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,a,i)=>{if(!1===e)throw new lb(n(a," has been removed"+(t?" in "+t:"")),lb.ERR_DEPRECATED);return t&&!yv[a]&&(yv[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,a,i)}},gv.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const bv={assertOptions:function(e,t,s){if("object"!=typeof e)throw new lb("options must be an object",lb.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],r=t[i];if(r){const t=e[i],s=void 0===t||r(t,i,e);if(!0!==s)throw new lb("option "+i+" must be "+s,lb.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new lb("Unknown option "+i,lb.ERR_BAD_OPTION)}},validators:gv},vv=bv.validators;let wv=class{constructor(e){this.defaults=e||{},this.interceptors={request:new xb,response:new xb}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(IV){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Qb(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:a}=t;void 0!==s&&bv.assertOptions(s,{silentJSONParsing:vv.transitional(vv.boolean),forcedJSONParsing:vv.transitional(vv.boolean),clarifyTimeoutError:vv.transitional(vv.boolean)},!1),null!=n&&(ob.isFunction(n)?t.paramsSerializer={serialize:n}:bv.assertOptions(n,{encode:vv.function,serialize:vv.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bv.assertOptions(t,{baseUrl:vv.spelling("baseURL"),withXsrfToken:vv.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&ob.merge(a.common,a[t.method]);a&&ob.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Fb.concat(i,a);const r=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,u=0;if(!o){const e=[fv.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),h=e.length,c=Promise.resolve(t);u<h;)c=c.then(e[u++],e[u++]);return c}h=r.length;let d=t;for(u=0;u<h;){const e=r[u++],t=r[u++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=fv.call(this,d)}catch(p){return Promise.reject(p)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(e){return wb(qb((e=Qb(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};ob.forEach(["delete","get","head","options"],(function(e){wv.prototype[e]=function(t,s){return this.request(Qb(s||{},{method:e,url:t,data:(s||{}).data}))}})),ob.forEach(["post","put","patch"],(function(e){function t(t){return function(s,n,a){return this.request(Qb(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}wv.prototype[e]=t(),wv.prototype[e+"Form"]=t(!0)}));const xv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xv).forEach((([e,t])=>{xv[t]=e}));const kv=function e(t){const s=new wv(t),n=wy(wv.prototype.request,s);return ob.extend(n,wv.prototype,s,{allOwnKeys:!0}),ob.extend(n,s,null,{allOwnKeys:!0}),n.create=function(s){return e(Qb(t,s))},n}(Rb);kv.Axios=wv,kv.CanceledError=Ub,kv.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const s=this;this.promise.then((e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{s.subscribe(e),t=e})).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e((function(e,n,a){s.reason||(s.reason=new Ub(e,n,a),t(s.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},kv.isCancel=jb,kv.VERSION=mv,kv.toFormData=mb,kv.AxiosError=lb,kv.Cancel=kv.CanceledError,kv.all=function(e){return Promise.all(e)},kv.spread=function(e){return function(t){return e.apply(null,t)}},kv.isAxiosError=function(e){return ob.isObject(e)&&!0===e.isAxiosError},kv.mergeConfig=Qb,kv.AxiosHeaders=Fb,kv.formToJSON=e=>Mb(ob.isHTMLForm(e)?new FormData(e):e),kv.getAdapter=dv,kv.HttpStatusCode=xv,kv.default=kv;const{Axios:Av,AxiosError:Ev,CanceledError:Sv,isCancel:Pv,CancelToken:Tv,VERSION:Bv,all:Cv,Cancel:Mv,isAxiosError:Rv,spread:Iv,toFormData:_v,AxiosHeaders:Dv,HttpStatusCode:Nv,formToJSON:Lv,getAdapter:Fv,mergeConfig:Ov}=kv,jv=kv.create({baseURL:"https://insomnus-backend-production-8a4c3b46c656.herokuapp.com/api",withCredentials:!0});let Uv=!1,Gv=[];const Hv=(e,t=null)=>{Gv.forEach((s=>{e?s.reject(e):s.resolve(t)})),Gv=[]};jv.interceptors.request.use((e=>{var t;const s=null==(t=e.url)?void 0:t.includes("/auth/"),n=localStorage.getItem("access_token");return n&&!s&&(e.headers.Authorization=`Bearer ${n}`),e})),jv.interceptors.response.use((e=>e),(async e=>{var t;const s=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!s._retry){if(Uv)return new Promise(((e,t)=>{Gv.push({resolve:e,reject:t})})).then((e=>(s.headers.Authorization=`Bearer ${e}`,jv(s)))).catch((e=>Promise.reject(e)));s._retry=!0,Uv=!0;try{const{accessToken:e}=await zv();return localStorage.setItem("access_token",e),Hv(null,e),jv(s)}catch(n){return Hv(n,null),localStorage.removeItem("access_token"),window.location.href="/login",Promise.reject(n)}finally{Uv=!1}}return Promise.reject(e)}));const zv=async()=>(await jv.post("/auth/refresh")).data,Vv={somnia:{chainId:parseInt("50312"),chainIdHex:`0x${parseInt("50312").toString(16)}`,chainName:"Somnia Shannon Testnet",rpcUrls:["https://dream-rpc.somnia.network"],blockExplorerUrls:["https://shannon-explorer.somnia.network/"],nativeCurrency:{name:"STT",symbol:"STT",decimals:parseInt("18")}}},Wv=(e="somnia")=>Vv[e],$v=()=>Wv(),qv={isCorrectNetwork:async()=>{if(void 0===window.ethereum)return!1;try{return await window.ethereum.request({method:"eth_chainId"})===$v().chainIdHex}catch(e){return console.error("Error checking network:",e),!1}},switchToCorrectNetwork:async()=>{if(void 0===window.ethereum)throw new Error("MetaMask is not installed");const e=$v();try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainIdHex}]}),!0}catch(t){if(4902!==t.code)throw console.error("Error switching network:",t),new Error("Failed to switch to Somnia testnet");try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainIdHex,chainName:e.chainName,rpcUrls:e.rpcUrls,blockExplorerUrls:e.blockExplorerUrls,nativeCurrency:e.nativeCurrency}]}),!0}catch(s){throw console.error("Error adding network:",s),new Error("Failed to add Somnia testnet to MetaMask")}}},getCurrentConfig:$v,getConfig:Wv},Kv=ya.createContext(),Qv=({children:e})=>{const[t,s]=ya.useState(null),[n,a]=ya.useState(!0),[i,r]=ya.useState("checking");ya.useEffect((()=>{const e=localStorage.getItem("access_token"),t=localStorage.getItem("user_data");e&&t&&s({...JSON.parse(t),token:e}),a(!1),o()}),[]),ya.useEffect((()=>{if(window.ethereum){const e=()=>{o()},t=e=>{0===e.length?l():o()};return window.ethereum.on("chainChanged",e),window.ethereum.on("accountsChanged",t),()=>{window.ethereum.removeListener("chainChanged",e),window.ethereum.removeListener("accountsChanged",t)}}}),[]);const o=async()=>{try{const e=await qv.isCorrectNetwork();r(e?"correct":"wrong")}catch(e){console.error("Error checking network:",e),r("error")}},l=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),s(null)};return n?Pa.jsx("div",{children:"Loading..."}):Pa.jsx(Kv.Provider,{value:{user:t,login:async({walletAddress:e,signature:t,message:n})=>{try{const a=await(async({walletAddress:e,signature:t,message:s})=>(await jv.post("/auth/connect",{walletAddress:e,signature:t,message:s})).data)({walletAddress:e,signature:t,message:n});if(console.log(a.data.token),(null==a?void 0:a.data.token)&&(null==a?void 0:a.data.user))return localStorage.setItem("access_token",a.data.token),localStorage.setItem("user_data",JSON.stringify(a.data.user)),s({...a.data.user,token:a.data.token}),a.data;throw new Error("Invalid login response")}catch(a){throw console.error("Login error:",a),a}},logout:l,isLoading:n,networkStatus:i,checkNetworkStatus:o,switchToCorrectNetwork:qv.switchToCorrectNetwork},children:e})},Zv=()=>ya.useContext(Kv),Xv=ya.createContext(),Yv=()=>ya.useContext(Xv)||{},Jv=({children:e})=>{const[t,s]=ya.useState({}),n={gameControls:t,setGameControls:s};return Pa.jsx(Xv.Provider,{value:n,children:e})};function ew(e,t,s){const n=t.split("|").map((e=>e.trim()));for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const a=new Error(`invalid value for type ${t}`);throw a.code="INVALID_ARGUMENT",a.argument=`value.${s}`,a.value=e,a}async function tw(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,s,n)=>(e[t[n]]=s,e)),{})}function sw(e,t,s){for(let n in t){let a=t[n];const i=s?s[n]:null;i&&ew(a,i,n),Object.defineProperty(e,n,{enumerable:!0,value:a,writable:!1})}}function nw(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(nw).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let n=0;n<e.length;n++)s+=t[e[n]>>4],s+=t[15&e[n]];return s}if("object"==typeof e&&"function"==typeof e.toJSON)return nw(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${nw(t)}: ${nw(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function aw(e,t){return e&&e.code===t}function iw(e){return aw(e,"CALL_EXCEPTION")}function rw(e,t,s){let n,a=e;{const n=[];if(s){if("message"in s||"code"in s||"name"in s)throw new Error(`value will overwrite populated values: ${nw(s)}`);for(const e in s){if("shortMessage"===e)continue;const t=s[e];n.push(e+"="+nw(t))}}n.push(`code=${t}`),n.push("version=6.13.5"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(e);break;default:n=new Error(e)}return sw(n,{code:t}),s&&Object.assign(n,s),null==n.shortMessage&&sw(n,{shortMessage:a}),n}function ow(e,t,s,n){if(!e)throw rw(t,s,n)}function lw(e,t,s,n){ow(e,t,"INVALID_ARGUMENT",{argument:s,value:n})}function cw(e,t,s){null==s&&(s=""),s&&(s=": "+s),ow(e>=t,"missing argument"+s,"MISSING_ARGUMENT",{count:e,expectedCount:t}),ow(e<=t,"too many arguments"+s,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}function hw(e,t,s){if(null==s&&(s=""),e!==t){let e=s,t="new";s&&(e+=".",t+=" "+s),ow(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function uw(e,t,s){if(e instanceof Uint8Array)return s?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let s=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(s,s+2),16),s+=2;return t}lw(!1,"invalid BytesLike value",t||"value",e)}function dw(e,t){return uw(e,t,!1)}function pw(e,t){return uw(e,t,!0)}function fw(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}function mw(e){return fw(e,!0)||e instanceof Uint8Array}["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(s){}return e}),[]);const gw="0123456789abcdef";function yw(e){const t=dw(e);let s="0x";for(let n=0;n<t.length;n++){const e=t[n];s+=gw[(240&e)>>4]+gw[15&e]}return s}function bw(e){return"0x"+e.map((e=>yw(e).substring(2))).join("")}function vw(e){return fw(e,!0)?(e.length-2)/2:dw(e).length}function ww(e,t,s){const n=dw(e);return null!=s&&s>n.length&&ow(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s}),yw(n.slice(null==t?0:t,null==s?n.length:s))}function xw(e,t,s){const n=dw(e);ow(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const a=new Uint8Array(t);return a.fill(0),s?a.set(n,t-n.length):a.set(n,0),yw(a)}function kw(e,t){return xw(e,t,!0)}const Aw=BigInt(0),Ew=BigInt(1),Sw=9007199254740991;function Pw(e,t){let s=Bw(e,"value");const n=BigInt(Iw(t,"width")),a=Ew<<n-Ew;return s<Aw?(s=-s,ow(s<=a,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~s&(Ew<<n)-Ew)+Ew):(ow(s<a,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),s)}function Tw(e,t){const s=Cw(e,"value"),n=BigInt(Iw(t,"bits"));return s&(Ew<<n)-Ew}function Bw(e,t){switch(typeof e){case"bigint":return e;case"number":return lw(Number.isInteger(e),"underflow",t||"value",e),lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(IV){lw(!1,`invalid BigNumberish string: ${IV.message}`,t||"value",e)}}lw(!1,"invalid BigNumberish value",t||"value",e)}function Cw(e,t){const s=Bw(e,t);return ow(s>=Aw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),s}const Mw="0123456789abcdef";function Rw(e){if(e instanceof Uint8Array){let t="0x0";for(const s of e)t+=Mw[s>>4],t+=Mw[15&s];return BigInt(t)}return Bw(e)}function Iw(e,t){switch(typeof e){case"bigint":return lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),Number(e);case"number":return lw(Number.isInteger(e),"underflow",t||"value",e),lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return Iw(BigInt(e),t)}catch(IV){lw(!1,`invalid numeric string: ${IV.message}`,t||"value",e)}}lw(!1,"invalid numeric value",t||"value",e)}function _w(e,t){let s=Cw(e,"value").toString(16);if(null==t)s.length%2&&(s="0"+s);else{const n=Iw(t,"width");for(ow(2*n>=s.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});s.length<2*n;)s="0"+s}return"0x"+s}function Dw(e){const t=Cw(e,"value");if(t===Aw)return new Uint8Array([]);let s=t.toString(16);s.length%2&&(s="0"+s);const n=new Uint8Array(s.length/2);for(let a=0;a<n.length;a++){const e=2*a;n[a]=parseInt(s.substring(e,e+2),16)}return n}function Nw(e){let t=yw(mw(e)?e:Dw(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const Lw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Fw=BigInt(58);class Ow{constructor(t,s,n){En(this,"filter"),En(this,"emitter"),Tn(this,e),Bn(this,e,s),sw(this,{emitter:t,filter:n})}async removeListener(){null!=Pn(this,e)&&await this.emitter.off(this.filter,Pn(this,e))}}function jw(e,t,s,n,a){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<s.length&&s[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?s.length-t-1:0}e=new WeakMap;const Uw=Object.freeze({error:function(e,t,s,n,a){lw(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",s)},ignore:jw,replace:function(e,t,s,n,a){return"OVERLONG"===e?(lw("number"==typeof a,"invalid bad code point for replacement","badCodepoint",a),n.push(a),0):(n.push(65533),jw(e,t,s))}});function Gw(e,t){lw("string"==typeof e,"invalid string value","str",e);let s=[];for(let n=0;n<e.length;n++){const t=e.charCodeAt(n);if(t<128)s.push(t);else if(t<2048)s.push(t>>6|192),s.push(63&t|128);else if(55296==(64512&t)){n++;const a=e.charCodeAt(n);lw(n<e.length&&56320==(64512&a),"invalid surrogate pair","str",e);const i=65536+((1023&t)<<10)+(1023&a);s.push(i>>18|240),s.push(i>>12&63|128),s.push(i>>6&63|128),s.push(63&i|128)}else s.push(t>>12|224),s.push(t>>6&63|128),s.push(63&t|128)}return new Uint8Array(s)}function Hw(e,t){return s=function(e,t){null==t&&(t=Uw.error);const s=dw(e,"bytes"),n=[];let a=0;for(;a<s.length;){const e=s[a++];if(!(e>>7)){n.push(e);continue}let i=null,r=null;if(192==(224&e))i=1,r=127;else if(224==(240&e))i=2,r=2047;else{if(240!=(248&e)){a+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",a-1,s,n);continue}i=3,r=65535}if(a-1+i>=s.length){a+=t("OVERRUN",a-1,s,n);continue}let o=e&(1<<8-i-1)-1;for(let l=0;l<i;l++){let e=s[a];if(128!=(192&e)){a+=t("MISSING_CONTINUE",a,s,n),o=null;break}o=o<<6|63&e,a++}null!==o&&(o>1114111?a+=t("OUT_OF_RANGE",a-1-i,s,n,o):o>=55296&&o<=57343?a+=t("UTF16_SURROGATE",a-1-i,s,n,o):o<=r?a+=t("OVERLONG",a-1-i,s,n,o):n.push(o))}return n}(e,t),s.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("");var s}function zw(e){return async function(e,t){ow(null==t||!t.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();ow("http"===s||"https"===s,`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ow("https"===s||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=null;const a=new AbortController,i=setTimeout((()=>{n=rw("request timeout","TIMEOUT"),a.abort()}),e.timeout);t&&t.addListener((()=>{n=rw("request cancelled","CANCELLED"),a.abort()}));const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:a.signal};let o;try{o=await fetch(e.url,r)}catch(u){if(clearTimeout(i),n)throw n;throw u}clearTimeout(i);const l={};o.headers.forEach(((e,t)=>{l[t.toLowerCase()]=e}));const c=await o.arrayBuffer(),h=null==c?null:new Uint8Array(c);return{statusCode:o.status,statusMessage:o.statusText,headers:l,body:h}}}let Vw=zw();const Ww=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),$w=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let qw=!1;async function Kw(e,t){try{const t=e.match(Ww);if(!t)throw new Error("invalid data");return new nx(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return dw(t)}(t[3]):Gw(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(s){return new nx(599,"BAD REQUEST (invalid data: URI)",{},null,new tx(e))}}function Qw(e){return async function(t,s){try{const s=t.match($w);if(!s)throw new Error("invalid link");return new tx(`${e}${s[2]}`)}catch(n){return new nx(599,"BAD REQUEST (invalid IPFS URI)",{},null,new tx(t))}}}const Zw={data:Kw,ipfs:Qw("https://gateway.ipfs.io/ipfs/")},Xw=new WeakMap;class Yw{constructor(e){Tn(this,t),Tn(this,s),Bn(this,t,[]),Bn(this,s,!1),Xw.set(e,(()=>{if(!Pn(this,s)){Bn(this,s,!0);for(const e of Pn(this,t))setTimeout((()=>{e()}),0);Bn(this,t,[])}}))}addListener(e){ow(!Pn(this,s),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Pn(this,t).push(e)}get cancelled(){return Pn(this,s)}checkSignal(){ow(!this.cancelled,"cancelled","CANCELLED",{})}}function Jw(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}t=new WeakMap,s=new WeakMap;const ex=class e{constructor(e){Tn(this,b),Tn(this,n),Tn(this,a),Tn(this,i),Tn(this,r),Tn(this,o),Tn(this,l),Tn(this,c),Tn(this,h),Tn(this,u),Tn(this,d),Tn(this,p),Tn(this,f),Tn(this,m),Tn(this,g),Tn(this,y),Bn(this,l,String(e)),Bn(this,n,!1),Bn(this,a,!0),Bn(this,i,{}),Bn(this,r,""),Bn(this,o,3e5),Bn(this,g,{slotInterval:250,maxAttempts:12}),Bn(this,y,null)}get url(){return Pn(this,l)}set url(e){Bn(this,l,String(e))}get body(){return null==Pn(this,c)?null:new Uint8Array(Pn(this,c))}set body(e){if(null==e)Bn(this,c,void 0),Bn(this,h,void 0);else if("string"==typeof e)Bn(this,c,Gw(e)),Bn(this,h,"text/plain");else if(e instanceof Uint8Array)Bn(this,c,e),Bn(this,h,"application/octet-stream");else{if("object"!=typeof e)throw new Error("invalid body");Bn(this,c,Gw(JSON.stringify(e))),Bn(this,h,"application/json")}}hasBody(){return null!=Pn(this,c)}get method(){return Pn(this,r)?Pn(this,r):this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),Bn(this,r,String(e).toUpperCase())}get headers(){const e=Object.assign({},Pn(this,i));return Pn(this,u)&&(e.authorization=`Basic ${function(e){const t=dw(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}(Gw(Pn(this,u)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&Pn(this,h)&&(e["content-type"]=Pn(this,h)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){Pn(this,i)[String(e).toLowerCase()]=String(t)}clearHeaders(){Bn(this,i,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const n=t[s++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return Pn(this,u)||null}setCredentials(e,t){lw(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),Bn(this,u,`${e}:${t}`)}get allowGzip(){return Pn(this,a)}set allowGzip(e){Bn(this,a,!!e)}get allowInsecureAuthentication(){return!!Pn(this,n)}set allowInsecureAuthentication(e){Bn(this,n,!!e)}get timeout(){return Pn(this,o)}set timeout(e){lw(e>=0,"timeout must be non-zero","timeout",e),Bn(this,o,e)}get preflightFunc(){return Pn(this,d)||null}set preflightFunc(e){Bn(this,d,e)}get processFunc(){return Pn(this,p)||null}set processFunc(e){Bn(this,p,e)}get retryFunc(){return Pn(this,f)||null}set retryFunc(e){Bn(this,f,e)}get getUrlFunc(){return Pn(this,y)||Vw}set getUrlFunc(e){Bn(this,y,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${Pn(this,c)?yw(Pn(this,c)):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(Pn(this,g).slotInterval=e.slotInterval),null!=e.maxAttempts&&(Pn(this,g).maxAttempts=e.maxAttempts)}send(){return ow(null==Pn(this,m),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),Bn(this,m,new Yw(this)),Cn(this,b,v).call(this,0,ax()+this.timeout,0,this,new nx(0,"",{},null,this))}cancel(){ow(null!=Pn(this,m),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Xw.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(t){const s=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();ow("GET"===this.method&&("https"!==s||"http"!==n)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const a=new e(t);return a.method="GET",a.allowGzip=this.allowGzip,a.timeout=this.timeout,Bn(a,i,Object.assign({},Pn(this,i))),Pn(this,c)&&Bn(a,c,new Uint8Array(Pn(this,c))),Bn(a,h,Pn(this,h)),a}clone(){const t=new e(this.url);return Bn(t,r,Pn(this,r)),Pn(this,c)&&Bn(t,c,Pn(this,c)),Bn(t,h,Pn(this,h)),Bn(t,i,Object.assign({},Pn(this,i))),Bn(t,u,Pn(this,u)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),Bn(t,d,Pn(this,d)),Bn(t,p,Pn(this,p)),Bn(t,f,Pn(this,f)),Bn(t,g,Object.assign({},Pn(this,g))),Bn(t,y,Pn(this,y)),t}static lockConfig(){qw=!0}static getGateway(e){return Zw[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(qw)throw new Error("gateways locked");Zw[e]=t}static registerGetUrl(e){if(qw)throw new Error("gateways locked");Vw=e}static createGetUrlFunc(e){return zw()}static createDataGateway(){return Kw}static createIpfsGatewayFunc(e){return Qw(e)}};n=new WeakMap,a=new WeakMap,i=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakSet,v=async function(e,t,s,n,a){var i,r,o;if(e>=Pn(this,g).maxAttempts)return a.makeServerError("exceeded maximum retry limit");ow(ax()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),s>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(s);let l=this.clone();const c=(l.url.split(":")[0]||"").toLowerCase();if(c in Zw){const e=await Zw[c](l.url,Jw(Pn(n,m)));if(e instanceof nx){let t=e;if(this.processFunc){Jw(Pn(n,m));try{t=await this.processFunc(l,t)}catch(d){null!=d.throttle&&"number"==typeof d.stall||t.makeServerError("error in post-processing function",d).assertOk()}}return t}l=e}this.preflightFunc&&(l=await this.preflightFunc(l));const h=await this.getUrlFunc(l,Jw(Pn(n,m)));let u=new nx(h.statusCode,h.statusMessage,h.headers,h.body,n);if(301===u.statusCode||302===u.statusCode){try{const s=u.headers.location||"";return Cn(i=l.redirect(s),b,v).call(i,e+1,t,0,n,u)}catch(d){}return u}if(429===u.statusCode&&(null==this.retryFunc||await this.retryFunc(l,u,e))){const s=u.headers["retry-after"];let a=Pn(this,g).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof s&&s.match(/^[1-9][0-9]*$/)&&(a=parseInt(s)),Cn(r=l.clone(),b,v).call(r,e+1,t,a,n,u)}if(this.processFunc){Jw(Pn(n,m));try{u=await this.processFunc(l,u)}catch(d){null!=d.throttle&&"number"==typeof d.stall||u.makeServerError("error in post-processing function",d).assertOk();let s=Pn(this,g).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(s=d.stall),Cn(o=l.clone(),b,v).call(o,e+1,t,s,n,u)}}return u};let tx=ex;const sx=class e{constructor(e,t,s,n,a){Tn(this,w),Tn(this,x),Tn(this,k),Tn(this,A),Tn(this,E),Tn(this,S),Bn(this,w,e),Bn(this,x,t),Bn(this,k,Object.keys(s).reduce(((e,t)=>(e[t.toLowerCase()]=String(s[t]),e)),{})),Bn(this,A,null==n?null:new Uint8Array(n)),Bn(this,E,a||null),Bn(this,S,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${Pn(this,A)?yw(Pn(this,A)):"null"}>`}get statusCode(){return Pn(this,w)}get statusMessage(){return Pn(this,x)}get headers(){return Object.assign({},Pn(this,k))}get body(){return null==Pn(this,A)?null:new Uint8Array(Pn(this,A))}get bodyText(){try{return null==Pn(this,A)?"":Hw(Pn(this,A))}catch(e){ow(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){ow(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const n=t[s++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,s){let n;n=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const a=new e(599,n,this.headers,this.body,Pn(this,E)||void 0);return Bn(a,S,{message:t,error:s}),a}throwThrottleError(e,t){null==t?t=-1:lw(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw sw(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=Pn(this,A)}get request(){return Pn(this,E)}ok(){return""===Pn(this,S).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=Pn(this,S);""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let n=null;try{Pn(this,A)&&(n=Hw(Pn(this,A)))}catch(IV){}ow(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};w=new WeakMap,x=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,S=new WeakMap;let nx=sx;function ax(){return(new Date).getTime()}function ix(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function rx(e,t,s){let n=0;for(let a=0;a<s;a++)n=256*n+e[t+a];return n}function ox(e,t,s,n){const a=[];for(;s<t+1+n;){const i=lx(e,s);a.push(i.result),ow((s+=i.consumed)<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:a}}function lx(e,t){ow(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const s=t=>{ow(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const n=e[t]-247;s(t+1+n);const a=rx(e,t+1,n);return s(t+1+n+a),ox(e,t,t+1+n,n+a)}if(e[t]>=192){const n=e[t]-192;return s(t+1+n),ox(e,t,t+1,n)}if(e[t]>=184){const n=e[t]-183;s(t+1+n);const a=rx(e,t+1,n);return s(t+1+n+a),{consumed:1+n+a,result:yw(e.slice(t+1+n,t+1+n+a))}}if(e[t]>=128){const n=e[t]-128;return s(t+1+n),{consumed:1+n,result:yw(e.slice(t+1,t+1+n))}}return{consumed:1,result:ix(e[t])}}function cx(e){const t=dw(e,"data"),s=lx(t,0);return lw(s.consumed===t.length,"unexpected junk after rlp payload","data",e),s.result}function hx(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function ux(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(ux(e))})),t.length<=55)return t.unshift(192+t.length),t;const s=hx(t.length);return s.unshift(247+s.length),s.concat(t)}const t=Array.prototype.slice.call(dw(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const s=hx(t.length);return s.unshift(183+s.length),s.concat(t)}const dx="0123456789abcdef";function px(e){let t="0x";for(const s of ux(e))t+=dx[s>>4],t+=dx[15&s];return t}const fx=32,mx=new Uint8Array(fx),gx=["then"],yx={},bx=new WeakMap;function vx(e){return bx.get(e)}function wx(e,t){bx.set(e,t)}function xx(e,t){const s=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw s.error=t,s}function kx(e,t,s){return e.indexOf(null)>=0?t.map(((e,t)=>e instanceof Ax?kx(vx(e),e,s):e)):e.reduce(((e,n,a)=>{let i=t.getValue(n);return n in e||(s&&i instanceof Ax&&(i=kx(vx(i),i,s)),e[n]=i),e}),{})}P=new WeakMap;let Ax=class e extends Array{constructor(...e){const t=e[0];let s=e[1],n=(e[2]||[]).slice(),a=!0;t!==yx&&(s=e,n=[],a=!1),super(s.length),Tn(this,P),s.forEach(((e,t)=>{this[t]=e}));const i=n.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(wx(this,Object.freeze(s.map(((e,t)=>{const s=n[t];return null!=s&&1===i.get(s)?s:null})))),Bn(this,P,[]),null==Pn(this,P)&&Pn(this,P),!a)return;Object.freeze(this);const r=new Proxy(this,{get:(e,t,s)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const s=Iw(t,"%index");if(s<0||s>=this.length)throw new RangeError("out of result range");const n=e[s];return n instanceof Error&&xx(`index ${s}`,n),n}if(gx.indexOf(t)>=0)return Reflect.get(e,t,s);const n=e[t];if(n instanceof Function)return function(...t){return n.apply(this===s?e:this,t)};if(!(t in e))return e.getValue.apply(this===s?e:this,[t])}return Reflect.get(e,t,s)}});return wx(r,vx(this)),r}toArray(t){const s=[];return this.forEach(((n,a)=>{n instanceof Error&&xx(`index ${a}`,n),t&&n instanceof e&&(n=n.toArray(t)),s.push(n)})),s}toObject(e){const t=vx(this);return t.reduce(((s,n,a)=>(ow(null!=n,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),kx(t,this,e))),{})}slice(t,s){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==s&&(s=this.length),s<0&&(s+=this.length)<0&&(s=0),s>this.length&&(s=this.length);const n=vx(this),a=[],i=[];for(let e=t;e<s;e++)a.push(this[e]),i.push(n[e]);return new e(yx,a,i)}filter(t,s){const n=vx(this),a=[],i=[];for(let e=0;e<this.length;e++){const r=this[e];r instanceof Error&&xx(`index ${e}`,r),t.call(s,r,e,this)&&(a.push(r),i.push(n[e]))}return new e(yx,a,i)}map(e,t){const s=[];for(let n=0;n<this.length;n++){const a=this[n];a instanceof Error&&xx(`index ${n}`,a),s.push(e.call(t,a,n,this))}return s}getValue(e){const t=vx(this).indexOf(e);if(-1===t)return;const s=this[t];return s instanceof Error&&xx(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(t,s){return new e(yx,t,s)}};function Ex(e){let t=Dw(e);return ow(t.length<=fx,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:fx,offset:t.length}),t.length!==fx&&(t=pw(bw([mx.slice(t.length%fx),t]))),t}class Sx{constructor(e,t,s,n){En(this,"name"),En(this,"type"),En(this,"localName"),En(this,"dynamic"),sw(this,{name:e,type:t,localName:s,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){lw(!1,e,this.localName,t)}}class Px{constructor(){Tn(this,C),Tn(this,T),Tn(this,B),Bn(this,T,[]),Bn(this,B,0)}get data(){return bw(Pn(this,T))}get length(){return Pn(this,B)}appendWriter(e){return Cn(this,C,M).call(this,pw(e.data))}writeBytes(e){let t=pw(e);const s=t.length%fx;return s&&(t=pw(bw([t,mx.slice(s)]))),Cn(this,C,M).call(this,t)}writeValue(e){return Cn(this,C,M).call(this,Ex(e))}writeUpdatableValue(){const e=Pn(this,T).length;return Pn(this,T).push(mx),Bn(this,B,Pn(this,B)+fx),t=>{Pn(this,T)[e]=Ex(t)}}}T=new WeakMap,B=new WeakMap,C=new WeakSet,M=function(e){return Pn(this,T).push(e),Bn(this,B,Pn(this,B)+e.length),e.length},R=new WeakMap,I=new WeakMap,_=new WeakMap,D=new WeakMap,N=new WeakMap,L=new WeakSet,F=function(e){var t;if(Pn(this,D))return Cn(t=Pn(this,D),L,F).call(t,e);Bn(this,_,Pn(this,_)+e),ow(Pn(this,N)<1||Pn(this,_)<=Pn(this,N)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${Pn(this,N)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:pw(Pn(this,R)),offset:Pn(this,I),length:e,info:{bytesRead:Pn(this,_),dataLength:this.dataLength}})},O=function(e,t,s){let n=Math.ceil(t/fx)*fx;return Pn(this,I)+n>Pn(this,R).length&&(this.allowLoose&&s&&Pn(this,I)+t<=Pn(this,R).length?n=t:ow(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:pw(Pn(this,R)),length:Pn(this,R).length,offset:Pn(this,I)+n})),Pn(this,R).slice(Pn(this,I),Pn(this,I)+n)};let Tx=class e{constructor(e,t,s){Tn(this,L),En(this,"allowLoose"),Tn(this,R),Tn(this,I),Tn(this,_),Tn(this,D),Tn(this,N),sw(this,{allowLoose:!!t}),Bn(this,R,pw(e)),Bn(this,_,0),Bn(this,D,null),Bn(this,N,null!=s?s:1024),Bn(this,I,0)}get data(){return yw(Pn(this,R))}get dataLength(){return Pn(this,R).length}get consumed(){return Pn(this,I)}get bytes(){return new Uint8Array(Pn(this,R))}subReader(t){const s=new e(Pn(this,R).slice(Pn(this,I)+t),this.allowLoose,Pn(this,N));return Bn(s,D,this),s}readBytes(e,t){let s=Cn(this,L,O).call(this,0,e,!!t);return Cn(this,L,F).call(this,e),Bn(this,I,Pn(this,I)+s.length),s.slice(0,e)}readValue(){return Rw(this.readBytes(fx))}readIndex(){return Iw(Rw(this.readBytes(fx)))}};function Bx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Cx(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Mx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rx(e,t){Cx(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const Ix="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,_x=e=>e instanceof Uint8Array,Dx=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Nx=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Lx(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!_x(e))throw new Error("expected Uint8Array, got "+typeof e);return e}let Fx=class{clone(){return this._cloneInto()}};function Ox(e){const t=t=>e().update(Lx(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}function jx(e=32){if(Ix&&"function"==typeof Ix.getRandomValues)return Ix.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let Ux=class extends Fx{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Bx(e.outputLen),Bx(e.blockLen)}(e);const s=Lx(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,a=new Uint8Array(n);a.set(s.length>n?e.create().update(s).digest():s);for(let i=0;i<a.length;i++)a[i]^=54;this.iHash.update(a),this.oHash=e.create();for(let i=0;i<a.length;i++)a[i]^=106;this.oHash.update(a),a.fill(0)}update(e){return Mx(this),this.iHash.update(e),this}digestInto(e){Mx(this),Cx(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:n,destroyed:a,blockLen:i,outputLen:r}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=r,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Gx=(e,t,s)=>new Ux(e,t).update(s).digest();Gx.create=(e,t)=>new Ux(e,t);class Hx extends Fx{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Dx(this.buffer)}update(e){Mx(this);const{view:t,buffer:s,blockLen:n}=this,a=(e=Lx(e)).length;for(let i=0;i<a;){const r=Math.min(n-this.pos,a-i);if(r!==n)s.set(e.subarray(i,i+r),this.pos),this.pos+=r,i+=r,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Dx(e);for(;n<=a-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mx(this),Rx(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:n,isLE:a}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(s,0),i=0);for(let h=i;h<n;h++)t[h]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const a=BigInt(32),i=BigInt(4294967295),r=Number(s>>a&i),o=Number(s&i),l=n?4:0,c=n?0:4;e.setUint32(t+l,r,n),e.setUint32(t+c,o,n)}(s,n-8,BigInt(8*this.length),a),this.process(s,0);const r=Dx(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)r.setUint32(4*h,c[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:a,destroyed:i,pos:r}=this;return e.length=n,e.pos=r,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(s),e}}const zx=(e,t,s)=>e&t^~e&s,Vx=(e,t,s)=>e&t^e&s^t&s,Wx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$x=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qx=new Uint32Array(64);let Kx=class extends Hx{constructor(){super(64,32,8,!1),this.A=0|$x[0],this.B=0|$x[1],this.C=0|$x[2],this.D=0|$x[3],this.E=0|$x[4],this.F=0|$x[5],this.G=0|$x[6],this.H=0|$x[7]}get(){const{A:e,B:t,C:s,D:n,E:a,F:i,G:r,H:o}=this;return[e,t,s,n,a,i,r,o]}set(e,t,s,n,a,i,r,o){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|r,this.H=0|o}process(e,t){for(let h=0;h<16;h++,t+=4)qx[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=qx[h-15],t=qx[h-2],s=Nx(e,7)^Nx(e,18)^e>>>3,n=Nx(t,17)^Nx(t,19)^t>>>10;qx[h]=n+qx[h-7]+s+qx[h-16]|0}let{A:s,B:n,C:a,D:i,E:r,F:o,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(Nx(r,6)^Nx(r,11)^Nx(r,25))+zx(r,o,l)+Wx[h]+qx[h]|0,t=(Nx(s,2)^Nx(s,13)^Nx(s,22))+Vx(s,n,a)|0;c=l,l=o,o=r,r=i+e|0,i=a,a=n,n=s,s=e+t|0}s=s+this.A|0,n=n+this.B|0,a=a+this.C|0,i=i+this.D|0,r=r+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(s,n,a,i,r,o,l,c)}roundClean(){qx.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Qx=Ox((()=>new Kx)),Zx=BigInt(2**32-1),Xx=BigInt(32);function Yx(e,t=!1){return t?{h:Number(e&Zx),l:Number(e>>Xx&Zx)}:{h:0|Number(e>>Xx&Zx),l:0|Number(e&Zx)}}function Jx(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){const{h:i,l:r}=Yx(e[a],t);[s[a],n[a]]=[i,r]}return[s,n]}const ek=(e,t,s)=>e<<s|t>>>32-s,tk=(e,t,s)=>t<<s|e>>>32-s,sk=(e,t,s)=>t<<s-32|e>>>64-s,nk=(e,t,s)=>e<<s-32|t>>>64-s,ak={fromBig:Yx,split:Jx,toBig:(e,t)=>BigInt(e>>>0)<<Xx|BigInt(t>>>0),shrSH:(e,t,s)=>e>>>s,shrSL:(e,t,s)=>e<<32-s|t>>>s,rotrSH:(e,t,s)=>e>>>s|t<<32-s,rotrSL:(e,t,s)=>e<<32-s|t>>>s,rotrBH:(e,t,s)=>e<<64-s|t>>>s-32,rotrBL:(e,t,s)=>e>>>s-32|t<<64-s,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:ek,rotlSL:tk,rotlBH:sk,rotlBL:nk,add:function(e,t,s,n){const a=(t>>>0)+(n>>>0);return{h:e+s+(a/2**32|0)|0,l:0|a}},add3L:(e,t,s)=>(e>>>0)+(t>>>0)+(s>>>0),add3H:(e,t,s,n)=>t+s+n+(e/2**32|0)|0,add4L:(e,t,s,n)=>(e>>>0)+(t>>>0)+(s>>>0)+(n>>>0),add4H:(e,t,s,n,a)=>t+s+n+a+(e/2**32|0)|0,add5H:(e,t,s,n,a,i)=>t+s+n+a+i+(e/2**32|0)|0,add5L:(e,t,s,n,a)=>(e>>>0)+(t>>>0)+(s>>>0)+(n>>>0)+(a>>>0)},[ik,rk]=(()=>ak.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),ok=new Uint32Array(80),lk=new Uint32Array(80);class ck extends Hx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:n,Ch:a,Cl:i,Dh:r,Dl:o,Eh:l,El:c,Fh:h,Fl:u,Gh:d,Gl:p,Hh:f,Hl:m}=this;return[e,t,s,n,a,i,r,o,l,c,h,u,d,p,f,m]}set(e,t,s,n,a,i,r,o,l,c,h,u,d,p,f,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|s,this.Bl=0|n,this.Ch=0|a,this.Cl=0|i,this.Dh=0|r,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|h,this.Fl=0|u,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|m}process(e,t){for(let b=0;b<16;b++,t+=4)ok[b]=e.getUint32(t),lk[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|ok[b-15],t=0|lk[b-15],s=ak.rotrSH(e,t,1)^ak.rotrSH(e,t,8)^ak.shrSH(e,t,7),n=ak.rotrSL(e,t,1)^ak.rotrSL(e,t,8)^ak.shrSL(e,t,7),a=0|ok[b-2],i=0|lk[b-2],r=ak.rotrSH(a,i,19)^ak.rotrBH(a,i,61)^ak.shrSH(a,i,6),o=ak.rotrSL(a,i,19)^ak.rotrBL(a,i,61)^ak.shrSL(a,i,6),l=ak.add4L(n,o,lk[b-7],lk[b-16]),c=ak.add4H(l,s,r,ok[b-7],ok[b-16]);ok[b]=0|c,lk[b]=0|l}let{Ah:s,Al:n,Bh:a,Bl:i,Ch:r,Cl:o,Dh:l,Dl:c,Eh:h,El:u,Fh:d,Fl:p,Gh:f,Gl:m,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const e=ak.rotrSH(h,u,14)^ak.rotrSH(h,u,18)^ak.rotrBH(h,u,41),t=ak.rotrSL(h,u,14)^ak.rotrSL(h,u,18)^ak.rotrBL(h,u,41),v=h&d^~h&f,w=u&p^~u&m,x=ak.add5L(y,t,w,rk[b],lk[b]),k=ak.add5H(x,g,e,v,ik[b],ok[b]),A=0|x,E=ak.rotrSH(s,n,28)^ak.rotrBH(s,n,34)^ak.rotrBH(s,n,39),S=ak.rotrSL(s,n,28)^ak.rotrBL(s,n,34)^ak.rotrBL(s,n,39),P=s&a^s&r^a&r,T=n&i^n&o^i&o;g=0|f,y=0|m,f=0|d,m=0|p,d=0|h,p=0|u,({h:h,l:u}=ak.add(0|l,0|c,0|k,0|A)),l=0|r,c=0|o,r=0|a,o=0|i,a=0|s,i=0|n;const B=ak.add3L(A,S,T);s=ak.add3H(B,k,E,P),n=0|B}({h:s,l:n}=ak.add(0|this.Ah,0|this.Al,0|s,0|n)),({h:a,l:i}=ak.add(0|this.Bh,0|this.Bl,0|a,0|i)),({h:r,l:o}=ak.add(0|this.Ch,0|this.Cl,0|r,0|o)),({h:l,l:c}=ak.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:h,l:u}=ak.add(0|this.Eh,0|this.El,0|h,0|u)),({h:d,l:p}=ak.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:m}=ak.add(0|this.Gh,0|this.Gl,0|f,0|m)),({h:g,l:y}=ak.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(s,n,a,i,r,o,l,c,h,u,d,p,f,m,g,y)}roundClean(){ok.fill(0),lk.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hk=Ox((()=>new ck)),uk=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();uk.crypto||uk.msCrypto;const[dk,pk,fk]=[[],[],[]],mk=BigInt(0),gk=BigInt(1),yk=BigInt(2),bk=BigInt(7),vk=BigInt(256),wk=BigInt(113);for(let _V=0,DV=gk,NV=1,LV=0;_V<24;_V++){[NV,LV]=[LV,(2*NV+3*LV)%5],dk.push(2*(5*LV+NV)),pk.push((_V+1)*(_V+2)/2%64);let e=mk;for(let t=0;t<7;t++)DV=(DV<<gk^(DV>>bk)*wk)%vk,DV&yk&&(e^=gk<<(gk<<BigInt(t))-gk);fk.push(e)}const[xk,kk]=Jx(fk,!0),Ak=(e,t,s)=>s>32?sk(e,t,s):ek(e,t,s),Ek=(e,t,s)=>s>32?nk(e,t,s):tk(e,t,s);let Sk=class e extends Fx{constructor(e,t,s,n=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bx(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,a=(n+2)%10,i=s[a],r=s[a+1],o=Ak(i,r,1)^s[t],l=Ek(i,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],a=e[3];for(let s=0;s<24;s++){const n=pk[s],i=Ak(t,a,n),r=Ek(t,a,n),o=dk[s];t=e[o],a=e[o+1],e[o]=i,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=xk[n],e[1]^=kk[n]}s.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Mx(this);const{blockLen:t,state:s}=this,n=(e=Lx(e)).length;for(let a=0;a<n;){const i=Math.min(t-this.pos,n-a);for(let t=0;t<i;t++)s[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Mx(this,!1),Cx(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,a=e.length;n<a;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Rx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:s,suffix:n,outputLen:a,rounds:i,enableXOF:r}=this;return t||(t=new e(s,n,a,r,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=a,t.enableXOF=r,t.destroyed=this.destroyed,t}};const Pk=(()=>Ox((()=>new Sk(136,1,32))))();let Tk=!1;const Bk=function(e){return Pk(e)};let Ck=Bk;function Mk(e){const t=dw(e,"data");return yw(Ck(t))}Mk._=Bk,Mk.lock=function(){Tk=!0},Mk.register=function(e){if(Tk)throw new TypeError("keccak256 is locked");Ck=e},Object.freeze(Mk);const Rk=function(e){return function(e){switch(e){case"sha256":return Qx.create();case"sha512":return hk.create()}lw(!1,"invalid hashing algorithm name","algorithm",e)}("sha256").update(e).digest()};let Ik=Rk,_k=!1;function Dk(e){const t=dw(e,"data");return yw(Ik(t))}Dk._=Rk,Dk.lock=function(){_k=!0},Dk.register=function(e){if(_k)throw new Error("sha256 is locked");Ik=e},Object.freeze(Dk),Object.freeze(Dk);const Nk=BigInt(0),Lk=BigInt(1),Fk=BigInt(2),Ok=e=>e instanceof Uint8Array,jk=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Uk(e){if(!Ok(e))throw new Error("Uint8Array expected");let t="";for(let s=0;s<e.length;s++)t+=jk[e[s]];return t}function Gk(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Hk(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function zk(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(t/2);for(let n=0;n<s.length;n++){const t=2*n,a=e.slice(t,t+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");s[n]=i}return s}function Vk(e){return Hk(Uk(e))}function Wk(e){if(!Ok(e))throw new Error("Uint8Array expected");return Hk(Uk(Uint8Array.from(e).reverse()))}function $k(e,t){return zk(e.toString(16).padStart(2*t,"0"))}function qk(e,t){return $k(e,t).reverse()}function Kk(e,t,s){let n;if("string"==typeof t)try{n=zk(t)}catch(IV){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${IV}`)}else{if(!Ok(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const a=n.length;if("number"==typeof s&&a!==s)throw new Error(`${e} expected ${s} bytes, got ${a}`);return n}function Qk(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let s=0;return e.forEach((e=>{if(!Ok(e))throw new Error("Uint8Array expected");t.set(e,s),s+=e.length})),t}const Zk=e=>(Fk<<BigInt(e-1))-Lk,Xk=e=>new Uint8Array(e),Yk=e=>Uint8Array.from(e);function Jk(e,t,s){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof s)throw new Error("hmacFn must be a function");let n=Xk(e),a=Xk(e),i=0;const r=()=>{n.fill(1),a.fill(0),i=0},o=(...e)=>s(a,n,...e),l=(e=Xk())=>{a=o(Yk([0]),e),n=o(),0!==e.length&&(a=o(Yk([1]),e),n=o())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const s=[];for(;e<t;){n=o();const t=n.slice();s.push(t),e+=n.length}return Qk(...s)};return(e,t)=>{let s;for(r(),l(e);!(s=t(c()));)l();return r(),s}}const eA={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tA(e,t,s={}){const n=(t,s,n)=>{const a=eA[s];if("function"!=typeof a)throw new Error(`Invalid validator "${s}", expected function`);const i=e[t];if(!(n&&void 0===i||a(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${s}`)};for(const[a,i]of Object.entries(t))n(a,i,!1);for(const[a,i]of Object.entries(s))n(a,i,!0);return e}const sA=Object.freeze(Object.defineProperty({__proto__:null,bitGet:function(e,t){return e>>BigInt(t)&Lk},bitLen:function(e){let t;for(t=0;e>Nk;e>>=Lk,t+=1);return t},bitMask:Zk,bitSet:(e,t,s)=>e|(s?Lk:Nk)<<BigInt(t),bytesToHex:Uk,bytesToNumberBE:Vk,bytesToNumberLE:Wk,concatBytes:Qk,createHmacDrbg:Jk,ensureBytes:Kk,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},hexToBytes:zk,hexToNumber:Hk,numberToBytesBE:$k,numberToBytesLE:qk,numberToHexUnpadded:Gk,numberToVarBytesBE:function(e){return zk(Gk(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:tA},Symbol.toStringTag,{value:"Module"})),nA=BigInt(0),aA=BigInt(1),iA=BigInt(2),rA=BigInt(3),oA=BigInt(4),lA=BigInt(5),cA=BigInt(8);function hA(e,t){const s=e%t;return s>=nA?s:t+s}function uA(e,t,s){if(s<=nA||t<nA)throw new Error("Expected power/modulo > 0");if(s===aA)return nA;let n=aA;for(;t>nA;)t&aA&&(n=n*e%s),e=e*e%s,t>>=aA;return n}function dA(e,t,s){let n=e;for(;t-- >nA;)n*=n,n%=s;return n}function pA(e,t){if(e===nA||t<=nA)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let s=hA(e,t),n=t,a=nA,i=aA;for(;s!==nA;){const e=n%s,t=a-i*(n/s);n=s,s=e,a=i,i=t}if(n!==aA)throw new Error("invert: does not exist");return hA(a,t)}BigInt(9),BigInt(16);const fA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mA(e,t){const s=void 0!==t?t:e.toString(2).length;return{nBitLength:s,nByteLength:Math.ceil(s/8)}}function gA(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function yA(e){const t=gA(e);return t+Math.ceil(t/2)}const bA=BigInt(0),vA=BigInt(1);function wA(e){return tA(e.Fp,fA.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),tA(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mA(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:xA,hexToBytes:kA}=sA,AA={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=AA;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const s=e[1],n=e.subarray(2,s+2);if(!s||n.length!==s)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xA(n),l:e.subarray(s+2)}},toSig(e){const{Err:t}=AA,s="string"==typeof e?kA(e):e;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let n=s.length;if(n<2||48!=s[0])throw new t("Invalid signature tag");if(s[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:a,l:i}=AA._parseInt(s.subarray(2)),{d:r,l:o}=AA._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:a,s:r}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,s=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(s(e.s)),a=t(s(e.r)),i=n.length/2,r=a.length/2,o=s(i),l=s(r);return`30${s(r+i+4)}02${l}${a}02${o}${n}`}},EA=BigInt(0),SA=BigInt(1);BigInt(2);const PA=BigInt(3);function TA(e){const t=function(e){const t=wA(e);return tA(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:s,n:n}=t,a=s.BYTES+1,i=2*s.BYTES+1;function r(e){return hA(e,n)}function o(e){return pA(e,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:u}=function(e){const t=function(e){const t=wA(e);tA(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:n,a:a}=t;if(s){if(!n.eql(a,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof s||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=t,n=t.toBytes||((e,t,n)=>{const a=t.toAffine();return Qk(Uint8Array.from([4]),s.toBytes(a.x),s.toBytes(a.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function i(e){const{a:n,b:a}=t,i=s.sqr(e),r=s.mul(i,e);return s.add(s.add(r,s.mul(e,n)),a)}if(!s.eql(s.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function r(e){return"bigint"==typeof e&&EA<e&&e<t.n}function o(e){if(!r(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:s,nByteLength:n,wrapPrivateKey:a,n:i}=t;if(s&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=Uk(e)),"string"!=typeof e||!s.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let r;try{r="bigint"==typeof e?e:Vk(Kk("private key",e,n))}catch(l){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return a&&(r=hA(r,i)),o(r),r}const c=new Map;function h(e){if(!(e instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==n||!s.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!s.isValid(t)||!s.isValid(n))throw new Error("invalid affine point");if(e instanceof u)throw new Error("projective point not allowed");const a=e=>s.eql(e,s.ZERO);return a(t)&&a(n)?u.ZERO:new u(t,n,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}static fromHex(e){const t=u.fromAffine(a(Kk("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return u.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!s.isValid(e)||!s.isValid(n))throw new Error("bad point: x or y not FE");const a=s.sqr(n),r=i(e);if(!s.eql(a,r))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:n,pz:a}=this,{px:i,py:r,pz:o}=e,l=s.eql(s.mul(t,o),s.mul(i,a)),c=s.eql(s.mul(n,o),s.mul(r,a));return l&&c}negate(){return new u(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,a=s.mul(n,PA),{px:i,py:r,pz:o}=this;let l=s.ZERO,c=s.ZERO,h=s.ZERO,d=s.mul(i,i),p=s.mul(r,r),f=s.mul(o,o),m=s.mul(i,r);return m=s.add(m,m),h=s.mul(i,o),h=s.add(h,h),l=s.mul(e,h),c=s.mul(a,f),c=s.add(l,c),l=s.sub(p,c),c=s.add(p,c),c=s.mul(l,c),l=s.mul(m,l),h=s.mul(a,h),f=s.mul(e,f),m=s.sub(d,f),m=s.mul(e,m),m=s.add(m,h),h=s.add(d,d),d=s.add(h,d),d=s.add(d,f),d=s.mul(d,m),c=s.add(c,d),f=s.mul(r,o),f=s.add(f,f),d=s.mul(f,m),l=s.sub(l,d),h=s.mul(f,p),h=s.add(h,h),h=s.add(h,h),new u(l,c,h)}add(e){h(e);const{px:n,py:a,pz:i}=this,{px:r,py:o,pz:l}=e;let c=s.ZERO,d=s.ZERO,p=s.ZERO;const f=t.a,m=s.mul(t.b,PA);let g=s.mul(n,r),y=s.mul(a,o),b=s.mul(i,l),v=s.add(n,a),w=s.add(r,o);v=s.mul(v,w),w=s.add(g,y),v=s.sub(v,w),w=s.add(n,i);let x=s.add(r,l);return w=s.mul(w,x),x=s.add(g,b),w=s.sub(w,x),x=s.add(a,i),c=s.add(o,l),x=s.mul(x,c),c=s.add(y,b),x=s.sub(x,c),p=s.mul(f,w),c=s.mul(m,b),p=s.add(c,p),c=s.sub(y,p),p=s.add(y,p),d=s.mul(c,p),y=s.add(g,g),y=s.add(y,g),b=s.mul(f,b),w=s.mul(m,w),y=s.add(y,b),b=s.sub(g,b),b=s.mul(f,b),w=s.add(w,b),g=s.mul(y,w),d=s.add(d,g),g=s.mul(x,w),c=s.mul(v,c),c=s.sub(c,g),g=s.mul(v,y),p=s.mul(x,p),p=s.add(p,g),new u(c,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(u.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,(e=>{const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}))}multiplyUnsafe(e){const n=u.ZERO;if(e===EA)return n;if(o(e),e===SA)return this;const{endo:a}=t;if(!a)return p.unsafeLadder(this,e);let{k1neg:i,k1:r,k2neg:l,k2:c}=a.splitScalar(e),h=n,d=n,f=this;for(;r>EA||c>EA;)r&SA&&(h=h.add(f)),c&SA&&(d=d.add(f)),f=f.double(),r>>=SA,c>>=SA;return i&&(h=h.negate()),l&&(d=d.negate()),d=new u(s.mul(d.px,a.beta),d.py,d.pz),h.add(d)}multiply(e){o(e);let n,a,i=e;const{endo:r}=t;if(r){const{k1neg:e,k1:t,k2neg:o,k2:l}=r.splitScalar(i);let{p:c,f:h}=this.wNAF(t),{p:d,f:f}=this.wNAF(l);c=p.constTimeNegate(e,c),d=p.constTimeNegate(o,d),d=new u(s.mul(d.px,r.beta),d.py,d.pz),n=c.add(d),a=h.add(f)}else{const{p:e,f:t}=this.wNAF(i);n=e,a=t}return u.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,s){const n=u.BASE,a=(e,t)=>t!==EA&&t!==SA&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,s));return i.is0()?void 0:i}toAffine(e){const{px:t,py:n,pz:a}=this,i=this.is0();null==e&&(e=i?s.ONE:s.inv(a));const r=s.mul(t,e),o=s.mul(n,e),l=s.mul(a,e);if(i)return{x:s.ZERO,y:s.ZERO};if(!s.eql(l,s.ONE))throw new Error("invZ was invalid");return{x:r,y:o}}isTorsionFree(){const{h:e,isTorsionFree:s}=t;if(e===SA)return!0;if(s)return s(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:s}=t;return e===SA?this:s?s(u,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(u,this,e)}toHex(e=!0){return Uk(this.toRawBytes(e))}}u.BASE=new u(t.Gx,t.Gy,s.ONE),u.ZERO=new u(s.ZERO,s.ONE,s.ZERO);const d=t.nBitLength,p=function(e,t){const s=(e,t)=>{const s=t.negate();return e?s:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:s,unsafeLadder(t,s){let n=e.ZERO,a=t;for(;s>bA;)s&vA&&(n=n.add(a)),a=a.double(),s>>=vA;return n},precomputeWindow(e,t){const{windows:s,windowSize:a}=n(t),i=[];let r=e,o=r;for(let n=0;n<s;n++){o=r,i.push(o);for(let e=1;e<a;e++)o=o.add(r),i.push(o);r=o.double()}return i},wNAF(t,a,i){const{windows:r,windowSize:o}=n(t);let l=e.ZERO,c=e.BASE;const h=BigInt(2**t-1),u=2**t,d=BigInt(t);for(let e=0;e<r;e++){const t=e*o;let n=Number(i&h);i>>=d,n>o&&(n-=u,i+=vA);const r=t,p=t+Math.abs(n)-1,f=e%2!=0,m=n<0;0===n?c=c.add(s(f,a[r])):l=l.add(s(m,a[p]))}return{p:l,f:c}},wNAFCached(e,t,s,n){const a=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,a),1!==a&&t.set(e,n(i))),this.wNAF(a,i,s)}}}(u,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:r}}({...t,toBytes(e,t,n){const a=t.toAffine(),i=s.toBytes(a.x),r=Qk;return n?r(Uint8Array.from([t.hasEvenY()?2:3]),i):r(Uint8Array.from([4]),i,s.toBytes(a.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==a||2!==n&&3!==n){if(t===i&&4===n)return{x:s.fromBytes(r.subarray(0,s.BYTES)),y:s.fromBytes(r.subarray(s.BYTES,2*s.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${a} compressed bytes or ${i} uncompressed bytes`)}{const e=Vk(r);if(!(EA<(o=e)&&o<s.ORDER))throw new Error("Point is not on curve");const t=h(e);let a=s.sqrt(t);return!(1&~n)!=((a&SA)===SA)&&(a=s.neg(a)),{x:e,y:a}}var o}}),d=e=>Uk($k(e,t.nByteLength));function p(e){return e>n>>SA}const f=(e,t,s)=>Vk(e.slice(t,s));class m{constructor(e,t,s){this.r=e,this.s=t,this.recovery=s,this.assertValidity()}static fromCompact(e){const s=t.nByteLength;return e=Kk("compactSignature",e,2*s),new m(f(e,0,s),f(e,s,2*s))}static fromDER(e){const{r:t,s:s}=AA.toSig(Kk("DER",e));return new m(t,s)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:a,recovery:i}=this,c=v(Kk("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const h=2===i||3===i?n+t.n:n;if(h>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&i?"03":"02",p=l.fromHex(u+d(h)),f=o(h),m=r(-c*f),g=r(a*f),y=l.BASE.multiplyAndAddUnsafe(p,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,r(-this.s),this.recovery):this}toDERRawBytes(){return zk(this.toDERHex())}toDERHex(){return AA.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zk(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=yA(t.n);return function(e,t,s=!1){const n=e.length,a=gA(t),i=yA(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const r=hA(s?Vk(e):Wk(e),t-aA)+aA;return s?qk(r,a):$k(r,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=e instanceof Uint8Array,s="string"==typeof e,n=(t||s)&&e.length;return t?n===a||n===i:s?n===2*a||n===2*i:e instanceof l}const b=t.bits2int||function(e){const s=Vk(e),n=8*e.length-t.nBitLength;return n>0?s>>BigInt(n):s},v=t.bits2int_modN||function(e){return r(b(e))},w=Zk(t.nBitLength);function x(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(EA<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return $k(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,s=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(s)},sign:function(e,n,a=k){const{seed:i,k2sig:h}=function(e,n,a=k){if(["recovered","canonical"].some((e=>e in a)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:h}=t;let{lowS:d,prehash:f,extraEntropy:g}=a;null==d&&(d=!0),e=Kk("msgHash",e),f&&(e=Kk("prehashed msgHash",i(e)));const y=v(e),w=c(n),A=[x(w),x(y)];if(null!=g){const e=!0===g?h(s.BYTES):g;A.push(Kk("extraEntropy",e))}const E=Qk(...A),S=y;return{seed:E,k2sig:function(e){const t=b(e);if(!u(t))return;const s=o(t),n=l.BASE.multiply(t).toAffine(),a=r(n.x);if(a===EA)return;const i=r(s*r(S+a*w));if(i===EA)return;let c=(n.x===a?0:2)|Number(n.y&SA),h=i;return d&&p(i)&&(h=function(e){return p(e)?r(-e):e}(i),c^=1),new m(a,h,c)}}}(e,n,a),d=t;return Jk(d.hash.outputLen,d.nByteLength,d.hmac)(i,h)},verify:function(e,s,n,a=A){var i;const c=e;if(s=Kk("msgHash",s),n=Kk("publicKey",n),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:h,prehash:u}=a;let d,p;try{if("string"==typeof c||c instanceof Uint8Array)try{d=m.fromDER(c)}catch(E){if(!(E instanceof AA.Err))throw E;d=m.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;d=new m(e,t)}}p=l.fromHex(n)}catch(S){if("PARSE"===S.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(h&&d.hasHighS())return!1;u&&(s=t.hash(s));const{r:f,s:g}=d,y=v(s),b=o(g),w=r(y*b),x=r(f*b),k=null==(i=l.BASE.multiplyAndAddUnsafe(p,w,x))?void 0:i.toAffine();return!!k&&r(k.x)===f},ProjectivePoint:l,Signature:m,utils:g}}function BA(e){return{hash:e,hmac:(t,...s)=>Gx(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let s=0;return e.forEach((e=>{if(!_x(e))throw new Error("Uint8Array expected");t.set(e,s),s+=e.length})),t}(...s)),randomBytes:jx}}BigInt(4);const CA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),MA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),RA=BigInt(1),IA=BigInt(2),_A=(e,t)=>(e+t/IA)/t,DA=function(e,t,s=!1,n={}){if(e<=nA)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:i}=mA(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const r=function(e){if(e%oA===rA){const t=(e+aA)/oA;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}if(e%cA===lA){const t=(e-lA)/cA;return function(e,s){const n=e.mul(s,iA),a=e.pow(n,t),i=e.mul(s,a),r=e.mul(e.mul(i,iA),a),o=e.mul(i,e.sub(r,e.ONE));if(!e.eql(e.sqr(o),s))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-aA)/iA;let s,n,a;for(s=e-aA,n=0;s%iA===nA;s/=iA,n++);for(a=iA;a<e&&uA(a,t,e)!==e-aA;a++);if(1===n){const t=(e+aA)/oA;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}const i=(s+aA)/iA;return function(e,r){if(e.pow(r,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,a),s),c=e.pow(r,i),h=e.pow(r,s);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const s=e.pow(l,aA<<BigInt(o-t-1));l=e.sqr(s),c=e.mul(c,s),h=e.mul(h,l),o=t}return c}}(e)}(e),o=Object.freeze({ORDER:e,BITS:a,BYTES:i,MASK:Zk(a),ZERO:nA,ONE:aA,create:t=>hA(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return nA<=t&&t<e},is0:e=>e===nA,isOdd:e=>(e&aA)===aA,neg:t=>hA(-t,e),eql:(e,t)=>e===t,sqr:t=>hA(t*t,e),add:(t,s)=>hA(t+s,e),sub:(t,s)=>hA(t-s,e),mul:(t,s)=>hA(t*s,e),pow:(e,t)=>function(e,t,s){if(s<nA)throw new Error("Expected power > 0");if(s===nA)return e.ONE;if(s===aA)return t;let n=e.ONE,a=t;for(;s>nA;)s&aA&&(n=e.mul(n,a)),a=e.sqr(a),s>>=aA;return n}(o,e,t),div:(t,s)=>hA(t*pA(s,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>pA(t,e),sqrt:n.sqrt||(e=>r(o,e)),invertBatch:e=>function(e,t){const s=new Array(t.length),n=t.reduce(((t,n,a)=>e.is0(n)?t:(s[a]=t,e.mul(t,n))),e.ONE),a=e.inv(n);return t.reduceRight(((t,n,a)=>e.is0(n)?t:(s[a]=e.mul(t,s[a]),e.mul(t,n))),a),s}(o,e),cmov:(e,t,s)=>s?t:e,toBytes:e=>s?qk(e,i):$k(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return s?Wk(e):Vk(e)}});return Object.freeze(o)}(CA,void 0,void 0,{sqrt:function(e){const t=CA,s=BigInt(3),n=BigInt(6),a=BigInt(11),i=BigInt(22),r=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,h=c*c*e%t,u=dA(h,s,t)*h%t,d=dA(u,s,t)*h%t,p=dA(d,IA,t)*c%t,f=dA(p,a,t)*p%t,m=dA(f,i,t)*f%t,g=dA(m,o,t)*m%t,y=dA(g,l,t)*g%t,b=dA(y,o,t)*m%t,v=dA(b,s,t)*h%t,w=dA(v,r,t)*f%t,x=dA(w,n,t)*c%t,k=dA(x,IA,t);if(!DA.eql(DA.sqr(k),e))throw new Error("Cannot find square root");return k}}),NA=function(e,t){const s=t=>TA({...e,...BA(t)});return Object.freeze({...s(t),create:s})}({a:BigInt(0),b:BigInt(7),Fp:DA,n:MA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=MA,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-RA*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=s,r=BigInt("0x100000000000000000000000000000000"),o=_A(i*e,t),l=_A(-n*e,t);let c=hA(e-o*s-l*a,t),h=hA(-o*n-l*i,t);const u=c>r,d=h>r;if(u&&(c=t-c),d&&(h=t-h),c>r||h>r)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:d,k2:h}}}},Qx);BigInt(0),NA.ProjectivePoint;const LA="0x0000000000000000000000000000000000000000",FA="0x0000000000000000000000000000000000000000000000000000000000000000",OA=BigInt(0),jA=BigInt(1),UA=BigInt(2),GA=BigInt(27),HA=BigInt(28),zA=BigInt(35),VA={};function WA(e){return kw(Dw(e),32)}const $A=class e{constructor(e,t,s,n){Tn(this,j),Tn(this,U),Tn(this,G),Tn(this,H),hw(e,VA,"Signature"),Bn(this,j,t),Bn(this,U,s),Bn(this,G,n),Bn(this,H,null)}get r(){return Pn(this,j)}set r(e){lw(32===vw(e),"invalid r","value",e),Bn(this,j,yw(e))}get s(){return Pn(this,U)}set s(e){lw(32===vw(e),"invalid s","value",e);const t=yw(e);lw(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),Bn(this,U,t)}get v(){return Pn(this,G)}set v(e){const t=Iw(e,"value");lw(27===t||28===t,"invalid v","v",e),Bn(this,G,t)}get networkV(){return Pn(this,H)}get legacyChainId(){const t=this.networkV;return null==t?null:e.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=dw(this.s);return this.yParity&&(e[0]|=128),yw(e)}get compactSerialized(){return bw([this.r,this.yParityAndS])}get serialized(){return bw([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new e(VA,this.r,this.s,this.v);return this.networkV&&Bn(t,H,this.networkV),t}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Bw(e,"v");return t==GA||t==HA?OA:(lw(t>=zA,"invalid EIP-155 v","v",e),(t-zA)/UA)}static getChainIdV(e,t){return Bw(e)*UA+BigInt(35+t-27)}static getNormalizedV(e){const t=Bw(e);return t===OA||t===GA?27:t===jA||t===HA?28:(lw(t>=zA,"invalid v","v",e),t&jA?27:28)}static from(t){function s(e,s){lw(e,s,"signature",t)}if(null==t)return new e(VA,FA,FA,27);if("string"==typeof t){const n=dw(t,"signature");if(64===n.length){const t=yw(n.slice(0,32)),s=n.slice(32,64),a=128&s[0]?28:27;return s[0]&=127,new e(VA,t,yw(s),a)}if(65===n.length){const t=yw(n.slice(0,32)),a=n.slice(32,64);s(!(128&a[0]),"non-canonical s");const i=e.getNormalizedV(n[64]);return new e(VA,t,yw(a),i)}s(!1,"invalid raw signature length")}if(t instanceof e)return t.clone();const n=t.r;s(null!=n,"missing r");const a=WA(n),i=function(e,t){if(null!=e)return WA(e);if(null!=t){s(fw(t,32),"invalid yParityAndS");const e=dw(t);return e[0]&=127,yw(e)}s(!1,"missing s")}(t.s,t.yParityAndS);s(!(128&dw(i)[0]),"non-canonical s");const{networkV:r,v:o}=function(t,n,a){if(null!=t){const s=Bw(t);return{networkV:s>=zA?s:void 0,v:e.getNormalizedV(s)}}if(null!=n)return s(fw(n,32),"invalid yParityAndS"),{v:128&dw(n)[0]?28:27};if(null!=a){switch(Iw(a,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}s(!1,"invalid yParity")}s(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new e(VA,a,i,o);return r&&Bn(l,H,r),s(null==t.yParity||Iw(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),s(null==t.yParityAndS||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};j=new WeakMap,U=new WeakMap,G=new WeakMap,H=new WeakMap;let qA=$A;z=new WeakMap;let KA=class e{constructor(e){Tn(this,z),lw(32===vw(e),"invalid private key","privateKey","[REDACTED]"),Bn(this,z,yw(e))}get privateKey(){return Pn(this,z)}get publicKey(){return e.computePublicKey(Pn(this,z))}get compressedPublicKey(){return e.computePublicKey(Pn(this,z),!0)}sign(e){lw(32===vw(e),"invalid digest length","digest",e);const t=NA.sign(pw(e),pw(Pn(this,z)),{lowS:!0});return qA.from({r:_w(t.r,32),s:_w(t.s,32),v:t.recovery?28:27})}computeSharedSecret(t){const s=e.computePublicKey(t);return yw(NA.getSharedSecret(pw(Pn(this,z)),dw(s),!1))}static computePublicKey(e,t){let s=dw(e,"key");if(32===s.length)return yw(NA.getPublicKey(s,!!t));if(64===s.length){const e=new Uint8Array(65);e[0]=4,e.set(s,1),s=e}return yw(NA.ProjectivePoint.fromHex(s).toRawBytes(t))}static recoverPublicKey(e,t){lw(32===vw(e),"invalid digest length","digest",e);const s=qA.from(t);let n=NA.Signature.fromCompact(pw(bw([s.r,s.s])));n=n.addRecoveryBit(s.yParity);const a=n.recoverPublicKey(pw(e));return lw(null!=a,"invalid signautre for digest","signature",t),"0x"+a.toHex(!1)}static addPoints(t,s,n){const a=NA.ProjectivePoint.fromHex(e.computePublicKey(t).substring(2)),i=NA.ProjectivePoint.fromHex(e.computePublicKey(s).substring(2));return"0x"+a.add(i).toHex(!!n)}};const QA=BigInt(0),ZA=BigInt(36);function XA(e){const t=(e=e.toLowerCase()).substring(2).split(""),s=new Uint8Array(40);for(let a=0;a<40;a++)s[a]=t[a].charCodeAt(0);const n=dw(Mk(s));for(let a=0;a<40;a+=2)n[a>>1]>>4>=8&&(t[a]=t[a].toUpperCase()),(15&n[a>>1])>=8&&(t[a+1]=t[a+1].toUpperCase());return"0x"+t.join("")}const YA={};for(let _V=0;_V<10;_V++)YA[String(_V)]=String(_V);for(let _V=0;_V<26;_V++)YA[String.fromCharCode(65+_V)]=String(10+_V);const JA=function(){const e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function eE(e){if(lw("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=XA(e);return lw(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){lw(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>YA[e])).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let s=String(98-parseInt(t,10)%97);for(;s.length<2;)s="0"+s;return s}(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=QA;for(let s=0;s<e.length;s++)t=t*ZA+JA[e[s]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return XA("0x"+t)}lw(!1,"invalid address","address",e)}function tE(e){return e&&"function"==typeof e.getAddress}async function sE(e,t){const s=await t;return null!=s&&"0x0000000000000000000000000000000000000000"!==s||(ow("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),lw(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),eE(s)}function nE(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?eE(e):(ow(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),sE(e,t.resolveName(e))):tE(e)?sE(e,e.getAddress()):e&&"function"==typeof e.then?sE(e,e):void lw(!1,"unsupported addressable value","target",e)}const aE={};function iE(e,t){let s=!1;return t<0&&(s=!0,t*=-1),new lE(aE,`${s?"":"u"}int${t}`,e,{signed:s,width:t})}function rE(e,t){return new lE(aE,`bytes${t||""}`,e,{size:t})}const oE=Symbol.for("_ethers_typed");V=new WeakMap;let lE=class e{constructor(e,t,s,n){En(this,"type"),En(this,"value"),Tn(this,V),En(this,"_typedSymbol"),null==n&&(n=null),hw(aE,e,"Typed"),sw(this,{_typedSymbol:oE,type:t,value:s}),Bn(this,V,n),this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return Pn(this,V)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===Pn(this,V)?-1:!1===Pn(this,V)?this.value.length:null}static from(t,s){return new e(aE,t,s)}static uint8(e){return iE(e,8)}static uint16(e){return iE(e,16)}static uint24(e){return iE(e,24)}static uint32(e){return iE(e,32)}static uint40(e){return iE(e,40)}static uint48(e){return iE(e,48)}static uint56(e){return iE(e,56)}static uint64(e){return iE(e,64)}static uint72(e){return iE(e,72)}static uint80(e){return iE(e,80)}static uint88(e){return iE(e,88)}static uint96(e){return iE(e,96)}static uint104(e){return iE(e,104)}static uint112(e){return iE(e,112)}static uint120(e){return iE(e,120)}static uint128(e){return iE(e,128)}static uint136(e){return iE(e,136)}static uint144(e){return iE(e,144)}static uint152(e){return iE(e,152)}static uint160(e){return iE(e,160)}static uint168(e){return iE(e,168)}static uint176(e){return iE(e,176)}static uint184(e){return iE(e,184)}static uint192(e){return iE(e,192)}static uint200(e){return iE(e,200)}static uint208(e){return iE(e,208)}static uint216(e){return iE(e,216)}static uint224(e){return iE(e,224)}static uint232(e){return iE(e,232)}static uint240(e){return iE(e,240)}static uint248(e){return iE(e,248)}static uint256(e){return iE(e,256)}static uint(e){return iE(e,256)}static int8(e){return iE(e,-8)}static int16(e){return iE(e,-16)}static int24(e){return iE(e,-24)}static int32(e){return iE(e,-32)}static int40(e){return iE(e,-40)}static int48(e){return iE(e,-48)}static int56(e){return iE(e,-56)}static int64(e){return iE(e,-64)}static int72(e){return iE(e,-72)}static int80(e){return iE(e,-80)}static int88(e){return iE(e,-88)}static int96(e){return iE(e,-96)}static int104(e){return iE(e,-104)}static int112(e){return iE(e,-112)}static int120(e){return iE(e,-120)}static int128(e){return iE(e,-128)}static int136(e){return iE(e,-136)}static int144(e){return iE(e,-144)}static int152(e){return iE(e,-152)}static int160(e){return iE(e,-160)}static int168(e){return iE(e,-168)}static int176(e){return iE(e,-176)}static int184(e){return iE(e,-184)}static int192(e){return iE(e,-192)}static int200(e){return iE(e,-200)}static int208(e){return iE(e,-208)}static int216(e){return iE(e,-216)}static int224(e){return iE(e,-224)}static int232(e){return iE(e,-232)}static int240(e){return iE(e,-240)}static int248(e){return iE(e,-248)}static int256(e){return iE(e,-256)}static int(e){return iE(e,-256)}static bytes1(e){return rE(e,1)}static bytes2(e){return rE(e,2)}static bytes3(e){return rE(e,3)}static bytes4(e){return rE(e,4)}static bytes5(e){return rE(e,5)}static bytes6(e){return rE(e,6)}static bytes7(e){return rE(e,7)}static bytes8(e){return rE(e,8)}static bytes9(e){return rE(e,9)}static bytes10(e){return rE(e,10)}static bytes11(e){return rE(e,11)}static bytes12(e){return rE(e,12)}static bytes13(e){return rE(e,13)}static bytes14(e){return rE(e,14)}static bytes15(e){return rE(e,15)}static bytes16(e){return rE(e,16)}static bytes17(e){return rE(e,17)}static bytes18(e){return rE(e,18)}static bytes19(e){return rE(e,19)}static bytes20(e){return rE(e,20)}static bytes21(e){return rE(e,21)}static bytes22(e){return rE(e,22)}static bytes23(e){return rE(e,23)}static bytes24(e){return rE(e,24)}static bytes25(e){return rE(e,25)}static bytes26(e){return rE(e,26)}static bytes27(e){return rE(e,27)}static bytes28(e){return rE(e,28)}static bytes29(e){return rE(e,29)}static bytes30(e){return rE(e,30)}static bytes31(e){return rE(e,31)}static bytes32(e){return rE(e,32)}static address(t){return new e(aE,"address",t)}static bool(t){return new e(aE,"bool",!!t)}static bytes(t){return new e(aE,"bytes",t)}static string(t){return new e(aE,"string",t)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(t){return new e(aE,"overrides",Object.assign({},t))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===oE}static dereference(t,s){if(e.isTyped(t)){if(t.type!==s)throw new Error(`invalid type: expecetd ${s}, got ${t.type}`);return t.value}return t}};class cE extends Sx{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=lE.dereference(t,"string");try{s=eE(s)}catch(n){return this._throwError(n.message,t)}return e.writeValue(s)}decode(e){return eE(_w(e.readValue(),20))}}class hE extends Sx{constructor(e){super(e.name,e.type,"_",e.dynamic),En(this,"coder"),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function uE(e,t,s){let n=[];if(Array.isArray(s))n=s;else if(s&&"object"==typeof s){let e={};n=t.map((t=>{const n=t.localName;return ow(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:s}),ow(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:s}),e[n]=!0,s[n]}))}else lw(!1,"invalid tuple value","tuple",s);lw(t.length===n.length,"types/value length mismatch","tuple",s);let a=new Px,i=new Px,r=[];t.forEach(((e,t)=>{let s=n[t];if(e.dynamic){let t=i.length;e.encode(i,s);let n=a.writeUpdatableValue();r.push((e=>{n(e+t)}))}else e.encode(a,s)})),r.forEach((e=>{e(a.length)}));let o=e.appendWriter(a);return o+=e.appendWriter(i),o}function dE(e,t){let s=[],n=[],a=e.subReader(0);return t.forEach((t=>{let i=null;if(t.dynamic){let s=e.readIndex(),n=a.subReader(s);try{i=t.decode(n)}catch(r){if(aw(r,"BUFFER_OVERRUN"))throw r;i=r,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(r){if(aw(r,"BUFFER_OVERRUN"))throw r;i=r,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(null==i)throw new Error("investigate");s.push(i),n.push(t.localName||null)})),Ax.fromItems(s,n)}class pE extends Sx{constructor(e,t,s){super("array",e.type+"["+(t>=0?t:"")+"]",s,-1===t||e.dynamic),En(this,"coder"),En(this,"length"),sw(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=lE.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let n=this.length;-1===n&&(n=s.length,e.writeValue(s.length)),cw(s.length,n,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let i=0;i<s.length;i++)a.push(this.coder);return uE(e,a,s)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),ow(t*fx<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*fx,length:e.dataLength}));let s=[];for(let n=0;n<t;n++)s.push(new hE(this.coder));return dE(e,s)}}class fE extends Sx{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=lE.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class mE extends Sx{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=pw(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class gE extends mE{constructor(e){super("bytes",e)}decode(e){return yw(super.decode(e))}}class yE extends Sx{constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),En(this,"size"),sw(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let s=pw(lE.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return yw(e.readBytes(this.size))}}const bE=new Uint8Array([]);class vE extends Sx{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(bE)}decode(e){return e.readBytes(0),null}}const wE=BigInt(0),xE=BigInt(1),kE=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class AE extends Sx{constructor(e,t,s){const n=(t?"int":"uint")+8*e;super(n,n,s,!1),En(this,"size"),En(this,"signed"),sw(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Bw(lE.dereference(t,this.type)),n=Tw(kE,256);if(this.signed){let e=Tw(n,8*this.size-1);(s>e||s<-(e+xE))&&this._throwError("value out-of-bounds",t),s=Pw(s,256)}else(s<wE||s>Tw(n,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=Tw(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){const s=Cw(e,"value"),n=BigInt(Iw(t,"width"));return ow(s>>n===Aw,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),s>>n-Ew?-((~s&(Ew<<n)-Ew)+Ew):s}(t,8*this.size)),t}}class EE extends mE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Gw(lE.dereference(t,"string")))}decode(e){return Hw(super.decode(e))}}class SE extends Sx{constructor(e,t){let s=!1;const n=[];e.forEach((e=>{e.dynamic&&(s=!0),n.push(e.type)})),super("tuple","tuple("+n.join(",")+")",t,s),En(this,"coders"),sw(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const s=t.localName;return s&&(e[s]||(e[s]=0),e[s]++),e}),{});return this.coders.forEach(((s,n)=>{let a=s.localName;a&&1===t[a]&&("length"===a&&(a="_length"),null==e[a]&&(e[a]=e[n]))})),Object.freeze(e)}encode(e,t){const s=lE.dereference(t,"tuple");return uE(e,this.coders,s)}decode(e){return dE(e,this.coders)}}function PE(e){return Mk(Gw(e))}const TE=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function BE(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function s(){return e[t++]<<8|e[t++]}let n=s(),a=1,i=[0,1];for(let w=1;w<n;w++)i.push(a+=s());let r=s(),o=t;t+=r;let l=0,c=0;function h(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}const u=2**31,d=u>>>1,p=d>>1,f=u-1;let m=0;for(let w=0;w<31;w++)m=m<<1|h();let g=[],y=0,b=u;for(;;){let e=Math.floor(((m-y+1)*a-1)/b),t=0,s=n;for(;s-t>1;){let n=t+s>>>1;e<i[n]?s=n:t=n}if(0==t)break;g.push(t);let r=y+Math.floor(b*i[t]/a),o=y+Math.floor(b*i[t+1]/a)-1;for(;!((r^o)&d);)m=m<<1&f|h(),r=r<<1&f,o=o<<1&f|1;for(;r&~o&p;)m=m&d|m<<1&f>>>1|h(),r=r<<1^d,o=(o^d)<<1|d|1;y=r,b=1+o-r}let v=n-4;return g.map((t=>{switch(t-v){case 3:return v+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return v+256+(e[o++]<<8|e[o++]);case 1:return v+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,s)=>t[e.charCodeAt(0)]=s));let s=e.length,n=new Uint8Array(6*s>>3);for(let a=0,i=0,r=0,o=0;a<s;a++)o=o<<6|t[e.charCodeAt(a)],r+=6,r>=8&&(n[i++]=o>>(r-=8));return n}(e)))}function CE(e){return 1&e?~e>>1:e>>1}function ME(e,t){let s=Array(e);for(let n=0,a=0;n<e;n++)s[n]=a+=CE(t());return s}function RE(e,t=0){let s=[];for(;;){let n=e(),a=e();if(!a)break;t+=n;for(let e=0;e<a;e++)s.push(t+e);t+=a+1}return s}function IE(e){return DE((()=>{let t=RE(e);if(t.length)return t}))}function _E(e){let t=[];for(;;){let s=e();if(0==s)break;t.push(LE(s,e))}for(;;){let s=e()-1;if(s<0)break;t.push(FE(s,e))}return t.flat()}function DE(e){let t=[];for(;;){let s=e(t.length);if(!s)break;t.push(s)}return t}function NE(e,t,s){let n=Array(e).fill().map((()=>[]));for(let a=0;a<t;a++)ME(e,s).forEach(((e,t)=>n[t].push(e)));return n}function LE(e,t){let s=1+t(),n=t(),a=DE(t);return NE(a.length,1+e,t).flatMap(((e,t)=>{let[i,...r]=e;return Array(a[t]).fill().map(((e,t)=>{let a=t*n;return[i+t*s,r.map((e=>e+a))]}))}))}function FE(e,t){return NE(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function OE(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function jE(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let s=[];for(let n=0;n<t;)s.push(String.fromCodePoint(...e.slice(n,n+=4096)));return s.join("")}function UE(e,t){let s=e.length,n=s-t.length;for(let a=0;0==n&&a<s;a++)n=e[a]-t[a];return n}const GE=44032,HE=4352,zE=4449,VE=4519;function WE(e){return e>>24&255}function $E(e){return 16777215&e}let qE,KE,QE,ZE;function XE(e){return e>=GE&&e<55204}function YE(e,t){if(e>=HE&&e<4371&&t>=zE&&t<4470)return GE+588*(e-HE)+28*(t-zE);if(XE(e)&&t>VE&&t<4547&&(e-GE)%28==0)return e+(t-VE);{let s=ZE.get(e);return s&&(s=s.get(t),s)?s:-1}}function JE(e){qE||function(){let e=BE("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");qE=new Map(IE(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),KE=new Set(RE(e)),QE=new Map,ZE=new Map;for(let[t,s]of _E(e)){if(!KE.has(t)&&2==s.length){let[e,n]=s,a=ZE.get(e);a||(a=new Map,ZE.set(e,a)),a.set(n,t)}QE.set(t,s.reverse())}}();let t=[],s=[],n=!1;function a(e){let s=qE.get(e);s&&(n=!0,e|=s),t.push(e)}for(let i of e)for(;;){if(i<128)t.push(i);else if(XE(i)){let e=i-GE,t=e%588/28|0,s=e%28;a(HE+(e/588|0)),a(zE+t),s>0&&a(VE+s)}else{let e=QE.get(i);e?s.push(...e):a(i)}if(!s.length)break;i=s.pop()}if(n&&t.length>1){let e=WE(t[0]);for(let s=1;s<t.length;s++){let n=WE(t[s]);if(0==n||e<=n){e=n;continue}let a=s-1;for(;;){let s=t[a+1];if(t[a+1]=t[a],t[a]=s,!a)break;if(e=WE(t[--a]),e<=n)break}e=WE(t[s])}}return t}function eS(e){return JE(e).map($E)}function tS(e){return function(e){let t=[],s=[],n=-1,a=0;for(let i of e){let e=WE(i),r=$E(i);if(-1==n)0==e?n=r:t.push(r);else if(a>0&&a>=e)0==e?(t.push(n,...s),s.length=0,n=r):s.push(r),a=e;else{let i=YE(n,r);i>=0?n=i:0==a&&0==e?(t.push(n),n=r):(s.push(r),a=e)}}return n>=0&&t.push(n,...s),t}(JE(e))}const sS=e=>Array.from(e);function nS(e,t){return e.P.has(t)||e.Q.has(t)}class aS extends Array{get is_emoji(){return!0}}let iS,rS,oS,lS,cS,hS,uS,dS,pS,fS,mS;function gS(){if(iS)return;let e=BE("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>RE(e),s=()=>new Set(t()),n=(e,t)=>t.forEach((t=>e.add(t)));iS=new Map(_E(e)),rS=s(),oS=t(),lS=new Set(t().map((e=>oS[e]))),oS=new Set(oS),cS=s(),s();let a=IE(e),i=e();const r=()=>{let e=new Set;return t().forEach((t=>n(e,a[t]))),n(e,t()),e};hS=DE((t=>{let s=DE(e).map((e=>e+96));if(s.length){let n=t>=i;return s[0]-=32,s=jE(s),n&&(s=`Restricted[${s}]`),{N:s,P:r(),Q:r(),M:!e(),R:n}}})),uS=s(),dS=new Map;let o=t().concat(sS(uS)).sort(((e,t)=>e-t));o.forEach(((t,s)=>{let n=e(),a=o[s]=n?o[s-n]:{V:[],M:new Map};a.V.push(t),uS.has(t)||dS.set(t,a)}));for(let{V:h,M:u}of new Set(dS.values())){let e=[];for(let s of h){let t=hS.filter((e=>nS(e,s))),a=e.find((({G:e})=>t.some((t=>e.has(t)))));a||(a={G:new Set,V:[]},e.push(a)),a.V.push(s),n(a.G,t)}let t=e.flatMap((e=>sS(e.G)));for(let{G:s,V:n}of e){let e=new Set(t.filter((e=>!s.has(e))));for(let t of n)u.set(t,e)}}pS=new Set;let l=new Set;const c=e=>pS.has(e)?l.add(e):pS.add(e);for(let h of hS){for(let e of h.P)c(e);for(let e of h.Q)c(e)}for(let h of pS)dS.has(h)||l.has(h)||dS.set(h,1);n(pS,eS(pS)),fS=function(e){let t=[],s=RE(e);return function e({S:s,B:n},a,i){if(!(4&s&&i===a[a.length-1])){2&s&&(i=a[a.length-1]),1&s&&t.push(a);for(let t of n)for(let s of t.Q)e(t,[...a,s],i)}}(function t(n){return{S:e(),B:DE((()=>{let n=RE(e).map((e=>s[e]));if(n.length)return t(n)})),Q:n}}([]),[]),t}(e).map((e=>aS.from(e))).sort(UE),mS=new Map;for(let h of fS){let e=[mS];for(let t of h){let s=e.map((e=>{let s=e.get(t);return s||(s=new Map,e.set(t,s)),s}));65039===t?e.push(...s):e=s}for(let t of e)t.V=h}}function yS(e){return(wS(e)?"":`${bS(vS([e]))} `)+OE(e)}function bS(e){return`"${e}"‎`}function vS(e,t=1/0,s=OE){let n=[];var a;a=e[0],gS(),oS.has(a)&&n.push("◌"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,r=e.length;for(let o=0;o<r;o++){let t=e[o];wS(t)&&(n.push(jE(e.slice(i,o))),n.push(s(t)),i=o+1)}return n.push(jE(e.slice(i,r))),n.join("")}function wS(e){return gS(),cS.has(e)}function xS(e){return new Error(`disallowed character: ${yS(e)}`)}function kS(e,t){let s=yS(t),n=hS.find((e=>e.P.has(t)));return n&&(s=`${n.N} ${s}`),new Error(`illegal mixture: ${e.N} + ${s}`)}function AS(e){return new Error(`illegal placement: ${e}`)}function ES(e){return e.filter((e=>65039!=e))}function SS(e,t){let s,n=mS,a=e.length;for(;a&&(n=n.get(e[--a]),n);){let{V:t}=n;t&&(s=t,e.length=a)}return s}const PS=new Uint8Array(32);function TS(e){return lw(0!==e.length,"invalid ENS name; empty component","comp",e),e}function BS(e){const t=Gw(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return t=function(e,t,s){if(!e)return[];gS();let n=0;return e.split(".").map((e=>{let a=function(e){let t=[];for(let s=0,n=e.length;s<n;){let n=e.codePointAt(s);s+=n<65536?1:2,t.push(n)}return t}(e),i={input:a,offset:n};n+=a.length+1;try{let e,n=i.tokens=function(e,t,s){let n=[],a=[];for(e=e.slice().reverse();e.length;){let i=SS(e);if(i)a.length&&(n.push(t(a)),a=[]),n.push(s(i));else{let t=e.pop();if(pS.has(t))a.push(t);else{let e=iS.get(t);if(e)a.push(...e);else if(!rS.has(t))throw xS(t)}}}return a.length&&n.push(t(a)),n}(a,t,s),r=n.length;if(!r)throw new Error("empty label");let o=i.output=n.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(o),!(i.emoji=r>1||n[0].is_emoji)&&o.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${jE(e.slice(0,4))}"`)}(o),e="ASCII";else{let t=n.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(oS.has(o[0]))throw AS("leading combining mark");for(let e=1;e<r;e++){let t=n[e];if(!t.is_emoji&&oS.has(t[0]))throw AS(`emoji + combining mark: "${jE(n[e-1])} + ${vS([t[0]])}"`)}!function(e){let t=e[0],s=TE.get(t);if(s)throw AS(`leading ${s}`);let n=e.length,a=-1;for(let i=1;i<n;i++){t=e[i];let n=TE.get(t);if(n){if(a==i)throw AS(`${s} + ${n}`);a=i+1,s=n}}if(a==n)throw AS(`trailing ${s}`)}(o);let s=sS(new Set(t)),[a]=function(e){let t=hS;for(let s of e){let e=t.filter((e=>nS(e,s)));if(!e.length)throw hS.some((e=>nS(e,s)))?kS(t[0],s):xS(s);if(t=e,1==e.length)break}return t}(s);!function(e,t){for(let s of t)if(!nS(e,s))throw kS(e,s);if(e.M){let e=eS(t);for(let t=1,s=e.length;t<s;t++)if(lS.has(e[t])){let n=t+1;for(let a;n<s&&lS.has(a=e[n]);n++)for(let s=t;s<n;s++)if(e[s]==a)throw new Error(`duplicate non-spacing marks: ${yS(a)}`);if(n-t>4)throw new Error(`excessive non-spacing marks: ${bS(vS(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}}(a,t),function(e,t){let s,n=[];for(let a of t){let e=dS.get(a);if(1===e)return;if(e){let t=e.M.get(a);if(s=s?s.filter((e=>t.has(e))):sS(t),!s.length)return}else n.push(a)}if(s)for(let a of s)if(n.every((e=>nS(a,e))))throw new Error(`whole-script confusable: ${e.N}/${a.N}`)}(a,s),e=a.N}else e="Emoji"}i.type=e}catch(r){i.error=r}return i}))}(e,tS,ES),t.map((({input:e,error:s,output:n})=>{if(s){let n=s.message;throw new Error(1==t.length?n:`Invalid label ${bS(vS(e,63))}: ${n}`)}return jE(n)})).join(".");var t}(e)}catch(t){lw(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),s=[];if(0===e.length)return s;let n=0;for(let a=0;a<t.length;a++)46===t[a]&&(s.push(TS(t.slice(n,a))),n=a+1);return lw(n<t.length,"invalid ENS name; empty component","name",e),s.push(TS(t.slice(n))),s}function CS(e){lw("string"==typeof e,"invalid ENS name; not a string","name",e),lw(e.length,"invalid ENS name (empty label)","name",e);let t=PS;const s=BS(e);for(;s.length;)t=Mk(bw([t,Mk(s.pop())]));return yw(t)}function MS(e,t){const s=t;return lw(s<=255,"DNS encoded label cannot exceed 255","length",s),yw(bw(BS(e).map((t=>{lw(t.length<=s,`label ${JSON.stringify(e)} exceeds ${s} bytes`,"name",e);const n=new Uint8Array(t.length+1);return n.set(t,1),n[0]=n.length-1,n}))))+"00"}function RS(e,t){return{address:eE(e),storageKeys:t.map(((e,t)=>(lw(fw(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function IS(e){if(Array.isArray(e))return e.map(((t,s)=>Array.isArray(t)?(lw(2===t.length,"invalid slot set",`value[${s}]`,t),RS(t[0],t[1])):(lw(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),RS(t.address,t.storageKeys))));lw(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const s=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return RS(t,Object.keys(s).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}PS.fill(0);const _S=BigInt(0),DS=BigInt(2),NS=BigInt(27),LS=BigInt(28),FS=BigInt(35),OS=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jS=131072;function US(e,t){let s=e.toString(16);for(;s.length<2;)s="0"+s;return s+=Dk(t).substring(4),"0x"+s}function GS(e){return"0x"===e?null:eE(e)}function HS(e,t){try{return IS(e)}catch(s){lw(!1,s.message,t,e)}}function zS(e,t){return"0x"===e?0:Iw(e,t)}function VS(e,t){if("0x"===e)return _S;const s=Bw(e,t);return lw(s<=OS,"value exceeds uint size",t,s),s}function WS(e,t){const s=Bw(e,"value"),n=Dw(s);return lw(n.length<=32,"value too large",`tx.${t}`,s),n}function $S(e){return IS(e).map((e=>[e.address,e.storageKeys]))}function qS(e,t){lw(Array.isArray(e),`invalid ${t}`,"value",e);for(let s=0;s<e.length;s++)lw(fw(e[s],32),"invalid ${ param } hash",`value[${s}]`,e[s]);return e}function KS(e,t){let s;try{if(s=zS(t[0],"yParity"),0!==s&&1!==s)throw new Error("bad yParity")}catch(r){lw(!1,"invalid yParity","yParity",t[0])}const n=kw(t[1],32),a=kw(t[2],32),i=qA.from({r:n,s:a,yParity:s});e.signature=i}W=new WeakMap,$=new WeakMap,q=new WeakMap,K=new WeakMap,Q=new WeakMap,Z=new WeakMap,X=new WeakMap,Y=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,ae=new WeakMap,ie=new WeakMap,re=new WeakMap,oe=new WeakSet,le=function(e,t){ow(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const s=[WS(e.nonce,"nonce"),WS(e.gasPrice||0,"gasPrice"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data];let n=_S;if(e.chainId!=_S)n=Bw(e.chainId,"tx.chainId"),lw(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==_S&&(s.push(Dw(n)),s.push("0x"),s.push("0x")),px(s);let a=BigInt(27+t.yParity);return n!==_S?a=qA.getChainIdV(n,t.v):BigInt(t.v)!==a&&lw(!1,"tx.chainId/sig.v mismatch","sig",t),s.push(Dw(a)),s.push(Dw(t.r)),s.push(Dw(t.s)),px(s)}(this,s);case 1:return function(e,t){const s=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.gasPrice||0,"gasPrice"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data,$S(e.accessList||[])];return t&&(s.push(WS(t.yParity,"recoveryParam")),s.push(Dw(t.r)),s.push(Dw(t.s))),bw(["0x01",px(s)])}(this,s);case 2:return function(e,t){const s=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),WS(e.maxFeePerGas||0,"maxFeePerGas"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data,$S(e.accessList||[])];return t&&(s.push(WS(t.yParity,"yParity")),s.push(Dw(t.r)),s.push(Dw(t.s))),bw(["0x02",px(s)])}(this,s);case 3:return function(e,t,s){const n=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),WS(e.maxFeePerGas||0,"maxFeePerGas"),WS(e.gasLimit,"gasLimit"),e.to||LA,WS(e.value,"value"),e.data,$S(e.accessList||[]),WS(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),qS(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(WS(t.yParity,"yParity")),n.push(Dw(t.r)),n.push(Dw(t.s)),s)?bw(["0x03",px([n,s.map((e=>e.data)),s.map((e=>e.commitment)),s.map((e=>e.proof))])]):bw(["0x03",px(n)])}(this,s,t?this.blobs:null)}ow(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let QS=class e{constructor(){Tn(this,oe),Tn(this,W),Tn(this,$),Tn(this,q),Tn(this,K),Tn(this,Q),Tn(this,Z),Tn(this,X),Tn(this,Y),Tn(this,J),Tn(this,ee),Tn(this,te),Tn(this,se),Tn(this,ne),Tn(this,ae),Tn(this,ie),Tn(this,re),Bn(this,W,null),Bn(this,$,null),Bn(this,K,0),Bn(this,Q,_S),Bn(this,Z,null),Bn(this,X,null),Bn(this,Y,null),Bn(this,q,"0x"),Bn(this,J,_S),Bn(this,ee,_S),Bn(this,te,null),Bn(this,se,null),Bn(this,ne,null),Bn(this,ae,null),Bn(this,re,null),Bn(this,ie,null)}get type(){return Pn(this,W)}set type(e){switch(e){case null:Bn(this,W,null);break;case 0:case"legacy":Bn(this,W,0);break;case 1:case"berlin":case"eip-2930":Bn(this,W,1);break;case 2:case"london":case"eip-1559":Bn(this,W,2);break;case 3:case"cancun":case"eip-4844":Bn(this,W,3);break;default:lw(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=Pn(this,$);return null==e&&3===this.type?LA:e}set to(e){Bn(this,$,null==e?null:eE(e))}get nonce(){return Pn(this,K)}set nonce(e){Bn(this,K,Iw(e,"value"))}get gasLimit(){return Pn(this,Q)}set gasLimit(e){Bn(this,Q,Bw(e))}get gasPrice(){const e=Pn(this,Z);return null!=e||0!==this.type&&1!==this.type?e:_S}set gasPrice(e){Bn(this,Z,null==e?null:Bw(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Pn(this,X);return null==e?2===this.type||3===this.type?_S:null:e}set maxPriorityFeePerGas(e){Bn(this,X,null==e?null:Bw(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Pn(this,Y);return null==e?2===this.type||3===this.type?_S:null:e}set maxFeePerGas(e){Bn(this,Y,null==e?null:Bw(e,"maxFeePerGas"))}get data(){return Pn(this,q)}set data(e){Bn(this,q,yw(e))}get value(){return Pn(this,J)}set value(e){Bn(this,J,Bw(e,"value"))}get chainId(){return Pn(this,ee)}set chainId(e){Bn(this,ee,Bw(e))}get signature(){return Pn(this,te)||null}set signature(e){Bn(this,te,null==e?null:qA.from(e))}get accessList(){const e=Pn(this,se)||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){Bn(this,se,null==e?null:IS(e))}get maxFeePerBlobGas(){const e=Pn(this,ne);return null==e&&3===this.type?_S:e}set maxFeePerBlobGas(e){Bn(this,ne,null==e?null:Bw(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Pn(this,ae);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){lw(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)lw(fw(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}Bn(this,ae,e)}get blobs(){return null==Pn(this,re)?null:Pn(this,re).map((e=>Object.assign({},e)))}set blobs(e){if(null==e)return void Bn(this,re,null);const t=[],s=[];for(let n=0;n<e.length;n++){const a=e[n];if(mw(a)){ow(Pn(this,ie),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=dw(a);if(lw(e.length<=jS,"blob is too large",`blobs[${n}]`,a),e.length!==jS){const t=new Uint8Array(jS);t.set(e),e=t}const i=Pn(this,ie).blobToKzgCommitment(e),r=yw(Pn(this,ie).computeBlobKzgProof(e,i));t.push({data:yw(e),commitment:yw(i),proof:r}),s.push(US(1,i))}else{const e=yw(a.commitment);t.push({data:yw(a.data),commitment:e,proof:yw(a.proof)}),s.push(US(1,e))}}Bn(this,re,t),Bn(this,ae,s)}get kzg(){return Pn(this,ie)}set kzg(e){Bn(this,ie,e)}get hash(){return null==this.signature?null:Mk(Cn(this,oe,le).call(this,!0,!1))}get unsignedHash(){return Mk(this.unsignedSerialized)}get from(){return null==this.signature?null:(e=this.unsignedHash,t=this.signature,function(e){let t;return t="string"==typeof e?KA.computePublicKey(e,!1):e.publicKey,eE(Mk("0x"+t.substring(4)).substring(26))}(KA.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return null==this.signature?null:KA.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return Cn(this,oe,le).call(this,!0,!0)}get unsignedSerialized(){return Cn(this,oe,le).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,s=null!=this.accessList,n=null!=Pn(this,ne)||Pn(this,ae);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&ow(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ow(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ow(0!==this.type||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const a=[];return null!=this.type?a.push(this.type):t?a.push(2):e?(a.push(1),s||a.push(0)):s?(a.push(1),a.push(2)):(n&&this.to||(a.push(0),a.push(1),a.push(2)),a.push(3)),a.sort(),a}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return e.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new e;if("string"==typeof t){const s=dw(t);if(s[0]>=127)return e.from(function(e){const t=cx(e);lw(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const s={type:0,nonce:zS(t[0],"nonce"),gasPrice:VS(t[1],"gasPrice"),gasLimit:VS(t[2],"gasLimit"),to:GS(t[3]),value:VS(t[4],"value"),data:yw(t[5]),chainId:_S};if(6===t.length)return s;const n=VS(t[6],"v"),a=VS(t[7],"r"),i=VS(t[8],"s");if(a===_S&&i===_S)s.chainId=n;else{let e=(n-FS)/DS;e<_S&&(e=_S),s.chainId=e,lw(e!==_S||n===NS||n===LS,"non-canonical legacy v","v",t[6]),s.signature=qA.from({r:kw(t[7],32),s:kw(t[8],32),v:n})}return s}(s));switch(s[0]){case 1:return e.from(function(e){const t=cx(dw(e).slice(1));lw(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",yw(e));const s={type:1,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),gasPrice:VS(t[2],"gasPrice"),gasLimit:VS(t[3],"gasLimit"),to:GS(t[4]),value:VS(t[5],"value"),data:yw(t[6]),accessList:HS(t[7],"accessList")};return 8===t.length||KS(s,t.slice(8)),s}(s));case 2:return e.from(function(e){const t=cx(dw(e).slice(1));lw(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",yw(e));const s={type:2,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),maxPriorityFeePerGas:VS(t[2],"maxPriorityFeePerGas"),maxFeePerGas:VS(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:VS(t[4],"gasLimit"),to:GS(t[5]),value:VS(t[6],"value"),data:yw(t[7]),accessList:HS(t[8],"accessList")};return 9===t.length||KS(s,t.slice(9)),s}(s));case 3:return e.from(function(e){let t=cx(dw(e).slice(1)),s="3",n=null;if(4===t.length&&Array.isArray(t[0])){s="3 (network format)";const e=t[1],a=t[2],i=t[3];lw(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),lw(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),lw(Array.isArray(i),"invalid network format: proofs not an array","fields[3]",i),lw(e.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),lw(e.length===i.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let s=0;s<t[1].length;s++)n.push({data:e[s],commitment:a[s],proof:i[s]});t=t[0]}lw(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${s}`,"data",yw(e));const a={type:3,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),maxPriorityFeePerGas:VS(t[2],"maxPriorityFeePerGas"),maxFeePerGas:VS(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:VS(t[4],"gasLimit"),to:GS(t[5]),value:VS(t[6],"value"),data:yw(t[7]),accessList:HS(t[8],"accessList"),maxFeePerBlobGas:VS(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(a.blobs=n),lw(null!=a.to,`invalid address for transaction type: ${s}`,"data",e),lw(Array.isArray(a.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let i=0;i<a.blobVersionedHashes.length;i++)lw(fw(a.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",e);return 11===t.length||KS(a,t.slice(11)),a}(s))}ow(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new e;return null!=t.type&&(s.type=t.type),null!=t.to&&(s.to=t.to),null!=t.nonce&&(s.nonce=t.nonce),null!=t.gasLimit&&(s.gasLimit=t.gasLimit),null!=t.gasPrice&&(s.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(s.maxFeePerGas=t.maxFeePerGas),null!=t.maxFeePerBlobGas&&(s.maxFeePerBlobGas=t.maxFeePerBlobGas),null!=t.data&&(s.data=t.data),null!=t.value&&(s.value=t.value),null!=t.chainId&&(s.chainId=t.chainId),null!=t.signature&&(s.signature=qA.from(t.signature)),null!=t.accessList&&(s.accessList=t.accessList),null!=t.blobVersionedHashes&&(s.blobVersionedHashes=t.blobVersionedHashes),null!=t.kzg&&(s.kzg=t.kzg),null!=t.blobs&&(s.blobs=t.blobs),null!=t.hash&&(lw(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),lw(s.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(lw(s.isSigned(),"unsigned transaction cannot define '.from'","tx",t),lw(s.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),s}};const ZS=new Uint8Array(32);ZS.fill(0);const XS=BigInt(-1),YS=BigInt(0),JS=BigInt(1),eP=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tP=_w(JS,32),sP=_w(YS,32),nP={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},aP=["name","version","chainId","verifyingContract","salt"];function iP(e){return function(t){return lw("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const rP={name:iP("name"),version:iP("version"),chainId:function(e){const t=Bw(e,"domain.chainId");return lw(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Nw(t)},verifyingContract:function(e){try{return eE(e).toLowerCase()}catch(t){}lw(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=dw(e,"domain.salt");return lw(32===t.length,'invalid domain value "salt"',"domain.salt",e),yw(t)}};function oP(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const s=""===t[1],n=parseInt(t[2]);lw(n%8==0&&0!==n&&n<=256&&t[2]===String(n),"invalid numeric width","type",e);const a=Tw(eP,s?n-1:n),i=s?(a+JS)*XS:YS;return function(t){const n=Bw(t,"value");return lw(n>=i&&n<=a,`value out-of-bounds for ${e}`,"value",n),_w(s?Pw(n,256):n,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const s=parseInt(t[1]);return lw(0!==s&&s<=32&&t[1]===String(s),"invalid bytes width","type",e),function(t){return lw(dw(t).length===s,`invalid length for ${e}`,"value",t),function(e){const t=dw(e),s=t.length%32;return s?bw([t,ZS.slice(s)]):yw(t)}(t)}}}switch(e){case"address":return function(e){return kw(eE(e),32)};case"bool":return function(e){return e?tP:sP};case"bytes":return function(e){return Mk(e)};case"string":return function(e){return PE(e)}}return null}function lP(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function cP(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}ce=new WeakMap,he=new WeakMap,ue=new WeakMap,de=new WeakSet,pe=function(e){{const t=oP(e);if(t)return t}const t=cP(e).array;if(t){const e=t.prefix,s=this.getEncoder(e);return n=>{lw(-1===t.count||t.count===n.length,`array length mismatch; expected length ${t.count}`,"value",n);let a=n.map(s);return Pn(this,he).has(e)&&(a=a.map(Mk)),Mk(bw(a))}}const s=this.types[e];if(s){const t=PE(Pn(this,he).get(e));return e=>{const n=s.map((({name:t,type:s})=>{const n=this.getEncoder(s)(e[t]);return Pn(this,he).has(s)?Mk(n):n}));return n.unshift(t),bw(n)}}lw(!1,`unknown type: ${e}`,"type",e)};let hP=class e{constructor(e){Tn(this,de),En(this,"primaryType"),Tn(this,ce),Tn(this,he),Tn(this,ue),Bn(this,he,new Map),Bn(this,ue,new Map);const t=new Map,s=new Map,n=new Map,a={};Object.keys(e).forEach((i=>{a[i]=e[i].map((({name:t,type:s})=>{let{base:n,index:a}=cP(s);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(a||"")}})),t.set(i,new Set),s.set(i,[]),n.set(i,new Set)})),Bn(this,ce,JSON.stringify(a));for(const r in a){const n=new Set;for(const i of a[r]){lw(!n.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(r)}`,"types",e),n.add(i.name);const a=cP(i.type).base;lw(a!==r,`circular type reference to ${JSON.stringify(a)}`,"types",e),oP(a)||(lw(s.has(a),`unknown type ${JSON.stringify(a)}`,"types",e),s.get(a).push(r),t.get(r).add(a))}}const i=Array.from(s.keys()).filter((e=>0===s.get(e).length));lw(0!==i.length,"missing primary type","types",e),lw(1===i.length,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),sw(this,{primaryType:i[0]}),function a(i,r){lw(!r.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e),r.add(i);for(const e of t.get(i))if(s.has(e)){a(e,r);for(const t of r)n.get(t).add(e)}r.delete(i)}(this.primaryType,new Set);for(const[r,o]of n){const e=Array.from(o);e.sort(),Pn(this,he).set(r,lP(r,a[r])+e.map((e=>lP(e,a[e]))).join(""))}}get types(){return JSON.parse(Pn(this,ce))}getEncoder(e){let t=Pn(this,ue).get(e);return t||(t=Cn(this,de,pe).call(this,e),Pn(this,ue).set(e,t)),t}encodeType(e){const t=Pn(this,he).get(e);return lw(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Mk(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(oP(e))return s(e,t);const n=cP(e).array;if(n)return lw(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map((e=>this._visit(n.prefix,e,s)));const a=this.types[e];if(a)return a.reduce(((e,{name:n,type:a})=>(e[n]=this._visit(a,t[n],s),e)),{});lw(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(t){return new e(t)}static getPrimaryType(t){return e.from(t).primaryType}static hashStruct(t,s,n){return e.from(s).hashStruct(t,n)}static hashDomain(t){const s=[];for(const e in t){if(null==t[e])continue;const n=nP[e];lw(n,`invalid typed-data domain key: ${JSON.stringify(e)}`,"domain",t),s.push({name:e,type:n})}return s.sort(((e,t)=>aP.indexOf(e.name)-aP.indexOf(t.name))),e.hashStruct("EIP712Domain",{EIP712Domain:s},t)}static encode(t,s,n){return bw(["0x1901",e.hashDomain(t),e.from(s).hash(n)])}static hash(t,s,n){return Mk(e.encode(t,s,n))}static async resolveNames(t,s,n,a){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const i={};t.verifyingContract&&!fw(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const r=e.from(s);r.visit(n,((e,t)=>("address"!==e||fw(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=await a(e);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),{domain:t,value:n=r.visit(n,((e,t)=>"address"===e&&i[t]?i[t]:t))}}static getPayload(t,s,n){e.hashDomain(t);const a={},i=[];aP.forEach((e=>{const s=t[e];null!=s&&(a[e]=rP[e](s),i.push({name:e,type:nP[e]}))}));const r=e.from(s);s=r.types;const o=Object.assign({},s);return lw(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",s),o.EIP712Domain=i,r.encode(n),{types:o,domain:a,primaryType:r.primaryType,message:r.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return yw(dw(t));if(e.match(/^u?int/))return Bw(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return lw("string"==typeof t,"invalid string","value",t),t}lw(!1,"unsupported type","type",e)}))}}};function uP(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const dP=uP("external public payable override".split(" ")),pP="constant external internal payable private public pure view override",fP=uP(pP.split(" ")),mP="constructor error event fallback function receive struct",gP=uP(mP.split(" ")),yP="calldata memory storage payable indexed",bP=uP(yP.split(" ")),vP=uP([mP,yP,"tuple returns",pP].join(" ").split(" ")),wP={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},xP=new RegExp("^(\\s*)"),kP=new RegExp("^([0-9]+)"),AP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),EP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),SP=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),PP=class e{constructor(e){Tn(this,ge),Tn(this,fe),Tn(this,me),Bn(this,fe,0),Bn(this,me,e.slice())}get offset(){return Pn(this,fe)}get length(){return Pn(this,me).length-Pn(this,fe)}clone(){return new e(Pn(this,me))}reset(){Bn(this,fe,0)}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=Cn(this,ge,ye).call(this,Pn(this,fe)+1,e.match+1);return Bn(this,fe,e.match+1),t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;Pn(this,fe)<e.match-1;){const e=this.peek().linkNext;t.push(Cn(this,ge,ye).call(this,Pn(this,fe)+1,e)),Bn(this,fe,e)}return Bn(this,fe,e.match+1),t}peek(){if(Pn(this,fe)>=Pn(this,me).length)throw new Error("out-of-bounds");return Pn(this,me)[Pn(this,fe)]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Mn(this,fe)._++,e}toString(){const e=[];for(let t=Pn(this,fe);t<Pn(this,me).length;t++){const s=Pn(this,me)[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}};fe=new WeakMap,me=new WeakMap,ge=new WeakSet,ye=function(e=0,t=0){return new PP(Pn(this,me).slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))};let TP=PP;function BP(e){const t=[],s=t=>{const s=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error(`invalid token ${s} at ${i}: ${t}`)};let n=[],a=[],i=0;for(;i<e.length;){let r=e.substring(i),o=r.match(xP);o&&(i+=o[1].length,r=e.substring(i));const l={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(l);let c=wP[r[0]]||"";if(c){if(l.type=c,l.text=r[0],i++,"OPEN_PAREN"===c)n.push(t.length-1),a.push(t.length-1);else if("CLOSE_PAREN"==c)0===n.length&&s("no matching open bracket"),l.match=n.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=a.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=a.pop(),t[l.linkBack].linkNext=t.length-1,a.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const s=t.pop().text;e=s+e,t[t.length-1].value=Iw(s)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=r.match(AP),o){if(l.text=o[1],i+=l.text.length,vP.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(SP)){l.type="TYPE";continue}l.type="ID"}else{if(o=r.match(kP),!o)throw new Error(`unexpected token ${JSON.stringify(r[0])} at position ${i}`);l.text=o[1],l.type="NUMBER",i+=l.text.length}}return new TP(t.map((e=>Object.freeze(e))))}function CP(e,t){let s=[];for(const n in t.keys())e.has(n)&&s.push(n);if(s.length>1)throw new Error(`conflicting types: ${s.join(", ")}`)}function MP(e,t){if(t.peekKeyword(gP)){const s=t.pop().text;if(s!==e)throw new Error(`expected ${e}, got ${s}`)}return t.popType("ID")}function RP(e,t){const s=new Set;for(;;){const n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),s.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);s.add(n)}return Object.freeze(s)}function IP(e){let t=RP(e,fP);return CP(t,uP("constant payable nonpayable".split(" "))),CP(t,uP("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function _P(e,t){return e.popParams().map((e=>qP.from(e,t)))}function DP(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Bw(e.pop().text);throw new Error("invalid gas")}return null}function NP(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const LP=new RegExp(/^(.*)\[([0-9]*)\]$/);function FP(e){const t=e.match(SP);if(lw(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const s=parseInt(t[2]);lw(0!==s&&s<=32,"invalid bytes length","type",e)}else if(t[3]){const s=parseInt(t[3]);lw(0!==s&&s<=256&&s%8==0,"invalid numeric width","type",e)}return e}const OP={},jP=Symbol.for("_ethers_internal"),UP="_ParamTypeInternal",GP="_ErrorInternal",HP="_EventInternal",zP="_ConstructorInternal",VP="_FallbackInternal",WP="_FunctionInternal",$P="_StructInternal";be=new WeakSet,ve=function(e,t,s,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,i=t.slice();return i.forEach(((t,n)=>{var r;Cn(r=a,be,ve).call(r,e,t,s,(e=>{i[n]=e}))})),void n(i)}if(this.isTuple()){const a=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");i=a.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((t,n)=>{var r;Cn(r=a[n],be,ve).call(r,e,t,s,(e=>{i[n]=e}))})),void n(i)}const a=s(this.type,t);a.then?e.push(async function(){n(await a)}()):n(a)};let qP=class e{constructor(e,t,s,n,a,i,r,o){if(Tn(this,be),En(this,"name"),En(this,"type"),En(this,"baseType"),En(this,"indexed"),En(this,"components"),En(this,"arrayLength"),En(this,"arrayChildren"),hw(e,OP,"ParamType"),Object.defineProperty(this,jP,{value:UP}),i&&(i=Object.freeze(i.slice())),"array"===n){if(null==r||null==o)throw new Error("")}else if(null!=r||null!=o)throw new Error("");if("tuple"===n){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");sw(this,{name:t,type:s,baseType:n,indexed:a,components:i,arrayLength:r,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const s={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map((e=>s.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map(((e,n)=>s.components[n].walk(e,t)))}return t(this.type,e)}async walkAsync(e,t){const s=[],n=[e];return Cn(this,be,ve).call(this,s,e,t,(e=>{n[0]=e})),s.length&&await Promise.all(s),n[0]}static from(t,s){if(e.isParamType(t))return t;if("string"==typeof t)try{return e.from(BP(t),s)}catch(o){lw(!1,"invalid param type","obj",t)}else if(t instanceof TP){let n="",a="",i=null;RP(t,uP(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(a="tuple",i=t.popParams().map((t=>e.from(t))),n=`tuple(${i.map((e=>e.format())).join(",")})`):(n=FP(t.popType("TYPE")),a=n);let r=null,o=null;for(;t.length&&t.peekType("BRACKET");){const s=t.pop();r=new e(OP,"",n,a,null,i,o,r),o=s.value,n+=s.text,a="array",i=null}let l=null;if(RP(t,bP).has("indexed")){if(!s)throw new Error("");l=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new e(OP,c,n,a,l,i,o,r)}const n=t.name;lw(!n||"string"==typeof n&&n.match(EP),"invalid name","obj.name",n);let a=t.indexed;null!=a&&(lw(s,"parameter cannot be indexed","obj.indexed",t.indexed),a=!!a);let i=t.type,r=i.match(LP);if(r){const s=parseInt(r[2]||"-1"),o=e.from({type:r[1],components:t.components});return new e(OP,n||"",i,"array",a,null,s,o)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){const s=null!=t.components?t.components.map((t=>e.from(t))):null;return new e(OP,n||"",i,"tuple",a,s,null,null)}return i=FP(t.type),new e(OP,n||"",i,i,a,null,null,null)}static isParamType(e){return e&&e[jP]===UP}};class KP{constructor(e,t,s){En(this,"type"),En(this,"inputs"),hw(e,OP,"Fragment"),sw(this,{type:t,inputs:s=Object.freeze(s.slice())})}static from(e){if("string"==typeof e){try{KP.from(JSON.parse(e))}catch(IV){}return KP.from(BP(e))}if(e instanceof TP)switch(e.peekKeyword(gP)){case"constructor":return JP.from(e);case"error":return XP.from(e);case"event":return YP.from(e);case"fallback":case"receive":return eT.from(e);case"function":return tT.from(e);case"struct":return sT.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return JP.from(e);case"error":return XP.from(e);case"event":return YP.from(e);case"fallback":case"receive":return eT.from(e);case"function":return tT.from(e);case"struct":return sT.from(e)}ow(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}lw(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return JP.isFragment(e)}static isError(e){return XP.isFragment(e)}static isEvent(e){return YP.isFragment(e)}static isFunction(e){return tT.isFragment(e)}static isStruct(e){return sT.isFragment(e)}}class QP extends KP{constructor(e,t,s,n){super(e,t,n),En(this,"name"),lw("string"==typeof s&&s.match(EP),"invalid identifier","name",s),n=Object.freeze(n.slice()),sw(this,{name:s})}}function ZP(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class XP extends QP{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,jP,{value:GP})}get selector(){return PE(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+ZP(e,this.inputs)),t.join(" ")}static from(e){if(XP.isFragment(e))return e;if("string"==typeof e)return XP.from(BP(e));if(e instanceof TP){const t=MP("error",e),s=_P(e);return NP(e),new XP(OP,t,s)}return new XP(OP,e.name,e.inputs?e.inputs.map(qP.from):[])}static isFragment(e){return e&&e[jP]===GP}}class YP extends QP{constructor(e,t,s,n){super(e,"event",t,s),En(this,"anonymous"),Object.defineProperty(this,jP,{value:HP}),sw(this,{anonymous:n})}get topicHash(){return PE(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+ZP(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map((e=>qP.from(e))),new YP(OP,e,t,!1).topicHash}static from(e){if(YP.isFragment(e))return e;if("string"==typeof e)try{return YP.from(BP(e))}catch(t){lw(!1,"invalid event fragment","obj",e)}else if(e instanceof TP){const t=MP("event",e),s=_P(e,!0),n=!!RP(e,uP(["anonymous"])).has("anonymous");return NP(e),new YP(OP,t,s,n)}return new YP(OP,e.name,e.inputs?e.inputs.map((e=>qP.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[jP]===HP}}class JP extends KP{constructor(e,t,s,n,a){super(e,t,s),En(this,"payable"),En(this,"gas"),Object.defineProperty(this,jP,{value:zP}),sw(this,{payable:n,gas:a})}format(e){if(ow(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${ZP(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(JP.isFragment(e))return e;if("string"==typeof e)try{return JP.from(BP(e))}catch(t){lw(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof TP){RP(e,uP(["constructor"]));const t=_P(e),s=!!RP(e,dP).has("payable"),n=DP(e);return NP(e),new JP(OP,"constructor",t,s,n)}return new JP(OP,"constructor",e.inputs?e.inputs.map(qP.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[jP]===zP}}class eT extends KP{constructor(e,t,s){super(e,"fallback",t),En(this,"payable"),Object.defineProperty(this,jP,{value:VP}),sw(this,{payable:s})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(eT.isFragment(e))return e;if("string"==typeof e)try{return eT.from(BP(e))}catch(t){lw(!1,"invalid fallback fragment","obj",e)}else if(e instanceof TP){const t=e.toString();if(lw(e.peekKeyword(uP(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(uP(["fallback","receive"]))){const t=_P(e);return lw(0===t.length,"receive cannot have arguments","obj.inputs",t),RP(e,uP(["payable"])),NP(e),new eT(OP,[],!0)}let s=_P(e);s.length?lw(1===s.length&&"bytes"===s[0].type,"invalid fallback inputs","obj.inputs",s.map((e=>e.format("minimal"))).join(", ")):s=[qP.from("bytes")];const n=IP(e);if(lw("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),RP(e,uP(["returns"])).has("returns")){const t=_P(e);lw(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return NP(e),new eT(OP,s,"payable"===n)}if("receive"===e.type)return new eT(OP,[],!0);if("fallback"===e.type){const t=[qP.from("bytes")],s="payable"===e.stateMutability;return new eT(OP,t,s)}lw(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[jP]===VP}}class tT extends QP{constructor(e,t,s,n,a,i){super(e,"function",t,n),En(this,"constant"),En(this,"outputs"),En(this,"stateMutability"),En(this,"payable"),En(this,"gas"),Object.defineProperty(this,jP,{value:WP}),sw(this,{constant:"view"===s||"pure"===s,gas:i,outputs:a=Object.freeze(a.slice()),payable:"payable"===s,stateMutability:s})}get selector(){return PE(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+ZP(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(ZP(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map((e=>qP.from(e))),new tT(OP,e,"view",t,[],null).selector}static from(e){if(tT.isFragment(e))return e;if("string"==typeof e)try{return tT.from(BP(e))}catch(s){lw(!1,"invalid function fragment","obj",e)}else if(e instanceof TP){const t=MP("function",e),s=_P(e),n=IP(e);let a=[];RP(e,uP(["returns"])).has("returns")&&(a=_P(e));const i=DP(e);return NP(e),new tT(OP,t,n,s,a,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new tT(OP,e.name,t,e.inputs?e.inputs.map(qP.from):[],e.outputs?e.outputs.map(qP.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[jP]===WP}}class sT extends QP{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,jP,{value:$P})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return sT.from(BP(e))}catch(t){lw(!1,"invalid struct fragment","obj",e)}else if(e instanceof TP){const t=MP("struct",e),s=_P(e);return NP(e),new sT(OP,t,s)}return new sT(OP,e.name,e.inputs?e.inputs.map(qP.from):[])}static isFragment(e){return e&&e[jP]===$P}}const nT=new Map;nT.set(0,"GENERIC_PANIC"),nT.set(1,"ASSERT_FALSE"),nT.set(17,"OVERFLOW"),nT.set(18,"DIVIDE_BY_ZERO"),nT.set(33,"ENUM_RANGE_ERROR"),nT.set(34,"BAD_STORAGE_DATA"),nT.set(49,"STACK_UNDERFLOW"),nT.set(50,"ARRAY_RANGE_ERROR"),nT.set(65,"OUT_OF_MEMORY"),nT.set(81,"UNINITIALIZED_FUNCTION_CALL");const aT=new RegExp(/^bytes([0-9]*)$/),iT=new RegExp(/^(u?int)([0-9]*)$/);let rT=null,oT=1024;we=new WeakSet,xe=function(e){if(e.isArray())return new pE(Cn(this,we,xe).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new SE(e.components.map((e=>Cn(this,we,xe).call(this,e))),e.name);switch(e.baseType){case"address":return new cE(e.name);case"bool":return new fE(e.name);case"string":return new EE(e.name);case"bytes":return new gE(e.name);case"":return new vE(e.name)}let t=e.type.match(iT);if(t){let s=parseInt(t[2]||"256");return lw(0!==s&&s<=256&&s%8==0,"invalid "+t[1]+" bit length","param",e),new AE(s/8,"int"===t[1],e.name)}if(t=e.type.match(aT),t){let s=parseInt(t[1]);return lw(0!==s&&s<=32,"invalid bytes length","param",e),new yE(s,e.name)}lw(!1,"invalid type","type",e.type)};let lT=class e{constructor(){Tn(this,we)}getDefaultValue(e){const t=e.map((e=>Cn(this,we,xe).call(this,qP.from(e))));return new SE(t,"_").defaultValue()}encode(e,t){cw(t.length,e.length,"types/values length mismatch");const s=e.map((e=>Cn(this,we,xe).call(this,qP.from(e)))),n=new SE(s,"_"),a=new Px;return n.encode(a,t),a.data}decode(e,t,s){const n=e.map((e=>Cn(this,we,xe).call(this,qP.from(e))));return new SE(n,"_").decode(new Tx(t,s,oT))}static _setDefaultMaxInflation(e){lw("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),oT=e}static defaultAbiCoder(){return null==rT&&(rT=new e),rT}static getBuiltinCallException(t,s,n){return function(e,t,s,n){let a="missing revert data",i=null,r=null;if(s){a="execution reverted";const e=dw(s);if(s=yw(s),0===e.length)a+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!=4)a+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===yw(e.slice(0,4)))try{i=n.decode(["string"],e.slice(4))[0],r={signature:"Error(string)",name:"Error",args:[i]},a+=`: ${JSON.stringify(i)}`}catch(l){a+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===yw(e.slice(0,4)))try{const t=Number(n.decode(["uint256"],e.slice(4))[0]);r={signature:"Panic(uint256)",name:"Panic",args:[t]},i=`Panic due to ${nT.get(t)||"UNKNOWN"}(${t})`,a+=`: ${i}`}catch(l){a+=" (could not decode panic code)"}else a+=" (unknown custom error)"}const o={to:t.to?eE(t.to):null,data:t.data||"0x"};return t.from&&(o.from=eE(t.from)),rw(a,"CALL_EXCEPTION",{action:e,data:s,reason:i,transaction:o,invocation:null,revert:r})}(t,s,n,e.defaultAbiCoder())}};class cT{constructor(e,t,s){En(this,"fragment"),En(this,"name"),En(this,"signature"),En(this,"topic"),En(this,"args");const n=e.name,a=e.format();sw(this,{fragment:e,name:n,signature:a,topic:t,args:s})}}class hT{constructor(e,t,s,n){En(this,"fragment"),En(this,"name"),En(this,"args"),En(this,"signature"),En(this,"selector"),En(this,"value");const a=e.name,i=e.format();sw(this,{fragment:e,name:a,args:s,signature:i,selector:t,value:n})}}class uT{constructor(e,t,s){En(this,"fragment"),En(this,"name"),En(this,"args"),En(this,"signature"),En(this,"selector");const n=e.name,a=e.format();sw(this,{fragment:e,name:n,args:s,signature:a,selector:t})}}class dT{constructor(e){En(this,"hash"),En(this,"_isIndexed"),sw(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!(!e||!e._isIndexed)}}const pT={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},fT={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&pT[e.toString()]&&(t=pT[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};ke=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Pe=new WeakSet,Te=function(e,t,s){if(fw(e)){const t=e.toLowerCase();for(const e of Pn(this,Ee).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const n=[];for(const[t,s]of Pn(this,Ee))t.split("(")[0]===e&&n.push(s);if(t){const e=t.length>0?t[t.length-1]:null;let s=t.length,a=!0;lE.isTyped(e)&&"overrides"===e.type&&(a=!1,s--);for(let t=n.length-1;t>=0;t--){const e=n[t].inputs.length;e===s||a&&e===s-1||n.splice(t,1)}for(let i=n.length-1;i>=0;i--){const e=n[i].inputs;for(let s=0;s<t.length;s++)if(lE.isTyped(t[s])){if(s>=e.length){if("overrides"===t[s].type)continue;n.splice(i,1);break}if(t[s].type!==e[s].baseType){n.splice(i,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}return 0===n.length?null:(n.length>1&&s&&lw(!1,`ambiguous function description (i.e. matches ${n.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),n[0])}return Pn(this,Ee).get(tT.from(e).format())||null},Be=function(e,t,s){if(fw(e)){const t=e.toLowerCase();for(const e of Pn(this,Ae).values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const n=[];for(const[t,s]of Pn(this,Ae))t.split("(")[0]===e&&n.push(s);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){const s=n[e].inputs;for(let a=0;a<t.length;a++)if(lE.isTyped(t[a])&&t[a].type!==s[a].baseType){n.splice(e,1);break}}}return 0===n.length?null:(n.length>1&&s&&lw(!1,`ambiguous event description (i.e. matches ${n.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),n[0])}return Pn(this,Ae).get(YP.from(e).format())||null};let mT=class e{constructor(e){Tn(this,Pe),En(this,"fragments"),En(this,"deploy"),En(this,"fallback"),En(this,"receive"),Tn(this,ke),Tn(this,Ae),Tn(this,Ee),Tn(this,Se);let t=[];t="string"==typeof e?JSON.parse(e):e,Bn(this,Ee,new Map),Bn(this,ke,new Map),Bn(this,Ae,new Map);const s=[];for(const r of t)try{s.push(KP.from(r))}catch(i){console.log(`[Warning] Invalid Fragment ${JSON.stringify(r)}:`,i.message)}sw(this,{fragments:Object.freeze(s)});let n=null,a=!1;Bn(this,Se,this.getAbiCoder()),this.fragments.forEach(((e,t)=>{let s;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void sw(this,{deploy:e});case"fallback":return void(0===e.inputs.length?a=!0:(lw(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),n=e,a=n.payable));case"function":s=Pn(this,Ee);break;case"event":s=Pn(this,Ae);break;case"error":s=Pn(this,ke);break;default:return}const i=e.format();s.has(i)||s.set(i,e)})),this.deploy||sw(this,{deploy:JP.from("constructor()")}),sw(this,{fallback:n,receive:a})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return lT.defaultAbiCoder()}getFunctionName(e){const t=Cn(this,Pe,Te).call(this,e,null,!1);return lw(t,"no matching function","key",e),t.name}hasFunction(e){return!!Cn(this,Pe,Te).call(this,e,null,!1)}getFunction(e,t){return Cn(this,Pe,Te).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(Pn(this,Ee).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,Ee).get(n),s)}}getEventName(e){const t=Cn(this,Pe,Be).call(this,e,null,!1);return lw(t,"no matching event","key",e),t.name}hasEvent(e){return!!Cn(this,Pe,Be).call(this,e,null,!1)}getEvent(e,t){return Cn(this,Pe,Be).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(Pn(this,Ae).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,Ae).get(n),s)}}getError(e,t){if(fw(e)){const t=e.toLowerCase();if(fT[t])return XP.from(fT[t].signature);for(const e of Pn(this,ke).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[s,n]of Pn(this,ke))s.split("(")[0]===e&&t.push(n);return 0===t.length?"Error"===e?XP.from("error Error(string)"):"Panic"===e?XP.from("error Panic(uint256)"):null:(t.length>1&&lw(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e),t[0])}if("Error(string)"===(e=XP.from(e).format()))return XP.from("error Error(string)");if("Panic(uint256)"===e)return XP.from("error Panic(uint256)");return Pn(this,ke).get(e)||null}forEachError(e){const t=Array.from(Pn(this,ke).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,ke).get(n),s)}}_decodeParams(e,t){return Pn(this,Se).decode(e,t)}_encodeParams(e,t){return Pn(this,Se).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);lw(t,"unknown error","fragment",e),e=t}return lw(ww(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,ww(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);lw(t,"unknown error","fragment",e),e=t}return bw([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return lw(ww(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,ww(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return bw([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}let s="invalid length for result data";const n=pw(t);if(n.length%32==0)try{return Pn(this,Se).decode(e.outputs,n)}catch(a){s="could not decode result data"}ow(!1,s,"BAD_DATA",{value:yw(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=dw(e,"data"),n=lT.getBuiltinCallException("call",t,s);if(n.message.startsWith("execution reverted (unknown custom error)")){const e=yw(s.slice(0,4)),t=this.getError(e);if(t)try{const e=Pn(this,Se).decode(t.inputs,s.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(IV){n.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(t);return a&&(n.invocation={method:a.name,signature:a.signature,args:a.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return yw(Pn(this,Se).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}ow(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const n=(e,t)=>"string"===e.type?PE(t):"bytes"===e.type?Mk(yw(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=_w(t):e.type.match(/^bytes/)?t=xw(t,32,!1):"address"===e.type&&Pn(this,Se).encode(["address"],[t]),kw(yw(t),32));for(t.forEach(((t,a)=>{const i=e.inputs[a];i.indexed?null==t?s.push(null):"array"===i.baseType||"tuple"===i.baseType?lw(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?s.push(t.map((e=>n(i,e)))):s.push(n(i,t)):lw(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)}));s.length&&null===s[s.length-1];)s.pop();return s}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}const s=[],n=[],a=[];return e.anonymous||s.push(e.topicHash),lw(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,i)=>{const r=t[i];if(e.indexed)if("string"===e.type)s.push(PE(r));else if("bytes"===e.type)s.push(Mk(r));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");s.push(Pn(this,Se).encode([e.type],[r]))}else n.push(e),a.push(r)})),{data:Pn(this,Se).encode(n,a),topics:s}}decodeEventLog(e,t,s){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}if(null!=s&&!e.anonymous){const t=e.topicHash;lw(fw(s[0],32)&&s[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const n=[],a=[],i=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(qP.from({type:"bytes32",name:e.name})),i.push(!0)):(n.push(e),i.push(!1)):(a.push(e),i.push(!1))}));const r=null!=s?Pn(this,Se).decode(n,bw(s)):null,o=Pn(this,Se).decode(a,t,!0),l=[],c=[];let h=0,u=0;return e.inputs.forEach(((e,t)=>{let s=null;if(e.indexed)if(null==r)s=new dT(null);else if(i[t])s=new dT(r[u++]);else try{s=r[u++]}catch(n){s=n}else try{s=o[h++]}catch(n){s=n}l.push(s),c.push(e.name||null)})),Ax.fromItems(l,c)}parseTransaction(e){const t=dw(e.data,"tx.data"),s=Bw(null!=e.value?e.value:0,"tx.value"),n=this.getFunction(yw(t.slice(0,4)));if(!n)return null;const a=Pn(this,Se).decode(n.inputs,t.slice(4));return new hT(n,n.selector,a,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new cT(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=yw(e),s=this.getError(ww(t,0,4));if(!s)return null;const n=Pn(this,Se).decode(s.inputs,ww(t,4));return new uT(s,s.selector,n)}static from(t){return t instanceof e?t:"string"==typeof t?new e(JSON.parse(t)):"function"==typeof t.formatJson?new e(t.formatJson()):"function"==typeof t.format?new e(t.format("json")):new e(t)}};const gT=BigInt(0);function yT(e){return null==e?null:e}function bT(e){return null==e?null:e.toString()}class vT{constructor(e,t,s){En(this,"gasPrice"),En(this,"maxFeePerGas"),En(this,"maxPriorityFeePerGas"),sw(this,{gasPrice:yT(e),maxFeePerGas:yT(t),maxPriorityFeePerGas:yT(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:bT(e),maxFeePerGas:bT(t),maxPriorityFeePerGas:bT(s)}}}function wT(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=yw(e.data));const s="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const a of s)a in e&&null!=e[a]&&(t[a]=Bw(e[a],`request.${a}`));const n="type,nonce".split(/,/);for(const a of n)a in e&&null!=e[a]&&(t[a]=Iw(e[a],`request.${a}`));return e.accessList&&(t.accessList=IS(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map((e=>mw(e)?yw(e):Object.assign({},e)))),t}class xT{constructor(e,t){En(this,"provider"),En(this,"number"),En(this,"hash"),En(this,"timestamp"),En(this,"parentHash"),En(this,"parentBeaconBlockRoot"),En(this,"nonce"),En(this,"difficulty"),En(this,"gasLimit"),En(this,"gasUsed"),En(this,"stateRoot"),En(this,"receiptsRoot"),En(this,"blobGasUsed"),En(this,"excessBlobGas"),En(this,"miner"),En(this,"prevRandao"),En(this,"extraData"),En(this,"baseFeePerGas"),Tn(this,Ce),Bn(this,Ce,e.transactions.map((e=>"string"!=typeof e?new ET(e,t):e))),sw(this,{provider:t,hash:yT(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:yT(e.prevRandao),extraData:e.extraData,baseFeePerGas:yT(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return Pn(this,Ce).map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=Pn(this,Ce).slice();return 0===e.length?[]:(ow("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:n,gasUsed:a,hash:i,miner:r,prevRandao:o,nonce:l,number:c,parentHash:h,parentBeaconBlockRoot:u,stateRoot:d,receiptsRoot:p,timestamp:f,transactions:m}=this;return{_type:"Block",baseFeePerGas:bT(e),difficulty:bT(t),extraData:s,gasLimit:bT(n),gasUsed:bT(a),blobGasUsed:bT(this.blobGasUsed),excessBlobGas:bT(this.excessBlobGas),hash:i,miner:r,prevRandao:o,nonce:l,number:c,parentHash:h,timestamp:f,parentBeaconBlockRoot:u,stateRoot:d,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Pn(this,Ce).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=Pn(this,Ce)[e];else{const s=e.toLowerCase();for(const e of Pn(this,Ce)){if("string"==typeof e){if(e!==s)continue;t=e;break}if(e.hash===s){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;lw(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}Ce=new WeakMap;class kT{constructor(e,t){En(this,"provider"),En(this,"transactionHash"),En(this,"blockHash"),En(this,"blockNumber"),En(this,"removed"),En(this,"address"),En(this,"data"),En(this,"topics"),En(this,"index"),En(this,"transactionIndex"),this.provider=t;const s=Object.freeze(e.topics.slice());sw(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:n,index:a,removed:i,topics:r,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:n,index:a,removed:i,topics:r,transactionHash:o,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ow(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ow(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ow(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class AT{constructor(e,t){En(this,"provider"),En(this,"to"),En(this,"from"),En(this,"contractAddress"),En(this,"hash"),En(this,"index"),En(this,"blockHash"),En(this,"blockNumber"),En(this,"logsBloom"),En(this,"gasUsed"),En(this,"blobGasUsed"),En(this,"cumulativeGasUsed"),En(this,"gasPrice"),En(this,"blobGasPrice"),En(this,"type"),En(this,"status"),En(this,"root"),Tn(this,Me),Bn(this,Me,Object.freeze(e.logs.map((e=>new kT(e,t)))));let s=gT;null!=e.effectiveGasPrice?s=e.effectiveGasPrice:null!=e.gasPrice&&(s=e.gasPrice),sw(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return Pn(this,Me)}toJSON(){const{to:e,from:t,contractAddress:s,hash:n,index:a,blockHash:i,blockNumber:r,logsBloom:o,logs:l,status:c,root:h}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:r,contractAddress:s,cumulativeGasUsed:bT(this.cumulativeGasUsed),from:t,gasPrice:bT(this.gasPrice),blobGasUsed:bT(this.blobGasUsed),blobGasPrice:bT(this.blobGasPrice),gasUsed:bT(this.gasUsed),hash:n,index:a,logs:l,logsBloom:o,root:h,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return PT(this)}reorderedEvent(e){return ow(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ST(this,e)}}Me=new WeakMap,Re=new WeakMap;let ET=class e{constructor(e,t){En(this,"provider"),En(this,"blockNumber"),En(this,"blockHash"),En(this,"index"),En(this,"hash"),En(this,"type"),En(this,"to"),En(this,"from"),En(this,"nonce"),En(this,"gasLimit"),En(this,"gasPrice"),En(this,"maxPriorityFeePerGas"),En(this,"maxFeePerGas"),En(this,"maxFeePerBlobGas"),En(this,"data"),En(this,"value"),En(this,"chainId"),En(this,"signature"),En(this,"accessList"),En(this,"blobVersionedHashes"),Tn(this,Re),this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,Bn(this,Re,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:n,type:a,to:i,from:r,nonce:o,data:l,signature:c,accessList:h,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:t,blobVersionedHashes:u,chainId:bT(this.chainId),data:l,from:r,gasLimit:bT(this.gasLimit),gasPrice:bT(this.gasPrice),hash:n,maxFeePerGas:bT(this.maxFeePerGas),maxPriorityFeePerGas:bT(this.maxPriorityFeePerGas),maxFeePerBlobGas:bT(this.maxFeePerBlobGas),nonce:o,signature:c,to:i,index:s,type:a,value:bT(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await tw({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=null==e?1:e,n=null==t?0:t;let a=Pn(this,Re),i=-1,r=-1===a;const o=async()=>{if(r)return null;const{blockNumber:e,nonce:t}=await tw({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(a=e);if(r)return null;const n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===i&&(i=a-3,i<Pn(this,Re)&&(i=Pn(this,Re)));i<=e;){if(r)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let n=0;n<t.length;n++){const i=await t.getTransaction(n);if(i.from===this.from&&i.nonce===this.nonce){if(r)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<s)return;let n="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?n="repriced":"0x"===i.data&&i.from===i.to&&i.value===gT&&(n="cancelled"),ow(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:i.replaceableTransaction(a),hash:i.hash,receipt:t})}}i++}},l=e=>{if(null==e||0!==e.status)return e;ow(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===s)return l(c);if(c){if(await c.confirmations()>=s)return l(c)}else if(await o(),0===s)return null;const h=new Promise(((e,t)=>{const i=[],c=()=>{i.forEach((e=>e()))};if(i.push((()=>{r=!0})),n>0){const e=setTimeout((()=>{c(),t(rw("wait for transaction timeout","TIMEOUT"))}),n);i.push((()=>{clearTimeout(e)}))}const h=async n=>{if(await n.confirmations()>=s){c();try{e(l(n))}catch(a){t(a)}}};if(i.push((()=>{this.provider.off(this.hash,h)})),this.provider.on(this.hash,h),a>=0){const e=async()=>{try{await o()}catch(s){if(aw(s,"TRANSACTION_REPLACED"))return c(),void t(s)}r||this.provider.once("block",e)};i.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await h}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return ow(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),PT(this)}reorderedEvent(e){return ow(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ow(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ST(this,e)}replaceableTransaction(t){lw(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const s=new e(this,this.provider);return Bn(s,Re,t),s}};function ST(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function PT(e){return{orphan:"drop-transaction",tx:e}}class TT extends kT{constructor(e,t,s){super(e,e.provider),En(this,"interface"),En(this,"fragment"),En(this,"args"),sw(this,{args:t.decodeEventLog(s,e.data,e.topics),fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class BT extends kT{constructor(e,t){super(e,e.provider),En(this,"error"),sw(this,{error:t})}}class CT extends AT{constructor(e,t,s){super(s,t),Tn(this,Ie),Bn(this,Ie,e)}get logs(){return super.logs.map((e=>{const t=e.topics.length?Pn(this,Ie).getEvent(e.topics[0]):null;if(t)try{return new TT(e,Pn(this,Ie),t)}catch(s){return new BT(e,s)}return e}))}}Ie=new WeakMap;class MT extends ET{constructor(e,t,s){super(s,t),Tn(this,_e),Bn(this,_e,e)}async wait(e,t){const s=await super.wait(e,t);return null==s?null:new CT(Pn(this,_e),this.provider,s)}}_e=new WeakMap;class RT extends Ow{constructor(e,t,s,n){super(e,t,s),En(this,"log"),sw(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class IT extends RT{constructor(e,t,s,n,a){super(e,t,s,new TT(a,e.interface,n)),sw(this,{args:e.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const _T=BigInt(0);function DT(e){return e&&"function"==typeof e.call}function NT(e){return e&&"function"==typeof e.estimateGas}function LT(e){return e&&"function"==typeof e.resolveName}function FT(e){return e&&"function"==typeof e.sendTransaction}function OT(e){if(null!=e){if(LT(e))return e;if(e.provider)return e.provider}}class jT{constructor(e,t,s){if(Tn(this,De),En(this,"fragment"),sw(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const n=UT(e.runner,"resolveName"),a=LT(n)?n:null;Bn(this,De,async function(){const n=await Promise.all(t.inputs.map(((e,t)=>null==s[t]?null:e.walkAsync(s[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>nE(e,a)))):nE(t,a):t)))));return e.interface.encodeFilterTopics(t,n)}())}getTopicFilter(){return Pn(this,De)}}function UT(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function GT(e){return null==e?null:e.provider||null}async function HT(e,t){const s=lE.dereference(e,"overrides");lw("object"==typeof s,"invalid overrides parameter","overrides",e);const n=wT(s);return lw(null==n.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),lw(null==n.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}function zT(e){const t=async function(t){const s=await HT(t,["data"]);s.to=await e.getAddress(),s.from&&(s.from=await nE(s.from,OT(e.runner)));const n=e.interface,a=Bw(s.value||_T,"overrides.value")===_T,i="0x"===(s.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||i||a||lw(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),lw(n.fallback||i,"cannot send data to receive-only contract","overrides.data",s.data),lw(n.receive||n.fallback&&n.fallback.payable||a,"cannot send value to non-payable fallback","overrides.value",s.value),lw(n.fallback||i,"cannot send data to receive-only contract","overrides.data",s.data),s},s=async function(s){const n=e.runner;ow(FT(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const a=await n.sendTransaction(await t(s)),i=GT(e.runner);return new MT(e.interface,i,a)},n=async e=>await s(e);return sw(n,{_contract:e,estimateGas:async function(s){const n=UT(e.runner,"estimateGas");return ow(NT(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(s))},populateTransaction:t,send:s,staticCall:async function(s){const n=UT(e.runner,"call");ow(DT(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const a=await t(s);try{return await n.call(a)}catch(i){if(iw(i)&&i.data)throw e.interface.makeError(i.data,a);throw i}}}),n}De=new WeakMap;const VT=Symbol.for("_ethersInternal_contract"),WT=new WeakMap;function $T(e){return WT.get(e[VT])}async function qT(e,t){let s,n=null;if(Array.isArray(t)){const n=function(t){if(fw(t,32))return t;const s=e.interface.getEvent(t);return lw(s,"unknown fragment","name",t),s.topicHash};s=t.map((e=>null==e?null:Array.isArray(e)?e.map(n):n(e)))}else"*"===t?s=[null]:"string"==typeof t?fw(t,32)?s=[t]:(n=e.interface.getEvent(t),lw(n,"unknown fragment","event",t),s=[n.topicHash]):(a=t)&&"object"==typeof a&&"getTopicFilter"in a&&"function"==typeof a.getTopicFilter&&a.fragment?s=await t.getTopicFilter():"fragment"in t?(n=t.fragment,s=[n.topicHash]):lw(!1,"unknown event name","event",t);var a;return s=s.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})),{fragment:n,tag:s.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:s}}async function KT(e,t){const{subs:s}=$T(e);return s.get((await qT(e,t)).tag)||null}async function QT(e,t,s){const n=GT(e.runner);ow(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:a,tag:i,topics:r}=await qT(e,s),{addr:o,subs:l}=$T(e);let c=l.get(i);if(!c){const t={address:o||e,topics:r},h=t=>{let n=a;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(i){}if(n){const i=n,r=a?e.interface.decodeEventLog(a,t.data,t.topics):[];XT(e,s,r,(n=>new IT(e,n,s,i,t)))}else XT(e,s,[],(n=>new RT(e,n,s,t)))};let u=[];c={tag:i,listeners:[],start:()=>{u.length||u.push(n.on(t,h))},stop:async()=>{if(0==u.length)return;let e=u;u=[],await Promise.all(e),n.off(t,h)}},l.set(i,c)}return c}let ZT=Promise.resolve();async function XT(e,t,s,n){try{await ZT}catch(i){}const a=async function(e,t,s,n){await ZT;const a=await KT(e,t);if(!a)return!1;const r=a.listeners.length;return a.listeners=a.listeners.filter((({listener:t,once:a})=>{const r=Array.from(s);n&&r.push(n(a?null:t));try{t.call(e,...r)}catch(i){}return!a})),0===a.listeners.length&&(a.stop(),$T(e).subs.delete(a.tag)),r>0}(e,t,s,n);return ZT=a,await a}const YT=["then"];Ne=VT;let JT=class e{constructor(e,t,s,n){En(this,"target"),En(this,"interface"),En(this,"runner"),En(this,"filters"),En(this,Ne),En(this,"fallback"),lw("string"==typeof e||tE(e),"invalid value for Contract target","target",e),null==s&&(s=null);const a=mT.from(t);let i;sw(this,{target:e,runner:s,interface:a}),Object.defineProperty(this,VT,{value:{}});let r=null,o=null;if(n){const e=GT(s);o=new MT(this.interface,e,n)}let l=new Map;if("string"==typeof e)if(fw(e))r=e,i=Promise.resolve(e);else{const t=UT(s,"resolveName");if(!LT(t))throw rw("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then((t=>{if(null==t)throw rw("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return $T(this).addr=t,t}))}else i=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return $T(this).addr=e,e}));var c;return c={addrPromise:i,addr:r,deployTx:o,subs:l},WT.set(this[VT],c),sw(this,{filters:new Proxy({},{get:(e,t,s)=>{if("symbol"==typeof t||YT.indexOf(t)>=0)return Reflect.get(e,t,s);try{return this.getEvent(t)}catch(n){if(!aw(n,"INVALID_ARGUMENT")||"key"!==n.argument)throw n}},has:(e,t)=>YT.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))})}),sw(this,{fallback:a.receive||a.fallback?zT(this):null}),new Proxy(this,{get:(e,t,s)=>{if("symbol"==typeof t||t in e||YT.indexOf(t)>=0)return Reflect.get(e,t,s);try{return e.getFunction(t)}catch(n){if(!aw(n,"INVALID_ARGUMENT")||"key"!==n.argument)throw n}},has:(e,t)=>"symbol"==typeof t||t in e||YT.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(t){return new e(this.target,this.interface,t)}attach(t){return new e(t,this.interface,this.runner)}async getAddress(){return await $T(this).addrPromise}async getDeployedCode(){const e=GT(this.runner);ow(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=GT(this.runner);return ow(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,s)=>{const n=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",n)}catch(a){s(a)}};n()}))}deploymentTransaction(){return $T(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const s=function(...s){const n=e.interface.getFunction(t,s);return ow(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),n},n=async function(...t){const n=s(...t);let a={};if(n.inputs.length+1===t.length&&(a=await HT(t.pop()),a.from&&(a.from=await nE(a.from,OT(e.runner)))),n.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(e,t,s){const n=UT(e,"resolveName"),a=LT(n)?n:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(s[t],((e,t)=>(t=lE.dereference(t,e),"address"===e?nE(t,a):t))))))}(e.runner,n.inputs,t);return Object.assign({},a,await tw({to:e.getAddress(),data:e.interface.encodeFunctionData(n,i)}))},a=async function(...e){const t=await r(...e);return 1===t.length?t[0]:t},i=async function(...t){const s=e.runner;ow(FT(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const a=await s.sendTransaction(await n(...t)),i=GT(e.runner);return new MT(e.interface,i,a)},r=async function(...t){const a=UT(e.runner,"call");ow(DT(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await n(...t);let r="0x";try{r=await a.call(i)}catch(l){if(iw(l)&&l.data)throw e.interface.makeError(l.data,i);throw l}const o=s(...t);return e.interface.decodeFunctionResult(o,r)},o=async(...e)=>s(...e).constant?await a(...e):await i(...e);return sw(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:s,estimateGas:async function(...t){const s=UT(e.runner,"estimateGas");return ow(NT(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await n(...t))},populateTransaction:n,send:i,staticCall:a,staticCallResult:r}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=e.interface.getFunction(t);return ow(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),o}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const s=function(...s){const n=e.interface.getEvent(t,s);return ow(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),n},n=function(...t){return new jT(e,s(...t),t)};return sw(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:s}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=e.interface.getEvent(t);return ow(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){null==t&&(t=0),null==s&&(s="latest");const{addr:n,addrPromise:a}=$T(this),i=n||await a,{fragment:r,topics:o}=await qT(this,e),l={address:i,topics:o,fromBlock:t,toBlock:s},c=GT(this.runner);return ow(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map((e=>{let t=r;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(s){}if(t)try{return new TT(e,this.interface,t)}catch(s){return new BT(e,s)}return new kT(e,c)}))}async on(e,t){const s=await QT(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await QT(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await XT(this,e,t,null)}async listenerCount(e){if(e){const t=await KT(this,e);return t?t.listeners.length:0}const{subs:t}=$T(this);let s=0;for(const{listeners:n}of t.values())s+=n.length;return s}async listeners(e){if(e){const t=await KT(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=$T(this);let s=[];for(const{listeners:n}of t.values())s=s.concat(n.map((({listener:e})=>e)));return s}async off(e,t){const s=await KT(this,e);if(!s)return this;if(t){const e=s.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&s.listeners.splice(e,1)}return null!=t&&0!==s.listeners.length||(s.stop(),$T(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await KT(this,e);if(!t)return this;t.stop(),$T(this).subs.delete(t.tag)}else{const{subs:e}=$T(this);for(const{tag:t,stop:s}of e.values())s(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(t){return class extends e{constructor(e,s=null){super(e,t,s)}}}static from(e,t,s){return null==s&&(s=null),new this(e,t,s)}};class eB extends(function(){return JT}()){}function tB(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):lw(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class sB{constructor(e){En(this,"name"),sw(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const nB=new RegExp("^(ipfs)://(.*)$","i"),aB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),nB,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],iB=class e{constructor(e,t,s){Tn(this,Oe),En(this,"provider"),En(this,"address"),En(this,"name"),Tn(this,Le),Tn(this,Fe),sw(this,{provider:e,address:t,name:s}),Bn(this,Le,null),Bn(this,Fe,new eB(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return null==Pn(this,Le)&&Bn(this,Le,(async()=>{try{return await Pn(this,Fe).supportsInterface("0x9061b923")}catch(e){if(aw(e,"CALL_EXCEPTION"))return!1;throw Bn(this,Le,null),e}})()),await Pn(this,Le)}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await Cn(this,Oe,je).call(this,"addr(bytes32)");return null==e||e===LA?null:e}catch(a){if(aw(a,"CALL_EXCEPTION"))return null;throw a}if(e>=0&&e<2147483648){let t=e+2147483648;const s=await Cn(this,Oe,je).call(this,"addr(bytes32,uint)",[t]);if(fw(s,20))return eE(s)}let t=null;for(const i of this.provider.plugins)if(i instanceof sB&&i.supportsCoinType(e)){t=i;break}if(null==t)return null;const s=await Cn(this,Oe,je).call(this,"addr(bytes32,uint)",[e]);if(null==s||"0x"===s)return null;const n=await t.decodeAddress(e,s);if(null!=n)return n;ow(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await Cn(this,Oe,je).call(this,"text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await Cn(this,Oe,je).call(this,"contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===2*s)return`${e}://${function(e){const t=dw(e);let s=Rw(t),n="";for(;s;)n=Lw[Number(s%Fw)]+n,s/=Fw;for(let a=0;a<t.length&&!t[a];a++)n=Lw[0]+n;return n}("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&64===s[1].length)return`bzz://${s[1]}`;ow(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(null==n)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let a=0;a<aB.length;a++){const i=n.match(aB[a]);if(null==i)continue;const r=i[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const t=tB(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:t}),{linkage:e,url:t}}case"erc721":case"erc1155":{const a="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:n});const o=await this.getAddress();if(null==o)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(2!==l.length)return e.push({type:`!${r}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],h=new eB(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await h.ownerOf(c);if(o!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await h.balanceOf(o,c);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let u=await h[a](c);if(null==u||"0x"===u)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:u}),"erc1155"===r&&(u=u.replace("{id}",_w(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=tB(u)),e.push({type:"metadata-url",value:u});let d={};const p=await new tx(u).send();p.assertOk();try{d=p.bodyJson}catch(t){try{e.push({type:"!metadata",value:p.bodyText})}catch(s){const t=p.body;return t&&e.push({type:"!metadata",value:yw(t)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let f=d.image;if("string"!=typeof f)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(nB))return e.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:f}),f=tB(f)}return e.push({type:"url",value:f}),{linkage:e,url:f}}}}}catch(t){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return ow(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async fromName(t,s){var n;let a=s;for(;;){if(""===a||"."===a)return null;if("eth"!==s&&"eth"===a)return null;const i=await Cn(n=e,Ue,Ge).call(n,t,a);if(null!=i){const n=new e(t,i,s);return a===s||await n.supportsWildcard()?n:null}a=a.split(".").slice(1).join(".")}}};Le=new WeakMap,Fe=new WeakMap,Oe=new WeakSet,je=async function(e,t){t=(t||[]).slice();const s=Pn(this,Fe).interface;t.unshift(CS(this.name));let n=null;await this.supportsWildcard()&&(n=s.getFunction(e),ow(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[MS(this.name,255),s.encodeFunctionData(n,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const a=await Pn(this,Fe)[e](...t);return n?s.decodeFunctionResult(n,a)[0]:a}catch(a){if(!aw(a,"CALL_EXCEPTION"))throw a}return null},Ue=new WeakSet,Ge=async function(e,t){const s=await iB.getEnsAddress(e);try{const n=new eB(s,["function resolver(bytes32) view returns (address)"],e),a=await n.resolver(CS(t),{enableCcipRead:!0});return a===LA?null:a}catch(n){throw n}return null},Tn(iB,Ue);let rB=iB;const oB=BigInt(0);function lB(e,t){return function(s){return null==s?t:e(s)}}function cB(e,t){return s=>{if(t&&null==s)return null;if(!Array.isArray(s))throw new Error("not an array");return s.map((t=>e(t)))}}function hB(e,t){return s=>{const n={};for(const i in e){let r=i;if(t&&i in t&&!(r in s))for(const e of t[i])if(e in s){r=e;break}try{const t=e[i](s[r]);void 0!==t&&(n[i]=t)}catch(a){ow(!1,`invalid value for value.${i} (${a instanceof Error?a.message:"not-an-error"})`,"BAD_DATA",{value:s})}}return n}}function uB(e){return lw(fw(e,!0),"invalid data","value",e),e}function dB(e){return lw(fw(e,32),"invalid hash","value",e),e}const pB=hB({address:eE,blockHash:dB,blockNumber:Iw,data:uB,index:Iw,removed:lB((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}lw(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:cB(dB),transactionHash:dB,transactionIndex:Iw},{index:["logIndex"]}),fB=hB({hash:lB(dB),parentHash:dB,parentBeaconBlockRoot:lB(dB,null),number:Iw,timestamp:Iw,nonce:lB(uB),difficulty:Bw,gasLimit:Bw,gasUsed:Bw,stateRoot:lB(dB,null),receiptsRoot:lB(dB,null),blobGasUsed:lB(Bw,null),excessBlobGas:lB(Bw,null),miner:lB(eE),prevRandao:lB(dB,null),extraData:uB,baseFeePerGas:lB(Bw)},{prevRandao:["mixHash"]}),mB=hB({transactionIndex:Iw,blockNumber:Iw,transactionHash:dB,address:eE,topics:cB(dB),data:uB,index:Iw,blockHash:dB},{index:["logIndex"]}),gB=hB({to:lB(eE,null),from:lB(eE,null),contractAddress:lB(eE,null),index:Iw,root:lB(yw),gasUsed:Bw,blobGasUsed:lB(Bw,null),logsBloom:lB(uB),blockHash:dB,hash:dB,logs:cB((function(e){return mB(e)})),blockNumber:Iw,cumulativeGasUsed:Bw,effectiveGasPrice:lB(Bw),blobGasPrice:lB(Bw,null),status:lB(Iw),type:lB(Iw,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function yB(e){e.to&&Bw(e.to)===oB&&(e.to="0x0000000000000000000000000000000000000000");const t=hB({hash:dB,index:lB(Iw,void 0),type:e=>"0x"===e||null==e?0:Iw(e),accessList:lB(IS,null),blobVersionedHashes:lB(cB(dB,!0),null),blockHash:lB(dB,null),blockNumber:lB(Iw,null),transactionIndex:lB(Iw,null),from:eE,gasPrice:lB(Bw),maxPriorityFeePerGas:lB(Bw),maxFeePerGas:lB(Bw),maxFeePerBlobGas:lB(Bw,null),gasLimit:Bw,to:lB(eE,null),value:Bw,nonce:Iw,data:uB,creates:lB(eE,null),chainId:lB(Bw,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=eE(e.from);let s=Bw(e.nonce,"tx.nonce").toString(16);return s="0"===s?"0x":s.length%2?"0x0"+s:"0x"+s,eE(ww(Mk(px([t,s])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=qA.from(e.signature):t.signature=qA.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Bw(t.blockHash)===oB&&(t.blockHash=null),t}class bB{constructor(e){En(this,"name"),sw(this,{name:e})}clone(){return new bB(this.name)}}class vB extends bB{constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`),En(this,"effectiveBlock"),En(this,"txBase"),En(this,"txCreate"),En(this,"txDataZero"),En(this,"txDataNonzero"),En(this,"txAccessListStorageKey"),En(this,"txAccessListAddress");const s={effectiveBlock:e};function n(e,n){let a=(t||{})[e];null==a&&(a=n),lw("number"==typeof a,`invalud value for ${e}`,"costs",t),s[e]=a}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),sw(this,s)}clone(){return new vB(this.effectiveBlock,this)}}class wB extends bB{constructor(e,t){super("org.ethers.plugins.network.Ens"),En(this,"address"),En(this,"targetNetwork"),sw(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new wB(this.address,this.targetNetwork)}}class xB extends bB{constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),Tn(this,He),Tn(this,ze),Bn(this,He,e),Bn(this,ze,t)}get url(){return Pn(this,He)}get processFunc(){return Pn(this,ze)}clone(){return this}}He=new WeakMap,ze=new WeakMap;const kB=new Map;Ve=new WeakMap,We=new WeakMap,$e=new WeakMap;let AB=class e{constructor(e,t){Tn(this,Ve),Tn(this,We),Tn(this,$e),Bn(this,Ve,e),Bn(this,We,Bw(t)),Bn(this,$e,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return Pn(this,Ve)}set name(e){Bn(this,Ve,e)}get chainId(){return Pn(this,We)}set chainId(e){Bn(this,We,Bw(e,"chainId"))}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===Bw(e)}catch(t){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===Bw(e)}catch(t){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===Bw(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(Pn(this,$e).values())}attachPlugin(e){if(Pn(this,$e).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Pn(this,$e).set(e.name,e.clone()),this}getPlugin(e){return Pn(this,$e).get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const t=new e(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new vB;let s=t.txBase;if(null==e.to&&(s+=t.txCreate),e.data)for(let n=2;n<e.data.length;n+=2)"00"===e.data.substring(n,n+2)?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const n=IS(e.accessList);for(const e in n)s+=t.txAccessListAddress+t.txAccessListStorageKey*n[e].storageKeys.length}return s}static from(t){if(function(){function e(e,t,s){const n=function(){const n=new AB(e,t);return null!=s.ensNetwork&&n.attachPlugin(new wB(null,s.ensNetwork)),n.attachPlugin(new vB),(s.plugins||[]).forEach((e=>{n.attachPlugin(e)})),n};AB.register(e,n),AB.register(t,n),s.altNames&&s.altNames.forEach((e=>{AB.register(e,n)}))}PB||(PB=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[SB("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[SB("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}))}(),null==t)return e.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const s=kB.get(t);if(s)return s();if("bigint"==typeof t)return new e("unknown",t);lw(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){lw("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const s=new e(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&s.attachPlugin(new wB(t.ensAddress,t.ensNetwork)),s}lw(!1,"invalid network","network",t)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const s=kB.get(e);s&&lw(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),kB.set(e,t)}};function EB(e,t){const s=String(e);if(!s.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const n=s.split(".");if(1===n.length&&n.push(""),2!==n.length)throw new Error(`invalid gwei value: ${e}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let e=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||e++,n[1]=e.toString()}return BigInt(n[0]+n[1])}function SB(e){return new xB(e,(async(e,t,s)=>{let n;s.setHeader("User-Agent","ethers");try{const[t,a]=await Promise.all([s.send(),e()]);n=t;const i=n.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:EB(i.maxFee,9),maxPriorityFeePerGas:EB(i.maxPriorityFee,9)}}catch(a){ow(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:n,error:a})}}))}let PB=!1;function TB(e){return JSON.parse(JSON.stringify(e))}class BB{constructor(e){Tn(this,Xe),Tn(this,qe),Tn(this,Ke),Tn(this,Qe),Tn(this,Ze),Bn(this,qe,e),Bn(this,Ke,null),Bn(this,Qe,4e3),Bn(this,Ze,-2)}get pollingInterval(){return Pn(this,Qe)}set pollingInterval(e){Bn(this,Qe,e)}start(){Pn(this,Ke)||(Bn(this,Ke,Pn(this,qe)._setTimeout(Cn(this,Xe,Ye).bind(this),Pn(this,Qe))),Cn(this,Xe,Ye).call(this))}stop(){Pn(this,Ke)&&(Pn(this,qe)._clearTimeout(Pn(this,Ke)),Bn(this,Ke,null))}pause(e){this.stop(),e&&Bn(this,Ze,-2)}resume(){this.start()}}qe=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Ze=new WeakMap,Xe=new WeakSet,Ye=async function(){try{const e=await Pn(this,qe).getBlockNumber();if(-2===Pn(this,Ze))return void Bn(this,Ze,e);if(e!==Pn(this,Ze)){for(let t=Pn(this,Ze)+1;t<=e;t++){if(null==Pn(this,Ke))return;await Pn(this,qe).emit("block",t)}Bn(this,Ze,e)}}catch(e){}null!=Pn(this,Ke)&&Bn(this,Ke,Pn(this,qe)._setTimeout(Cn(this,Xe,Ye).bind(this),Pn(this,Qe)))};class CB{constructor(e){Tn(this,Je),Tn(this,et),Tn(this,tt),Bn(this,Je,e),Bn(this,tt,!1),Bn(this,et,(e=>{this._poll(e,Pn(this,Je))}))}async _poll(e,t){throw new Error("sub-classes must override this")}start(){Pn(this,tt)||(Bn(this,tt,!0),Pn(this,et).call(this,-2),Pn(this,Je).on("block",Pn(this,et)))}stop(){Pn(this,tt)&&(Bn(this,tt,!1),Pn(this,Je).off("block",Pn(this,et)))}pause(e){this.stop()}resume(){this.start()}}Je=new WeakMap,et=new WeakMap,tt=new WeakMap;class MB extends CB{constructor(e,t){super(e),Tn(this,st),Tn(this,nt),Bn(this,st,t),Bn(this,nt,-2)}pause(e){e&&Bn(this,nt,-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(Pn(this,st));null!=s&&(-2===Pn(this,nt)?Bn(this,nt,s.number):s.number>Pn(this,nt)&&(t.emit(Pn(this,st),s.number),Bn(this,nt,s.number)))}}st=new WeakMap,nt=new WeakMap;class RB extends CB{constructor(e,t){super(e),Tn(this,at),Bn(this,at,TB(t))}async _poll(e,t){throw new Error("@TODO")}}at=new WeakMap;class IB extends CB{constructor(e,t){super(e),Tn(this,it),Bn(this,it,t)}async _poll(e,t){const s=await t.getTransactionReceipt(Pn(this,it));s&&t.emit(Pn(this,it),s)}}it=new WeakMap;class _B{constructor(e,t){Tn(this,ut),Tn(this,rt),Tn(this,ot),Tn(this,lt),Tn(this,ct),Tn(this,ht),Bn(this,rt,e),Bn(this,ot,TB(t)),Bn(this,lt,Cn(this,ut,dt).bind(this)),Bn(this,ct,!1),Bn(this,ht,-2)}start(){Pn(this,ct)||(Bn(this,ct,!0),-2===Pn(this,ht)&&Pn(this,rt).getBlockNumber().then((e=>{Bn(this,ht,e)})),Pn(this,rt).on("block",Pn(this,lt)))}stop(){Pn(this,ct)&&(Bn(this,ct,!1),Pn(this,rt).off("block",Pn(this,lt)))}pause(e){this.stop(),e&&Bn(this,ht,-2)}resume(){this.start()}}rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,ct=new WeakMap,ht=new WeakMap,ut=new WeakSet,dt=async function(e){if(-2===Pn(this,ht))return;const t=TB(Pn(this,ot));t.fromBlock=Pn(this,ht)+1,t.toBlock=e;const s=await Pn(this,rt).getLogs(t);if(0!==s.length)for(const n of s)Pn(this,rt).emit(Pn(this,ot),n),Bn(this,ht,n.blockNumber);else Pn(this,ht)<e-60&&Bn(this,ht,e-60)};const DB=BigInt(2);function NB(e){return e&&"function"==typeof e.then}function LB(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,s)=>(e[s]=t[s],e)),{})}return t}))}class FB{constructor(e){En(this,"name"),sw(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function OB(e){return(e=Array.from(new Set(e).values())).sort(),e}async function jB(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(fw(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:LB("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:LB("orphan",t),filter:(s=t,JSON.parse(JSON.stringify(s)))}}var s;if(e.address||e.topics){const s=e,n={topics:(s.topics||[]).map((e=>null==e?null:Array.isArray(e)?OB(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(s.address){const e=[],a=[],i=s=>{fw(s)?e.push(s):a.push((async()=>{e.push(await nE(s,t))})())};Array.isArray(s.address)?s.address.forEach(i):i(s.address),a.length&&await Promise.all(a),n.address=OB(e.map((e=>e.toLowerCase())))}return{filter:n,tag:LB("event",n),type:"event"}}lw(!1,"unknown ProviderEvent","event",e)}function UB(){return(new Date).getTime()}const GB={cacheTimeout:250,pollingInterval:4e3};class HB{constructor(e,t){if(Tn(this,St),Tn(this,pt),Tn(this,ft),Tn(this,mt),Tn(this,gt),Tn(this,yt),Tn(this,bt),Tn(this,vt),Tn(this,wt),Tn(this,xt),Tn(this,kt),Tn(this,At),Tn(this,Et),Bn(this,Et,Object.assign({},GB,t||{})),"any"===e)Bn(this,bt,!0),Bn(this,yt,null);else if(e){const t=AB.from(e);Bn(this,bt,!1),Bn(this,yt,Promise.resolve(t)),setTimeout((()=>{this.emit("network",t,null)}),0)}else Bn(this,bt,!1),Bn(this,yt,null);Bn(this,wt,-1),Bn(this,vt,new Map),Bn(this,pt,new Map),Bn(this,ft,new Map),Bn(this,mt,null),Bn(this,gt,!1),Bn(this,xt,1),Bn(this,kt,new Map),Bn(this,At,!1)}get pollingInterval(){return Pn(this,Et).pollingInterval}get provider(){return this}get plugins(){return Array.from(Pn(this,ft).values())}attachPlugin(e){if(Pn(this,ft).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Pn(this,ft).set(e.name,e.connect(this)),this}getPlugin(e){return Pn(this,ft).get(e)||null}get disableCcipRead(){return Pn(this,At)}set disableCcipRead(e){Bn(this,At,!!e)}async ccipReadFetch(e,t,s){if(this.disableCcipRead||0===s.length||null==e.to)return null;const n=e.to.toLowerCase(),a=t.toLowerCase(),i=[];for(let o=0;o<s.length;o++){const t=s[o],l=t.replace("{sender}",n).replace("{data}",a),c=new tx(l);-1===t.indexOf("{data}")&&(c.body={data:a,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:o,urls:s});let h,u="unknown error";try{h=await c.send()}catch(r){i.push(r.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:{error:r}});continue}try{const e=h.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(u=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(r){}ow(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${u}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:t,errorMessage:u}}),i.push(u)}ow(!1,`error encountered during CCIP fetch: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:i}})}_wrapBlock(e,t){return new xT(function(e){const t=fB(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:yB(e))),t}(e),this)}_wrapLog(e,t){return new kT(function(e){return pB(e)}(e),this)}_wrapTransactionReceipt(e,t){return new AT(function(e){return gB(e)}(e),this)}_wrapTransactionResponse(e,t){return new ET(yB(e),this)}_detectNetwork(){ow(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ow(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Iw(await Cn(this,St,Pt).call(this,{method:"getBlockNumber"}),"%response");return Pn(this,wt)>=0&&Bn(this,wt,e),e}_getAddress(e){return nE(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return fw(e)?fw(e,32)?e:Nw(e):("bigint"==typeof e&&(e=Iw(e,"blockTag")),"number"==typeof e?e>=0?Nw(e):Pn(this,wt)>=0?Nw(Pn(this,wt)+e):this.getBlockNumber().then((t=>Nw(t+e))):void lw(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?OB(e.map((e=>e.toLowerCase()))):e.toLowerCase())),s="blockHash"in e?e.blockHash:void 0,n=(e,n,a)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(s&&(null!=n||null!=a))throw new Error("invalid filter");const r={};return i&&(r.address=i),t.length&&(r.topics=t),n&&(r.fromBlock=n),a&&(r.toBlock=a),s&&(r.blockHash=s),r};let a,i,r=[];if(e.address)if(Array.isArray(e.address))for(const o of e.address)r.push(this._getAddress(o));else r.push(this._getAddress(e.address));return"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),r.filter((e=>"string"!=typeof e)).length||null!=a&&"string"!=typeof a||null!=i&&"string"!=typeof i?Promise.all([Promise.all(r),a,i]).then((e=>n(e[0],e[1],e[2]))):n(r,a,i)}_getTransactionRequest(e){const t=wT(e),s=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const n=nE(t[e],this);NB(n)?s.push(async function(){t[e]=await n}()):t[e]=n})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);NB(e)?s.push(async function(){t.blockTag=await e}()):t.blockTag=e}return s.length?async function(){return await Promise.all(s),t}():t}async getNetwork(){if(null==Pn(this,yt)){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw Pn(this,yt)===e&&Bn(this,yt,null),t}})();return Bn(this,yt,e),(await e).clone()}const e=Pn(this,yt),[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(Pn(this,bt)?(this.emit("network",s,t),Pn(this,yt)===e&&Bn(this,yt,Promise.resolve(s))):ow(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:s,priorityFee:n}=await tw({_block:Cn(this,St,Mt).call(this,"latest",!1),gasPrice:(async()=>{try{return Bw(await Cn(this,St,Pt).call(this,{method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return Bw(await Cn(this,St,Pt).call(this,{method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let a=null,i=null;const r=this._wrapBlock(t,e);return r&&r.baseFeePerGas&&(i=null!=n?n:BigInt("1000000000"),a=r.baseFeePerGas*DB+i),new vT(s,a,i)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const e=new tx(s.url),n=await s.processFunc(t,this,e);return new vT(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return NB(t)&&(t=await t),Bw(await Cn(this,St,Pt).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:s}=await tw({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Cn(this,St,Bt).call(this,Cn(this,St,Tt).call(this,t,s,e.enableCcipRead?0:-1))}async getBalance(e,t){return Bw(await Cn(this,St,Ct).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Iw(await Cn(this,St,Ct).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return yw(await Cn(this,St,Ct).call(this,{method:"getCode"},e,t))}async getStorage(e,t,s){const n=Bw(t,"position");return yw(await Cn(this,St,Ct).call(this,{method:"getStorage",position:n},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:n}=await tw({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),a=QS.from(e);if(a.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(a,n).replaceableTransaction(t)}async getBlock(e,t){const{network:s,params:n}=await tw({network:this.getNetwork(),params:Cn(this,St,Mt).call(this,e,!!t)});return null==n?null:this._wrapBlock(n,s)}async getTransaction(e){const{network:t,params:s}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getTransaction",hash:e})});return null==s?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getTransactionReceipt",hash:e})});if(null==s)return null;if(null==s.gasPrice&&null==s.effectiveGasPrice){const t=await Cn(this,St,Pt).call(this,{method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await tw({network:this.getNetwork(),result:Cn(this,St,Pt).call(this,{method:"getTransactionResult",hash:e})});return null==t?null:yw(t)}async getLogs(e){let t=this._getFilter(e);NB(t)&&(t=await t);const{network:s,params:n}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getLogs",filter:t})});return n.map((e=>this._wrapLog(e,s)))}_getProvider(e){ow(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await rB.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=CS((e=eE(e)).substring(2).toLowerCase()+".addr.reverse");try{const s=await rB.getEnsAddress(this),n=new eB(s,["function resolver(bytes32) view returns (address)"],this),a=await n.resolver(t);if(null==a||a===LA)return null;const i=new eB(a,["function name(bytes32) view returns (string)"],this),r=await i.name(t);return await this.resolveName(r)!==e?null:r}catch(s){if(aw(s,"BAD_DATA")&&"0x"===s.value)return null;if(aw(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const n=null!=t?t:1;return 0===n?this.getTransactionReceipt(e):new Promise((async(t,a)=>{let i=null;const r=async s=>{try{const a=await this.getTransactionReceipt(e);if(null!=a&&s-a.blockNumber+1>=n)return t(a),void(i&&(clearTimeout(i),i=null))}catch(a){console.log("EEE",a)}this.once("block",r)};null!=s&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",r),a(rw("timeout","TIMEOUT",{reason:"timeout"})))}),s)),r(await this.getBlockNumber())}))}async waitForBlock(e){ow(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=Pn(this,kt).get(e);t&&(t.timer&&clearTimeout(t.timer),Pn(this,kt).delete(e))}_setTimeout(e,t){null==t&&(t=0);const s=Mn(this,xt)._++,n=()=>{Pn(this,kt).delete(s),e()};if(this.paused)Pn(this,kt).set(s,{timer:null,func:n,time:t});else{const e=setTimeout(n,t);Pn(this,kt).set(s,{timer:e,func:n,time:UB()})}return s}_forEachSubscriber(e){for(const t of Pn(this,pt).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new FB(e.type);case"block":{const e=new BB(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new MB(this,e.type);case"event":return new _B(this,e.filter);case"transaction":return new IB(this,e.hash);case"orphan":return new RB(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of Pn(this,pt).values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),null!=Pn(this,mt)&&t.pause(Pn(this,mt));break}}async on(e,t){const s=await Cn(this,St,It).call(this,e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,null!=Pn(this,mt)&&s.subscriber.pause(Pn(this,mt))),this}async once(e,t){const s=await Cn(this,St,It).call(this,e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,null!=Pn(this,mt)&&s.subscriber.pause(Pn(this,mt))),this}async emit(e,...t){const s=await Cn(this,St,Rt).call(this,e,t);if(!s||0===s.listeners.length)return!1;const n=s.listeners.length;return s.listeners=s.listeners.filter((({listener:s,once:n})=>{const a=new Ow(this,n?null:s,e);try{s.call(this,...t,a)}catch(i){}return!n})),0===s.listeners.length&&(s.started&&s.subscriber.stop(),Pn(this,pt).delete(s.tag)),n>0}async listenerCount(e){if(e){const t=await Cn(this,St,Rt).call(this,e);return t?t.listeners.length:0}let t=0;for(const{listeners:s}of Pn(this,pt).values())t+=s.length;return t}async listeners(e){if(e){const t=await Cn(this,St,Rt).call(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:s}of Pn(this,pt).values())t=t.concat(s.map((({listener:e})=>e)));return t}async off(e,t){const s=await Cn(this,St,Rt).call(this,e);if(!s)return this;if(t){const e=s.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&s.listeners.splice(e,1)}return t&&0!==s.listeners.length||(s.started&&s.subscriber.stop(),Pn(this,pt).delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:n}=await Cn(this,St,It).call(this,e);s&&n.stop(),Pn(this,pt).delete(t)}else for(const[t,{started:s,subscriber:n}]of Pn(this,pt))s&&n.stop(),Pn(this,pt).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return Pn(this,gt)}destroy(){this.removeAllListeners();for(const e of Pn(this,kt).keys())this._clearTimeout(e);Bn(this,gt,!0)}get paused(){return null!=Pn(this,mt)}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(Bn(this,wt,-1),null!=Pn(this,mt)){if(Pn(this,mt)==!!e)return;ow(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),Bn(this,mt,!!e);for(const t of Pn(this,kt).values())t.timer&&clearTimeout(t.timer),t.time=UB()-t.time}resume(){if(null!=Pn(this,mt)){this._forEachSubscriber((e=>e.resume())),Bn(this,mt,null);for(const e of Pn(this,kt).values()){let t=e.time;t<0&&(t=0),e.time=UB(),setTimeout(e.func,t)}}}}function zB(e,t){try{const s=VB(e,t);if(s)return Hw(s)}catch(s){}return null}function VB(e,t){if("0x"===e)return null;try{const s=Iw(ww(e,t,t+32)),n=Iw(ww(e,s,s+32));return ww(e,s+32,s+32+n)}catch(s){}return null}function WB(e){const t=Dw(e);if(t.length>32)throw new Error("internal; should not happen");const s=new Uint8Array(32);return s.set(t,32-t.length),s}function $B(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}pt=new WeakMap,ft=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,wt=new WeakMap,xt=new WeakMap,kt=new WeakMap,At=new WeakMap,Et=new WeakMap,St=new WeakSet,Pt=async function(e){const t=Pn(this,Et).cacheTimeout;if(t<0)return await this._perform(e);const s=LB(e.method,e);let n=Pn(this,vt).get(s);return n||(n=this._perform(e),Pn(this,vt).set(s,n),setTimeout((()=>{Pn(this,vt).get(s)===n&&Pn(this,vt).delete(s)}),t)),await n},Tt=async function(e,t,s){ow(s<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const n=wT(e);try{return yw(await this._perform({method:"call",transaction:n,blockTag:t}))}catch(a){if(!this.disableCcipRead&&iw(a)&&a.data&&s>=0&&"latest"===t&&null!=n.to&&"0x556f1830"===ww(a.data,0,4)){const e=a.data,r=await nE(n.to,this);let o;try{o=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ow(vw(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const s=ww(e,0,32);ow(ww(s,0,12)===ww(QB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ww(s,12);try{const s=[],n=Iw(ww(e,32,64)),a=Iw(ww(e,n,n+32)),i=ww(e,n+32);for(let e=0;e<a;e++){const t=zB(i,32*e);if(null==t)throw new Error("abort");s.push(t)}t.urls=s}catch(a){ow(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=VB(e,64);if(null==s)throw new Error("abort");t.calldata=s}catch(a){ow(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ow(ww(e,100,128)===ww(QB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ww(e,96,100);try{const s=VB(e,128);if(null==s)throw new Error("abort");t.extraData=s}catch(a){ow(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(ww(a.data,4))}catch(i){ow(!1,i.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:e}})}ow(o.sender.toLowerCase()===r.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:e,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const l=await this.ccipReadFetch(n,o.calldata,o.urls);ow(null!=l,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:a.data,errorArgs:o.errorArgs}});const c={to:r,data:bw([o.selector,KB([l,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await Cn(this,St,Tt).call(this,c,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(i){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:i}),i}}throw a}},Bt=async function(e){const{value:t}=await tw({network:this.getNetwork(),value:e});return t},Ct=async function(e,t,s){let n=this._getAddress(t),a=this._getBlockTag(s);return"string"==typeof n&&"string"==typeof a||([n,a]=await Promise.all([n,a])),await Cn(this,St,Bt).call(this,Cn(this,St,Pt).call(this,Object.assign(e,{address:n,blockTag:a})))},Mt=async function(e,t){if(fw(e,32))return await Cn(this,St,Pt).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return"string"!=typeof s&&(s=await s),await Cn(this,St,Pt).call(this,{method:"getBlock",blockTag:s,includeTransactions:t})},Rt=async function(e,t){let s=await jB(e,this);return"event"===s.type&&t&&t.length>0&&!0===t[0].removed&&(s=await jB({orphan:"drop-log",log:t[0]},this)),Pn(this,pt).get(s.tag)||null},It=async function(e){const t=await jB(e,this),s=t.tag;let n=Pn(this,pt).get(s);return n||(n={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},Pn(this,pt).set(s,n)),n};const qB=new Uint8Array([]);function KB(e){const t=[];let s=0;for(let n=0;n<e.length;n++)t.push(qB),s+=32;for(let n=0;n<e.length;n++){const a=dw(e[n]);t[n]=WB(s),t.push(WB(a.length)),t.push($B(a)),s+=32+32*Math.ceil(a.length/32)}return bw(t)}const QB="0x0000000000000000000000000000000000000000000000000000000000000000";function ZB(e,t){if(e.provider)return e.provider;ow(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function XB(e,t){let s=wT(t);if(null!=s.to&&(s.to=nE(s.to,e)),null!=s.from){const t=s.from;s.from=Promise.all([e.getAddress(),nE(t,e)]).then((([e,t])=>(lw(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else s.from=e.getAddress();return await tw(s)}class YB{constructor(e){En(this,"provider"),sw(this,{provider:e||null})}async getNonce(e){return ZB(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await XB(this,e)}async populateTransaction(e){const t=ZB(this,"populateTransaction"),s=await XB(this,e);null==s.nonce&&(s.nonce=await this.getNonce("pending")),null==s.gasLimit&&(s.gasLimit=await this.estimateGas(s));const n=await this.provider.getNetwork();null!=s.chainId?lw(Bw(s.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):s.chainId=n.chainId;const a=null!=s.maxFeePerGas||null!=s.maxPriorityFeePerGas;if(null==s.gasPrice||2!==s.type&&!a?0!==s.type&&1!==s.type||!a||lw(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):lw(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==s.type&&null!=s.type||null==s.maxFeePerGas||null==s.maxPriorityFeePerGas)if(0===s.type||1===s.type){const e=await t.getFeeData();ow(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==s.gasPrice&&(s.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==s.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(s.type=2,null!=s.gasPrice){const e=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=e,s.maxPriorityFeePerGas=e}else null==s.maxFeePerGas&&(s.maxFeePerGas=e.maxFeePerGas),null==s.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(ow(!a,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==s.gasPrice&&(s.gasPrice=e.gasPrice),s.type=0):ow(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==s.type&&3!==s.type||(null==s.maxFeePerGas&&(s.maxFeePerGas=e.maxFeePerGas),null==s.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else s.type=2;return await tw(s)}async estimateGas(e){return ZB(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ZB(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=ZB(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=ZB(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const n=QS.from(s);return await t.broadcastTransaction(await this.signTransaction(n))}}class JB{constructor(e){Tn(this,jt),Tn(this,_t),Tn(this,Dt),Tn(this,Nt),Tn(this,Lt),Tn(this,Ft),Tn(this,Ot),Bn(this,_t,e),Bn(this,Dt,null),Bn(this,Nt,Cn(this,jt,Ut).bind(this)),Bn(this,Lt,!1),Bn(this,Ft,null),Bn(this,Ot,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){Pn(this,Lt)||(Bn(this,Lt,!0),Cn(this,jt,Ut).call(this,-2))}stop(){Pn(this,Lt)&&(Bn(this,Lt,!1),Bn(this,Ot,!0),Cn(this,jt,Gt).call(this),Pn(this,_t).off("block",Pn(this,Nt)))}pause(e){e&&Cn(this,jt,Gt).call(this),Pn(this,_t).off("block",Pn(this,Nt))}resume(){this.start()}}_t=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,jt=new WeakSet,Ut=async function(e){try{null==Pn(this,Dt)&&Bn(this,Dt,this._subscribe(Pn(this,_t)));let e=null;try{e=await Pn(this,Dt)}catch(t){if(!aw(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==e)return Bn(this,Dt,null),void Pn(this,_t)._recoverSubscriber(this,this._recover(Pn(this,_t)));const s=await Pn(this,_t).getNetwork();if(Pn(this,Ft)||Bn(this,Ft,s),Pn(this,Ft).chainId!==s.chainId)throw new Error("chaid changed");if(Pn(this,Ot))return;const n=await Pn(this,_t).send("eth_getFilterChanges",[e]);await this._emitResults(Pn(this,_t),n)}catch(t){console.log("@TODO",t)}Pn(this,_t).once("block",Pn(this,Nt))},Gt=function(){const e=Pn(this,Dt);e&&(Bn(this,Dt,null),e.then((e=>{Pn(this,_t).destroyed||Pn(this,_t).send("eth_uninstallFilter",[e])})))};class eC extends JB{constructor(e,t){var s;super(e),Tn(this,Ht),Bn(this,Ht,(s=t,JSON.parse(JSON.stringify(s))))}_recover(e){return new _B(e,Pn(this,Ht))}async _subscribe(e){return await e.send("eth_newFilter",[Pn(this,Ht)])}async _emitResults(e,t){for(const s of t)e.emit(Pn(this,Ht),e._wrapLog(s,e._network))}}Ht=new WeakMap;class tC extends JB{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const sC="bigint,boolean,function,number,string,symbol".split(/,/g);function nC(e){if(null==e||sC.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(nC);if("object"==typeof e)return Object.keys(e).reduce(((t,s)=>(t[s]=e[s],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function aC(e){return new Promise((t=>{setTimeout(t,e)}))}function iC(e){return e?e.toLowerCase():e}function rC(e){return e&&"number"==typeof e.pollingInterval}const oC={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class lC extends YB{constructor(e,t){super(e),En(this,"address"),sw(this,{address:t=eE(t)})}connect(e){ow(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=nC(e),s=[];if(t.from){const n=t.from;s.push((async()=>{const s=await nE(n,this.provider);lw(null!=s&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=s})())}else t.from=this.address;if(null==t.gasLimit&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;s.push((async()=>{t.to=await nE(e,this.provider)})())}s.length&&await Promise.all(s);const n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise(((e,n)=>{const a=[1e3,100];let i=0;const r=async()=>{try{const n=await this.provider.getTransaction(s);if(null!=n)return void e(n.replaceableTransaction(t))}catch(o){if(aw(o,"CANCELLED")||aw(o,"BAD_DATA")||aw(o,"NETWORK_ERROR")||aw(o,"UNSUPPORTED_OPERATION"))return null==o.info&&(o.info={}),o.info.sendTransactionHash=s,void n(o);if(aw(o,"INVALID_ARGUMENT")&&(i++,null==o.info&&(o.info={}),o.info.sendTransactionHash=s,i>10))return void n(o);this.provider.emit("error",rw("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:o}))}this.provider._setTimeout((()=>{r()}),a.pop()||4e3)};r()}))}async signTransaction(e){const t=nC(e);if(t.from){const s=await nE(t.from,this.provider);lw(null!=s&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=s}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t="string"==typeof e?Gw(e):e;return await this.provider.send("personal_sign",[yw(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const n=nC(s),a=await hP.resolveNames(e,t,n,(async e=>{const t=await nE(e);return lw(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(hP.getPayload(a.domain,t,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Gw(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),yw(t)])}}class cC extends HB{constructor(e,t){super(e,t),Tn(this,Zt),Tn(this,zt),Tn(this,Vt),Tn(this,Wt),Tn(this,$t),Tn(this,qt),Tn(this,Kt),Tn(this,Qt),Bn(this,Vt,1),Bn(this,zt,Object.assign({},oC,t||{})),Bn(this,Wt,[]),Bn(this,$t,null),Bn(this,Kt,null),Bn(this,Qt,null);{let e=null;const t=new Promise((t=>{e=t}));Bn(this,qt,{promise:t,resolve:e})}const s=this._getOption("staticNetwork");"boolean"==typeof s?(lw(!s||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),s&&null!=e&&Bn(this,Kt,AB.from(e))):s&&(lw(null==e||s.matches(e),"staticNetwork MUST match network object","options",t),Bn(this,Kt,s))}_getOption(e){return Pn(this,zt)[e]}get _network(){return ow(Pn(this,Kt),"network is not available yet","NETWORK_ERROR"),Pn(this,Kt)}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Bw(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const s=await this.getFeeData();null==s.maxFeePerGas&&null==s.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(Pn(this,Kt))return Pn(this,Kt)}return Pn(this,Qt)?await Pn(this,Qt):this.ready?(Bn(this,Qt,(async()=>{try{const e=AB.from(Bw(await this.send("eth_chainId",[])));return Bn(this,Qt,null),e}catch(e){throw Bn(this,Qt,null),e}})()),await Pn(this,Qt)):(Bn(this,Qt,(async()=>{const e={id:Mn(this,Vt)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],Bn(this,Qt,null)}catch(s){throw Bn(this,Qt,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return AB.from(Bw(t.result));throw this.getRpcError(e,t)})()),await Pn(this,Qt))}_start(){null!=Pn(this,qt)&&null!=Pn(this,qt).resolve&&(Pn(this,qt).resolve(),Bn(this,qt,null),(async()=>{for(;null==Pn(this,Kt)&&!this.destroyed;)try{Bn(this,Kt,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",rw("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await aC(1e3)}Cn(this,Zt,Xt).call(this)})())}async _waitUntilReady(){if(null!=Pn(this,qt))return await Pn(this,qt).promise}_getSubscriber(e){return"pending"===e.type?new tC(this):"event"===e.type?this._getOption("polling")?new _B(this,e.filter):new eC(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new FB("orphan"):super._getSubscriber(e)}get ready(){return null==Pn(this,qt)}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((s=>{if(null==e[s])return;let n=s;"gasLimit"===s&&(n="gas"),t[n]=Nw(Bw(e[s],`tx.${s}`))})),["from","to","data"].forEach((s=>{null!=e[s]&&(t[s]=yw(e[s]))})),e.accessList&&(t.accessList=IS(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map((e=>e.toLowerCase()))),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[iC(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[iC(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[iC(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[iC(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(iC):e.filter.address=iC(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:n}=t;if("eth_estimateGas"===s&&n.message){const t=n.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return rw("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:n}})}if("eth_call"===s||"eth_estimateGas"===s){const t=uC(n),a=lT.getBuiltinCallException("eth_call"===s?"call":"estimateGas",e.params[0],t?t.data:null);return a.info={error:n,payload:e},a}const a=JSON.stringify(function(e){const t=[];return dC(e,t),t}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return rw("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:n}});if("eth_sendRawTransaction"===s||"eth_sendTransaction"===s){const t=e.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return rw("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:n}});if(a.match(/nonce/i)&&a.match(/too low/i))return rw("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:n}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return rw("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:n}});if(a.match(/only replay-protected/i))return rw("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:t,info:{error:n}}})}let i=!!a.match(/the method .* does not exist/i);return i||n&&n.details&&n.details.startsWith("Unauthorized method:")&&(i=!0),i?rw("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:n,payload:e}}):rw("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=Mn(this,Vt)._++,n=new Promise(((n,a)=>{Pn(this,Wt).push({resolve:n,reject:a,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})}));return Cn(this,Zt,Xt).call(this),n}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const s=await t;if(e>=s.length)throw new Error("no such account");return new lC(this,s[e])}const{accounts:s}=await tw({network:this.getNetwork(),accounts:t});e=eE(e);for(const n of s)if(eE(n)===e)return new lC(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new lC(this,e)))}destroy(){Pn(this,$t)&&(clearTimeout(Pn(this,$t)),Bn(this,$t,null));for(const{payload:e,reject:t}of Pn(this,Wt))t(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));Bn(this,Wt,[]),super.destroy()}}zt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap,$t=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Zt=new WeakSet,Xt=function(){if(Pn(this,$t))return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");Bn(this,$t,setTimeout((()=>{Bn(this,$t,null);const e=Pn(this,Wt);for(Bn(this,Wt,[]);e.length;){const t=[e.shift()];for(;e.length&&t.length!==Pn(this,zt).batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map((e=>e.payload))).length>Pn(this,zt).batchMaxSize){e.unshift(t.pop());break}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const s=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:s});for(const{resolve:e,reject:n,payload:a}of t){if(this.destroyed){n(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:a.method}));continue}const t=s.filter((e=>e.id===a.id))[0];if(null!=t)"error"in t?n(this.getRpcError(a,t)):e(t.result);else{const e=rw("missing response for request","BAD_DATA",{value:s,info:{payload:a}});this.emit("error",e),n(e)}}}catch(s){this.emit("debug",{action:"receiveRpcError",error:s});for(const{reject:e}of t)e(s)}})()}}),e))};class hC extends cC{constructor(e,t){super(e,t),Tn(this,Yt);let s=this._getOption("pollingInterval");null==s&&(s=oC.pollingInterval),Bn(this,Yt,s)}_getSubscriber(e){const t=super._getSubscriber(e);return rC(t)&&(t.pollingInterval=Pn(this,Yt)),t}get pollingInterval(){return Pn(this,Yt)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");Bn(this,Yt,e),this._forEachSubscriber((e=>{rC(e)&&(e.pollingInterval=Pn(this,Yt))}))}}function uC(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&fw(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const s=uC(e[t]);if(s)return s}return null}if("string"==typeof e)try{return uC(JSON.parse(e))}catch(t){}return null}function dC(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const s in e)dC(e[s],t);if("string"==typeof e)try{return dC(JSON.parse(e),t)}catch(s){}}}Yt=new WeakMap;class pC extends hC{constructor(e,t,s){const n=Object.assign({},null!=s?s:{},{batchMaxCount:1});lw(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,n),Tn(this,Jt),Bn(this,Jt,(async(t,s)=>{const n={method:t,params:s};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const t=await e.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(IV){const t=new Error(IV.message);throw t.code=IV.code,t.data=IV.data,t.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}))}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){lw(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await Pn(this,Jt).call(this,e.method,e.params||[]);return[{id:e.id,result:t}]}catch(IV){return[{id:e.id,error:{code:IV.code,data:IV.data,message:IV.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!(await this.hasSigner(e)))try{await Pn(this,Jt).call(this,"eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}}Jt=new WeakMap;const fC=""+new URL("Vector-L8wVFDDW.png",import.meta.url).href,mC=""+new URL("Flame-BejVHtvN.png",import.meta.url).href,gC=""+new URL("Flame-1-DQvoWNes.png",import.meta.url).href,yC=""+new URL("Flame-2-BpnUaCkv.png",import.meta.url).href,bC=""+new URL("Corner-Frame-3 1-D2BLk6eF.png",import.meta.url).href,vC=""+new URL("Corner-Frame-3 2-BTERBFke.png",import.meta.url).href,wC=""+new URL("Corner-Frame-3 3-CSmT3o1a.png",import.meta.url).href,xC=""+new URL("Corner-Frame-3 4-BcteDHs9.png",import.meta.url).href;function kC(){const{login:e}=Zv(),t=_g(),[s,n]=ya.useState(!1),[a,i]=ya.useState("checking");ya.useEffect((()=>{o(),r()}),[]);const r=async()=>{try{const e=await qv.isCorrectNetwork();i(e?"correct":"wrong")}catch(e){console.error("Error checking network:",e),i("error")}},o=async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&localStorage.getItem("access_token")&&console.log("already connected")}catch(e){console.error("Error checking wallet connection:",e)}};return Pa.jsxs("div",{className:"login-root",children:[Pa.jsx("img",{src:mC,className:"flame-top",alt:"Flame Top"}),Pa.jsx("img",{src:mC,className:"flame-bottom",style:{transform:"rotate(180deg)"},alt:"Flame Bottom"}),Pa.jsx("img",{src:yC,className:"flame-left",alt:"Flame Left"}),Pa.jsx("img",{src:gC,className:"flame-right",alt:"Flame Right"}),Pa.jsx("img",{src:wC,className:"corner-frame corner-tl",style:{width:"129px",height:"129px"},alt:"Corner TL"}),Pa.jsx("img",{src:xC,className:"corner-frame corner-tr",style:{width:"129px",height:"129px"},alt:"Corner TR"}),Pa.jsx("img",{src:bC,className:"corner-frame corner-bl",style:{width:"129px",height:"129px"},alt:"Corner BL"}),Pa.jsx("img",{src:vC,className:"corner-frame corner-br",style:{width:"129px",height:"129px"},alt:"Corner BR"}),Pa.jsxs("div",{className:"login-box",children:[Pa.jsx("img",{src:fC,alt:"vector",className:"login-vector"}),Pa.jsx("h2",{className:"login-title",children:"Log In or Sign Up"}),"wrong"===a&&Pa.jsx("div",{style:{color:"#ff6b6b",marginBottom:"10px",fontSize:"14px",textAlign:"center"},children:"⚠️ Please switch to Somnia Testnet"}),Pa.jsxs("button",{onClick:async()=>{if(window.ethereum){n(!0);try{if(!(await qv.isCorrectNetwork()))try{await qv.switchToCorrectNetwork(),i("correct")}catch(s){return alert(`Please switch to Somnia Testnet in MetaMask to continue.\n\nNetwork Error: ${s.message}`),void n(!1)}const a=new pC(window.ethereum),r=await a.getSigner(),o=await r.getAddress(),l="Welcome to the game!\n\nClick to sign in.",c=await r.signMessage(l);await e({walletAddress:o,signature:c,message:l}),console.log("connected"),t("/")}catch(a){console.error("Login failed:",a),alert("Failed to connect wallet. Please try again.")}finally{n(!1)}}else alert("No MetaMask Detected")},className:"login-metamask-btn",disabled:s,style:{opacity:s?.7:1},children:[Pa.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPpSURBVHgB5VRNbBtFFP529td14jpBdpMmVdcCNYWqTahoJP7sjcS1aoo4cEEVnLgA6SW9IMENQYSUihsH1JwiQKLlUgmJKg4BUXFpWlRESdO6pSRGbuON69jetXeG2d/YqluExAneYfbNzJv3vfe99xb4z8jSm7qBf0lOGQN6qAuhMp0dKh8ckMxcRskTitPDMyvL+Afy+6knDEqJcWndfueH2zaapJaZzZumBzBt7JkEdc66+lBCxEuPq0iowjIFnaWCs5j5sFDo5vTmlJ6UVPkEVyc3G9S4sGrjj4rj3TmETnycL+YlLw3mHGPBI9fg7C8NjA/LY/tT0hmREZjvZwqyTDucN5sElZqkM+a/Of+bBavFonvJIS6wD8CYYPI1uqxYFN+uWt53fFhBwya6LHUCWBzAlaWChcvF1gPZhdY+AMFlgT5gg5/uNPFrycHLB1T0xHimQcXcqEtV4Py1Ou7Wujz0afFqSILtQwvqZjF/pcEdRv2AtQrw+c+Nhzv3o+gAeKS4NPUo26Z9mojxIfmRb6jodyjxF8fsZqRKAo4/FcPogOTR0i6jgzJePRRDryp0e2oezh31fLbNwe5L/DPm6nq/gJEUgZ5QIYu+iapQ9Gh+Mat1KSqyS2GxZuNaieLWhh8FYyw/s7Q+4epSCPDiPnKyXxEW9qcJNH5aa4io212j65CESpDulfHsXgcNjl/YoLiyTk+G9xHAREbShTYeNqsituoEoujvYyrjGfh6dYtwcD8Dh8+VogBxzfECcwN8cpeYe/1LdBaZMJxoj6w/0YLIb+9UJPz4pwra1jAO1y+saXzA/Nqkkp1zQBmbjPy6S/0DXWdgRruRy/lj/CHb6eAGHxS5rWmafCCKhE/yDop0f4tn19munFij/J6ejCjiERnd2N7B087GW8gO1iNKXEknmnj38Ian283una4qHiOnPYByRd7Z3oYWL+5mhUCRGXanbMQ0yulq+88EPt1GKN6TYVkCEr0UmrptIwSqB8DZ/lqEM7uNznjhmPd7qtkSmjxFKjJcNf2eSKkOem0RLUfwiqxpnc59n1gM6PLl9vS+m9yjHu4pc7tFQG+fhmYmi08u3kd++bp3lztyEG+9kIay8g1qd8scgHkNEQp/Wtj70UomyiA4PseXqWBjEtBz8dGJQnXk6BQRSHLXre8x7vjxJOIxtIaPoD7wtBm/+sUZxbyhU6dlsHolGdCTj+gMFYdhTukbNGl5Lb9n5vqif7qKhfnn59S4tJB95oD+3NiIdyry4diyrOX790rHD709Xwh9lD59LddYvTgmCEIE8PejGsh3X312jFEkw33ulTfm8L+QvwAAcJAHVMDC3wAAAABJRU5ErkJggg==",alt:"MetaMask Logo",className:"login-metamask-logo"}),Pa.jsx("p",{className:"login-metamask-text",children:s?"Connecting...":"Connect Metamask"})]})]})]})}const AC="survivor_game_save";function EC(e){try{const t={gold:e.gold||0,passiveUpgrades:e.passiveUpgrades||{},allTimeStats:e.allTimeStats||{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},gameStats:e.gameStats||{totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,highestLevel:1,longestSurvivalTime:0},lastRunStats:e.lastRunStats||null,savedAt:(new Date).toISOString(),version:"1.0"};return localStorage.setItem(AC,JSON.stringify(t)),console.log("Game data saved to local storage"),!0}catch(t){return console.error("Error saving to local storage:",t),!1}}function SC(){try{const e=localStorage.getItem(AC);if(!e)return console.log("No saved data found in local storage"),null;const t=JSON.parse(e);return console.log("Game data loaded from local storage:",t),t}catch(e){return console.error("Error loading from local storage:",e),null}}const PC=new In.Events.EventEmitter;"undefined"!=typeof window&&(window.EventBus=PC);const TC=async()=>{try{return(await jv.get("/maps")).data}catch(e){throw console.error("Failed to get maps:",e),e}},BC=async()=>{try{return(await jv.get("/scores/global")).data}catch(e){throw console.error("Failed to get global scores:",e),e}},CC=async()=>{try{return(await jv.get("/scores/global")).data}catch(e){throw console.error("Failed to get global kill counts:",e),e}},MC=async()=>{try{return(await jv.get("/profile")).data}catch(e){throw console.error("Failed to get user profile:",e),e}},RC=async()=>{try{return(await jv.get("/my/upgrades")).data}catch(e){throw console.error("Failed to get upgrades:",e),e}},IC=async e=>{try{return(await jv.post("/user/upgrade",{statId:e})).data}catch(t){throw console.error("Failed to buy upgrade:",t),t}},_C=async e=>{try{return(await jv.post("/session",e)).data}catch(t){throw console.error("Failed to start game session:",t),t}},DC=async e=>{try{return(await jv.post("/session/checkpoint",e)).data}catch(t){throw console.error("Failed to save checkpoint:",t),t}},NC=async e=>{try{return(await jv.post("/session/end",e)).data}catch(t){throw console.error("Failed to end game session:",t),t}},LC=class e{constructor(){if(e.instance)return e.instance;e.instance=this,this.backendUpgrades=null,this.isLoaded=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}async loadBackendUpgrades(){if(!localStorage.getItem("access_token"))return console.log("[BackendStatsManager] No auth token, skipping backend upgrades"),this.backendUpgrades={},this.isLoaded=!1,{};try{console.log("[BackendStatsManager] Loading backend upgrades...");const e=await RC(),t=e.data||e;return this.backendUpgrades=this.convertBackendUpgrades(t),this.isLoaded=!0,console.log("[BackendStatsManager] Backend upgrades loaded:",this.backendUpgrades),this.backendUpgrades}catch(e){return console.error("[BackendStatsManager] Failed to load backend upgrades:",e),this.backendUpgrades={},this.isLoaded=!1,{}}}convertBackendUpgrades(e){const t={};return Array.isArray(e)?(e.forEach((e=>{const{type:s,level:n}=e;switch(s){case"MAX_HEALTH":t.maxHealthBonus=20*n;break;case"DAMAGE_BOOST":t.damageBonus=5*n;break;case"MOVESPEED":t.moveSpeedBonus=10*n;break;case"COOLDOWN_REDUCTION":t.cooldownReduction=Math.min(.05*n,.5);break;case"ATTACK_RANGE":t.attackRangeBonus=15*n;break;case"PICKUP_RADIUS":t.pickupRangeBonus=10*n;break;case"HP_REGEN":t.hpRegenBonus=1*n;break;default:console.warn(`[BackendStatsManager] Unknown upgrade type: ${s}`)}})),t):(console.warn("[BackendStatsManager] Invalid backend upgrades format"),{})}applyBackendUpgradesToPlayer(e){var t,s;if(!e||!this.backendUpgrades||!this.isLoaded)return void console.log("[BackendStatsManager] Cannot apply upgrades - missing data");console.log("[BackendStatsManager] Applying backend upgrades to player...");const n=this.backendUpgrades;if(n.maxHealthBonus){const t=e.maxHealth;e.maxHealth=100+n.maxHealthBonus,e.health=e.maxHealth,console.log(`[BackendStatsManager] Applied health: ${t} -> ${e.maxHealth}`)}if(n.damageBonus){const t=e.damage;e.damage=10+n.damageBonus,console.log(`[BackendStatsManager] Applied damage: ${t} -> ${e.damage}`)}if(n.moveSpeedBonus){const t=e.moveSpeed;e.moveSpeed=150+n.moveSpeedBonus,console.log(`[BackendStatsManager] Applied speed: ${t} -> ${e.moveSpeed}`)}if(n.attackRangeBonus){const t=e.attackRange;e.attackRange=100+n.attackRangeBonus,console.log(`[BackendStatsManager] Applied range: ${t} -> ${e.attackRange}`)}if(n.pickupRangeBonus){const t=e.pickupRange;e.pickupRange=50+n.pickupRangeBonus,console.log(`[BackendStatsManager] Applied pickup: ${t} -> ${e.pickupRange}`)}if(n.cooldownReduction&&e.fireRate){const t=e.fireRate;e.fireRate=e.fireRate*(1+n.cooldownReduction),console.log(`[BackendStatsManager] Applied fire rate: ${t} -> ${e.fireRate}`)}n.hpRegenBonus&&(e.hpRegenRate=n.hpRegenBonus,console.log(`[BackendStatsManager] Set HP regen rate: ${e.hpRegenRate}/sec`)),(null==(s=null==(t=e.scene)?void 0:t.playerAttackSystem)?void 0:s.updateStats)&&e.scene.playerAttackSystem.updateStats(),console.log("[BackendStatsManager] Backend upgrades applied successfully")}getBackendUpgrades(){return this.backendUpgrades||{}}isBackendUpgradesLoaded(){return this.isLoaded}};En(LC,"instance",null);let FC=LC;const OC={GOLD:{STARTING_AMOUNT:500,MIN_REWARD:2,MAX_REWARD:7},DIFFICULTY:{SCALING_INTERVAL:60,MAX_ENEMIES_BASE:30,MAX_ENEMIES_CAP:60,ENEMIES_PER_DIFFICULTY:3,SPAWN_DELAY_BASE:3e3,SPAWN_DELAY_MIN:100,SPAWN_DELAY_REDUCTION:300},VASES:{SPAWN_CHANCE:1,MAX_COUNT:500}},jC={maxHealth:{base:100,perLevel:20,baseCost:100,multiplier:1.5,maxLevel:15,name:"Max Health",description:"Increases maximum health"},baseDamage:{base:10,perLevel:2,baseCost:150,multiplier:1.6,maxLevel:15,name:"Base Damage",description:"Increases base damage output"},moveSpeed:{base:200,perLevel:15,baseCost:125,multiplier:1.4,maxLevel:12,name:"Movement Speed",description:"Increases movement speed"},attackSpeed:{base:1,perLevel:.1,baseCost:175,multiplier:1.7,maxLevel:10,name:"Attack Speed",description:"Increases attack frequency"},critChance:{base:5,perLevel:2,baseCost:200,multiplier:1.8,maxLevel:10,name:"Critical Chance",description:"Increases chance for critical hits"},critDamage:{base:150,perLevel:25,baseCost:250,multiplier:1.9,maxLevel:8,name:"Critical Damage",description:"Increases critical hit damage"},pickupRange:{base:50,perLevel:10,baseCost:120,multiplier:1.3,maxLevel:12,name:"Pickup Range",description:"Increases item collection range"},armor:{base:0,perLevel:2,baseCost:180,multiplier:1.6,maxLevel:10,name:"Armor",description:"Reduces incoming damage"},expMultiplier:{base:100,perLevel:10,baseCost:300,multiplier:2,maxLevel:8,name:"Experience Multiplier",description:"Increases experience gain"},goldMultiplier:{base:100,perLevel:20,baseCost:350,multiplier:2.2,maxLevel:8,name:"Gold Multiplier",description:"Increases gold gain"}},UC={zombie:{texture:"zombierun",baseHealth:30,baseDamage:10,baseSpeed:50,expValue:10,goldValue:5,spawnWeight:50,minWave:1,expDropChance:.8,goldDropChance:.4},zombieBig:{texture:"Zombie2RunAni",baseHealth:50,baseDamage:20,baseSpeed:40,expValue:20,goldValue:15,spawnWeight:25,minWave:1,expDropChance:.85,goldDropChance:.5},policeDroid:{texture:"Police run",baseHealth:35,baseDamage:15,baseSpeed:55,expValue:15,goldValue:10,spawnWeight:20,minWave:1,expDropChance:.82,goldDropChance:.45},assassin:{texture:"Dagger Bandit-Run",baseHealth:25,baseDamage:25,baseSpeed:70,expValue:25,goldValue:20,spawnWeight:15,minWave:2,expDropChance:.9,goldDropChance:.6},assassinTank:{texture:"assassinTank",baseHealth:80,baseDamage:30,baseSpeed:30,expValue:40,goldValue:35,spawnWeight:8,minWave:2,expDropChance:.95,goldDropChance:.75},assassinArcher:{texture:"assassinArcher",baseHealth:20,baseDamage:18,baseSpeed:45,expValue:30,goldValue:25,spawnWeight:12,minWave:2,expDropChance:.92,goldDropChance:.7},bigDude:{texture:"run_2",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},wreacker:{texture:"WreackerRun",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},choppor:{texture:"Warrior-Run",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},bomber:{texture:"Bomber_Activited_run_v01",baseHealth:10,baseDamage:42,baseSpeed:35,expValue:20,goldValue:15,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},crawler:{texture:"CrawlerRun",baseHealth:25,baseDamage:30,baseSpeed:60,expValue:40,goldValue:25,spawnWeight:12,minWave:4,expDropChance:.85,goldDropChance:.65},saber:{texture:"saber",baseHealth:40,baseDamage:35,baseSpeed:55,expValue:45,goldValue:30,spawnWeight:10,minWave:4,expDropChance:.88,goldDropChance:.7},guardian:{texture:"guardian",baseHealth:120,baseDamage:25,baseSpeed:25,expValue:60,goldValue:45,spawnWeight:6,minWave:5,expDropChance:.95,goldDropChance:.8},charger:{texture:"charger",baseHealth:60,baseDamage:40,baseSpeed:80,expValue:50,goldValue:35,spawnWeight:8,minWave:5,expDropChance:.9,goldDropChance:.75}},GC={SPAWN_SETTINGS:{INITIAL_SPAWN_DELAY:2e3,MIN_SPAWN_DELAY:800,MAX_SPAWN_DELAY:3e3,SPAWN_DELAY_REDUCTION_PER_WAVE:50,MAX_MOBS_BASE:20,MAX_MOBS_PER_WAVE:2,MAX_MOBS_CAP:50},WAVE_SETTINGS:{WAVE_DURATION:3e4,MOBS_PER_WAVE_BASE:10,MOBS_PER_WAVE_INCREASE:3,HEALTH_SCALING_PER_WAVE:.15,DAMAGE_SCALING_PER_WAVE:.1},TELEPORT_SETTINGS:{CHECK_INTERVAL:2e3,DISTANCE_THRESHOLD:600,SAFE_DISTANCE:150,EFFECT_DURATION:500,EFFECT_RADIUS:30,COLORS:{TELEPORT_OUT:16729156,TELEPORT_IN:4521796},EFFECT_DEPTH:100,MOB_FLASH_DURATION:300},ABILITIES:{COOLDOWNS:{CHARGE:5e3,BOMB:3e3,GUARD:8e3},RANGES:{CHARGE_DETECT:200,BOMB_EXPLODE:100,GUARD_BLOCK:50}}},HC={WORLD:{WIDTH:2560,HEIGHT:2560,BOUNDS:{MIN_X:0,MIN_Y:0,MAX_X:2560,MAX_Y:2560}},PORTAL:{ACTIVATION_INTERVAL:2e4,GLOW_RADIUS:60,OVERLAP_SIZE:100,TELEPORT_DELAY:500,COLORS:{ACTIVE_TINT:65280,ORIGINAL_TINT:16777215,GLOW_COLOR:65280},POSITIONS:[{x:72,y:57},{x:2482,y:57},{x:2482,y:2420},{x:72,y:2420}],AVAILABLE_SCENES:["MiniMapDarkForastScene","MiniMapBossFightScene","MiniMapBeachScene","MiniMapLavaScene"]},WAVE:{ADVANCE_TIMER:3e4,ENEMIES_PER_ADVANCE:10,INITIAL_WAVE:1,MAX_WAVE:100},PLAYER:{DEFAULTS:{health:100,maxHealth:100,damage:10,moveSpeed:100,fireRate:1,attackRange:80,level:1,experience:0,nextLevelExp:100},LEVEL_UP:{EXP_MULTIPLIER:1.2,BASE_EXP_REQUIREMENT:100},COMBAT:{EXP_PER_KILL:10,BASE_GOLD_REWARD:2,MAX_GOLD_REWARD:7}},BALANCE:OC,UPGRADES:jC,MOBS:UC,MOB_SYSTEM:GC,ASSETS:{PICKUPS:{EXP:"./assets/PickUp/Exp.png",HEALTH_POTION:"./assets/PickUp/Health_Potion_01.png"},EFFECTS:{FIRE_BALL:"./assets/Hero/AttackPatterns/fire_ball.png",FIRE_BLAST:"./assets/Hero/AttackPatterns/fire_blast.png",ICE_SHARD:"./assets/Hero/AttackPatterns/ice_shard.png"},SPRITESHEETS:{FIRE_BALL:{frameWidth:32,frameHeight:32},FIRE_BLAST:{frameWidth:48,frameHeight:48},ICE_SHARD:{frameWidth:32,frameHeight:32}}},DEBUG:{ENABLED:!1,CONTROLS:{TOGGLE_DEBUG:"D",TRIGGER_LEVEL_UP:"T",HEAL_PLAYER:"H",ADD_GOLD:"Y",MANUAL_ATTACK:"K"},AUTO_FEATURES:{LEVEL_UP_INTERVAL:5e3,AUTO_EXP_AMOUNT:25}},PERFORMANCE:{UPDATE_INTERVALS:{STATS:1e3,DIFFICULTY:3e4,CLEANUP:6e4},LIMITS:{MAX_PARTICLES:100,MAX_ENEMIES:60,MAX_PROJECTILES:50}},Utils:{getUpgradeConfig:e=>jC[e],getUpgradeCost:(e,t)=>{const s=jC[e];return s?Math.floor(s.baseCost*Math.pow(s.multiplier,t)):0},getUpgradeValue:(e,t)=>{const s=jC[e];return s?s.base+s.perLevel*t:0},isUpgradeMaxed:(e,t)=>{const s=jC[e];return!s||t>=s.maxLevel},getDifficultySpawnDelay:e=>{const{SPAWN_DELAY_BASE:t,SPAWN_DELAY_MIN:s,SPAWN_DELAY_REDUCTION:n}=OC.DIFFICULTY;return Math.max(s,t-(e-1)*n)},getDifficultyMaxEnemies:e=>{const{MAX_ENEMIES_BASE:t,MAX_ENEMIES_CAP:s,ENEMIES_PER_DIFFICULTY:n}=OC.DIFFICULTY;return Math.min(s,t+(e-1)*n)},getMobConfig:e=>UC[e],getAvailableMobsForWave:e=>Object.entries(UC).filter((([t,s])=>s.minWave<=e)),calculateMobStats:(e,t)=>{const s=UC[e];if(!s)return null;const n=1+(t-1)*GC.WAVE_SETTINGS.HEALTH_SCALING_PER_WAVE,a=1+(t-1)*GC.WAVE_SETTINGS.DAMAGE_SCALING_PER_WAVE;return{health:Math.floor(s.baseHealth*n),damage:Math.floor(s.baseDamage*a),speed:s.baseSpeed,expValue:s.expValue,goldValue:s.goldValue}},getWaveSpawnCount:e=>{const{MOBS_PER_WAVE_BASE:t,MOBS_PER_WAVE_INCREASE:s}=GC.WAVE_SETTINGS;return t+(e-1)*s},getSpawnDelay:e=>{const{INITIAL_SPAWN_DELAY:t,MIN_SPAWN_DELAY:s,SPAWN_DELAY_REDUCTION_PER_WAVE:n}=GC.SPAWN_SETTINGS;return Math.max(s,t-(e-1)*n)}}},zC=()=>({level:HC.PLAYER.DEFAULTS.level,experience:HC.PLAYER.DEFAULTS.experience,nextLevelExp:HC.PLAYER.DEFAULTS.nextLevelExp,maxHealth:HC.PLAYER.DEFAULTS.maxHealth,health:HC.PLAYER.DEFAULTS.health,damage:HC.PLAYER.DEFAULTS.damage,moveSpeed:HC.PLAYER.DEFAULTS.moveSpeed,fireRate:HC.PLAYER.DEFAULTS.fireRate,attackRange:HC.PLAYER.DEFAULTS.attackRange}),VC=()=>({gameTime:0,currentDifficulty:1,maxEnemies:HC.BALANCE.DIFFICULTY.MAX_ENEMIES_BASE,enemySpawnDelay:HC.BALANCE.DIFFICULTY.SPAWN_DELAY_BASE});class WC{constructor(e){this.gameManager=e}purchaseUpgrade(e,t){var s;if(!this.canPurchase(e,t))return!1;const n=HC.UPGRADES[e],a=((null==(s=this.gameManager.passiveUpgrades[e])?void 0:s.level)||0)+1,i=n.base+n.perLevel*a;return this.executeUpgrade(e,t,a,i),!0}canPurchase(e,t){var s;if(this.gameManager.gold<t)return!1;if(!HC.UPGRADES[e])return!1;const n=HC.UPGRADES[e];return((null==(s=this.gameManager.passiveUpgrades[e])?void 0:s.level)||0)<n.maxLevel}executeUpgrade(e,t,s,n){this.gameManager.gold-=t,this.gameManager.passiveUpgrades[e]={level:s,value:n},this.gameManager.saveGame(),this.gameManager.emitStateUpdate(),PC.emit("game-state-updated")}getUpgradeConfig(e){return HC.UPGRADES[e]}}class $C{constructor(e){this.gameManager=e}updateRunStats(e,t){if(this.gameManager.isGameRunning)switch(e){case"enemyKill":this.gameManager.currentRunStats.enemiesKilled++;break;case"experienceGained":this.gameManager.currentRunStats.experienceGained+=t;break;case"goldEarned":this.gameManager.currentRunStats.goldEarned+=t;break;case"damageDealt":this.gameManager.currentRunStats.damageDealt+=t;break;case"damageTaken":this.gameManager.currentRunStats.damageTaken+=t;break;case"levelReached":this.gameManager.currentRunStats.maxLevel=Math.max(this.gameManager.currentRunStats.maxLevel,t)}}updateAllTimeStats(e){const t=this.gameManager.allTimeStats;t.totalRuns++,t.totalGoldEarned+=e.goldEarned,t.totalEnemiesKilled+=e.enemiesKilled,t.totalExperienceGained+=e.experienceGained,t.totalDamageDealt+=e.damageDealt,e.maxLevel>t.highestLevel&&(t.highestLevel=e.maxLevel),e.survivalTime>t.longestSurvivalTime&&(t.longestSurvivalTime=e.survivalTime),t.averageSurvivalTime=Math.floor((t.longestSurvivalTime+e.survivalTime)/t.totalRuns)}}class qC{constructor(e){this.gameManager=e}applyStatsToPlayer(e){e?(this.applyBaseStats(e),this.applyLocalUpgrades(e),this.applyBackendUpgrades(e),this.updateInternalStats(e)):console.warn("PlayerStatsManager: No player provided")}applyBaseStats(e){const t=zC();Object.assign(e,t)}applyLocalUpgrades(e){const t=this.gameManager.passiveUpgrades;t&&0!==Object.keys(t).length&&Object.entries(t).forEach((([t,s])=>{this.applySingleUpgrade(e,t,s.value)}))}applySingleUpgrade(e,t,s){const n={maxHealth:()=>{e.maxHealth=s,e.health=s},baseDamage:()=>e.damage=s,moveSpeed:()=>e.moveSpeed=s,attackSpeed:()=>e.fireRate=s,armor:()=>e.armor=s,critChance:()=>e.critChance=s/100,critDamage:()=>e.critDamage=s/100,pickupRange:()=>e.pickupRange=s}[t];n&&n()}applyBackendUpgrades(e){const t=this.gameManager.backendStatsManager;if(t.isBackendUpgradesLoaded())try{t.applyBackendUpgradesToPlayer(e)}catch(s){console.warn("PlayerStatsManager: Backend upgrade application failed:",s)}else console.log("PlayerStatsManager: Backend upgrades not loaded yet")}updateInternalStats(e){const t=this.gameManager.playerStats;t.maxHealth=e.maxHealth,t.health=e.health,t.damage=e.damage,t.moveSpeed=e.moveSpeed,t.fireRate=e.fireRate,t.attackRange=e.attackRange}getPlayerStatsSummary(e){return{maxHealth:e.maxHealth,damage:e.damage,moveSpeed:e.moveSpeed,fireRate:e.fireRate,attackRange:e.attackRange}}}const KC=class e{constructor(){if(e.instance)return e.instance;e.instance=this,this.initializeCore(),this.initializeModules(),this.initializeState(),this.setupEventListeners(),this.loadBackendUpgradesAsync()}static get(){return e.instance||new e}initializeCore(){this.gold=HC.BALANCE.GOLD.STARTING_AMOUNT,this.passiveUpgrades={},this.isGameRunning=!1,this.gameStartTime=0,this.debugMode=HC.DEBUG.ENABLED,this.currentScene=null,this.loadingBackendUpgrades=!1,this.events=new Phaser.Events.EventEmitter,this.backendStatsManager=FC.getInstance()}initializeModules(){this.upgradeSystem=new WC(this),this.statsTracker=new $C(this),this.playerStatsManager=new qC(this)}initializeState(){this.playerStats=zC(),this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.lastRunStats=null,this.allTimeStats={totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.gameProgress=VC(),this.loadGame(),this.applyPassiveUpgrades()}setupEventListeners(){PC.on("upgrade-purchased",(()=>{this.loadBackendUpgradesAsync()}))}async loadBackendUpgradesAsync(){var e;if(!this.loadingBackendUpgrades){this.loadingBackendUpgrades=!0;try{await this.backendStatsManager.loadBackendUpgrades(),(null==(e=this.currentScene)?void 0:e.player)&&this.applyPlayerStats(this.currentScene.player)}catch(t){console.warn("GameManager: Backend upgrade loading failed:",t)}finally{this.loadingBackendUpgrades=!1}}}purchaseUpgrade(e,t){return this.upgradeSystem.purchaseUpgrade(e,t)}getUpgradeConfig(e){return this.upgradeSystem.getUpgradeConfig(e)}resetProgress(){return this.gold=0,this.passiveUpgrades={},this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.lastRunStats=null,this.allTimeStats={totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.playerStats=zC(),function(e=500){try{const t={gold:e,passiveUpgrades:{},allTimeStats:{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},gameStats:{totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,highestLevel:1,longestSurvivalTime:0},lastRunStats:null,savedAt:(new Date).toISOString(),version:"1.0"};return localStorage.setItem(AC,JSON.stringify(t)),console.log("Progress reset successfully with",e,"starting gold"),!0}catch(t){return console.error("Error resetting progress:",t),!1}}(0),this.emitStateUpdate(),!0}startNewRun(){this.isGameRunning=!0,this.gameStartTime=Date.now(),this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.playerStats=zC(),this.gameProgress=VC(),this.loadBackendUpgradesAsync(),this.applyPassiveUpgrades(),this.emitGoldUpdate()}handlePlayerDeath(e="Unknown"){if(!this.isGameRunning)return;this.isGameRunning=!1;const t=Math.floor((Date.now()-this.gameStartTime)/1e3);this.finalizeRun(t,e),this.saveGame(),this.emitDeathEvents()}finalizeRun(e,t){this.currentRunStats.survivalTime=e,this.currentRunStats.causeOfDeath=t,this.lastRunStats={...this.currentRunStats},this.statsTracker.updateAllTimeStats(this.currentRunStats)}emitDeathEvents(){PC.emit("player-died",this.lastRunStats),window.dispatchEvent(new CustomEvent("playerDeath",{detail:this.lastRunStats}))}applyPlayerStats(e){this.playerStatsManager.applyStatsToPlayer(e)}applyPassiveUpgrades(){Object.entries(this.passiveUpgrades).forEach((([e,t])=>{this.playerStatsManager.applySingleUpgrade(this.playerStats,e,t.value)}))}addExperience(e){const t=this.getMultiplier("expMultiplier"),s=Math.floor(e*t);return this.playerStats.experience+=s,this.statsTracker.updateRunStats("experienceGained",s),this.playerStats.experience>=this.playerStats.nextLevelExp?(this.levelUp(),!0):(this.events.emit("experienceUpdated",this.playerStats.experience,this.playerStats.nextLevelExp),!1)}levelUp(){this.playerStats.level++,this.statsTracker.updateRunStats("levelReached",this.playerStats.level);const e=this.playerStats.experience-this.playerStats.nextLevelExp;this.playerStats.nextLevelExp=Math.floor(this.playerStats.nextLevelExp*HC.PLAYER.LEVEL_UP.EXP_MULTIPLIER),this.playerStats.experience=e,this.events.emit("levelUp",this.playerStats.level)}addGold(e){const t=this.getMultiplier("goldMultiplier"),s=Math.floor(e*t);this.gold+=s,this.statsTracker.updateRunStats("goldEarned",s),this.emitGoldUpdate(s),this.updateUI()}emitGoldUpdate(e=0){const t={gold:this.gold,goldEarned:e,totalGold:this.gold,currentGold:this.gold};PC.emit("player-gold-updated",t),PC.emit("player-stats-updated",t),window.dispatchEvent(new CustomEvent("playerGoldUpdated",{detail:t}))}updateUI(){var e;(null==(e=this.currentScene)?void 0:e.uiManager)&&this.currentScene.uiManager.updateScoreboard()}getGold(){return this.gold}addEnemyKill(){this.statsTracker.updateRunStats("enemyKill")}addDamageDealt(e){this.statsTracker.updateRunStats("damageDealt",e)}trackEnemyKill(){this.statsTracker.updateRunStats("enemyKill"),console.log(`Enemy killed, total: ${this.currentRunStats.enemiesKilled}`)}updateDifficulty(e){this.gameProgress.gameTime+=e/1e3;const t=1+Math.floor(this.gameProgress.gameTime/HC.BALANCE.DIFFICULTY.SCALING_INTERVAL);t!==this.gameProgress.currentDifficulty&&(this.gameProgress.currentDifficulty=t,this.updateDifficultyParameters(t),this.events.emit("difficultyUpdated",t))}updateDifficultyParameters(e){this.gameProgress.maxEnemies=HC.Utils.getDifficultyMaxEnemies(e),this.gameProgress.enemySpawnDelay=HC.Utils.getDifficultySpawnDelay(e)}getMultiplier(e){return this.passiveUpgrades[e]?this.passiveUpgrades[e].value/100:1}getCurrentSurvivalTime(){return this.isGameRunning?Math.floor((Date.now()-this.gameStartTime)/1e3):0}formatTime(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}toggleDebugMode(){return this.debugMode=!this.debugMode,this.debugMode}emitStateUpdate(){window.dispatchEvent(new CustomEvent("gameStateUpdated",{detail:{gold:this.gold,passiveUpgrades:this.passiveUpgrades,allTimeStats:this.allTimeStats,lastRunStats:this.lastRunStats,currentRunStats:this.currentRunStats}}))}saveGame(){EC({gold:this.gold,passiveUpgrades:this.passiveUpgrades,allTimeStats:this.allTimeStats,lastRunStats:this.lastRunStats})}loadGame(){const e=SC();e&&(this.gold=e.gold||HC.BALANCE.GOLD.STARTING_AMOUNT,this.passiveUpgrades=e.passiveUpgrades||{},this.allTimeStats=e.allTimeStats||{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.lastRunStats=e.lastRunStats||null)}setCurrentScene(e){this.currentScene=e}};En(KC,"instance",null);let QC=KC;const ZC=ya.createContext(),XC=()=>{const e=ya.useContext(ZC);if(!e)throw new Error("useGame must be used within a GameProvider");return e},YC=({children:e})=>{const[t]=ya.useState((()=>new QC));console.log("gameManager",t);const[s,n]=ya.useState(!1),[a,i]=ya.useState(null);ya.useEffect((()=>{const e=()=>{var e,s;const n=(null==(s=null==(e=window.game)?void 0:e.registry)?void 0:s.get("gameManager"))||null;n&&!t&&(console.log("GameManager found and initialized"),setGameManager(n),r(n))};e();const s=setInterval(e,1e3);return()=>clearInterval(s)}),[t]);const r=e=>{try{const t=SC();t&&e&&(e.gold=t.gold||500,e.passiveUpgrades={...t.passiveUpgrades||{}},e.allTimeStats={...t.allTimeStats||{}},console.log("Saved data loaded into GameManager"))}catch(t){console.error("Error loading saved data:",t)}},o=()=>{if(t)try{t.saveGame&&t.saveGame(),EC({gold:t.gold||0,passiveUpgrades:t.passiveUpgrades||{},allTimeStats:t.allTimeStats||{}}),console.log("Game data saved")}catch(e){console.error("Error saving game data:",e)}},l=()=>{if(a)return a;let e=document.getElementById("phaser-game-container");if(!e){e=document.createElement("div"),e.id="phaser-game-container",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="1",document.body.appendChild(e);const t=document.querySelector("canvas");t&&t.parentNode!==e&&(e.appendChild(t),console.log("Canvas moved to game container"))}return i(e),e},c=()=>{try{window.game.scene.getScenes(!0).forEach((e=>{"MainMapScene"!==e.scene.key&&window.game.scene.pause(e.scene.key)})),console.log("All scenes cleaned up")}catch(e){console.error("Error cleaning up scenes:",e)}},h={gameManager:t,isGameInitialized:s,startGameScene:()=>{var e;if(!(null==(e=window.game)?void 0:e.scene))return console.error("Game or scene manager not available!"),!1;try{return(null==t?void 0:t.applyPassiveUpgrades)&&t.applyPassiveUpgrades(),o(),l(),c(),window.game.scene.getScene("MainMapScene")?(window.game.scene.stop("MainMapScene"),setTimeout((()=>{window.game.scene.start("MainMapScene"),console.log("MainMapScene started fresh")}),100),!0):(console.error("MainMapScene not found!"),!1)}catch(s){return console.error("Error starting game scene:",s),!1}},stopGame:()=>{try{o(),c(),console.log("Game stopped and cleaned up")}catch(e){console.error("Error stopping game:",e)}},saveGameData:o,initializeGameContainer:l};return Pa.jsx(ZC.Provider,{value:h,children:e})},JC=({onStartGame:e})=>{const[t,s]=ya.useState(3),[n,a]=ya.useState(0);return ya.useEffect((()=>{const t=setInterval((()=>{a((e=>{if(e>=100)return clearInterval(t),100;const s=1.3*Math.random()+.2;return Math.min(e+s,100)}))}),16),n=setInterval((()=>{s((t=>t<=1?(clearInterval(n),e&&e(),0):t-1))}),1e3);return()=>{clearInterval(n),clearInterval(t)}}),[e]),Pa.jsx("div",{className:"w-screen h-screen flex justify-center items-center bg-dark-secondary",children:Pa.jsxs("div",{className:"relative",children:[Pa.jsxs("div",{className:"relative p-10 h-132 w-162",children:[Pa.jsx("img",{src:"LogoBlack.svg",alt:"Game Logo",className:"absolute inset-0 w-full h-full object-contain"}),Pa.jsx("div",{className:"absolute inset-0 overflow-hidden transition-all duration-75 ease-linear",style:{clipPath:`polygon(0% ${100-n}%, 100% ${100-n}%, 100% 100%, 0% 100%)`},children:Pa.jsx("img",{src:"LogoColor.svg",alt:"Game Logo",className:"w-full h-full object-contain"})})]}),Pa.jsx("div",{className:"text-center mt-4",children:Pa.jsxs("div",{className:"text-white text-lg font-semibold",children:["Loading... ",Math.round(n),"%"]})})]})})},eM=({onStartGame:e})=>{const{gameManager:t}=XC();return Pa.jsx(JC,{gameManager:t,onStartGame:()=>{console.log("Starting game from MainMenu"),t&&t.startNewRun&&console.log("GameManager ready for new run"),e&&e()}})},tM=({size:e})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pa.jsxs("g",{clipPath:"url(#clip0_17780_125)",children:[Pa.jsx("path",{d:"M8.33337 10.833H1.66671V11.6663H0.833374V18.333H1.66671V19.1663H8.33337V18.333H9.16671V11.6663H8.33337V10.833ZM7.50004 17.4997H2.50004V12.4997H7.50004V17.4997Z",fill:"white"}),Pa.jsx("path",{d:"M8.33337 1.66634V0.833008H1.66671V1.66634H0.833374V8.33301H1.66671V9.16634H8.33337V8.33301H9.16671V1.66634H8.33337ZM2.50004 7.49967V2.49967H7.50004V7.49967H2.50004Z",fill:"white"}),Pa.jsx("path",{d:"M18.3334 10.833H11.6667V11.6663H10.8334V18.333H11.6667V19.1663H18.3334V18.333H19.1667V11.6663H18.3334V10.833ZM17.5 17.4997H12.5V12.4997H17.5V17.4997Z",fill:"white"}),Pa.jsx("path",{d:"M18.3334 1.66634V0.833008H11.6667V1.66634H10.8334V8.33301H11.6667V9.16634H18.3334V8.33301H19.1667V1.66634H18.3334ZM17.5 7.49967H12.5V2.49967H17.5V7.49967Z",fill:"white"})]}),Pa.jsx("defs",{children:Pa.jsx("clipPath",{id:"clip0_17780_125",children:Pa.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),sM=({size:e})=>Pa.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:Pa.jsx("path",{d:"M19.1667 4.16699V11.667H18.3334V10.8337H17.5V10.0003H16.6667V9.16699H15V10.0003H14.1667V10.8337H13.3334V11.667H12.5V12.5003H11.6667V13.3337H10.8334V14.167H10V15.0003H8.33337V14.167H7.50004V13.3337H6.66671V12.5003H5.83337V11.667H4.16671V12.5003H3.33337V13.3337H2.50004V14.167H0.833374V12.5003H1.66671V11.667H2.50004V10.8337H3.33337V10.0003H4.16671V9.16699H5.83337V10.0003H6.66671V10.8337H7.50004V11.667H8.33337V12.5003H10V11.667H10.8334V10.8337H11.6667V10.0003H12.5V9.16699H13.3334V8.33366H14.1667V6.66699H13.3334V5.83366H12.5V5.00033H11.6667V4.16699H19.1667Z",fill:"white"})}),nM=({size:e})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",children:[Pa.jsx("path",{d:"M23 18H9V19H23V18Z",fill:"white"}),Pa.jsx("path",{d:"M23 12H9V13H23V12Z",fill:"white"}),Pa.jsx("path",{d:"M23 6H9V7H23V6Z",fill:"white"}),Pa.jsx("path",{d:"M7 15H8V17H7V18H6V19H5V20H4V21H3V20H2V19H1V17H2V18H3V19H4V18H5V17H6V16H7V15Z",fill:"white"}),Pa.jsx("path",{d:"M8 9V11H7V12H6V13H5V14H4V15H3V14H2V13H1V11H2V12H3V13H4V12H5V11H6V10H7V9H8Z",fill:"white"}),Pa.jsx("path",{d:"M8 3V5H7V6H6V7H5V8H4V9H3V8H2V7H1V5H2V6H3V7H4V6H5V5H6V4H7V3H8Z",fill:"white"})]}),aM=({size:e})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pa.jsx("g",{"clip-path":"url(#clip0_17795_142)",children:Pa.jsx("path",{d:"M18.3334 4.99967V3.33301H17.5V2.49967H16.6667V1.66634H15.8334V0.833008H4.16671V1.66634H3.33337V2.49967H2.50004V3.33301H1.66671V4.99967H0.833374V18.333H1.66671V19.1663H18.3334V18.333H19.1667V4.99967H18.3334ZM10.8334 2.49967H15V3.33301H15.8334V4.16634H16.6667V5.83301H10.8334V2.49967ZM3.33337 4.16634H4.16671V3.33301H5.00004V2.49967H9.16671V5.83301H3.33337V4.16634ZM2.50004 17.4997V7.49967H9.16671V9.16634H7.50004V12.4997H8.33337V13.333H10.8334V14.1663H7.50004V15.833H9.16671V17.4997H2.50004ZM17.5 17.4997H10.8334V15.833H12.5V12.4997H11.6667V11.6663H9.16671V10.833H12.5V9.16634H10.8334V7.49967H17.5V17.4997Z",fill:"white"})}),Pa.jsx("defs",{children:Pa.jsx("clipPath",{id:"clip0_17795_142",children:Pa.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),iM=({size:e})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pa.jsx("path",{d:"M15 4.99967V7.49967H14.1666V8.33301H13.3333V9.16634H12.5V9.99967H11.6666V10.833H10.8333V11.6663H9.99996V10.833H9.16663V9.99967H8.33329V9.16634H7.49996V8.33301H6.66663V7.49967H5.83329V4.99967H6.66663V4.16634H9.16663V4.99967H9.99996V5.83301H10.8333V4.99967H11.6666V4.16634H14.1666V4.99967H15Z",fill:"white"}),Pa.jsx("path",{d:"M16.6666 14.1663H17.5V13.333H18.3333V1.66634H17.5V0.833008H3.33329V1.66634H2.49996V2.49967H1.66663V17.4997H2.49996V18.333H3.33329V19.1663H17.5V18.333H18.3333V17.4997H17.5V16.6663H16.6666V14.1663ZM15 17.4997H4.16663V16.6663H3.33329V14.9997H4.16663V14.1663H15V17.4997ZM3.33329 2.49967H16.6666V12.4997H3.33329V2.49967Z",fill:"white"})]}),rM=({size:e})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pa.jsx("path",{d:"M14.1666 4.16634V2.49967H13.3333V1.66634H11.6666V0.833008H8.33329V1.66634H6.66663V2.49967H5.83329V4.16634H4.99996V7.49967H5.83329V9.16634H6.66663V9.99967H8.33329V10.833H11.6666V9.99967H13.3333V9.16634H14.1666V7.49967H15V4.16634H14.1666ZM12.5 7.49967V8.33301H11.6666V9.16634H8.33329V8.33301H7.49996V7.49967H6.66663V4.16634H7.49996V3.33301H8.33329V2.49967H11.6666V3.33301H12.5V4.16634H13.3333V7.49967H12.5Z",fill:"white"}),Pa.jsx("path",{d:"M17.5 15.833V14.9997H16.6666V14.1663H15.8333V13.333H14.1666V12.4997H5.83329V13.333H4.16663V14.1663H3.33329V14.9997H2.49996V15.833H1.66663V18.333H2.49996V19.1663H17.5V18.333H18.3333V15.833H17.5ZM4.16663 15.833V14.9997H5.83329V14.1663H14.1666V14.9997H15.8333V15.833H16.6666V17.4997H3.33329V15.833H4.16663Z",fill:"white"})]}),oM=({size:e,color:t})=>Pa.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pa.jsx("path",{d:"M13.333 14.1663L12.1413 12.9746L14.283 10.833H7.49967V9.16634H14.283L12.1413 7.02467L13.333 5.83301L17.4997 9.99967L13.333 14.1663Z",fill:t}),Pa.jsx("path",{d:"M15.833 2.49967H4.16634C3.24967 2.49967 2.49967 3.24967 2.49967 4.16634V7.49967H4.16634V4.16634H15.833V15.833H4.16634V12.4997H2.49967V15.833C2.49967 16.7497 3.24967 17.4997 4.16634 17.4997H15.833C16.7497 17.4997 17.4997 16.7497 17.4997 15.833V4.16634C17.4997 3.24967 16.7497 2.49967 15.833 2.49967Z",fill:t})]}),lM=({size:e})=>Pa.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:Pa.jsx("path",{d:"M17.5001 9.16634V8.33301H16.6667V7.49967H15.0001V6.66634H13.3334V5.83301H12.5001V4.99967H10.8334V4.16634H9.16675V3.33301H8.33342V2.49967H6.66675V1.66634H5.00008V0.833008H2.50008V1.66634H1.66675V18.333H2.50008V19.1663H5.00008V18.333H6.66675V17.4997H8.33342V16.6663H9.16675V15.833H10.8334V14.9997H12.5001V14.1663H13.3334V13.333H15.0001V12.4997H16.6667V11.6663H17.5001V10.833H18.3334V9.16634H17.5001ZM15.8334 10.833H14.1667V11.6663H12.5001V12.4997H11.6667V13.333H10.0001V14.1663H8.33342V14.9997H7.50008V15.833H5.83342V16.6663H4.16675V17.4997H3.33341V2.49967H4.16675V3.33301H5.83342V4.16634H7.50008V4.99967H8.33342V5.83301H10.0001V6.66634H11.6667V7.49967H12.5001V8.33301H14.1667V9.16634H15.8334V10.833Z",fill:"white"})}),cM=()=>{const e=Mg(),t=_g(),{logout:s,user:n}=Zv(),{gameControls:a}=Yv(),[i,r]=ya.useState(!1),o=t=>e.pathname===t?"active":"",l=e.pathname.startsWith("/game");return Pa.jsxs("div",{className:"min-h-screen text-white flex",children:[Pa.jsx("nav",{className:"bg-dark-primary border-r-2 pb-4  border-r-dark-tertiary w-64 h-screen relative overflow-hidden",children:Pa.jsxs("div",{className:"p-4 flex flex-col",children:[Pa.jsxs("div",{className:"mb-16 flex flex-col gap-3 justify-center items-center",children:[Pa.jsx("img",{src:"/logo.svg",alt:"Logo",draggable:"false"}),Pa.jsx("p",{className:"text-heading-1-alagard",children:"Insomnus"})]}),Pa.jsxs("div",{className:" gap-5 flex flex-col",children:[Pa.jsx("div",{className:"",children:Pa.jsxs("button",{onClick:()=>{l&&"playing"===(null==a?void 0:a.gameState)&&(null==a?void 0:a.returnToMenu)?a.returnToMenu():l&&(null==a?void 0:a.startGame)?a.startGame():t("/game")},className:"w-full flex gap-4 px-6 py-3 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded transition-colors shadow-lg",children:[Pa.jsx(lM,{size:20}),l&&"playing"===(null==a?void 0:a.gameState)?"🏠 Return to Menu":"Start Game"]})}),Pa.jsxs(gy,{to:"/",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(tM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Dashboard"})]}),Pa.jsxs(gy,{to:"/leaderboard",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/leaderboard")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(sM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Leaderboard"})]}),Pa.jsxs(gy,{to:"/quest",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/quest")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(nM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Quest"})]}),Pa.jsxs(gy,{to:"/market",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/market")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(aM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Market"})]}),Pa.jsxs(gy,{to:"/guide",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/guide")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(iM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Guide"})]}),Pa.jsxs(gy,{to:"/account",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/account")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pa.jsx(rM,{size:20}),Pa.jsx("p",{className:"text-button-48-pixelify",children:"Account"})]})]}),Pa.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:Pa.jsxs("div",{className:"relative",children:[i&&Pa.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-dark-secondary border border-dark-tertiary rounded-lg shadow-lg z-50",children:Pa.jsx("div",{className:"py-1",children:Pa.jsxs("button",{onClick:()=>{s(),t("/login"),r(!1)},className:"w-full flex items-center gap-3 px-6 py-3 text-sm font-medium text-light-primary hover:bg-translucent-light-8 transition-colors",children:[Pa.jsx(oM,{size:20,color:"#CC1508"}),Pa.jsx("span",{className:"text-button-48-pixelify text-[#CC1508]",children:"Logout"})]})})}),Pa.jsxs("button",{onClick:()=>r(!i),className:"w-full flex gap-3 p-2 items-center outline-none mb-10 bg-translucent-light-8 border-none text-sm font-medium transition-colors text-light-primary hover:bg-translucent-light-8",children:[Pa.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:Pa.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pa.jsxs("p",{className:"text-button-16-pixelify",children:[n.walletAddress.slice(0,4),"...",n.walletAddress.slice(-4)]})]})]})})]})}),Pa.jsx("div",{className:"flex-1 flex flex-col h-screen bg-dark-primary overflow-hidden",children:Pa.jsx($g,{})})]})},hM=({title:e,value:t,onClick:s,disabled:n=!1})=>Pa.jsxs("div",{className:"relative p-4 gap-2 flex flex-col justify-center items-center bg-[#24110F] border-4 border-[#46110D] flex-1 w-full",children:[Pa.jsx("p",{className:"text-light-secondary",children:e}),Pa.jsx("p",{className:"text-heading-4-alagard",children:t})]}),uM=({title:e,value:t,progress:s,description:n,onUpgrade:a,isMaxed:i,upgradeId:r,upgradeCost:o,isLoading:l=!1})=>Pa.jsxs("div",{className:"relative p-8 flex w-full h-[160px] bg-dark-secondary outline-4 outline-[#46110D]",children:[Pa.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute top-0 left-0 w-6 h-6 pointer-events-none scale-y-[-1] scale-x-[-1]"}),Pa.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute top-0 right-0 w-6 h-6 pointer-events-none scale-y-[-1]"}),Pa.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute bottom-0 right-0 w-6 h-6 pointer-events-none"}),Pa.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute bottom-0 left-0 w-6 h-6 pointer-events-none scale-x-[-1]"}),Pa.jsxs("div",{className:"relative z-10 flex flex-col justify-center items-center w-full h-full gap-3",children:[Pa.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[Pa.jsx("p",{className:"text-body-2-pixelify text-center text-[#ffae0b]",children:e}),Pa.jsx("p",{className:"text-heading-4-alagard",children:t}),s&&Pa.jsx("p",{className:"text-xs text-gray-400",children:s})]}),a&&Pa.jsx("button",{onClick:()=>a(r),disabled:i||l,className:"mt-2 px-4 py-2 text-sm font-bold rounded flex items-center gap-2 "+(i||l?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700 text-white"),children:l?Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-white"}),"UPGRADING..."]}):i?"MAXED":`UPGRADE (${o||0} gold)`})]})]});var dM=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pM="undefined"==typeof window||"Deno"in globalThis;function fM(){}function mM(e){return"number"==typeof e&&e>=0&&e!==1/0}function gM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yM(e,t){return"function"==typeof e?e(t):e}function bM(e,t){return"function"==typeof e?e(t):e}function vM(e,t){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:r,stale:o}=e;if(r)if(n){if(t.queryHash!==xM(r,t.options))return!1}else if(!AM(t.queryKey,r))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return!("boolean"==typeof o&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function wM(e,t){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(kM(t.options.mutationKey)!==kM(i))return!1}else if(!AM(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function xM(e,t){return((null==t?void 0:t.queryKeyHashFn)||kM)(e)}function kM(e){return JSON.stringify(e,((e,t)=>TM(t)?Object.keys(t).sort().reduce(((e,s)=>(e[s]=t[s],e)),{}):t))}function AM(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((s=>AM(e[s],t[s])))}function EM(e,t){if(e===t)return e;const s=PM(e)&&PM(t);if(s||TM(e)&&TM(t)){const n=s?e:Object.keys(e),a=n.length,i=s?t:Object.keys(t),r=i.length,o=s?[]:{};let l=0;for(let c=0;c<r;c++){const a=s?c:i[c];(!s&&n.includes(a)||s)&&void 0===e[a]&&void 0===t[a]?(o[a]=void 0,l++):(o[a]=EM(e[a],t[a]),o[a]===e[a]&&void 0!==e[a]&&l++)}return a===r&&l===a?e:o}return t}function SM(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function PM(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function TM(e){if(!BM(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!BM(s)&&!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function BM(e){return"[object Object]"===Object.prototype.toString.call(e)}function CM(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?EM(e,t):t}function MM(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function RM(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var IM=Symbol();function _M(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==IM?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var DM=new(ns=class extends dM{constructor(){super(),Tn(this,es),Tn(this,ts),Tn(this,ss),Bn(this,ss,(e=>{if(!pM&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}))}onSubscribe(){Pn(this,ts)||this.setEventListener(Pn(this,ss))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Pn(this,ts))||e.call(this),Bn(this,ts,void 0))}setEventListener(e){var t;Bn(this,ss,e),null==(t=Pn(this,ts))||t.call(this),Bn(this,ts,e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})))}setFocused(e){Pn(this,es)!==e&&(Bn(this,es,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){var e;return"boolean"==typeof Pn(this,es)?Pn(this,es):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},es=new WeakMap,ts=new WeakMap,ss=new WeakMap,ns),NM=new(os=class extends dM{constructor(){super(),Tn(this,as,!0),Tn(this,is),Tn(this,rs),Bn(this,rs,(e=>{if(!pM&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}))}onSubscribe(){Pn(this,is)||this.setEventListener(Pn(this,rs))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Pn(this,is))||e.call(this),Bn(this,is,void 0))}setEventListener(e){var t;Bn(this,rs,e),null==(t=Pn(this,is))||t.call(this),Bn(this,is,e(this.setOnline.bind(this)))}setOnline(e){Pn(this,as)!==e&&(Bn(this,as,e),this.listeners.forEach((t=>{t(e)})))}isOnline(){return Pn(this,as)}},as=new WeakMap,is=new WeakMap,rs=new WeakMap,os);function LM(){let e,t;const s=new Promise(((s,n)=>{e=s,t=n}));function n(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch((()=>{})),s.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},s.reject=e=>{n({status:"rejected",reason:e}),t(e)},s}function FM(e){return Math.min(1e3*2**e,3e4)}function OM(e){return"online"!==(e??"online")||NM.isOnline()}var jM=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function UM(e){return e instanceof jM}function GM(e){let t,s=!1,n=0,a=!1;const i=LM(),r=()=>DM.isFocused()&&("always"===e.networkMode||NM.isOnline())&&e.canRun(),o=()=>OM(e.networkMode)&&e.canRun(),l=s=>{var n;a||(a=!0,null==(n=e.onSuccess)||n.call(e,s),null==t||t(),i.resolve(s))},c=s=>{var n;a||(a=!0,null==(n=e.onError)||n.call(e,s),null==t||t(),i.reject(s))},h=()=>new Promise((s=>{var n;t=e=>{(a||r())&&s(e)},null==(n=e.onPause)||n.call(e)})).then((()=>{var s;t=void 0,a||null==(s=e.onContinue)||s.call(e)})),u=()=>{if(a)return;let t;const i=0===n?e.initialPromise:void 0;try{t=i??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch((t=>{var i;if(a)return;const o=e.retry??(pM?0:3),l=e.retryDelay??FM,d="function"==typeof l?l(n,t):l,p=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var f;!s&&p?(n++,null==(i=e.onFail)||i.call(e,n,t),(f=d,new Promise((e=>{setTimeout(e,f)}))).then((()=>r()?void 0:h())).then((()=>{s?c(t):u()}))):c(t)}))};return{promise:i,cancel:t=>{var s;a||(c(new jM(t)),null==(s=e.abort)||s.call(e))},continue:()=>(null==t||t(),i),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():h().then(u),i)}}var HM=e=>setTimeout(e,0),zM=function(){let e=[],t=0,s=e=>{e()},n=e=>{e()},a=HM;const i=n=>{t?e.push(n):a((()=>{s(n)}))};return{batch:i=>{let r;t++;try{r=i()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a((()=>{n((()=>{t.forEach((e=>{s(e)}))}))}))})()}return r},batchCalls:e=>(...t)=>{i((()=>{e(...t)}))},schedule:i,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{a=e}}}(),VM=(cs=class{constructor(){Tn(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mM(this.gcTime)&&Bn(this,ls,setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pM?1/0:3e5))}clearGcTimeout(){Pn(this,ls)&&(clearTimeout(Pn(this,ls)),Bn(this,ls,void 0))}},ls=new WeakMap,cs),WM=(vs=class extends VM{constructor(e){super(),Tn(this,ys),Tn(this,hs),Tn(this,us),Tn(this,ds),Tn(this,ps),Tn(this,fs),Tn(this,ms),Tn(this,gs),Bn(this,gs,!1),Bn(this,ms,e.defaultOptions),this.setOptions(e.options),this.observers=[],Bn(this,ps,e.client),Bn(this,ds,Pn(this,ps).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Bn(this,hs,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,n=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??Pn(this,hs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=Pn(this,fs))?void 0:e.promise}setOptions(e){this.options={...Pn(this,ms),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Pn(this,ds).remove(this)}setData(e,t){const s=CM(this.state.data,e,this.options);return Cn(this,ys,bs).call(this,{data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),s}setState(e,t){Cn(this,ys,bs).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const n=null==(t=Pn(this,fs))?void 0:t.promise;return null==(s=Pn(this,fs))||s.cancel(e),n?n.then(fM).catch(fM):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Pn(this,hs))}isActive(){return this.observers.some((e=>!1!==bM(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===IM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!gM(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));null==t||t.refetch({cancelRefetch:!1}),null==(e=Pn(this,fs))||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));null==t||t.refetch({cancelRefetch:!1}),null==(e=Pn(this,fs))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Pn(this,ds).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(Pn(this,fs)&&(Pn(this,gs)?Pn(this,fs).cancel({revert:!0}):Pn(this,fs).cancelRetry()),this.scheduleGc()),Pn(this,ds).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Cn(this,ys,bs).call(this,{type:"invalidate"})}fetch(e,t){var s,n,a;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(Pn(this,fs))return Pn(this,fs).continueRetry(),Pn(this,fs).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const i=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Bn(this,gs,!0),i.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Pn(this,ps),state:this.state,fetchFn:()=>{const e=_M(this.options,t),s={client:Pn(this,ps),queryKey:this.queryKey,meta:this.meta};return r(s),Bn(this,gs,!1),this.options.persister?this.options.persister(e,s,this):e(s)}};r(o),null==(s=this.options.behavior)||s.onFetch(o,this),Bn(this,us,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(n=o.fetchOptions)?void 0:n.meta)||Cn(this,ys,bs).call(this,{type:"fetch",meta:null==(a=o.fetchOptions)?void 0:a.meta});const l=e=>{var t,s,n,a;UM(e)&&e.silent||Cn(this,ys,bs).call(this,{type:"error",error:e}),UM(e)||(null==(s=(t=Pn(this,ds).config).onError)||s.call(t,e,this),null==(a=(n=Pn(this,ds).config).onSettled)||a.call(n,this.state.data,e,this)),this.scheduleGc()};return Bn(this,fs,GM({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:e=>{var t,s,n,a;if(void 0!==e){try{this.setData(e)}catch(i){return void l(i)}null==(s=(t=Pn(this,ds).config).onSuccess)||s.call(t,e,this),null==(a=(n=Pn(this,ds).config).onSettled)||a.call(n,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{Cn(this,ys,bs).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Cn(this,ys,bs).call(this,{type:"pause"})},onContinue:()=>{Cn(this,ys,bs).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Pn(this,fs).start()}},hs=new WeakMap,us=new WeakMap,ds=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ys=new WeakSet,bs=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...$M(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return UM(s)&&s.revert&&Pn(this,us)?{...Pn(this,us),fetchStatus:"idle"}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),zM.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),Pn(this,ds).notify({query:this,type:"updated",action:e})}))},vs);function $M(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OM(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var qM=(xs=class extends dM{constructor(e={}){super(),Tn(this,ws),this.config=e,Bn(this,ws,new Map)}build(e,t,s){const n=t.queryKey,a=t.queryHash??xM(n,t);let i=this.get(a);return i||(i=new WM({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){Pn(this,ws).has(e.queryHash)||(Pn(this,ws).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Pn(this,ws).get(e.queryHash);t&&(e.destroy(),t===e&&Pn(this,ws).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zM.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return Pn(this,ws).get(e)}getAll(){return[...Pn(this,ws).values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>vM(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>vM(e,t))):t}notify(e){zM.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){zM.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){zM.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},ws=new WeakMap,xs),KM=(Ts=class extends VM{constructor(e){super(),Tn(this,Ss),Tn(this,ks),Tn(this,As),Tn(this,Es),this.mutationId=e.mutationId,Bn(this,As,e.mutationCache),Bn(this,ks,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Pn(this,ks).includes(e)||(Pn(this,ks).push(e),this.clearGcTimeout(),Pn(this,As).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Bn(this,ks,Pn(this,ks).filter((t=>t!==e))),this.scheduleGc(),Pn(this,As).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Pn(this,ks).length||("pending"===this.state.status?this.scheduleGc():Pn(this,As).remove(this))}continue(){var e;return(null==(e=Pn(this,Es))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,s,n,a,i,r,o,l,c,h,u,d,p,f,m,g,y,b,v,w;const x=()=>{Cn(this,Ss,Ps).call(this,{type:"continue"})};Bn(this,Es,GM({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Cn(this,Ss,Ps).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Cn(this,Ss,Ps).call(this,{type:"pause"})},onContinue:x,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Pn(this,As).canRun(this)}));const k="pending"===this.state.status,A=!Pn(this,Es).canStart();try{if(k)x();else{Cn(this,Ss,Ps).call(this,{type:"pending",variables:e,isPaused:A}),await(null==(s=(t=Pn(this,As).config).onMutate)?void 0:s.call(t,e,this));const i=await(null==(a=(n=this.options).onMutate)?void 0:a.call(n,e));i!==this.state.context&&Cn(this,Ss,Ps).call(this,{type:"pending",context:i,variables:e,isPaused:A})}const p=await Pn(this,Es).start();return await(null==(r=(i=Pn(this,As).config).onSuccess)?void 0:r.call(i,p,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,p,e,this.state.context)),await(null==(h=(c=Pn(this,As).config).onSettled)?void 0:h.call(c,p,null,this.state.variables,this.state.context,this)),await(null==(d=(u=this.options).onSettled)?void 0:d.call(u,p,null,e,this.state.context)),Cn(this,Ss,Ps).call(this,{type:"success",data:p}),p}catch(E){try{throw await(null==(f=(p=Pn(this,As).config).onError)?void 0:f.call(p,E,e,this.state.context,this)),await(null==(g=(m=this.options).onError)?void 0:g.call(m,E,e,this.state.context)),await(null==(b=(y=Pn(this,As).config).onSettled)?void 0:b.call(y,void 0,E,this.state.variables,this.state.context,this)),await(null==(w=(v=this.options).onSettled)?void 0:w.call(v,void 0,E,e,this.state.context)),E}finally{Cn(this,Ss,Ps).call(this,{type:"error",error:E})}}finally{Pn(this,As).runNext(this)}}},ks=new WeakMap,As=new WeakMap,Es=new WeakMap,Ss=new WeakSet,Ps=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),zM.batch((()=>{Pn(this,ks).forEach((t=>{t.onMutationUpdate(e)})),Pn(this,As).notify({mutation:this,type:"updated",action:e})}))},Ts),QM=(Rs=class extends dM{constructor(e={}){super(),Tn(this,Bs),Tn(this,Cs),Tn(this,Ms),this.config=e,Bn(this,Bs,new Set),Bn(this,Cs,new Map),Bn(this,Ms,0)}build(e,t,s){const n=new KM({mutationCache:this,mutationId:++Mn(this,Ms)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){Pn(this,Bs).add(e);const t=ZM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t);s?s.push(e):Pn(this,Cs).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Pn(this,Bs).delete(e)){const t=ZM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&Pn(this,Cs).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ZM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t),n=null==s?void 0:s.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){var t;const s=ZM(e);if("string"==typeof s){const n=null==(t=Pn(this,Cs).get(s))?void 0:t.find((t=>t!==e&&t.state.isPaused));return(null==n?void 0:n.continue())??Promise.resolve()}return Promise.resolve()}clear(){zM.batch((()=>{Pn(this,Bs).forEach((e=>{this.notify({type:"removed",mutation:e})})),Pn(this,Bs).clear(),Pn(this,Cs).clear()}))}getAll(){return Array.from(Pn(this,Bs))}find(e){const t={exact:!0,...e};return this.getAll().find((e=>wM(t,e)))}findAll(e={}){return this.getAll().filter((t=>wM(e,t)))}notify(e){zM.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return zM.batch((()=>Promise.all(e.map((e=>e.continue().catch(fM))))))}},Bs=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Rs);function ZM(e){var t;return null==(t=e.options.scope)?void 0:t.id}function XM(e){return{onFetch:(t,s)=>{var n,a,i,r,o;const l=t.options,c=null==(i=null==(a=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:a.fetchMore)?void 0:i.direction,h=(null==(r=t.state.data)?void 0:r.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let d={pages:[],pageParams:[]},p=0;const f=async()=>{let s=!1;const n=_M(t.options,t.fetchOptions),a=async(e,a,i)=>{if(s)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);const r={client:t.client,queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};var o;o=r,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",(()=>{s=!0})),t.signal)});const l=await n(r),{maxPages:c}=t.options,h=i?RM:MM;return{pages:h(e.pages,l,c),pageParams:h(e.pageParams,a,c)}};if(c&&h.length){const e="backward"===c,t={pages:h,pageParams:u},s=(e?JM:YM)(l,t);d=await a(t,s,e)}else{const t=e??h.length;do{const e=0===p?u[0]??l.initialPageParam:YM(l,d);if(p>0&&null==e)break;d=await a(d,e),p++}while(p<t)}return d};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=f}}}function YM(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function JM(e,{pages:t,pageParams:s}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,s[0],s):void 0}var eR=(Us=class{constructor(e={}){Tn(this,Is),Tn(this,_s),Tn(this,Ds),Tn(this,Ns),Tn(this,Ls),Tn(this,Fs),Tn(this,Os),Tn(this,js),Bn(this,Is,e.queryCache||new qM),Bn(this,_s,e.mutationCache||new QM),Bn(this,Ds,e.defaultOptions||{}),Bn(this,Ns,new Map),Bn(this,Ls,new Map),Bn(this,Fs,0)}mount(){Mn(this,Fs)._++,1===Pn(this,Fs)&&(Bn(this,Os,DM.subscribe((async e=>{e&&(await this.resumePausedMutations(),Pn(this,Is).onFocus())}))),Bn(this,js,NM.subscribe((async e=>{e&&(await this.resumePausedMutations(),Pn(this,Is).onOnline())}))))}unmount(){var e,t;Mn(this,Fs)._--,0===Pn(this,Fs)&&(null==(e=Pn(this,Os))||e.call(this),Bn(this,Os,void 0),null==(t=Pn(this,js))||t.call(this),Bn(this,js,void 0))}isFetching(e){return Pn(this,Is).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Pn(this,_s).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=Pn(this,Is).get(s.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Pn(this,Is).build(this,t),n=s.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(yM(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Pn(this,Is).findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),a=Pn(this,Is).get(n.queryHash),i=function(e,t){return"function"==typeof e?e(t):e}(t,null==a?void 0:a.state.data);if(void 0!==i)return Pn(this,Is).build(this,n).setData(i,{...s,manual:!0})}setQueriesData(e,t,s){return zM.batch((()=>Pn(this,Is).findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,s)]))))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=Pn(this,Is).get(s.queryHash))?void 0:t.state}removeQueries(e){const t=Pn(this,Is);zM.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const s=Pn(this,Is);return zM.batch((()=>(s.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const s={revert:!0,...t},n=zM.batch((()=>Pn(this,Is).findAll(e).map((e=>e.cancel(s)))));return Promise.all(n).then(fM).catch(fM)}invalidateQueries(e,t={}){return zM.batch((()=>(Pn(this,Is).findAll(e).forEach((e=>{e.invalidate()})),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t))))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=zM.batch((()=>Pn(this,Is).findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(fM)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(n).then(fM)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=Pn(this,Is).build(this,t);return s.isStaleByTime(yM(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(fM).catch(fM)}fetchInfiniteQuery(e){return e.behavior=XM(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(fM).catch(fM)}ensureInfiniteQueryData(e){return e.behavior=XM(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return NM.isOnline()?Pn(this,_s).resumePausedMutations():Promise.resolve()}getQueryCache(){return Pn(this,Is)}getMutationCache(){return Pn(this,_s)}getDefaultOptions(){return Pn(this,Ds)}setDefaultOptions(e){Bn(this,Ds,e)}setQueryDefaults(e,t){Pn(this,Ns).set(kM(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Pn(this,Ns).values()],s={};return t.forEach((t=>{AM(e,t.queryKey)&&Object.assign(s,t.defaultOptions)})),s}setMutationDefaults(e,t){Pn(this,Ls).set(kM(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Pn(this,Ls).values()],s={};return t.forEach((t=>{AM(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)})),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Pn(this,Ds).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xM(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===IM&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...Pn(this,Ds).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Pn(this,Is).clear(),Pn(this,_s).clear()}},Is=new WeakMap,_s=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,Os=new WeakMap,js=new WeakMap,Us),tR=(pn=class extends dM{constructor(e,t){super(),Tn(this,sn),Tn(this,Gs),Tn(this,Hs),Tn(this,zs),Tn(this,Vs),Tn(this,Ws),Tn(this,$s),Tn(this,qs),Tn(this,Ks),Tn(this,Qs),Tn(this,Zs),Tn(this,Xs),Tn(this,Ys),Tn(this,Js),Tn(this,en),Tn(this,tn,new Set),this.options=t,Bn(this,Gs,e),Bn(this,Ks,null),Bn(this,qs,LM()),this.options.experimental_prefetchInRender||Pn(this,qs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Pn(this,Hs).addObserver(this),sR(Pn(this,Hs),this.options)?Cn(this,sn,nn).call(this):this.updateResult(),Cn(this,sn,ln).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nR(Pn(this,Hs),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nR(Pn(this,Hs),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Cn(this,sn,cn).call(this),Cn(this,sn,hn).call(this),Pn(this,Hs).removeObserver(this)}setOptions(e){const t=this.options,s=Pn(this,Hs);if(this.options=Pn(this,Gs).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof bM(this.options.enabled,Pn(this,Hs)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Cn(this,sn,un).call(this),Pn(this,Hs).setOptions(this.options),t._defaulted&&!SM(this.options,t)&&Pn(this,Gs).getQueryCache().notify({type:"observerOptionsUpdated",query:Pn(this,Hs),observer:this});const n=this.hasListeners();n&&aR(Pn(this,Hs),s,this.options,t)&&Cn(this,sn,nn).call(this),this.updateResult(),!n||Pn(this,Hs)===s&&bM(this.options.enabled,Pn(this,Hs))===bM(t.enabled,Pn(this,Hs))&&yM(this.options.staleTime,Pn(this,Hs))===yM(t.staleTime,Pn(this,Hs))||Cn(this,sn,an).call(this);const a=Cn(this,sn,rn).call(this);!n||Pn(this,Hs)===s&&bM(this.options.enabled,Pn(this,Hs))===bM(t.enabled,Pn(this,Hs))&&a===Pn(this,en)||Cn(this,sn,on).call(this,a)}getOptimisticResult(e){const t=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),e),s=this.createResult(t,e);return n=s,!SM(this.getCurrentResult(),n)&&(Bn(this,Vs,s),Bn(this,$s,this.options),Bn(this,Ws,Pn(this,Hs).state)),s;var n}getCurrentResult(){return Pn(this,Vs)}trackResult(e,t){const s={};return Object.keys(e).forEach((n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),null==t||t(n),e[n])})})),s}trackProp(e){Pn(this,tn).add(e)}getCurrentQuery(){return Pn(this,Hs)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Pn(this,Gs).defaultQueryOptions(e),s=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),t);return s.fetch().then((()=>this.createResult(s,t)))}fetch(e){return Cn(this,sn,nn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),Pn(this,Vs))))}createResult(e,t){var s;const n=Pn(this,Hs),a=this.options,i=Pn(this,Vs),r=Pn(this,Ws),o=Pn(this,$s),l=e!==n?e.state:Pn(this,zs),{state:c}=e;let h,u={...c},d=!1;if(t._optimisticResults){const s=this.hasListeners(),i=!s&&sR(e,t),r=s&&aR(e,n,t,a);(i||r)&&(u={...u,...$M(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:m}=u;h=u.data;let g=!1;if(void 0!==t.placeholderData&&void 0===h&&"pending"===m){let e;(null==i?void 0:i.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=i.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(s=Pn(this,Xs))?void 0:s.state.data,Pn(this,Xs)):t.placeholderData,void 0!==e&&(m="success",h=CM(null==i?void 0:i.data,e,t),d=!0)}if(t.select&&void 0!==h&&!g)if(i&&h===(null==r?void 0:r.data)&&t.select===Pn(this,Qs))h=Pn(this,Zs);else try{Bn(this,Qs,t.select),h=t.select(h),h=CM(null==i?void 0:i.data,h,t),Bn(this,Zs,h),Bn(this,Ks,null)}catch(A){Bn(this,Ks,A)}Pn(this,Ks)&&(p=Pn(this,Ks),h=Pn(this,Zs),f=Date.now(),m="error");const y="fetching"===u.fetchStatus,b="pending"===m,v="error"===m,w=b&&y,x=void 0!==h,k={status:m,fetchStatus:u.fetchStatus,isPending:b,isSuccess:"success"===m,isError:v,isInitialLoading:w,isLoading:w,data:h,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:v&&!x,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:v&&x,isStale:iR(e,t),refetch:this.refetch,promise:Pn(this,qs)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},s=()=>{const e=Bn(this,qs,k.promise=LM());t(e)},a=Pn(this,qs);switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==k.status&&k.data===a.value||s();break;case"rejected":"error"===k.status&&k.error===a.reason||s()}}return k}updateResult(){const e=Pn(this,Vs),t=this.createResult(Pn(this,Hs),this.options);Bn(this,Ws,Pn(this,Hs).state),Bn(this,$s,this.options),void 0!==Pn(this,Ws).data&&Bn(this,Xs,Pn(this,Hs)),SM(t,e)||(Bn(this,Vs,t),Cn(this,sn,dn).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!Pn(this,tn).size)return!0;const n=new Set(s??Pn(this,tn));return this.options.throwOnError&&n.add("error"),Object.keys(Pn(this,Vs)).some((t=>{const s=t;return Pn(this,Vs)[s]!==e[s]&&n.has(s)}))})()}))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Cn(this,sn,ln).call(this)}},Gs=new WeakMap,Hs=new WeakMap,zs=new WeakMap,Vs=new WeakMap,Ws=new WeakMap,$s=new WeakMap,qs=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,Zs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Js=new WeakMap,en=new WeakMap,tn=new WeakMap,sn=new WeakSet,nn=function(e){Cn(this,sn,un).call(this);let t=Pn(this,Hs).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(fM)),t},an=function(){Cn(this,sn,cn).call(this);const e=yM(this.options.staleTime,Pn(this,Hs));if(pM||Pn(this,Vs).isStale||!mM(e))return;const t=gM(Pn(this,Vs).dataUpdatedAt,e);Bn(this,Ys,setTimeout((()=>{Pn(this,Vs).isStale||this.updateResult()}),t+1))},rn=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Pn(this,Hs)):this.options.refetchInterval)??!1},on=function(e){Cn(this,sn,hn).call(this),Bn(this,en,e),!pM&&!1!==bM(this.options.enabled,Pn(this,Hs))&&mM(Pn(this,en))&&0!==Pn(this,en)&&Bn(this,Js,setInterval((()=>{(this.options.refetchIntervalInBackground||DM.isFocused())&&Cn(this,sn,nn).call(this)}),Pn(this,en)))},ln=function(){Cn(this,sn,an).call(this),Cn(this,sn,on).call(this,Cn(this,sn,rn).call(this))},cn=function(){Pn(this,Ys)&&(clearTimeout(Pn(this,Ys)),Bn(this,Ys,void 0))},hn=function(){Pn(this,Js)&&(clearInterval(Pn(this,Js)),Bn(this,Js,void 0))},un=function(){const e=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),this.options);if(e===Pn(this,Hs))return;const t=Pn(this,Hs);Bn(this,Hs,e),Bn(this,zs,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},dn=function(e){zM.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(Pn(this,Vs))})),Pn(this,Gs).getQueryCache().notify({query:Pn(this,Hs),type:"observerResultsUpdated"})}))},pn);function sR(e,t){return function(e,t){return!1!==bM(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&nR(e,t,t.refetchOnMount)}function nR(e,t,s){if(!1!==bM(t.enabled,e)){const n="function"==typeof s?s(e):s;return"always"===n||!1!==n&&iR(e,t)}return!1}function aR(e,t,s,n){return(e!==t||!1===bM(n.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&iR(e,s)}function iR(e,t){return!1!==bM(t.enabled,e)&&e.isStaleByTime(yM(t.staleTime,e))}var rR=(xn=class extends dM{constructor(e,t){super(),Tn(this,bn),Tn(this,fn),Tn(this,mn),Tn(this,gn),Tn(this,yn),Bn(this,fn,e),this.setOptions(t),this.bindMethods(),Cn(this,bn,vn).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=Pn(this,fn).defaultMutationOptions(e),SM(this.options,s)||Pn(this,fn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Pn(this,gn),observer:this}),(null==s?void 0:s.mutationKey)&&this.options.mutationKey&&kM(s.mutationKey)!==kM(this.options.mutationKey)?this.reset():"pending"===(null==(t=Pn(this,gn))?void 0:t.state.status)&&Pn(this,gn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=Pn(this,gn))||e.removeObserver(this)}onMutationUpdate(e){Cn(this,bn,vn).call(this),Cn(this,bn,wn).call(this,e)}getCurrentResult(){return Pn(this,mn)}reset(){var e;null==(e=Pn(this,gn))||e.removeObserver(this),Bn(this,gn,void 0),Cn(this,bn,vn).call(this),Cn(this,bn,wn).call(this)}mutate(e,t){var s;return Bn(this,yn,t),null==(s=Pn(this,gn))||s.removeObserver(this),Bn(this,gn,Pn(this,fn).getMutationCache().build(Pn(this,fn),this.options)),Pn(this,gn).addObserver(this),Pn(this,gn).execute(e)}},fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,yn=new WeakMap,bn=new WeakSet,vn=function(){var e;const t=(null==(e=Pn(this,gn))?void 0:e.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Bn(this,mn,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},wn=function(e){zM.batch((()=>{var t,s,n,a,i,r,o,l;if(Pn(this,yn)&&this.hasListeners()){const c=Pn(this,mn).variables,h=Pn(this,mn).context;"success"===(null==e?void 0:e.type)?(null==(s=(t=Pn(this,yn)).onSuccess)||s.call(t,e.data,c,h),null==(a=(n=Pn(this,yn)).onSettled)||a.call(n,e.data,null,c,h)):"error"===(null==e?void 0:e.type)&&(null==(r=(i=Pn(this,yn)).onError)||r.call(i,e.error,c,h),null==(l=(o=Pn(this,yn)).onSettled)||l.call(o,void 0,e.error,c,h))}this.listeners.forEach((e=>{e(Pn(this,mn))}))}))},xn),oR=ya.createContext(void 0),lR=e=>{const t=ya.useContext(oR);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},cR=({client:e,children:t})=>(ya.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),Pa.jsx(oR.Provider,{value:e,children:t})),hR=ya.createContext(!1);hR.Provider;var uR=ya.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}());function dR(e,t){return"function"==typeof e?e(...t):!!e}function pR(){}var fR=(e,t,s)=>t.fetchOptimistic(e).catch((()=>{s.clearReset()}));function mR(e,t){return function(e,t){var s,n,a,i,r;const o=lR(),l=ya.useContext(hR),c=ya.useContext(uR),h=o.defaultQueryOptions(e);null==(n=null==(s=o.getDefaultOptions().queries)?void 0:s._experimental_beforeQuery)||n.call(s,h),h._optimisticResults=l?"isRestoring":"optimistic",(e=>{const t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))})(h),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(h,c),(e=>{ya.useEffect((()=>{e.clearReset()}),[e])})(c);const u=!o.getQueryCache().get(h.queryHash),[d]=ya.useState((()=>new t(o,h))),p=d.getOptimisticResult(h),f=!l&&!1!==e.subscribed;if(ya.useSyncExternalStore(ya.useCallback((e=>{const t=f?d.subscribe(zM.batchCalls(e)):pR;return d.updateResult(),t}),[d,f]),(()=>d.getCurrentResult()),(()=>d.getCurrentResult())),ya.useEffect((()=>{d.setOptions(h)}),[h,d]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(h,p))throw fR(h,d,c);if((({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&void 0===e.data||dR(s,[e.error,n])))({result:p,errorResetBoundary:c,throwOnError:h.throwOnError,query:o.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw p.error;if(null==(i=null==(a=o.getDefaultOptions().queries)?void 0:a._experimental_afterQuery)||i.call(a,h,p),h.experimental_prefetchInRender&&!pM&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,l)){const e=u?fR(h,d,c):null==(r=o.getQueryCache().get(h.queryHash))?void 0:r.promise;null==e||e.catch(pR).finally((()=>{d.updateResult()}))}return h.notifyOnChangeProps?p:d.trackResult(p)}(e,tR)}const gR=()=>{var e,t,s,n;const{user:a}=Zv(),i=lR(),[r,o]=ya.useState(""),[l,c]=ya.useState(null),{data:h,isLoading:u,error:d}=mR({queryKey:["user",a.id],queryFn:()=>(async e=>{try{return(await jv.get(`/users/${e}`)).data}catch(d){throw console.error("Failed to get user by ID:",d),d}})(a.id),enabled:!!(null==a?void 0:a.id)}),{data:p}=mR({queryKey:["user-maps"],queryFn:()=>TC()}),{data:f}=mR({queryKey:["user-stats"],queryFn:()=>(async()=>{try{return(await jv.get("/my/statistic")).data.data}catch(d){throw console.error("Failed to get all users:",d),d}})()}),{data:m}=mR({queryKey:["user-upgrades"],queryFn:()=>RC()}),{data:g}=mR({queryKey:["user-global-rank"],queryFn:async()=>{try{console.log("Fetching global scores...");const e=await BC();console.log("Global scores response:",e);const t=(null==e?void 0:e.data)||e||[];console.log("Scores data:",t);const s=t.findIndex((e=>{var t;return e.userId===(null==a?void 0:a.id)||e.id===(null==a?void 0:a.id)||e.username===(null==(t=null==a?void 0:a.data)?void 0:t.username)||e.username===(null==a?void 0:a.username)}));console.log("User rank found:",s);const n=-1!==s?s+1:"N/A";return console.log("Final rank:",n),n}catch(e){return console.error("Failed to get global rank:",e),"N/A"}},enabled:!!(null==a?void 0:a.id)}),y=function(e){const t=lR(),[s]=ya.useState((()=>new rR(t,e)));ya.useEffect((()=>{s.setOptions(e)}),[s,e]);const n=ya.useSyncExternalStore(ya.useCallback((e=>s.subscribe(zM.batchCalls(e))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),a=ya.useCallback(((e,t)=>{s.mutate(e,t).catch(pR)}),[s]);if(n.error&&dR(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}({mutationFn:IC,onMutate:e=>{c(e)},onSuccess:()=>{c(null),i.invalidateQueries({queryKey:["user-upgrades"]}),i.invalidateQueries({queryKey:["user-stats"]}),i.invalidateQueries({queryKey:["user",a.id]}),PC.emit("upgrade-purchased"),console.log("Dashboard: Upgrade purchased, notified GameManager"),o("Upgrade successful!"),setTimeout((()=>o("")),3e3)},onError:e=>{var t,s,n,a,i,r,l,h;c(null),console.error("Failed to upgrade:",e);let u="Failed to upgrade. Please try again.";(null==(n=null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.error)?void 0:n.message)?u=e.response.data.error.message:400===(null==(a=e.response)?void 0:a.status)?u="Insufficient gold to purchase this upgrade!":401===(null==(i=e.response)?void 0:i.status)?u="Authentication required. Please log in again.":403===(null==(r=e.response)?void 0:r.status)?u="You don't have permission to perform this action.":404===(null==(l=e.response)?void 0:l.status)?u="Upgrade not found.":(null==(h=e.response)?void 0:h.status)>=500&&(u="Server error. Please try again later."),o(u),setTimeout((()=>o("")),5e3)}}),b=e=>{y.mutate(e)};return console.log("globalRank",g),ya.useEffect((()=>{const e=()=>{console.log("Dashboard: Invalidating queries after game session ended"),i.invalidateQueries({queryKey:["user"]}),i.invalidateQueries({queryKey:["user-stats"]}),i.invalidateQueries({queryKey:["user-upgrades"]}),i.invalidateQueries({queryKey:["user-maps"]})};return PC.on("invalidate-dashboard-data",e),()=>{PC.removeListener("invalidate-dashboard-data",e)}}),[i]),u?Pa.jsx("div",{children:"Loading..."}):d?Pa.jsx("div",{children:"Error loading user data"}):Pa.jsxs("div",{className:"bg-dark-primary flex flex-col text-white pl-6 pr-6",children:[r&&Pa.jsx("div",{className:"p-4 mb-4 bg-yellow-900 text-[#ffae0b] rounded text-center font-bold shadow border border-[#ffae0b] animate-in slide-in-from-top-8 fade-in duration-700",children:r}),Pa.jsxs("div",{className:"p-6 flex flex-col gap-6 rounded-lg bg-dark-primary mb-6",children:[Pa.jsx("h1",{className:"text-heading-3-alagard",style:{color:"#ffae0b"},children:"Dashboard"}),Pa.jsxs("div",{className:"flex gap-9",children:[Pa.jsxs("div",{className:"flex flex-col p-[30px] justify-center items-center gap-4",children:[Pa.jsx("div",{className:"w-30 h-30 rounded-full overflow-hidden",children:Pa.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pa.jsx("p",{className:"text-heading-3-alagard",children:null==(e=null==h?void 0:h.data)?void 0:e.username})]}),Pa.jsx("div",{className:"flex flex-1 w-full",children:Pa.jsxs("div",{className:"grid grid-cols-3 gap-6 w-full flex-1",children:[Pa.jsx(hM,{title:"Current Gold",value:(null==(s=null==(t=null==h?void 0:h.data)?void 0:t.gold)?void 0:s.toLocaleString())||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pa.jsx(hM,{title:"Total Runs",value:(null==f?void 0:f.totalRuns)||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pa.jsx(hM,{title:"Global Rank",value:g||"Loading...",titleStyle:"text-body-2-pixelify text-light-primary"}),Pa.jsx(hM,{title:"Highest level",value:(null==f?void 0:f.maxSkillLevel)||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pa.jsx(hM,{title:"Longest Survival",value:(null==f?void 0:f.longestSurvival)||"00:00",titleStyle:"text-body-2-pixelify text-light-primary"}),Pa.jsx(hM,{title:"Enemies Killed",value:(null==f?void 0:f.totalKillPoints)||0,titleStyle:"text-body-2-pixelify text-light-primary"})]})})]})]}),Pa.jsxs("div",{className:"bg-dark-primary  rounded-lg overflow-hidden w-full",children:[Pa.jsx("div",{className:"bg-dark-primary ",children:Pa.jsx("h2",{className:"text-heading-1-pixelify-bold text-[#FFAE0B]",children:"Upgrades"})}),Pa.jsx("div",{className:"p-6 max-h-96 overflow-y-auto \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:Pa.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3  gap-6",children:null==(n=null==m?void 0:m.data)?void 0:n.map((e=>Pa.jsx(uM,{title:e.name,value:`Level ${e.level}`,progress:e.progress,description:e.description,onUpgrade:b,isMaxed:e.isMaxed,upgradeId:e.id,upgradeCost:e.cost||e.upgradeCost||0,isLoading:l===e.id},e.id)))})})]})]})},yR=()=>{const{user:e}=Zv(),[t,s]=ya.useState("experience"),{data:n,isLoading:a,isError:i,error:r}=mR({queryKey:["globalScores"],queryFn:BC}),{data:o,isLoading:l,isError:c,error:h}=mR({queryKey:["globalKillCounts"],queryFn:CC}),u="killCount"===t?c:i,d="killCount"===t?h:r,p="killCount"===t?o:n;if("killCount"===t?l:a)return Pa.jsx("div",{className:"p-8 text-white",children:"Loading..."});if(u)return Pa.jsxs("div",{className:"p-8 text-white",children:["Failed to load leaderboard.",Pa.jsx("br",{}),JSON.stringify(d)]});const f=(null==p?void 0:p.data)?[...p.data].sort(((e,s)=>{let n,a;switch(t){case"killCount":n=e.killPoints||0,a=s.killPoints||0;break;case"experience":default:n=e.experience||0,a=s.experience||0;break;case"gold":n=e.gold||0,a=s.gold||0;break;case"totalGames":n=e.totalGames||0,a=s.totalGames||0}return n<a?1:-1})):[],m=f.findIndex((t=>t.walletAddress===(null==e?void 0:e.walletAddress)||t.username===(null==e?void 0:e.username)))+1,g=f.find((t=>t.walletAddress===(null==e?void 0:e.walletAddress)||t.username===(null==e?void 0:e.username))),y=m>0&&m<=10?f.slice(0,10):[...f.slice(0,10),g].filter(Boolean);return Pa.jsxs("div",{className:"h-full bg-dark-primary flex flex-col text-white px-4 sm:px-6 overflow-y-auto",children:[Pa.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-secondary-500 py-10 gap-4",children:[Pa.jsx("h1",{className:"text-heading-2-alagard",children:"Leaderboard"}),Pa.jsx("div",{className:"flex outline-none   bg-dark-secondary items-center",children:Pa.jsxs("div",{className:"relative w-full sm:w-auto min-w-[200px]",children:[Pa.jsxs("select",{value:t,onChange:e=>s(e.target.value),className:"bg-dark-secondary outline-none focus:outline-none active:outline-none rounded px-3 py-2 text-white appearance-none cursor-pointer pr-8 w-full h-full text-sm sm:text-base",children:[Pa.jsx("option",{value:"experience",children:"Experience"}),Pa.jsx("option",{value:"killCount",children:"Kill Points"}),Pa.jsx("option",{value:"gold",children:"Gold"}),Pa.jsx("option",{value:"totalGames",children:"Games Played"})]}),Pa.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Pa.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Pa.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})]}),Pa.jsxs("div",{className:"bg-dark-secondary border border-[#24110F] pb-10 rounded-lg overflow-hidden w-full flex flex-col flex-1",children:[Pa.jsxs("div",{className:"bg-dark-secondary border-b border-[#2F1A18] px-4 sm:px-6 py-3 flex items-center justify-between",children:[Pa.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[Pa.jsx("div",{className:"w-8 sm:w-12 flex justify-center",children:Pa.jsx("span",{className:"text-body-1-pixelify text-light-tertiary font-bold",children:"#"})}),Pa.jsx("div",{children:Pa.jsx("span",{className:"text-body-1-pixelify text-light-tertiary font-bold",children:"Player"})})]}),Pa.jsx("div",{className:"text-right",children:Pa.jsx("span",{className:"text-body-1-pixelify text-light-tertiary",children:"killCount"===t?"Kill Points":"experience"===t?"Experience":"gold"===t?"Gold":"totalGames"===t?"Games Played":"Experience"})})]}),Pa.jsx("div",{className:"divide-y divide-[#2F1A18] flex-1 overflow-y-auto \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:y.map(((s,n)=>{const a=s.walletAddress&&(null==e?void 0:e.walletAddress)&&s.walletAddress===e.walletAddress||s.username&&(null==e?void 0:e.username)&&s.username===e.username,i=a&&m>10?m:n+1,r=a&&m>10;return Pa.jsxs("div",{children:[r&&10===n&&Pa.jsxs("div",{className:"flex items-center justify-center py-2",children:[Pa.jsx("div",{className:"flex-1 h-px bg-[#2F1A18]"}),Pa.jsx("span",{className:"px-4 text-sm text-light-tertiary",children:"..."}),Pa.jsx("div",{className:"flex-1 h-px bg-[#2F1A18]"})]}),Pa.jsxs("div",{className:" p-4 flex items-center justify-between transition-colors "+(a?"bg-gradient-to-r from-[#FFAE0B]/30 to-transparent border-2 border-[#FFAE0B] shadow-lg shadow-[#FFAE0B]/20":"hover:bg-translucent-light-4"),children:[Pa.jsxs("div",{className:"flex items-center space-x-4",children:[Pa.jsx("div",{className:"flex items-center justify-center border-2 border-[#392423] bg-dark-secondary p-1 w-12 h-9",children:i}),Pa.jsx("div",{children:Pa.jsxs("div",{className:"flex items-center gap-2",children:[Pa.jsx("p",{className:"text-body-1-alagard font-bold",children:s.username||s.name}),a&&Pa.jsx("span",{className:"bg-[#FFAE0B] text-black px-2 py-1 rounded text-xs font-bold",children:"YOU"})]})})]}),Pa.jsx("div",{className:"text-right",children:Pa.jsx("p",{className:"text-body-1-alagard font-bold",children:"killCount"===t?`${(s.killPoints||0).toLocaleString()} kills`:"experience"===t?`${(s.experience||0).toLocaleString()} XP`:"gold"===t?`${(s.gold||0).toLocaleString()} gold`:"totalGames"===t?`${(s.totalGames||0).toLocaleString()} games`:`${(s.experience||0).toLocaleString()} XP`})})]})]},`${s.id||n}-${a?"user":"other"}`)}))})]})]})},bR=()=>Pa.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:Pa.jsx("h1",{className:"text-display-1-alagard-bold text-center text-[#FFAE0B]",children:"Coming soon"})}),vR=()=>Pa.jsx("div",{children:Pa.jsx("h1",{className:"text-display-1-alagard-bold flex flex-col items-center justify-center h-screen text-center text-[#FFAE0B]",children:"Coming soon"})}),wR=[{id:"slash",name:"Slash",image:"/skills/Slash card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Basic skill: Slash"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Physical Swordsmanship"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," ","Short (Melee)"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A masterful swordsmanship technique passed down through generations of cathedral knights, this devastating slash channels the wielder's soul into their blade. What begins as a simple cut evolves into a strike capable of cleaving through the very fabric of darkness itself."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Slash's AoE and Damage will increase due to the Slash card"}),Pa.jsx("li",{children:"• Slash's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Slash's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Slash's AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Slash will upgrade into Dash slash select 10 times Slash card in per session"})]})]})]})},{id:"marksman",name:"Marksman",image:"/skills/marksman card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Basic Skill: Marksman"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Skill Type:"})," Single target/Projectile"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A refined marksmanship technique developed by monster hunters who rely on precision and skill rather than mystical power. This gunmanship art focuses on exploiting weak points and vital areas of monstrous creatures through disciplined training and keen observation. Beginning with basic accuracy, the skill evolves through ten levels of mastery—from simple headshots to god-tier precision that can pierce through multiple targets, ignore thick hide and bone, and deliver devastating critical strikes. At its pinnacle, master marksmen achieve supernatural focus and timing, allowing them to place shots with impossible accuracy even against the fastest and most elusive beasts."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Marksman's Damage will increase due to the Marksman card"}),Pa.jsx("li",{children:"• Marksman's Projectile number will increase due to the Marksman skill tier"}),Pa.jsx("li",{children:"• Marksman's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Marksman's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Marksman's Attack range will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Marksman will upgrade into Barrage skill when the Marksmanship skill becomes God Tier"})]})]})]})},{id:"fireball",name:"Fire Ball",image:"/skills/Fire ball card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Fire Ball"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/ AoE/DOT/Magical"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast enemies, does DOT damage"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," ","Medium (Ranged)"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A devastating magical art that conjures spheres of concentrated flame to obliterate enemies from afar. This ancient pyromantic technique begins with simple fire manipulation but evolves through ten levels of mastery into an apocalyptic force capable of turning entire battlefields into blazing infernos. The caster manifests a blazing orb of pure fire that streaks across the battlefield before erupting in a violent explosion, incinerating everything within its radius. At god-tier mastery, these fireballs burn with such intensity they can melt stone, vaporize water, and leave craters of molten glass where once enemies stood, with explosions so massive they can consume entire monster hordes in walls of searing flame."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Fire Ball's Damage will increase due to the Fire Ball card"}),Pa.jsx("li",{children:"• Fire Ball's Projectile number will increase when Fire Ball is in each tier"}),Pa.jsx("li",{children:"• Fire Ball's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Fire Ball's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Fire Ball's Attack range and AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Fire Ball will upgrade into Fire Blizzard skill when the Fire Ball skill becomes God Tier"})]})]})]})},{id:"firearrow",name:"Fire Arrow",image:"/skills/Fire arrow card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Fire Arrow"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/DOT/ Magical"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Pierces through enemies, does DOT damage"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God-tier)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A precise magical archery technique that creates arrows of pure flame to pierce and burn through enemy ranks. This ancient pyromantic art begins with simple fire-imbued projectiles but evolves through ten levels of mastery into devastating lances of concentrated flame that can penetrate multiple foes in a single shot. The caster manifests a blazing arrow that streaks through the air, piercing straight through enemies while leaving trails of searing fire in its wake, scorching everything it passes through. At god-tier mastery, these flame arrows burn with such ferocity they can punch through the thickest armor and bone, creating chains of burning destruction as they pass through entire groups of monsters, leaving smoldering wounds that continue to burn long after impact."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Fire Arrow's Damage will increase due to the Fire Arrow card"}),Pa.jsx("li",{children:"• Fire Arrow's Projectile number will increase when Fire Arrow is in each tier"}),Pa.jsx("li",{children:"• Fire Arrow's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Fire Arrows CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Fire Arrow's Attack range and AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Fire Arrow will upgrade into the Split Fire skill when the Fire Arrow skill becomes God Tier"})]})]})]})},{id:"iceshard",name:"Ice Shard",image:"/skills/Ice shard card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Ice Shard"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/ AoE/Crowd Control/Magical/ Slow"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast slows enemies in the area"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God-tier)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A chilling magical technique that hurls razor-sharp shards of enchanted ice to slow and damage enemies across the battlefield. This ancient cryomantic art begins with simple ice manipulation but evolves through ten levels of mastery into devastating frozen projectiles that can halt entire monster hordes in their tracks. The caster manifests a gleaming ice shard that streaks toward its target before shattering mid-air, releasing a burst of freezing mist that chills the air and slows all enemies caught within its frigid radius. At god-tier mastery, these ice shards explode with such bone-deep cold they can freeze blood in veins, turn flesh brittle as glass, and create expanding zones of supernatural winter that leave monsters crawling at a snail's pace through fields of deadly frost."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Ice Shard's Damage will increase due to the Ice Shard card"}),Pa.jsx("li",{children:"• Ice Shard's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Ice Shard's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Ice Shard's Attack range and AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Ice Shard will upgrade into the Freezing Field skill when the Ice Shard skill becomes God Tier"})]})]})]})},{id:"lightningchain",name:"Lightning Chain",image:"/skills/Lightning chain card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Lightning Chain"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," ","Multi-target/Chain/Crowd Control/Magical/"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast slows enemies in the area"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God-tier)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A devastating electrical magic that unleashes arcing bolts of lightning to jump between multiple enemies in succession. This ancient storm magic begins with simple electrical manipulation but evolves through ten levels of mastery into god-tier lightning that can leap across entire battlefields, stunning and frying dozens of monsters in a single cast. The caster releases a crackling bolt that strikes the first target before chaining to nearby enemies, each successive jump dealing reduced but still lethal damage while leaving victims paralyzed by electrical shock. At its pinnacle, these lightning chains can arc through seemingly endless numbers of foes, turning entire monster hordes into writhing, electrocuted masses as the bolt seeks out every living creature within range, growing weaker with each jump but never losing its ability to stun and disable even the most resilient beasts."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Lightning Chain's Damage will increase due to the Lightning Chain card"}),Pa.jsx("li",{children:"• Lightning Chain's target number will increase due to the Lightning Chain card, but the leap number will decrease"}),Pa.jsx("li",{children:"• Lightning Chain's Damage will increase due to the Attack Damage card"}),Pa.jsx("li",{children:"• Lightning Chain's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Lightning Chain's Attack range and AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Lightning Chain will upgrade into the Surge of Lightning skill when the Lightning Chain skill becomes God Tier"})]})]})]})},{id:"holylight",name:"Holy Light",image:"/skills/Holy light card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Holy Light"}),Pa.jsxs("div",{className:"space-y-2 mb-4",children:[Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," AoE/Crowd Control/Magical/"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Slim chance of Blinds the enemy, not able to do melee damage"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," AoE"]}),Pa.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pa.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (Basic→Master→Emperor→ Divine → God-tier)"]})]}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A sacred magical art that unleashes blinding flashes of pure holy light to temporarily disable enemies across the battlefield. This divine technique begins with simple light manipulation but evolves through ten levels of mastery into god-tier radiance that can blind entire armies of darkness with overwhelming luminescence. The caster channels celestial energy into a brilliant flash that erupts outward, searing the vision of all enemies within range and leaving them unable to strike accurately for several crucial moments. At its pinnacle, this holy light burns with such intensity that it can blind even creatures of shadow and undead abominations, creating cascading waves of radiance that spread from enemy to enemy, ensuring that entire monster hordes stumble helplessly in temporary blindness as the divine light overwhelms their senses and renders them defenseless against follow-up attacks."}),Pa.jsxs("div",{children:[Pa.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pa.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pa.jsx("li",{children:"• Holy Light's change to blind the enemy will increase due to the Holy Light in each tier"}),Pa.jsx("li",{children:"• Holy Light's CD will be reduced due to the Holy Light card"}),Pa.jsx("li",{children:"• Holy Light's CD will be reduced due to the Cooldown Reduction card"}),Pa.jsx("li",{children:"• Holy Light's Attack range and AoE will increase due to the Attack Range card"}),Pa.jsx("li",{children:"• Holy Light will upgrade into the Holy Being skill when the Holy Light skill becomes God Tier"})]})]})]})},{id:"agility",name:"Agility",image:"/skills/agility card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Agility"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A fundamental physical enhancement that sharpens reflexes and lightens the body's burden, allowing for swift movement across treacherous terrain. This passive ability increases the character's natural grace and coordination, enabling faster traversal of battlefields and quicker positioning during combat encounters."})]})},{id:"armor",name:"Armor",image:"/skills/armor card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Armor"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A defensive mastery that hardens the body's natural resilience and improves equipment effectiveness, reducing incoming damage from all sources. This passive protection creates layers of defense that can absorb and deflect a certain amount of punishment before harm reaches vital areas."})]})},{id:"attackdamage",name:"Attack Damage",image:"/skills/attack damage card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Attack Damage"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A combat enhancement that channels raw power into every strike, increasing the destructive force behind all offensive abilities. This passive amplification affects every form of attack, from sword strikes to magical spells, ensuring each blow carries maximum devastating potential."})]})},{id:"attackrate",name:"Attack Rate",image:"/skills/attack rate card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Attack Rate"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A precision technique that streamlines combat movements and reduces recovery time between strikes, allowing for rapid successive attacks. This passive skill eliminates wasted motion and hesitation, creating fluid combat chains with minimal downtime between offensive actions."})]})},{id:"expgain",name:"EXP Gain",image:"/skills/EXP gain card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"EXP Gain"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A learning enhancement that sharpens the mind's ability to absorb knowledge from combat experience, accelerating personal growth and skill development. This passive ability allows the character to extract maximum wisdom from every encounter and challenge."})]})},{id:"goldgain",name:"Gold Gain",image:"/skills/Gold gain card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Gold Gain"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A fortune-finding instinct that improves the ability to locate and secure valuable treasures from defeated enemies, increasing monetary rewards from all sources. This passive skill represents keen eyes for valuable items and shrewd collection practices."})]})},{id:"pickuprange",name:"Pickup Range",image:"/skills/Pickup range card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Pickup Range"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"An awareness enhancement that extends the character's natural perception and reach for collecting battlefield spoils, automatically gathering dropped items from greater distances. This passive ability ensures no valuable loot is left behind during intense combat."})]})},{id:"strength",name:"Strength",image:"/skills/strength card.png",description:Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Strength"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A physical enhancement that fortifies the body's core vitality and endurance, significantly increasing maximum health capacity and overall physical resilience. This passive ability represents the fundamental power that keeps warriors standing through the most brutal encounters."})]})}],xR=()=>{const[e,t]=ya.useState("faq"),[s,n]=ya.useState(wR[0]),a=ya.useRef(null);ya.useEffect((()=>{a.current&&(a.current.scrollTop=0)}),[s]);const i={faq:{content:Pa.jsxs("div",{className:"space-y-8 bg-dark-primary",children:[Pa.jsxs("div",{children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"How to play?"}),Pa.jsxs("div",{className:"space-y-4",children:[Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Movement:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Use WASD keys or hold the right mouse button to follow the cursor."}),Pa.jsx("img",{className:"pt-2",src:"/guideGif.gif",alt:"Movement"})]}),Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Collecting Resources:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Collect EXP and gold drops from enemy mobs by walking near or over the items."})]})]})]}),Pa.jsxs("div",{children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Portal System"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"The main map has 4 portals located at each corner of the map. Portals randomly activate after the player survives 3 minutes. If the player manages to enter an activated portal before it closes, they are transported to one of 4 bonus maps: - Beach of Undeath- Dark Forest - Nest of Underlord - Maze"})]}),Pa.jsxs("div",{children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Character Upgrades"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"To upgrade your character, collect EXP throughout the map to level up. When leveled up, 3 random skill upgrade cards appear and the player must choose one of the 3. If a player manages to choose the same skill 10 times, that skill upgrades to an Ultimate skill and unlocks a hidden ability."})]}),Pa.jsxs("div",{children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Base Stats:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Upgrades Every player can upgrade their base stats from the main menu Dashboard section, using gold coins collected from previous game sessions."})]}),Pa.jsxs("div",{children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4 text-[#FFAE0B]",children:"Maps"}),Pa.jsxs("div",{className:"space-y-6",children:[Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Dark Forest:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Dark Forest is the territory of Dark Elves, who are allies with humans. However, ancient creatures controlled by demons want to destroy the Dark Elves' totem, which has the ability to keep demons away from their territory. The player helps protect their totem and receives an EXP multiplier as a reward. This map features wave-based attacks with a total of 5 waves."})]}),Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Nest of Underlord:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"This place is a boss area featuring the most powerful enemy in the game, along with ghouls that you must fight. The map has a 5-minute time limit. If the player manages to kill the boss, they are granted an Ultimate skill. If not, the player will be sent back to the main map as long as they survive."})]}),Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Beach of Undeaths:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"A nice beach cursed with pirate members and goblins. This map provides a gold multiplier and has randomly spawning gold treasure. There is also a mini-boss pirate captain who is much more powerful than regular mobs on the map. The map has a 3-minute time limit, so kill as many mobs as possible to collect resources for later upgrades and consumable items."})]}),Pa.jsxs("div",{children:[Pa.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Chaos Realm:"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"The Chaos Realm is a hellish, volcanic underground place where the player must escape within 5 minutes. This map features extreme difficulty with exclusive rewards. The longer it takes, the more the player loses score. If the score reaches 0, the player faces instant death. When the map is completed, the player is rewarded with multiplied rewards based on leftover time."})]})]})]})]})},skill:{content:Pa.jsxs("div",{className:"flex bg-dark-primary gap-8 h-full",children:[Pa.jsx("div",{className:"grid grid-cols-3 gap-4 overflow-y-auto max-h-[600px] w-1/2 pr-2",style:{flexShrink:0},children:wR.map((e=>Pa.jsx("div",{className:"cursor-pointer border-2 rounded-md flex justify-center transition-all duration-200 "+(s&&s.id===e.id?"border-[#FFAE0B]":"border-gray-700 hover:border-[#FFAE0B]/60"),style:{aspectRatio:"3/4",width:"100%",height:"100%"},onClick:()=>n(s&&s.id===e.id?null:e),children:Pa.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",style:{aspectRatio:"3/4"}})},e.id)))}),s&&Pa.jsxs("div",{ref:a,className:"flex-1 bg-dark-primary rounded-lg p-6 max-h-[600px] border-2 border-[#FFAE0B] overflow-y-auto scrollbar-invisible",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[Pa.jsx("style",{children:".scrollbar-invisible::-webkit-scrollbar { display: none; }"}),s.description]})]})},defense:{content:Pa.jsxs("div",{className:"space-y-6 bg-dark-secondary",children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Defense Mechanics"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Understanding defense mechanics is crucial for surviving the dangerous dungeons and boss encounters."})]})},stats:{content:Pa.jsxs("div",{className:"space-y-6 bg-dark-secondary",children:[Pa.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Character Statistics"}),Pa.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Your character's stats determine their effectiveness in combat and exploration."})]})}};return Pa.jsx("div",{className:"min-h-screen bg-dark-primary flex flex-col text-white pl-6 pr-6",children:Pa.jsxs("div",{className:"text-white flex flex-col w-full bg-dark-primary pt-12 pr-6 pb-12 pl-6 gap-6",children:[Pa.jsx("h1",{className:"text-display-1-alagard-bold text-left text-[#FFAE0B]",children:"Guide"}),Pa.jsx("div",{className:"flex space-x-2",children:[{id:"faq",label:"FAQ"},{id:"skill",label:"Skill"}].map((s=>Pa.jsx("button",{onClick:()=>t(s.id),className:"px-6 py-3 rounded-md transition-colors text-button-48-pixelify "+(e===s.id?"bg-red-600 text-white":"bg-transparent border border-red-600 text-white hover:bg-red-600/20"),children:s.label},s.id)))}),Pa.jsx("div",{className:"w-full flex-1 overflow-y-auto max-h-[600px] \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:i[e].content})]})})},kR=({size:e})=>Pa.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Pa.jsx("path",{d:"M29.3333 13.334V10.6673H27.9999V8.00065H26.6666V5.33398H25.3333V4.00065H22.6666V2.66732H18.6666V1.33398H13.3333V2.66732H9.33325V4.00065H6.66658V5.33398H5.33325V6.66732H3.99992V9.33398H2.66659V12.0007H1.33325V20.0007H2.66659V22.6673H3.99992V25.334H5.33325V26.6673H6.66658V28.0006H9.33325V29.334H13.3333V30.6673H18.6666V29.334H22.6666V26.6673H18.6666V28.0006H13.3333V26.6673H9.33325V25.334H7.99992V24.0007H6.66658V21.334H5.33325V18.6673H3.99992V13.334H5.33325V10.6673H6.66658V8.00065H7.99992V6.66732H9.33325V5.33398H13.3333V4.00065H18.6666V5.33398H22.6666V6.66732H23.9999V8.00065H25.3333V10.6673H26.6666V13.334H27.9999V18.6673H26.6666V20.0007H23.9999V13.334H22.6666V10.6673H21.3333V9.33398H18.6666V8.00065H13.3333V9.33398H10.6666V10.6673H9.33325V13.334H7.99992V18.6673H9.33325V21.334H10.6666V22.6673H13.3333V24.0007H18.6666V22.6673H21.3333V21.334H22.6666V22.6673H27.9999V21.334H29.3333V18.6673H30.6666V13.334H29.3333ZM21.3333 18.6673H19.9999V20.0007H18.6666V21.334H13.3333V20.0007H11.9999V18.6673H10.6666V13.334H11.9999V12.0007H13.3333V10.6673H18.6666V12.0007H19.9999V13.334H21.3333V18.6673Z",fill:"white"})}),AR=({size:e})=>Pa.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Pa.jsx("path",{d:"M23.9999 15.9993V17.3327H25.3333V19.9993H23.9999V21.3327H21.3333V19.9993H19.9999V17.3327H21.3333V15.9993H23.9999Z",fill:"white"}),Pa.jsx("path",{d:"M30.6666 10.666V27.9993H29.3333V29.3327H2.66659V27.9993H1.33325V3.99935H2.66659V2.66602H27.9999V3.99935H29.3333V5.33268H3.99992V26.666H27.9999V11.9993H6.66658V9.33268H29.3333V10.666H30.6666Z",fill:"white"})]}),ER=({className:e="w-5 h-5",...t})=>Pa.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[Pa.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),Pa.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),Pa.jsx("path",{d:"M9 14h6"}),Pa.jsx("path",{d:"M9 18h6"}),Pa.jsx("path",{d:"M9 10h6"})]});let SR=class e extends Error{constructor(t,s={}){var n;const a=s.cause instanceof e?s.cause.details:(null==(n=s.cause)?void 0:n.message)?s.cause.message:s.details,i=s.cause instanceof e&&s.cause.docsPath||s.docsPath;super([t||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...a?[`Details: ${a}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),s.cause&&(this.cause=s.cause),this.details=a,this.docsPath=i,this.metaMessages=s.metaMessages,this.shortMessage=t}};function PR(e,t){const s=e.exec(t);return null==s?void 0:s.groups}const TR=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,BR=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,CR=/^\(.+?\).*?$/,MR=/^tuple(?<array>(\[(\d*)\])*)$/;function RR(e){let t=e.type;if(MR.test(e.type)&&"components"in e){t="(";const s=e.components.length;for(let a=0;a<s;a++)t+=RR(e.components[a]),a<s-1&&(t+=", ");const n=PR(MR,e.type);return t+=`)${(null==n?void 0:n.array)??""}`,RR({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function IR(e){let t="";const s=e.length;for(let n=0;n<s;n++)t+=RR(e[n]),n!==s-1&&(t+=", ");return t}const _R=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,DR=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,NR=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/,LR=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function FR(e){return LR.test(e)}function OR(e){return PR(LR,e)}const jR=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,UR=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/,GR=/^receive\(\) external payable$/,HR=new Set(["indexed"]),zR=new Set(["calldata","memory","storage"]);let VR=class extends SR{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},WR=class extends SR{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}},$R=class extends SR{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},qR=class extends SR{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},KR=class extends SR{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},QR=class extends SR{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${s}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},ZR=class extends SR{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}},XR=class extends SR{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},YR=class extends SR{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},JR=class extends SR{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}},eI=class extends SR{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}},tI=class extends SR{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};const sI=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function nI(e,t={}){if(function(e){return NR.test(e)}(e))return function(e,t={}){const s=function(e){return PR(NR,e)}(e);if(!s)throw new XR({signature:e,type:"function"});const n=lI(s.parameters),a=[],i=n.length;for(let o=0;o<i;o++)a.push(oI(n[o],{modifiers:zR,structs:t,type:"function"}));const r=[];if(s.returns){const e=lI(s.returns),n=e.length;for(let s=0;s<n;s++)r.push(oI(e[s],{modifiers:zR,structs:t,type:"function"}))}return{name:s.name,type:"function",stateMutability:s.stateMutability??"nonpayable",inputs:a,outputs:r}}(e,t);if(function(e){return DR.test(e)}(e))return function(e,t={}){const s=function(e){return PR(DR,e)}(e);if(!s)throw new XR({signature:e,type:"event"});const n=lI(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(oI(n[r],{modifiers:HR,structs:t,type:"event"}));return{name:s.name,type:"event",inputs:a}}(e,t);if(function(e){return _R.test(e)}(e))return function(e,t={}){const s=function(e){return PR(_R,e)}(e);if(!s)throw new XR({signature:e,type:"error"});const n=lI(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(oI(n[r],{structs:t,type:"error"}));return{name:s.name,type:"error",inputs:a}}(e,t);if(function(e){return jR.test(e)}(e))return function(e,t={}){const s=function(e){return PR(jR,e)}(e);if(!s)throw new XR({signature:e,type:"constructor"});const n=lI(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(oI(n[r],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:s.stateMutability??"nonpayable",inputs:a}}(e,t);if(function(e){return UR.test(e)}(e))return function(e){const t=function(e){return PR(UR,e)}(e);if(!t)throw new XR({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(function(e){return GR.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new YR({signature:e})}const aI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,iI=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,rI=/^u?int$/;function oI(e,t){var s,n;const a=function(e,t,s){let n="";if(s)for(const a of Object.entries(s)){if(!a)continue;let e="";for(const t of a[1])e+=`[${t.type}${t.name?`:${t.name}`:""}]`;n+=`(${a[0]}{${e}})`}return t?`${t}:${e}${n}`:e}(e,null==t?void 0:t.type,null==t?void 0:t.structs);if(sI.has(a))return sI.get(a);const i=CR.test(e),r=PR(i?iI:aI,e);if(!r)throw new $R({param:e});if(r.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||TR.test(e)||BR.test(e)||hI.test(e)}(r.name))throw new qR({param:e,name:r.name});const o=r.name?{name:r.name}:{},l="indexed"===r.modifier?{indexed:!0}:{},c=(null==t?void 0:t.structs)??{};let h,u={};if(i){h="tuple";const e=lI(r.type),t=[],s=e.length;for(let n=0;n<s;n++)t.push(oI(e[n],{structs:c}));u={components:t}}else if(r.type in c)h="tuple",u={components:c[r.type]};else if(rI.test(r.type))h=`${r.type}256`;else if(h=r.type,"struct"!==(null==t?void 0:t.type)&&!cI(h))throw new WR({type:h});if(r.modifier){if(!(null==(n=null==(s=null==t?void 0:t.modifiers)?void 0:s.has)?void 0:n.call(s,r.modifier)))throw new KR({param:e,type:null==t?void 0:t.type,modifier:r.modifier});if(zR.has(r.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(h,!!r.array))throw new QR({param:e,type:null==t?void 0:t.type,modifier:r.modifier})}const d={type:`${h}${r.array??""}`,...o,...l,...u};return sI.set(a,d),d}function lI(e,t=[],s="",n=0){const a=e.trim().length;for(let i=0;i<a;i++){const a=e[i],r=e.slice(i+1);switch(a){case",":return 0===n?lI(r,[...t,s.trim()]):lI(r,t,`${s}${a}`,n);case"(":return lI(r,t,`${s}${a}`,n+1);case")":return lI(r,t,`${s}${a}`,n-1);default:return lI(r,t,`${s}${a}`,n)}}if(""===s)return t;if(0!==n)throw new tI({current:s,depth:n});return t.push(s.trim()),t}function cI(e){return"address"===e||"bool"===e||"function"===e||"string"===e||TR.test(e)||BR.test(e)}const hI=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/,uI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function dI(e,t,s=new Set){const n=[],a=e.length;for(let i=0;i<a;i++){const a=e[i];if(CR.test(a.type))n.push(a);else{const e=PR(uI,a.type);if(!(null==e?void 0:e.type))throw new ZR({abiParameter:a});const{array:i,type:r}=e;if(r in t){if(s.has(r))throw new eI({type:r});n.push({...a,type:`tuple${i??""}`,components:dI(t[r]??[],t,new Set([...s,r]))})}else{if(!cI(r))throw new VR({type:r});n.push(a)}}}return n}function pI(e){const t=function(e){const t={},s=e.length;for(let r=0;r<s;r++){const s=e[r];if(!FR(s))continue;const n=OR(s);if(!n)throw new XR({signature:s,type:"struct"});const a=n.properties.split(";"),i=[],o=a.length;for(let e=0;e<o;e++){const t=a[e].trim();if(!t)continue;const s=oI(t,{type:"struct"});i.push(s)}if(!i.length)throw new JR({signature:s});t[n.name]=i}const n={},a=Object.entries(t),i=a.length;for(let r=0;r<i;r++){const[e,s]=a[r];n[e]=dI(s,t)}return n}(e),s=[],n=e.length;for(let a=0;a<n;a++){const n=e[a];FR(n)||s.push(nI(n,t))}return s}function fI(e,t,s){const n=e[t.name];if("function"==typeof n)return n;const a=e[s];return"function"==typeof a?a:s=>t(e,s)}function mI(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new $I(e.type);return`${e.name}(${gI(e.inputs,{includeName:t})})`}function gI(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${gI(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function yI(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function bI(e){return yI(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const vI="2.27.0";let wI={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:s})=>t?`${e??"https://viem.sh"}${t}${s?`#${s}`:""}`:void 0,version:`viem@${vI}`},xI=class e extends Error{constructor(t,s={}){var n;const a=s.cause instanceof e?s.cause.details:(null==(i=s.cause)?void 0:i.message)?s.cause.message:s.details;var i;const r=s.cause instanceof e&&s.cause.docsPath||s.docsPath,o=null==(n=wI.getDocsUrl)?void 0:n.call(wI,{...s,docsPath:r});super([t||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...a?[`Details: ${a}`]:[],...wI.version?[`Version: ${wI.version}`]:[]].join("\n"),s.cause?{cause:s.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=a,this.docsPath=r,this.metaMessages=s.metaMessages,this.name=s.name??this.name,this.shortMessage=t,this.version=vI}walk(e){return kI(this,e)}};function kI(e,t){return(null==t?void 0:t(e))?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?kI(e.cause,t):t?null:e}class AI extends xI{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class EI extends xI{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class SI extends xI{constructor({data:e,params:t,size:s}){super([`Data size of ${s} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${gI(t,{includeName:!0})})`,`Data:   ${e} (${s} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=s}}class PI extends xI{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class TI extends xI{constructor({expectedLength:e,givenLength:t,type:s}){super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class BI extends xI{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${bI(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class CI extends xI{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class MI extends xI{constructor(e,{docsPath:t}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join("\n"),{docsPath:t,name:"AbiErrorInputsNotFoundError"})}}class RI extends xI{constructor(e,{docsPath:t}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join("\n"),{docsPath:t,name:"AbiErrorNotFoundError"})}}class II extends xI{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class _I extends xI{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class DI extends xI{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class NI extends xI{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t,name:"AbiEventNotFoundError"})}}class LI extends xI{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class FI extends xI{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class OI extends xI{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class jI extends xI{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${mI(e.abiItem)}\`, and`,`\`${t.type}\` in \`${mI(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let UI=class extends xI{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}};class GI extends xI{constructor({abiItem:e,data:t,params:s,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${gI(s,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=s,this.size=n}}class HI extends xI{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${mI(e,{includeName:!0})}".`].join("\n"),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class zI extends xI{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class VI extends xI{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}let WI=class extends xI{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}};class $I extends xI{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class qI extends xI{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let KI=class extends xI{constructor({offset:e,position:t,size:s}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${s}).`,{name:"SliceOffsetOutOfBoundsError"})}},QI=class extends xI{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};class ZI extends xI{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} is expected to be ${t} ${s} long, but is ${e} ${s} long.`,{name:"InvalidBytesLengthError"})}}function XI(e,{dir:t,size:s=32}={}){return"string"==typeof e?YI(e,{dir:t,size:s}):function(e,{dir:t,size:s=32}={}){if(null===s)return e;if(e.length>s)throw new QI({size:e.length,targetSize:s,type:"bytes"});const n=new Uint8Array(s);for(let a=0;a<s;a++){const i="right"===t;n[i?a:s-a-1]=e[i?a:e.length-a-1]}return n}(e,{dir:t,size:s})}function YI(e,{dir:t,size:s=32}={}){if(null===s)return e;const n=e.replace("0x","");if(n.length>2*s)throw new QI({size:Math.ceil(n.length/2),targetSize:s,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*s,"0")}`}let JI=class extends xI{constructor({max:e,min:t,signed:s,size:n,value:a}){super(`Number "${a}" is not in safe ${n?`${8*n}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}};class e_ extends xI{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class t_ extends xI{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let s_=class extends xI{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function n_(e,{dir:t="left"}={}){let s="string"==typeof e?e.replace("0x",""):e,n=0;for(let a=0;a<s.length-1&&"0"===s["left"===t?a:s.length-a-1].toString();a++)n++;return s="left"===t?s.slice(n):s.slice(0,s.length-n),"string"==typeof e?(1===s.length&&"right"===t&&(s=`${s}0`),`0x${s.length%2==1?`0${s}`:s}`):s}function a_(e,{size:t}){if(bI(e)>t)throw new s_({givenSize:bI(e),maxSize:t})}function i_(e,t={}){const{signed:s}=t;t.size&&a_(e,{size:t.size});const n=BigInt(e);if(!s)return n;const a=(e.length-2)/2;return n<=(1n<<8n*BigInt(a)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*a,"f")}`)-1n}function r_(e,t={}){return Number(i_(e,t))}const o_=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l_(e,t={}){return"number"==typeof e||"bigint"==typeof e?u_(e,t):"string"==typeof e?p_(e,t):"boolean"==typeof e?c_(e,t):h_(e,t)}function c_(e,t={}){const s=`0x${Number(e)}`;return"number"==typeof t.size?(a_(s,{size:t.size}),XI(s,{size:t.size})):s}function h_(e,t={}){let s="";for(let a=0;a<e.length;a++)s+=o_[e[a]];const n=`0x${s}`;return"number"==typeof t.size?(a_(n,{size:t.size}),XI(n,{dir:"right",size:t.size})):n}function u_(e,t={}){const{signed:s,size:n}=t,a=BigInt(e);let i;n?i=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const r="bigint"==typeof i&&s?-i-1n:0;if(i&&a>i||a<r){const t="bigint"==typeof e?"n":"";throw new JI({max:i?`${i}${t}`:void 0,min:`${r}${t}`,signed:s,size:n,value:`${e}${t}`})}const o=`0x${(s&&a<0?(1n<<BigInt(8*n))+BigInt(a):a).toString(16)}`;return n?XI(o,{size:n}):o}const d_=new TextEncoder;function p_(e,t={}){return h_(d_.encode(e),t)}const f_=new TextEncoder;function m_(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return b_(u_(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const s=new Uint8Array(1);return s[0]=Number(e),"number"==typeof t.size?(a_(s,{size:t.size}),XI(s,{size:t.size})):s}(e,t):yI(e)?b_(e,t):v_(e,t)}const g_={zero:48,nine:57,A:65,F:70,a:97,f:102};function y_(e){return e>=g_.zero&&e<=g_.nine?e-g_.zero:e>=g_.A&&e<=g_.F?e-(g_.A-10):e>=g_.a&&e<=g_.f?e-(g_.a-10):void 0}function b_(e,t={}){let s=e;t.size&&(a_(s,{size:t.size}),s=XI(s,{dir:"right",size:t.size}));let n=s.slice(2);n.length%2&&(n=`0${n}`);const a=n.length/2,i=new Uint8Array(a);for(let r=0,o=0;r<a;r++){const e=y_(n.charCodeAt(o++)),t=y_(n.charCodeAt(o++));if(void 0===e||void 0===t)throw new xI(`Invalid byte sequence ("${n[o-2]}${n[o-1]}" in "${n}").`);i[r]=16*e+t}return i}function v_(e,t={}){const s=f_.encode(e);return"number"==typeof t.size?(a_(s,{size:t.size}),XI(s,{dir:"right",size:t.size})):s}function w_(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function x_(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function k_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function A_(e,t){x_(e);const s=t.outputLen;if(e.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}const E_=BigInt(2**32-1),S_=BigInt(32);function P_(e,t=!1){return t?{h:Number(e&E_),l:Number(e>>S_&E_)}:{h:0|Number(e>>S_&E_),l:0|Number(e&E_)}}function T_(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){const{h:i,l:r}=P_(e[a],t);[s[a],n[a]]=[i,r]}return[s,n]}const B_="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function C_(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function M_(e,t){return e<<32-t|e>>>t}const R_=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function I_(e){for(let s=0;s<e.length;s++)e[s]=(t=e[s])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function __(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),x_(e),e}let D_=class{clone(){return this._cloneInto()}};function N_(e){const t=t=>e().update(__(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}function L_(e=32){if(B_&&"function"==typeof B_.getRandomValues)return B_.getRandomValues(new Uint8Array(e));if(B_&&"function"==typeof B_.randomBytes)return B_.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const F_=[],O_=[],j_=[],U_=BigInt(0),G_=BigInt(1),H_=BigInt(2),z_=BigInt(7),V_=BigInt(256),W_=BigInt(113);for(let _V=0,DV=G_,NV=1,LV=0;_V<24;_V++){[NV,LV]=[LV,(2*NV+3*LV)%5],F_.push(2*(5*LV+NV)),O_.push((_V+1)*(_V+2)/2%64);let e=U_;for(let t=0;t<7;t++)DV=(DV<<G_^(DV>>z_)*W_)%V_,DV&H_&&(e^=G_<<(G_<<BigInt(t))-G_);j_.push(e)}const[$_,q_]=T_(j_,!0),K_=(e,t,s)=>s>32?((e,t,s)=>t<<s-32|e>>>64-s)(e,t,s):((e,t,s)=>e<<s|t>>>32-s)(e,t,s),Q_=(e,t,s)=>s>32?((e,t,s)=>e<<s-32|t>>>64-s)(e,t,s):((e,t,s)=>t<<s|e>>>32-s)(e,t,s);let Z_=class e extends D_{constructor(e,t,s,n=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,w_(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){R_||I_(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,a=(n+2)%10,i=s[a],r=s[a+1],o=K_(i,r,1)^s[t],l=Q_(i,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],a=e[3];for(let s=0;s<24;s++){const n=O_[s],i=K_(t,a,n),r=Q_(t,a,n),o=F_[s];t=e[o],a=e[o+1],e[o]=i,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=$_[n],e[1]^=q_[n]}s.fill(0)}(this.state32,this.rounds),R_||I_(this.state32),this.posOut=0,this.pos=0}update(e){k_(this);const{blockLen:t,state:s}=this,n=(e=__(e)).length;for(let a=0;a<n;){const i=Math.min(t-this.pos,n-a);for(let t=0;t<i;t++)s[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){k_(this,!1),x_(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,a=e.length;n<a;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return w_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(A_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:s,suffix:n,outputLen:a,rounds:i,enableXOF:r}=this;return t||(t=new e(s,n,a,r,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=a,t.enableXOF=r,t.destroyed=this.destroyed,t}};const X_=(()=>N_((()=>new Z_(136,1,32))))();function Y_(e,t){const s=t||"hex",n=X_(yI(e,{strict:!1})?m_(e):e);return"bytes"===s?n:l_(n)}function J_(e){return Y_(m_(function(e){let t=!0,s="",n=0,a="",i=!1;for(let r=0;r<e.length;r++){const o=e[r];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t)if(0!==n)" "!==o?(a+=o,s+=o):","!==e[r-1]&&","!==s&&",("!==s&&(s="",t=!1);else if(" "===o&&["event","function",""].includes(a))a="";else if(a+=o,")"===o){i=!0;break}}if(!i)throw new xI("Unable to normalize signature.");return a}("string"==typeof(t=e)?t:"function"===(s=t).type?`function ${s.name}(${IR(s.inputs)})${s.stateMutability&&"nonpayable"!==s.stateMutability?` ${s.stateMutability}`:""}${(null==(n=s.outputs)?void 0:n.length)?` returns (${IR(s.outputs)})`:""}`:"event"===s.type?`event ${s.name}(${IR(s.inputs)})`:"error"===s.type?`error ${s.name}(${IR(s.inputs)})`:"constructor"===s.type?`constructor(${IR(s.inputs)})${"payable"===s.stateMutability?" payable":""}`:"fallback"===s.type?"fallback() external"+("payable"===s.stateMutability?" payable":""):"receive() external payable")));var t,s,n}const eD=J_;let tD=class extends xI{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},sD=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}};const nD=new sD(8192);function aD(e,t){if(nD.has(`${e}.${t}`))return nD.get(`${e}.${t}`);const s=e.substring(2).toLowerCase(),n=Y_(v_(s),"bytes"),a=s.split("");for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&a[r]&&(a[r]=a[r].toUpperCase()),(15&n[r>>1])>=8&&a[r+1]&&(a[r+1]=a[r+1].toUpperCase());const i=`0x${a.join("")}`;return nD.set(`${e}.${t}`,i),i}function iD(e,t){if(!lD(e,{strict:!1}))throw new tD({address:e});return aD(e,t)}const rD=/^0x[a-fA-F0-9]{40}$/,oD=new sD(8192);function lD(e,t){const{strict:s=!0}=t??{},n=`${e}.${s}`;if(oD.has(n))return oD.get(n);const a=!(!rD.test(e)||e.toLowerCase()!==e&&s&&aD(e)!==e);return oD.set(n,a),a}function cD(e){return"string"==typeof e[0]?hD(e):function(e){let t=0;for(const a of e)t+=a.length;const s=new Uint8Array(t);let n=0;for(const a of e)s.set(a,n),n+=a.length;return s}(e)}function hD(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function uD(e,t,s,{strict:n}={}){return yI(e,{strict:!1})?mD(e,t,s,{strict:n}):fD(e,t,s,{strict:n})}function dD(e,t){if("number"==typeof t&&t>0&&t>bI(e)-1)throw new KI({offset:t,position:"start",size:bI(e)})}function pD(e,t,s){if("number"==typeof t&&"number"==typeof s&&bI(e)!==s-t)throw new KI({offset:s,position:"end",size:bI(e)})}function fD(e,t,s,{strict:n}={}){dD(e,t);const a=e.slice(t,s);return n&&pD(a,t,s),a}function mD(e,t,s,{strict:n}={}){dD(e,t);const a=`0x${e.replace("0x","").slice(2*(t??0),2*(s??e.length))}`;return n&&pD(a,t,s),a}const gD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,yD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function bD(e,t){if(e.length!==t.length)throw new CI({expectedLength:e.length,givenLength:t.length});const s=function({params:e,values:t}){const s=[];for(let n=0;n<e.length;n++)s.push(vD({param:e[n],value:t[n]}));return s}({params:e,values:t}),n=wD(s);return 0===n.length?"0x":n}function vD({param:e,value:t}){const s=xD(e.type);if(s){const[n,a]=s;return function(e,{length:t,param:s}){const n=null===t;if(!Array.isArray(e))throw new WI(e);if(!n&&e.length!==t)throw new TI({expectedLength:t,givenLength:e.length,type:`${s.type}[${t}]`});let a=!1;const i=[];for(let r=0;r<e.length;r++){const t=vD({param:s,value:e[r]});t.dynamic&&(a=!0),i.push(t)}if(n||a){const e=wD(i);if(n){const t=u_(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?cD([t,e]):t}}if(a)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:cD(i.map((({encoded:e})=>e)))}}(t,{length:n,param:{...e,type:a}})}if("tuple"===e.type)return function(e,{param:t}){let s=!1;const n=[];for(let a=0;a<t.components.length;a++){const i=t.components[a],r=vD({param:i,value:e[Array.isArray(e)?a:i.name]});n.push(r),r.dynamic&&(s=!0)}return{dynamic:s,encoded:s?wD(n):cD(n.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!lD(e))throw new tD({address:e});return{dynamic:!1,encoded:YI(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new xI(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:YI(c_(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const s=e.type.startsWith("int"),[,,n="256"]=yD.exec(e.type)??[];return function(e,{signed:t,size:s=256}){if("number"==typeof s){const n=2n**(BigInt(s)-(t?1n:0n))-1n,a=t?-n-1n:0n;if(e>n||e<a)throw new JI({max:n.toString(),min:a.toString(),signed:t,size:s/8,value:e.toString()})}return{dynamic:!1,encoded:u_(e,{size:32,signed:t})}}(t,{signed:s,size:Number(n)})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,s]=t.type.split("bytes"),n=bI(e);if(!s){let t=e;return n%32!=0&&(t=YI(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:cD([YI(u_(n,{size:32})),t])}}if(n!==Number.parseInt(s))throw new BI({expectedSize:Number.parseInt(s),value:e});return{dynamic:!1,encoded:YI(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=p_(e),s=Math.ceil(bI(t)/32),n=[];for(let a=0;a<s;a++)n.push(YI(uD(t,32*a,32*(a+1)),{dir:"right"}));return{dynamic:!0,encoded:cD([YI(u_(bI(t),{size:32})),...n])}}(t);throw new zI(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function wD(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:s,encoded:n}=e[i];t+=s?32:bI(n)}const s=[],n=[];let a=0;for(let i=0;i<e.length;i++){const{dynamic:r,encoded:o}=e[i];r?(s.push(u_(t+a,{size:32})),n.push(o),a+=bI(o)):s.push(o)}return cD([...s,...n])}function xD(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const kD=e=>uD(J_(e),0,4);function AD(e){const{abi:t,args:s=[],name:n}=e,a=yI(n,{strict:!1}),i=t.filter((e=>a?"function"===e.type?kD(e)===n:"event"===e.type&&eD(e)===n:"name"in e&&e.name===n));if(0===i.length)return;if(1===i.length)return i[0];let r;for(const o of i)if("inputs"in o)if(s&&0!==s.length){if(o.inputs&&0!==o.inputs.length&&o.inputs.length===s.length&&s.every(((e,t)=>{const s="inputs"in o&&o.inputs[t];return!!s&&ED(e,s)}))){if(r&&"inputs"in r&&r.inputs){const e=SD(o.inputs,r.inputs,s);if(e)throw new jI({abiItem:o,type:e[0]},{abiItem:r,type:e[1]})}r=o}}else if(!o.inputs||0===o.inputs.length)return o;return r||i[0]}function ED(e,t){const s=typeof e,n=t.type;switch(n){case"address":return lD(e,{strict:!1});case"bool":return"boolean"===s;case"function":case"string":return"string"===s;default:return"tuple"===n&&"components"in t?Object.values(t.components).every(((t,s)=>ED(Object.values(e)[s],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?"number"===s||"bigint"===s:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?"string"===s||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)&&Array.isArray(e)&&e.every((e=>ED(e,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})))}}function SD(e,t,s){for(const n in e){const a=e[n],i=t[n];if("tuple"===a.type&&"tuple"===i.type&&"components"in a&&"components"in i)return SD(a.components,i.components,s[n]);const r=[a.type,i.type];if(r.includes("address")&&r.includes("bytes20")||(r.includes("address")&&r.includes("string")||r.includes("address")&&r.includes("bytes"))&&lD(s[n],{strict:!1}))return r}}const PD="/docs/contract/encodeEventTopics";function TD(e){var t;const{abi:s,eventName:n,args:a}=e;let i=s[0];if(n){const e=AD({abi:s,name:n});if(!e)throw new NI(n,{docsPath:PD});i=e}if("event"!==i.type)throw new NI(void 0,{docsPath:PD});const r=mI(i),o=eD(r);let l=[];if(a&&"inputs"in i){const e=null==(t=i.inputs)?void 0:t.filter((e=>"indexed"in e&&e.indexed)),s=Array.isArray(a)?a:Object.values(a).length>0?(null==e?void 0:e.map((e=>a[e.name])))??[]:[];s.length>0&&(l=(null==e?void 0:e.map(((e,t)=>Array.isArray(s[t])?s[t].map(((n,a)=>BD({param:e,value:s[t][a]}))):void 0!==s[t]&&null!==s[t]?BD({param:e,value:s[t]}):null)))??[])}return[o,...l]}function BD({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return Y_(m_(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new qI(e.type);return bD([e],[t])}function CD(e,{method:t}){var s,n;const a={};return"fallback"===e.transport.type&&(null==(n=(s=e.transport).onResponse)||n.call(s,(({method:e,response:s,status:n,transport:i})=>{"success"===n&&t===e&&(a[s]=i.request)}))),t=>a[t]||e.request}async function MD(e,t){const{address:s,abi:n,args:a,eventName:i,fromBlock:r,strict:o,toBlock:l}=t,c=CD(e,{method:"eth_newFilter"}),h=i?TD({abi:n,args:a,eventName:i}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:s,fromBlock:"bigint"==typeof r?u_(r):r,toBlock:"bigint"==typeof l?u_(l):l,topics:h}]});return{abi:n,args:a,eventName:i,id:u,request:c(u),strict:Boolean(o),type:"event"}}function RD(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const ID="/docs/contract/encodeFunctionData";function _D(e){const{args:t}=e,{abi:s,functionName:n}=1===e.abi.length&&(null==(a=e.functionName)?void 0:a.startsWith("0x"))?e:function(e){const{abi:t,args:s,functionName:n}=e;let a=t[0];if(n){const e=AD({abi:t,args:s,name:n});if(!e)throw new LI(n,{docsPath:ID});a=e}if("function"!==a.type)throw new LI(void 0,{docsPath:ID});return{abi:[a],functionName:kD(mI(a))}}(e);var a;const i=s[0];return hD([n,("inputs"in i&&i.inputs?bD(i.inputs,t??[]):void 0)??"0x"])}const DD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},ND={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},LD={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class FD extends xI{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class OD extends xI{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class jD extends xI{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const UD={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new jD({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new OD({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new FD({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new FD({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const s=t??this.position;return this.assertPosition(s+e-1),this.bytes.subarray(s,s+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const s=this.inspectBytes(e);return this.position+=t??e,s},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function GD(e,{recursiveReadLimit:t=8192}={}){const s=Object.create(UD);return s.bytes=e,s.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),s.positionReadCount=new Map,s.recursiveReadLimit=t,s}function HD(e,t={}){return void 0!==t.size&&a_(e,{size:t.size}),i_(h_(e,t),t)}function zD(e,t={}){let s=e;if(void 0!==t.size&&(a_(s,{size:t.size}),s=n_(s)),s.length>1||s[0]>1)throw new e_(s);return Boolean(s[0])}function VD(e,t={}){return void 0!==t.size&&a_(e,{size:t.size}),r_(h_(e,t),t)}function WD(e,t){const s="string"==typeof t?b_(t):t,n=GD(s);if(0===bI(s)&&e.length>0)throw new PI;if(bI(t)&&bI(t)<32)throw new SI({data:"string"==typeof t?t:h_(t),params:e,size:bI(t)});let a=0;const i=[];for(let r=0;r<e.length;++r){const t=e[r];n.setPosition(a);const[s,o]=$D(n,t,{staticPosition:0});a+=o,i.push(s)}return i}function $D(e,t,{staticPosition:s}){const n=xD(t.type);if(n){const[a,i]=n;return function(e,t,{length:s,staticPosition:n}){if(!s){const s=n+VD(e.readBytes(KD)),a=s+qD;e.setPosition(s);const i=VD(e.readBytes(qD)),r=QD(t);let o=0;const l=[];for(let n=0;n<i;++n){e.setPosition(a+(r?32*n:o));const[s,i]=$D(e,t,{staticPosition:a});o+=i,l.push(s)}return e.setPosition(n+32),[l,32]}if(QD(t)){const a=n+VD(e.readBytes(KD)),i=[];for(let n=0;n<s;++n){e.setPosition(a+32*n);const[s]=$D(e,t,{staticPosition:a});i.push(s)}return e.setPosition(n+32),[i,32]}let a=0;const i=[];for(let r=0;r<s;++r){const[s,r]=$D(e,t,{staticPosition:n+a});a+=r,i.push(s)}return[i,a]}(e,{...t,type:i},{length:a,staticPosition:s})}if("tuple"===t.type)return function(e,t,{staticPosition:s}){const n=0===t.components.length||t.components.some((({name:e})=>!e)),a=n?[]:{};let i=0;if(QD(t)){const r=s+VD(e.readBytes(KD));for(let s=0;s<t.components.length;++s){const o=t.components[s];e.setPosition(r+i);const[l,c]=$D(e,o,{staticPosition:r});i+=c,a[n?s:null==o?void 0:o.name]=l}return e.setPosition(s+32),[a,32]}for(let r=0;r<t.components.length;++r){const o=t.components[r],[l,c]=$D(e,o,{staticPosition:s});a[n?r:null==o?void 0:o.name]=l,i+=c}return[a,i]}(e,t,{staticPosition:s});if("address"===t.type)return function(e){return[aD(h_(fD(e.readBytes(32),-20))),32]}(e);if("bool"===t.type)return function(e){return[zD(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:s}){const[n,a]=t.type.split("bytes");if(!a){const t=VD(e.readBytes(32));e.setPosition(s+t);const n=VD(e.readBytes(32));if(0===n)return e.setPosition(s+32),["0x",32];const a=e.readBytes(n);return e.setPosition(s+32),[h_(a),32]}return[h_(e.readBytes(Number.parseInt(a),32)),32]}(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const s=t.type.startsWith("int"),n=Number.parseInt(t.type.split("int")[1]||"256"),a=e.readBytes(32);return[n>48?HD(a,{signed:s}):VD(a,{signed:s}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const s=t+VD(e.readBytes(32));e.setPosition(s);const n=VD(e.readBytes(32));if(0===n)return e.setPosition(t+32),["",32];const a=function(e,t={}){let s=e;return void 0!==t.size&&(a_(s,{size:t.size}),s=n_(s,{dir:"right"})),(new TextDecoder).decode(s)}(n_(e.readBytes(n,32)));return e.setPosition(t+32),[a,32]}(e,{staticPosition:s});throw new VI(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const qD=32,KD=32;function QD(e){var t;const{type:s}=e;if("string"===s)return!0;if("bytes"===s)return!0;if(s.endsWith("[]"))return!0;if("tuple"===s)return null==(t=e.components)?void 0:t.some(QD);const n=xD(e.type);return!(!n||!QD({...e,type:n[1]}))}function ZD(e){const{abi:t,data:s}=e,n=uD(s,0,4);if("0x"===n)throw new PI;const a=[...t||[],ND,LD].find((e=>"error"===e.type&&n===kD(mI(e))));if(!a)throw new II(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:a,args:"inputs"in a&&a.inputs&&a.inputs.length>0?WD(a.inputs,uD(s,4)):void 0,errorName:a.name}}const XD=(e,t,s)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),s);function YD({abiItem:e,args:t,includeFunctionName:s=!0,includeName:n=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${s?e.name:""}(${e.inputs.map(((e,s)=>`${n&&e.name?`${e.name}: `:""}${"object"==typeof t[s]?XD(t[s]):t[s]}`)).join(", ")})`}const JD={gwei:9,wei:18},eN={ether:-9,wei:9};function tN(e,t){let s=e.toString();const n=s.startsWith("-");n&&(s=s.slice(1)),s=s.padStart(t,"0");let[a,i]=[s.slice(0,s.length-t),s.slice(s.length-t)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${a||"0"}${i?`.${i}`:""}`}function sN(e,t="wei"){return tN(e,JD[t])}function nN(e,t="wei"){return tN(e,eN[t])}class aN extends xI{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class iN extends xI{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function rN(e){return e.reduce(((e,{slot:t,value:s})=>`${e}        ${t}: ${s}\n`),"")}function oN(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),s=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(s+1)}  ${t}`)).join("\n")}class lN extends xI{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}class cN extends xI{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",oN(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class hN extends xI{constructor(e,{account:t,docsPath:s,chain:n,data:a,gas:i,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u}){var d;const p=oN({chain:n&&`${null==n?void 0:n.name} (id: ${null==n?void 0:n.id})`,from:null==t?void 0:t.address,to:h,value:void 0!==u&&`${sN(u)} ${(null==(d=null==n?void 0:n.nativeCurrency)?void 0:d.symbol)||"ETH"}`,data:a,gas:i,gasPrice:void 0!==r&&`${nN(r)} gwei`,maxFeePerGas:void 0!==o&&`${nN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${nN(l)} gwei`,nonce:c});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class uN extends xI{constructor({blockHash:e,blockNumber:t,blockTag:s,hash:n,index:a}){let i="Transaction";s&&void 0!==a&&(i=`Transaction at block time "${s}" at index "${a}"`),e&&void 0!==a&&(i=`Transaction at block hash "${e}" at index "${a}"`),t&&void 0!==a&&(i=`Transaction at block number "${t}" at index "${a}"`),n&&(i=`Transaction with hash "${n}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class dN extends xI{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class pN extends xI{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const fN=e=>e;class mN extends xI{constructor(e,{account:t,docsPath:s,chain:n,data:a,gas:i,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u,stateOverride:d}){var p;const f=t?RD(t):void 0;let m=oN({from:null==f?void 0:f.address,to:h,value:void 0!==u&&`${sN(u)} ${(null==(p=null==n?void 0:n.nativeCurrency)?void 0:p.symbol)||"ETH"}`,data:a,gas:i,gasPrice:void 0!==r&&`${nN(r)} gwei`,maxFeePerGas:void 0!==o&&`${nN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${nN(l)} gwei`,nonce:c});d&&(m+=`\n${function(e){return e.reduce(((e,{address:t,...s})=>{let n=`${e}    ${t}:\n`;return s.nonce&&(n+=`      nonce: ${s.nonce}\n`),s.balance&&(n+=`      balance: ${s.balance}\n`),s.code&&(n+=`      code: ${s.code}\n`),s.state&&(n+="      state:\n",n+=rN(s.state)),s.stateDiff&&(n+="      stateDiff:\n",n+=rN(s.stateDiff)),n}),"  State Override:\n").slice(0,-1)}(d)}`),super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class gN extends xI{constructor(e,{abi:t,args:s,contractAddress:n,docsPath:a,functionName:i,sender:r}){const o=AD({abi:t,args:s,name:i}),l=o?YD({abiItem:o,args:s,includeFunctionName:!1,includeName:!1}):void 0,c=oN({address:n&&n,function:o?mI(o,{includeName:!0}):void 0,args:l&&"()"!==l&&`${[...Array((null==i?void 0:i.length)??0).keys()].map((()=>" ")).join("")}${l}`,sender:r});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],c&&"Contract Call:",c].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=s,this.cause=e,this.contractAddress=n,this.functionName=i,this.sender=r}}class yN extends xI{constructor({abi:e,data:t,functionName:s,message:n}){let a,i,r,o,l;if(t&&"0x"!==t)try{i=ZD({abi:e,data:t});const{abiItem:s,errorName:n,args:a}=i;if("Error"===n)o=a[0];else if("Panic"===n){const[e]=a;o=DD[e]}else{const e=s?mI(s,{includeName:!0}):void 0,t=s&&a?YD({abiItem:s,args:a,includeFunctionName:!1,includeName:!1}):void 0;r=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array((null==n?void 0:n.length)??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(c){a=c}else n&&(o=n);a instanceof II&&(l=a.signature,r=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(o&&"execution reverted"!==o||l?[`The contract function "${s}" reverted with the following ${l?"signature":"reason"}:`,o||l].join("\n"):`The contract function "${s}" reverted.`,{cause:a,metaMessages:r,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=t,this.reason=o,this.signature=l}}class bN extends xI{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class vN extends xI{constructor({factory:e}){super("Deployment for counterfactual contract call failed"+(e?` for factory "${e}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class wN extends xI{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class xN extends xI{constructor({body:e,cause:t,details:s,headers:n,status:a,url:i}){super("HTTP request failed.",{cause:t,details:s,metaMessages:[a&&`Status: ${a}`,`URL: ${i}`,e&&`Request body: ${XD(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=a,this.url=i}}class kN extends xI{constructor({body:e,error:t,url:s}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${s}`,`Request body: ${XD(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class AN extends xI{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${XD(e)}`],name:"TimeoutError"})}}class EN extends xI{constructor(e,{code:t,docsPath:s,metaMessages:n,name:a,shortMessage:i}){super(i,{cause:e,docsPath:s,metaMessages:n||(null==e?void 0:e.metaMessages),name:a||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=a||e.name,this.code=e instanceof kN?e.code:t??-1}}class SN extends EN{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class PN extends EN{constructor(e){super(e,{code:PN.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(PN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class TN extends EN{constructor(e){super(e,{code:TN.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(TN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class BN extends EN{constructor(e,{method:t}={}){super(e,{code:BN.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(BN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class CN extends EN{constructor(e){super(e,{code:CN.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(CN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class MN extends EN{constructor(e){super(e,{code:MN.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(MN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class RN extends EN{constructor(e){super(e,{code:RN.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(RN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class IN extends EN{constructor(e){super(e,{code:IN.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(IN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class _N extends EN{constructor(e){super(e,{code:_N.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(_N,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class DN extends EN{constructor(e){super(e,{code:DN.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(DN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class NN extends EN{constructor(e,{method:t}={}){super(e,{code:NN.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(NN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class LN extends EN{constructor(e){super(e,{code:LN.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(LN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class FN extends EN{constructor(e){super(e,{code:FN.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(FN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ON extends SN{constructor(e){super(e,{code:ON.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ON,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class jN extends SN{constructor(e){super(e,{code:jN.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(jN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class UN extends SN{constructor(e,{method:t}={}){super(e,{code:UN.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(UN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class GN extends SN{constructor(e){super(e,{code:GN.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(GN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class HN extends SN{constructor(e){super(e,{code:HN.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(HN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class zN extends SN{constructor(e){super(e,{code:zN.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(zN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class VN extends SN{constructor(e){super(e,{code:VN.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(VN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class WN extends SN{constructor(e){super(e,{code:WN.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(WN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class $N extends SN{constructor(e){super(e,{code:$N.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty($N,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class qN extends SN{constructor(e){super(e,{code:qN.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(qN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class KN extends SN{constructor(e){super(e,{code:KN.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(KN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class QN extends SN{constructor(e){super(e,{code:QN.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(QN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class ZN extends SN{constructor(e){super(e,{code:ZN.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(ZN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class XN extends EN{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const YN=3;function JN(e,{abi:t,address:s,args:n,docsPath:a,functionName:i,sender:r}){const o=e instanceof wN?e:e instanceof xI?e.walk((e=>"data"in e))||e.walk():{},{code:l,data:c,details:h,message:u,shortMessage:d}=o,p=e instanceof PI?new bN({functionName:i}):[YN,MN.code].includes(l)&&(c||h||u||d)?new yN({abi:t,data:"object"==typeof c?c.data:c,functionName:i,message:o instanceof kN?h:d??u}):e;return new gN(p,{abi:t,args:n,contractAddress:s,docsPath:a,functionName:i,sender:r})}const eL={},tL=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),i=(null==a?void 0:a.nonce)||(null==a?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,s),t in eL)return;eL[t]=!0;const n=t.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(s)for(let s=e.length-1;s>=0;s--){const a=e[s];if(a.href===t&&(!n||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${t}"]${a}`))return;const r=document.createElement("link");return r.rel=n?"stylesheet":"modulepreload",n||(r.as="script"),r.crossOrigin="",r.href=t,i&&r.setAttribute("nonce",i),document.head.appendChild(r),n?new Promise(((e,s)=>{r.addEventListener("load",e),r.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))};function sL(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function nL({hash:e,signature:t}){return s=await async function({hash:e,signature:t}){const s=yI(e)?e:l_(e),{secp256k1:n}=await tL((async()=>{const{secp256k1:e}=await Promise.resolve().then((()=>oz));return{secp256k1:e}}),[],import.meta.url);return`0x${(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:s,v:a,yParity:i}=t,r=sL(Number(i??a));return new n.Signature(i_(e),i_(s)).addRecoveryBit(r)}const e=yI(t)?t:l_(t),s=sL(r_(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(s)})().recoverPublicKey(s.substring(2)).toHex(!1)}`}({hash:e,signature:t}),aD(`0x${Y_(`0x${s.substring(4)}`).substring(26)}`);var s}function aL(e,t="hex"){const s=iL(e),n=GD(new Uint8Array(s.length));return s.encode(n),"hex"===t?h_(n.bytes):n.bytes}function iL(e){return Array.isArray(e)?function(e){const t=e.reduce(((e,t)=>e+t.length),0),s=rL(t);return{length:t<=55?1+t:1+s+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+s),1===s?n.pushUint8(t):2===s?n.pushUint16(t):3===s?n.pushUint24(t):n.pushUint32(t));for(const{encode:t}of e)t(n)}}}(e.map((e=>iL(e)))):function(e){const t="string"==typeof e?b_(e):e,s=rL(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+s+t.length,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+s),1===s?e.pushUint8(t.length):2===s?e.pushUint16(t.length):3===s?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function rL(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new xI("Length is too large.")}function oL(e){const{chainId:t,nonce:s,to:n}=e,a=e.contractAddress??e.address,i=Y_(hD(["0x05",aL([t?u_(t):"0x",a,s?u_(s):"0x"])]));return"bytes"===n?b_(i):i}async function lL(e){const{authorization:t,signature:s}=e;return nL({hash:oL(t),signature:s??t})}class cL extends xI{constructor(e,{account:t,docsPath:s,chain:n,data:a,gas:i,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u}){var d;const p=oN({from:null==t?void 0:t.address,to:h,value:void 0!==u&&`${sN(u)} ${(null==(d=null==n?void 0:n.nativeCurrency)?void 0:d.symbol)||"ETH"}`,data:a,gas:i,gasPrice:void 0!==r&&`${nN(r)} gwei`,maxFeePerGas:void 0!==o&&`${nN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${nN(l)} gwei`,nonce:c});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class hL extends xI{constructor({cause:e,message:t}={}){var s;const n=null==(s=null==t?void 0:t.replace("execution reverted: ",""))?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hL,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(hL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class uL extends xI{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${nN(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(uL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class dL extends xI{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${nN(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(dL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class pL extends xI{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(pL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class fL extends xI{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(fL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class mL extends xI{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(mL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class gL extends xI{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(gL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class yL extends xI{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(yL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class bL extends xI{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(bL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class vL extends xI{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(vL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class wL extends xI{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:s}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${nN(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${s?` = ${nN(s)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(wL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class xL extends xI{constructor({cause:e}){super(`An error occurred while executing: ${null==e?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function kL(e,t){const s=(e.details||"").toLowerCase(),n=e instanceof xI?e.walk((e=>(null==e?void 0:e.code)===hL.code)):e;return n instanceof xI?new hL({cause:e,message:n.details}):hL.nodeMessage.test(s)?new hL({cause:e,message:e.details}):uL.nodeMessage.test(s)?new uL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):dL.nodeMessage.test(s)?new dL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):pL.nodeMessage.test(s)?new pL({cause:e,nonce:null==t?void 0:t.nonce}):fL.nodeMessage.test(s)?new fL({cause:e,nonce:null==t?void 0:t.nonce}):mL.nodeMessage.test(s)?new mL({cause:e,nonce:null==t?void 0:t.nonce}):gL.nodeMessage.test(s)?new gL({cause:e}):yL.nodeMessage.test(s)?new yL({cause:e,gas:null==t?void 0:t.gas}):bL.nodeMessage.test(s)?new bL({cause:e,gas:null==t?void 0:t.gas}):vL.nodeMessage.test(s)?new vL({cause:e}):wL.nodeMessage.test(s)?new wL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas,maxPriorityFeePerGas:null==t?void 0:t.maxPriorityFeePerGas}):new xL({cause:e})}function AL(e,{format:t}){if(!t)return{};const s={};return function t(n){const a=Object.keys(n);for(const i of a)i in e&&(s[i]=e[i]),n[i]&&"object"==typeof n[i]&&!Array.isArray(n[i])&&t(n[i])}(t(e||{})),s}const EL={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function SL(e){const t={};return void 0!==e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.address,r:e.r?u_(BigInt(e.r)):e.r,s:e.s?u_(BigInt(e.s)):e.s,chainId:u_(e.chainId),nonce:u_(e.nonce),...void 0!==e.yParity?{yParity:u_(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:u_(e.v)}:{}})))),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map((e=>h_(e))):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=u_(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=u_(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=u_(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=u_(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=u_(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=u_(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=EL[e.type]),void 0!==e.value&&(t.value=u_(e.value)),t}function PL(e){if(e&&0!==e.length)return e.reduce(((e,{slot:t,value:s})=>{if(66!==t.length)throw new ZI({size:t.length,targetSize:66,type:"hex"});if(66!==s.length)throw new ZI({size:s.length,targetSize:66,type:"hex"});return e[t]=s,e}),{})}function TL(e){const{balance:t,nonce:s,state:n,stateDiff:a,code:i}=e,r={};if(void 0!==i&&(r.code=i),void 0!==t&&(r.balance=u_(t)),void 0!==s&&(r.nonce=u_(s)),void 0!==n&&(r.state=PL(n)),void 0!==a){if(r.state)throw new iN;r.stateDiff=PL(a)}return r}function BL(e){if(!e)return;const t={};for(const{address:s,...n}of e){if(!lD(s,{strict:!1}))throw new tD({address:s});if(t[s])throw new aN({address:s});t[s]=TL(n)}return t}const CL=2n**256n-1n;function ML(e){const{account:t,gasPrice:s,maxFeePerGas:n,maxPriorityFeePerGas:a,to:i}=e,r=t?RD(t):void 0;if(r&&!lD(r.address))throw new tD({address:r.address});if(i&&!lD(i))throw new tD({address:i});if(void 0!==s&&(void 0!==n||void 0!==a))throw new lN;if(n&&n>CL)throw new uL({maxFeePerGas:n});if(a&&n&&a>n)throw new wL({maxFeePerGas:n,maxPriorityFeePerGas:a})}class RL extends xI{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class IL extends xI{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class _L extends xI{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${nN(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class DL extends xI{constructor({blockHash:e,blockNumber:t}){let s="Block";e&&(s=`Block at hash "${e}"`),t&&(s=`Block at number "${t}"`),super(`${s} could not be found.`,{name:"BlockNotFoundError"})}}const NL={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function LL(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?r_(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?r_(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?NL[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function FL(e){const t=(e.transactions??[]).map((e=>"string"==typeof e?e:LL(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function OL(e,{blockHash:t,blockNumber:s,blockTag:n,includeTransactions:a}={}){var i,r,o;const l=n??"latest",c=a??!1,h=void 0!==s?u_(s):void 0;let u=null;if(u=t?await e.request({method:"eth_getBlockByHash",params:[t,c]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[h||l,c]},{dedupe:Boolean(h)}),!u)throw new DL({blockHash:t,blockNumber:s});return((null==(o=null==(r=null==(i=e.chain)?void 0:i.formatters)?void 0:r.block)?void 0:o.format)||FL)(u)}async function jL(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function UL(e,t){var s,n;const{block:a,chain:i=e.chain,request:r}=t||{};try{const t=(null==(s=null==i?void 0:i.fees)?void 0:s.maxPriorityFeePerGas)??(null==(n=null==i?void 0:i.fees)?void 0:n.defaultPriorityFee);if("function"==typeof t){const s=a||await fI(e,OL,"getBlock")({}),n=await t({block:s,client:e,request:r});if(null===n)throw new Error;return n}return void 0!==t?t:i_(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,s]=await Promise.all([a?Promise.resolve(a):fI(e,OL,"getBlock")({}),fI(e,jL,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new IL;const n=s-t.baseFeePerGas;return n<0n?0n:n}}async function GL(e,t){var s,n;const{block:a,chain:i=e.chain,request:r,type:o="eip1559"}=t||{},l=await(async()=>{var t,s;return"function"==typeof(null==(t=null==i?void 0:i.fees)?void 0:t.baseFeeMultiplier)?i.fees.baseFeeMultiplier({block:a,client:e,request:r}):(null==(s=null==i?void 0:i.fees)?void 0:s.baseFeeMultiplier)??1.2})();if(l<1)throw new RL;const c=10**((null==(s=l.toString().split(".")[1])?void 0:s.length)??0),h=e=>e*BigInt(Math.ceil(l*c))/BigInt(c),u=a||await fI(e,OL,"getBlock")({});if("function"==typeof(null==(n=null==i?void 0:i.fees)?void 0:n.estimateFeesPerGas)){const t=await i.fees.estimateFeesPerGas({block:a,client:e,multiply:h,request:r,type:o});if(null!==t)return t}if("eip1559"===o){if("bigint"!=typeof u.baseFeePerGas)throw new IL;const t="bigint"==typeof(null==r?void 0:r.maxPriorityFeePerGas)?r.maxPriorityFeePerGas:await UL(e,{block:u,chain:i,request:r}),s=h(u.baseFeePerGas);return{maxFeePerGas:(null==r?void 0:r.maxFeePerGas)??s+t,maxPriorityFeePerGas:t}}return{gasPrice:(null==r?void 0:r.gasPrice)??h(await fI(e,jL,"getGasPrice")({}))}}async function HL(e,{address:t,blockTag:s="latest",blockNumber:n}){return r_(await e.request({method:"eth_getTransactionCount",params:[t,n?u_(n):s]},{dedupe:Boolean(n)}))}function zL(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>b_(e))):e.blobs,a=[];for(const i of n)a.push(Uint8Array.from(t.blobToKzgCommitment(i)));return"bytes"===s?a:a.map((e=>h_(e)))}function VL(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>b_(e))):e.blobs,a="string"==typeof e.commitments[0]?e.commitments.map((e=>b_(e))):e.commitments,i=[];for(let r=0;r<n.length;r++){const e=n[r],s=a[r];i.push(Uint8Array.from(t.computeBlobKzgProof(e,s)))}return"bytes"===s?i:i.map((e=>h_(e)))}function WL(e,t,s){return e&t^~e&s}function $L(e,t,s){return e&t^e&s^t&s}class qL extends D_{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=C_(this.buffer)}update(e){k_(this);const{view:t,buffer:s,blockLen:n}=this,a=(e=__(e)).length;for(let i=0;i<a;){const r=Math.min(n-this.pos,a-i);if(r!==n)s.set(e.subarray(i,i+r),this.pos),this.pos+=r,i+=r,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=C_(e);for(;n<=a-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){k_(this),A_(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:n,isLE:a}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(s,0),i=0);for(let h=i;h<n;h++)t[h]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const a=BigInt(32),i=BigInt(4294967295),r=Number(s>>a&i),o=Number(s&i),l=n?4:0,c=n?0:4;e.setUint32(t+l,r,n),e.setUint32(t+c,o,n)}(s,n-8,BigInt(8*this.length),a),this.process(s,0);const r=C_(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)r.setUint32(4*h,c[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:a,destroyed:i,pos:r}=this;return e.length=n,e.pos=r,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(s),e}}const KL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),QL=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ZL=new Uint32Array(64);class XL extends qL{constructor(){super(64,32,8,!1),this.A=0|QL[0],this.B=0|QL[1],this.C=0|QL[2],this.D=0|QL[3],this.E=0|QL[4],this.F=0|QL[5],this.G=0|QL[6],this.H=0|QL[7]}get(){const{A:e,B:t,C:s,D:n,E:a,F:i,G:r,H:o}=this;return[e,t,s,n,a,i,r,o]}set(e,t,s,n,a,i,r,o){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|r,this.H=0|o}process(e,t){for(let h=0;h<16;h++,t+=4)ZL[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=ZL[h-15],t=ZL[h-2],s=M_(e,7)^M_(e,18)^e>>>3,n=M_(t,17)^M_(t,19)^t>>>10;ZL[h]=n+ZL[h-7]+s+ZL[h-16]|0}let{A:s,B:n,C:a,D:i,E:r,F:o,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(M_(r,6)^M_(r,11)^M_(r,25))+WL(r,o,l)+KL[h]+ZL[h]|0,t=(M_(s,2)^M_(s,13)^M_(s,22))+$L(s,n,a)|0;c=l,l=o,o=r,r=i+e|0,i=a,a=n,n=s,s=e+t|0}s=s+this.A|0,n=n+this.B|0,a=a+this.C|0,i=i+this.D|0,r=r+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(s,n,a,i,r,o,l,c)}roundClean(){ZL.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const YL=N_((()=>new XL));function JL(e){const{commitment:t,version:s=1}=e,n=e.to??("string"==typeof t?"hex":"bytes"),a=YL(yI(i=t,{strict:!1})?m_(i):i);var i;return a.set([s],0),"bytes"===n?a:h_(a)}const eF=761855;class tF extends xI{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class sF extends xI{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}async function nF(e){return r_(await e.request({method:"eth_chainId"},{dedupe:!0}))}const aF=["blobVersionedHashes","chainId","fees","gas","nonce","type"],iF=new Map;async function rF(e,t){const{account:s=e.account,blobs:n,chain:a,gas:i,kzg:r,nonce:o,nonceManager:l,parameters:c=aF,type:h}=t,u=s?RD(s):s,d={...t,...u?{from:null==u?void 0:u.address}:{}};let p,f;async function m(){return p||(p=await fI(e,OL,"getBlock")({blockTag:"latest"}),p)}async function g(){if(f)return f;if(a)return a.id;if(void 0!==t.chainId)return t.chainId;const s=await fI(e,nF,"getChainId")({});return f=s,f}if(c.includes("nonce")&&void 0===o&&u)if(l){const t=await g();d.nonce=await l.consume({address:u.address,chainId:t,client:e})}else d.nonce=await fI(e,HL,"getTransactionCount")({address:u.address,blockTag:"pending"});if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&n&&r){const e=zL({blobs:n,kzg:r});if(c.includes("blobVersionedHashes")){const t=function(e){const{commitments:t,version:s}=e,n=e.to,a=[];for(const i of t)a.push(JL({commitment:i,to:n,version:s}));return a}({commitments:e,to:"hex"});d.blobVersionedHashes=t}if(c.includes("sidecars")){const t=function(e){const{data:t,kzg:s,to:n}=e,a=e.blobs??function(e){const t="string"==typeof e.data?b_(e.data):e.data,s=bI(t);if(!s)throw new sF;if(s>eF)throw new tF({maxSize:eF,size:s});const n=[];let a=!0,i=0;for(;a;){const e=GD(new Uint8Array(131072));let s=0;for(;s<4096;){const n=t.slice(i,i+31);if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),a=!1;break}s++,i+=31}n.push(e)}return n.map((e=>h_(e.bytes)))}({data:t}),i=e.commitments??zL({blobs:a,kzg:s,to:n}),r=e.proofs??VL({blobs:a,commitments:i,kzg:s,to:n}),o=[];for(let l=0;l<a.length;l++)o.push({blob:a[l],commitment:i[l],proof:r[l]});return o}({blobs:n,commitments:e,proofs:VL({blobs:n,commitments:e,kzg:r}),to:"hex"});d.sidecars=t}}if(c.includes("chainId")&&(d.chainId=await g()),(c.includes("fees")||c.includes("type"))&&void 0===h)try{d.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new cN({transaction:e})}(d)}catch{let t=iF.get(e.uid);if(void 0===t){const s=await m();t="bigint"==typeof(null==s?void 0:s.baseFeePerGas),iF.set(e.uid,t)}d.type=t?"eip1559":"legacy"}if(c.includes("fees"))if("legacy"!==d.type&&"eip2930"!==d.type){if(void 0===d.maxFeePerGas||void 0===d.maxPriorityFeePerGas){const s=await m(),{maxFeePerGas:n,maxPriorityFeePerGas:i}=await GL(e,{block:s,chain:a,request:d});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<i)throw new _L({maxPriorityFeePerGas:i});d.maxPriorityFeePerGas=i,d.maxFeePerGas=n}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new IL;if(void 0===t.gasPrice){const t=await m(),{gasPrice:s}=await GL(e,{block:t,chain:a,request:d,type:"legacy"});d.gasPrice=s}}return c.includes("gas")&&void 0===i&&(d.gas=await fI(e,lF,"estimateGas")({...d,account:u?{address:u.address,type:"json-rpc"}:u})),ML(d),delete d.parameters,d}async function oF(e,{address:t,blockNumber:s,blockTag:n="latest"}){const a=s?u_(s):void 0,i=await e.request({method:"eth_getBalance",params:[t,a||n]});return BigInt(i)}async function lF(e,t){var s,n,a;const{account:i=e.account}=t,r=i?RD(i):void 0;try{let i=function(t){const{block:s,request:n,rpcStateOverride:a}=t;return e.request({method:"eth_estimateGas",params:a?[n,s??"latest",a]:s?[n,s]:[n]})};const{accessList:o,authorizationList:l,blobs:c,blobVersionedHashes:h,blockNumber:u,blockTag:d,data:p,gas:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:w,stateOverride:x,...k}=await rF(e,{...t,parameters:"local"===(null==r?void 0:r.type)?void 0:["blobVersionedHashes"]}),A=(u?u_(u):void 0)||d,E=BL(x),S=await(async()=>k.to?k.to:l&&l.length>0?await lL({authorization:l[0]}).catch((()=>{throw new xI("`to` is required. Could not infer from `authorizationList`")})):void 0)();ML(t);const P=null==(a=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:a.format,T=(P||SL)({...AL(k,{format:P}),from:null==r?void 0:r.address,accessList:o,authorizationList:l,blobs:c,blobVersionedHashes:h,data:p,gas:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:S,value:w});let B=BigInt(await i({block:A,request:T,rpcStateOverride:E}));if(l){const t=await oF(e,{address:T.from});B+=(await Promise.all(l.map((async e=>{const{address:s}=e,n=await i({block:A,request:{authorizationList:void 0,data:p,from:null==r?void 0:r.address,to:s,value:u_(t)},rpcStateOverride:E}).catch((()=>100000n));return 2n*BigInt(n)})))).reduce(((e,t)=>e+t),0n)}return B}catch(o){throw function(e,{docsPath:t,...s}){const n=(()=>{const t=kL(e,s);return t instanceof xL?e:t})();return new cL(n,{docsPath:t,...s})}(o,{...t,account:r,chain:e.chain})}}async function cF(e,t){const{abi:s,address:n,args:a,functionName:i,dataSuffix:r,...o}=t,l=_D({abi:s,args:a,functionName:i});try{return await fI(e,lF,"estimateGas")({data:`${l}${r?r.replace("0x",""):""}`,to:n,...o})}catch(c){const e=o.account?RD(o.account):void 0;throw JN(c,{abi:s,address:n,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:null==e?void 0:e.address})}}function hF(e,t){if(!lD(e,{strict:!1}))throw new tD({address:e});if(!lD(t,{strict:!1}))throw new tD({address:t});return e.toLowerCase()===t.toLowerCase()}const uF="/docs/contract/decodeEventLog";function dF(e){const{abi:t,data:s,strict:n,topics:a}=e,i=n??!0,[r,...o]=a;if(!r)throw new _I({docsPath:uF});const l=1===t.length?t[0]:t.find((e=>"event"===e.type&&r===eD(mI(e))));if(!l||!("name"in l)||"event"!==l.type)throw new DI(r,{docsPath:uF});const{name:c,inputs:h}=l,u=null==h?void 0:h.some((e=>!("name"in e&&e.name)));let d=u?[]:{};const p=h.filter((e=>"indexed"in e&&e.indexed));for(let g=0;g<p.length;g++){const e=p[g],t=o[g];if(!t)throw new HI({abiItem:l,param:e});d[u?g:e.name||g]=pF({param:e,value:t})}const f=h.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(s&&"0x"!==s)try{const e=WD(f,s);if(e)if(u)d=[...d,...e];else for(let t=0;t<f.length;t++)d[f[t].name]=e[t]}catch(m){if(i){if(m instanceof SI||m instanceof OD)throw new GI({abiItem:l,data:s,params:f,size:bI(s)});throw m}}else if(i)throw new GI({abiItem:l,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(d).length>0?d:void 0}}function pF({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(WD([e],t)||[])[0]}function fF(e){const{abi:t,args:s,logs:n,strict:a=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map((e=>{var n;try{const n=t.find((t=>"event"===t.type&&e.topics[0]===eD(t)));if(!n)return null;const r=dF({...e,abi:[n],strict:a});return i&&!i.includes(r.eventName)?null:function(e){const{args:t,inputs:s,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function a(e,t,s){try{return"address"===e.type?hF(t,s):"string"===e.type||"bytes"===e.type?Y_(m_(t))===s:t===s}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every(((e,n)=>{if(null==e)return!0;const i=s[n];return!!i&&(Array.isArray(e)?e:[e]).some((e=>a(i,e,t[n])))})):"object"==typeof t&&!Array.isArray(t)&&"object"==typeof n&&!Array.isArray(n)&&Object.entries(n).every((([e,n])=>{if(null==n)return!0;const i=s.find((t=>t.name===e));return!!i&&(Array.isArray(n)?n:[n]).some((s=>a(i,s,t[e])))}))}({args:r.args,inputs:n.inputs,matchArgs:s})?{...r,...e}:null}catch(r){let t,s;if(r instanceof DI)return null;if(r instanceof GI||r instanceof HI){if(a)return null;t=r.abiItem.name,s=null==(n=r.abiItem.inputs)?void 0:n.some((e=>!("name"in e&&e.name)))}return{...e,args:s?[]:{},eventName:t}}})).filter(Boolean)}function mF(e,{args:t,eventName:s}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...s?{args:t,eventName:s}:{}}}async function gF(e,{address:t,blockHash:s,fromBlock:n,toBlock:a,event:i,events:r,args:o,strict:l}={}){const c=l??!1,h=r??(i?[i]:void 0);let u,d=[];h&&(d=[h.flatMap((e=>TD({abi:[e],eventName:e.name,args:r?void 0:o})))],i&&(d=d[0])),u=s?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:s}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof n?u_(n):n,toBlock:"bigint"==typeof a?u_(a):a}]});const p=u.map((e=>mF(e)));return h?fF({abi:h,args:o,logs:p,strict:c}):p}async function yF(e,t){const{abi:s,address:n,args:a,blockHash:i,eventName:r,fromBlock:o,toBlock:l,strict:c}=t,h=r?AD({abi:s,name:r}):void 0,u=h?void 0:s.filter((e=>"event"===e.type));return fI(e,gF,"getLogs")({address:n,args:a,blockHash:i,event:h,events:u,fromBlock:o,toBlock:l,strict:c})}const bF="/docs/contract/decodeFunctionResult";function vF(e){const{abi:t,args:s,functionName:n,data:a}=e;let i=t[0];if(n){const e=AD({abi:t,args:s,name:n});if(!e)throw new LI(n,{docsPath:bF});i=e}if("function"!==i.type)throw new LI(void 0,{docsPath:bF});if(!i.outputs)throw new FI(i.name,{docsPath:bF});const r=WD(i.outputs,a);return r&&r.length>1?r:r&&1===r.length?r[0]:void 0}const wF=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xF=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],kF=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],AF=[...kF,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],EF=[...kF,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],SF=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],PF=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],TF=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],BF="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe";class CF extends xI{constructor({blockNumber:e,chain:t,contract:s}){super(`Chain "${t.name}" does not support contract "${s.name}".`,{metaMessages:["This could be due to any of the following:",...e&&s.blockCreated&&s.blockCreated>e?[`- The contract "${s.name}" was not deployed until block ${s.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${s.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class MF extends xI{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class RF extends xI{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n"),{name:"ChainNotFoundError"})}}class IF extends xI{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const _F="/docs/contract/encodeDeployData";function DF(e){const{abi:t,args:s,bytecode:n}=e;if(!s||0===s.length)return n;const a=t.find((e=>"type"in e&&"constructor"===e.type));if(!a)throw new AI({docsPath:_F});if(!("inputs"in a))throw new EI({docsPath:_F});if(!a.inputs||0===a.inputs.length)throw new EI({docsPath:_F});return hD([n,bD(a.inputs,s)])}function NF({blockNumber:e,chain:t,contract:s}){var n;const a=null==(n=null==t?void 0:t.contracts)?void 0:n[s];if(!a)throw new CF({chain:t,contract:{name:s}});if(e&&a.blockCreated&&a.blockCreated>e)throw new CF({blockNumber:e,chain:t,contract:{name:s,blockCreated:a.blockCreated}});return a.address}function LF(e,{docsPath:t,...s}){const n=(()=>{const t=kL(e,s);return t instanceof xL?e:t})();return new mN(n,{docsPath:t,...s})}function FF(){let e=()=>{},t=()=>{};return{promise:new Promise(((s,n)=>{e=s,t=n})),resolve:e,reject:t}}const OF=new Map;function jF({fn:e,id:t,shouldSplitBatch:s,wait:n=0,sort:a}){const i=async()=>{const t=o();r();const s=t.map((({args:e})=>e));0!==s.length&&e(s).then((e=>{a&&Array.isArray(e)&&e.sort(a);for(let s=0;s<t.length;s++){const{resolve:n}=t[s];null==n||n([e[s],e])}})).catch((e=>{for(let s=0;s<t.length;s++){const{reject:n}=t[s];null==n||n(e)}}))},r=()=>OF.delete(t),o=()=>OF.get(t)||[],l=e=>OF.set(t,[...o(),e]);return{flush:r,async schedule(e){const{promise:t,resolve:a,reject:r}=FF();return(null==s?void 0:s([...o().map((({args:e})=>e)),e]))&&i(),o().length>0?(l({args:e,resolve:a,reject:r}),t):(l({args:e,resolve:a,reject:r}),setTimeout(i,n),t)}}}async function UF(e,t){var s,n,a,i;const{account:r=e.account,batch:o=Boolean(null==(s=e.batch)?void 0:s.multicall),blockNumber:l,blockTag:c="latest",accessList:h,blobs:u,code:d,data:p,factory:f,factoryData:m,gas:g,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,to:k,value:A,stateOverride:E,...S}=t,P=r?RD(r):void 0;if(d&&(f||m))throw new xI("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(d&&k)throw new xI("Cannot provide both `code` & `to` as parameters.");const T=d&&p,B=f&&m&&k&&p,C=T||B,M=T?function(e){const{code:t,data:s}=e;return DF({abi:pI(["constructor(bytes, bytes)"]),bytecode:BF,args:[t,s]})}({code:d,data:p}):B?function(e){const{data:t,factory:s,factoryData:n,to:a}=e;return DF({abi:pI(["constructor(address, bytes, address, bytes)"]),bytecode:"0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",args:[a,t,s,n]})}({data:p,factory:f,factoryData:m,to:k}):p;try{ML(t);const s=(l?u_(l):void 0)||c,r=BL(E),d=null==(i=null==(a=null==(n=e.chain)?void 0:n.formatters)?void 0:a.transactionRequest)?void 0:i.format,p=(d||SL)({...AL(S,{format:d}),from:null==P?void 0:P.address,accessList:h,blobs:u,data:M,gas:g,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,to:C?void 0:k,value:A});if(o&&function({request:e}){const{data:t,to:s,...n}=e;return!(!t||t.startsWith("0x82ad56cb")||!s||Object.values(n).filter((e=>void 0!==e)).length>0)}({request:p})&&!r)try{return await async function(e,t){var s;const{batchSize:n=1024,wait:a=0}="object"==typeof(null==(s=e.batch)?void 0:s.multicall)?e.batch.multicall:{},{blockNumber:i,blockTag:r="latest",data:o,multicallAddress:l,to:c}=t;let h=l;if(!h){if(!e.chain)throw new IF;h=NF({blockNumber:i,chain:e.chain,contract:"multicall3"})}const u=(i?u_(i):void 0)||r,{schedule:d}=jF({id:`${e.uid}.${u}`,wait:a,shouldSplitBatch:e=>e.reduce(((e,{data:t})=>e+(t.length-2)),0)>2*n,fn:async t=>{const s=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),n=_D({abi:wF,args:[s],functionName:"aggregate3"}),a=await e.request({method:"eth_call",params:[{data:n,to:h},u]});return vF({abi:wF,args:[s],functionName:"aggregate3",data:a||"0x"})}}),[{returnData:p,success:f}]=await d({data:o,to:c});if(!f)throw new wN({data:p});return"0x"===p?{data:void 0}:{data:p}}(e,{...p,blockNumber:l,blockTag:c})}catch(R){if(!(R instanceof IF||R instanceof CF))throw R}const f=await e.request({method:"eth_call",params:r?[p,s,r]:[p,s]});return"0x"===f?{data:void 0}:{data:f}}catch(R){const s=function(e){var t;if(!(e instanceof xI))return;const s=e.walk();return"object"==typeof(null==s?void 0:s.data)?null==(t=s.data)?void 0:t.data:s.data}(R),{offchainLookup:n,offchainLookupSignature:a}=await tL((async()=>{const{offchainLookup:e,offchainLookupSignature:t}=await import("./ccip-Dgl-voLH.js");return{offchainLookup:e,offchainLookupSignature:t}}),__vite__mapDeps([0,1]),import.meta.url);if(!1!==e.ccipRead&&(null==s?void 0:s.slice(0,10))===a&&k)return{data:await n(e,{data:s,to:k})};if(C&&"0x101bb98d"===(null==s?void 0:s.slice(0,10)))throw new vN({factory:f});throw LF(R,{...t,account:P,chain:e.chain})}}async function GF(e,t){const{abi:s,address:n,args:a,functionName:i,...r}=t,o=_D({abi:s,args:a,functionName:i});try{const{data:t}=await fI(e,UF,"call")({...r,data:o,to:n});return vF({abi:s,args:a,functionName:i,data:t||"0x"})}catch(l){throw JN(l,{abi:s,address:n,args:a,docsPath:"/docs/contract/readContract",functionName:i})}}async function HF(e,t){const{abi:s,address:n,args:a,dataSuffix:i,functionName:r,...o}=t,l=o.account?RD(o.account):e.account,c=_D({abi:s,args:a,functionName:r});try{const{data:h}=await fI(e,UF,"call")({batch:!1,data:`${c}${i?i.replace("0x",""):""}`,to:n,...o,account:l});return{result:vF({abi:s,args:a,functionName:r,data:h||"0x"}),request:{abi:s.filter((e=>"name"in e&&e.name===t.functionName)),address:n,args:a,dataSuffix:i,functionName:r,...o,account:l}}}catch(h){throw JN(h,{abi:s,address:n,args:a,docsPath:"/docs/contract/simulateContract",functionName:r,sender:null==l?void 0:l.address})}}const zF=new Map,VF=new Map;let WF=0;function $F(e,t,s){const n=++WF,a=()=>zF.get(e)||[],i=()=>{const t=a();if(!t.some((e=>e.id===n)))return;const s=VF.get(e);1===t.length&&s&&s(),(()=>{const t=a();zF.set(e,t.filter((e=>e.id!==n)))})()},r=a();if(zF.set(e,[...r,{id:n,fns:t}]),r&&r.length>0)return i;const o={};for(const c in t)o[c]=(...e)=>{var t,s;const n=a();if(0!==n.length)for(const a of n)null==(s=(t=a.fns)[c])||s.call(t,...e)};const l=s(o);return"function"==typeof l&&VF.set(e,l),i}async function qF(e){return new Promise((t=>setTimeout(t,e)))}function KF(e,{emitOnBegin:t,initialWaitTime:s,interval:n}){let a=!0;const i=()=>a=!1;return(async()=>{let r;t&&(r=await e({unpoll:i}));const o=await(null==s?void 0:s(r))??n;await qF(o);const l=async()=>{a&&(await e({unpoll:i}),await qF(n),l())};l()})(),i}const QF=new Map,ZF=new Map;async function XF(e,{cacheTime:t=e.cacheTime}={}){const s=await async function(e,{cacheKey:t,cacheTime:s=Number.POSITIVE_INFINITY}){const n=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:s=>t.set(e,s)}),s=t(e,QF),n=t(e,ZF);return{clear:()=>{s.clear(),n.clear()},promise:s,response:n}}(t),a=n.response.get();if(a&&s>0&&(new Date).getTime()-a.created.getTime()<s)return a.data;let i=n.promise.get();i||(i=e(),n.promise.set(i));try{const e=await i;return n.response.set({created:new Date,data:e}),e}finally{n.promise.clear()}}((()=>e.request({method:"eth_blockNumber"})),{cacheKey:(n=e.uid,`blockNumber.${n}`),cacheTime:t});var n;return BigInt(s)}async function YF(e,{filter:t}){const s="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof n[0])return n;const a=n.map((e=>mF(e)));return"abi"in t&&t.abi?fF({abi:t.abi,logs:a,strict:s}):a}async function JF(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function eO(e,t){const{abi:s,address:n,args:a,batch:i=!0,eventName:r,fromBlock:o,onError:l,onLogs:c,poll:h,pollingInterval:u=e.pollingInterval,strict:d}=t;return(void 0!==h?h:"bigint"==typeof o||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{const t=d??!1;return $F(XD(["watchContractEvent",n,a,i,e.uid,r,u,t,o]),{onLogs:c,onError:l},(l=>{let c,h;void 0!==o&&(c=o-1n);let d=!1;const p=KF((async()=>{var u;if(d)try{let o;if(h)o=await fI(e,YF,"getFilterChanges")({filter:h});else{const i=await fI(e,XF,"getBlockNumber")({});o=c&&c<i?await fI(e,yF,"getContractEvents")({abi:s,address:n,args:a,eventName:r,fromBlock:c+1n,toBlock:i,strict:t}):[],c=i}if(0===o.length)return;if(i)l.onLogs(o);else for(const e of o)l.onLogs([e])}catch(p){h&&p instanceof RN&&(d=!1),null==(u=l.onError)||u.call(l,p)}else{try{h=await fI(e,MD,"createContractEventFilter")({abi:s,address:n,args:a,eventName:r,strict:t,fromBlock:o})}catch{}d=!0}}),{emitOnBegin:!0,interval:u});return async()=>{h&&await fI(e,JF,"uninstallFilter")({filter:h}),p()}}))})():(()=>{const t=d??!1,o=XD(["watchContractEvent",n,a,i,e.uid,r,u,t]);let h=!0,p=()=>h=!1;return $F(o,{onLogs:c,onError:l},(t=>((async()=>{try{const i=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),o=r?TD({abi:s,eventName:r,args:a}):[],{unsubscribe:l}=await i.subscribe({params:["logs",{address:n,topics:o}],onData(e){var n;if(!h)return;const a=e.result;try{const{eventName:e,args:n}=dF({abi:s,data:a.data,topics:a.topics,strict:d}),i=mF(a,{args:n,eventName:e});t.onLogs([i])}catch(i){let e,s;if(i instanceof GI||i instanceof HI){if(d)return;e=i.abiItem.name,s=null==(n=i.abiItem.inputs)?void 0:n.some((e=>!("name"in e&&e.name)))}const r=mF(a,{args:s?[]:{},eventName:e});t.onLogs([r])}},onError(e){var s;null==(s=t.onError)||s.call(t,e)}});p=l,h||p()}catch(i){null==l||l(i)}})(),()=>p())))})()}class tO extends xI{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class sO extends xI{constructor({docsPath:e,metaMessages:t,type:s}){super(`Account type "${s}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}function nO({chain:e,currentChainId:t}){if(!e)throw new RF;if(t!==e.id)throw new MF({chain:e,currentChainId:t})}async function aO(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const iO=new sD(128);async function rO(e,t){var s,n,a,i;const{account:r=e.account,chain:o=e.chain,accessList:l,authorizationList:c,blobs:h,data:u,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,value:b,...v}=t;if(void 0===r)throw new tO({docsPath:"/docs/actions/wallet/sendTransaction"});const w=r?RD(r):null;try{ML(t);const r=await(async()=>t.to?t.to:null!==t.to&&c&&c.length>0?await lL({authorization:c[0]}).catch((()=>{throw new xI("`to` is required. Could not infer from `authorizationList`.")})):void 0)();if("json-rpc"===(null==w?void 0:w.type)||null===w){let t;null!==o&&(t=await fI(e,nF,"getChainId")({}),nO({currentChainId:t,chain:o}));const i=null==(a=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:a.format,x=(i||SL)({...AL(v,{format:i}),accessList:l,authorizationList:c,blobs:h,chainId:t,data:u,from:null==w?void 0:w.address,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,to:r,value:b}),k=iO.get(e.uid),A=k?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:A,params:[x]},{retryCount:0})}catch(IV){if(!1===k)throw IV;const s=IV;if("InvalidInputRpcError"===s.name||"InvalidParamsRpcError"===s.name||"MethodNotFoundRpcError"===s.name||"MethodNotSupportedRpcError"===s.name)return await e.request({method:"wallet_sendTransaction",params:[x]},{retryCount:0}).then((t=>(iO.set(e.uid,!0),t))).catch((t=>{const n=t;if("MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)throw iO.set(e.uid,!1),s;throw n}));throw s}}if("local"===(null==w?void 0:w.type)){const t=await fI(e,rF,"prepareTransactionRequest")({account:w,accessList:l,authorizationList:c,blobs:h,chain:o,data:u,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,nonceManager:w.nonceManager,parameters:[...aF,"sidecars"],value:b,...v,to:r}),s=null==(i=null==o?void 0:o.serializers)?void 0:i.transaction,n=await w.signTransaction(t,{serializer:s});return await fI(e,aO,"sendRawTransaction")({serializedTransaction:n})}if("smart"===(null==w?void 0:w.type))throw new sO({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new sO({docsPath:"/docs/actions/wallet/sendTransaction",type:null==w?void 0:w.type})}catch(x){if(x instanceof sO)throw x;throw function(e,{docsPath:t,...s}){const n=(()=>{const t=kL(e,s);return t instanceof xL?e:t})();return new hN(n,{docsPath:t,...s})}(x,{...t,account:w,chain:t.chain||void 0})}}async function oO(e,t){const{abi:s,account:n=e.account,address:a,args:i,dataSuffix:r,functionName:o,...l}=t;if(void 0===n)throw new tO({docsPath:"/docs/contract/writeContract"});const c=n?RD(n):null,h=_D({abi:s,args:i,functionName:o});try{return await fI(e,rO,"sendTransaction")({data:`${h}${r?r.replace("0x",""):""}`,to:a,account:c,...l})}catch(u){throw JN(u,{abi:s,address:a,args:i,docsPath:"/docs/contract/writeContract",functionName:o,sender:null==c?void 0:c.address})}}function lO(e){const t=e.length&&Array.isArray(e[0]);return{args:t?e[0]:[],options:(t?e[1]:e[0])??{}}}function cO(e,t){let s=!1;return Array.isArray(e[0])?s=!0:1===e.length?s=t.inputs.some((e=>e.indexed)):2===e.length&&(s=!0),{args:s?e[0]:void 0,options:(s?e[1]:e[0])??{}}}let hO,uO=256;function dO(e=11){if(!hO||uO+e>512){hO="",uO=0;for(let e=0;e<256;e++)hO+=(256+256*Math.random()|0).toString(16).substring(1)}return hO.substring(uO,uO+++e)}function pO(e){const{batch:t,cacheTime:s=e.pollingInterval??4e3,ccipRead:n,key:a="base",name:i="Base Client",pollingInterval:r=4e3,type:o="base"}=e,l=e.chain,c=e.account?RD(e.account):void 0,{config:h,request:u,value:d}=e.transport({chain:l,pollingInterval:r}),p={account:c,batch:t,cacheTime:s,ccipRead:n,chain:l,key:a,name:i,pollingInterval:r,request:u,transport:{...h,...d},type:o,uid:dO()};return Object.assign(p,{extend:function e(t){return s=>{const n=s(t);for(const e in p)delete n[e];const a={...t,...n};return Object.assign(a,{extend:e(a)})}}(p)})}const fO=new sD(8192);function mO(e,{delay:t=100,retryCount:s=2,shouldRetry:n=()=>!0}={}){return new Promise(((a,i)=>{const r=async({count:o=0}={})=>{try{const t=await e();a(t)}catch(l){if(o<s&&await n({count:o,error:l}))return(async({error:e})=>{const s="function"==typeof t?t({count:o,error:e}):t;s&&await qF(s),r({count:o+1})})({error:l});i(l)}};r()}))}function gO(e,t={}){return async(s,n={})=>{var a;const{dedupe:i=!1,methods:r,retryDelay:o=150,retryCount:l=3,uid:c}={...t,...n},{method:h}=s;if(null==(a=null==r?void 0:r.exclude)?void 0:a.includes(h))throw new NN(new Error("method not supported"),{method:h});if((null==r?void 0:r.include)&&!r.include.includes(h))throw new NN(new Error("method not supported"),{method:h});return function(e,{enabled:t=!0,id:s}){if(!t||!s)return e();if(fO.get(s))return fO.get(s);const n=e().finally((()=>fO.delete(s)));return fO.set(s,n),n}((()=>mO((async()=>{try{return await e(s)}catch(t){const e=t;switch(e.code){case PN.code:throw new PN(e);case TN.code:throw new TN(e);case BN.code:throw new BN(e,{method:s.method});case CN.code:throw new CN(e);case MN.code:throw new MN(e);case RN.code:throw new RN(e);case IN.code:throw new IN(e);case _N.code:throw new _N(e);case DN.code:throw new DN(e);case NN.code:throw new NN(e,{method:s.method});case LN.code:throw new LN(e);case FN.code:throw new FN(e);case ON.code:throw new ON(e);case jN.code:throw new jN(e);case UN.code:throw new UN(e);case GN.code:throw new GN(e);case HN.code:throw new HN(e);case zN.code:throw new zN(e);case VN.code:throw new VN(e);case WN.code:throw new WN(e);case $N.code:throw new $N(e);case qN.code:throw new qN(e);case KN.code:throw new KN(e);case QN.code:throw new QN(e);case ZN.code:throw new ZN(e);case 5e3:throw new ON(e);default:if(t instanceof xI)throw t;throw new XN(e)}}}),{delay:({count:e,error:t})=>{var s;if(t&&t instanceof xN){const e=null==(s=null==t?void 0:t.headers)?void 0:s.get("Retry-After");if(null==e?void 0:e.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*o},retryCount:l,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===LN.code||e.code===MN.code:!(e instanceof xN&&e.status)||(403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status)}(e)})),{enabled:i,id:i?p_(`${c}.${XD(s)}`):void 0})}}function yO({key:e,methods:t,name:s,request:n,retryCount:a=3,retryDelay:i=150,timeout:r,type:o},l){return{config:{key:e,methods:t,name:s,request:n,retryCount:a,retryDelay:i,timeout:r,type:o},request:gO(n,{methods:t,retryCount:a,retryDelay:i,uid:dO()}),value:l}}function bO(e,t={}){const{key:s="custom",methods:n,name:a="Custom Provider",retryDelay:i}=t;return({retryCount:r})=>yO({key:s,methods:n,name:a,request:e.request.bind(e),retryCount:t.retryCount??r,retryDelay:i,type:"custom"})}class vO extends xI{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function wO(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const xO=wO();function kO(e,t={}){const{batch:s,fetchOptions:n,key:a="http",methods:i,name:r="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:l,retryDelay:c,raw:h}=t;return({chain:e,retryCount:u,timeout:d})=>{const{batchSize:p=1e3,wait:f=0}="object"==typeof s?s:{},m=t.retryCount??u,g=d??t.timeout??1e4,y=null==e?void 0:e.rpcUrls.default.http[0];if(!y)throw new vO;const b=function(e,t={}){return{async request(s){var n;const{body:a,onRequest:i=t.onRequest,onResponse:r=t.onResponse,timeout:o=t.timeout??1e4}=s,l={...t.fetchOptions??{},...s.fetchOptions??{}},{headers:c,method:h,signal:u}=l;try{const t=await function(e,{errorInstance:t=new Error("timed out"),timeout:s,signal:n}){return new Promise(((a,i)=>{(async()=>{let r;try{const t=new AbortController;s>0&&(r=setTimeout((()=>{n&&t.abort()}),s)),a(await e({signal:(null==t?void 0:t.signal)||null}))}catch(o){"AbortError"===(null==o?void 0:o.name)&&i(t),i(o)}finally{clearTimeout(r)}})()}))}((async({signal:t})=>{const s={...l,body:Array.isArray(a)?XD(a.map((e=>({jsonrpc:"2.0",id:e.id??xO.take(),...e})))):XD({jsonrpc:"2.0",id:a.id??xO.take(),...a}),headers:{"Content-Type":"application/json",...c},method:h||"POST",signal:u||(o>0?t:null)},n=new Request(e,s),r=await(null==i?void 0:i(n,s))??{...s,url:e};return await fetch(r.url??e,r)}),{errorInstance:new AN({body:a,url:e}),timeout:o,signal:!0});let s;if(r&&await r(t),null==(n=t.headers.get("Content-Type"))?void 0:n.startsWith("application/json"))s=await t.json();else{s=await t.text();try{s=JSON.parse(s||"{}")}catch(d){if(t.ok)throw d;s={error:s}}}if(!t.ok)throw new xN({body:a,details:XD(s.error)||t.statusText,headers:t.headers,status:t.status,url:e});return s}catch(d){if(d instanceof xN)throw d;if(d instanceof AN)throw d;throw new xN({body:a,cause:d,url:e})}}}}(y,{fetchOptions:n,onRequest:o,onResponse:l,timeout:g});return yO({key:a,methods:i,name:r,async request({method:e,params:t}){const n={method:e,params:t},{schedule:a}=jF({id:y,wait:f,shouldSplitBatch:e=>e.length>p,fn:e=>b.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:i,result:r}]=await(async e=>s?a(e):[await b.request({body:e})])(n);if(h)return{error:i,result:r};if(i)throw new kN({body:n,error:i,url:y});return r},retryCount:m,retryDelay:c,timeout:g,type:"http"},{fetchOptions:n,url:y})}}function AO(e,t){var s,n,a,i,r,o;if(!(e instanceof xI))return!1;const l=e.walk((e=>e instanceof yN));return l instanceof yN&&("ResolverNotFound"===(null==(s=l.data)?void 0:s.errorName)||"ResolverWildcardNotSupported"===(null==(n=l.data)?void 0:n.errorName)||"ResolverNotContract"===(null==(a=l.data)?void 0:a.errorName)||"ResolverError"===(null==(i=l.data)?void 0:i.errorName)||"HttpError"===(null==(r=l.data)?void 0:r.errorName)||!!(null==(o=l.reason)?void 0:o.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&l.reason===DD[50])}const EO="/docs/contract/encodeErrorResult";function SO(e){const{abi:t,errorName:s,args:n}=e;let a=t[0];if(s){const e=AD({abi:t,args:n,name:s});if(!e)throw new RI(s,{docsPath:EO});a=e}if("error"!==a.type)throw new RI(void 0,{docsPath:EO});const i=mI(a),r=kD(i);let o="0x";if(n&&n.length>0){if(!a.inputs)throw new MI(a.name,{docsPath:EO});o=bD(a.inputs,n)}return hD([r,o])}const PO="/docs/contract/encodeFunctionResult",TO="x-batch-gateway:true";async function BO(e){const{data:t,ccipRequest:s}=e,{args:[n]}=function(e){const{abi:t,data:s}=e,n=uD(s,0,4),a=t.find((e=>"function"===e.type&&n===kD(mI(e))));if(!a)throw new OI(n,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?WD(a.inputs,uD(s,4)):void 0}}({abi:xF,data:t}),a=[],i=[];return await Promise.all(n.map((async(e,t)=>{try{i[t]=await s(e),a[t]=!1}catch(r){a[t]=!0,i[t]="HttpRequestError"===(n=r).name&&n.status?SO({abi:xF,errorName:"HttpError",args:[n.status,n.shortMessage]}):SO({abi:[ND],errorName:"Error",args:["shortMessage"in n?n.shortMessage:n.message]})}var n}))),function(e){const{abi:t,functionName:s,result:n}=e;let a=t[0];if(s){const e=AD({abi:t,name:s});if(!e)throw new LI(s,{docsPath:PO});a=e}if("function"!==a.type)throw new LI(void 0,{docsPath:PO});if(!a.outputs)throw new FI(a.name,{docsPath:PO});const i=(()=>{if(0===a.outputs.length)return[];if(1===a.outputs.length)return[n];if(Array.isArray(n))return n;throw new WI(n)})();return bD(a.outputs,i)}({abi:xF,functionName:"query",result:[a,i]})}function CO(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return yI(t)?t:null}function MO(e){let t=new Uint8Array(32).fill(0);if(!e)return h_(t);const s=e.split(".");for(let n=s.length-1;n>=0;n-=1){const e=CO(s[n]),a=e?m_(e):Y_(v_(s[n]),"bytes");t=Y_(cD([t,a]),"bytes")}return h_(t)}function RO(e){const t=new Uint8Array(32).fill(0);return e?CO(e)||Y_(v_(e)):h_(t)}function IO(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const s=new Uint8Array(v_(t).byteLength+2);let n=0;const a=t.split(".");for(let i=0;i<a.length;i++){let e=v_(a[i]);e.byteLength>255&&(e=v_(`[${RO(a[i]).slice(2)}]`)),s[n]=e.length,s.set(e,n+1),n+=e.length+1}return s.byteLength!==n+1?s.slice(0,n+1):s}class _O extends xI{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class DO extends xI{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class NO extends xI{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class LO extends xI{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const FO=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,OO=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,jO=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,UO=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function GO(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function HO({uri:e,gatewayUrls:t}){const s=jO.test(e);if(s)return{uri:e,isOnChain:!0,isEncoded:s};const n=GO(null==t?void 0:t.ipfs,"https://ipfs.io"),a=GO(null==t?void 0:t.arweave,"https://arweave.net"),i=e.match(FO),{protocol:r,subpath:o,target:l,subtarget:c=""}=(null==i?void 0:i.groups)||{},h="ipns:/"===r||"ipns/"===o,u="ipfs:/"===r||"ipfs/"===o||OO.test(e);if(e.startsWith("http")&&!h&&!u){let s=e;return(null==t?void 0:t.arweave)&&(s=e.replace(/https:\/\/arweave.net/g,null==t?void 0:t.arweave)),{uri:s,isOnChain:!1,isEncoded:!1}}if((h||u)&&l)return{uri:`${n}/${h?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if("ar:/"===r&&l)return{uri:`${a}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(UO,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new NO({uri:e})}function zO(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new _O({data:e});return e.image||e.image_url||e.image_data}async function VO({gatewayUrls:e,uri:t}){const{uri:s,isOnChain:n}=HO({uri:t,gatewayUrls:e});if(n)return s;const a=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return null==e?void 0:e.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const s=new Image;s.onload=()=>{t(!0)},s.onerror=()=>{t(!1)},s.src=e}))}}(s);if(a)return s;throw new NO({uri:t})}async function WO(e,t){const{blockNumber:s,blockTag:n,key:a,name:i,gatewayUrls:r,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return NF({blockNumber:s,chain:l,contract:"ensUniversalResolver"})})(),h=null==l?void 0:l.ensTlds;if(h&&!h.some((e=>i.endsWith(e))))return null;try{const t={address:c,abi:AF,functionName:"resolve",args:[l_(IO(i)),_D({abi:SF,functionName:"text",args:[MO(i),a]}),r??[TO]],blockNumber:s,blockTag:n},o=fI(e,GF,"readContract"),l=await o(t);if("0x"===l[0])return null;const h=vF({abi:SF,functionName:"text",data:l[0]});return""===h?null:h}catch(u){if(o)throw u;if(AO(u,"resolve"))return null;throw u}}async function $O(e,t){var s,n,a;const{account:i=e.account,blockNumber:r,blockTag:o="latest",blobs:l,data:c,gas:h,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:f,to:m,value:g,...y}=t,b=i?RD(i):void 0;try{ML(t);const i=(r?u_(r):void 0)||o,v=null==(a=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:a.format,w=(v||SL)({...AL(y,{format:v}),from:null==b?void 0:b.address,blobs:l,data:c,gas:h,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:f,to:m,value:g}),x=await e.request({method:"eth_createAccessList",params:[w,i]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(v){throw LF(v,{...t,account:b,chain:e.chain})}}async function qO(e,{address:t,args:s,event:n,events:a,fromBlock:i,strict:r,toBlock:o}={}){const l=a??(n?[n]:void 0),c=CD(e,{method:"eth_newFilter"});let h=[];l&&(h=[l.flatMap((e=>TD({abi:[e],eventName:e.name,args:s})))],n&&(h=h[0]));const u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof i?u_(i):i,toBlock:"bigint"==typeof o?u_(o):o,...h.length?{topics:h}:{}}]});return{abi:l,args:s,eventName:n?n.name:void 0,fromBlock:i,id:u,request:c(u),strict:Boolean(r),toBlock:o,type:"event"}}async function KO(e){const t=CD(e,{method:"eth_newPendingTransactionFilter"}),s=await e.request({method:"eth_newPendingTransactionFilter"});return{id:s,request:t(s),type:"transaction"}}async function QO(e,{address:t,blockNumber:s,blockTag:n="latest"}){const a=void 0!==s?u_(s):void 0,i=await e.request({method:"eth_getCode",params:[t,a||n]},{dedupe:Boolean(a)});if("0x"!==i)return i}class ZO extends xI{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}const XO=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function YO(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class JO extends xI{constructor({domain:e}){super(`Invalid domain "${XD(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class ej extends xI{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class tj extends xI{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function sj(e){const{domain:t={},message:s,primaryType:n}=e,a={EIP712Domain:cj({domain:t}),...e.types};lj({domain:t,message:s,primaryType:n,types:a});const i=["0x1901"];return t&&i.push(function({domain:e,types:t}){return nj({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:a})),"EIP712Domain"!==n&&i.push(nj({data:s,primaryType:n,types:a})),Y_(cD(i))}function nj({data:e,primaryType:t,types:s}){return Y_(aj({data:e,primaryType:t,types:s}))}function aj({data:e,primaryType:t,types:s}){const n=[{type:"bytes32"}],a=[ij({primaryType:t,types:s})];for(const i of s[t]){const[t,r]=oj({types:s,name:i.name,type:i.type,value:e[i.name]});n.push(t),a.push(r)}return bD(n,a)}function ij({primaryType:e,types:t}){const s=l_(function({primaryType:e,types:t}){let s="";const n=rj({primaryType:e,types:t});n.delete(e);const a=[e,...Array.from(n).sort()];for(const i of a)s+=`${i}(${t[i].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return s}({primaryType:e,types:t}));return Y_(s)}function rj({primaryType:e,types:t},s=new Set){const n=e.match(/^\w*/u),a=null==n?void 0:n[0];if(s.has(a)||void 0===t[a])return s;s.add(a);for(const i of t[a])rj({primaryType:i.type,types:t},s);return s}function oj({types:e,name:t,type:s,value:n}){if(void 0!==e[s])return[{type:"bytes32"},Y_(aj({data:n,primaryType:s,types:e}))];if("bytes"===s)return[{type:"bytes32"},Y_(n="0x"+((n.length%2?"0":"")+n.slice(2)))];if("string"===s)return[{type:"bytes32"},Y_(l_(n))];if(s.lastIndexOf("]")===s.length-1){const a=s.slice(0,s.lastIndexOf("[")),i=n.map((s=>oj({name:t,type:a,types:e,value:s})));return[{type:"bytes32"},Y_(bD(i.map((([e])=>e)),i.map((([,e])=>e))))]}return[{type:s},n]}function lj(e){const{domain:t,message:s,primaryType:n,types:a}=e,i=(e,t)=>{for(const s of e){const{name:e,type:n}=s,r=t[e],o=n.match(yD);if(o&&("number"==typeof r||"bigint"==typeof r)){const[e,t,s]=o;u_(r,{signed:"int"===t,size:Number.parseInt(s)/8})}if("address"===n&&"string"==typeof r&&!lD(r))throw new tD({address:r});const l=n.match(gD);if(l){const[e,t]=l;if(t&&bI(r)!==Number.parseInt(t))throw new UI({expectedSize:Number.parseInt(t),givenSize:bI(r)})}const c=a[n];c&&(hj(n),i(c,r))}};if(a.EIP712Domain&&t){if("object"!=typeof t)throw new JO({domain:t});i(a.EIP712Domain,t)}if("EIP712Domain"!==n){if(!a[n])throw new ej({primaryType:n,types:a});i(a[n],s)}}function cj({domain:e}){return["string"==typeof(null==e?void 0:e.name)&&{name:"name",type:"string"},(null==e?void 0:e.version)&&{name:"version",type:"string"},("number"==typeof(null==e?void 0:e.chainId)||"bigint"==typeof(null==e?void 0:e.chainId))&&{name:"chainId",type:"uint256"},(null==e?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==e?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function hj(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new tj({type:e})}const uj={"0x0":"reverted","0x1":"success"};function dj(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>mF(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?r_(e.transactionIndex):null,status:e.status?uj[e.status]:null,type:e.type?NL[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}function pj(e,t){return Y_(function(e){const t="string"==typeof e?p_(e):"string"==typeof e.raw?e.raw:h_(e.raw);return cD([p_(`Ethereum Signed Message:\n${bI(t)}`),t])}(e),t)}const fj="0x6492649264926492649264926492649264926492649264926492649264926492";async function mj(e,{blockHash:t,blockNumber:s,blockTag:n,hash:a,index:i}){var r,o,l;const c=n||"latest",h=void 0!==s?u_(s):void 0;let u=null;if(u=a?await e.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):t?await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,u_(i)]},{dedupe:!0}):await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[h||c,u_(i)]},{dedupe:Boolean(h)}),!u)throw new uN({blockHash:t,blockNumber:s,blockTag:c,hash:a,index:i});return((null==(l=null==(o=null==(r=e.chain)?void 0:r.formatters)?void 0:o.transaction)?void 0:l.format)||LL)(u)}async function gj(e,{hash:t}){var s,n,a;const i=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!i)throw new dN({hash:t});return((null==(a=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionReceipt)?void 0:a.format)||dj)(i)}let yj=class e extends Error{constructor(t,s={}){const n=(()=>{var t;if(s.cause instanceof e){if(s.cause.details)return s.cause.details;if(s.cause.shortMessage)return s.cause.shortMessage}return(null==(t=s.cause)?void 0:t.message)?s.cause.message:s.details})(),a=s.cause instanceof e&&s.cause.docsPath||s.docsPath,i=`https://oxlib.sh${a??""}`;super([t||"An error occurred.",...s.metaMessages?["",...s.metaMessages]:[],...n||a?["",n?`Details: ${n}`:void 0,a?`See: ${i}`:void 0]:[]].filter((e=>"string"==typeof e)).join("\n"),s.cause?{cause:s.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=s.cause,this.details=n,this.docs=i,this.docsPath=a,this.shortMessage=t}walk(e){return bj(this,e)}};function bj(e,t){return(null==t?void 0:t(e))?e:e&&"object"==typeof e&&"cause"in e&&e.cause?bj(e.cause,t):t?null:e}function vj(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function wj(e,t){if(Lj(e)>t)throw new Uj({givenSize:Lj(e),maxSize:t})}function xj(e,t={}){const{dir:s,size:n=32}=t;if(0===n)return e;const a=e.replace("0x","");if(a.length>2*n)throw new Hj({size:Math.ceil(a.length/2),targetSize:n,type:"Hex"});return`0x${a["right"===s?"padEnd":"padStart"](2*n,"0")}`}const kj=new TextEncoder;function Aj(e){return e.length}let Ej=class extends yj{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Sj=class extends yj{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Pj=new TextEncoder,Tj=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Bj(...e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function Cj(e,t={}){const s=`0x${Number(e)}`;return"number"==typeof t.size?(wj(s,t.size),_j(s,t.size)):s}function Mj(e,t={}){let s="";for(let a=0;a<e.length;a++)s+=Tj[e[a]];const n=`0x${s}`;return"number"==typeof t.size?(wj(n,t.size),Dj(n,t.size)):n}function Rj(e,t={}){const{signed:s,size:n}=t,a=BigInt(e);let i;n?i=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const r="bigint"==typeof i&&s?-i-1n:0;if(i&&a>i||a<r){const t="bigint"==typeof e?"n":"";throw new Fj({max:i?`${i}${t}`:void 0,min:`${r}${t}`,signed:s,size:n,value:`${e}${t}`})}const o=`0x${(s&&a<0?(1n<<BigInt(8*n))+BigInt(a):a).toString(16)}`;return n?_j(o,n):o}function Ij(e,t={}){return Mj(Pj.encode(e),t)}function _j(e,t){return xj(e,{dir:"left",size:t})}function Dj(e,t){return xj(e,{dir:"right",size:t})}function Nj(e,t,s,n={}){const{strict:a}=n;!function(e,t){if("number"==typeof t&&t>0&&t>Lj(e)-1)throw new Gj({offset:t,position:"start",size:Lj(e)})}(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(s??e.length))}`;return a&&function(e,t,s){if("number"==typeof t&&"number"==typeof s&&Lj(e)!==s-t)throw new Gj({offset:s,position:"end",size:Lj(e)})}(i,t,s),i}function Lj(e){return Math.ceil((e.length-2)/2)}class Fj extends yj{constructor({max:e,min:t,signed:s,size:n,value:a}){super(`Number \`${a}\` is not in safe${n?` ${8*n}-bit`:""}${s?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Oj extends yj{constructor(e){super(`Value \`${"object"==typeof e?function(e){return JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"#__bigint":t),void 0)}(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class jj extends yj{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Uj extends yj{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Gj extends yj{constructor({offset:e,position:t,size:s}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${s}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Hj extends yj{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function zj(e){return{address:e.address,amount:Rj(e.amount),index:Rj(e.index),validatorIndex:Rj(e.validatorIndex)}}function Vj(e){return{..."bigint"==typeof e.baseFeePerGas&&{baseFeePerGas:Rj(e.baseFeePerGas)},..."bigint"==typeof e.blobBaseFee&&{blobBaseFee:Rj(e.blobBaseFee)},..."string"==typeof e.feeRecipient&&{feeRecipient:e.feeRecipient},..."bigint"==typeof e.gasLimit&&{gasLimit:Rj(e.gasLimit)},..."bigint"==typeof e.number&&{number:Rj(e.number)},..."bigint"==typeof e.prevRandao&&{prevRandao:Rj(e.prevRandao)},..."bigint"==typeof e.time&&{time:Rj(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(zj)}}}async function Wj(e,t){const{blockNumber:s,blockTag:n="latest",blocks:a,returnFullTransactions:i,traceTransfers:r,validation:o}=t;try{const t=[];for(const e of a){const s=e.blockOverrides?Vj(e.blockOverrides):void 0,n=e.calls.map((e=>{const t=e,s=t.account?RD(t.account):void 0,n={...t,data:t.abi?_D(t):t.data,from:t.from??(null==s?void 0:s.address)};return ML(n),SL(n)})),a=e.stateOverrides?BL(e.stateOverrides):void 0;t.push({blockOverrides:s,calls:n,stateOverrides:a})}const l=(s?u_(s):void 0)||n;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:i,traceTransfers:r,validation:o},l]})).map(((e,t)=>({...FL(e),calls:e.calls.map(((e,s)=>{var n,i;const{abi:r,args:o,functionName:l,to:c}=a[t].calls[s],h=(null==(n=e.error)?void 0:n.data)??e.returnData,u=BigInt(e.gasUsed),d=null==(i=e.logs)?void 0:i.map((e=>mF(e))),p="0x1"===e.status?"success":"failure",f=r&&"success"===p&&"0x"!==h?vF({abi:r,data:h,functionName:l}):null,m=(()=>{var t;if("success"===p)return;let s;return"0x"===(null==(t=e.error)?void 0:t.data)?s=new PI:e.error&&(s=new wN(e.error)),s?JN(s,{abi:r??[],address:c,args:o,functionName:l??"<unknown>"}):void 0})();return{data:h,gasUsed:u,logs:d,status:p,..."success"===p?{result:f}:{error:m}}}))})))}catch(IV){const t=IV,s=kL(t,{});if(s instanceof xL)throw t;throw s}}class $j extends Error{constructor(e,t={}){var s;const n=t.cause instanceof $j?t.cause.details:(null==(s=t.cause)?void 0:s.message)?t.cause.message:t.details,a=t.cause instanceof $j&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...n?[`Details: ${n}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=a,this.metaMessages=t.metaMessages,this.shortMessage=e}}function qj(e,t){const s=e.exec(t);return null==s?void 0:s.groups}const Kj=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Qj=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Zj=/^\(.+?\).*?$/,Xj=/^tuple(?<array>(\[(\d*)\])*)$/;function Yj(e){let t=e.type;if(Xj.test(e.type)&&"components"in e){t="(";const s=e.components.length;for(let a=0;a<s;a++)t+=Yj(e.components[a]),a<s-1&&(t+=", ");const n=qj(Xj,e.type);return t+=`)${(null==n?void 0:n.array)??""}`,Yj({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Jj(e){let t="";const s=e.length;for(let n=0;n<s;n++)t+=Yj(e[n]),n!==s-1&&(t+=", ");return t}function eU(e){var t;return"function"===e.type?`function ${e.name}(${Jj(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${(null==(t=e.outputs)?void 0:t.length)?` returns (${Jj(e.outputs)})`:""}`:"event"===e.type?`event ${e.name}(${Jj(e.inputs)})`:"error"===e.type?`error ${e.name}(${Jj(e.inputs)})`:"constructor"===e.type?`constructor(${Jj(e.inputs)})${"payable"===e.stateMutability?" payable":""}`:"fallback"===e.type?"fallback() external"+("payable"===e.stateMutability?" payable":""):"receive() external payable"}const tU=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,sU=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,nU=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/,aU=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function iU(e){return aU.test(e)}function rU(e){return qj(aU,e)}const oU=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,lU=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/,cU=/^receive\(\) external payable$/,hU=new Set(["indexed"]),uU=new Set(["calldata","memory","storage"]);class dU extends $j{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class pU extends $j{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class fU extends $j{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class mU extends $j{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class gU extends $j{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class yU extends $j{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class bU extends $j{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${s}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class vU extends $j{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class wU extends $j{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class xU extends $j{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class kU extends $j{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class AU extends $j{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class EU extends $j{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}const SU=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function PU(e,t={}){if(function(e){return nU.test(e)}(e))return function(e,t={}){const s=function(e){return qj(nU,e)}(e);if(!s)throw new wU({signature:e,type:"function"});const n=RU(s.parameters),a=[],i=n.length;for(let o=0;o<i;o++)a.push(MU(n[o],{modifiers:uU,structs:t,type:"function"}));const r=[];if(s.returns){const e=RU(s.returns),n=e.length;for(let s=0;s<n;s++)r.push(MU(e[s],{modifiers:uU,structs:t,type:"function"}))}return{name:s.name,type:"function",stateMutability:s.stateMutability??"nonpayable",inputs:a,outputs:r}}(e,t);if(function(e){return sU.test(e)}(e))return function(e,t={}){const s=function(e){return qj(sU,e)}(e);if(!s)throw new wU({signature:e,type:"event"});const n=RU(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(MU(n[r],{modifiers:hU,structs:t,type:"event"}));return{name:s.name,type:"event",inputs:a}}(e,t);if(function(e){return tU.test(e)}(e))return function(e,t={}){const s=function(e){return qj(tU,e)}(e);if(!s)throw new wU({signature:e,type:"error"});const n=RU(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(MU(n[r],{structs:t,type:"error"}));return{name:s.name,type:"error",inputs:a}}(e,t);if(function(e){return oU.test(e)}(e))return function(e,t={}){const s=function(e){return qj(oU,e)}(e);if(!s)throw new wU({signature:e,type:"constructor"});const n=RU(s.parameters),a=[],i=n.length;for(let r=0;r<i;r++)a.push(MU(n[r],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:s.stateMutability??"nonpayable",inputs:a}}(e,t);if(function(e){return lU.test(e)}(e))return function(e){const t=function(e){return qj(lU,e)}(e);if(!t)throw new wU({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(function(e){return cU.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new xU({signature:e})}const TU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,BU=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,CU=/^u?int$/;function MU(e,t){var s,n;const a=function(e,t,s){let n="";if(s)for(const a of Object.entries(s)){if(!a)continue;let e="";for(const t of a[1])e+=`[${t.type}${t.name?`:${t.name}`:""}]`;n+=`(${a[0]}{${e}})`}return t?`${t}:${e}${n}`:e}(e,null==t?void 0:t.type,null==t?void 0:t.structs);if(SU.has(a))return SU.get(a);const i=Zj.test(e),r=qj(i?BU:TU,e);if(!r)throw new mU({param:e});if(r.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||Kj.test(e)||Qj.test(e)||_U.test(e)}(r.name))throw new gU({param:e,name:r.name});const o=r.name?{name:r.name}:{},l="indexed"===r.modifier?{indexed:!0}:{},c=(null==t?void 0:t.structs)??{};let h,u={};if(i){h="tuple";const e=RU(r.type),t=[],s=e.length;for(let n=0;n<s;n++)t.push(MU(e[n],{structs:c}));u={components:t}}else if(r.type in c)h="tuple",u={components:c[r.type]};else if(CU.test(r.type))h=`${r.type}256`;else if(h=r.type,"struct"!==(null==t?void 0:t.type)&&!IU(h))throw new fU({type:h});if(r.modifier){if(!(null==(n=null==(s=null==t?void 0:t.modifiers)?void 0:s.has)?void 0:n.call(s,r.modifier)))throw new yU({param:e,type:null==t?void 0:t.type,modifier:r.modifier});if(uU.has(r.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(h,!!r.array))throw new bU({param:e,type:null==t?void 0:t.type,modifier:r.modifier})}const d={type:`${h}${r.array??""}`,...o,...l,...u};return SU.set(a,d),d}function RU(e,t=[],s="",n=0){const a=e.trim().length;for(let i=0;i<a;i++){const a=e[i],r=e.slice(i+1);switch(a){case",":return 0===n?RU(r,[...t,s.trim()]):RU(r,t,`${s}${a}`,n);case"(":return RU(r,t,`${s}${a}`,n+1);case")":return RU(r,t,`${s}${a}`,n-1);default:return RU(r,t,`${s}${a}`,n)}}if(""===s)return t;if(0!==n)throw new EU({current:s,depth:n});return t.push(s.trim()),t}function IU(e){return"address"===e||"bool"===e||"function"===e||"string"===e||Kj.test(e)||Qj.test(e)}const _U=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/,DU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function NU(e,t,s=new Set){const n=[],a=e.length;for(let i=0;i<a;i++){const a=e[i];if(Zj.test(a.type))n.push(a);else{const e=qj(DU,a.type);if(!(null==e?void 0:e.type))throw new vU({abiParameter:a});const{array:i,type:r}=e;if(r in t){if(s.has(r))throw new AU({type:r});n.push({...a,type:`tuple${i??""}`,components:NU(t[r]??[],t,new Set([...s,r]))})}else{if(!IU(r))throw new pU({type:r});n.push(a)}}}return n}function LU(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function FU(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function OU(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const jU=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function UU(e){for(let s=0;s<e.length;s++)e[s]=(t=e[s])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function GU(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),FU(e),e}"function"==typeof Uint8Array.from([]).toHex&&Uint8Array.fromHex;class HU{clone(){return this._cloneInto()}}const zU=BigInt(2**32-1),VU=BigInt(32);function WU(e,t=!1){return t?{h:Number(e&zU),l:Number(e>>VU&zU)}:{h:0|Number(e>>VU&zU),l:0|Number(e&zU)}}function $U(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){const{h:i,l:r}=WU(e[a],t);[s[a],n[a]]=[i,r]}return[s,n]}const qU=[],KU=[],QU=[],ZU=BigInt(0),XU=BigInt(1),YU=BigInt(2),JU=BigInt(7),eG=BigInt(256),tG=BigInt(113);for(let _V=0,DV=XU,NV=1,LV=0;_V<24;_V++){[NV,LV]=[LV,(2*NV+3*LV)%5],qU.push(2*(5*LV+NV)),KU.push((_V+1)*(_V+2)/2%64);let e=ZU;for(let t=0;t<7;t++)DV=(DV<<XU^(DV>>JU)*tG)%eG,DV&YU&&(e^=XU<<(XU<<BigInt(t))-XU);QU.push(e)}const[sG,nG]=$U(QU,!0),aG=(e,t,s)=>s>32?((e,t,s)=>t<<s-32|e>>>64-s)(e,t,s):((e,t,s)=>e<<s|t>>>32-s)(e,t,s),iG=(e,t,s)=>s>32?((e,t,s)=>e<<s-32|t>>>64-s)(e,t,s):((e,t,s)=>t<<s|e>>>32-s)(e,t,s);class rG extends HU{constructor(e,t,s,n=!1,a=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=a,LU(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){jU||UU(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,a=(n+2)%10,i=s[a],r=s[a+1],o=aG(i,r,1)^s[t],l=iG(i,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],a=e[3];for(let s=0;s<24;s++){const n=KU[s],i=aG(t,a,n),r=iG(t,a,n),o=qU[s];t=e[o],a=e[o+1],e[o]=i,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=sG[n],e[1]^=nG[n]}s.fill(0)}(this.state32,this.rounds),jU||UU(this.state32),this.posOut=0,this.pos=0}update(e){OU(this);const{blockLen:t,state:s}=this,n=(e=GU(e)).length;for(let a=0;a<n;){const i=Math.min(t-this.pos,n-a);for(let t=0;t<i;t++)s[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){OU(this,!1),FU(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,a=e.length;n<a;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return LU(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(function(e,t){FU(e);const s=t.outputLen;if(e.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:n,rounds:a,enableXOF:i}=this;return e||(e=new rG(t,s,n,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=s,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}const oG=(()=>function(e){const t=t=>e().update(GU(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}((()=>new rG(136,1,32))))();function lG(e,t={}){const{as:s=("string"==typeof e?"Hex":"Bytes")}=t,n=oG(function(e){return e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){const{size:s}=t;let n=e;s&&(wj(e,s),n=Dj(e,s));let a=n.slice(2);a.length%2&&(a=`0${a}`);const i=a.length/2,r=new Uint8Array(i);for(let o=0,l=0;o<i;o++){const e=vj(a.charCodeAt(l++)),t=vj(a.charCodeAt(l++));if(void 0===e||void 0===t)throw new yj(`Invalid byte sequence ("${a[l-2]}${a[l-1]}" in "${a}").`);r[o]=16*e+t}return r}(e):function(e){return e instanceof Uint8Array?e:new Uint8Array(e)}(e)}(e));return"Bytes"===s?n:Mj(n)}class cG extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const hG=new cG(8192),uG=/^0x[a-fA-F0-9]{40}$/;function dG(e,t={}){const{strict:s=!0}=t;if(!uG.test(e))throw new fG({address:e,cause:new mG});if(s){if(e.toLowerCase()===e)return;if(function(e){if(hG.has(e))return hG.get(e);dG(e,{strict:!1});const t=e.substring(2).toLowerCase(),s=lG(function(e,t={}){const{size:s}=t,n=kj.encode(e);return"number"==typeof s?(function(e,t){if(Aj(e)>t)throw new Ej({givenSize:Aj(e),maxSize:t})}(n,s),function(e,t){return function(e,t={}){const{dir:s,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new Sj({size:e.length,targetSize:n,type:"Bytes"});const a=new Uint8Array(n);for(let i=0;i<n;i++){const t="right"===s;a[t?i:n-i-1]=e[t?i:e.length-i-1]}return a}(e,{dir:"right",size:t})}(n,s)):n}(t),{as:"Bytes"}),n=t.split("");for(let i=0;i<40;i+=2)s[i>>1]>>4>=8&&n[i]&&(n[i]=n[i].toUpperCase()),(15&s[i>>1])>=8&&n[i+1]&&(n[i+1]=n[i+1].toUpperCase());const a=`0x${n.join("")}`;return hG.set(e,a),a}(e)!==e)throw new fG({address:e,cause:new gG})}}function pG(e,t={}){const{strict:s=!0}=t??{};try{return dG(e,{strict:s}),!0}catch{return!1}}class fG extends yj{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class mG extends yj{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class gG extends yj{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function yG(e){let t=!0,s="",n=0,a="",i=!1;for(let r=0;r<e.length;r++){const o=e[r];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t)if(0!==n)" "!==o?(a+=o,s+=o):","!==e[r-1]&&","!==s&&",("!==s&&(s="",t=!1);else if(" "===o&&["event","function","error",""].includes(a))a="";else if(a+=o,")"===o){i=!0;break}}if(!i)throw new yj("Unable to normalize signature.");return a}function bG(e,t){const s=typeof e,n=t.type;switch(n){case"address":return pG(e,{strict:!1});case"bool":return"boolean"===s;case"function":case"string":return"string"===s;default:return"tuple"===n&&"components"in t?Object.values(t.components).every(((t,s)=>bG(Object.values(e)[s],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?"number"===s||"bigint"===s:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?"string"===s||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)&&Array.isArray(e)&&e.every((e=>bG(e,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})))}}function vG(e,t,s){for(const n in e){const a=e[n],i=t[n];if("tuple"===a.type&&"tuple"===i.type&&"components"in a&&"components"in i)return vG(a.components,i.components,s[n]);const r=[a.type,i.type];if(r.includes("address")&&r.includes("bytes20")||(r.includes("address")&&r.includes("string")||r.includes("address")&&r.includes("bytes"))&&pG(s[n],{strict:!1}))return r}}function wG(e,t={}){const{prepare:s=!0}=t,n=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=PU(e);else{const s=function(e){const t={},s=e.length;for(let r=0;r<s;r++){const s=e[r];if(!iU(s))continue;const n=rU(s);if(!n)throw new wU({signature:s,type:"struct"});const a=n.properties.split(";"),i=[],o=a.length;for(let e=0;e<o;e++){const t=a[e].trim();if(!t)continue;const s=MU(t,{type:"struct"});i.push(s)}if(!i.length)throw new kU({signature:s});t[n.name]=i}const n={},a=Object.entries(t),i=a.length;for(let r=0;r<i;r++){const[e,s]=a[r];n[e]=NU(s,t)}return n}(e),n=e.length;for(let a=0;a<n;a++){const n=e[a];if(!iU(n)){t=PU(n,s);break}}}if(!t)throw new dU({signature:e});return t}(e):e;return{...n,...s?{hash:kG(n)}:{}}}function xG(e){return Nj(kG(e),0,4)}function kG(e){return"string"!=typeof e&&"hash"in e&&e.hash?e.hash:lG(Ij(function(e){return yG("string"==typeof e?e:eU(e))}(e)))}class AG extends yj{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${yG(eU(e.abiItem))}\`, and`,`\`${t.type}\` in \`${yG(eU(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class EG extends yj{constructor({name:e,data:t,type:s="item"}){super(`ABI ${s}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const SG=/^(.*)\[([0-9]*)\]$/,PG=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,TG=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function BG({checksumAddress:e=!1,parameter:t,value:s}){const n=t,a=function(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(n.type);if(a){const[t,i]=a;return function(e,t){const{checksumAddress:s,length:n,parameter:a}=t,i=null===n;if(!Array.isArray(e))throw new NG(e);if(!i&&e.length!==n)throw new IG({expectedLength:n,givenLength:e.length,type:`${a.type}[${n}]`});let r=!1;const o=[];for(let l=0;l<e.length;l++){const t=BG({checksumAddress:s,parameter:a,value:e[l]});t.dynamic&&(r=!0),o.push(t)}if(i||r){const e=CG(o);if(i){const t=Rj(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Bj(t,e):t}}if(r)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:Bj(...o.map((({encoded:e})=>e)))}}(s,{checksumAddress:e,length:t,parameter:{...n,type:i}})}if("tuple"===n.type)return function(e,t){const{checksumAddress:s,parameter:n}=t;let a=!1;const i=[];for(let r=0;r<n.components.length;r++){const t=n.components[r],o=BG({checksumAddress:s,parameter:t,value:e[Array.isArray(e)?r:t.name]});i.push(o),o.dynamic&&(a=!0)}return{dynamic:a,encoded:a?CG(i):Bj(...i.map((({encoded:e})=>e)))}}(s,{checksumAddress:e,parameter:n});if("address"===n.type)return function(e,t){const{checksum:s=!1}=t;return dG(e,{strict:s}),{dynamic:!1,encoded:_j(e.toLowerCase())}}(s,{checksum:e});if("bool"===n.type)return function(e){if("boolean"!=typeof e)throw new yj(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:_j(Cj(e))}}(s);if(n.type.startsWith("uint")||n.type.startsWith("int")){const e=n.type.startsWith("int"),[,,t="256"]=TG.exec(n.type)??[];return function(e,{signed:t,size:s}){if("number"==typeof s){const n=2n**(BigInt(s)-(t?1n:0n))-1n,a=t?-n-1n:0n;if(e>n||e<a)throw new Fj({max:n.toString(),min:a.toString(),signed:t,size:s/8,value:e.toString()})}return{dynamic:!1,encoded:Rj(e,{size:32,signed:t})}}(s,{signed:e,size:Number(t)})}if(n.type.startsWith("bytes"))return function(e,{type:t}){const[,s]=t.split("bytes"),n=Lj(e);if(!s){let t=e;return n%32!=0&&(t=Dj(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:Bj(_j(Rj(n,{size:32})),t)}}if(n!==Number.parseInt(s))throw new _G({expectedSize:Number.parseInt(s),value:e});return{dynamic:!1,encoded:Dj(e)}}(s,{type:n.type});if("string"===n.type)return function(e){const t=Ij(e),s=Math.ceil(Lj(t)/32),n=[];for(let a=0;a<s;a++)n.push(Dj(Nj(t,32*a,32*(a+1))));return{dynamic:!0,encoded:Bj(Dj(Rj(Lj(t),{size:32})),...n)}}(s);throw new LG(n.type)}function CG(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:s,encoded:n}=e[i];t+=s?32:Lj(n)}const s=[],n=[];let a=0;for(let i=0;i<e.length;i++){const{dynamic:r,encoded:o}=e[i];r?(s.push(Rj(t+a,{size:32})),n.push(o),a+=Lj(o)):s.push(o)}return Bj(...s,...n)}function MG(e,t,s){const{checksumAddress:n=!1}={};if(e.length!==t.length)throw new DG({expectedLength:e.length,givenLength:t.length});const a=function({checksumAddress:e,parameters:t,values:s}){const n=[];for(let a=0;a<t.length;a++)n.push(BG({checksumAddress:e,parameter:t[a],value:s[a]}));return n}({checksumAddress:n,parameters:e,values:t}),i=CG(a);return 0===i.length?"0x":i}function RG(e,t){if(e.length!==t.length)throw new DG({expectedLength:e.length,givenLength:t.length});const s=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n];s.push(RG.encode(a,i))}return Bj(...s)}(RG||(RG={})).encode=function e(t,s,n=!1){if("address"===t){const e=s;return dG(e),_j(e.toLowerCase(),n?32:0)}if("string"===t)return Ij(s);if("bytes"===t)return s;if("bool"===t)return _j(Cj(s),n?32:1);const a=t.match(TG);if(a){const[e,t,i="256"]=a,r=Number.parseInt(i)/8;return Rj(s,{size:n?32:r,signed:"int"===t})}const i=t.match(PG);if(i){const[e,t]=i;if(Number.parseInt(t)!==(s.length-2)/2)throw new _G({expectedSize:Number.parseInt(t),value:s});return Dj(s,n?32:0)}const r=t.match(SG);if(r&&Array.isArray(s)){const[t,n]=r,a=[];for(let i=0;i<s.length;i++)a.push(e(n,s[i],!0));return 0===a.length?"0x":Bj(...a)}throw new LG(t)};class IG extends yj{constructor({expectedLength:e,givenLength:t,type:s}){super(`Array length mismatch for type \`${s}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class _G extends yj{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Lj(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class DG extends yj{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class NG extends yj{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class LG extends yj{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function FG(e,...t){const{overloads:s}=e,n=s?function(e,t,s){const n=function(e,t,s){const{args:n=[],prepare:a=!0}=s??{},i=function(e,t={}){const{strict:s=!1}=t;try{return function(e,t={}){const{strict:s=!1}=t;if(!e)throw new Oj(e);if("string"!=typeof e)throw new Oj(e);if(s&&!/^0x[0-9a-fA-F]*$/.test(e))throw new jj(e);if(!e.startsWith("0x"))throw new jj(e)}(e,{strict:s}),!0}catch{return!1}}(t,{strict:!1}),r=e.filter((e=>i?"function"===e.type||"error"===e.type?xG(e)===Nj(t,0,4):"event"===e.type&&kG(e)===t:"name"in e&&e.name===t));if(0===r.length)throw new EG({name:t});if(1===r.length)return{...r[0],...a?{hash:kG(r[0])}:{}};let o;for(const c of r)if("inputs"in c)if(n&&0!==n.length){if(c.inputs&&0!==c.inputs.length&&c.inputs.length===n.length&&n.every(((e,t)=>{const s="inputs"in c&&c.inputs[t];return!!s&&bG(e,s)}))){if(o&&"inputs"in o&&o.inputs){const e=vG(c.inputs,o.inputs,n);if(e)throw new AG({abiItem:c,type:e[0]},{abiItem:o,type:e[1]})}o=c}}else if(!c.inputs||0===c.inputs.length)return{...c,...a?{hash:kG(c)}:{}};const l=(()=>{if(o)return o;const[e,...t]=r;return{...e,overloads:t}})();if(!l)throw new EG({name:t});return{...l,...a?{hash:kG(l)}:{}}}(e,t,s);if("function"!==n.type)throw new EG({name:t,type:"function"});return n}([e,...s],e.name,{args:t[0]}):e,a=xG(n),i=t.length>0?MG(n.inputs,t[0]):void 0;return i?Bj(a,i):a}function OG(e,t={}){return wG(e,t)}const jG="0x0000000000000000000000000000000000000000";class UG extends D_{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");w_(e.outputLen),w_(e.blockLen)}(e);const s=__(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,a=new Uint8Array(n);a.set(s.length>n?e.create().update(s).digest():s);for(let i=0;i<a.length;i++)a[i]^=54;this.iHash.update(a),this.oHash=e.create();for(let i=0;i<a.length;i++)a[i]^=106;this.oHash.update(a),a.fill(0)}update(e){return k_(this),this.iHash.update(e),this}digestInto(e){k_(this),x_(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:n,destroyed:a,blockLen:i,outputLen:r}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=r,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const GG=(e,t,s)=>new UG(e,t).update(s).digest();GG.create=(e,t)=>new UG(e,t);const HG=BigInt(0),zG=BigInt(1),VG=BigInt(2);function WG(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function $G(e){if(!WG(e))throw new Error("Uint8Array expected")}function qG(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const KG=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function QG(e){$G(e);let t="";for(let s=0;s<e.length;s++)t+=KG[e[s]];return t}function ZG(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function XG(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?HG:BigInt("0x"+e)}function YG(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function JG(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,s=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(s);for(let a=0,i=0;a<s;a++,i+=2){const t=YG(e.charCodeAt(i)),s=YG(e.charCodeAt(i+1));if(void 0===t||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[a]=16*t+s}return n}function eH(e){return XG(QG(e))}function tH(e){return $G(e),XG(QG(Uint8Array.from(e).reverse()))}function sH(e,t){return JG(e.toString(16).padStart(2*t,"0"))}function nH(e,t){return sH(e,t).reverse()}function aH(e,t,s){let n;if("string"==typeof t)try{n=JG(t)}catch(IV){throw new Error(e+" must be hex string or Uint8Array, cause: "+IV)}else{if(!WG(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const a=n.length;if("number"==typeof s&&a!==s)throw new Error(e+" of length "+s+" expected, got "+a);return n}function iH(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];$G(s),t+=s.length}const s=new Uint8Array(t);for(let n=0,a=0;n<e.length;n++){const t=e[n];s.set(t,a),a+=t.length}return s}const rH=e=>"bigint"==typeof e&&HG<=e;function oH(e,t,s){return rH(e)&&rH(t)&&rH(s)&&t<=e&&e<s}function lH(e,t,s,n){if(!oH(t,s,n))throw new Error("expected valid "+e+": "+s+" <= n < "+n+", got "+t)}function cH(e){let t;for(t=0;e>HG;e>>=zG,t+=1);return t}const hH=e=>(VG<<BigInt(e-1))-zG,uH=e=>new Uint8Array(e),dH=e=>Uint8Array.from(e);function pH(e,t,s){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof s)throw new Error("hmacFn must be a function");let n=uH(e),a=uH(e),i=0;const r=()=>{n.fill(1),a.fill(0),i=0},o=(...e)=>s(a,n,...e),l=(e=uH())=>{a=o(dH([0]),e),n=o(),0!==e.length&&(a=o(dH([1]),e),n=o())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const s=[];for(;e<t;){n=o();const t=n.slice();s.push(t),e+=n.length}return iH(...s)};return(e,t)=>{let s;for(r(),l(e);!(s=t(c()));)l();return r(),s}}const fH={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||WG(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function mH(e,t,s={}){const n=(t,s,n)=>{const a=fH[s];if("function"!=typeof a)throw new Error("invalid validator function");const i=e[t];if(!(n&&void 0===i||a(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+s+", got "+i)};for(const[a,i]of Object.entries(t))n(a,i,!1);for(const[a,i]of Object.entries(s))n(a,i,!0);return e}function gH(e){const t=new WeakMap;return(s,...n)=>{const a=t.get(s);if(void 0!==a)return a;const i=e(s,...n);return t.set(s,i),i}}const yH=Object.freeze(Object.defineProperty({__proto__:null,aInRange:lH,abool:qG,abytes:$G,bitGet:function(e,t){return e>>BigInt(t)&zG},bitLen:cH,bitMask:hH,bitSet:function(e,t,s){return e|(s?zG:HG)<<BigInt(t)},bytesToHex:QG,bytesToNumberBE:eH,bytesToNumberLE:tH,concatBytes:iH,createHmacDrbg:pH,ensureBytes:aH,equalBytes:function(e,t){if(e.length!==t.length)return!1;let s=0;for(let n=0;n<e.length;n++)s|=e[n]^t[n];return 0===s},hexToBytes:JG,hexToNumber:XG,inRange:oH,isBytes:WG,memoized:gH,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:sH,numberToBytesLE:nH,numberToHexUnpadded:ZG,numberToVarBytesBE:function(e){return JG(ZG(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},validateObject:mH},Symbol.toStringTag,{value:"Module"})),bH=BigInt(0),vH=BigInt(1),wH=BigInt(2),xH=BigInt(3),kH=BigInt(4),AH=BigInt(5),EH=BigInt(8);function SH(e,t){const s=e%t;return s>=bH?s:t+s}function PH(e,t,s){if(t<bH)throw new Error("invalid exponent, negatives unsupported");if(s<=bH)throw new Error("invalid modulus");if(s===vH)return bH;let n=vH;for(;t>bH;)t&vH&&(n=n*e%s),e=e*e%s,t>>=vH;return n}function TH(e,t,s){let n=e;for(;t-- >bH;)n*=n,n%=s;return n}function BH(e,t){if(e===bH)throw new Error("invert: expected non-zero number");if(t<=bH)throw new Error("invert: expected positive modulus, got "+t);let s=SH(e,t),n=t,a=bH,i=vH;for(;s!==bH;){const e=n%s,t=a-i*(n/s);n=s,s=e,a=i,i=t}if(n!==vH)throw new Error("invert: does not exist");return SH(a,t)}const CH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MH(e,t){const s=void 0!==t?t:e.toString(2).length;return{nBitLength:s,nByteLength:Math.ceil(s/8)}}function RH(e,t,s=!1,n={}){if(e<=bH)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:a,nByteLength:i}=MH(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let r;const o=Object.freeze({ORDER:e,isLE:s,BITS:a,BYTES:i,MASK:hH(a),ZERO:bH,ONE:vH,create:t=>SH(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return bH<=t&&t<e},is0:e=>e===bH,isOdd:e=>(e&vH)===vH,neg:t=>SH(-t,e),eql:(e,t)=>e===t,sqr:t=>SH(t*t,e),add:(t,s)=>SH(t+s,e),sub:(t,s)=>SH(t-s,e),mul:(t,s)=>SH(t*s,e),pow:(e,t)=>function(e,t,s){if(s<bH)throw new Error("invalid exponent, negatives unsupported");if(s===bH)return e.ONE;if(s===vH)return t;let n=e.ONE,a=t;for(;s>bH;)s&vH&&(n=e.mul(n,a)),a=e.sqr(a),s>>=vH;return n}(o,e,t),div:(t,s)=>SH(t*BH(s,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>BH(t,e),sqrt:n.sqrt||(t=>(r||(r=function(e){if(e%kH===xH){const t=(e+vH)/kH;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}if(e%EH===AH){const t=(e-AH)/EH;return function(e,s){const n=e.mul(s,wH),a=e.pow(n,t),i=e.mul(s,a),r=e.mul(e.mul(i,wH),a),o=e.mul(i,e.sub(r,e.ONE));if(!e.eql(e.sqr(o),s))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-vH)/wH;let s,n,a;for(s=e-vH,n=0;s%wH===bH;s/=wH,n++);for(a=wH;a<e&&PH(a,t,e)!==e-vH;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+vH)/kH;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}const i=(s+vH)/wH;return function(e,r){if(e.pow(r,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,a),s),c=e.pow(r,i),h=e.pow(r,s);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const s=e.pow(l,vH<<BigInt(o-t-1));l=e.sqr(s),c=e.mul(c,s),h=e.mul(h,l),o=t}return c}}(e)}(e)),r(o,t))),invertBatch:e=>function(e,t){const s=new Array(t.length),n=t.reduce(((t,n,a)=>e.is0(n)?t:(s[a]=t,e.mul(t,n))),e.ONE),a=e.inv(n);return t.reduceRight(((t,n,a)=>e.is0(n)?t:(s[a]=e.mul(t,s[a]),e.mul(t,n))),a),s}(o,e),cmov:(e,t,s)=>s?t:e,toBytes:e=>s?nH(e,i):sH(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return s?tH(e):eH(e)}});return Object.freeze(o)}function IH(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _H(e){const t=IH(e);return t+Math.ceil(t/2)}const DH=BigInt(0),NH=BigInt(1);function LH(e,t){const s=t.negate();return e?s:t}function FH(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function OH(e,t){return FH(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const jH=new WeakMap,UH=new WeakMap;function GH(e){return UH.get(e)||1}function HH(e){return mH(e.Fp,CH.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),mH(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...MH(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function zH(e){void 0!==e.lowS&&qG("lowS",e.lowS),void 0!==e.prehash&&qG("prehash",e.prehash)}const{bytesToNumberBE:VH,hexToBytes:WH}=yH;class $H extends Error{constructor(e=""){super(e)}}const qH={Err:$H,_tlv:{encode:(e,t)=>{const{Err:s}=qH;if(e<0||e>256)throw new s("tlv.encode: wrong tag");if(1&t.length)throw new s("tlv.encode: unpadded data");const n=t.length/2,a=ZG(n);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const i=n>127?ZG(a.length/2|128):"";return ZG(e)+i+a+t},decode(e,t){const{Err:s}=qH;let n=0;if(e<0||e>256)throw new s("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new s("tlv.decode: wrong tlv");const a=t[n++];let i=0;if(128&a){const e=127&a;if(!e)throw new s("tlv.decode(long): indefinite length not supported");if(e>4)throw new s("tlv.decode(long): byte length is too big");const r=t.subarray(n,n+e);if(r.length!==e)throw new s("tlv.decode: length bytes not complete");if(0===r[0])throw new s("tlv.decode(long): zero leftmost byte");for(const t of r)i=i<<8|t;if(n+=e,i<128)throw new s("tlv.decode(long): not minimal encoding")}else i=a;const r=t.subarray(n,n+i);if(r.length!==i)throw new s("tlv.decode: wrong value length");return{v:r,l:t.subarray(n+i)}}},_int:{encode(e){const{Err:t}=qH;if(e<KH)throw new t("integer: negative integers are not allowed");let s=ZG(e);if(8&Number.parseInt(s[0],16)&&(s="00"+s),1&s.length)throw new t("unexpected DER parsing assertion: unpadded hex");return s},decode(e){const{Err:t}=qH;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return VH(e)}},toSig(e){const{Err:t,_int:s,_tlv:n}=qH,a="string"==typeof e?WH(e):e;$G(a);const{v:i,l:r}=n.decode(48,a);if(r.length)throw new t("invalid signature: left bytes after parsing");const{v:o,l:l}=n.decode(2,i),{v:c,l:h}=n.decode(2,l);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:s.decode(o),s:s.decode(c)}},hexFromSig(e){const{_tlv:t,_int:s}=qH,n=t.encode(2,s.encode(e.r))+t.encode(2,s.encode(e.s));return t.encode(48,n)}},KH=BigInt(0),QH=BigInt(1);BigInt(2);const ZH=BigInt(3);function XH(e){const t=function(e){const t=HH(e);mH(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:n,a:a}=t;if(s){if(!n.eql(a,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof s||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=t,n=RH(t.n,t.nBitLength),a=t.toBytes||((e,t,n)=>{const a=t.toAffine();return iH(Uint8Array.from([4]),s.toBytes(a.x),s.toBytes(a.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function r(e){const{a:n,b:a}=t,i=s.sqr(e),r=s.mul(i,e);return s.add(s.add(r,s.mul(e,n)),a)}if(!s.eql(s.sqr(t.Gy),r(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:s,nByteLength:n,wrapPrivateKey:a,n:i}=t;if(s&&"bigint"!=typeof e){if(WG(e)&&(e=QG(e)),"string"!=typeof e||!s.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let r;try{r="bigint"==typeof e?e:eH(aH("private key",e,n))}catch(o){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return a&&(r=SH(r,i)),lH("private key",r,QH,i),r}function l(e){if(!(e instanceof u))throw new Error("ProjectivePoint expected")}const c=gH(((e,t)=>{const{px:n,py:a,pz:i}=e;if(s.eql(i,s.ONE))return{x:n,y:a};const r=e.is0();null==t&&(t=r?s.ONE:s.inv(i));const o=s.mul(n,t),l=s.mul(a,t),c=s.mul(i,t);if(r)return{x:s.ZERO,y:s.ZERO};if(!s.eql(c,s.ONE))throw new Error("invZ was invalid");return{x:o,y:l}})),h=gH((e=>{if(e.is0()){if(t.allowInfinityPoint&&!s.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:a}=e.toAffine();if(!s.isValid(n)||!s.isValid(a))throw new Error("bad point: x or y not FE");const i=s.sqr(a),o=r(n);if(!s.eql(i,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class u{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==n||!s.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!s.isValid(t)||!s.isValid(n))throw new Error("invalid affine point");if(e instanceof u)throw new Error("projective point not allowed");const a=e=>s.eql(e,s.ZERO);return a(t)&&a(n)?u.ZERO:new u(t,n,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}static fromHex(e){const t=u.fromAffine(i(aH("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return u.BASE.multiply(o(e))}static msm(e,t){return function(e,t,s,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,s)=>{if(!(e instanceof t))throw new Error("invalid point at index "+s)}))}(s,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,s)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+s)}))}(n,t),s.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const a=e.ZERO,i=cH(BigInt(s.length)),r=i>12?i-3:i>4?i-2:i?2:1,o=(1<<r)-1,l=new Array(o+1).fill(a);let c=a;for(let h=Math.floor((t.BITS-1)/r)*r;h>=0;h-=r){l.fill(a);for(let t=0;t<n.length;t++){const e=n[t],a=Number(e>>BigInt(h)&BigInt(o));l[a]=l[a].add(s[t])}let e=a;for(let t=l.length-1,s=a;t>0;t--)s=s.add(l[t]),e=e.add(s);if(c=c.add(e),0!==h)for(let t=0;t<r;t++)c=c.double()}return c}(u,n,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:n,pz:a}=this,{px:i,py:r,pz:o}=e,c=s.eql(s.mul(t,o),s.mul(i,a)),h=s.eql(s.mul(n,o),s.mul(r,a));return c&&h}negate(){return new u(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,a=s.mul(n,ZH),{px:i,py:r,pz:o}=this;let l=s.ZERO,c=s.ZERO,h=s.ZERO,d=s.mul(i,i),p=s.mul(r,r),f=s.mul(o,o),m=s.mul(i,r);return m=s.add(m,m),h=s.mul(i,o),h=s.add(h,h),l=s.mul(e,h),c=s.mul(a,f),c=s.add(l,c),l=s.sub(p,c),c=s.add(p,c),c=s.mul(l,c),l=s.mul(m,l),h=s.mul(a,h),f=s.mul(e,f),m=s.sub(d,f),m=s.mul(e,m),m=s.add(m,h),h=s.add(d,d),d=s.add(h,d),d=s.add(d,f),d=s.mul(d,m),c=s.add(c,d),f=s.mul(r,o),f=s.add(f,f),d=s.mul(f,m),l=s.sub(l,d),h=s.mul(f,p),h=s.add(h,h),h=s.add(h,h),new u(l,c,h)}add(e){l(e);const{px:n,py:a,pz:i}=this,{px:r,py:o,pz:c}=e;let h=s.ZERO,d=s.ZERO,p=s.ZERO;const f=t.a,m=s.mul(t.b,ZH);let g=s.mul(n,r),y=s.mul(a,o),b=s.mul(i,c),v=s.add(n,a),w=s.add(r,o);v=s.mul(v,w),w=s.add(g,y),v=s.sub(v,w),w=s.add(n,i);let x=s.add(r,c);return w=s.mul(w,x),x=s.add(g,b),w=s.sub(w,x),x=s.add(a,i),h=s.add(o,c),x=s.mul(x,h),h=s.add(y,b),x=s.sub(x,h),p=s.mul(f,w),h=s.mul(m,b),p=s.add(h,p),h=s.sub(y,p),p=s.add(y,p),d=s.mul(h,p),y=s.add(g,g),y=s.add(y,g),b=s.mul(f,b),w=s.mul(m,w),y=s.add(y,b),b=s.sub(g,b),b=s.mul(f,b),w=s.add(w,b),g=s.mul(y,w),d=s.add(d,g),g=s.mul(x,w),h=s.mul(v,h),h=s.sub(h,g),g=s.mul(v,y),p=s.mul(x,p),p=s.add(p,g),new u(h,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(u.ZERO)}wNAF(e){return p.wNAFCached(this,e,u.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:a}=t;lH("scalar",e,KH,a);const i=u.ZERO;if(e===KH)return i;if(this.is0()||e===QH)return this;if(!n||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,u.normalizeZ);let{k1neg:r,k1:o,k2neg:l,k2:c}=n.splitScalar(e),h=i,d=i,f=this;for(;o>KH||c>KH;)o&QH&&(h=h.add(f)),c&QH&&(d=d.add(f)),f=f.double(),o>>=QH,c>>=QH;return r&&(h=h.negate()),l&&(d=d.negate()),d=new u(s.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:a}=t;let i,r;if(lH("scalar",e,QH,a),n){const{k1neg:t,k1:a,k2neg:o,k2:l}=n.splitScalar(e);let{p:c,f:h}=this.wNAF(a),{p:d,f:f}=this.wNAF(l);c=p.constTimeNegate(t,c),d=p.constTimeNegate(o,d),d=new u(s.mul(d.px,n.beta),d.py,d.pz),i=c.add(d),r=h.add(f)}else{const{p:t,f:s}=this.wNAF(e);i=t,r=s}return u.normalizeZ([i,r])[0]}multiplyAndAddUnsafe(e,t,s){const n=u.BASE,a=(e,t)=>t!==KH&&t!==QH&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,s));return i.is0()?void 0:i}toAffine(e){return c(this,e)}isTorsionFree(){const{h:e,isTorsionFree:s}=t;if(e===QH)return!0;if(s)return s(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:s}=t;return e===QH?this:s?s(u,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return qG("isCompressed",e),this.assertValidity(),a(u,this,e)}toHex(e=!0){return qG("isCompressed",e),QG(this.toRawBytes(e))}}u.BASE=new u(t.Gx,t.Gy,s.ONE),u.ZERO=new u(s.ZERO,s.ONE,s.ZERO);const d=t.nBitLength,p=(f=u,m=t.endo?Math.ceil(d/2):d,{constTimeNegate:LH,hasPrecomputes:e=>1!==GH(e),unsafeLadder(e,t,s=f.ZERO){let n=e;for(;t>DH;)t&NH&&(s=s.add(n)),n=n.double(),t>>=NH;return s},precomputeWindow(e,t){const{windows:s,windowSize:n}=OH(t,m),a=[];let i=e,r=i;for(let o=0;o<s;o++){r=i,a.push(r);for(let e=1;e<n;e++)r=r.add(i),a.push(r);i=r.double()}return a},wNAF(e,t,s){const{windows:n,windowSize:a}=OH(e,m);let i=f.ZERO,r=f.BASE;const o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let h=0;h<n;h++){const e=h*a;let n=Number(s&o);s>>=c,n>a&&(n-=l,s+=NH);const u=e,d=e+Math.abs(n)-1,p=h%2!=0,f=n<0;0===n?r=r.add(LH(p,t[u])):i=i.add(LH(f,t[d]))}return{p:i,f:r}},wNAFUnsafe(e,t,s,n=f.ZERO){const{windows:a,windowSize:i}=OH(e,m),r=BigInt(2**e-1),o=2**e,l=BigInt(e);for(let c=0;c<a;c++){const e=c*i;if(s===DH)break;let a=Number(s&r);if(s>>=l,a>i&&(a-=o,s+=NH),0===a)continue;let h=t[e+Math.abs(a)-1];a<0&&(h=h.negate()),n=n.add(h)}return n},getPrecomputes(e,t,s){let n=jH.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&jH.set(t,s(n))),n},wNAFCached(e,t,s){const n=GH(e);return this.wNAF(n,this.getPrecomputes(n,e,s),t)},wNAFCachedUnsafe(e,t,s,n){const a=GH(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,s),t,n)},setWindowSize(e,t){FH(t,m),UH.set(e,t),jH.delete(e)}});var f,m;return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:o,weierstrassEquation:r,isWithinCurveOrder:function(e){return oH(e,QH,t.n)}}}function YH(e){const t=function(e){const t=HH(e);return mH(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:s,n:n}=t,a=s.BYTES+1,i=2*s.BYTES+1;function r(e){return SH(e,n)}function o(e){return BH(e,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:u}=XH({...t,toBytes(e,t,n){const a=t.toAffine(),i=s.toBytes(a.x),r=iH;return qG("isCompressed",n),n?r(Uint8Array.from([t.hasEvenY()?2:3]),i):r(Uint8Array.from([4]),i,s.toBytes(a.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==a||2!==n&&3!==n){if(t===i&&4===n)return{x:s.fromBytes(r.subarray(0,s.BYTES)),y:s.fromBytes(r.subarray(s.BYTES,2*s.BYTES))};throw new Error("invalid Point, expected length of "+a+", or uncompressed "+i+", got "+t)}{const e=eH(r);if(!oH(e,QH,s.ORDER))throw new Error("Point is not on curve");const t=h(e);let a;try{a=s.sqrt(t)}catch(o){const e=o instanceof Error?": "+o.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!=((a&QH)===QH)&&(a=s.neg(a)),{x:e,y:a}}}}),d=e=>QG(sH(e,t.nByteLength));function p(e){return e>n>>QH}const f=(e,t,s)=>eH(e.slice(t,s));class m{constructor(e,t,s){this.r=e,this.s=t,this.recovery=s,this.assertValidity()}static fromCompact(e){const s=t.nByteLength;return e=aH("compactSignature",e,2*s),new m(f(e,0,s),f(e,s,2*s))}static fromDER(e){const{r:t,s:s}=qH.toSig(aH("DER",e));return new m(t,s)}assertValidity(){lH("r",this.r,QH,n),lH("s",this.s,QH,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:a,recovery:i}=this,c=v(aH("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const h=2===i||3===i?n+t.n:n;if(h>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&i?"03":"02",p=l.fromHex(u+d(h)),f=o(h),m=r(-c*f),g=r(a*f),y=l.BASE.multiplyAndAddUnsafe(p,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,r(-this.s),this.recovery):this}toDERRawBytes(){return JG(this.toDERHex())}toDERHex(){return qH.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return JG(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=_H(t.n);return function(e,t,s=!1){const n=e.length,a=IH(t),i=_H(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const r=SH(s?tH(e):eH(e),t-vH)+vH;return s?nH(r,a):sH(r,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=WG(e),s="string"==typeof e,n=(t||s)&&e.length;return t?n===a||n===i:s?n===2*a||n===2*i:e instanceof l}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const s=eH(e),n=8*e.length-t.nBitLength;return n>0?s>>BigInt(n):s},v=t.bits2int_modN||function(e){return r(b(e))},w=hH(t.nBitLength);function x(e){return lH("num < 2^"+t.nBitLength,e,KH,w),sH(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,s=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(s)},sign:function(e,n,a=k){const{seed:i,k2sig:h}=function(e,n,a=k){if(["recovered","canonical"].some((e=>e in a)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:h}=t;let{lowS:d,prehash:f,extraEntropy:g}=a;null==d&&(d=!0),e=aH("msgHash",e),zH(a),f&&(e=aH("prehashed msgHash",i(e)));const y=v(e),w=c(n),A=[x(w),x(y)];if(null!=g&&!1!==g){const e=!0===g?h(s.BYTES):g;A.push(aH("extraEntropy",e))}const E=iH(...A),S=y;return{seed:E,k2sig:function(e){const t=b(e);if(!u(t))return;const s=o(t),n=l.BASE.multiply(t).toAffine(),a=r(n.x);if(a===KH)return;const i=r(s*r(S+a*w));if(i===KH)return;let c=(n.x===a?0:2)|Number(n.y&QH),h=i;return d&&p(i)&&(h=function(e){return p(e)?r(-e):e}(i),c^=1),new m(a,h,c)}}}(e,n,a),d=t;return pH(d.hash.outputLen,d.nByteLength,d.hmac)(i,h)},verify:function(e,s,n,a=A){var i;const c=e;s=aH("msgHash",s),n=aH("publicKey",n);const{lowS:h,prehash:u,format:d}=a;if(zH(a),"strict"in a)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const p="string"==typeof c||WG(c),f=!p&&!d&&"object"==typeof c&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!p&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let g,y;try{if(f&&(g=new m(c.r,c.s)),p){try{"compact"!==d&&(g=m.fromDER(c))}catch(T){if(!(T instanceof qH.Err))throw T}g||"der"===d||(g=m.fromCompact(c))}y=l.fromHex(n)}catch(B){return!1}if(!g)return!1;if(h&&g.hasHighS())return!1;u&&(s=t.hash(s));const{r:b,s:w}=g,x=v(s),k=o(w),E=r(x*k),S=r(b*k),P=null==(i=l.BASE.multiplyAndAddUnsafe(y,E,S))?void 0:i.toAffine();return!!P&&r(P.x)===b},ProjectivePoint:l,Signature:m,utils:g}}function JH(e){return{hash:e,hmac:(t,...s)=>GG(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];x_(s),t+=s.length}const s=new Uint8Array(t);for(let n=0,a=0;n<e.length;n++){const t=e[n];s.set(t,a),a+=t.length}return s}(...s)),randomBytes:L_}}BigInt(4);const ez=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tz=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sz=BigInt(1),nz=BigInt(2),az=(e,t)=>(e+t/nz)/t,iz=RH(ez,void 0,void 0,{sqrt:function(e){const t=ez,s=BigInt(3),n=BigInt(6),a=BigInt(11),i=BigInt(22),r=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,h=c*c*e%t,u=TH(h,s,t)*h%t,d=TH(u,s,t)*h%t,p=TH(d,nz,t)*c%t,f=TH(p,a,t)*p%t,m=TH(f,i,t)*f%t,g=TH(m,o,t)*m%t,y=TH(g,l,t)*g%t,b=TH(y,o,t)*m%t,v=TH(b,s,t)*h%t,w=TH(v,r,t)*f%t,x=TH(w,n,t)*c%t,k=TH(x,nz,t);if(!iz.eql(iz.sqr(k),e))throw new Error("Cannot find square root");return k}}),rz=function(e){const t=t=>YH({...e,...JH(t)});return{...t(YL),create:t}}({a:BigInt(0),b:BigInt(7),Fp:iz,n:tz,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=tz,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-sz*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=s,r=BigInt("0x100000000000000000000000000000000"),o=az(i*e,t),l=az(-n*e,t);let c=SH(e-o*s-l*a,t),h=SH(-o*n-l*i,t);const u=c>r,d=h>r;if(u&&(c=t-c),d&&(h=t-h),c>r||h>r)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:d,k2:h}}}});BigInt(0),rz.ProjectivePoint;const oz=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:rz},Symbol.toStringTag,{value:"Module"}));async function lz(e,t){var s,n,a;const{address:i,factory:r,factoryData:o,hash:l,signature:c,universalSignatureVerifierAddress:h=(null==(a=null==(n=null==(s=e.chain)?void 0:s.contracts)?void 0:n.universalSignatureVerifier)?void 0:a.address),...u}=t,d=yI(c)?c:"object"==typeof c&&"r"in c&&"s"in c?function({r:e,s:t,to:s="hex",v:n,yParity:a}){const i=(()=>{if(0===a||1===a)return a;if(n&&(27n===n||28n===n||n>=35n))return n%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),r=`0x${new rz.Signature(i_(e),i_(t)).toCompactHex()}${0===i?"1b":"1c"}`;return"hex"===s?r:b_(r)}(c):h_(c),p=await(async()=>r||o?function(e){return mD(e,-32)===fj}(d)?d:function(e){const{address:t,data:s,signature:n,to:a="hex"}=e,i=hD([bD([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,s,n]),fj]);return"hex"===a?i:b_(i)}({address:r,data:o,signature:d}):d)();try{const t=h?{to:h,data:_D({abi:TF,functionName:"isValidSig",args:[i,l,p]}),...u}:{data:DF({abi:TF,args:[i,l,p],bytecode:"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"}),...u},{data:s}=await fI(e,UF,"call")(t);return function(e,t={}){let s=e;if(t.size&&(a_(s,{size:t.size}),s=n_(s)),"0x00"===n_(s))return!1;if("0x01"===n_(s))return!0;throw new t_(s)}(s??"0x0")}catch(f){try{if(hF(iD(i),await nL({hash:l,signature:c})))return!0}catch{}if(f instanceof mN)return!1;throw f}}function cz(e,{emitOnBegin:t=!1,emitMissed:s=!1,onBlockNumber:n,onError:a,poll:i,pollingInterval:r=e.pollingInterval}){let o;return(void 0!==i?!i:"webSocket"===e.transport.type||"fallback"===e.transport.type&&"webSocket"===e.transport.transports[0].config.type)?$F(XD(["watchBlockNumber",e.uid,t,s]),{onBlockNumber:n,onError:a},(t=>{let s=!0,n=()=>s=!1;return(async()=>{try{const a=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:i}=await a.subscribe({params:["newHeads"],onData(e){var n;if(!s)return;const a=i_(null==(n=e.result)?void 0:n.number);t.onBlockNumber(a,o),o=a},onError(e){var s;null==(s=t.onError)||s.call(t,e)}});n=i,s||n()}catch(i){null==a||a(i)}})(),()=>n()})):$F(XD(["watchBlockNumber",e.uid,t,s,r]),{onBlockNumber:n,onError:a},(n=>KF((async()=>{var t;try{const t=await fI(e,XF,"getBlockNumber")({cacheTime:0});if(o){if(t===o)return;if(t-o>1&&s)for(let e=o+1n;e<t;e++)n.onBlockNumber(e,o),o=e}(!o||t>o)&&(n.onBlockNumber(t,o),o=t)}catch(a){null==(t=n.onError)||t.call(n,a)}}),{emitOnBegin:t,interval:r})))}const hz=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,uz=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function dz(e){return{call:t=>UF(e,t),createAccessList:t=>$O(e,t),createBlockFilter:()=>async function(e){const t=CD(e,{method:"eth_newBlockFilter"}),s=await e.request({method:"eth_newBlockFilter"});return{id:s,request:t(s),type:"block"}}(e),createContractEventFilter:t=>MD(e,t),createEventFilter:t=>qO(e,t),createPendingTransactionFilter:()=>KO(e),estimateContractGas:t=>cF(e,t),estimateGas:t=>lF(e,t),getBalance:t=>oF(e,t),getBlobBaseFee:()=>async function(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}(e),getBlock:t=>OL(e,t),getBlockNumber:t=>XF(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:s,blockTag:n="latest"}={}){const a=void 0!==s?u_(s):void 0;let i;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[a||n]},{dedupe:Boolean(a)}),r_(i)}(e,t),getBytecode:t=>QO(e,t),getChainId:()=>nF(e),getCode:t=>QO(e,t),getContractEvents:t=>yF(e,t),getEip712Domain:t=>async function(e,t){const{address:s,factory:n,factoryData:a}=t;try{const[t,i,r,o,l,c,h]=await fI(e,GF,"readContract")({abi:XO,address:s,functionName:"eip712Domain",factory:n,factoryData:a});return{domain:{name:i,version:r,chainId:Number(o),verifyingContract:l,salt:c},extensions:h,fields:t}}catch(IV){const t=IV;if("ContractFunctionExecutionError"===t.name&&"ContractFunctionZeroDataError"===t.cause.name)throw new ZO({address:s});throw t}}(e,t),getEnsAddress:t=>async function(e,t){const{blockNumber:s,blockTag:n,coinType:a,name:i,gatewayUrls:r,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return NF({blockNumber:s,chain:l,contract:"ensUniversalResolver"})})(),h=null==l?void 0:l.ensTlds;if(h&&!h.some((e=>i.endsWith(e))))return null;try{const t=_D({abi:PF,functionName:"addr",...null!=a?{args:[MO(i),BigInt(a)]}:{args:[MO(i)]}}),o={address:c,abi:AF,functionName:"resolve",args:[l_(IO(i)),t,r??[TO]],blockNumber:s,blockTag:n},l=fI(e,GF,"readContract"),h=await l(o);if("0x"===h[0])return null;const u=vF({abi:PF,args:null!=a?[MO(i),BigInt(a)]:void 0,functionName:"addr",data:h[0]});return"0x"===u||"0x00"===n_(u)?null:u}catch(u){if(o)throw u;if(AO(u,"resolve"))return null;throw u}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:s,assetGatewayUrls:n,name:a,gatewayUrls:i,strict:r,universalResolverAddress:o}){const l=await fI(e,WO,"getEnsText")({blockNumber:t,blockTag:s,key:"avatar",name:a,universalResolverAddress:o,gatewayUrls:i,strict:r});if(!l)return null;try{return await async function(e,{gatewayUrls:t,record:s}){return/eip155:/i.test(s)?async function(e,{gatewayUrls:t,record:s}){const n=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[s,n,a]=t.split("/"),[i,r]=s.split(":"),[o,l]=n.split(":");if(!i||"eip155"!==i.toLowerCase())throw new DO({reason:"Only EIP-155 supported"});if(!r)throw new DO({reason:"Chain ID not found"});if(!l)throw new DO({reason:"Contract address not found"});if(!a)throw new DO({reason:"Token ID not found"});if(!o)throw new DO({reason:"ERC namespace not found"});return{chainID:Number.parseInt(r),namespace:o.toLowerCase(),contractAddress:l,tokenID:a}}(s),a=await async function(e,{nft:t}){if("erc721"===t.namespace)return GF(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return GF(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new LO({namespace:t.namespace})}(e,{nft:n}),{uri:i,isOnChain:r,isEncoded:o}=HO({uri:a,gatewayUrls:t});if(r&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const e=o?atob(i.replace("data:application/json;base64,","")):i;return VO({uri:zO(JSON.parse(e)),gatewayUrls:t})}let l=n.tokenID;return"erc1155"===n.namespace&&(l=l.replace("0x","").padStart(64,"0")),async function({gatewayUrls:e,uri:t}){try{const s=await fetch(t).then((e=>e.json()));return await VO({gatewayUrls:e,uri:zO(s)})}catch{throw new NO({uri:t})}}({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,l)})}(e,{gatewayUrls:t,record:s}):VO({uri:s,gatewayUrls:t})}(e,{record:l,gatewayUrls:n})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:s,blockTag:n,gatewayUrls:a,strict:i,universalResolverAddress:r}){let o=r;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=NF({blockNumber:s,chain:e.chain,contract:"ensUniversalResolver"})}const l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const i={address:o,abi:EF,functionName:"reverse",args:[l_(IO(l))],blockNumber:s,blockTag:n},r=fI(e,GF,"readContract"),[c,h]=a?await r({...i,args:[...i.args,a]}):await r(i);return t.toLowerCase()!==h.toLowerCase()?null:c}catch(c){if(i)throw c;if(AO(c,"reverse"))return null;throw c}}(e,t),getEnsResolver:t=>async function(e,t){const{blockNumber:s,blockTag:n,name:a}=t,{chain:i}=e,r=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return NF({blockNumber:s,chain:i,contract:"ensUniversalResolver"})})(),o=null==i?void 0:i.ensTlds;if(o&&!o.some((e=>a.endsWith(e))))throw new Error(`${a} is not a valid ENS TLD (${null==o?void 0:o.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[l]=await fI(e,GF,"readContract")({address:r,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[l_(IO(a))],blockNumber:s,blockTag:n});return l}(e,t),getEnsText:t=>WO(e,t),getFeeHistory:t=>async function(e,{blockCount:t,blockNumber:s,blockTag:n="latest",rewardPercentiles:a}){const i=s?u_(s):void 0;return{baseFeePerGas:(r=await e.request({method:"eth_feeHistory",params:[u_(t),i||n,a]},{dedupe:Boolean(i)})).baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:null==(o=r.reward)?void 0:o.map((e=>e.map((e=>BigInt(e)))))};var r,o}(e,t),estimateFeesPerGas:t=>async function(e,t){return GL(e,t)}(e,t),getFilterChanges:e=>YF(0,e),getFilterLogs:e=>async function(e,{filter:t}){const s=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>mF(e)));return t.abi?fF({abi:t.abi,logs:n,strict:s}):n}(0,e),getGasPrice:()=>jL(e),getLogs:t=>gF(e,t),getProof:t=>async function(e,{address:t,blockNumber:s,blockTag:n,storageKeys:a}){const i=n??"latest",r=void 0!==s?u_(s):void 0;return o=await e.request({method:"eth_getProof",params:[t,a,r||i]}),{...o,balance:o.balance?BigInt(o.balance):void 0,nonce:o.nonce?r_(o.nonce):void 0,storageProof:o.storageProof?(l=o.storageProof,l.map((e=>({...e,value:BigInt(e.value)})))):void 0};var o,l}(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return UL(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:s,blockTag:n="latest",slot:a}){const i=void 0!==s?u_(s):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,i||n]})}(e,t),getTransaction:t=>mj(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:s}){const[n,a]=await Promise.all([fI(e,XF,"getBlockNumber")({}),t?fI(e,mj,"getTransaction")({hash:t}):void 0]),i=(null==s?void 0:s.blockNumber)||(null==a?void 0:a.blockNumber);return i?n-i+1n:0n}(e,t),getTransactionCount:t=>HL(e,t),getTransactionReceipt:t=>gj(e,t),multicall:t=>async function(e,t){var s;const{allowFailure:n=!0,batchSize:a,blockNumber:i,blockTag:r,multicallAddress:o,stateOverride:l}=t,c=t.contracts,h=a??("object"==typeof(null==(s=e.batch)?void 0:s.multicall)&&e.batch.multicall.batchSize||1024);let u=o;if(!u){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");u=NF({blockNumber:i,chain:e.chain,contract:"multicall3"})}const d=[[]];let p=0,f=0;for(let b=0;b<c.length;b++){const{abi:e,address:t,args:s,functionName:a}=c[b];try{const n=_D({abi:e,args:s,functionName:a});f+=(n.length-2)/2,h>0&&f>h&&d[p].length>0&&(p++,f=(n.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:n,target:t}]}catch(y){const i=JN(y,{abi:e,address:t,args:s,docsPath:"/docs/contract/multicall",functionName:a});if(!n)throw i;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:t}]}}const m=await Promise.allSettled(d.map((t=>fI(e,GF,"readContract")({abi:wF,address:u,args:[t],blockNumber:i,blockTag:r,functionName:"aggregate3",stateOverride:l})))),g=[];for(let b=0;b<m.length;b++){const e=m[b];if("rejected"===e.status){if(!n)throw e.reason;for(let t=0;t<d[b].length;t++)g.push({status:"failure",error:e.reason,result:void 0});continue}const t=e.value;for(let s=0;s<t.length;s++){const{returnData:e,success:a}=t[s],{callData:i}=d[b][s],{abi:r,address:o,functionName:l,args:h}=c[g.length];try{if("0x"===i)throw new PI;if(!a)throw new wN({data:e});const t=vF({abi:r,args:h,data:e,functionName:l});g.push(n?{result:t,status:"success"}:t)}catch(y){const e=JN(y,{abi:r,address:o,args:h,docsPath:"/docs/contract/multicall",functionName:l});if(!n)throw e;g.push({error:e,result:void 0,status:"failure"})}}}if(g.length!==c.length)throw new xI("multicall results mismatch");return g}(e,t),prepareTransactionRequest:t=>rF(e,t),readContract:t=>GF(e,t),sendRawTransaction:t=>aO(e,t),simulate:t=>Wj(e,t),simulateBlocks:t=>Wj(e,t),simulateCalls:t=>async function(e,t){const{blockNumber:s,blockTag:n,calls:a,stateOverrides:i,traceAssetChanges:r,traceTransfers:o,validation:l}=t,c=t.account?RD(t.account):void 0;if(r&&!c)throw new xI("`account` is required when `traceAssetChanges` is true");const h=c?function(e,t){var s;const{bytecode:n,args:a}=t;return Bj(n,(null==(s=e.inputs)?void 0:s.length)&&(null==a?void 0:a.length)?MG(e.inputs,a):"0x")}(wG("constructor(bytes, bytes)"),{bytecode:BF,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",FG(OG("function getBalance(address)"),[c.address])]}):void 0,u=r?await Promise.all(t.calls.map((async t=>{if(!t.data&&!t.abi)return;const{accessList:s}=await $O(e,{account:c.address,...t,data:t.abi?_D(t):t.data});return s.map((({address:e,storageKeys:t})=>t.length>0?e:null))}))).then((e=>e.flat().filter(Boolean))):[],d=null==i?void 0:i.map((e=>e.address===(null==c?void 0:c.address)?{...e,nonce:0}:e)),p=await Wj(e,{blockNumber:s,blockTag:n,blocks:[...r?[{calls:[{data:h}],stateOverrides:i},{calls:u.map(((e,t)=>({abi:[OG("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:jG,nonce:t}))),stateOverrides:[{address:jG,nonce:0}]}]:[],{calls:[...a,{}].map(((e,t)=>({...e,from:null==c?void 0:c.address,nonce:t}))),stateOverrides:d},...r?[{calls:[{data:h}]},{calls:u.map(((e,t)=>({abi:[OG("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:jG,nonce:t}))),stateOverrides:[{address:jG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[OG("function decimals() returns (uint256)")],functionName:"decimals",from:jG,nonce:t}))),stateOverrides:[{address:jG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[OG("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:jG,nonce:t}))),stateOverrides:[{address:jG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[OG("function symbol() returns (string)")],functionName:"symbol",from:jG,nonce:t}))),stateOverrides:[{address:jG,nonce:0}]}]:[]],traceTransfers:o,validation:l}),f=r?p[2]:p[0],[m,g,,y,b,v,w,x]=r?p:[],{calls:k,...A}=f,E=k.slice(0,-1)??[],S=[...(null==m?void 0:m.calls)??[],...(null==g?void 0:g.calls)??[]].map((e=>"success"===e.status?i_(e.data):null)),P=[...(null==y?void 0:y.calls)??[],...(null==b?void 0:b.calls)??[]].map((e=>"success"===e.status?i_(e.data):null)),T=((null==v?void 0:v.calls)??[]).map((e=>"success"===e.status?e.result:null)),B=((null==x?void 0:x.calls)??[]).map((e=>"success"===e.status?e.result:null)),C=((null==w?void 0:w.calls)??[]).map((e=>"success"===e.status?e.result:null)),M=[];for(const[R,I]of P.entries()){const e=S[R];if("bigint"!=typeof I)continue;if("bigint"!=typeof e)continue;const t=T[R-1],s=B[R-1],n=C[R-1],a=0===R?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:u[R-1],decimals:n||t?Number(t??1):void 0,symbol:s??void 0};M.some((e=>e.token.address===a.address))||M.push({token:a,value:{pre:e,post:I,diff:I-e}})}return{assetChanges:M,block:A,results:E}}(e,t),simulateContract:t=>HF(e,t),verifyMessage:t=>async function(e,{address:t,message:s,factory:n,factoryData:a,signature:i,...r}){return lz(e,{address:t,factory:n,factoryData:a,hash:pj(s),signature:i,...r})}(e,t),verifySiweMessage:t=>async function(e,t){const{address:s,domain:n,message:a,nonce:i,scheme:r,signature:o,time:l=new Date,...c}=t,h=function(e){var t,s,n;const{scheme:a,statement:i,...r}=(null==(t=e.match(hz))?void 0:t.groups)??{},{chainId:o,expirationTime:l,issuedAt:c,notBefore:h,requestId:u,...d}=(null==(s=e.match(uz))?void 0:s.groups)??{},p=null==(n=e.split("Resources:")[1])?void 0:n.split("\n- ").slice(1);return{...r,...d,...o?{chainId:Number(o)}:{},...l?{expirationTime:new Date(l)}:{},...c?{issuedAt:new Date(c)}:{},...h?{notBefore:new Date(h)}:{},...u?{requestId:u}:{},...p?{resources:p}:{},...a?{scheme:a}:{},...i?{statement:i}:{}}}(a);if(!h.address)return!1;if(!function(e){const{address:t,domain:s,message:n,nonce:a,scheme:i,time:r=new Date}=e;if(s&&n.domain!==s)return!1;if(a&&n.nonce!==a)return!1;if(i&&n.scheme!==i)return!1;if(n.expirationTime&&r>=n.expirationTime)return!1;if(n.notBefore&&r<n.notBefore)return!1;try{if(!n.address)return!1;if(t&&!hF(n.address,t))return!1}catch{return!1}return!0}({address:s,domain:n,message:h,nonce:i,scheme:r,time:l}))return!1;const u=pj(a);return lz(e,{address:h.address,hash:u,signature:o,...c})}(e,t),verifyTypedData:t=>async function(e,t){const{address:s,factory:n,factoryData:a,signature:i,message:r,primaryType:o,types:l,domain:c,...h}=t;return lz(e,{address:s,factory:n,factoryData:a,hash:sj({message:r,primaryType:o,types:l,domain:c}),signature:i,...h})}(e,t),uninstallFilter:e=>JF(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:s,onReplaced:n,pollingInterval:a=e.pollingInterval,retryCount:i=6,retryDelay:r=({count:e})=>200*(1<<e),timeout:o=18e4}){const l=XD(["waitForTransactionReceipt",e.uid,s]);let c,h,u,d=!1;const{promise:p,resolve:f,reject:m}=FF(),g=o?setTimeout((()=>m(new pN({hash:s}))),o):void 0,y=$F(l,{onReplaced:n,resolve:f,reject:m},(n=>{const o=fI(e,cz,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:a,async onBlockNumber(a){const l=e=>{clearTimeout(g),o(),e(),y()};let p=a;if(!d)try{if(u){if(t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;return void l((()=>n.resolve(u)))}if(c||(d=!0,await mO((async()=>{c=await fI(e,mj,"getTransaction")({hash:s}),c.blockNumber&&(p=c.blockNumber)}),{delay:r,retryCount:i}),d=!1),u=await fI(e,gj,"getTransactionReceipt")({hash:s}),t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;l((()=>n.resolve(u)))}catch(f){if(f instanceof uN||f instanceof dN){if(!c)return void(d=!1);try{h=c,d=!0;const s=await mO((()=>fI(e,OL,"getBlock")({blockNumber:p,includeTransactions:!0})),{delay:r,retryCount:i,shouldRetry:({error:e})=>e instanceof DL});d=!1;const a=s.transactions.find((({from:e,nonce:t})=>e===h.from&&t===h.nonce));if(!a)return;if(u=await fI(e,gj,"getTransactionReceipt")({hash:a.hash}),t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;let o="replaced";a.to===h.to&&a.value===h.value&&a.input===h.input?o="repriced":a.from===a.to&&0n===a.value&&(o="cancelled"),l((()=>{var e;null==(e=n.onReplaced)||e.call(n,{reason:o,replacedTransaction:h,transaction:a,transactionReceipt:u}),n.resolve(u)}))}catch(m){l((()=>n.reject(m)))}}else l((()=>n.reject(f)))}}})}));return p}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:s=!1,emitOnBegin:n=!1,onBlock:a,onError:i,includeTransactions:r,poll:o,pollingInterval:l=e.pollingInterval}){const c=void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),h=r??!1;let u;return c?$F(XD(["watchBlocks",e.uid,t,s,n,h,l]),{onBlock:a,onError:i},(a=>KF((async()=>{var n;try{const n=await fI(e,OL,"getBlock")({blockTag:t,includeTransactions:h});if(n.number&&(null==u?void 0:u.number)){if(n.number===u.number)return;if(n.number-u.number>1&&s)for(let t=(null==u?void 0:u.number)+1n;t<n.number;t++){const s=await fI(e,OL,"getBlock")({blockNumber:t,includeTransactions:h});a.onBlock(s,u),u=s}}(!(null==u?void 0:u.number)||"pending"===t&&!(null==n?void 0:n.number)||n.number&&n.number>u.number)&&(a.onBlock(n,u),u=n)}catch(i){null==(n=a.onError)||n.call(a,i)}}),{emitOnBegin:n,interval:l}))):(()=>{let s=!0,r=!0,o=()=>s=!1;return(async()=>{try{n&&fI(e,OL,"getBlock")({blockTag:t,includeTransactions:h}).then((e=>{s&&r&&(a(e,void 0),r=!1)}));const l=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:c}=await l.subscribe({params:["newHeads"],async onData(t){if(!s)return;const n=await fI(e,OL,"getBlock")({blockNumber:t.blockNumber,includeTransactions:h}).catch((()=>{}));s&&(a(n,u),r=!1,u=n)},onError(e){null==i||i(e)}});o=c,s||o()}catch(l){null==i||i(l)}})(),()=>o()})()}(e,t),watchBlockNumber:t=>cz(e,t),watchContractEvent:t=>eO(e,t),watchEvent:t=>function(e,{address:t,args:s,batch:n=!0,event:a,events:i,fromBlock:r,onError:o,onLogs:l,poll:c,pollingInterval:h=e.pollingInterval,strict:u}){const d=void 0!==c?c:"bigint"==typeof r||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),p=u??!1;return d?$F(XD(["watchEvent",t,s,n,e.uid,a,h,r]),{onLogs:l,onError:o},(o=>{let l,c;void 0!==r&&(l=r-1n);let u=!1;const d=KF((async()=>{var h;if(u)try{let r;if(c)r=await fI(e,YF,"getFilterChanges")({filter:c});else{const n=await fI(e,XF,"getBlockNumber")({});r=l&&l!==n?await fI(e,gF,"getLogs")({address:t,args:s,event:a,events:i,fromBlock:l+1n,toBlock:n}):[],l=n}if(0===r.length)return;if(n)o.onLogs(r);else for(const e of r)o.onLogs([e])}catch(d){c&&d instanceof RN&&(u=!1),null==(h=o.onError)||h.call(o,d)}else{try{c=await fI(e,qO,"createEventFilter")({address:t,args:s,event:a,events:i,strict:p,fromBlock:r})}catch{}u=!0}}),{emitOnBegin:!0,interval:h});return async()=>{c&&await fI(e,JF,"uninstallFilter")({filter:c}),d()}})):(()=>{let n=!0,r=()=>n=!1;return(async()=>{try{const c=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),h=i??(a?[a]:void 0);let d=[];h&&(d=[h.flatMap((e=>TD({abi:[e],eventName:e.name,args:s})))],a&&(d=d[0]));const{unsubscribe:f}=await c.subscribe({params:["logs",{address:t,topics:d}],onData(e){var t;if(!n)return;const s=e.result;try{const{eventName:e,args:t}=dF({abi:h??[],data:s.data,topics:s.topics,strict:p}),n=mF(s,{args:t,eventName:e});l([n])}catch(a){let e,n;if(a instanceof GI||a instanceof HI){if(u)return;e=a.abiItem.name,n=null==(t=a.abiItem.inputs)?void 0:t.some((e=>!("name"in e&&e.name)))}const i=mF(s,{args:n?[]:{},eventName:e});l([i])}},onError(e){null==o||o(e)}});r=f,n||r()}catch(c){null==o||o(c)}})(),()=>r()})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:s,onTransactions:n,poll:a,pollingInterval:i=e.pollingInterval}){return(void 0!==a?a:"webSocket"!==e.transport.type)?$F(XD(["watchPendingTransactions",e.uid,t,i]),{onTransactions:n,onError:s},(s=>{let n;const a=KF((async()=>{var i;try{if(!n)try{return void(n=await fI(e,KO,"createPendingTransactionFilter")({}))}catch(r){throw a(),r}const i=await fI(e,YF,"getFilterChanges")({filter:n});if(0===i.length)return;if(t)s.onTransactions(i);else for(const e of i)s.onTransactions([e])}catch(r){null==(i=s.onError)||i.call(s,r)}}),{emitOnBegin:!0,interval:i});return async()=>{n&&await fI(e,JF,"uninstallFilter")({filter:n}),a()}})):(()=>{let t=!0,a=()=>t=!1;return(async()=>{try{const{unsubscribe:i}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const s=e.result;n([s])},onError(e){null==s||s(e)}});a=i,t||a()}catch(i){null==s||s(i)}})(),()=>a()})()}(e,t)}}async function pz(e,t){var s;const{account:n=e.account,chainId:a,nonce:i}=t;if(!n)throw new tO({docsPath:"/docs/eip7702/prepareAuthorization"});const r=RD(n),o=(()=>{if(t.executor)return"self"===t.executor?t.executor:RD(t.executor)})(),l={address:t.contractAddress??t.address,chainId:a,nonce:i};return void 0===l.chainId&&(l.chainId=(null==(s=e.chain)?void 0:s.id)??await fI(e,nF,"getChainId")({})),void 0===l.nonce&&(l.nonce=await fI(e,HL,"getTransactionCount")({address:r.address,blockTag:"pending"}),("self"===o||(null==o?void 0:o.address)&&hF(o.address,r.address))&&(l.nonce+=1)),l}function fz(e){return{addChain:t=>async function(e,{chain:t}){const{id:s,name:n,nativeCurrency:a,rpcUrls:i,blockExplorers:r}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:u_(s),chainName:n,nativeCurrency:a,rpcUrls:i.default.http,blockExplorerUrls:r?Object.values(r).map((({url:e})=>e)):void 0}]},{dedupe:!0,retryCount:0})}(e,t),deployContract:t=>function(e,t){const{abi:s,args:n,bytecode:a,...i}=t,r=DF({abi:s,args:n,bytecode:a});return rO(e,{...i,...i.authorizationList?{to:null}:{},data:r})}(e,t),getAddresses:()=>async function(e){var t;return"local"===(null==(t=e.account)?void 0:t.type)?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map((e=>aD(e)))}(e),getChainId:()=>nF(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}(e),prepareAuthorization:t=>pz(e,t),prepareTransactionRequest:t=>rF(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map((e=>iD(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}(e,t),sendRawTransaction:t=>aO(e,t),sendTransaction:t=>rO(e,t),signAuthorization:t=>async function(e,t){const{account:s=e.account}=t;if(!s)throw new tO({docsPath:"/docs/eip7702/signAuthorization"});const n=RD(s);if(!n.signAuthorization)throw new sO({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});const a=await pz(e,t);return n.signAuthorization(a)}(e,t),signMessage:t=>async function(e,{account:t=e.account,message:s}){if(!t)throw new tO({docsPath:"/docs/actions/wallet/signMessage"});const n=RD(t);if(n.signMessage)return n.signMessage({message:s});const a="string"==typeof s?p_(s):s.raw instanceof Uint8Array?l_(s.raw):s.raw;return e.request({method:"personal_sign",params:[a,n.address]},{retryCount:0})}(e,t),signTransaction:t=>async function(e,t){var s,n,a,i;const{account:r=e.account,chain:o=e.chain,...l}=t;if(!r)throw new tO({docsPath:"/docs/actions/wallet/signTransaction"});const c=RD(r);ML({account:c,...t});const h=await fI(e,nF,"getChainId")({});null!==o&&nO({currentChainId:h,chain:o});const u=(null==o?void 0:o.formatters)||(null==(s=e.chain)?void 0:s.formatters),d=(null==(n=null==u?void 0:u.transactionRequest)?void 0:n.format)||SL;return c.signTransaction?c.signTransaction({...l,chainId:h},{serializer:null==(i=null==(a=e.chain)?void 0:a.serializers)?void 0:i.transaction}):await e.request({method:"eth_signTransaction",params:[{...d(l),chainId:u_(h),from:c.address}]},{retryCount:0})}(e,t),signTypedData:t=>async function(e,t){const{account:s=e.account,domain:n,message:a,primaryType:i}=t;if(!s)throw new tO({docsPath:"/docs/actions/wallet/signTypedData"});const r=RD(s),o={EIP712Domain:cj({domain:n}),...t.types};if(lj({domain:n,message:a,primaryType:i,types:o}),r.signTypedData)return r.signTypedData({domain:n,message:a,primaryType:i,types:o});const l=function(e){const{domain:t,message:s,primaryType:n,types:a}=e,i=(e,t)=>{const s={...t};for(const n of e){const{name:e,type:t}=n;"address"===t&&(s[e]=s[e].toLowerCase())}return s},r=a.EIP712Domain&&t?i(a.EIP712Domain,t):{},o=(()=>{if("EIP712Domain"!==n)return i(a[n],s)})();return XD({domain:r,message:o,primaryType:n,types:a})}({domain:n,message:a,primaryType:i,types:o});return e.request({method:"eth_signTypedData_v4",params:[r.address,l]},{retryCount:0})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:u_(t)}]},{retryCount:0})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}(e,t),writeContract:t=>oO(e,t)}}const mz=YO({id:50312,name:"Somnia Testnet",nativeCurrency:{name:"STT",symbol:"STT",decimals:18},rpcUrls:{default:{http:["https://dream-rpc.somnia.network"]}},blockExplorers:{default:{name:"Somnia Testnet Explorer",url:"https://somnia-testnet.socialscan.io",apiUrl:"https://shannon-explorer.somnia.network/api"}},testnet:!0}),gz=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"URI_SETTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newuri",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],yz=({tokenId:e,title:t,useStarImage:s=!1})=>{const{data:n,isLoading:a}=mR({queryKey:["achievementImage",e],queryFn:async()=>(await fetch(`https://insomnus-backend-production-8a4c3b46c656.herokuapp.com/api/nft/data/${e}`)).json(),enabled:!!e&&!s});return s?Pa.jsx("img",{src:"/star.png",alt:t,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[100px] h-[100px] object-contain z-10"}):a?Pa.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:Pa.jsx("div",{className:"w-6 h-6 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):(null==n?void 0:n.image)?Pa.jsx("img",{src:n.image,alt:t,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[100px] h-[100px] object-contain z-10",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):Pa.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center z-10",children:[Pa.jsx("div",{className:"text-xs font-bold text-yellow-400 mb-1 truncate w-full px-2",children:t}),Pa.jsx("div",{className:"text-xs text-gray-300 opacity-60",children:"No Image"})]})},bz=()=>{const{user:e}=Zv(),[t,s]=ya.useState({username:"",email:"",x:"",discord:"",referralCode:"",gold:0,xp:0,walletAddress:""}),[n,a]=ya.useState(!0),{data:i,isLoading:r,error:o}=mR({queryKey:["achievements",null==e?void 0:e.id],queryFn:()=>(async()=>{try{return(await jv.get("/my/achievements")).data}catch(e){throw console.error("Failed to get user achievements:",e),e}})(e.id),enabled:!!(null==e?void 0:e.id)}),{data:l,isLoading:c}=mR({queryKey:["allAchievements"],queryFn:()=>(async()=>{try{return(await jv.get("/achievements")).data.data}catch(e){throw console.error("Failed to get user achievements:",e),e}})()}),{data:h}=mR({queryKey:["mintableItems"],queryFn:async()=>(async()=>{try{return(await jv.get("/nft/eligible")).data.data}catch(e){throw console.error("Failed to check mint eligibility:",e),e}})()});console.log(h,"mint");const u=(null==i?void 0:i.data)||[];console.log(l,"all achievements");const d=(null==h?void 0:h.slice(0,6))||[],[p,f]=ya.useState(!1),[m,g]=ya.useState(!1),[y,b]=ya.useState(!1),[v,w]=ya.useState(!1),[x,k]=ya.useState(""),[A,E]=ya.useState(""),[S,P]=ya.useState(""),[T,B]=ya.useState(""),[C,M]=ya.useState(""),[R,I]=ya.useState(null),[_,D]=ya.useState(!1),[N,L]=ya.useState(!1),[F,O]=ya.useState(""),[j,U]=ya.useState(new Set);ya.useEffect((()=>{(async()=>{var e,t,n,i;try{a(!0);const r=await MC(),o=r.data||r;s({username:o.username||"Unknown User",email:o.email||"",x:(null==(e=o.socials)?void 0:e.x)||"",discord:(null==(t=o.socials)?void 0:t.discord)||"",referralCode:o.referralCode||o.id||"",gold:o.gold||0,xp:o.xp||0,walletAddress:o.walletAddress||""}),k((null==(n=o.socials)?void 0:n.discord)||""),E((null==(i=o.socials)?void 0:i.x)||""),P(o.email||""),B(o.username||"")}catch(r){console.error("Failed to fetch profile:",r)}finally{a(!1)}})()}),[]);const G=async()=>{var e,n,a,i,r;try{const e={username:T||t.username,email:S||t.email,socials:{x:A||t.x,discord:x||t.discord}};await(async e=>{try{return(await jv.put("/profile/update",e)).data}catch(t){throw console.error("Failed to update profile:",t),t}})(e),await(async()=>{var e,t,n,a;try{const i=await MC(),r=i.data||i;s({username:r.username||"Unknown User",email:r.email||"",x:(null==(e=r.socials)?void 0:e.x)||"",discord:(null==(t=r.socials)?void 0:t.discord)||"",referralCode:r.referralCode||r.id||"",gold:r.gold||0,xp:r.xp||0,walletAddress:r.walletAddress||""}),B(r.username||""),P(r.email||""),k((null==(n=r.socials)?void 0:n.discord)||""),E((null==(a=r.socials)?void 0:a.x)||"")}catch(i){console.error("Failed to refresh profile:",i)}})(),f(!1),g(!1),b(!1),w(!1),M("")}catch(o){let s="Failed to update profile. Please try again.";409===(null==(e=o.response)?void 0:e.status)?s="Username already exists. Please choose a different username.":400===(null==(n=o.response)?void 0:n.status)?s="Invalid data provided. Please check your input.":401===(null==(a=o.response)?void 0:a.status)?s="Authentication required. Please log in again.":(null==(r=null==(i=o.response)?void 0:i.data)?void 0:r.message)&&(s=o.response.data.message),M(s),w(!1),B(t.username)}};return n?Pa.jsx("div",{className:"min-h-screen w-full flex items-center justify-center text-white bg-[#170908]",children:Pa.jsx("div",{className:"w-[500px] bg-dark-primary border border-[#392423] p-6",children:Pa.jsxs("div",{className:"flex flex-col items-center",children:[Pa.jsx("div",{className:"w-24 h-24 bg-gray-600 rounded-full mb-4 animate-pulse"}),Pa.jsx("div",{className:"h-8 bg-gray-600 rounded w-32 mb-6 animate-pulse"}),Pa.jsx("div",{className:"space-y-3 w-full",children:[1,2,3,4].map((e=>Pa.jsx("div",{className:"bg-dark-primary border border-[#392423]  p-3 h-12 animate-pulse"},e)))})]})})}):Pa.jsxs("div",{className:"h-screen w-full flex flex-col flex-1 text-heading-4-alagard bg-dark-primary",children:[Pa.jsx("style",{dangerouslySetInnerHTML:{__html:"\n    @keyframes subtle-glow {\n      0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }\n      50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.6), 0 0 25px rgba(255, 215, 0, 0.3); }\n    }\n    .shiny-border {\n      animation: subtle-glow 3s ease-in-out infinite;\n      border: 1px solid rgba(255, 215, 0, 0.4);\n    }\n  "}}),Pa.jsx("h1",{className:"text-heading-3-alagard p-8",style:{color:"#ffae0b"},children:"Profile"}),Pa.jsxs("div",{className:"flex flex-row w-full h-full justify-center p-8 gap-8",children:[Pa.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[C&&Pa.jsx("div",{className:"mb-4 p-3 bg-red-900 text-red-300 rounded text-center font-bold border border-red-600",children:C}),Pa.jsxs("div",{className:"flex flex-col items-center mb-6 bg-dark-secondary border border-dark-tertiary  p-6",children:[Pa.jsx("div",{className:"w-30 h-30 rounded-full overflow-hidden",children:Pa.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pa.jsx("div",{className:"flex items-center space-x-2 bg-dark-secondary",children:v?Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("input",{type:"text",value:T,onChange:e=>B(e.target.value),className:"bg-dark-primary border border-[#4A2D2A] rounded px-3 py-1 text-white text-xl font-bold text-center",placeholder:"Enter username"}),Pa.jsx("button",{onClick:()=>{G()},className:"text-green-400 hover:text-green-300 transition-colors",children:"✓"}),Pa.jsx("button",{onClick:()=>{w(!1),B(t.username),M("")},className:"text-red-400 hover:text-red-300 transition-colors",children:"✕"})]}):Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("h2",{className:"text-xl font-bold text-white",children:t.username}),Pa.jsx("button",{onClick:()=>w(!0),className:"text-white hover:text-red-600 text-sm",children:Pa.jsx(ER,{className:"w-4 h-4"})})]})})]}),Pa.jsxs("div",{className:"space-y-3 bg-dark-secondary",children:[Pa.jsx("div",{className:"bg-dark-secondary border border-dark-tertiary  p-3 flex items-center justify-between",children:Pa.jsxs("div",{className:"flex items-center space-x-3",children:[Pa.jsx(AR,{className:"w-5 h-5 text-gray-400"}),Pa.jsxs("div",{children:[Pa.jsx("span",{className:"text-white font-medium block",children:t.walletAddress?`${t.walletAddress.slice(0,6)}...${t.walletAddress.slice(-4)}`:"No wallet"}),Pa.jsx("span",{className:"text-gray-400 text-sm",children:"Wallet Address"})]})]})}),Pa.jsxs("div",{className:"bg-dark-secondary border border-dark-tertiary  p-3 flex items-center justify-between",children:[Pa.jsxs("div",{className:"flex items-center space-x-3",children:[Pa.jsx(kR,{className:"w-5 h-5 text-gray-400"}),y?Pa.jsx("input",{type:"text",value:S,onChange:e=>P(e.target.value),className:"bg-dark-primary border border-[#4A2D2A] rounded px-2 py-1 text-white text-sm flex-1",placeholder:"Enter Email"}):Pa.jsx("span",{className:"text-white font-medium",children:t.email})]}),Pa.jsx("div",{className:"flex items-center space-x-2",children:y?Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("button",{onClick:()=>{G()},className:"text-green-400 hover:text-green-300 transition-colors text-sm",children:"✓"}),Pa.jsx("button",{onClick:()=>{b(!1),P(t.email)},className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:"✕"})]}):Pa.jsx(Pa.Fragment,{children:Pa.jsx("button",{onClick:()=>b(!0),className:"text-white hover:text-red-600 text-sm",children:Pa.jsx(ER,{className:"w-4 h-4"})})})})]})]})]}),Pa.jsxs("div",{className:"flex-1 flex flex-col gap-4 h-full",children:[Pa.jsxs("div",{className:"h-1/2 flex flex-col",children:[Pa.jsx("h2",{className:"text-2xl font-bold mb-5",children:"Items"}),Pa.jsx("div",{className:"h-full overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#392423 #24110F"},children:Pa.jsx("div",{className:"grid grid-cols-3 gap-6",children:[...Array(6)].map(((e,t)=>{const s=d[t];return Pa.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden group "+(s&&!j.has(s.tokenId)?"shiny-border":""),children:[Pa.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",style:{zIndex:0}}),s?Pa.jsxs(Pa.Fragment,{children:[Pa.jsx(yz,{tokenId:s.tokenId,title:s.title}),Pa.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center z-20",children:Pa.jsx("button",{onClick:()=>(async e=>{var t;try{if(L(!0),O("Connecting to wallet..."),!window.ethereum)return O("Please install MetaMask to mint achievements"),void setTimeout((()=>O("")),5e3);const t=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];O("Please confirm transaction in MetaMask...");const s=function(e){const{key:t="public",name:s="Public Client"}=e;return pO({...e,key:t,name:s,type:"publicClient"}).extend(dz)}({chain:mz,transport:kO()}),n=function(e){const{key:t="wallet",name:s="Wallet Client",transport:n}=e;return pO({...e,key:t,name:s,transport:n,type:"walletClient"}).extend(fz)}({chain:mz,transport:bO(window.ethereum)}),a=function({abi:e,address:t,client:s}){const n=s,[a,i]=n?"public"in n&&"wallet"in n?[n.public,n.wallet]:"public"in n?[n.public,void 0]:"wallet"in n?[void 0,n.wallet]:[n,n]:[void 0,void 0],r=null!=a,o=null!=i,l={};let c=!1,h=!1,u=!1;for(const d of e)if("function"===d.type?"view"===d.stateMutability||"pure"===d.stateMutability?c=!0:h=!0:"event"===d.type&&(u=!0),c&&h&&u)break;return r&&(c&&(l.read=new Proxy({},{get:(s,n)=>(...s)=>{const{args:i,options:r}=lO(s);return fI(a,GF,"readContract")({abi:e,address:t,functionName:n,args:i,...r})}})),h&&(l.simulate=new Proxy({},{get:(s,n)=>(...s)=>{const{args:i,options:r}=lO(s);return fI(a,HF,"simulateContract")({abi:e,address:t,functionName:n,args:i,...r})}})),u&&(l.createEventFilter=new Proxy({},{get:(s,n)=>(...s)=>{const i=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=cO(s,i);return fI(a,MD,"createContractEventFilter")({abi:e,address:t,eventName:n,args:r,...o})}}),l.getEvents=new Proxy({},{get:(s,n)=>(...s)=>{const i=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=cO(s,i);return fI(a,yF,"getContractEvents")({abi:e,address:t,eventName:n,args:r,...o})}}),l.watchEvent=new Proxy({},{get:(s,n)=>(...s)=>{const i=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=cO(s,i);return fI(a,eO,"watchContractEvent")({abi:e,address:t,eventName:n,args:r,...o})}}))),o&&h&&(l.write=new Proxy({},{get:(s,n)=>(...s)=>{const{args:a,options:r}=lO(s);return fI(i,oO,"writeContract")({abi:e,address:t,functionName:n,args:a,...r})}})),(r||o)&&h&&(l.estimateGas=new Proxy({},{get:(s,n)=>(...s)=>{const{args:r,options:o}=lO(s);return fI(a??i,cF,"estimateContractGas")({abi:e,address:t,functionName:n,args:r,...o,account:o.account??i.account})}})),l.address=t,l.abi=e,l}({address:"0x3A711d5E7e4d69eBef1B7e1b3715f463619A254c",abi:gz,client:{public:s,wallet:n}});O("Minting achievement...");const i=await a.write.mint([t,BigInt(e),BigInt(1),"0x"],{account:t});O("Waiting for confirmation...");const r=await s.waitForTransactionReceipt({hash:i});O("Notifying backend..."),await(async e=>{try{return(await jv.post(`/nft/mint/${e}`)).data}catch(t){throw console.error("Failed to mint achievement NFT:",t),t}})(e),U((t=>new Set([...t,e]))),O("Achievement minted successfully!"),console.log("Mint successful! TX:",r.transactionHash),setTimeout((()=>O("")),3e3)}catch(s){console.error("Minting error:",s),4001===s.code?O("Transaction rejected by user"):s.reason?O(`Error: ${s.reason}`):(null==(t=s.message)?void 0:t.includes("insufficient funds"))?O("Insufficient funds for gas"):O("Failed to mint achievement"),setTimeout((()=>O("")),5e3)}finally{L(!1)}})(s.tokenId),disabled:N,className:"px-3 py-1 text-xs font-bold rounded transition-colors "+(N?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700 text-white"),children:N?"Minting...":"Mint"})}),Pa.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-black/90 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-30 max-w-48",children:[Pa.jsx("div",{className:"font-bold",children:s.title}),Pa.jsx("div",{className:"text-gray-300",children:s.description}),Pa.jsx("div",{className:"text-yellow-400",children:"Click to mint NFT"})]})]}):Pa.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",style:{zIndex:0}})]},t)}))})})]}),Pa.jsxs("div",{className:"h-1/2 flex flex-col",children:[Pa.jsx("h2",{className:"text-2xl font-bold text-heading-4-alagard mb-5",children:"Achievement"}),Pa.jsx("div",{className:"h-full overflow-y-auto pr-2 pb-6",style:{scrollbarWidth:"thin",scrollbarColor:"#392423 #24110F"},children:Pa.jsx("div",{className:"grid grid-cols-3 gap-6",children:c?[...Array(6)].map(((e,t)=>Pa.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden animate-pulse",children:[Pa.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none opacity-50",style:{zIndex:0}}),Pa.jsx("img",{src:"/Frame-8.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none opacity-50",style:{zIndex:0}})]},t))):l&&l.length>0?l.map(((e,t)=>{const s=null==u?void 0:u.some((t=>t.achievement.id===e.id));return Pa.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden group cursor-pointer "+(s?"":"opacity-50 grayscale"),title:`${e.title}: ${e.description} (${e.points} points) ${s?"✓ Earned":"✗ Not earned"}`,onClick:()=>I({...e,earned:s}),children:[Pa.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-0"}),Pa.jsx(yz,{tokenId:e.tokenId,title:e.title,useStarImage:!0}),!s&&Pa.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-10"}),Pa.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-black/90 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-30 max-w-48",children:[Pa.jsx("div",{className:"font-bold",children:e.title}),Pa.jsx("div",{className:"text-gray-300",children:e.description}),Pa.jsxs("div",{className:"text-yellow-400",children:[e.points," points"]}),Pa.jsx("div",{className:s?"text-green-400":"text-red-400",children:s?"✓ Earned":"✗ Not earned"})]})]},e.id||t)})):Pa.jsx("div",{className:"col-span-3 text-center text-gray-400",children:"No achievements available"})})})]})]}),F&&Pa.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:Pa.jsx("div",{className:"p-4 rounded-lg shadow-lg max-w-sm "+(F.includes("successfully")?"bg-green-900/90 text-green-300 border border-green-600":F.includes("Error")||F.includes("Failed")||F.includes("rejected")?"bg-red-900/90 text-red-300 border border-red-600":"bg-blue-900/90 text-blue-300 border border-blue-600"),children:Pa.jsx("div",{className:"text-sm font-medium",children:F})})})]}),R&&Pa.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>I(null),children:Pa.jsxs("div",{className:"bg-dark-primary border border-dark-tertiary p-6 max-w-lg w-full mx-4",onClick:e=>e.stopPropagation(),children:[Pa.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Pa.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:R.title}),Pa.jsx("button",{onClick:()=>I(null),className:"text-gray-400 hover:text-white text-xl",children:"✕"})]}),Pa.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Pa.jsxs("div",{className:"relative w-24 h-24 flex-shrink-0",children:[Pa.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-0"}),Pa.jsx(yz,{tokenId:R.tokenId,title:R.title,useStarImage:!0}),!R.earned&&Pa.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-10"})]}),Pa.jsxs("div",{className:"flex-1",children:[Pa.jsx("div",{className:"text-gray-300 mb-2",children:R.description}),Pa.jsxs("div",{className:"text-yellow-400 font-bold mb-2",children:[R.points," Points"]}),Pa.jsx("div",{className:"font-bold "+(R.earned?"text-green-400":"text-red-400"),children:R.earned?"✓ Earned":"✗ Not Earned"})]})]}),Pa.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:[Pa.jsx("strong",{children:"Token ID:"})," ",R.tokenId]}),R.earned&&Pa.jsx("div",{className:"bg-green-900/20 border border-green-600/30 p-3 rounded text-green-300 text-sm",children:"🎉 Congratulations! You've earned this achievement!"})]})})]})};var vz={exports:{}};function wz(){}function xz(){}xz.resetWarningCache=wz,vz.exports=function(){function e(e,t,s,n,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xz,resetWarningCache:wz};return s.PropTypes=s,s}();const kz=Rn(vz.exports);class Az extends Phaser.Scene{constructor(){super("Level"),En(this,"dino"),En(this,"welcome")}editorCreate(){const e=this.add.image(640,288,"dino");e.setInteractive(new Phaser.Geom.Rectangle(0,0,250,250),Phaser.Geom.Rectangle.Contains);const t=this.add.text(640,478,"",{});t.setOrigin(.5,.5),t.text="Phaser 3 + Phaser Editor v4",t.setStyle({fontFamily:"Arial",fontSize:"30px"}),this.dino=e,this.welcome=t,this.events.emit("scene-awake")}create(){this.editorCreate(),this.dino.on("pointerdown",(()=>{this.welcome.text="Hello, World!"}))}}class Ez extends Phaser.Scene{constructor(){super("Preload"),En(this,"progressBar")}editorPreload(){this.load.pack("asset-pack","./assets/asset-pack.json")}editorCreate(){const e=this.add.image(505.0120544433594,360,"guapen");e.scaleX=.32715486817515643,e.scaleY=.32715486817515643;const t=this.add.rectangle(553,361,256,20);t.setOrigin(0,0),t.isFilled=!0,t.fillColor=14737632;const s=this.add.rectangle(553.0120849609375,361,256,20);s.setOrigin(0,0),s.fillColor=14737632,s.isStroked=!0;const n=this.add.text(552.0120849609375,329,"",{});n.text="Loading...",n.setStyle({color:"#e0e0e0",fontFamily:"arial",fontSize:"20px"}),this.progressBar=t,this.events.emit("scene-awake")}preload(){try{this.editorCreate(),this.editorPreload();const e=this.progressBar.width;this.load.on("progress",(t=>{this.progressBar.width=t*e})),this.load.on("complete",(()=>{console.log("All assets loaded. Exp texture exists:",this.textures.exists("Exp")),console.log("Health_Potion_01 texture exists:",this.textures.exists("Health_Potion_01"))}))}catch(e){console.error("Error in preload:",e)}}create(){console.log("Assets loaded - Exp:",this.textures.exists("Exp")),console.log("Assets loaded - Health_Potion_01:",this.textures.exists("Health_Potion_01")),console.log("Preload scene complete - waiting for manual game start"),window.EventBus&&window.EventBus.emit("preload-complete"),window.dispatchEvent(new CustomEvent("gamePreloadComplete"))}createFallbackTexture(){try{const e=this.add.graphics();e.fillStyle(65535,1),e.fillCircle(8,8,8),e.generateTexture("Exp",16,16),e.destroy(),console.log("Created fallback Exp texture")}catch(e){console.error("Error creating fallback texture:",e)}}}class Sz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??32,s??32,n||"zombierun",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<20){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=30,a=Math.cos(s)*n,i=Math.sin(s)*n;t.body.velocity.x+=a,t.body.velocity.y+=i,e.body.velocity.x-=a,e.body.velocity.y-=i}}createAnimations(){this.scene.anims.exists("zombieRunAni")||this.scene.anims.create({key:"zombieRunAni",frames:this.scene.anims.generateFrameNumbers("zombierun",{start:0,end:6}),frameRate:8,repeat:-1}),this.scene.anims.exists("zombieIdle")||this.scene.anims.create({key:"zombieIdle",frames:[{key:"zombierun",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Zombie update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"zombieRunAni"===this.anims.currentAnim.key||this.play("zombieRunAni"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"zombieIdle"===this.anims.currentAnim.key||this.play("zombieIdle")}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,12,6),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Pz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??32,s??32,n||"Zombie2RunAni",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<20){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=30,a=Math.cos(s)*n,i=Math.sin(s)*n;t.body.velocity.x+=a,t.body.velocity.y+=i,e.body.velocity.x-=a,e.body.velocity.y-=i}}createAnimations(){this.scene.anims.exists("zombieRunAni")||this.scene.anims.create({key:"zombieRunAni",frames:this.scene.anims.generateFrameNumbers("Zombie2RunAni",{start:0,end:6}),frameRate:8,repeat:-1}),this.scene.anims.exists("zombieIdle")||this.scene.anims.create({key:"zombieIdle",frames:[{key:"Zombie2RunAni",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Zombie update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving&&(this.anims.isPlaying&&"Zombie2RunAni"===this.anims.currentAnim.key||this.play("Zombie2RunAni"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0))}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Tz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??191,s??94,n||"Police run",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s.body.velocity.x-=i,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("PoliceDroid")||this.scene.anims.create({key:"PoliceDroid",frames:this.scene.anims.generateFrameNumbers("Police run",{start:0,end:10}),frameRate:8,repeat:-1}),this.scene.anims.exists("PoliceDroidIdle")||this.scene.anims.create({key:"PoliceDroidIdle",frames:[{key:"Police run",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in DroidPolice update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"PoliceDroid"===this.anims.currentAnim.key||this.play("PoliceDroid"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"PoliceDroidIdle"===this.anims.currentAnim.key||this.play("PoliceDroidIdle")}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,20,10),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.95:1;this.shadow.setScale(e*t)}}}class Bz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??32,s??32,n||"Dagger Bandit-Run",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s.body.velocity.y-=i,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("Assasin Run")||this.scene.anims.create({key:"Assasin Run",frames:this.scene.anims.generateFrameNumbers("Dagger Bandit-Run",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("assassin")||this.scene.anims.create({key:"assassin",frames:[{key:"Dagger Bandit-Run",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Assassinupdate:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Assasin Run"===this.anims.currentAnim.key||this.play("Assasin Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"assassin"===this.anims.currentAnim.key||this.play("assassin")}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,14,26,13),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.7:1;this.shadow.setScale(e*t)}}}class Cz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??32,s??32,n||"run_1",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s.body.velocity.y-=i,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("AssasinTank Run")||this.scene.anims.create({key:"AssasinTank Run",frames:this.scene.anims.generateFrameNumbers("run_1",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("assassinTank")||this.scene.anims.create({key:"assassinTank",frames:[{key:"run_1",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in AssassinTank update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"AssasinTank Run"===this.anims.currentAnim.key||this.play("AssasinTank Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"assassinTank"===this.anims.currentAnim.key||this.play("assassinTank")}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,20,35,18),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Mz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??32,s??32,n||"Archer Bandit-Run_85x32",a??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s.body.velocity.y-=i,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("AssasinArcher Run")||this.scene.anims.create({key:"AssasinArcher Run",frames:this.scene.anims.generateFrameNumbers("Archer Bandit-Run_85x32",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("AssasinArcher")||this.scene.anims.create({key:"AssasinArcher",frames:[{key:"Archer Bandit-Run_85x32",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x+55,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in AssasinArcher update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"AssasinArcher Run"===this.anims.currentAnim.key||this.play("AssasinArcher Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"AssasinArcher"===this.anims.currentAnim.key||this.play("AssasinArcher")}attackPlayer(e){e&&e.takeDamage&&(e.takeDamage(this.damage),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:300,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,0),this.shadow.fillEllipse(0,42,26,13),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Rz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"run_2",a??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(16,32),this.maxHealth=80,this.health=this.maxHealth,this.damage=25,this.speed=30,this.attackRange=40,this.attackCooldown=1500,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<30){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=40,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.5*i,s.body.velocity.y-=.5*r)}}createAnimations(){this.scene.anims.exists("BigDude Run")||this.scene.anims.create({key:"BigDude Run",frames:this.scene.anims.generateFrameNumbers("run_2",{start:0,end:7}),frameRate:6,repeat:-1}),this.scene.textures.exists("attack 2t")&&!this.scene.anims.exists("BigDude Attack2")&&this.scene.anims.create({key:"BigDude Attack2",frames:this.scene.anims.generateFrameNumbers("attack 2t",{start:0,end:7}),frameRate:8,repeat:0}),this.scene.anims.exists("BigDude Idle")||this.scene.anims.create({key:"BigDude Idle",frames:[{key:"run_2",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,40,6,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-20,this.y-25,40,6,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-20,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=40*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.85,this.body.velocity.y*=.85,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.7,this.body.velocity.y*=.7;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in BigDude update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<35&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=20*(1-a/35);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.08*e,this.body.velocity.y+=.08*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"BigDude Run"===this.anims.currentAnim.key||this.play("BigDude Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"BigDude Idle"===this.anims.currentAnim.key||this.play("BigDude Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("BigDude Attack2")?(this.play("BigDude Attack2"),this.scene.time.delayedCall(400,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16746496),this.scene.time.delayedCall(200,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:500,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.7,duration:500,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(3,6);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-15,15),t=Phaser.Math.Between(-15,15);this.scene.spawnExperienceOrb(this.x+e,this.y+t,2)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,40,20),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+20);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Iz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??48,s??48,n||"WreackerRun",a??0),e.physics.add.existing(this,!1),this.body.setSize(24,24,!1),this.body.setOffset(12,24),this.maxHealth=50,this.health=this.maxHealth,this.damage=15,this.speed=60,this.attackRange=30,this.attackCooldown=800,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.7*i,s.body.velocity.y-=.7*r)}}createAnimations(){this.scene.anims.exists("WreackerRun")||this.scene.anims.create({key:"WreackerRun",frames:this.scene.anims.generateFrameNumbers("WreackerRun",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.textures.exists("WreackerAttack")&&!this.scene.anims.exists("Wreacker Attack")&&this.scene.anims.create({key:"Wreacker Attack",frames:this.scene.anims.generateFrameNumbers("WreackerAttack",{start:0,end:5}),frameRate:10,repeat:0}),this.scene.anims.exists("Wreacker Idle")||this.scene.anims.create({key:"Wreacker Idle",frames:[{key:"WreackerRun",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-20,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-12),this.healthBarFg.setPosition(this.x-17.5,this.y-12);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.12,n=Math.sin(e)*this.speed*.12;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.88,this.body.velocity.y*=.88,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.75,this.body.velocity.y*=.75;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Wreacker update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<30&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=18*(1-a/30);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"WreackerRun"===this.anims.currentAnim.key||this.play("WreackerRun"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Wreacker Idle"===this.anims.currentAnim.key||this.play("Wreacker Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("Wreacker Attack")?(this.play("Wreacker Attack"),this.scene.time.delayedCall(250,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(120,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:450,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.6,duration:400,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,4);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-10,30,15),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=this.isMoving?.9:1;this.shadow.setScale(e)}}}class _z extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"Warrior-Run",a??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(16,32),this.maxHealth=60,this.health=this.maxHealth,this.damage=20,this.speed=45,this.attackRange=35,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<28){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=35,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.6*i,s.body.velocity.y-=.6*r)}}createAnimations(){this.scene.anims.exists("Warrior-Run")||this.scene.anims.create({key:"Warrior-Run",frames:this.scene.anims.generateFrameNumbers("Warrior-Run",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.textures.exists("WarriorAttack")&&!this.scene.anims.exists("Warrior Attack")&&this.scene.anims.create({key:"Warrior Attack",frames:this.scene.anims.generateFrameNumbers("WarriorAttack",{start:0,end:5}),frameRate:10,repeat:0}),this.scene.anims.exists("Warrior Idle")||this.scene.anims.create({key:"Warrior Idle",frames:[{key:"Warrior-Run",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,38,6,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-19,this.y-25,38,6,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-19,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=38*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.11,n=Math.sin(e)*this.speed*.11;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.87,this.body.velocity.y*=.87,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.75,this.body.velocity.y*=.75;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Warrior update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<32&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=19*(1-a/32);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.09*e,this.body.velocity.y+=.09*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Warrior-Run"===this.anims.currentAnim.key||this.play("Warrior-Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Warrior Idle"===this.anims.currentAnim.key||this.play("Warrior Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("Warrior Attack")?(this.play("Warrior Attack"),this.scene.time.delayedCall(300,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16755200),this.scene.time.delayedCall(180,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(140,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:450,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.65,duration:450,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(3,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-13,13),t=Phaser.Math.Between(-13,13);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.8)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,30,15),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Dz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"crawler_run_32x16_v01",a??0),e.physics.add.existing(this,!1),this.body.setSize(24,12,!1),this.body.setOffset(4,4),this.maxHealth=30,this.health=this.maxHealth,this.damage=15,this.speed=45,this.attackRange=25,this.attackCooldown=800,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=30,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.3*i,s.body.velocity.y-=.3*r)}}createAnimations(){this.scene.anims.exists("Crawler Run")||this.scene.anims.create({key:"Crawler Run",frames:this.scene.anims.generateFrameNumbers("crawler_run_32x16_v01",{start:0,end:7}),frameRate:10,repeat:-1}),this.scene.textures.exists("crawler_attack")&&!this.scene.anims.exists("Crawler Attack")&&this.scene.anims.create({key:"Crawler Attack",frames:this.scene.anims.generateFrameNumbers("crawler_attack",{start:0,end:5}),frameRate:12,repeat:0}),this.scene.anims.exists("Crawler Idle")||this.scene.anims.create({key:"Crawler Idle",frames:[{key:"crawler_run_32x16_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-12),this.healthBarFg.setPosition(this.x-15,this.y-12);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.12,n=Math.sin(e)*this.speed*.12;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>3,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Crawler update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<25&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-a/25);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.06*e,this.body.velocity.y+=.06*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Crawler Run"===this.anims.currentAnim.key||this.play("Crawler Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Crawler Idle"===this.anims.currentAnim.key||this.play("Crawler Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("Crawler Attack")?(this.play("Crawler Attack"),this.scene.time.delayedCall(300,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:400,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.5,duration:400,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-16,12,6),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Nz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"Bomber_Activited_run_v01",a??0),e.physics.add.existing(this,!1),this.body.setSize(28,28,!1),this.body.setOffset(18,20),this.maxHealth=40,this.health=this.maxHealth,this.damage=35,this.speed=35,this.explosionRange=80,this.triggerRange=50,this.explosionDelay=1e3,this.isTriggered=!1,this.triggerTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.flashTimer=0,this.flashInterval=200,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<28){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=35,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.4*i,s.body.velocity.y-=.4*r)}}createAnimations(){this.scene.anims.exists("Bomber Run")||this.scene.anims.create({key:"Bomber Run",frames:this.scene.anims.generateFrameNumbers("Bomber_Activited_run_v01",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.textures.exists("bomber_explode")&&!this.scene.anims.exists("Bomber Explode")&&this.scene.anims.create({key:"Bomber Explode",frames:this.scene.anims.generateFrameNumbers("bomber_explode",{start:0,end:5}),frameRate:15,repeat:0}),this.scene.anims.exists("Bomber Idle")||this.scene.anims.create({key:"Bomber Idle",frames:[{key:"Bomber_Activited_run_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-22,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-22,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-17.5,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e,this.isTriggered&&(this.healthBarBg.setFillStyle(16755200),this.healthBarFg.setFillStyle(16711680))}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isTriggered&&s<=this.triggerRange&&this.triggerExplosion(e),this.isTriggered&&(this.handleTriggeredState(e),e-this.triggerTime>=this.explosionDelay))return void this.explode();const n=this.isTriggered?1.5*this.speed:this.speed;if(s>10){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=this.isTriggered?.15:.11,a=Math.cos(e)*n*s,i=Math.sin(e)*n*s;this.body.velocity.x+=a,this.body.velocity.y+=i,this.body.velocity.x*=.88,this.body.velocity.y*=.88,this.isTriggered||this.applyZombieAvoidance();const r=n,o=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(o>r){const e=r/o;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const e=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=e>3}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Bomber update:",s)}}triggerExplosion(e){this.isTriggered=!0,this.triggerTime=e,this.setTint(16737792),this.scene.sound&&this.scene.sound.get("bomber_trigger")&&this.scene.sound.play("bomber_trigger")}handleTriggeredState(e){const t=this.explosionDelay-(e-this.triggerTime),s=Math.max(50,.2*t);e-this.flashTimer>s&&(16777215===this.tint?this.setTint(16711680):this.clearTint(),this.flashTimer=e)}explode(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:500,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.enable=!1,this.stop(),this.createExplosionEffect(),this.dealExplosionDamage(),this.scene.sound&&this.scene.sound.get("explosion")&&this.scene.sound.play("explosion"),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,scaleX:2,scaleY:2,alpha:0,duration:300,ease:"Power2",onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}createExplosionEffect(){const e=this.scene.add.circle(this.x,this.y,0,16729088,.7);e.setDepth(100),this.scene.tweens.add({targets:e,radius:this.explosionRange,alpha:0,duration:400,ease:"Power2",onComplete:()=>e.destroy()})}dealExplosionDamage(){const e=this.scene.player;if(e&&e.active){const t=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(t<=this.explosionRange){const s=1-t/this.explosionRange,n=Math.floor(this.damage*s);e.takeDamage&&e.takeDamage(n)}}this.scene.zombieGroup&&this.scene.zombieGroup.children.entries.forEach((e=>{if(e===this||e.isDead||!e.active)return;const t=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(t<=this.explosionRange){const s=1-t/this.explosionRange,n=Math.floor(.5*this.damage*s);e.takeDamage&&e.takeDamage(n)}}))}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<30&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=18*(1-a/30);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.07*e,this.body.velocity.y+=.07*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Bomber Run"===this.anims.currentAnim.key||(this.play("Bomber Run"),this.isTriggered&&(this.anims.msPerFrame=80)),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Bomber Idle"===this.anims.currentAnim.key||this.play("Bomber Idle")}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(120,(()=>{this.active&&!this.isTriggered&&this.clearTint()})),this.health<=0&&this.explode())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,4);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-20,20),t=Phaser.Math.Between(-20,20);this.scene.spawnExperienceOrb(this.x+e,this.y+t,3)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-10,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.9:1,s=this.isTriggered?1.2:1;this.shadow.setScale(e*t*s)}}}class Lz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"saber_run_53x53_v01",a??0),e.physics.add.existing(this,!1),this.body.setSize(36,36,!1),this.body.setOffset(8,8),this.maxHealth=60,this.health=this.maxHealth,this.damage=20,this.speed=55,this.attackRange=35,this.attackCooldown=600,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.dashCooldown=3e3,this.lastDashTime=0,this.dashSpeed=120,this.dashDuration=300,this.isDashing=!1,this.dashStartTime=0,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<32){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=25,i=Math.cos(n)*a,r=Math.sin(n)*a;t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r,s&&!s.isDashing&&(s.body.velocity.x-=.2*i,s.body.velocity.y-=.2*r)}}createAnimations(){this.scene.anims.exists("Saber Run")||this.scene.anims.create({key:"Saber Run",frames:this.scene.anims.generateFrameNumbers("saber_run_53x53_v01",{start:0,end:7}),frameRate:12,repeat:-1}),this.scene.textures.exists("saber_attack")&&!this.scene.anims.exists("Saber Attack")&&this.scene.anims.create({key:"Saber Attack",frames:this.scene.anims.generateFrameNumbers("saber_attack",{start:0,end:5}),frameRate:15,repeat:0}),this.scene.textures.exists("saber_dash")&&!this.scene.anims.exists("Saber Dash")&&this.scene.anims.create({key:"Saber Dash",frames:this.scene.anims.generateFrameNumbers("saber_dash",{start:0,end:3}),frameRate:20,repeat:-1}),this.scene.anims.exists("Saber Idle")||this.scene.anims.create({key:"Saber Idle",frames:[{key:"saber_run_53x53_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,38,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-19,this.y-25,38,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-18),this.healthBarFg.setPosition(this.x-19,this.y-18);const e=this.health/this.maxHealth;this.healthBarFg.width=38*e,this.isDashing?(this.healthBarBg.setFillStyle(43775),this.healthBarFg.setFillStyle(65535)):(this.healthBarBg.setFillStyle(16711680),this.healthBarFg.setFillStyle(65280))}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isDashing&&e-this.lastDashTime>this.dashCooldown&&s>80&&s<200&&this.startDash(t,e),this.isDashing)return void this.handleDash(e);if(s>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.14,n=Math.sin(e)*this.speed*.14;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.92,this.body.velocity.y*=.92,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.isAttacking=!1,this.updateDirection(e)}else{this.body.velocity.x*=.85,this.body.velocity.y*=.85;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>4,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Saber update:",s)}}startDash(e,t){this.isDashing=!0,this.dashStartTime=t,this.lastDashTime=t;const s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.body.velocity.x=Math.cos(s)*this.dashSpeed,this.body.velocity.y=Math.sin(s)*this.dashSpeed,this.setTint(65535),this.scene.sound&&this.scene.sound.get("saber_dash")&&this.scene.sound.play("saber_dash"),this.updateDirection(s)}handleDash(e){e-this.dashStartTime>=this.dashDuration&&(this.isDashing=!1,this.clearTint(),this.body.velocity.x*=.3,this.body.velocity.y*=.3),this.isMoving=!0,this.updateAnimation()}applyZombieAvoidance(){if(!this.scene.zombieGroup||this.isDashing)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<28&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=12*(1-a/28);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.05*e,this.body.velocity.y+=.05*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isDashing?this.scene.anims.exists("Saber Dash")?this.anims.isPlaying&&"Saber Dash"===this.anims.currentAnim.key||this.play("Saber Dash"):this.anims.isPlaying&&"Saber Run"===this.anims.currentAnim.key||this.play("Saber Run"):this.isAttacking?this.scene.anims.exists("Saber Attack")&&(this.anims.isPlaying&&"Saber Attack"===this.anims.currentAnim.key||this.play("Saber Attack")):this.isMoving?this.anims.isPlaying&&"Saber Run"===this.anims.currentAnim.key||this.play("Saber Run"):this.anims.isPlaying&&"Saber Idle"===this.anims.currentAnim.key||this.play("Saber Idle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.scene.anims.exists("Saber Attack")?(this.play("Saber Attack"),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage),this.isAttacking=!1}))):(e.takeDamage(this.damage),this.scene.time.delayedCall(300,(()=>{this.isAttacking=!1}))),this.setTint(16776960),this.scene.time.delayedCall(100,(()=>{this.active&&!this.isDashing&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{!this.active||this.isDashing||this.isAttacking||this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.6,rotation:this.rotation+Math.PI,duration:450,ease:"Power2",onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,2)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=this.isMoving?.9:1;this.shadow.setScale(e)}}}class Fz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"guradian_walk224x45",a??0),e.physics.add.existing(this,!1),this.body.setSize(60,40,!1),this.body.setOffset(82,25),this.maxHealth=200,this.health=this.maxHealth,this.damage=35,this.speed=25,this.attackRange=60,this.attackCooldown=2e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.chargeAbilityCooldown=8e3,this.lastChargeTime=0,this.isCharging=!1,this.chargeSpeed=100,this.chargeDuration=1e3,this.chargeStartTime=0,this.chargeDistance=150,this.shieldAbilityCooldown=12e3,this.lastShieldTime=0,this.isShielded=!1,this.shieldDuration=4e3,this.shieldStartTime=0,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<50){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),a=60,i=Math.cos(n)*a,r=Math.sin(n)*a;s===e?(t.body.velocity.x+=2*i,t.body.velocity.y+=2*r,s.body.velocity.x-=.1*i,s.body.velocity.y-=.1*r):s===t?(e.body.velocity.x-=2*i,e.body.velocity.y-=2*r,s.body.velocity.x+=.1*i,s.body.velocity.y+=.1*r):(t.body.velocity.x+=i,t.body.velocity.y+=r,e.body.velocity.x-=i,e.body.velocity.y-=r)}}createAnimations(){this.scene.anims.exists("Guardian Run")||this.scene.anims.create({key:"Guardian Run",frames:this.scene.anims.generateFrameNumbers("guradian_walk224x45",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.textures.exists("guardian_attack")&&!this.scene.anims.exists("Guardian Attack")&&this.scene.anims.create({key:"Guardian Attack",frames:this.scene.anims.generateFrameNumbers("guardian_attack",{start:0,end:5}),frameRate:10,repeat:0}),this.scene.textures.exists("guardian_charge")&&!this.scene.anims.exists("Guardian Charge")&&this.scene.anims.create({key:"Guardian Charge",frames:this.scene.anims.generateFrameNumbers("guardian_charge",{start:0,end:3}),frameRate:15,repeat:-1}),this.scene.anims.exists("Guardian Idle")||this.scene.anims.create({key:"Guardian Idle",frames:[{key:"guradian_walk224x45",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-30,60,8,6684672),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-30,this.y-30,60,8,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.shieldIndicator=this.scene.add.rectangle(this.x,this.y-40,60,4,43775),this.shieldIndicator.setOrigin(.5,.5),this.shieldIndicator.setDepth(21),this.shieldIndicator.setVisible(!1),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy(),this.shieldIndicator&&this.shieldIndicator.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-20),this.healthBarFg.setPosition(this.x-30,this.y-20),this.shieldIndicator&&(this.shieldIndicator.setPosition(this.x,this.y-30),this.shieldIndicator.setVisible(this.isShielded));const e=this.health/this.maxHealth;this.healthBarFg.width=60*e,e>.6?this.healthBarFg.setFillStyle(65280):e>.3?this.healthBarFg.setFillStyle(16755200):this.healthBarFg.setFillStyle(16711680)}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isShielded&&e-this.lastShieldTime>this.shieldAbilityCooldown&&this.health<.5*this.maxHealth&&this.activateShield(e),this.isShielded&&e-this.shieldStartTime>=this.shieldDuration&&this.deactivateShield(),!this.isCharging&&e-this.lastChargeTime>this.chargeAbilityCooldown&&s>100&&s<300&&this.startCharge(t,e),this.isCharging)return void this.handleCharge(e);if(s>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.08,n=Math.sin(e)*this.speed*.08;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.8,this.body.velocity.y*=.8,this.applyZombieAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.isAttacking=!1,this.updateDirection(e)}else{this.body.velocity.x*=.6,this.body.velocity.y*=.6;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>3,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Guardian update:",s)}}activateShield(e){this.isShielded=!0,this.shieldStartTime=e,this.lastShieldTime=e,this.setTint(4491519),this.scene.sound&&this.scene.sound.get("guardian_shield")&&this.scene.sound.play("guardian_shield")}deactivateShield(){this.isShielded=!1,this.clearTint()}startCharge(e,t){this.isCharging=!0,this.chargeStartTime=t,this.lastChargeTime=t;const s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.body.velocity.x=Math.cos(s)*this.chargeSpeed,this.body.velocity.y=Math.sin(s)*this.chargeSpeed,this.setTint(16729088),this.scene.sound&&this.scene.sound.get("guardian_charge")&&this.scene.sound.play("guardian_charge"),this.updateDirection(s)}handleCharge(e){e-this.chargeStartTime>=this.chargeDuration&&(this.isCharging=!1,this.isShielded||this.clearTint(),this.body.velocity.x*=.2,this.body.velocity.y*=.2);const t=this.scene.player;t&&t.active&&Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)<40&&(t.takeDamage&&t.takeDamage(1.5*this.damage),this.isCharging=!1,this.isShielded||this.clearTint()),this.isMoving=!0,this.updateAnimation()}applyZombieAvoidance(){if(!this.scene.zombieGroup||this.isCharging)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<40&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=8*(1-a/40);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.03*e,this.body.velocity.y+=.03*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isCharging?this.scene.anims.exists("Guardian Charge")?this.anims.isPlaying&&"Guardian Charge"===this.anims.currentAnim.key||this.play("Guardian Charge"):this.anims.isPlaying&&"Guardian Run"===this.anims.currentAnim.key||this.play("Guardian Run"):this.isAttacking?this.scene.anims.exists("Guardian Attack")&&(this.anims.isPlaying&&"Guardian Attack"===this.anims.currentAnim.key||this.play("Guardian Attack")):this.isMoving?this.anims.isPlaying&&"Guardian Run"===this.anims.currentAnim.key||this.play("Guardian Run"):this.anims.isPlaying&&"Guardian Idle"===this.anims.currentAnim.key||this.play("Guardian Idle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.scene.anims.exists("Guardian Attack")?(this.play("Guardian Attack"),this.scene.time.delayedCall(500,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage),this.isAttacking=!1}))):(e.takeDamage(this.damage),this.scene.time.delayedCall(600,(()=>{this.isAttacking=!1}))),this.setTint(16737792),this.scene.time.delayedCall(200,(()=>{!this.active||this.isCharging||this.isShielded||this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.isShielded&&(e=Math.floor(.3*e)),this.health-=e,this.updateHealthBar(),this.isShielded||this.isCharging||(this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{!this.active||this.isShielded||this.isCharging||this.clearTint()}))),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:300,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:1.2,duration:800,ease:"Power2",onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(8,12);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-30,30),t=Phaser.Math.Between(-30,30);this.scene.spawnExperienceOrb(this.x+e,this.y+t,5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,50,25),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+20);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Oz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??64,s??64,n||"Charger_run_32x32_v01",a??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(0,0),this.maxHealth=60,this.health=this.maxHealth,this.damage=35,this.speed=50,this.chargeSpeed=120,this.attackRange=80,this.chargeRange=150,this.attackCooldown=2e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isCharging=!1,this.chargeStartTime=0,this.chargeDuration=800,this.chargeDirection={x:0,y:0},this.lastDirection="down",this.createAnimations(),this.addToChargerGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToChargerGroup(e){e.chargerGroup||(e.chargerGroup=e.physics.add.group(),e.physics.add.collider(e.chargerGroup,e.chargerGroup,this.handleChargerCollision,null,e)),e.chargerGroup.add(this)}handleChargerCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<35){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=50,a=Math.cos(s)*n,i=Math.sin(s)*n;t.body.velocity.x+=a,t.body.velocity.y+=i,e.body.velocity.x-=a,e.body.velocity.y-=i}}createAnimations(){this.scene.anims.exists("Charger Run")||this.scene.anims.create({key:"Charger Run",frames:this.scene.anims.generateFrameNumbers("Charger_run_32x32_v01",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("Charger Charge")||this.scene.anims.create({key:"Charger Charge",frames:this.scene.anims.generateFrameNumbers("Charger_run_32x32_v01",{start:0,end:7}),frameRate:12,repeat:-1}),this.scene.anims.exists("Charger Idle")||this.scene.anims.create({key:"Charger Idle",frames:[{key:"Charger_run_32x32_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-25,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-20),this.healthBarFg.setPosition(this.x-17.5,this.y-20);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);this.isCharging?this.updateCharge(e):s<=this.attackRange&&s>20&&e-this.lastAttackTime>this.attackCooldown?this.startCharge(t):s>this.attackRange?this.moveTowardPlayer(t):(this.body.velocity.x*=.8,this.body.velocity.y*=.8,this.isMoving=Math.abs(this.body.velocity.x)>5||Math.abs(this.body.velocity.y)>5),this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Charger update:",s)}}startCharge(e){this.isCharging=!0,this.chargeStartTime=this.scene.time.now,this.lastAttackTime=this.scene.time.now;const t=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.chargeDirection.x=Math.cos(t),this.chargeDirection.y=Math.sin(t),this.updateDirection(t),this.setTint(16755200),this.scene.time.delayedCall(100,(()=>{this.active&&this.clearTint()}))}updateCharge(e){if(e-this.chargeStartTime<this.chargeDuration){this.body.velocity.x=this.chargeDirection.x*this.chargeSpeed,this.body.velocity.y=this.chargeDirection.y*this.chargeSpeed,this.isMoving=!0;const e=this.scene.player;e&&Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y)<25&&this.hitPlayer(e)}else this.isCharging=!1,this.body.velocity.x*=.3,this.body.velocity.y*=.3}moveTowardPlayer(e){const t=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y),s=Math.cos(t)*this.speed*.1,n=Math.sin(t)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.85,this.body.velocity.y*=.85,this.applyChargerAvoidance();const a=this.speed,i=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(i>a){const e=a/i;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(t)}applyChargerAvoidance(){if(!this.scene.chargerGroup)return;let e=0,t=0,s=0;this.scene.chargerGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const a=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(a<40&&a>0){const i=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=25*(1-a/40);e+=Math.cos(i)*r,t+=Math.sin(i)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isCharging?this.anims.isPlaying&&"Charger Charge"===this.anims.currentAnim.key||this.play("Charger Charge"):this.isMoving?this.anims.isPlaying&&"Charger Run"===this.anims.currentAnim.key||this.play("Charger Run"):this.anims.isPlaying&&"Charger Idle"===this.anims.currentAnim.key||this.play("Charger Idle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}hitPlayer(e){e&&e.takeDamage&&!this.isDead&&(e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(200,(()=>{this.active&&this.clearTint()})),this.isCharging=!1,this.body.velocity.x*=.2,this.body.velocity.y*=.2)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.isCharging&&(this.isCharging=!1,this.body.velocity.x*=.5,this.body.velocity.y*=.5),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.isCharging=!1,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,scale:.5,duration:400,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.scene&&this.scene.chargerGroup&&this.scene.chargerGroup.children&&this.scene.chargerGroup.remove(this),this.scene.tweens.add({targets:this,alpha:0,scale:.8,duration:400,onComplete:()=>this.cleanupAndDestroy()}),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.chargerGroup&&this.scene.chargerGroup.children&&this.scene.chargerGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-14,20,10),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.9:1,s=this.isCharging?1.3:1;this.shadow.setScale(e*t*s)}}}const jz={maxDistanceFromPlayer:450,teleportRange:{min:300,max:350},teleportCheckInterval:100,maxTeleportsPerCheck:10,effects:{teleportOutColor:8913151,teleportInColor:65535,effectDuration:400,mobFlashDuration:10,effectRadius:5,effectDepth:-10},debug:{logTeleportations:!1,showEffectsInDebug:!0}},Uz={zombie:{class:Sz,texture:"zombierun",baseHealth:30,baseDamage:10,baseSpeed:50,expValue:10,goldValue:5,spawnWeight:50,minWave:1,expDropChance:.8,goldDropChance:.4},zombieBig:{class:Pz,texture:"Zombie2RunAni",baseHealth:50,baseDamage:20,baseSpeed:40,expValue:20,goldValue:15,spawnWeight:25,minWave:1,expDropChance:.85,goldDropChance:.5},policeDroid:{class:Tz,texture:"Police run",baseHealth:35,baseDamage:15,baseSpeed:55,expValue:15,goldValue:10,spawnWeight:20,minWave:1,expDropChance:.82,goldDropChance:.45},assassin:{class:Bz,texture:"Dagger Bandit-Run",baseHealth:25,baseDamage:25,baseSpeed:70,expValue:25,goldValue:20,spawnWeight:15,minWave:2,expDropChance:.9,goldDropChance:.6},assassinTank:{class:Cz,texture:"assassinTank",baseHealth:80,baseDamage:30,baseSpeed:30,expValue:40,goldValue:35,spawnWeight:8,minWave:2,expDropChance:.95,goldDropChance:.75},assassinArcher:{class:Mz,texture:"assassinArcher",baseHealth:20,baseDamage:18,baseSpeed:45,expValue:30,goldValue:25,spawnWeight:12,minWave:2,expDropChance:.92,goldDropChance:.7},bigDude:{class:Rz,texture:"run_2",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},wreacker:{class:Iz,texture:"WreackerRun",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},choppor:{class:_z,texture:"Warrior-Run",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},bomber:{class:Nz,texture:"Bomber_Activited_run_v01",baseHealth:10,baseDamage:42,baseSpeed:35,expValue:20,goldValue:15,spawnWeight:14,minWave:4,expDropChance:.42,goldDropChance:.6},saber:{class:Lz,texture:"saber_run_53x53_v01",baseHealth:10,baseDamage:42,baseSpeed:40,expValue:20,goldValue:25,spawnWeight:4,minWave:4,expDropChance:.42,goldDropChance:.6},guardian:{class:Fz,texture:"guradian_walk224x45",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:4,expDropChance:.42,goldDropChance:.6},crawler:{class:Dz,texture:"crawler_run_32x16_v01",baseHealth:10,baseDamage:12,baseSpeed:45,expValue:20,goldValue:15,spawnWeight:14,minWave:5,expDropChance:.42,goldDropChance:.6},charger:{class:Oz,texture:"harger_run_32x32_v01",baseHealth:90,baseDamage:32,baseSpeed:45,expValue:24,goldValue:35,spawnWeight:14,minWave:5,expDropChance:.42,goldDropChance:.6}};class Gz{constructor(e){this.scene=e,this.gameManager=null,this.player=null,this.mobGroup=null,this.activeMobs=new Map,this.spawnTimer=null,this.waveTimer=null,this.maxMobs=100,this.spawnDelay=2e3,this.currentWave=0,this.waveActive=!1,this.waveMobs=[],this.walkingAreaData=null,this.walkablePositions=[],this.tileSize=32,this.mapWidth=80,this.mapHeight=80,this.isWalkingAreaInitialized=!1,this.teleportConfig=jz,this.lastTeleportCheck=0,this.stats={totalSpawned:0,totalKilled:0,killsByType:new Map,totalTeleported:0},Object.keys(Uz).forEach((e=>{this.stats.killsByType.set(e,0)}))}initialize(e,t){this.gameManager=e,this.player=t,this.setupMobGroup(),this.startSpawning(),this.setupEventListeners()}setupMobGroup(){this.mobGroup=this.scene.physics.add.group(),this.scene.physics.add.collider(this.mobGroup,this.mobGroup,this.handleMobCollision,null,this),this.scene.zombieGroup=this.mobGroup,this.scene.enemies=this.mobGroup}startSpawning(){this.spawnTimer=this.scene.time.addEvent({delay:this.spawnDelay,callback:()=>this.spawnRandomMob(),loop:!0}),this.waveTimer=this.scene.time.addEvent({delay:2e4,callback:()=>this.triggerNextWave(),loop:!1})}triggerNextWave(){const e=this.currentWave+1;this.startWave(e),this.waveTimer&&this.waveTimer.destroy(),this.waveTimer=this.scene.time.addEvent({delay:2e4,callback:()=>this.triggerNextWave(),loop:!1})}setupEventListeners(){var e;(null==(e=this.gameManager)?void 0:e.events)&&this.gameManager.events.on("difficultyUpdated",this.updateDifficulty,this)}spawnMob(e,t,s){const n=Uz[e];if(!n)return console.warn(`Unknown mob type: ${e}`),null;try{const a=new n.class(this.scene,t,s);return this.applyStats(a,n),this.setupMobProperties(a,e),this.scene.add.existing(a),this.mobGroup.add(a),this.trackMob(a,e),this.stats.totalSpawned++,a}catch(a){return console.error(`Error spawning ${e}:`,a),null}}applyStats(e,t){var s,n;const a=(null==(n=null==(s=this.gameManager)?void 0:s.gameProgress)?void 0:n.currentDifficulty)||1,i=.1*this.currentWave,r=1+.2*(a-1)+i,o=1+.1*(a-1)+.5*i,l=1+.05*(a-1);e.maxHealth=Math.floor(t.baseHealth*r),e.health=e.maxHealth,e.damage=Math.floor(t.baseDamage*o),e.speed=Math.floor(t.baseSpeed*l),e.expValue=Math.floor(t.expValue*(1+i)),e.goldValue=Math.floor(t.goldValue*(1+i)),e.expDropChance=t.expDropChance,e.goldDropChance=t.goldDropChance}setupMobProperties(e,t){var s;e.mobType=t,e.spawnTime=Date.now(),e.isWaveMob=this.waveActive,this.addSpecialAbilities(e,t);const n=null==(s=e.die)?void 0:s.bind(e);e.die=()=>{this.handleMobDeath(e),n&&n()},e.spawnRewards=()=>{this.spawnMobRewards(e)}}addSpecialAbilities(e,t){switch(t){case"policeDroid":this.addProjectileAttack(e,{range:200,cooldown:2e3,projectileSpeed:150,projectileColor:16711680,projectileSize:3});break;case"zombieBig":this.addDeathExplosion(e,{explosionRange:80,explosionDamage:15,explosionColor:16729156});break;case"assassinArcher":this.addProjectileAttack(e,{range:250,cooldown:2500,projectileSpeed:120,projectileColor:16711680,projectileSize:2})}}addProjectileAttack(e,t){e.projectileConfig=t,e.lastProjectileTime=0,e.hasProjectileAttack=!0}updateMobAbilities(e,t){this.getAllActiveMobs().forEach((t=>{t.hasProjectileAttack&&this.updateProjectileAttack(t,e)}))}updateProjectileAttack(e,t){if(!this.player||e.isDead||!e.projectileConfig)return;const s=Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y),n=e.projectileConfig;s<=n.range&&t-e.lastProjectileTime>n.cooldown&&(this.fireProjectile(e,n),e.lastProjectileTime=t)}fireProjectile(e,t){if(!this.player)return;const s=this.scene.add.circle(e.x,e.y,t.projectileSize,t.projectileColor);s.setStrokeStyle(1,0),this.scene.physics.add.existing(s),s.body.setCircle(t.projectileSize),s.setDepth(15);const n=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y);s.body.setVelocity(Math.cos(n)*t.projectileSpeed,Math.sin(n)*t.projectileSpeed);const a=this.scene.physics.add.overlap(this.player,s,(()=>{this.player.takeDamage&&this.player.takeDamage(e.damage),this.createHitEffect(s.x,s.y),a.destroy(),s.destroy()}));this.scene.time.delayedCall(3e3,(()=>{s&&s.active&&(a.destroy(),s.destroy())})),this.createMuzzleFlash(e)}createMuzzleFlash(e){const t=this.scene.add.circle(e.x,e.y,12,16776960,.8);t.setDepth(20),this.scene.tweens.add({targets:t,scale:{from:1,to:2},alpha:{from:.8,to:0},duration:200,onComplete:()=>t.destroy()})}createHitEffect(e,t){const s=this.scene.add.circle(e,t,8,16711680,.7);s.setDepth(25),this.scene.tweens.add({targets:s,scale:{from:.5,to:1.5},alpha:{from:.7,to:0},duration:300,onComplete:()=>s.destroy()})}addDeathExplosion(e,t){var s;e.explosionConfig=t;const n=null==(s=e.die)?void 0:s.bind(e);e.die=()=>{this.createDeathExplosion(e,t),n&&n()}}createDeathExplosion(e,t){if(!this.player)return;const s=this.scene.add.circle(e.x,e.y,t.explosionRange,t.explosionColor,.6);if(s.setDepth(30),this.scene.tweens.add({targets:s,scale:{from:0,to:1.5},alpha:{from:.6,to:0},duration:500,onComplete:()=>s.destroy()}),Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)<=t.explosionRange&&(this.player.takeDamage&&this.player.takeDamage(t.explosionDamage),this.player.body)){const t=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y),s=150;this.player.body.velocity.x+=Math.cos(t)*s,this.player.body.velocity.y+=Math.sin(t)*s}this.getAllActiveMobs().forEach((s=>{s===e||s.isDead||Phaser.Math.Distance.Between(e.x,e.y,s.x,s.y)<=t.explosionRange&&s.takeDamage&&s.takeDamage(Math.floor(.5*t.explosionDamage))})),this.scene.cameras.main.shake(200,.005)}spawnMobRewards(e){try{this.trySpawnExperienceOrb(e),this.trySpawnGoldOrb(e)}catch(t){console.error("Error spawning mob rewards:",t)}}trySpawnExperienceOrb(e){const t=Uz[e.mobType];if(!t)return;let s=t.expDropChance||.8;if(e.isSpecialWave&&(s*=1.2),"boss"===e.specialWaveType&&(s=1),"elite"===e.specialWaveType&&(s=Math.min(1,1.1*s)),Math.random()<s){let t=1;e.expValue&&(t=e.expValue>=40?5:e.expValue>=25?3:e.expValue>=15?2:1),Math.random()<.05&&(t*=3),"boss"===e.specialWaveType&&(t*=5),this.scene.spawnExperienceOrb&&this.scene.spawnExperienceOrb(e.x,e.y,t)}}trySpawnGoldOrb(e){const t=Uz[e.mobType];if(!t)return;let s=t.goldDropChance||.4;if(e.isSpecialWave&&(s*=1.3),"boss"===e.specialWaveType&&(s=1),"elite"===e.specialWaveType&&(s=Math.min(1,1.2*s)),Math.random()<s){let s=e.goldValue||t.goldValue;Math.random()<.08&&(s*=2),"boss"===e.specialWaveType&&(s*=3),this.scene.spawnGoldOrb&&this.scene.spawnGoldOrb(e.x,e.y,s)}}trackMob(e,t){const s=`mob_${Date.now()}_${Math.random()}`;e.trackingId=s,this.activeMobs.set(s,{mob:e,type:t,spawnTime:Date.now(),isAlive:!0})}spawnRandomMob(){if(!this.player||this.getActiveMobCount()>=this.maxMobs)return;const e=this.selectMobType(),t=this.getSpawnPosition();return this.spawnMob(e,t.x,t.y)}selectMobType(){var e,t;const s=Math.max((null==(t=null==(e=this.gameManager)?void 0:e.gameProgress)?void 0:t.currentDifficulty)||1,this.currentWave),n=Object.keys(Uz).filter((e=>Uz[e].minWave<=s)),a=[];return n.forEach((e=>{const t=Uz[e].spawnWeight;for(let s=0;s<t;s++)a.push(e)})),Phaser.Utils.Array.GetRandom(a)}getSpawnPosition(){if(!this.player)return{x:0,y:0};if(this.isWalkingAreaInitialized)return this.getWalkableSpawnPosition();const e=Math.random()*Math.PI*2,t=Phaser.Math.Between(300,500);return{x:this.player.x+Math.cos(e)*t,y:this.player.y+Math.sin(e)*t}}setWalkingAreaFromTilemap(e){e&&e.layer?(this.walkingAreaLayer=e,this.mapWidth=e.layer.width,this.mapHeight=e.layer.height,this.tileSize=e.layer.tileWidth||32,this.isWalkingAreaInitialized=!0):console.warn("Invalid tilemap layer provided")}initializeWalkingArea(e,t=80,s=80,n=32){if(e&&Array.isArray(e)){this.mapWidth=t,this.mapHeight=s,this.tileSize=n,this.walkingAreaData=[];for(let n=0;n<s;n++){this.walkingAreaData[n]=[];for(let s=0;s<t;s++){const a=n*t+s;this.walkingAreaData[n][s]=e[a]||0}}this.cacheWalkablePositions(),this.isWalkingAreaInitialized=!0}}cacheWalkablePositions(){if(this.walkablePositions=[],this.walkingAreaData)for(let e=0;e<this.mapHeight;e++)for(let t=0;t<this.mapWidth;t++)if(this.walkingAreaData[e]&&0!==this.walkingAreaData[e][t]){const s=t*this.tileSize+this.tileSize/2,n=e*this.tileSize+this.tileSize/2;this.walkablePositions.push({tileX:t,tileY:e,worldX:s,worldY:n,tileValue:this.walkingAreaData[e][t]})}}isPositionWalkable(e,t){if(!this.isWalkingAreaInitialized)return!0;const s=Math.floor(e/this.tileSize),n=Math.floor(t/this.tileSize);return this.isTileWalkable(s,n)}isTileWalkable(e,t){return!this.walkingAreaData||!(e<0||e>=this.mapWidth||t<0||t>=this.mapHeight)&&this.walkingAreaData[t]&&0!==this.walkingAreaData[t][e]}getRandomWalkablePosition(){if(0===this.walkablePositions.length)return null;const e=Math.floor(Math.random()*this.walkablePositions.length);return{...this.walkablePositions[e]}}getRandomWalkablePositionNear(e,t,s=100,n=300,a=20){if(!this.isWalkingAreaInitialized){const a=Math.random()*Math.PI*2,i=Phaser.Math.Between(s,n);return{worldX:e+Math.cos(a)*i,worldY:t+Math.sin(a)*i}}for(let r=0;r<a;r++){const a=Math.random()*Math.PI*2,i=Phaser.Math.Between(s,n),r=e+Math.cos(a)*i,o=t+Math.sin(a)*i;if(this.isPositionWalkable(r,o))return{worldX:r,worldY:o}}const i=this.getRandomWalkablePosition();return i?{worldX:i.worldX,worldY:i.worldY}:null}getNearestWalkablePosition(e,t,s=10){if(!this.isWalkingAreaInitialized)return{worldX:e,worldY:t};const n=Math.floor(e/this.tileSize),a=Math.floor(t/this.tileSize);if(this.isTileWalkable(n,a))return{worldX:n*this.tileSize+this.tileSize/2,worldY:a*this.tileSize+this.tileSize/2};for(let r=1;r<=s;r++)for(let e=-r;e<=r;e++)for(let t=-r;t<=r;t++){if(Math.abs(e)!==r&&Math.abs(t)!==r)continue;const s=n+e,i=a+t;if(this.isTileWalkable(s,i))return{worldX:s*this.tileSize+this.tileSize/2,worldY:i*this.tileSize+this.tileSize/2}}const i=this.getRandomWalkablePosition();return i?{worldX:i.worldX,worldY:i.worldY}:{worldX:e,worldY:t}}getWalkableSpawnPosition(){if(!this.player){const e=this.getRandomWalkablePosition();return e?{x:e.worldX,y:e.worldY}:{x:0,y:0}}const e=this.getRandomWalkablePositionNear(this.player.x,this.player.y,300,500);return e?{x:e.worldX,y:e.worldY}:{x:this.player.x+400,y:this.player.y}}teleportToWalkablePosition(e,t=10){if(!e||!this.isWalkingAreaInitialized)return!1;const s=this.getNearestWalkablePosition(e.x,e.y,t);return!!s&&(e.x=s.worldX,e.y=s.worldY,e.body&&(e.body.x=s.worldX-e.body.width/2,e.body.y=s.worldY-e.body.height/2),!0)}teleportMobToWalkable(e){const t=Math.floor(e.x/this.tileSize),s=Math.floor(e.y/this.tileSize);for(let n=1;n<=10;n++)for(let a=-n;a<=n;a++)for(let i=-n;i<=n;i++){if(Math.abs(a)!==n&&Math.abs(i)!==n)continue;const r=t+a,o=s+i,l=this.walkingAreaLayer.getTileAt(r,o);if(l&&0!==l.index){const t=r*this.tileSize+this.tileSize/2,s=o*this.tileSize+this.tileSize/2;if(this.player&&Phaser.Math.Distance.Between(t,s,this.player.x,this.player.y)<200)continue;return e.x=t,e.y=s,void(e.body&&(e.body.x=e.x-e.body.width/2,e.body.y=e.y-e.body.height/2))}}}startWave(e){this.currentWave=e,this.waveActive=!0,this.waveMobs=[],PC.emit("wave-notification",{wave:e});const t=this.calculateWaveSize(e),s=this.getSpecialWaveType(e);s?this.startSpecialWave(e,s):this.startNormalWave(e,t)}startNormalWave(e,t){for(let s=0;s<t;s++)this.scene.time.delayedCall(100*s,(()=>{const e=this.selectMobType(),t=this.getSpawnPosition(),s=this.spawnMob(e,t.x,t.y);s&&this.waveMobs.push(s)}))}startSpecialWave(e,t){let s,n;switch(t){case"swarm":s=Math.min(15+3*e,30),n=["zombie"];break;case"elite":s=Math.floor(.4*this.calculateWaveSize(e)),n=["assassinTank","assassinArcher"];break;case"mixed":s=Math.floor(1.3*this.calculateWaveSize(e)),n=["zombie","zombieBig","policeDroid","assassin","bigDude","wreacker","choppor","crawler","bomber","saber","guardian","charger"];break;case"boss":s=Math.max(1,Math.floor(e/10)),n=["assassinTank"];break;default:return void this.startNormalWave(e,this.calculateWaveSize(e))}for(let a=0;a<s;a++)this.scene.time.delayedCall(100*a,(()=>{const e=Phaser.Utils.Array.GetRandom(n),s=this.getSpawnPosition(),a=this.spawnMob(e,s.x,s.y);a&&("elite"!==t&&"boss"!==t||(a.maxHealth*=2,a.health=a.maxHealth,a.damage*=1.5,a.expValue*=2,a.goldValue*=2,a.expDropChance=Math.min(1,1.2*a.expDropChance),a.goldDropChance=Math.min(1,1.3*a.goldDropChance)),"boss"===t&&(a.maxHealth*=3,a.health=a.maxHealth,a.damage*=2,a.expValue*=5,a.goldValue*=5,a.expDropChance=1,a.goldDropChance=1,a.setTint(16711680)),a.isSpecialWave=!0,a.specialWaveType=t,this.waveMobs.push(a),this.createSpawnPortalEffect(s.x,s.y))}))}getSpecialWaveType(e){return e%10==0?"boss":e%7==0?"elite":e%5==0?"swarm":e%8==0?"mixed":null}createSpawnPortalEffect(e,t){const s=this.scene.add.circle(e,t,20,8913151,.8);this.scene.tweens.add({targets:s,scale:{from:0,to:2},alpha:{from:.8,to:0},duration:500,onComplete:()=>s.destroy()})}calculateWaveSize(e){var t,s;const n=Math.floor(1.2*e),a=Math.floor(1.5*((null==(s=null==(t=this.gameManager)?void 0:t.gameProgress)?void 0:s.currentDifficulty)||1));return Math.min(25,8+n+a)}cleanupMobHealthBar(e){try{const t=e.x,s=e.y,n=[];this.scene.children.list.forEach((e=>{e&&e.x&&e.y&&Phaser.Math.Distance.Between(e.x,e.y,t,s-20)<40&&("Rectangle"===e.type&&e.displayWidth<=50&&e.displayHeight<=8||"Container"===e.type&&e.getBounds&&e.getBounds().width<=50&&e.getBounds().height<=15||"Graphics"===e.type&&e.displayWidth<=50&&e.displayHeight<=10)&&n.push(e)})),n.forEach((e=>{e&&e.active&&e.destroy&&e.destroy()})),["healthBar","healthBarBg","healthBarContainer","healthBarFill","healthBarBackground"].forEach((t=>{e[t]&&e[t].destroy&&(e[t].destroy(),e[t]=null)}))}catch(t){console.error("Error cleaning up mob health bar:",t)}}checkWaveCompletion(){this.waveActive&&0===this.waveMobs.filter((e=>e&&e.active&&!e.isDead)).length&&this.completeWave()}completeWave(){this.waveActive=!1;const e=this.currentWave,t=this.waveMobs.length>0?this.waveMobs[0].specialWaveType:null;this.waveMobs=[];let s=100*e,n=50*e;if(t)switch(t){case"swarm":s*=1.5,n*=1.5;break;case"elite":s*=2,n*=2;break;case"mixed":s*=1.8,n*=1.8;break;case"boss":s*=3,n*=3}this.gameManager&&(this.gameManager.addExperience(s),this.gameManager.addGold(n))}showWaveCompletionMessage(e,t,s,n){const a=this.scene.cameras.main.centerX,i=this.scene.cameras.main.centerY;let r=`WAVE ${e} COMPLETE!`;t&&(r+=`\n${t.toUpperCase()} DEFEATED!`);const o=this.scene.add.text(a,i-30,r,{fontFamily:"Arial",fontSize:"28px",color:"#00ff00",stroke:"#000000",strokeThickness:3,align:"center",fontStyle:"bold"});o.setOrigin(.5),o.setScrollFactor(0),o.setDepth(1e3);const l=this.scene.add.text(a,i+20,`BONUS: +${s} XP, +${n} Gold`,{fontFamily:"Arial",fontSize:"20px",color:"#ffff00",stroke:"#000000",strokeThickness:2,align:"center"});l.setOrigin(.5),l.setScrollFactor(0),l.setDepth(1e3),this.scene.tweens.add({targets:[o,l],scale:{from:0,to:1},duration:600,ease:"Back.easeOut",onComplete:()=>{this.scene.time.delayedCall(3e3,(()=>{this.scene.tweens.add({targets:[o,l],alpha:0,duration:1e3,onComplete:()=>{o.destroy(),l.destroy()}})}))}});const c=this.scene.add.rectangle(0,0,2*this.scene.cameras.main.width,2*this.scene.cameras.main.height,65280,.2);c.setScrollFactor(0),c.setDepth(999),this.scene.tweens.add({targets:c,alpha:0,duration:400,onComplete:()=>c.destroy()})}handleMobDeath(e){if(!e.trackingId)return;if(!this.activeMobs.get(e.trackingId))return;this.cleanupMobHealthBar(e),this.stats.totalKilled++;const t=this.stats.killsByType.get(e.mobType)||0;this.stats.killsByType.set(e.mobType,t+1),this.gameManager&&this.gameManager.addEnemyKill(),this.spawnMobRewards(e),e.isWaveMob&&this.checkWaveCompletion(),this.activeMobs.delete(e.trackingId)}handleMobCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=20,a=Math.cos(s)*n,i=Math.sin(s)*n;t.body&&(t.body.velocity.x+=a,t.body.velocity.y+=i),e.body&&(e.body.velocity.x-=a,e.body.velocity.y-=i)}}updateDifficulty(e){this.maxMobs=Math.min(60,30+3*e),this.spawnDelay=Math.max(1e3,3e3-200*e),this.spawnTimer&&(this.spawnTimer.delay=this.spawnDelay)}getActiveMobCount(){return Array.from(this.activeMobs.values()).filter((e=>e.isAlive)).length}getAllActiveMobs(){return Array.from(this.activeMobs.values()).filter((e=>e.isAlive)).map((e=>e.mob))}getMobsByType(e){return Array.from(this.activeMobs.values()).filter((t=>t.type===e&&t.isAlive)).map((e=>e.mob))}killAllMobs(){this.getAllActiveMobs().forEach((e=>{e.takeDamage&&e.takeDamage(9999)}))}getWaveProgress(){return this.waveActive?{completed:!1,remaining:this.waveMobs.filter((e=>e.active&&!e.isDead)).length,total:this.waveMobs.length,waveNumber:this.currentWave,nextWaveTime:0}:{completed:!0,remaining:0,total:0,waveNumber:this.currentWave,nextWaveTime:this.waveTimer?Math.ceil(this.waveTimer.getRemaining()/1e3):0}}getCurrentWave(){return this.currentWave}isWaveActive(){return this.waveActive}getTimeToNextWave(){return this.waveTimer?Math.ceil(this.waveTimer.getRemaining()/1e3):0}checkAndTeleportDistantMobs(){if(!this.player||!this.isWalkingAreaInitialized)return;let e=0;const t=this.teleportConfig;this.getAllActiveMobs().forEach((s=>{e>=t.maxTeleportsPerCheck||Phaser.Math.Distance.Between(s.x,s.y,this.player.x,this.player.y)>t.maxDistanceFromPlayer&&this.teleportMobNearPlayer(s)&&(e++,this.stats.totalTeleported++,this.createTeleportEffect(s.x,s.y,s))}))}teleportMobNearPlayer(e){if(!this.player||!e||e.isDead)return!1;const t=this.teleportConfig;let s=this.getRandomWalkablePositionNear(this.player.x,this.player.y,t.teleportRange.min,t.teleportRange.max,30);if(!s){const e=this.getRandomWalkablePosition();if(!e)return!1;s={worldX:e.worldX,worldY:e.worldY}}return e.x=s.worldX,e.y=s.worldY,e.body&&(e.body.x=s.worldX-e.body.width/2,e.body.y=s.worldY-e.body.height/2,e.body.velocity.x=0,e.body.velocity.y=0),!0}createTeleportEffect(e,t,s){var n;const a=this.teleportConfig.effects;if((null==(n=this.gameManager)?void 0:n.debugMode)&&!a.showEffectsInDebug)return;const i=this.scene.add.circle(e,t,a.effectRadius,a.teleportOutColor,.7);i.setDepth(a.effectDepth),this.scene.tweens.add({targets:i,scale:{from:.5,to:2},alpha:{from:.7,to:0},duration:a.effectDuration,onComplete:()=>i.destroy()}),this.scene.time.delayedCall(200,(()=>{const e=this.scene.add.circle(s.x,s.y,a.effectRadius,a.teleportInColor,.8);if(e.setDepth(a.effectDepth),this.scene.tweens.add({targets:e,scale:{from:2,to:.5},alpha:{from:.8,to:0},duration:a.effectDuration,onComplete:()=>e.destroy()}),s&&s.active&&!s.isDead){const e=s.tintTopLeft;s.setTint(a.teleportInColor),this.scene.time.delayedCall(a.mobFlashDuration,(()=>{s&&s.active&&!s.isDead&&(e?s.setTint(e):s.clearTint())}))}}))}getStatistics(){return{totalSpawned:this.stats.totalSpawned,totalKilled:this.stats.totalKilled,totalTeleported:this.stats.totalTeleported,activeCount:this.getActiveMobCount(),killsByType:Object.fromEntries(this.stats.killsByType),currentWave:this.currentWave,waveActive:this.waveActive,waveProgress:this.getWaveProgress()}}update(e,t){const s=[];e-this.lastTeleportCheck>this.teleportConfig.teleportCheckInterval&&(this.checkAndTeleportDistantMobs(),this.lastTeleportCheck=e),this.activeMobs.forEach(((e,t)=>{if(!e.mob.active||e.mob.isDead)s.push(t);else if(this.isWalkingAreaInitialized&&this.walkingAreaLayer){const t=Math.floor(e.mob.x/this.tileSize),s=Math.floor(e.mob.y/this.tileSize),n=this.walkingAreaLayer.getTileAt(t,s);n&&0!==n.index||this.teleportMobToWalkable(e.mob)}})),s.forEach((e=>this.activeMobs.delete(e))),this.updateMobAbilities(e,t)}shutdown(){this.spawnTimer&&this.spawnTimer.destroy(),this.waveTimer&&this.waveTimer.destroy(),this.getAllActiveMobs().forEach((e=>{this.cleanupMobHealthBar(e),e.destroy&&e.destroy()})),this.activeMobs.clear(),this.waveMobs=[],this.mobGroup&&this.mobGroup.clear(!0,!0)}}class Hz extends Phaser.GameObjects.Image{constructor(e,t,s,n,a){const i=n||"Exp",r=e.textures.exists(i);super(e,t??8,s??8,r?i:"__WHITE",a),r||this.setTint(65535),e.physics.add.existing(this,!1),this.body.setCircle(8),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.expValue=1,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}setExpValue(e){this.expValue=e;const t=.8+Math.min(e,10)/10*.5;return this.setScale(t),e>=10?this.setTint(33023):e>=5?this.setTint(65450):e>=2?this.setTint(43775):this.setTint(65535),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,a=Math.sqrt(t*t+n*n),i=t/a,r=n/a,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=i*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in ExpOrb update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.expValue;this.isBeingCollected=!0;try{this.scene.playerLevelSystem?this.scene.playerLevelSystem.addExperience(this.expValue):this.scene.gameManager?this.scene.gameManager.addExperience(this.expValue):console.warn("No experience system found to add experience to"),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting experience orb:",e),this.cleanupAndDestroy()}return this.expValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#FFD700",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}class zz extends Phaser.GameObjects.Image{constructor(e,t,s,n,a){super(e,t??16,s??16,n||"Exp",a),e.physics.add.existing(this,!1),this.body.setCircle(10),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.goldValue=1,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}setGoldValue(e){this.goldValue=e;const t=.8+Math.min(e,10)/10*.5;return this.setScale(t),e>=10?this.setTint(16747520):e>=5?this.setTint(16766720):e>=2?this.setTint(16776960):this.setTint(16775885),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,a=Math.sqrt(t*t+n*n),i=t/a,r=n/a,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=i*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in GoldPrefab update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.goldValue;this.isBeingCollected=!0;try{this.scene.gameManager?this.scene.gameManager.addGold(this.goldValue):console.warn("No game manager found to add gold to"),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting gold:",e),this.cleanupAndDestroy()}return this.goldValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#FFD700",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}class Vz{constructor(e){this.scene=e,this.gameManager=QC.get(),this.player=null,this.mobManager=new Gz(e),this.expOrbs=null,this.goldOrbs=null,this.enemies=null,this.orbSpawnTimer=null,this.goldSpawnTimer=null,this.difficultyTimer=null}initialize(e){this.player=e,this.mobManager.initialize(this.gameManager,e),this.expOrbs=this.scene.add.group(),this.goldOrbs=this.scene.add.group(),this.enemies=this.mobManager.mobGroup,this.scene.enemies=this.enemies,this.createTextures(),this.setupCollisions(),this.setupTimers(),this.scene.spawnExperienceOrb=(e,t,s)=>this.spawnExperienceOrb(e,t,s),this.scene.spawnGoldOrb=(e,t,s)=>this.spawnGoldOrb(e,t,s)}createTextures(){if(["zombierun","Zombie2RunAni","Police run","Dagger Bandit-Run","assassinTank","assassinArcher"].forEach((e=>{this.scene.textures.exists(e)||this.createMobTexture(e)})),!this.scene.textures.exists("Exp")){const e=this.scene.add.graphics();e.fillGradientStyle(65535,65535,35071,35071,1),e.fillCircle(8,8,7),e.fillStyle(8978431,.6),e.fillCircle(8,8,5),e.fillStyle(16777215,.8),e.fillCircle(8,8,2),e.lineStyle(1,16777215,1),e.strokeCircle(8,8,7),e.generateTexture("Exp",16,16),e.destroy()}if(!this.scene.textures.exists("Gold")){const e=this.scene.add.graphics();e.fillGradientStyle(16766720,16766720,16753920,16753920,1),e.fillCircle(10,10,9),e.fillStyle(16777096,.7),e.fillCircle(10,10,6),e.fillStyle(16777215,.9),e.fillCircle(10,10,3),e.lineStyle(2,16770396,1),e.strokeCircle(10,10,9),e.lineStyle(1,16774799,.8),e.strokeCircle(10,10,10),e.generateTexture("Gold",20,20),e.destroy()}if(!this.scene.textures.exists("AOE_Fire_Ball_Projectile_VFX_V01")){const e=this.scene.add.graphics();e.fillStyle(16729088,1),e.fillCircle(16,16,16),e.generateTexture("AOE_Fire_Ball_Projectile_VFX_V01",32,32),e.destroy()}if(!this.scene.textures.exists("AOE_Fire_Blast_Attack_VFX_V01")){const e=this.scene.add.graphics();e.fillStyle(16737792,.8),e.fillCircle(24,24,24),e.generateTexture("AOE_Fire_Blast_Attack_VFX_V01",48,48),e.destroy()}if(!this.scene.textures.exists("AOE_Ice_Shard_Projectile_VFX_V01")){const e=this.scene.add.graphics();e.fillStyle(43775,1),e.fillCircle(16,16,12),e.generateTexture("AOE_Ice_Shard_Projectile_VFX_V01",32,32),e.destroy()}}createMobTexture(e){const t=this.scene.add.graphics();let s=3368499;e.includes("Police")&&(s=3355494),(e.includes("Dagger")||e.includes("assassin"))&&(s=6697779),e.includes("Tank")&&(s=4473924),e.includes("Archer")&&(s=6702131),e.includes("Zombie2")&&(s=5583701),t.fillStyle(s,1),t.fillRect(8,8,16,16),t.fillStyle(s,1),t.fillRect(4,12,4,8),t.fillRect(24,12,4,8),t.generateTexture(e,32,32),t.destroy()}setupCollisions(){this.player&&(this.scene.physics.add.overlap(this.player,this.enemies,((e,t)=>{t.attackPlayer&&t.attackPlayer(e)})),this.scene.physics.add.overlap(this.player,this.goldOrbs,((e,t)=>{this.collectGoldOrb(t)})))}setupTimers(){this.orbSpawnTimer=this.scene.time.addEvent({delay:1e3,callback:()=>this.spawnRandomExperienceOrb(),loop:!0}),this.goldSpawnTimer=this.scene.time.addEvent({delay:2e3,callback:()=>this.spawnRandomGoldOrb(),loop:!0}),this.difficultyTimer=this.scene.time.addEvent({delay:1e3,callback:()=>{this.gameManager.updateDifficulty(1e3)},loop:!0}),this.scene.enemySpawnTimer=this.mobManager.spawnTimer,this.scene.orbSpawnTimer=this.orbSpawnTimer,this.scene.goldSpawnTimer=this.goldSpawnTimer,this.scene.difficultyTimer=this.difficultyTimer}spawnEnemy(e,t,s="zombie"){return this.mobManager.spawnMob(s,e,t)}spawnRandomEnemy(){return this.mobManager.spawnRandomMob()}spawnExperienceOrb(e,t,s=1){try{if(Hz){const n=new Hz(this.scene,e,t);return this.scene.add.existing(n),this.expOrbs.add(n),n.setExpValue(s),n.setDepth(12),n}}catch(n){}return this.createFallbackOrb(e,t,s)}spawnGoldOrb(e,t,s=1){try{if(zz){const n=new zz(this.scene,e,t);return this.scene.add.existing(n),this.goldOrbs.add(n),n.setGoldValue(s),n.setDepth(12),n}}catch(n){}return this.createFallbackGoldOrb(e,t,s)}createFallbackOrb(e,t,s){const n=this.scene.add.circle(e,t,6,65535);return n.expValue=s||5,this.scene.physics.add.existing(n),n.body.setCircle(6),n.setDepth(12),this.expOrbs.add(n),this.scene.physics.add.overlap(this.player,n,((e,t)=>{this.collectExperienceOrb(t)})),this.setupOrbMovement(n),this.scene.time.delayedCall(3e4,(()=>{n&&n.active&&n.destroy()})),n}createFallbackGoldOrb(e,t,s){const n=this.scene.add.circle(e,t,8,16766720);return n.goldValue=s||1,this.scene.physics.add.existing(n),n.body.setCircle(8),n.setDepth(12),this.goldOrbs.add(n),this.scene.physics.add.overlap(this.player,n,((e,t)=>{this.collectGoldOrb(t)})),this.setupGoldOrbMovement(n),this.scene.time.delayedCall(45e3,(()=>{n&&n.active&&n.destroy()})),n}setupOrbMovement(e){const t=this.scene.time.addEvent({delay:50,callback:()=>{if(this.player&&!this.player.isDead&&e.body&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)<(this.player.pickupRange||50)){const t=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y),s=200;e.body.setVelocity(Math.cos(t)*s,Math.sin(t)*s)}},repeat:-1});e.on("destroy",(()=>{t.destroy()}))}setupGoldOrbMovement(e){const t=this.scene.time.addEvent({delay:50,callback:()=>{if(this.player&&!this.player.isDead&&e.body&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)<(this.player.pickupRange||50)+20){const t=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y),s=180;e.body.setVelocity(Math.cos(t)*s,Math.sin(t)*s)}},repeat:-1});e.on("destroy",(()=>{t.destroy()}))}spawnRandomExperienceOrb(){if(!this.player)return;const e=Math.random()*Math.PI*2,t=Phaser.Math.Between(200,800),s=this.player.x+Math.cos(e)*t,n=this.player.y+Math.sin(e)*t;let a=1;const i=Math.random();return i>.95?a=10:i>.8?a=5:i>.5&&(a=2),this.spawnExperienceOrb(s,n,a)}spawnRandomGoldOrb(){if(!this.player)return;const e=Math.random()*Math.PI*2,t=Phaser.Math.Between(250,600),s=this.player.x+Math.cos(e)*t,n=this.player.y+Math.sin(e)*t;let a=1;const i=Math.random();return i>.98?a=20:i>.9?a=10:i>.7?a=5:i>.4&&(a=2),this.spawnGoldOrb(s,n,a)}collectExperienceOrb(e){try{const t=e.expValue||5;this.gameManager&&this.gameManager.addExperience(t);const s=this.scene.add.text(e.x,e.y-20,`+${t} XP`,{fontFamily:"Arial",fontSize:"14px",color:"#88ff88",stroke:"#000000",strokeThickness:1});s.setOrigin(.5),this.scene.tweens.add({targets:s,y:s.y-30,alpha:0,duration:1e3,onComplete:()=>s.destroy()}),e.destroy()}catch(t){console.error("Error collecting experience orb:",t)}}collectGoldOrb(e){try{const t=e.goldValue||1;this.gameManager&&this.gameManager.addGold(t);const s=this.scene.add.text(e.x,e.y-20,`+${t} Gold`,{fontFamily:"Arial",fontSize:"14px",color:"#FFD700",stroke:"#000000",strokeThickness:1,fontWeight:"bold"});s.setOrigin(.5),this.scene.tweens.add({targets:s,y:s.y-30,alpha:0,duration:1200,onComplete:()=>s.destroy()}),e.destroy()}catch(t){console.error("Error collecting gold orb:",t)}}spawnWave(){const e=(this.scene.currentWave||0)+1;this.scene.currentWave=e,this.mobManager.startWave(e)}checkEnemyBounds(){this.player&&this.mobManager.getAllActiveMobs().forEach((e=>{e.active&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)>600&&this.teleportMobToPlayer(e)}))}checkOrbBounds(){this.expOrbs&&this.player&&(this.expOrbs.getChildren().forEach((e=>{e.active&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)>2e3&&e.destroy()})),this.goldOrbs&&this.goldOrbs.getChildren().forEach((e=>{e.active&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)>2e3&&e.destroy()})))}teleportMobToPlayer(e){const t=Math.random()*Math.PI*2,s=Phaser.Math.Between(300,500);e.x=this.player.x+Math.cos(t)*s,e.y=this.player.y+Math.sin(t)*s,e.body&&e.body.velocity.setTo(0,0);const n=this.scene.add.circle(e.x,e.y,30,3407667,.7);n.setDepth(20),this.scene.tweens.add({targets:n,scale:0,alpha:0,duration:500,onComplete:()=>n.destroy()})}getEnemyCount(){return this.mobManager.getActiveMobCount()}getEnemiesByType(e){return this.mobManager.getMobsByType(e)}getAllEnemies(){return this.mobManager.getAllActiveMobs()}getStatistics(){return this.mobManager.getStatistics()}update(e,t){this.mobManager.update(e,t),this.checkEnemyBounds(),this.checkOrbBounds(),this.expOrbs&&this.expOrbs.getChildren().forEach((e=>{e.depth<10&&e.setDepth(12)})),this.goldOrbs&&this.goldOrbs.getChildren().forEach((e=>{e.depth<10&&e.setDepth(12)}))}shutdown(){[this.orbSpawnTimer,this.goldSpawnTimer,this.difficultyTimer].forEach((e=>{e&&e.remove()})),this.mobManager.shutdown(),this.expOrbs&&this.expOrbs.clear(!0,!0),this.goldOrbs&&this.goldOrbs.clear(!0,!0)}}class Wz extends Phaser.GameObjects.Container{constructor(e,t,s,n,a,i,r){super(e,t??0,s??0),this.skillKey=n,this.skillData=a,this.currentLevel=i,this.newLevel=r,this.isNewSkill=0===i,this.createCard(),this.setupInteraction()}createCard(){const e=this.skillData.cardBackground||"card_basic_stats";this.scene.textures.exists(e)?(this.cardBackground=this.scene.add.image(0,0,e),this.cardBackground.setScale(1.4),this.add(this.cardBackground)):(console.warn(`SkillCard: Background texture ${e} not found, using fallback`),this.createFallbackBackground()),this.cardBackground&&(this.glowBackground=this.scene.add.image(0,0,e),this.glowBackground.setScale(1.1),this.glowBackground.setAlpha(0),this.glowBackground.setTint(16777215),this.glowBackground.setBlendMode(Phaser.BlendModes.ADD),this.addAt(this.glowBackground,0)),this.addSkillName(),this.addRomanNumeral(),this.addSkillIcon(),this.addSkillDescription(),this.setSize(240,320)}createFallbackBackground(){const e={basic:16766720,stat:8947848,fire:16729156,ice:4474111,lightning:16746751,holy:16777096,marksman:8947848}[this.skillData.type]||6710886;this.cardBackground=this.scene.add.rectangle(0,0,200,280,e,.8),this.cardBackground.setStrokeStyle(4,16777215,1),this.add(this.cardBackground)}addRomanNumeral(){if(this.newLevel>0&&this.newLevel<=10){const e=`Roman_${this.newLevel}`;if(this.scene.textures.exists(e))this.romanNumeral=this.scene.add.image(-53,-75,e),this.romanNumeral.setScale(.8),this.romanNumeral.setTint(16766720),this.add(this.romanNumeral);else{const e=["","I","II","III","IV","V","VI","VII","VIII","IX","X"];this.romanNumeral=this.scene.add.text(-90,-130,e[this.newLevel],{fontFamily:"Arial",fontSize:"24px",color:"#ffd700",stroke:"#000000",strokeThickness:3}).setOrigin(.5),this.add(this.romanNumeral)}}}addSkillIcon(){const e=this.skillData.icon,t=this.skillData.iconNormal;let s=!1;e&&this.scene.textures.exists(e)?(this.skillIcon=this.scene.add.image(0,-20,e),this.skillIcon.setScale(1),this.add(this.skillIcon),s=!0):t&&this.scene.textures.exists(t)&&(this.skillIcon=this.scene.add.image(0,-20,t),this.skillIcon.setScale(1),this.add(this.skillIcon),s=!0),s||(console.warn(`SkillCard: No icon found for ${this.skillKey}, creating fallback`),this.createFallbackIcon())}createFallbackIcon(){const e={basic:16766720,stat:8947848,fire:16729156,ice:4474111,lightning:16746751,holy:16777096,marksman:8947848}[this.skillData.type]||6710886;this.skillIcon=this.scene.add.circle(0,-20,30,e),this.skillIcon.setStrokeStyle(3,16777215),this.add(this.skillIcon);const t=this.scene.add.text(0,-20,this.skillKey.charAt(0).toUpperCase(),{fontFamily:"Arial",fontSize:"24px",color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5);this.add(t)}addSkillName(){const e=(this.isNewSkill,"#ffff00"),t=(this.isNewSkill,"");this.skillName=this.scene.add.text(10,-83,t+this.skillData.name,{fontSize:"14px",fontFamily:"alagard",color:e,stroke:"#000000",strokeThickness:2,align:"left",wordWrap:{width:200}}).setOrigin(.5),this.add(this.skillName)}addSkillDescription(){this.description=this.scene.add.text(0,40,this.skillData.description,{fontFamily:"alagard",fontSize:"12px",color:"#ffffff",stroke:"#000000",strokeThickness:2,align:"center",wordWrap:{width:100}}).setOrigin(.5),this.add(this.description)}formatStatName(e){return{damage:"Damage",fireRate:"Fire Rate",range:"Range",chainCount:"Chain Count",duration:"Duration",health:"Health",damageMultiplier:"Damage",speedMultiplier:"Speed",rangeMultiplier:"Range"}[e]||e}formatStatValue(e,t){return e.includes("Multiplier")?`+${(100*t).toFixed(0)}%`:"fireRate"===e?`+${t.toFixed(1)}/s`:"duration"===e?`+${(t/1e3).toFixed(1)}s`:`+${Math.round(t)}`}setupInteraction(){this.setInteractive({useHandCursor:!0}),this.on("pointerover",this.onPointerOver,this),this.on("pointerout",this.onPointerOut,this),this.on("pointerdown",this.onPointerDown,this),this.cardBackground.setInteractive({useHandCursor:!0}),this.cardBackground.on("pointerdown",this.onPointerDown,this)}onPointerOver(){this.scene.tweens.add({targets:this,scaleX:.99,scaleY:.99,duration:100,ease:"Back.easeOut"}),this.scene.tweens.add({targets:this.glowBackground,alpha:.4,scaleX:1.05,scaleY:1.05,duration:100,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1.01,scaleY:1.01,duration:150,ease:"Power2"}),this.romanNumeral&&this.scene.tweens.add({targets:this.romanNumeral,scaleX:.9,scaleY:.9,duration:150,ease:"Power2"}),this.skillName&&this.scene.tweens.add({targets:this.skillName,scaleX:1.05,scaleY:1.05,duration:150,ease:"Power2"})}onPointerOut(){this.scene.tweens.add({targets:this,scaleX:.8,scaleY:.8,duration:150,ease:"Power2"}),this.scene.tweens.add({targets:this.glowBackground,alpha:0,scaleX:1.3,scaleY:1.3,duration:150,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1,scaleY:1,alpha:1,duration:150,ease:"Power2"}),this.romanNumeral&&this.scene.tweens.add({targets:this.romanNumeral,scaleX:.8,scaleY:.8,duration:150,ease:"Power2"}),this.skillName&&this.scene.tweens.add({targets:this.skillName,scaleX:1,scaleY:1,duration:150,ease:"Power2"})}onPointerDown(){if(this.scene.tweens.add({targets:this,scaleX:1.05,scaleY:1.05,duration:100,yoyo:!0,ease:"Back.easeOut",onComplete:()=>{this.createSelectionEffect(),this.onSelectCallback?this.onSelectCallback(this.skillKey):console.warn(`No selection callback set for skill card: ${this.skillKey}`)}}),this.scene.tweens.add({targets:this.glowBackground,alpha:.9,scaleX:1.5,scaleY:1.5,duration:100,yoyo:!0,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1.3,scaleY:1.3,duration:100,yoyo:!0,ease:"Back.easeOut"}),this.scene.sound&&this.scene.sound.add)try{const e=this.scene.sound.add("select_sound");e&&e.play({volume:.7})}catch(e){console.log("Sound effect not available:",e)}}setOnSelectCallback(e){return this.onSelectCallback=e,this}updateSkillLevel(e,t){return this.currentLevel=e,this.newLevel=t,this.isNewSkill=0===e,this.removeAll(!0),this.createCard(),this}createSelectionEffect(){for(let t=0;t<12;t++){const e=t/12*Math.PI*2,s=50+50*Math.random(),n=this.scene.add.circle(this.x,this.y,3+4*Math.random(),this.isNewSkill?65280:16766720,.9);n.setDepth(1003),this.scene.tweens.add({targets:n,x:this.x+Math.cos(e)*s,y:this.y+Math.sin(e)*s,scaleX:0,scaleY:0,alpha:0,duration:500,ease:"Power2",onComplete:()=>n.destroy()})}const e=this.scene.add.circle(this.x,this.y,10,16777215,0);e.setStrokeStyle(3,this.isNewSkill?65280:16766720,.8),e.setDepth(1003),this.scene.tweens.add({targets:e,radius:100,alpha:0,duration:600,ease:"Power2",onComplete:()=>e.destroy()})}destroy(){this.scene.tweens.killTweensOf(this),this.scene.tweens.killTweensOf(this.glowBackground),this.skillIcon&&this.scene.tweens.killTweensOf(this.skillIcon),this.romanNumeral&&this.scene.tweens.killTweensOf(this.romanNumeral),this.skillName&&this.scene.tweens.killTweensOf(this.skillName),super.destroy()}}const $z={slash:{name:"Slash Attack",description:"Melee area attack",type:"basic",unlocked:!0,maxLevel:10,cardBackground:"card_basic_attack",icon:"icon_slash_glow_effect",iconNormal:"icon_slash",stats:{damage:{base:10,perLevel:2},fireRate:{base:1,perLevel:.1},range:{base:70,perLevel:5}},apply:(e,t)=>{e.slashDamage=$z.slash.stats.damage.base+(t-1)*$z.slash.stats.damage.perLevel,e.slashFireRate=$z.slash.stats.fireRate.base+(t-1)*$z.slash.stats.fireRate.perLevel,e.slashRange=$z.slash.stats.range.base+(t-1)*$z.slash.stats.range.perLevel}},fireBullet:{name:"Fire Arrow",description:"Fast piercing fire projectile",type:"fire",unlocked:!1,unlockLevel:3,maxLevel:10,cardBackground:"card_magic_fire",icon:"icon_fire_arrow_glow_effect",iconNormal:"icon_fire_arrow",stats:{damage:{base:8,perLevel:1.5},fireRate:{base:1.2,perLevel:.15},range:{base:300,perLevel:20}},apply:(e,t)=>{e.fireBulletDamage=$z.fireBullet.stats.damage.base+(t-1)*$z.fireBullet.stats.damage.perLevel,e.fireBulletFireRate=$z.fireBullet.stats.fireRate.base+(t-1)*$z.fireBullet.stats.fireRate.perLevel,e.fireBulletRange=$z.fireBullet.stats.range.base+(t-1)*$z.fireBullet.stats.range.perLevel}},fireBomb:{name:"Fire Ball",description:"Explosive area damage",type:"fire",unlocked:!1,unlockLevel:6,maxLevel:10,cardBackground:"card_magic_fire",icon:"icon_fire_ball_glow_effect",iconNormal:"icon_fire_ball",stats:{damage:{base:18,perLevel:3},fireRate:{base:.4,perLevel:.05},range:{base:220,perLevel:15}},apply:(e,t)=>{e.fireBombDamage=$z.fireBomb.stats.damage.base+(t-1)*$z.fireBomb.stats.damage.perLevel,e.fireBombFireRate=$z.fireBomb.stats.fireRate.base+(t-1)*$z.fireBomb.stats.fireRate.perLevel,e.fireBombRange=$z.fireBomb.stats.range.base+(t-1)*$z.fireBomb.stats.range.perLevel}},ice:{name:"Ice Shard",description:"Slowing ice projectile",type:"ice",unlocked:!1,unlockLevel:4,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_ice_shard_glow_effect",iconNormal:"icon_ice_shard",stats:{damage:{base:12,perLevel:2},fireRate:{base:.6,perLevel:.08},range:{base:180,perLevel:12}},apply:(e,t)=>{e.iceDamage=$z.ice.stats.damage.base+(t-1)*$z.ice.stats.damage.perLevel,e.iceFireRate=$z.ice.stats.fireRate.base+(t-1)*$z.ice.stats.fireRate.perLevel,e.iceRange=$z.ice.stats.range.base+(t-1)*$z.ice.stats.range.perLevel}},lightning:{name:"Lightning Chain",description:"Chaining electric attack",type:"lightning",unlocked:!1,unlockLevel:5,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_lightning_chain_glow_effect",iconNormal:"icon_lightning_chain",stats:{damage:{base:20,perLevel:3},fireRate:{base:.5,perLevel:.06},chainCount:{base:10,perLevel:1}},apply:(e,t)=>{e.lightningDamage=$z.lightning.stats.damage.base+(t-1)*$z.lightning.stats.damage.perLevel,e.lightningFireRate=$z.lightning.stats.fireRate.base+(t-1)*$z.lightning.stats.fireRate.perLevel,e.lightningChainCount=$z.lightning.stats.chainCount.base+(t-1)*$z.lightning.stats.chainCount.perLevel}},blindingLight:{name:"Holy Light",description:"Blinding area effect",type:"holy",unlocked:!1,unlockLevel:7,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_holy_light_glow_effect",iconNormal:"icon_holy_light",stats:{range:{base:300,perLevel:25},fireRate:{base:.15,perLevel:.02},duration:{base:4e3,perLevel:300}},apply:(e,t)=>{e.blindingLightRange=$z.blindingLight.stats.range.base+(t-1)*$z.blindingLight.stats.range.perLevel,e.blindingLightFireRate=$z.blindingLight.stats.fireRate.base+(t-1)*$z.blindingLight.stats.fireRate.perLevel,e.blindingLightDisableDuration=$z.blindingLight.stats.duration.base+(t-1)*$z.blindingLight.stats.duration.perLevel}},marksman:{name:"Marksman Shot",description:"High-damage precise shot",type:"marksman",unlocked:!1,unlockLevel:8,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_marksman_glow_effect",iconNormal:"icon_marksman",stats:{damage:{base:35,perLevel:8},fireRate:{base:.3,perLevel:.04},range:{base:400,perLevel:30}},apply:(e,t)=>{e.marksmanDamage=$z.marksman.stats.damage.base+(t-1)*$z.marksman.stats.damage.perLevel,e.marksmanFireRate=$z.marksman.stats.fireRate.base+(t-1)*$z.marksman.stats.fireRate.perLevel,e.marksmanRange=$z.marksman.stats.range.base+(t-1)*$z.marksman.stats.range.perLevel}},armor:{name:"Armor Plating",description:"Reduce incoming damage",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_armor_glow_effect2",iconNormal:"icon_armor",stats:{armorValue:{base:2,perLevel:1.5}},apply:(e,t)=>{const s=$z.armor.stats.armorValue.base+(t-1)*$z.armor.stats.armorValue.perLevel;e.armor=(e.armor||0)+s}},attackSpeed:{name:"Attack Speed",description:"Increase all attack rates",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_attack_speed_glow_effect2",iconNormal:"icon_attack_speed",stats:{speedMultiplier:{base:.15,perLevel:.1}},apply:(e,t)=>{const s=1+($z.attackSpeed.stats.speedMultiplier.base+(t-1)*$z.attackSpeed.stats.speedMultiplier.perLevel);e.slashFireRate&&(e.slashFireRate*=s),e.fireBulletFireRate&&(e.fireBulletFireRate*=s),e.fireBombFireRate&&(e.fireBombFireRate*=s),e.iceFireRate&&(e.iceFireRate*=s),e.lightningFireRate&&(e.lightningFireRate*=s),e.blindingLightFireRate&&(e.blindingLightFireRate*=s)}},expGain:{name:"Experience Gain",description:"Gain more experience points",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_exp_gain_glow_effect2",iconNormal:"icon_exp_gain",stats:{expMultiplier:{base:.2,perLevel:.15}},apply:(e,t)=>{const s=1+($z.expGain.stats.expMultiplier.base+(t-1)*$z.expGain.stats.expMultiplier.perLevel);e.expMultiplier=(e.expMultiplier||1)*s}},goldGain:{name:"Gold Gain",description:"Find more gold from enemies",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_gold_gain_glow_effect2",iconNormal:"icon_gold_gain",stats:{goldMultiplier:{base:.25,perLevel:.2}},apply:(e,t)=>{const s=1+($z.goldGain.stats.goldMultiplier.base+(t-1)*$z.goldGain.stats.goldMultiplier.perLevel);e.goldMultiplier=(e.goldMultiplier||1)*s}},maxHealth:{name:"Max Health",description:"Increase maximum health",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_max_healt_glow_effect2",iconNormal:"icon_max_healt",stats:{health:{base:50,perLevel:25}},apply:(e,t)=>{const s=$z.maxHealth.stats.health.base+(t-1)*$z.maxHealth.stats.health.perLevel;e.maxHealth+=s,e.health+=s}},attackDamage:{name:"Attack Damage",description:"Increase all attack damage",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_attack_damage_glow_effect2",iconNormal:"icon_attack_damage",stats:{damageMultiplier:{base:.15,perLevel:.1}},apply:(e,t)=>{$z.attackDamage.stats.damageMultiplier.base,$z.attackDamage.stats.damageMultiplier.perLevel,Object.keys($z).forEach((t=>{var s,n;(null==(s=$z[t].stats)?void 0:s.damage)&&$z[t].apply(e,(null==(n=e.skillLevels)?void 0:n[t])||0)}))}},moveSpeed:{name:"Movement Speed",description:"Increase movement speed",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_movement_speed_glow_effect2",iconNormal:"icon_movement_speed",stats:{speedMultiplier:{base:.2,perLevel:.1}},apply:(e,t)=>{const s=1+($z.moveSpeed.stats.speedMultiplier.base+(t-1)*$z.moveSpeed.stats.speedMultiplier.perLevel);e.moveSpeed=(e.baseMoveSpeed||100)*s}},pickupRange:{name:"Pickup Range",description:"Increase item collection radius",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_pickup_range_glow_effect2",iconNormal:"icon_pickup_range",stats:{rangeMultiplier:{base:.25,perLevel:.15}},apply:(e,t)=>{const s=1+($z.pickupRange.stats.rangeMultiplier.base+(t-1)*$z.pickupRange.stats.rangeMultiplier.perLevel);e.pickupRange=(e.basePickupRange||50)*s}}};class qz{constructor(e){this.scene=e,this.isActive=!1,this.pendingLevelUps=0,this.storedState={timers:[],entities:[]},this.skillLevels={slash:1,fireBullet:0,fireBomb:0,ice:0,lightning:0,blindingLight:0,marksman:0,maxHealth:0,attackDamage:0,moveSpeed:0,pickupRange:0,armor:0,attackSpeed:0,expGain:0,goldGain:0},this.playerLevel=1,e.skillUpgradeManager=this}initialize(){this.loadCardAssets()}loadCardAssets(){this.scene.textures.exists("card_basic_attack")||this.scene.load.image("card_basic_attack","./card/card_basic_attack.png"),this.scene.textures.exists("card_basic_stats")||this.scene.load.image("card_basic_stats","./card/card_basic_stats.png"),this.scene.textures.exists("card_magic_fire")||this.scene.load.image("card_magic_fire","./card/card_magic _fire.png"),this.scene.textures.exists("card_magic_order")||this.scene.load.image("card_magic_order","./card/card_magic_order.png");for(let e=1;e<=10;e++){const t=`Roman_${e}`;this.scene.textures.exists(t)||this.scene.load.image(t,`./skill-tiers/Roman_${e}.png`)}this.loadSkillIcons(),this.scene.load.once("complete",(()=>{this.setupInitialSkills()})),this.scene.load.start()}loadSkillIcons(){["icon_slash_glow_effect","icon_fire_arrow_glow_effect","icon_fire_ball_glow_effect","icon_ice_shard_glow_effect","icon_lightning_chain_glow_effect","icon_holy_light_glow_effect","icon_marksman_glow_effect","icon_armor_glow_effect1","icon_attack_damage_glow_effect1","icon_attack_speed_glow_effect1","icon_exp_gain_glow_effect1","icon_gold_gain_glow_effect1","icon_max_healt_glow_effect1","icon_movement_speed_glow_effect1","icon_pickup_range_glow_effect1"].forEach((e=>{this.scene.textures.exists(e)||this.scene.load.image(e,`./upgrade-icon/${e}.png`)})),["icon_slash","icon_fire_arrow","icon_fire_ball","icon_ice_shard","icon_lightning_chain","icon_holy_light","icon_marksman","icon_armor","icon_attack_damage","icon_attack_speed","icon_exp_gain","icon_gold_gain","icon_max_healt","icon_movement_speed","icon_pickup_range"].forEach((e=>{if(!this.scene.textures.exists(e)){const t="icon_holy_light"===e?"icon_holy_light-.png":`${e}.png`;this.scene.load.image(e,`./upgrade-icon/${t}`)}}))}setupInitialSkills(){this.scene.player?($z.slash.apply(this.scene.player,1),this.scene.player.baseMoveSpeed=this.scene.player.moveSpeed||150,this.scene.player.basePickupRange=this.scene.player.pickupRange||50,this.scene.playerAttackSystem&&this.scene.playerAttackSystem.updateStats(),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels})):console.warn("SkillUpgradeManager: Player not found, deferring initial skill setup")}showSkillUpgradeSelection(){this.isActive?this.pendingLevelUps++:(this.isActive=!0,this.pauseGame(),this.createSkillUI())}pauseGame(){var e;["enemySpawnTimer","orbSpawnTimer","difficultyTimer"].forEach((e=>{this.scene[e]&&(this.storedState.timers.push({name:e,paused:this.scene[e].paused}),this.scene[e].paused=!0)})),[this.scene.player,...(null==(e=this.scene.enemies)?void 0:e.getChildren())||[]].forEach((e=>{(null==e?void 0:e.body)&&(this.storedState.entities.push({entity:e,vx:e.body.velocity.x,vy:e.body.velocity.y,enabled:e.body.enable}),e.body.velocity.setTo(0,0),e.body.enable=!1)})),this.originalUpdate=this.scene.update,this.scene.update=()=>{}}createSkillUI(){const e=this.scene.cameras.main;this.overlay=this.scene.add.rectangle(e.width/2,e.height/2,e.width,e.height,0,.8).setScrollFactor(0).setDepth(1e3),this.title=this.scene.add.text(e.width/2,80,"LEVEL UP! Choose Your Upgrade",{fontFamily:"Arial",fontSize:"28px",color:"#ffff00",stroke:"#000000",strokeThickness:4,align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.levelText=this.scene.add.text(e.width/2,110,`Player Level: ${this.playerLevel+1}`,{fontFamily:"Arial",fontSize:"20px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.container=this.scene.add.container(0,0).setDepth(1001).setScrollFactor(0);const t=this.getAvailableSkillOptions();if(0===t.length)return void this.resumeGame();const s=this.getCardPositions(t.length,e);t.forEach(((e,t)=>{const n=$z[e],a=this.skillLevels[e],i=a+1;console.log(`SkillUpgradeManager: Creating card for ${e}, level ${a} -> ${i}`);const r=new Wz(this.scene,s[t].x,s[t].y,e,n,a,i);r.setScale(.8).setScrollFactor(0).setDepth(1002),r.setOnSelectCallback((()=>this.selectSkill(e))),r.setInteractive({useHandCursor:!0}),this.container.add(r)})),this.scene.add.existing(this.container)}getCardPositions(e,t){const s=220*(e-1),n=t.width/2-s/2,a=t.height/2+20,i=[];for(let r=0;r<e;r++)i.push({x:n+220*r,y:a});return i}getAvailableSkillOptions(){const e=[];Object.keys($z).forEach((t=>{const s=$z[t];this.skillLevels[t]<s.maxLevel&&(s.unlocked||s.unlockLevel&&this.playerLevel>=s.unlockLevel)&&e.push(t)}));const t=e.sort((()=>.5-Math.random()));return t.slice(0,Math.min(3,t.length))}selectSkill(e){this.skillLevels[e]++,this.playerLevel++;const t=$z[e],s=this.skillLevels[e];this.scene.player&&(t.apply(this.scene.player,s),this.scene.playerAttackSystem&&this.scene.playerAttackSystem.updateStats(),1===s&&"stat"!==t.type&&this.enableSkillInAttackSystem(e)),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels}),this.scene.tweens.add({targets:[this.overlay,this.title,this.levelText,this.container],alpha:0,duration:300,onComplete:()=>{[this.overlay,this.title,this.levelText,this.container].forEach((e=>null==e?void 0:e.destroy())),this.resumeGame(),this.handlePending()}})}enableSkillInAttackSystem(e){var t,s;if(null==(t=this.scene.playerAttack)?void 0:t.enableAttackType){const t={fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e];t&&this.scene.playerAttack.enableAttackType(t)}else if(null==(s=this.scene.playerAttackSystem)?void 0:s.attackTypes){const t={fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e];t&&(this.scene.playerAttackSystem.attackTypes[t]=!0)}else console.warn(`SkillUpgradeManager: Could not find attack system to enable ${e}`)}resumeGame(){this.storedState.timers.forEach((({name:e,paused:t})=>{this.scene[e]&&(this.scene[e].paused=t)})),this.storedState.entities.forEach((({entity:e,vx:t,vy:s,enabled:n})=>{(null==e?void 0:e.body)&&(e.body.velocity.setTo(t,s),e.body.enable=n)})),this.originalUpdate&&(this.scene.update=this.originalUpdate),this.storedState={timers:[],entities:[]},this.isActive=!1}handlePending(){this.pendingLevelUps>0&&(this.pendingLevelUps--,this.scene.time.delayedCall(500,(()=>this.showSkillUpgradeSelection())))}getSkillLevel(e){return this.skillLevels[e]||0}getSkillInfo(e){return $z[e]}getPlayerLevel(){return this.playerLevel}getSaveData(){return{skillLevels:this.skillLevels,playerLevel:this.playerLevel}}loadSaveData(e){e&&(this.skillLevels=e.skillLevels||this.skillLevels,this.playerLevel=e.playerLevel||this.playerLevel,Object.keys(this.skillLevels).forEach((e=>{const t=this.skillLevels[e];t>0&&($z[e].apply(this.scene.player,t),1===t&&"stat"!==$z[e].type&&this.enableSkillInAttackSystem(e))})),this.scene.playerAttackSystem&&this.scene.playerAttackSystem.updateStats(),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels}))}shutdown(){[this.overlay,this.title,this.levelText,this.container].forEach((e=>null==e?void 0:e.destroy())),this.originalUpdate&&(this.scene.update=this.originalUpdate)}}const Kz={speed:{base:20,color:65280,apply:(e,t)=>e.moveSpeed*=1+t/100},damage:{base:15,color:16711680,apply:(e,t)=>{var s;e.damage*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},health:{base:10,color:255,apply:(e,t)=>{e.maxHealth+=50,e.health+=50}},fireRate:{base:10,color:16776960,apply:(e,t)=>{var s;e.fireRate*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},range:{base:15,color:65535,apply:(e,t)=>{var s;e.attackRange*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},magnet:{base:20,color:16711935,apply:(e,t)=>e.pickupRange*=1+t/100}};class Qz{constructor(e){this.scene=e,this.skillUpgradeManager=new qz(e),this.powerUps=Object.keys(Kz).reduce(((e,t)=>({...e,[t]:0})),{}),this.isActive=!1,this.pendingLevelUps=0,this.storedState={timers:[],entities:[]},e.powerUpManager=this}initialize(){this.skillUpgradeManager.initialize(),this.createTextures()}createTextures(){if(!this.scene.textures.exists("blank cards7")){const e=this.scene.add.graphics();e.fillStyle(3355443,1).fillRoundedRect(0,0,200,300,16),e.lineStyle(4,16777215,1).strokeRoundedRect(0,0,200,300,16),e.generateTexture("blank cards7",200,300),e.destroy()}Object.entries(Kz).forEach((([e,t])=>{const s=`${e}_icon`;if(this.scene.textures.exists(s))return;const n=this.scene.add.graphics();n.fillStyle(t.color,1).fillCircle(32,32,32),n.fillStyle(16777215,1),n.fillCircle(32,32,15),n.generateTexture(s,64,64),n.destroy()}))}showPowerUpSelection(){this.skillUpgradeManager.showSkillUpgradeSelection()}pauseGame(){var e;["enemySpawnTimer","orbSpawnTimer","difficultyTimer"].forEach((e=>{this.scene[e]&&(this.storedState.timers.push({name:e,paused:this.scene[e].paused}),this.scene[e].paused=!0)})),[this.scene.player,...(null==(e=this.scene.enemies)?void 0:e.getChildren())||[]].forEach((e=>{(null==e?void 0:e.body)&&(this.storedState.entities.push({entity:e,vx:e.body.velocity.x,vy:e.body.velocity.y,enabled:e.body.enable}),e.body.velocity.setTo(0,0),e.body.enable=!1)})),this.originalUpdate=this.scene.update,this.scene.update=()=>{}}createUI(){const e=this.scene.cameras.main;this.overlay=this.scene.add.rectangle(e.width/2,e.height/2,e.width,e.height,0,.7).setScrollFactor(0).setDepth(1e3),this.title=this.scene.add.text(e.width/2,100,"LEVEL UP! Choose a Power-Up",{fontFamily:"Arial",fontSize:"32px",color:"#ffffff",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.container=this.scene.add.container(0,0).setDepth(1001).setScrollFactor(0);const t=Object.keys(Kz).sort((()=>.5-Math.random())).slice(0,3),s=[-220,0,220].map((t=>({x:e.width/2+t,y:e.height/2})));t.forEach(((e,t)=>{const n=this.scene.add.rectangle(s[t].x,s[t].y,150,200,3355443);n.setStrokeStyle(2,16777215),n.setInteractive({useHandCursor:!0}),n.on("pointerdown",(()=>this.selectPowerUp(e)));const a=this.scene.add.text(s[t].x,s[t].y,e,{fontFamily:"Arial",fontSize:"16px",color:"#ffffff"}).setOrigin(.5);this.container.add([n,a])}))}selectPowerUp(e){this.powerUps[e]++;const t=Kz[e],s=t.base*(1+.5*(this.powerUps[e]-1));t.apply(this.scene.player,s),this.scene.tweens.add({targets:[this.overlay,this.title,this.container],alpha:0,duration:300,onComplete:()=>{[this.overlay,this.title,this.container].forEach((e=>null==e?void 0:e.destroy())),this.resumeGame(),this.handlePending()}})}resumeGame(){this.storedState.timers.forEach((({name:e,paused:t})=>{this.scene[e]&&(this.scene[e].paused=t)})),this.storedState.entities.forEach((({entity:e,vx:t,vy:s,enabled:n})=>{(null==e?void 0:e.body)&&(e.body.velocity.setTo(t,s),e.body.enable=n)})),this.originalUpdate&&(this.scene.update=this.originalUpdate),this.storedState={timers:[],entities:[]},this.isActive=!1}handlePending(){this.pendingLevelUps>0&&(this.pendingLevelUps--,this.scene.time.delayedCall(500,(()=>this.showPowerUpSelection())))}shutdown(){this.skillUpgradeManager&&this.skillUpgradeManager.shutdown(),[this.overlay,this.title,this.container].forEach((e=>null==e?void 0:e.destroy())),this.originalUpdate&&(this.scene.update=this.originalUpdate)}getSkillLevel(e){return this.skillUpgradeManager?this.skillUpgradeManager.getSkillLevel(e):0}getSkillInfo(e){return this.skillUpgradeManager?this.skillUpgradeManager.getSkillInfo(e):null}getPlayerLevel(){return this.skillUpgradeManager?this.skillUpgradeManager.getPlayerLevel():1}getSaveData(){return this.skillUpgradeManager?this.skillUpgradeManager.getSaveData():{}}loadSaveData(e){this.skillUpgradeManager&&this.skillUpgradeManager.loadSaveData(e)}}class Zz extends Phaser.GameObjects.Container{constructor(e,t){super(e,0,0),t?(this.player=t,e.add.existing(this),this.setDepth(18),this.slashDamage=t.slashDamage||10,this.slashFireRate=t.slashFireRate||1,this.slashRange=t.slashRange||70,this.slashCooldown=2e3/this.slashFireRate,this.fireBulletDamage=t.fireBulletDamage||8,this.fireBulletFireRate=t.fireBulletFireRate||1.2,this.fireBulletRange=t.fireBulletRange||200,this.fireBulletCooldown=2500/this.fireBulletFireRate,this.fireBulletSpeed=250,this.fireBulletDotDuration=4e3,this.fireBombDamage=t.fireBombDamage||18,this.fireBombFireRate=t.fireBombFireRate||.4,this.fireBombRange=t.fireBombRange||80,this.fireBombCooldown=3e3/this.fireBombFireRate,this.fireBombSpeed=120,this.fireBombExplosionRadius=50,this.fireBombDotDuration=5e3,this.iceDamage=t.iceDamage||12,this.iceFireRate=t.iceFireRate||.6,this.iceRange=t.iceRange||180,this.iceCooldown=2800/this.iceFireRate,this.iceProjectileSpeed=120,this.lightningDamage=t.lightningDamage||20,this.lightningFireRate=t.lightningFireRate||.5,this.lightningRange=t.lightningRange||250,this.lightningCooldown=4e3/this.lightningFireRate,this.lightningProjectileSpeed=200,this.lightningChainCount=t.lightningChainCount||10,this.lightningChainRange=100,this.blindingLightRange=t.blindingLightRange||300,this.blindingLightFireRate=t.blindingLightFireRate||.15,this.blindingLightCooldown=1e4/this.blindingLightFireRate,this.blindingLightDisableDuration=4e3,this.marksmanDamage=t.marksmanDamage||35,this.marksmanFireRate=t.marksmanFireRate||.3,this.marksmanRange=t.marksmanRange||400,this.marksmanCooldown=1500/this.marksmanFireRate,this.marksmanSpeed=400,this.attackTypes={slash:!0,fireBullet:!1,fireBomb:!1,ice:!1,lightning:!1,blindingLight:!1,marksman:!1},this.setupWeaponVisuals(),this.createAttackAnimations(),this.createProjectileGroups(),this.startAttackTimers(),e.events.on("update",this.update,this),e.playerAttack=this,this.connectToSkillSystem()):console.error("PlayerAttack: No player provided to constructor!")}connectToSkillSystem(){try{this.scene.time.delayedCall(200,(()=>{var e;if(null==(e=this.scene.powerUpManager)?void 0:e.skillUpgradeManager){const e=this.scene.powerUpManager.skillUpgradeManager;Object.keys(this.attackTypes).forEach((t=>{const s=this.mapAttackTypeToSkill(t);s&&e.getSkillLevel(s)>0&&(this.attackTypes[t]=!0)})),this.restartAttackTimers()}else console.log("PlayerAttack: Skill upgrade system not available yet")}))}catch(e){console.error("PlayerAttack: Error connecting to skill system:",e)}}mapAttackTypeToSkill(e){return{fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e]}enableAttackType(e){this.attackTypes.hasOwnProperty(e)&&(this.attackTypes[e]=!0,this.createTimerForAttackType(e,!0))}createTimerForAttackType(e,t=!1){const s=this.getCooldownForAttackType(e);t?this.scene.time.delayedCall(100,(()=>{this.triggerAttackByType(e),this.createNormalTimerForAttackType(e,s)})):this.createNormalTimerForAttackType(e,s)}createNormalTimerForAttackType(e,t){switch(e){case"slash":this.slashTimer&&this.slashTimer.destroy(),this.slashTimer=this.scene.time.addEvent({delay:t,callback:this.attemptSlashAttack,callbackScope:this,loop:!0});break;case"fireBullet":this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBulletTimer=this.scene.time.addEvent({delay:t,callback:this.attemptFireBulletAttack,callbackScope:this,loop:!0});break;case"fireBomb":this.fireBombTimer&&this.fireBombTimer.destroy(),this.fireBombTimer=this.scene.time.addEvent({delay:t,callback:this.attemptFireBombAttack,callbackScope:this,loop:!0});break;case"ice":this.iceTimer&&this.iceTimer.destroy(),this.iceTimer=this.scene.time.addEvent({delay:t,callback:this.attemptIceAttack,callbackScope:this,loop:!0});break;case"lightning":this.lightningTimer&&this.lightningTimer.destroy(),this.lightningTimer=this.scene.time.addEvent({delay:t,callback:this.attemptLightningAttack,callbackScope:this,loop:!0});break;case"blindingLight":this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.blindingLightTimer=this.scene.time.addEvent({delay:t,callback:this.attemptBlindingLightAttack,callbackScope:this,loop:!0});break;case"marksman":this.marksmanTimer&&this.marksmanTimer.destroy(),this.marksmanTimer=this.scene.time.addEvent({delay:t,callback:this.attemptMarksmanAttack,callbackScope:this,loop:!0})}}triggerAttackByType(e){switch(e){case"slash":this.attemptSlashAttack();break;case"fireBullet":this.attemptFireBulletAttack();break;case"fireBomb":this.attemptFireBombAttack();break;case"ice":this.attemptIceAttack();break;case"lightning":this.attemptLightningAttack();break;case"blindingLight":this.attemptBlindingLightAttack();break;case"marksman":this.attemptMarksmanAttack()}}getCooldownForAttackType(e){switch(e){case"slash":return this.slashCooldown;case"fireBullet":return this.fireBulletCooldown;case"fireBomb":return this.fireBombCooldown;case"ice":return this.iceCooldown;case"lightning":return this.lightningCooldown;case"blindingLight":return this.blindingLightCooldown;case"marksman":return this.marksmanCooldown;default:return 1e3}}restartAttackTimers(){this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBombTimer&&this.fireBombTimer.destroy(),this.iceTimer&&this.iceTimer.destroy(),this.lightningTimer&&this.lightningTimer.destroy(),this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.marksmanTimer&&this.marksmanTimer.destroy(),this.startAttackTimers()}attemptMarksmanAttack(){const e=this.findNearestEnemyInRange(this.marksmanRange);e&&this.marksmanAttack(e)}marksmanAttack(e){PC.emit("attack-used",{attackType:"marksman",cooldown:this.marksmanCooldown});const t=this.scene.add.circle(this.player.x,this.player.y,3,16777215);this.scene.physics.add.existing(t),t.setDepth(19);const s=this.scene.add.rectangle(this.player.x,this.player.y,20,2,16777215,.8);this.scene.physics.add.existing(s),s.setDepth(18);const n=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.setRotation(n),s.setRotation(n),t.body.setVelocity(Math.cos(n)*this.marksmanSpeed,Math.sin(n)*this.marksmanSpeed),s.body.setVelocity(Math.cos(n)*this.marksmanSpeed,Math.sin(n)*this.marksmanSpeed),t.damage=this.marksmanDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.marksmanRange,t.isMarksmanProjectile=!0,t.trail=s,this.lightningProjectiles.add(t),this.scene.time.delayedCall(2e3,(()=>{t.active&&(t.destroy(),s&&s.active&&s.destroy())}))}setupWeaponVisuals(){this.slashVisual=this.scene.add.arc(0,0,this.slashRange,0,Math.PI/2,!1,65280,.3),this.slashVisual.setVisible(!1),this.slashVisual.setDepth(17),this.add(this.slashVisual),this.slashSprite=this.scene.add.sprite(0,0,"AOE_Basic_Slash_Attack_V01"),this.slashSprite.setVisible(!1),this.slashSprite.setOrigin(.5,.5),this.slashSprite.setDepth(18),this.add(this.slashSprite),this.blindingLightVisual=this.scene.add.circle(0,0,this.blindingLightRange,16777215,0),this.blindingLightVisual.setStrokeStyle(6,16777215,.8),this.blindingLightVisual.setVisible(!1),this.blindingLightVisual.setDepth(19),this.add(this.blindingLightVisual)}createProjectileGroups(){this.fireBulletProjectiles=this.scene.add.group(),this.fireBombProjectiles=this.scene.add.group(),this.iceProjectiles=this.scene.add.group(),this.lightningProjectiles=this.scene.add.group(),this.scene.physics.world.enable(this.fireBulletProjectiles),this.scene.physics.world.enable(this.fireBombProjectiles),this.scene.physics.world.enable(this.iceProjectiles),this.scene.physics.world.enable(this.lightningProjectiles)}createAttackAnimations(){this.scene.anims.exists("slash_attack_v01")||this.scene.anims.create({key:"slash_attack_v01",frames:this.scene.anims.generateFrameNumbers("AOE_Basic_Slash_Attack_V01",{start:0,end:-1}),frameRate:15,repeat:0}),this.scene.anims.exists("fire_bullet")||this.scene.anims.create({key:"fire_bullet",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Ball_Projectile_VFX_V01",{start:0,end:-1}),frameRate:25,repeat:-1}),this.scene.anims.exists("fire_bomb")||this.scene.anims.create({key:"fire_bomb",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Ball_Projectile_VFX_V01",{start:0,end:-1}),frameRate:15,repeat:-1}),this.scene.textures.exists("AOE_Fire_Blast_Attack_VFX_V01")&&(this.scene.anims.exists("fire_explosion")||this.scene.anims.create({key:"fire_explosion",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Blast_Attack_VFX_V01",{start:0,end:-1}),frameRate:25,repeat:0})),this.scene.anims.exists("ice_projectile")||this.scene.anims.create({key:"ice_projectile",frames:this.scene.anims.generateFrameNumbers("AOE_Ice_Shard_Projectile_VFX_V01",{start:0,end:-1}),frameRate:16,repeat:-1}),this.scene.anims.exists("ice_explosion")||this.scene.anims.create({key:"ice_explosion",frames:this.scene.anims.generateFrameNumbers("AOE_Ice_Shard_v01",{start:0,end:-1}),frameRate:20,repeat:0}),this.scene.anims.exists("lightning_projectile")||this.scene.anims.create({key:"lightning_projectile",frames:this.scene.anims.generateFrameNumbers("lighting_chain_projectile_attack_VFX_128x32_v01",{start:0,end:-1}),frameRate:24,repeat:-1}),this.scene.anims.exists("lightning_hit")||this.scene.anims.create({key:"lightning_hit",frames:this.scene.anims.generateFrameNumbers("lighting_chain_attack_hit_projectile_VFX_72x96_v01",{start:0,end:-1}),frameRate:30,repeat:0})}startAttackTimers(){this.attackTypes.slash&&(this.slashTimer=this.scene.time.addEvent({delay:this.slashCooldown,callback:this.attemptSlashAttack,callbackScope:this,loop:!0}),console.log(`PlayerAttack: Slash timer created with ${this.slashCooldown}ms delay`)),this.attackTypes.fireBullet&&(this.fireBulletTimer=this.scene.time.addEvent({delay:this.fireBulletCooldown,callback:this.attemptFireBulletAttack,callbackScope:this,loop:!0})),this.attackTypes.fireBomb&&(this.fireBombTimer=this.scene.time.addEvent({delay:this.fireBombCooldown,callback:this.attemptFireBombAttack,callbackScope:this,loop:!0})),this.attackTypes.ice&&(this.iceTimer=this.scene.time.addEvent({delay:this.iceCooldown,callback:this.attemptIceAttack,callbackScope:this,loop:!0})),this.attackTypes.lightning&&(this.lightningTimer=this.scene.time.addEvent({delay:this.lightningCooldown,callback:this.attemptLightningAttack,callbackScope:this,loop:!0})),this.attackTypes.blindingLight&&(this.blindingLightTimer=this.scene.time.addEvent({delay:this.blindingLightCooldown,callback:this.attemptBlindingLightAttack,callbackScope:this,loop:!0})),this.attackTypes.marksman&&(this.marksmanTimer=this.scene.time.addEvent({delay:this.marksmanCooldown,callback:this.attemptMarksmanAttack,callbackScope:this,loop:!0}))}attemptSlashAttack(){const e=this.findEnemiesInSlashRange();e.length>0&&this.slashAttack(e)}findEnemiesInSlashRange(){if(!this.player)return[];if(void 0===this.player.x||void 0===this.player.y)return[];const e=[];return this.scene.enemies&&this.scene.enemies.children?this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{if(!t||void 0===t.x||void 0===t.y)return void console.warn("PlayerAttack: Invalid enemy found:",t);const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&e.push({enemy:t,distance:s})})):console.log("PlayerAttack: No scene.enemies group found or it's empty"),this.scene.breakableVases&&this.scene.breakableVases.children&&this.scene.breakableVases.getChildren().filter((e=>e.active&&!e.isBroken)).forEach((t=>{if(!t||void 0===t.x||void 0===t.y)return void console.warn("PlayerAttack: Invalid vase found:",t);const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&e.push({enemy:t,distance:s,isVase:!0})})),this.scene.children&&this.scene.children.list&&this.scene.children.list.forEach((t=>{var s;if(t&&t.active&&!t.isBroken&&t.canBeAttacked&&("BreakableVase"===t.constructor.name||"Vase"===(null==(s=t.texture)?void 0:s.key)||t.onPlayerAttack||t.takeDamage&&t.dropLoot)&&void 0!==t.x&&void 0!==t.y){const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&(e.some((e=>e.enemy===t))||e.push({enemy:t,distance:s,isVase:!0}))}})),e}slashAttack(e){PC.emit("attack-used",{attackType:"slash",cooldown:this.slashCooldown}),this.showSlashIndicator(),this.x=this.player.x,this.y=this.player.y,this.slashSprite.setPosition(0,0),this.slashSprite.setVisible(!0),this.slashSprite.play("slash_attack_v01"),e.forEach((({enemy:e,distance:t,isVase:s})=>{s&&e.onPlayerAttack?e.onPlayerAttack(this.slashDamage):e.takeDamage?e.takeDamage(this.slashDamage):console.warn("PlayerAttack: Enemy has no takeDamage method!",e)})),this.scene.time.delayedCall(300,(()=>{this.slashSprite.setVisible(!1)})),this.slashSprite.setVisible(!0),this.slashSprite.setScale(1.4),this.slashSprite.setDepth(18),this.slashSprite.play("slash_attack_v01"),this.slashSprite.once("animationcomplete",(()=>{this.slashSprite.setVisible(!1),this.slashSprite.setScale(1)})),e.forEach((e=>{e.enemy.active&&!e.enemy.isDead&&(e.isVase?e.enemy.onPlayerAttack&&e.enemy.onPlayerAttack(this.slashDamage):e.enemy.takeDamage&&e.enemy.takeDamage(this.slashDamage))})),this.showSlashIndicator()}attemptBlindingLightAttack(){const e=this.findEnemiesInBlindingLightRange();e.length>0&&this.blindingLightAttack(e)}findEnemiesInBlindingLightRange(){if(!this.scene.enemies||!this.player)return[];const e=[];return this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.blindingLightRange&&e.push({enemy:t,distance:s})})),this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.blindingLightRange&&e.push({enemy:t,distance:s})})),e}blindingLightAttack(e){PC.emit("attack-used",{attackType:"blindingLight",cooldown:this.blindingLightCooldown}),this.x=this.player.x,this.y=this.player.y,this.applyPlayerInvincibility(3e3);for(let t=0;t<3;t++)this.scene.time.delayedCall(100*t,(()=>{this.createBlindingLightRing(t)}));e.forEach((e=>{e.enemy.active&&!e.enemy.isDead&&this.applyBlindEffect(e.enemy,this.blindingLightDisableDuration)})),this.createScreenFlash()}createBlindingLightRing(e){const t=this.scene.add.circle(this.player.x,this.player.y,20,16777215,0);t.setStrokeStyle(4-e,16777215,.9-.2*e),t.setDepth(20),this.scene.tweens.add({targets:t,radius:this.blindingLightRange+50*e,alpha:0,duration:800+200*e,ease:"Power2",onComplete:()=>t.destroy()})}createScreenFlash(){const e=this.scene.add.rectangle(this.scene.cameras.main.centerX,this.scene.cameras.main.centerY,this.scene.cameras.main.width,this.scene.cameras.main.height,16777215,.8);e.setDepth(100),e.setScrollFactor(0),this.scene.tweens.add({targets:e,alpha:0,duration:500,ease:"Power2",onComplete:()=>e.destroy()})}applyBlindEffect(e,t){e&&!e.isDead&&(e.blindTimer&&e.blindTimer.destroy(),void 0===e.originalTint&&(e.originalTint=e.tint),e.setTint(16777215),e.isBlinded=!0,void 0!==e.canAttack&&(e.originalCanAttack=e.canAttack,e.canAttack=!1),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),e.speed=.3*e.originalSpeed,e.blindTimer=this.scene.time.delayedCall(t,(()=>{this.clearBlindEffect(e)})))}clearBlindEffect(e){e&&(e.blindTimer&&(e.blindTimer.destroy(),e.blindTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint(),void 0!==e.originalCanAttack&&(e.canAttack=e.originalCanAttack),void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.isBlinded=!1)}applyPlayerInvincibility(e){this.player&&(this.player.invincibilityTimer&&this.player.invincibilityTimer.destroy(),void 0===this.player.originalTint&&(this.player.originalTint=this.player.tint),this.player.isInvincible=!0,this.player.isInvulnerable=!0,this.player.invincibilityTween=this.scene.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power2",yoyo:!0,repeat:-1}),this.player.setTint(16766720),this.createProtectiveAura(),this.player.invincibilityTimer=this.scene.time.delayedCall(e,(()=>{this.clearPlayerInvincibility()})))}createProtectiveAura(){if(!this.player)return;const e=this.scene.add.circle(this.player.x,this.player.y,40,16766720,0);e.setStrokeStyle(3,16766720,.6),e.setDepth(this.player.depth-1),this.player.protectiveAura=e,this.scene.tweens.add({targets:e,scaleX:1.2,scaleY:1.2,alpha:.3,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}clearPlayerInvincibility(){this.player&&(this.player.isInvincible=!1,this.player.isInvulnerable=!1,this.player.invincibilityTween&&(this.player.invincibilityTween.stop(),this.player.invincibilityTween=null),this.player.setAlpha(1),void 0!==this.player.originalTint?this.player.setTint(this.player.originalTint):this.player.clearTint(),this.player.protectiveAura&&(this.player.protectiveAura.destroy(),this.player.protectiveAura=null),this.player.invincibilityTimer&&(this.player.invincibilityTimer.destroy(),this.player.invincibilityTimer=null))}attemptFireBulletAttack(){const e=this.findNearestEnemyInRange(this.fireBulletRange);e&&this.fireBulletAttack(e)}fireBulletAttack(e){PC.emit("attack-used",{attackType:"fireBullet",cooldown:this.fireBulletCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Fire_Ball_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(.6),t.setDepth(18),t.play("fire_bullet");const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.body.setVelocity(Math.cos(s)*this.fireBulletSpeed,Math.sin(s)*this.fireBulletSpeed),t.damage=this.fireBulletDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.fireBulletRange,t.isFireBullet=!0,t.hitEnemies=[],this.fireBulletProjectiles.add(t)}attemptFireBombAttack(){const e=this.findNearestEnemyInRange(this.fireBombRange);e&&this.fireBombAttack(e)}fireBombAttack(e){PC.emit("attack-used",{attackType:"fireBomb",cooldown:this.fireBombCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Fire_Ball_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(1),t.setDepth(18),t.play("fire_bomb"),t.setTint(16737792);const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.body.setVelocity(Math.cos(s)*this.fireBombSpeed,Math.sin(s)*this.fireBombSpeed),t.damage=this.fireBombDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.fireBombRange,t.targetX=e.x,t.targetY=e.y,t.isFireBomb=!0,t.hasExploded=!1,this.fireBombProjectiles.add(t)}explodeFireBomb(e){e.active&&!e.hasExploded&&(e.hasExploded=!0,e.body.setVelocity(0,0),this.scene.time.delayedCall(500,(()=>{if(e.active){if(this.scene.anims.exists("fire_explosion")){const t=this.scene.add.sprite(e.x,e.y,"AOE_Fire_Blast_Attack_VFX_V01");t.setScale(2),t.setDepth(19),t.play("fire_explosion"),t.once("animationcomplete",(()=>t.destroy()))}this.scene.enemies&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=this.fireBombExplosionRadius&&(t.isVase&&t.onPlayerAttack?t.onPlayerAttack(e.damage):t.takeDamage&&(t.takeDamage(e.damage),this.applyBurnEffect(t,.4*e.damage,this.fireBombDotDuration)))})),e.destroy()}})))}attemptIceAttack(){const e=this.findNearestEnemyInRange(this.iceRange);e&&this.iceProjectileAttack(e)}iceProjectileAttack(e){PC.emit("attack-used",{attackType:"ice",cooldown:this.iceCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Ice_Shard_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(.8),t.setDepth(18),t.play("ice_projectile");const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.setRotation(s),t.body.setVelocity(Math.cos(s)*this.iceProjectileSpeed,Math.sin(s)*this.iceProjectileSpeed),t.damage=this.iceDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.iceRange,t.isIceProjectile=!0,this.iceProjectiles.add(t)}createIceExplosionEffect(e,t){if(this.scene.anims.exists("ice_explosion")){const s=this.scene.add.sprite(e,t,"AOE_Ice_Shard_v01");s.setScale(.8),s.setOrigin(.5,.5),s.setDepth(19),s.play("ice_explosion"),s.once("animationcomplete",(()=>s.destroy()))}}attemptLightningAttack(){const e=this.findNearestEnemyInRange(this.lightningRange);e&&this.lightningChainAttack(e)}lightningChainAttack(e){PC.emit("attack-used",{attackType:"lightning",cooldown:this.lightningCooldown}),this.performLightningChain(this.player,e,0,[])}performLightningChain(e,t,s,n){if(s>=this.lightningChainCount||!t||n.includes(t))return;n.push(t);const a=this.scene.add.sprite(e.x,e.y,"lighting_chain_projectile_attack_VFX_128x32_v01");this.scene.physics.add.existing(a),a.setScale(.7),a.setDepth(19),a.play("lightning_projectile");const i=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y);a.setRotation(i),a.body.setVelocity(Math.cos(i)*this.lightningProjectileSpeed,Math.sin(i)*this.lightningProjectileSpeed),a.damage=this.lightningDamage*(1-.15*s),a.startX=e.x,a.startY=e.y,a.targetEnemy=t,a.chainDepth=s,a.hitTargets=n,a.isLightningProjectile=!0,this.lightningProjectiles.add(a)}hitLightningTarget(e){if(!e.active||!e.targetEnemy)return;const t=e.targetEnemy;t.takeDamage&&t.active&&!t.isDead&&(t.takeDamage(e.damage),this.applyStunEffect(t,1e3));const s=this.scene.add.sprite(t.x,t.y,"lighting_chain_attack_hit_projectile_VFX_72x96_v01");if(s.setScale(.8),s.setDepth(20),s.play("lightning_hit"),s.once("animationcomplete",(()=>s.destroy())),e.chainDepth<this.lightningChainCount-1){const s=this.findNearestEnemyInChainRange(t,e.hitTargets);s&&this.scene.time.delayedCall(100,(()=>{this.performLightningChain(t,s,e.chainDepth+1,e.hitTargets)}))}e.destroy()}findNearestEnemyInChainRange(e,t){if(!this.scene.enemies||!this.scene.enemies.children)return null;let s=null,n=this.lightningChainRange;return this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead&&!t.includes(e))).forEach((t=>{const a=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);a<=this.lightningChainRange&&a<n&&(n=a,s=t)})),s}applyStunEffect(e,t){e&&!e.isDead&&(e.stunTimer&&e.stunTimer.destroy(),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),void 0===e.originalTint&&(e.originalTint=e.tint),e.speed=0,e.setTint(16776960),e.isStunned=!0,e.stunTimer=this.scene.time.delayedCall(t,(()=>{this.clearStunEffect(e)})))}clearStunEffect(e){e&&(void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.stunTimer&&(e.stunTimer.destroy(),e.stunTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint(),e.isStunned=!1)}applyBurnEffect(e,t,s){if(!e||e.isDead)return;e.burnTimer&&e.burnTimer.destroy(),void 0===e.originalTint&&(e.originalTint=e.tint),e.setTint(16729088);const n=s/500,a=t/n;let i=0;e.burnTimer=this.scene.time.addEvent({delay:500,callback:()=>{e&&!e.isDead&&e.active?(e.takeDamage&&e.takeDamage(a),i++,i>=n&&this.clearBurnEffect(e)):this.clearBurnEffect(e)},repeat:n-1})}clearBurnEffect(e){e&&(e.burnTimer&&(e.burnTimer.destroy(),e.burnTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint())}applySlowEffect(e,t,s){e&&!e.isDead&&(e.slowTimer&&e.slowTimer.destroy(),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),void 0===e.originalTint&&(e.originalTint=e.tint),e.speed=e.originalSpeed*(1-t),e.setTint(8969727),e.slowTimer=this.scene.time.delayedCall(s,(()=>{this.clearSlowEffect(e)})))}clearSlowEffect(e){e&&(void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.slowTimer&&(e.slowTimer.destroy(),e.slowTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint())}findNearestEnemyInRange(e){if(!this.player)return null;let t=null,s=e;return this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((n=>{const a=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);a<=e&&a<s&&(s=a,t=n)})),this.scene.breakableVases&&this.scene.breakableVases.children&&this.scene.breakableVases.getChildren().filter((e=>e.active&&!e.isBroken)).forEach((n=>{const a=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);a<=e&&a<s&&(s=a,t=n,t.isVase=!0)})),this.scene.children&&this.scene.children.list&&this.scene.children.list.forEach((n=>{var a;if(n&&n.active&&!n.isBroken&&n.canBeAttacked&&("BreakableVase"===n.constructor.name||"Vase"===(null==(a=n.texture)?void 0:a.key)||n.onPlayerAttack||n.takeDamage&&n.dropLoot)){const a=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);a<=e&&a<s&&(s=a,t=n,t.isVase=!0,console.log("Found vase target via fallback detection:",n))}})),t}showSlashIndicator(){this.slashVisual.setVisible(!0),this.slashVisual.setAlpha(.5);const e=this.scene.add.circle(this.player.x,this.player.y,10,65280,0);e.setStrokeStyle(1,16776960,.8),e.setDepth(17),this.scene.tweens.add({targets:e,radius:this.slashRange,alpha:0,duration:400,ease:"Power2",onComplete:()=>e.destroy()}),this.scene.time.delayedCall(300,(()=>{this.slashVisual.setVisible(!1)}))}update(){this.player&&this.player.protectiveAura&&this.player.protectiveAura.setPosition(this.player.x,this.player.y),this.fireBulletProjectiles&&this.fireBulletProjectiles.children&&this.fireBulletProjectiles.children.entries&&this.fireBulletProjectiles.children.entries.forEach((e=>{e.active&&e.isFireBullet&&(Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?e.destroy():[this.scene.enemies,this.scene.zombieGroup,this.scene.breakableVases].filter((e=>e&&e.children)).forEach((t=>{t&&t.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{e.hitEnemies.includes(t)||Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=20&&(e.hitEnemies.push(t),t.isVase&&t.onPlayerAttack?t.onPlayerAttack(e.damage):t.takeDamage&&(t.takeDamage(e.damage),this.applyBurnEffect(t,.3*e.damage,this.fireBulletDotDuration)))}))})))})),this.fireBombProjectiles&&this.fireBombProjectiles.children&&this.fireBombProjectiles.children.entries&&this.fireBombProjectiles.children.entries.forEach((e=>{e.active&&e.isFireBomb&&(Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?this.explodeFireBomb(e):[this.scene.enemies,this.scene.zombieGroup,this.scene.breakableVases].filter((e=>e&&e.children)).forEach((t=>{t&&t.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=25&&this.explodeFireBomb(e)}))})))})),this.iceProjectiles&&this.iceProjectiles.children&&this.iceProjectiles.children.entries&&this.iceProjectiles.children.entries.forEach((e=>{if(e.active&&e.isIceProjectile)return Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?(this.createIceExplosionEffect(e.x,e.y),void e.destroy()):void(this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=20)return t.isVase&&t.onPlayerAttack?(t.onPlayerAttack(e.damage),this.createIceExplosionEffect(e.x,e.y)):t.takeDamage&&(t.takeDamage(e.damage),this.applySlowEffect(t,.5,2e3),this.createIceExplosionEffect(e.x,e.y)),void e.destroy()})))})),this.lightningProjectiles&&this.lightningProjectiles.children&&this.lightningProjectiles.children.entries&&this.lightningProjectiles.children.entries.forEach((e=>{e.active&&e.isLightningProjectile&&(e.targetEnemy&&e.targetEnemy.active?Phaser.Math.Distance.Between(e.x,e.y,e.targetEnemy.x,e.targetEnemy.y)<=25?this.hitLightningTarget(e):Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=this.lightningRange&&e.destroy():e.destroy())}))}updateStats(){if(this.player&&this.scene&&this.scene.active)try{if(this.slashDamage=this.player.slashDamage||10,this.slashFireRate=this.player.slashFireRate||1,this.slashRange=this.player.slashRange||70,this.slashCooldown=2e3/this.slashFireRate,this.fireBulletDamage=this.player.fireBulletDamage||8,this.fireBulletFireRate=this.player.fireBulletFireRate||1.2,this.fireBulletRange=this.player.fireBulletRange||300,this.fireBulletCooldown=2500/this.fireBulletFireRate,this.fireBombDamage=this.player.fireBombDamage||18,this.fireBombFireRate=this.player.fireBombFireRate||.4,this.fireBombRange=this.player.fireBombRange||220,this.fireBombCooldown=3e3/this.fireBombFireRate,this.iceDamage=this.player.iceDamage||12,this.iceFireRate=this.player.iceFireRate||.6,this.iceRange=this.player.iceRange||180,this.iceCooldown=2800/this.iceFireRate,this.lightningDamage=this.player.lightningDamage||20,this.lightningFireRate=this.player.lightningFireRate||.5,this.lightningRange=this.player.lightningRange||250,this.lightningCooldown=4e3/this.lightningFireRate,this.lightningChainCount=this.player.lightningChainCount||10,this.blindingLightRange=this.player.blindingLightRange||300,this.blindingLightFireRate=this.player.blindingLightFireRate||.15,this.blindingLightCooldown=1e4/this.blindingLightFireRate,this.blindingLightDisableDuration=this.player.blindingLightDisableDuration||4e3,this.marksmanDamage=this.player.marksmanDamage||35,this.marksmanFireRate=this.player.marksmanFireRate||.3,this.marksmanRange=this.player.marksmanRange||400,this.marksmanCooldown=1500/this.marksmanFireRate,this.slashTimer&&(this.slashTimer.delay=this.slashCooldown),this.fireBulletTimer&&(this.fireBulletTimer.delay=this.fireBulletCooldown),this.fireBombTimer&&(this.fireBombTimer.delay=this.fireBombCooldown),this.iceTimer&&(this.iceTimer.delay=this.iceCooldown),this.lightningTimer&&(this.lightningTimer.delay=this.lightningCooldown),this.blindingLightTimer&&(this.blindingLightTimer.delay=this.blindingLightCooldown),this.marksmanTimer&&(this.marksmanTimer.delay=this.marksmanCooldown),this.slashVisual&&this.slashVisual.setRadius&&"function"==typeof this.slashVisual.setRadius)try{this.slashVisual.setRadius(this.slashRange)}catch(e){console.warn("Error setting slash visual radius:",e)}if(this.blindingLightVisual&&this.blindingLightVisual.setRadius&&"function"==typeof this.blindingLightVisual.setRadius)try{this.blindingLightVisual.setRadius(this.blindingLightRange)}catch(e){console.warn("Error setting blinding light visual radius:",e)}}catch(e){console.error("Error in PlayerAttack.updateStats:",e)}}destroy(){this.slashTimer&&this.slashTimer.destroy(),this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBombTimer&&this.fireBombTimer.destroy(),this.iceTimer&&this.iceTimer.destroy(),this.lightningTimer&&this.lightningTimer.destroy(),this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.marksmanTimer&&this.marksmanTimer.destroy(),this.scene.enemies&&this.scene.enemies.getChildren().forEach((e=>{this.clearBurnEffect(e),this.clearSlowEffect(e),this.clearStunEffect(e),this.clearBlindEffect(e)})),this.clearPlayerInvincibility(),this.fireBulletProjectiles.destroy(!0),this.fireBombProjectiles.destroy(!0),this.iceProjectiles.destroy(!0),this.lightningProjectiles.destroy(!0),super.destroy()}}class Xz extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t??10,s??10),this.background=e.add.rectangle(0,0,300,30,0,.7),this.background.setOrigin(0,0),this.add(this.background),this.levelText=e.add.text(10,15,"LEVEL: 1",{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#ffffff",stroke:"#000000",strokeThickness:4,align:"left"}),this.levelText.setOrigin(0,.5),this.add(this.levelText),this.expText=e.add.text(120,15,"EXP: 0/100",{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#ffff00",stroke:"#000000",strokeThickness:4,align:"left"}),this.expText.setOrigin(0,.5),this.add(this.expText),this.setScrollFactor(0),this.setDepth(1e3),this.level=1,this.experience=0,this.nextLevelExp=100,this.onLevelUpCallbacks=[],e.playerLevelSystem=this,this.updateText(),this.updateExpBar()}addExperience(e){try{return console.log(`Adding ${e} experience points`),("number"!=typeof e||isNaN(e))&&(console.warn("Invalid experience amount:",e),e=1),this.experience+=e,this.checkLevelUp(),this.updateText(),this.updateExpBar(),this}catch(t){return console.error("Error adding experience:",t),this}}checkLevelUp(){if(this.experience>=this.nextLevelExp){this.level++,this.experience-=this.nextLevelExp,this.nextLevelExp=Math.floor(100*Math.pow(1.2,this.level-1));try{this.onLevelUpCallbacks.forEach((e=>e(this.level)))}catch(e){console.error("Error in level up callback:",e)}this.updateExpBar(),this.checkLevelUp()}}updateText(){this.levelText.setText(`LEVEL: ${this.level}`),this.expText.setText(`EXP: ${this.experience}/${this.nextLevelExp}`);const e=Math.max(204,this.levelText.width+this.expText.width+30);this.background.width=e,this.progressBarFill&&this.updateProgressBar(),this.updateExpBar()}onLevelUp(e){return"function"==typeof e&&this.onLevelUpCallbacks.push(e),this}getLevel(){return this.level}getLevelProgress(){return this.experience/this.nextLevelExp}setUIPosition(e,t){return this.setPosition(e,t),console.log("UI Position set to:",e,t),this}createProgressBar(e,t,s,n){try{return this.progressBarBg&&(this.progressBarBg.destroy(),this.progressBarFill.destroy()),this.progressBarBg=this.scene.add.rectangle(0,40,s,n,0,.7),this.progressBarBg.setScrollFactor(0),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setDepth(99),this.add(this.progressBarBg),this.progressBarFill=this.scene.add.rectangle(2,40,0,n-4,65535,1),this.progressBarFill.setScrollFactor(0),this.progressBarFill.setOrigin(0,.5),this.progressBarFill.setDepth(99),this.add(this.progressBarFill),this.progressBarWidth=s-4,this.updateProgressBar(),this}catch(a){return console.error("Error creating progress bar:",a),this}}updateProgressBar(){try{if(this.progressBarFill&&this.progressBarWidth){const e=this.getLevelProgress(),t=this.progressBarWidth*e;this.progressBarFill.width=t}}catch(e){console.error("Error updating progress bar:",e)}}updateExpBar(){try{const e={currentExp:this.experience,maxExp:this.nextLevelExp,level:this.level,experience:this.experience,maxExperience:this.nextLevelExp,exp:this.experience,maxExp:this.nextLevelExp,lvl:this.level};PC.emit("player-exp-updated",e),PC.emit("player-stats-updated",e),window.dispatchEvent(new CustomEvent("playerExpUpdated",{detail:e})),window.dispatchEvent(new CustomEvent("playerStatsUpdated",{detail:e}))}catch(e){console.error("Error updating exp bar:",e)}}}class Yz extends Phaser.Scene{constructor(e){super(e),this.initializeProperties()}initializeProperties(){this.gameManager=null,this.gameplayManager=null,this.powerUpManager=null,this.playerAttackSystem=null,this.playerAttack=null,this.playerLevelSystem=null,this.player=null,this.isTeleporting=!1,this.debugMode=!1,this.gameStartTime=0,this.enemiesKilled=0,this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemies=null,this.experienceOrbs=null,this.goldOrbs=null,this.zombieGroup=null,this.staticObstacles=null,this.collisionLayers=[],this.statsContainer=null,this.statsUpdateTimer=null,this.upgradeDebugText=null,this.enemySpawnTimer=null}preload(){this.loadEssentialAssets()}loadEssentialAssets(){const e=[{type:"image",key:"Exp",path:HC.ASSETS.PICKUPS.EXP},{type:"image",key:"Health_Potion_01",path:HC.ASSETS.PICKUPS.HEALTH_POTION}],t=[{key:"AOE_Fire_Ball_Projectile_VFX_V01",path:HC.ASSETS.EFFECTS.FIRE_BALL,config:HC.ASSETS.SPRITESHEETS.FIRE_BALL},{key:"AOE_Fire_Blast_Attack_VFX_V01",path:HC.ASSETS.EFFECTS.FIRE_BLAST,config:HC.ASSETS.SPRITESHEETS.FIRE_BLAST},{key:"AOE_Ice_Shard_Projectile_VFX_V01",path:HC.ASSETS.EFFECTS.ICE_SHARD,config:HC.ASSETS.SPRITESHEETS.ICE_SHARD}];e.forEach((e=>this.load.image(e.key,e.path))),t.forEach((e=>this.load.spritesheet(e.key,e.path,e.config)))}create(){this.initializeCore(),this.initializeManagers(),this.initializeUI(),this.setupEventListeners(),PC.emit("current-scene-ready",this)}initializeCore(){this.gameManager=this.game.registry.get("gameManager")||new QC,this.game.registry.set("gameManager",this.gameManager),this.gameManager.setCurrentScene(this),this.gameStartTime=Date.now(),this.resetGameState(),this.initializeCollisionSystem()}resetGameState(){this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemiesKilled=0,this.isTeleporting=!1}initializeManagers(){try{this.initializePowerUpManager(),this.initializeGameplayManager()}catch(e){console.error("Manager initialization failed:",e)}}initializePowerUpManager(){this.powerUpManager||(this.powerUpManager=new Qz(this),this.powerUpManager.initialize())}initializeGameplayManager(){var e,t;try{this.gameplayManager||(this.gameplayManager=new Vz(this),null==(t=(e=this.gameplayManager).initialize)||t.call(e))}catch(s){console.warn("GameplayManager initialization failed:",s),this.gameplayManager=null}}initializeUI(){this.createStatsDisplay()}initializePlayerSystems(){this.player?(this.setupPlayerLevel(),this.setupPlayerAttack(),this.setupLevelUpCallback(),this.setupInitialSkills()):console.warn("Player not found, cannot initialize player systems")}setupPlayerLevel(){this.playerLevelSystem=new Xz(this,20,20),this.add.existing(this.playerLevelSystem)}setupPlayerAttack(){this.playerAttack=new Zz(this,this.player),this.add.existing(this.playerAttack),this.playerAttackSystem=this.playerAttack}setupLevelUpCallback(){this.playerLevelSystem.onLevelUp((e=>{var t;(null==(t=this.powerUpManager)?void 0:t.skillUpgradeManager)?(this.powerUpManager.skillUpgradeManager.playerLevel=e,this.powerUpManager.skillUpgradeManager.showSkillUpgradeSelection()):console.error("PowerUpManager or SkillUpgradeManager not found!")}))}setupInitialSkills(){var e,t;null==(t=null==(e=this.powerUpManager)?void 0:e.skillUpgradeManager)||t.setupInitialSkills()}initializeCollisionSystem(){["enemies","experienceOrbs","goldOrbs","zombieGroup"].forEach((e=>{this[e]=this.physics.add.group()})),this.staticObstacles=this.physics.add.staticGroup()}createStatsDisplay(){try{this.createStatsContainer(),this.createStatsBackground(),this.createStatsTexts(),this.startStatsUpdateTimer()}catch(e){console.error("Stats display creation failed:",e)}}createStatsContainer(){const{x:e,y:t}=HC.UI.STATS_DISPLAY.POSITION;this.statsContainer=this.add.container(this.cameras.main.width+e,t),this.statsContainer.setScrollFactor(0),this.statsContainer.setDepth(1e3)}createStatsBackground(){const{width:e,height:t}=HC.UI.STATS_DISPLAY.SIZE,{color:s,alpha:n}=HC.UI.STATS_DISPLAY.BACKGROUND,a=this.add.rectangle(-e,0,e,t,s,n);a.setOrigin(0,0),this.statsContainer.add(a)}createStatsTexts(){const e=HC.UI.STATS_DISPLAY.TEXT_STYLE;[{key:"levelText",text:"Level: 1"},{key:"expText",text:"EXP: 0/100"},{key:"killsText",text:"Kills: 0"},{key:"goldText",text:"Gold: 0"},{key:"timeText",text:"Time: 00:00"},{key:"waveText",text:"Wave: 0"}].forEach(((t,s)=>{this[t.key]=this.add.text(-190,10+15*s,t.text,e),this.statsContainer.add(this[t.key])}))}startStatsUpdateTimer(){this.statsUpdateTimer=this.time.addEvent({delay:HC.UI.STATS_DISPLAY.UPDATE_INTERVAL,callback:this.updateStatsDisplay,callbackScope:this,loop:!0})}updateStatsDisplay(){if(this.gameManager)try{const e=Date.now()-this.gameStartTime,t=this.getGameStats();this.updateStatTexts(t,e)}catch(e){console.error("Stats display update failed:",e)}}getGameStats(){var e,t;return(null==(t=null==(e=this.gameplayManager)?void 0:e.mobManager)?void 0:t.getStatistics())||{}}updateStatTexts(e,t){[{element:this.levelText,text:`Level: ${this.getPlayerLevel()}`},{element:this.expText,text:`EXP: ${this.getPlayerExp()}`},{element:this.killsText,text:`Kills: ${e.totalKilled||this.enemiesKilled}`},{element:this.goldText,text:`Gold: ${this.gameManager.gold||0}`},{element:this.timeText,text:`Time: ${this.formatTime(t)}`},{element:this.waveText,text:`Wave: ${e.currentWave||this.currentWave}`}].forEach((e=>{var t;null==(t=e.element)||t.setText(e.text)}))}getPlayerLevel(){var e;return(null==(e=this.playerLevelSystem)?void 0:e.getLevel())||1}getPlayerExp(){return this.playerLevelSystem?`${this.playerLevelSystem.experience}/${this.playerLevelSystem.nextLevelExp}`:"0/100"}formatTime(e){const t=Math.floor(e/1e3),s=t%60;return`${Math.floor(t/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}setupEventListeners(){this.setupWindowEventListeners(),this.setupKeyboardListeners()}setupWindowEventListeners(){window.addEventListener("gameStateUpdated",this.updateStatsDisplay.bind(this)),window.addEventListener("levelUp",this.updateStatsDisplay.bind(this))}setupKeyboardListeners(){this.input.keyboard.on(`keydown-${HC.DEBUG.CONTROLS.TOGGLE_DEBUG}`,(()=>{this.debugMode=!this.debugMode}))}onPlayerCreated(e){this.player=e,this.initializePlayerSystems(),this.setupExperienceCollection()}setupExperienceCollection(){this.player&&this.experienceOrbs&&(this.physics.add.overlap(this.player,this.experienceOrbs,((e,t)=>{this.collectExperience(t)})),this.enemies&&this.physics.add.overlap(this.player,this.enemies,this.handleEnemyCollision.bind(this)),this.zombieGroup&&this.physics.add.overlap(this.player,this.zombieGroup,this.handleZombieCollision.bind(this)))}collectExperience(e){if(this.playerLevelSystem){const t=e.expValue||1;this.playerLevelSystem.addExperience(t)}e.destroy()}handleEnemyCollision(e,t){}handleZombieCollision(e,t){}addExperience(e){var t;null==(t=this.playerLevelSystem)||t.addExperience(e)}trackEnemyKill(e){var t,s;this.enemiesKilled++,null==(t=this.playerLevelSystem)||t.addExperience(HC.PLAYER.COMBAT.EXP_PER_KILL),null==(s=this.gameManager)||s.trackEnemyKill()}removeZombie(e){var t,s;null==(t=this.zombieGroup)||t.remove(e),null==(s=this.enemies)||s.remove(e)}addEnemyToGroups(e){var t,s;e&&(null==(t=this.enemies)||t.add(e),this.isZombieType(e)&&(null==(s=this.zombieGroup)||s.add(e)))}isZombieType(e){return e.isZombie||e.constructor.name.toLowerCase().includes("zombie")}startEnemySpawning(){var e,t,s;if(null==(e=this.gameplayManager)?void 0:e.mobManager)try{return void(null==(s=(t=this.gameplayManager.mobManager).startSpawning)||s.call(t))}catch(n){console.warn("GameplayManager spawning failed:",n)}this.ensureEnemyGroups()}ensureEnemyGroups(){this.enemies||(this.enemies=this.physics.add.group()),this.zombieGroup||(this.zombieGroup=this.physics.add.group())}spawnBasicEnemy(){var e;(null==(e=this.player)?void 0:e.active)&&this.player.isDead}setupPlayerAttack(){var e,t;if(this.player)if(this.playerAttack)console.log("PlayerAttack system already exists");else try{this.playerAttack=new Zz(this,this.player),this.add.existing(this.playerAttack),this.playerAttackSystem=this.playerAttack,null==(t=(e=this.playerAttack).setActive)||t.call(e,!0)}catch(s){console.error("PlayerAttack initialization failed:",s)}else console.warn("Cannot setup player attack - player not found")}showPowerUpSelection(){var e;null==(e=this.powerUpManager)||e.showPowerUpSelection()}getPlayerLevel(){var e;return(null==(e=this.playerLevelSystem)?void 0:e.getLevel())||1}update(e,t){try{this.debugMode&&this.upgradeDebugText&&this.updateDebugDisplay()}catch(s){console.error("BaseGameScene update error:",s)}}updateDebugDisplay(){if(this.upgradeDebugText)try{this.upgradeDebugText.setText(debugInfo)}catch(e){console.error("Debug display update failed:",e)}}getPlayerHealthDisplay(){var e,t;return this.player?`${(null==(e=this.player.health)?void 0:e.toFixed(1))||0}/${(null==(t=this.player.maxHealth)?void 0:t.toFixed(1))||100}`:"0/100"}shutdown(){try{this.cleanupTimers(),this.cleanupEventListeners(),this.cleanupManagers(),this.cleanupPhysicsGroups(),this.cleanupUI(),this.resetState()}catch(e){console.error("BaseGameScene shutdown error:",e)}}cleanupTimers(){["statsUpdateTimer","enemySpawnTimer"].forEach((e=>{this[e]&&(this[e].destroy(),this[e]=null)}))}cleanupEventListeners(){window.removeEventListener("gameStateUpdated",this.updateStatsDisplay),window.removeEventListener("levelUp",this.updateStatsDisplay),this.input.keyboard.removeAllListeners()}cleanupManagers(){["gameplayManager","powerUpManager"].forEach((e=>{var t,s;this[e]&&(null==(s=(t=this[e]).shutdown)||s.call(t),this[e]=null)}))}cleanupPhysicsGroups(){["enemies","experienceOrbs","goldOrbs","zombieGroup"].forEach((e=>{this[e]=null})),this.staticObstacles&&(this.staticObstacles.clear(!0,!0),this.staticObstacles=null)}cleanupUI(){this.statsContainer&&(this.statsContainer.destroy(),this.statsContainer=null)}resetState(){var e;this.collisionLayers=[],this.enemiesKilled=0,this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.gameStartTime=0,null==(e=this.gameManager)||e.saveGame(),this.gameManager&&(this.gameManager.currentWave=0)}registerCollisionLayer(e,t){e&&this.collisionLayers.push({layer:e,name:t})}registerStaticObstacle(e,t){e&&this.staticObstacles&&this.staticObstacles.add(e)}setupZombieObstacleCollisions(){this.zombieGroup&&this.staticObstacles&&this.physics.add.collider(this.zombieGroup,this.staticObstacles),this.collisionLayers.forEach((({layer:e})=>{this.zombieGroup&&e&&this.physics.add.collider(this.zombieGroup,e)}))}}class Jz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??24,s??24,n||"Player_Character_Idle_Animation_v01",a??0),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(24,24,!1),this.body.setOffset(12,12);const i=e.cameras.main;i.startFollow(this,!0,.1,.1),i.setZoom(3.15),i.fadeIn(1e3),this.moveSpeed=150,this.lastDirection="down",this.isMovingToTarget=!1,this.maxHealth=100,this.health=this.maxHealth,this.isInvulnerable=!1,this.invulnerabilityTime=500,this.isDead=!1,this.damage=10,this.armor=0,this.critChance=.05,this.critDamage=1.5,this.fireRate=1,this.attackRange=100,this.pickupRange=50,this.isMoving=!1,this.animationSpeed=200,this.currentAnimFrame=0,this.animationTimer=0,this.gameManager=e.game.registry.get("gameManager"),this.gameManager&&(this.gameManager.applyPlayerStats(this),this.isDead=!1,this.alive=!0,this.isInvulnerable=!1,console.log("Player stats after applying menu upgrades:",{maxHealth:this.maxHealth,health:this.health,damage:this.damage,moveSpeed:this.moveSpeed,armor:this.armor,isAlive:!this.isDead})),this.updateHPBar(),this.createAnimations(),this.createShadow(),this.setupMouseTracking(),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this),e.events.on("update",this.update,this),e.add.existing(this),this.baseMoveSpeed=this.moveSpeed,this.basePickupRange=this.pickupRange,e.player=this,e.onPlayerCreated&&"function"==typeof e.onPlayerCreated?e.onPlayerCreated(this):console.log("PlayerPrefab: Scene does not have onPlayerCreated method, but scene.player is set")}updateHPBar(){const e={currentHP:this.health,maxHP:this.maxHealth,health:this.health,maxHealth:this.maxHealth,hp:this.health,maxHp:this.maxHealth};PC.emit("player-health-updated",e),PC.emit("player-hp-changed",e),this.gameManager&&this.gameManager.playerStats&&(this.gameManager.playerStats.health=this.health,this.gameManager.playerStats.maxHealth=this.maxHealth),window.dispatchEvent(new CustomEvent("playerHealthUpdated",{detail:e}))}createAnimations(){this.scene.anims.exists("PlayerRunningAni")||this.scene.anims.create({key:"PlayerRunningAni",frames:this.scene.anims.generateFrameNumbers("Player_Character_Running_Animation_v01",{start:0,end:-1}),frameRate:10,repeat:-1}),this.scene.anims.exists("PlayerIdleAni")||this.scene.anims.create({key:"PlayerIdleAni",frames:[{key:"Player_Character_Idle_Animation_v01",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("PlayerDeathAni")||this.scene.anims.create({key:"PlayerDeathAni",frames:this.scene.anims.generateFrameNumbers("Player_Character_Death_Animation_v01",{start:0,end:-1}),frameRate:6,repeat:0})}setupMouseTracking(){this.scene.input.on("pointermove",(e=>{if(!this.isDead&&this.isMovingToTarget){const t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x-this.x,n=t.y-this.y;Math.abs(s)>Math.abs(n)?this.lastDirection=s>0?"right":"left":this.lastDirection=n>0?"down":"up"}}))}handlePointerDown(e){if(e.leftButtonDown()&&!this.isDead){const t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x,n=t.y;if(Phaser.Math.Distance.Between(this.x,this.y,s,n)>10){this.isMovingToTarget=!0;const e=s-this.x,t=n-this.y;Math.abs(e)>Math.abs(t)?this.lastDirection=e>0?"right":"left":this.lastDirection=t>0?"down":"up",this.updatePlayerAnimation()}}}handlePointerUp(e){e.leftButtonDown()||(this.isMovingToTarget=!1)}update(e,t){if(this.isDead)return;if(!this.scene||!this.scene.input||!this.scene.input.keyboard)return;const s=this.scene.input.keyboard,n=s.addKey("W").isDown,a=s.addKey("S").isDown,i=s.addKey("A").isDown,r=s.addKey("D").isDown;this.body.velocity.x=0,this.body.velocity.y=0;let o=n||a||i||r,l=0,c=0,h=this.isMoving;if(this.isMoving=!1,o){if(this.isMovingToTarget=!1,i&&(l-=1),r&&(l+=1),n&&(c-=1),a&&(c+=1),0!==l||0!==c){this.isMoving=!0;const e=new Phaser.Math.Vector2(l,c).normalize();this.body.velocity.x=e.x*this.moveSpeed,this.body.velocity.y=e.y*this.moveSpeed,Math.abs(e.x)>Math.abs(e.y)?this.lastDirection=e.x>0?"right":"left":this.lastDirection=e.y>0?"down":"up"}}else if(this.isMovingToTarget&&this.scene.input&&this.scene.input.activePointer){const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x,n=t.y;if(Phaser.Math.Distance.Between(this.x,this.y,s,n)>5){this.isMoving=!0;const e=Phaser.Math.Angle.Between(this.x,this.y,s,n);this.body.velocity.x=Math.cos(e)*this.moveSpeed,this.body.velocity.y=Math.sin(e)*this.moveSpeed;const t=s-this.x,a=n-this.y;Math.abs(t)>Math.abs(a)?this.lastDirection=t>0?"right":"left":this.lastDirection=a>0?"down":"up"}}this.updatePlayerAnimation(e,t),h!==this.isMoving&&this.updatePlayerFrame(),this.updateShadowPosition()}updatePlayerAnimation(e,t){this.isDead||(this.isMoving?(this.setFlipX("left"===this.lastDirection),this.scene.anims.exists("PlayerRunningAni")&&(this.anims.isPlaying&&"PlayerRunningAni"===this.anims.currentAnim.key||this.anims.play("PlayerRunningAni"))):(this.scene.anims.exists("PlayerIdleAni")?this.anims.isPlaying&&"PlayerIdleAni"===this.anims.currentAnim.key||this.anims.play("PlayerIdleAni"):(this.anims.isPlaying&&this.anims.stop(),this.setFrame(0)),this.setFlipX("left"===this.lastDirection)))}updatePlayerFrame(){if(!this.isDead&&!this.anims.isPlaying){let e=this.isMoving?this.currentAnimFrame:0;switch(this.lastDirection){case"right":this.setFrame(2+e);break;case"left":this.setFrame(1+e);break;case"up":this.setFrame(3+e);break;case"down":this.setFrame(0+e)}}}takeDamage(e,t="Unknown"){if(this.isInvulnerable||this.isDead)return;const s=Math.max(1,e-(this.armor||0));this.health-=s,this.gameManager&&this.gameManager.isGameRunning&&(this.gameManager.currentRunStats.damageTaken+=s),console.log(`Player took ${s} damage from ${t}. Health: ${this.health}/${this.maxHealth}`),this.updateHPBar(),this.showDamageEffect(s),this.setTint(16711680);const n=("up"===this.lastDirection||"down"===this.lastDirection||this.lastDirection,0);if(this.scene.tweens.add({targets:this,x:this.x+("left"===this.lastDirection||"right"===this.lastDirection?0*n:0),y:this.y+("up"===this.lastDirection||"down"===this.lastDirection?0*n:0),duration:100,yoyo:!0,ease:"Power2"}),this.scene.sound&&this.scene.sound.add)try{this.scene.cache.audio.exists("player_hit")&&this.scene.sound.add("player_hit").play({volume:.5})}catch(a){console.warn("Could not play hit sound:",a)}this.makeInvulnerable(),this.health<=0&&this.die(t)}makeInvulnerable(){this.isInvulnerable||(this.isInvulnerable=!0,this.scene.tweens.add({targets:this,alpha:.3,duration:100,yoyo:!0,repeat:9,ease:"Power2",onComplete:()=>{this.alpha=1,this.clearTint()}}),this.scene.time.delayedCall(this.invulnerabilityTime,(()=>{this.isInvulnerable=!1})))}showDamageEffect(e){try{const t=this.scene.add.text(this.x,this.y-30,`-${e}`,{fontFamily:"Arial",fontSize:"18px",color:"#ff4444",stroke:"#000000",strokeThickness:2,fontStyle:"bold"});t.setOrigin(.5),t.setDepth(1e3),this.scene.tweens.add({targets:t,y:t.y-50,x:t.x+Phaser.Math.Between(-10,10),alpha:0,scale:{from:1,to:1.5},duration:1500,ease:"Power2",onComplete:()=>{t.destroy()}}),e>20&&this.scene.cameras.main.shake(200,.01)}catch(t){console.error("Error showing damage effect:",t)}}die(e="Skill Issue"){this.isDead||(this.isDead=!0,this.health=0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,duration:500,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.updateHPBar(),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.input.keyboard.enabled=!1,this.scene.input.off("pointerdown",this.handlePointerDown,this),this.scene.input.off("pointerup",this.handlePointerUp,this),this.scene.enemySpawnTimer&&(this.scene.enemySpawnTimer.paused=!0),this.scene.orbSpawnTimer&&(this.scene.orbSpawnTimer.paused=!0),this.scene.difficultyTimer&&(this.scene.difficultyTimer.paused=!0),this.scene.enemies&&this.scene.enemies.getChildren().forEach((e=>{e.body&&(e.body.enable=!1),e.updateListener&&this.scene.events.off("update",e.updateListener)})),this.scene.anims.exists("PlayerDeathAni")?(this.anims.play("PlayerDeathAni"),this.on("animationcomplete",(t=>{"PlayerDeathAni"===t.key&&this.scene.time.delayedCall(500,(()=>{this.gameManager&&this.gameManager.handlePlayerDeath(e),this.applyDeathEffects()}))}))):this.scene.time.delayedCall(1e3,(()=>{this.gameManager&&this.gameManager.handlePlayerDeath(e),this.applyDeathEffects()})))}applyDeathEffects(){this.shadow&&(this.shadow.destroy(),this.shadow=null),this.scene.tweens.add({targets:this,angle:90,alpha:.3,scaleX:0,scaleY:0,duration:500,ease:"Power2"}),this.scene.time.delayedCall(500,(()=>{window.returnToMenu&&window.returnToMenu()}))}heal(e){if(this.isDead)return;const t=this.health;this.health=Math.min(this.health+e,this.maxHealth);const s=this.health-t;s>0&&(console.log(`Player healed for ${s}. Health: ${this.health}/${this.maxHealth}`),this.updateHPBar(),this.showHealEffect(s),this.setTint(65280),this.scene.tweens.add({targets:this,scaleX:1.1,scaleY:1.1,duration:150,yoyo:!0,ease:"Power2"}),this.scene.time.delayedCall(200,(()=>{this.clearTint()})))}showHealEffect(e){try{const t=this.scene.add.text(this.x,this.y-30,`+${e}`,{fontFamily:"Arial",fontSize:"16px",color:"#44ff44",stroke:"#000000",strokeThickness:2,fontStyle:"bold"});t.setOrigin(.5),t.setDepth(1e3),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,scale:{from:1,to:1.2},duration:1200,ease:"Power2",onComplete:()=>{t.destroy()}})}catch(t){console.error("Error showing heal effect:",t)}}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,20,8),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+12);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class eV extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t??1009,s??1208),En(this,"rock_pillars_coming_from_darkness_bg_00"),En(this,"statues_far_from_platforms_bg_40"),En(this,"crystals1_improved_refraction_80"),En(this,"crystals1_improved_refraction_110"),En(this,"crystals1_improved_refraction_60"),En(this,"crystals1_improved_refraction"),En(this,"crystals1_improved_refraction_1"),En(this,"crystals1_improved_refraction_2"),En(this,"crystals1_improved_refraction_3"),En(this,"crystals1_improved_refraction_4"),En(this,"crystals1_improved_refraction_5"),En(this,"crystals1_improved_refraction_6"),En(this,"crystals1_improved_refraction_7"),En(this,"crystals1_improved_refraction_8"),En(this,"crystals1_improved_refraction_9"),En(this,"crystals1_improved_refraction_10"),En(this,"crystals1_improved_refraction_11"),En(this,"crystals1_improved_refraction_12"),En(this,"crystals1_improved_refraction_13"),En(this,"crystals1_improved_refraction_14"),En(this,"crystals1_improved_refraction_15"),En(this,"crystals1_improved_refraction_16"),En(this,"crystals1_improved_refraction_17"),En(this,"crystals1_improved_refraction_18"),En(this,"crystals1_improved_refraction_19"),En(this,"crystals1_improved_refraction_20"),En(this,"crystals1_improved_refraction_21"),En(this,"crystals1_improved_refraction_22"),this.blendMode=Phaser.BlendModes.SKIP_CHECK;const n=e.add.image(14,124,"rock pillars coming from darkness-bg_0",0);this.add(n);const a=e.add.image(16,-18,"statues-far from platforms-bg_4",0);this.add(a);const i=e.add.image(-12,71,"Crystals1-improved refraction_8",0);this.add(i);const r=e.add.image(5,86,"Crystals1-improved refraction_11",0);this.add(r);const o=e.add.image(27,87,"Crystals1-improved refraction_6",0);this.add(o);const l=e.add.image(42,71,"Crystals1-improved refraction_8",0);this.add(l);const c=e.add.image(-22,97,"Crystals1-improved refraction_6",0);this.add(c);const h=e.add.image(4,111,"Crystals1-improved refraction_6",0);this.add(h);const u=e.add.image(29,117,"Crystals1-improved refraction_6",0);this.add(u);const d=e.add.image(-24,119,"Crystals1-improved refraction_6",0);this.add(d);const p=e.add.image(-31,148,"Crystals1-improved refraction_6",0);this.add(p);const f=e.add.image(2,139,"Crystals1-improved refraction_6",0);this.add(f);const m=e.add.image(24,139,"Crystals1-improved refraction_11",0);this.add(m);const g=e.add.image(48,96,"Crystals1-improved refraction_11",0);this.add(g);const y=e.add.image(57,119,"Crystals1-improved refraction_11",0);this.add(y);const b=e.add.image(41,143,"Crystals1-improved refraction_11",0);this.add(b);const v=e.add.image(64,151,"Crystals1-improved refraction_11",0);this.add(v);const w=e.add.image(-15,154,"Crystals1-improved refraction_11",0);this.add(w);const x=e.add.image(-31,176,"Crystals1-improved refraction_11",0);this.add(x);const k=e.add.image(-9,192,"Crystals1-improved refraction_11",0);this.add(k);const A=e.add.image(18,200,"Crystals1-improved refraction_11",0);this.add(A);const E=e.add.image(39,196,"Crystals1-improved refraction_11",0);this.add(E);const S=e.add.image(66,175,"Crystals1-improved refraction_11",0);this.add(S);const P=e.add.image(2,169,"Crystals1-improved refraction_6",0);this.add(P);const T=e.add.image(35,167,"Crystals1-improved refraction_8",0);this.add(T);const B=e.add.image(14,60,"Crystals1-improved refraction_11",0);this.add(B);const C=e.add.image(-13,50,"Crystals1-improved refraction_11",0);this.add(C);const M=e.add.image(33,54,"Crystals1-improved refraction_6",0);this.add(M),this.rock_pillars_coming_from_darkness_bg_00=n,this.statues_far_from_platforms_bg_40=a,this.crystals1_improved_refraction_80=i,this.crystals1_improved_refraction_110=r,this.crystals1_improved_refraction_60=o,this.crystals1_improved_refraction=l,this.crystals1_improved_refraction_1=c,this.crystals1_improved_refraction_2=h,this.crystals1_improved_refraction_3=u,this.crystals1_improved_refraction_4=d,this.crystals1_improved_refraction_5=p,this.crystals1_improved_refraction_6=f,this.crystals1_improved_refraction_7=m,this.crystals1_improved_refraction_8=g,this.crystals1_improved_refraction_9=y,this.crystals1_improved_refraction_10=b,this.crystals1_improved_refraction_11=v,this.crystals1_improved_refraction_12=w,this.crystals1_improved_refraction_13=x,this.crystals1_improved_refraction_14=k,this.crystals1_improved_refraction_15=A,this.crystals1_improved_refraction_16=E,this.crystals1_improved_refraction_17=S,this.crystals1_improved_refraction_18=P,this.crystals1_improved_refraction_19=T,this.crystals1_improved_refraction_20=B,this.crystals1_improved_refraction_21=C,this.crystals1_improved_refraction_22=M,e.physics.add.existing(this,!1),this.body=this.body||{},this.body.allowGravity=!1,this.body.setSize(120,75),this.body.setOffset(-45,135),this.body.moves=!1,this.body.immovable=!0,this.isStatueInvisible=!1,this.isPlayerInvisible=!1,this.statueTop=this.y-95,this.statueBottom=this.y+200,this.updateListener=()=>this.checkPlayerPosition(),e.events.on("update",this.updateListener)}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}checkPlayerPosition(){if(!this.player||!this.scene)return;const e=Math.abs(this.player.x+10-this.x-25)<55;this.player.y>this.statueTop&&this.player.y<this.statueBottom&&e?(this.isStatueInvisible||this.scene.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isStatueInvisible=!0}}),this.isPlayerInvisible||this.scene.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isStatueInvisible&&this.scene.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isStatueInvisible=!1}}),this.isPlayerInvisible&&this.scene.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}destroy(){this.scene&&this.scene.events.off("update",this.updateListener),super.destroy()}}class tV extends Phaser.GameObjects.Image{constructor(e,t,s,n,a){const i=n||"Health_Potion_01",r=e.textures.exists(i);super(e,t??16,s??16,r?i:"__WHITE",a),r||this.setTint(65280),e.physics.add.existing(this,!1),this.body.setCircle(6),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.healValue=15,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener),this.setScale(.25)}setHealValue(e){this.healValue=e;const t=.2+Math.min(e,50)/50*.15;return this.setScale(t),this.scene.textures.exists("Health_Potion_01")||(e>=50?this.setTint(65416):e>=25?this.setTint(56678):e>=10?this.setTint(47940):this.setTint(43571)),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,a=Math.sqrt(t*t+n*n),i=t/a,r=n/a,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=i*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in HealthOrb update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.healValue;this.isBeingCollected=!0;try{const e=this.scene.player;if(e&&e.heal)e.heal(this.healValue);else if(e&&void 0!==e.health){const t=e.maxHealth||100,s=e.health;e.health=Math.min(e.health+this.healValue,t);const n=e.health-s;this.scene.gameManager&&this.scene.gameManager.updateHealthDisplay&&this.scene.gameManager.updateHealthDisplay(),this.createFloatingText(`+${n} HP`)}else this.scene.gameManager&&this.scene.gameManager.healPlayer?(this.scene.gameManager.healPlayer(this.healValue),this.createFloatingText(`+${this.healValue} HP`)):(console.warn("No healing system found to heal player"),this.createFloatingText(`+${this.healValue} HP`));this.scene.sound&&this.scene.sound.get("heal")&&this.scene.sound.play("heal",{volume:.4}),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting health orb:",e),this.cleanupAndDestroy()}return this.healValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#00ff00",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}const sV=class e extends Phaser.GameObjects.Image{constructor(e,t,s,n,a){super(e,t??16,s??16,n||"Vase",a??0);try{if(!e||!e.physics)return void console.error("BreakableVase: Scene or physics not ready");this.maxHealth=1,this.health=this.maxHealth,this.isBroken=!1,this.canBeAttacked=!0,this.originalTint=16777215,this.dropChance={gold:.4,experience:.7,healing:.2},this.dropAmounts={gold:{min:1,max:3},experience:{min:2,max:5},healing:{min:10,max:25}},this.setTint(this.originalTint),this.setInteractive(),this.randomizeTexture(),this.createPhysicsBodyImmediate(e)}catch(i){console.error("Error in BreakableVase constructor:",i)}}createPhysicsBodyImmediate(e){try{e.breakableVases||(e.breakableVases=e.physics.add.staticGroup(),console.log("BreakableVase: Created breakableVases group")),e.physics.add.existing(this,!0),this.body?(this.body.setSize(28,28),this.body.setOffset(2,2),e.breakableVases.add(this)):e.time.delayedCall(50,(()=>{this.createPhysicsBody(e)}))}catch(t){this.canBeAttacked=!0,this.isInCollisionSystem=!0}}createPhysicsBody(e){try{if(!e||!e.physics||this.body)return;if(e.physics.add.existing(this,!0),!this.body)return;this.body.setSize(28,28),this.body.setOffset(2,2),e.time.delayedCall(16,(()=>{this.addToVaseGroup(e)}))}catch(t){console.error("Error creating physics body for BreakableVase:",t)}}addToVaseGroup(e){try{if(!e.physics.world||e.physics.world.isPaused)return void e.time.delayedCall(50,(()=>this.addToVaseGroup(e)));if(!this.body||!this.body.enable)return;this.addToPhysicsGroup(e)||(this.canBeAttacked=!0,this.isInCollisionSystem=!0)}catch(t){console.error("Error adding BreakableVase to group:",t),this.canBeAttacked=!0,this.isInCollisionSystem=!0}}addToPhysicsGroup(e){try{if(e.breakableVases||(e.breakableVases=e.physics.add.staticGroup(),console.log("BreakableVase: Created breakableVases group in addToPhysicsGroup")),!e.breakableVases.children)return console.warn("BreakableVase: Group children not available"),!1;if(e.breakableVases&&e.breakableVases.add&&"function"==typeof e.breakableVases.add){let s=!1;try{s=e.breakableVases.contains&&e.breakableVases.contains(this)}catch(t){console.warn("Contains check failed, proceeding with add:",t),s=!1}return s?(console.log("BreakableVase: Already in group"),!0):(e.breakableVases.add(this),console.log("BreakableVase: Successfully added to group"),!0)}return console.warn("BreakableVase: Group add method not available"),!1}catch(s){return console.error("Error in addToPhysicsGroup:",s),!1}}randomizeTexture(){try{const t=e.VASE_FRAMES.filter((t=>!e.EXCLUDED_FRAMES.includes(t))),s=t[Math.floor(Math.random()*t.length)];this.scene.textures.exists(this.texture.key)&&this.scene.textures.get(this.texture.key).has(s)&&this.setFrame(s)}catch(t){this.setFrame(0)}}takeDamage(e=1){return!(this.isBroken||!this.canBeAttacked)&&(this.health-=e,this.setTint(16737894),this.scene.time.delayedCall(100,(()=>{this.active&&this.setTint(this.originalTint)})),this.health<=0&&(this.breakVase(),!0))}breakVase(){if(!this.isBroken){if(this.isBroken=!0,this.canBeAttacked=!1,this.createBreakEffect(),this.dropLoot(),this.scene.breakableVases&&this.scene.breakableVases.remove)try{this.scene.breakableVases.remove(this)}catch(e){console.warn("Error removing vase from group:",e)}if(this.body&&this.scene.physics&&this.scene.physics.world)try{this.scene.physics.world.disable(this)}catch(e){console.warn("Error disabling physics body:",e)}this.destroy()}}createBreakEffect(){try{const e=this.scene.add.particles(this.x,this.y,"__WHITE",{speed:{min:50,max:100},scale:{start:.3,end:0},lifespan:300,quantity:8,tint:[9127187,10506797,13468991]});this.scene.time.delayedCall(500,(()=>{e.active&&e.destroy()})),this.scene.sound&&this.scene.sound.get("vase_break")&&this.scene.sound.play("vase_break",{volume:.3})}catch(e){console.error("Error creating break effect:",e)}}dropLoot(){try{let n=0;if(Math.random()<this.dropChance.gold){const t=Phaser.Math.Between(this.dropAmounts.gold.min,this.dropAmounts.gold.max);for(let s=0;s<t;s++){const t=Phaser.Math.Between(-16,16),s=Phaser.Math.Between(-16,16);try{const e=new zz(this.scene,this.x+t,this.y+s);e.setGoldValue(1),this.scene.add.existing(e),n++}catch(e){console.error("Error creating gold orb:",e)}}}if(Math.random()<this.dropChance.experience){const e=Phaser.Math.Between(this.dropAmounts.experience.min,this.dropAmounts.experience.max),s=Phaser.Math.Between(-16,16),a=Phaser.Math.Between(-16,16);try{const t=new Hz(this.scene,this.x+s,this.y+a);t.setExpValue(e),this.scene.add.existing(t),n++}catch(t){console.error("Error creating experience orb:",t)}}if(Math.random()<this.dropChance.healing){const e=Phaser.Math.Between(this.dropAmounts.healing.min,this.dropAmounts.healing.max),t=Phaser.Math.Between(-16,16),a=Phaser.Math.Between(-16,16);try{const s=new tV(this.scene,this.x+t,this.y+a);s.setHealValue(e),this.scene.add.existing(s),n++}catch(s){console.error("Error creating health orb:",s)}}}catch(n){console.error("Error dropping loot:",n)}}createFloatingText(e,t=this.x,s=this.y-20,n="#ffffff"){try{const a=this.scene.add.text(t,s,e,{fontFamily:"Arial, sans-serif",fontSize:"12px",color:n,stroke:"#000000",strokeThickness:1});a.setOrigin(.5),this.scene.tweens.add({targets:a,y:a.y-30,alpha:0,duration:1e3,onComplete:()=>{a.destroy()}})}catch(a){console.error("Error creating floating text:",a)}}onPlayerAttack(e=1){return this.takeDamage(e)}static spawnVasesOnTilemap(t,s,n=.3){t.breakableVases||(t.breakableVases=t.physics.add.staticGroup());const a=s.tilemap,i=s.layer;for(let r=0;r<i.height;r++)for(let s=0;s<i.width;s++){const o=a.getTileAt(s,r,!1,i.name);if(o&&o.index>0&&Math.random()<n){const n=o.pixelX+o.width/2,l=o.pixelY+o.height/2,c=new e(t,n,l,"Vase");t.add.existing(c),a.removeTileAt(s,r,!1,i.name)}}}};En(sV,"VASE_FRAMES",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]),En(sV,"EXCLUDED_FRAMES",[21,22,23,24]);let nV=sV;class aV{constructor(e){if(this.scene=e,this.spawnedVases=[],this.maxVases=25,this.spawnChance=.1,this.respawnEnabled=!1,this.respawnDelay=3e4,this.respawnChance=.1,e&&e.physics){if(!e.breakableVases)try{e.breakableVases=e.physics.add.staticGroup(),console.log("VaseSpawner: Created breakableVases group")}catch(t){return void console.error("VaseSpawner: Error creating breakableVases group:",t)}this.respawnEnabled&&this.setupRespawnTimer()}else console.error("VaseSpawner: Scene or physics not ready")}spawnVasesOnTilemap(e,t={}){const s={spawnChance:t.spawnChance||this.spawnChance,maxVases:t.maxVases||this.maxVases,textureKey:t.textureKey||"Vase",excludeTileIndices:t.excludeTileIndices||[0],targetTileIndex:t.targetTileIndex||null,...t};if(!e||!e.tilemap||!e.layer)return console.error("VaseSpawner: Invalid tilemap layer provided"),0;const n=e.tilemap,a=e.layer;let i=0,r=0;const o=Math.min(a.height,100),l=Math.min(a.width,100);for(let h=0;h<o;h++){for(let t=0;t<l&&!(i>=s.maxVases);t++){const o=n.getTileAt(t,h,!1,a.name);if(o&&void 0!==o.index&&null!==o.index&&0!==o.index){r++;const l=o.width||32,u=o.height||32,d=void 0!==o.pixelX?o.pixelX:t*l,p=void 0!==o.pixelY?o.pixelY:h*u;r<=5&&console.log(`Tile at ${t},${h}: index ${o.index}, pixelX: ${d}, pixelY: ${p}`);let f=!1;if(f=null!==s.targetTileIndex?o.index===s.targetTileIndex:!s.excludeTileIndices.includes(o.index),f&&Math.random()<s.spawnChance){const r=d+l/2+(e.x||0),o=p+u/2+(e.y||0),f=this.createVase(r,o,s.textureKey);if(f&&(f.spawnPosition={x:r,y:o},this.spawnedVases.push(f.spawnPosition),i++,!1!==s.removeTiles))try{n.removeTileAt(t,h,!1,a.name)}catch(c){console.warn("Failed to remove tile:",c)}}}}if(i>=s.maxVases)break}return console.log(`VaseSpawner: Spawned ${i} vases from ${r} tiles checked`),i}createVase(e,t,s="Vase"){try{if(!this.scene||!this.scene.physics||!this.scene.add)return console.error("VaseSpawner: Scene not ready for vase creation"),null;if(!this.scene.textures.exists(s)&&(console.warn(`VaseSpawner: Texture '${s}' does not exist, using default`),s="Vase",!this.scene.textures.exists(s)))return console.error("VaseSpawner: No valid texture available"),null;const n=new nV(this.scene,e,t,s);return n?(this.scene.add.existing(n),n.setVisible(!0),n.setActive(!0),n):(console.error("VaseSpawner: Failed to create vase"),null)}catch(n){return console.error("Error creating vase:",n),null}}setupVaseCollision(e){if(e&&e.active){if(!this.scene.breakableVases){console.warn("VaseSpawner: breakableVases group not found, creating it");try{this.scene.breakableVases=this.scene.physics.add.staticGroup()}catch(t){return void console.error("VaseSpawner: Failed to create breakableVases group:",t)}}try{this.scene.breakableVases&&this.scene.breakableVases.add?(this.scene.breakableVases.add(e),console.log("VaseSpawner: Vase added to collision group")):console.warn("VaseSpawner: breakableVases group has no add method")}catch(t){console.error("VaseSpawner: Error adding vase to collision group:",t)}}else console.warn("VaseSpawner: Invalid vase provided to setupVaseCollision")}setupRespawnTimer(){this.respawnEnabled&&(this.respawnTimer=this.scene.time.addEvent({delay:this.respawnDelay,callback:this.attemptRespawn,callbackScope:this,loop:!0}))}attemptRespawn(){if(!this.respawnEnabled||0===this.spawnedVases.length)return;let e=0;try{e=this.getGroupSize(this.scene.breakableVases)}catch(n){console.warn("VaseSpawner: Error getting current vase count for respawn:",n),e=0}const t=Math.floor(this.maxVases/4);let s=0;for(const a of this.spawnedVases){if(s>=t)break;if(e+s>=this.maxVases)break;let i=null;try{i=this.findVaseAtPosition(a.x,a.y)}catch(n){console.warn("VaseSpawner: Error checking for existing vase:",n)}!i&&Math.random()<this.respawnChance&&this.createVase(a.x,a.y)&&(s++,this.createSpawnEffect(a.x,a.y))}s>0&&console.log(`VaseSpawner: Respawned ${s} vases`)}getGroupSize(e){if(!e)return 0;try{if(e.children){if(void 0!==e.children.size)return e.children.size;if(e.children.entries&&Array.isArray(e.children.entries))return e.children.entries.length;if(e.children.list&&Array.isArray(e.children.list))return e.children.list.length}return void 0!==e.size?e.size:void 0!==e.length?e.length:0}catch(t){return console.warn("VaseSpawner: Error getting group size:",t),0}}findVaseAtPosition(e,t){if(!this.scene.breakableVases)return null;try{const s=this.scene.breakableVases;let n=[];s.children?s.children.entries&&Array.isArray(s.children.entries)?n=s.children.entries:s.children.list&&Array.isArray(s.children.list)&&(n=s.children.list):Array.isArray(s)&&(n=s);for(const a of n)if(a&&a.active&&Phaser.Math.Distance.Between(a.x,a.y,e,t)<32)return a;return null}catch(s){return console.warn("VaseSpawner: Error finding vase at position:",s),null}}createSpawnEffect(e,t){try{const s=this.scene.add.circle(e,t,20,65280,.3);this.scene.tweens.add({targets:s,scale:{from:0,to:1.5},alpha:{from:.5,to:0},duration:500,onComplete:()=>s.destroy()})}catch(s){console.error("Error creating spawn effect:",s)}}destroy(){try{if(this.respawnTimer&&(this.respawnTimer.destroy(),this.respawnTimer=null),this.scene.breakableVases)try{this.scene.breakableVases.clear(!0,!0)}catch(e){console.warn("VaseSpawner: Error clearing breakableVases group:",e)}this.spawnedVases=[],console.log("VaseSpawner: Cleanup completed")}catch(e){console.error("VaseSpawner: Error during destroy:",e)}}getStatistics(){const e=this.getGroupSize(this.scene.breakableVases);return{maxVases:this.maxVases,activeVases:e,totalSpawnPositions:this.spawnedVases.length,respawnEnabled:this.respawnEnabled,spawnChance:this.spawnChance}}}class iV extends Yz{constructor(){super("MainMapScene"),En(this,"map_Col_1"),En(this,"walkingArea_1"),En(this,"backGround_1"),En(this,"backGround"),En(this,"wall_RD_1"),En(this,"wall_Upper_1"),En(this,"wall_RU_1"),En(this,"wall_down_1"),En(this,"survive_Zone_1"),En(this,"gold_AC_1"),En(this,"map"),En(this,"bed_1"),En(this,"vase_AC_1"),En(this,"playerPrefab"),En(this,"stoneStatuePrefab"),En(this,"stoneStatuePrefab_1"),En(this,"stoneStatuePrefab_2"),En(this,"stoneStatuePrefab_3"),En(this,"torchAnim"),En(this,"vase_1"),En(this,"mainMap"),this.initializeSceneState()}initializeSceneState(){this.portals=[],this.activePortal=null,this.portalTimer=null,this.portalActivationInterval=HC.PORTAL.ACTIVATION_INTERVAL,this.availableScenes=HC.PORTAL.AVAILABLE_SCENES,this.isTeleporting=!1,this.vaseSpawner=null,this.playerLevelSystem=null,this.mobManager=null,this.gameTimer=null,this.gameStartTime=0,this.gameTime=0,this.isGameRunning=!1,this.enemySpawnTimer=null,this.waveTimer=null,this.difficultyTimer=null}create(){this.setupWorld(),super.create(),this.editorCreate(),this.initializeAllSystems()}setupWorld(){const{WIDTH:e,HEIGHT:t}=HC.WORLD;this.cameras.main.setBounds(0,0,e,t),this.physics.world.setBounds(e,t)}initializeAllSystems(){try{this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),["setupPlayerAttack","setupZombieCollisionSystem","setupHPBarIntegration","setupPlayerLevelSystem","setupVaseSpawning","initializeMobManager","setupLavaAnimations","ensureEnemyGroups"].forEach((e=>{"function"==typeof this[e]&&this[e]()})),this.startEnemySpawning()}catch(e){console.error("Error initializing systems:",e)}}initializeMobManager(){if(this.gameManager&&this.player)try{this.mobManager=new Gz(this),this.mobManager.initialize(this.gameManager,this.player),this.walkingArea_1&&this.mobManager.setWalkingAreaFromTilemap(this.walkingArea_1),this.gameplayManager={mobManager:this.mobManager},this.mobManager.startWave(HC.WAVE.INITIAL_WAVE)}catch(e){console.error("MobManager initialization failed:",e)}}startEnemySpawning(){this.startGameTimer(),this.startMobSpawning(),this.startWaveTimer(),PC.emit("timer-start",{gameTime:this.gameTime,currentWave:this.currentWave||HC.WAVE.INITIAL_WAVE,isGameRunning:!0})}startGameTimer(){this.gameStartTime=Date.now(),this.gameTime=0,this.isGameRunning=!0,this.gameTimer=this.time.addEvent({delay:1e3,callback:this.updateGameTime,callbackScope:this,loop:!0})}startMobSpawning(){this.mobManager?this.mobManager.startWave(HC.WAVE.INITIAL_WAVE):(console.warn("MobManager not available, starting basic spawning"),this.startBasicEnemySpawning())}startWaveTimer(){this.waveTimer=this.time.addEvent({delay:HC.WAVE.ADVANCE_TIMER,callback:this.advanceWave,callbackScope:this,loop:!0})}updateGameTime(){this.isGameRunning&&(this.gameTime=Math.floor((Date.now()-this.gameStartTime)/1e3),this.updateTimerDisplay())}updateTimerDisplay(){try{const e=Math.floor(this.gameTime/60),t=this.gameTime%60,s=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;PC.emit("timer-updated",{gameTime:this.gameTime,formattedTime:s,currentWave:this.currentWave||HC.WAVE.INITIAL_WAVE,isGameRunning:this.isGameRunning})}catch(e){console.error("Error updating timer display:",e)}}startBasicEnemySpawning(){try{this.enemySpawnTimer=this.time.addEvent({delay:1e3,callback:()=>{console.log("Basic enemy spawn triggered")},loop:!0})}catch(e){console.error("Error in basic enemy spawning:",e)}}ensureEnemyGroups(){var e,t,s;try{!this.enemies&&(null==(e=this.gameplayManager)?void 0:e.enemies)?this.enemies=this.gameplayManager.enemies:this.enemies||(this.enemies=this.physics.add.group()),(null==(s=null==(t=this.gameplayManager)?void 0:t.mobManager)?void 0:s.mobGroup)&&(this.enemies=this.gameplayManager.mobManager.mobGroup),this.zombieGroup||(this.zombieGroup=this.physics.add.group()),this.breakableVases||(this.breakableVases=this.physics.add.staticGroup()),this.connectAttackSystem()}catch(n){console.error("Error ensuring enemy groups:",n)}}connectAttackSystem(){try{this.playerAttackSystem?this.playerAttackSystem.scene=this:console.warn("PlayerAttack system not yet created")}catch(e){console.error("Error connecting attack system:",e)}}advanceWave(){this.currentWave=(this.currentWave||HC.WAVE.INITIAL_WAVE)+1,PC.emit("wave-updated",{wave:this.currentWave})}trackEnemyKill(e){"function"==typeof this.removeZombie&&this.removeZombie(e),"function"==typeof super.trackEnemyKill&&super.trackEnemyKill(e),this.grantKillRewards(),this.enemiesKilled=(this.enemiesKilled||0)+1,this.enemiesKilled%HC.WAVE.ENEMIES_PER_ADVANCE==0&&this.advanceWave()}grantKillRewards(){if(this.playerLevelSystem&&this.playerLevelSystem.addExperience(HC.PLAYER.COMBAT.EXP_PER_KILL),this.gameManager){const{BASE_GOLD_REWARD:e,MAX_GOLD_REWARD:t}=HC.PLAYER.COMBAT,s=Math.floor(Math.random()*(t-e+1))+e;this.gameManager.addGold(s)}}editorCreate(){const e=this.add.tilemap("mainMap");e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("Fire-candelabrum","Fire-candelabrum"),e.addTilesetImage("side way-Sheet","side way-Sheet"),e.addTilesetImage("Tileset 3","Tileset 3"),e.addTilesetImage("Wall_3","Wall_3"),e.addTilesetImage("rock pillars coming from darkness-bg_2","rock pillars coming from darkness-bg_2"),e.addTilesetImage("Crystals1-improved refraction_11","Crystals1-improved refraction_11"),e.addTilesetImage("Crystals1-improved refraction_6","Crystals1-improved refraction_6"),e.addTilesetImage("Crystals1-improved refraction_8","Crystals1-improved refraction_8"),e.addTilesetImage("Survive_Zone","Survive_Zone"),e.addTilesetImage("statues-far from platforms-bg_4","statues-far from platforms-bg_4"),e.addTilesetImage("statues-far from platforms-bg_2","statues-far from platforms-bg_2"),e.addTilesetImage("statues-far from platforms-bg_1","statues-far from platforms-bg_1"),e.addTilesetImage("statues-far from platforms-bg_0","statues-far from platforms-bg_0"),e.addTilesetImage("statues-far from platforms-bg_5","statues-far from platforms-bg_5"),e.addTilesetImage("Gold","Gold"),e.addTilesetImage("Bed","Bed"),e.addTilesetImage("Atlas-props","Atlas-props"),e.addTilesetImage("platform2","platform2"),e.addTilesetImage("platform1","platform1"),e.addTilesetImage("lavafal-for Tiled-spritesheet-16frames","lavafal-for Tiled-spritesheet-16frames");const t=e.createLayer("Map_Col",["Bed"],0,0),s=e.createLayer("WalkingArea",["Tileset 3"],-18,8),n=e.createLayer("BackGround",["Wall_3"],-18,8),a=e.createLayer("BackGround_1",["lavafal-for Tiled-spritesheet-16frames"],0,0),i=e.createLayer("Wall_RD",["Tileset 3"],-18,-20),r=e.createLayer("Wall_Upper",["Tileset 3"],12,12),o=e.createLayer("Wall_RU",["Tileset 3"],-18,-20),l=e.createLayer("Wall_down",["Tileset 3"],-18,12),c=e.createLayer("Survive_Zone",["Survive_Zone"],-18,8),h=e.createLayer("Gold_AC",["Gold"],-18,-24),u=e.createLayer("Map_",["platform1","platform2"],0,0),d=e.createLayer("Bed",["Bed"],0,0),p=e.createLayer("Vase_AC",["Atlas-props"],-18,8),f=new Jz(this,1258,1286);this.add.existing(f);const m=new eV(this,944,869);this.add.existing(m);const g=new eV(this,944,1417);this.add.existing(g);const y=new eV(this,1592,1417);this.add.existing(y);const b=new eV(this,1592,869);this.add.existing(b);const v=this.add.sprite(734,1993,"Fire-candelabrum",0);v.play("TorchAnim"),this.add.sprite(1253,1993,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1799,1993,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,1737,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,1231,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,656,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,1737,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,1231,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,656,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(770,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1283,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1831,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(72,57,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(2482,57,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(2482,2420,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(72,2420,"golden monument anim-going up-packed sheet",53).play("TelAnimation");const w=e.createLayer("Vase",["Atlas-props"],0,0);w.setVisible(!1),this.map_Col_1=t,this.walkingArea_1=s,this.backGround_1=n,this.backGround=a,this.wall_RD_1=i,this.wall_Upper_1=r,this.wall_RU_1=o,this.wall_down_1=l,this.survive_Zone_1=c,this.gold_AC_1=h,this.map=u,this.bed_1=d,this.vase_AC_1=p,this.playerPrefab=f,this.stoneStatuePrefab=m,this.stoneStatuePrefab_1=g,this.stoneStatuePrefab_2=y,this.stoneStatuePrefab_3=b,this.torchAnim=v,this.vase_1=w,this.mainMap=e,this.events.emit("scene-awake")}setupLavaAnimations(){try{this.backGround.getTilesWithin().forEach((e=>{e&&6956===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"lava0").play("lava0")}))}catch(e){console.error("Error setting up water animations:",e)}}setupPortalSystem(){try{this.createPortals(),this.startPortalTimer()}catch(e){console.error("Portal system setup failed:",e)}}createPortals(){const e=this.findPortalSprites();HC.PORTAL.POSITIONS.forEach(((t,s)=>{const n=this.createPortal(t,e[s],s);this.portals.push(n),this.deactivatePortal(n)}))}findPortalSprites(){const e=this.children.list.filter((e=>{var t;return e instanceof Phaser.GameObjects.Sprite&&"golden monument anim-going up-packed sheet"===(null==(t=e.texture)?void 0:t.key)}));return HC.PORTAL.POSITIONS.map((t=>e.find((e=>Math.abs(e.x-t.x)<10&&Math.abs(e.y-t.y)<10))))}createPortal(e,t,s){const n=this.add.zone(e.x,e.y,HC.PORTAL.OVERLAP_SIZE,HC.PORTAL.OVERLAP_SIZE);return this.physics.world.enable(n),n.body.setImmovable(!0),{id:s,zone:n,sprite:t,x:e.x,y:e.y,isActive:!1,originalTint:HC.PORTAL.COLORS.ORIGINAL_TINT,activeTint:HC.PORTAL.COLORS.ACTIVE_TINT,glowEffect:null}}startPortalTimer(){this.portalTimer&&this.portalTimer.destroy(),this.portalTimer=this.time.addEvent({delay:HC.PORTAL.ACTIVATION_INTERVAL,callback:this.activateRandomPortal,callbackScope:this,loop:!0})}activateRandomPortal(){var e;if(!(null==(e=this.scene)?void 0:e.isActive())||this.isTeleporting)return;this.deactivateCurrentPortal();const t=this.portals[Math.floor(Math.random()*this.portals.length)],s=HC.PORTAL.AVAILABLE_SCENES[Math.floor(Math.random()*HC.PORTAL.AVAILABLE_SCENES.length)];this.activatePortal(t,s)}deactivateCurrentPortal(){this.activePortal&&(this.deactivatePortal(this.activePortal),this.activePortal=null)}activatePortal(e,t){var s;(null==(s=null==e?void 0:e.sprite)?void 0:s.active)&&(e.isActive=!0,e.destinationScene=t,this.activePortal=e,this.applyPortalVisualEffects(e),this.setupPortalCollision(e))}applyPortalVisualEffects(e){e.sprite.setTint(e.activeTint);const t=this.add.circle(e.x,e.y,HC.PORTAL.GLOW_RADIUS,HC.PORTAL.COLORS.GLOW_COLOR,.3);t.setDepth(e.sprite.depth-1),e.glowEffect=t,e.activeTween=this.tweens.add({targets:[e.sprite,t],alpha:{from:1,to:.7},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}setupPortalCollision(e){var t;(null==(t=this.player)?void 0:t.active)&&(e.overlapHandler=this.physics.add.overlap(this.player,e.zone,(()=>this.handlePortalCollision(e))))}handlePortalCollision(e){this.isValidPortalTeleport(e)&&this.initiateTeleport(e)}isValidPortalTeleport(e){var t;return(null==e?void 0:e.isActive)&&!this.isTeleporting&&e.destinationScene&&(null==(t=this.scene)?void 0:t.isActive())}initiateTeleport(e){var t;this.isTeleporting=!0,(null==(t=this.player)?void 0:t.active)&&"function"==typeof this.createTeleportEffect&&this.createTeleportEffect(this.player.x,this.player.y),this.saveGameBeforeTeleport(),this.cleanupBeforeTeleport(),this.time.delayedCall(HC.PORTAL.TELEPORT_DELAY,(()=>{this.executeSceneTransition(e.destinationScene)})),this.deactivatePortal(e),this.activePortal=null}saveGameBeforeTeleport(){var e;if(null==(e=this.gameManager)?void 0:e.saveGame)try{this.gameManager.saveGame()}catch(t){console.warn("Failed to save before teleport:",t)}}executeSceneTransition(e){var t,s,n;if(null==(t=this.scene)?void 0:t.isActive())try{(null==(n=null==(s=this.scene.manager)?void 0:s.keys)?void 0:n[e])?this.scene.start(e):this.scene.start("MainMapScene")}catch(a){console.error("Scene transition failed:",a),this.isTeleporting=!1}}deactivatePortal(e){var t,s,n;try{if(!e)return;e.isActive=!1,e.destinationScene=null,(null==(t=e.sprite)?void 0:t.active)&&(e.sprite.setTint(e.originalTint),e.sprite.setScale(1),e.sprite.setAlpha(1)),(null==(s=e.glowEffect)?void 0:s.active)&&(e.glowEffect.destroy(),e.glowEffect=null),e.activeTween&&this.tweens&&(this.tweens.remove(e.activeTween),e.activeTween=null),e.overlapHandler&&(null==(n=this.physics)?void 0:n.world)&&(this.physics.world.removeCollider(e.overlapHandler),e.overlapHandler=null)}catch(a){console.error("Error deactivating portal:",a)}}cleanupBeforeTeleport(){try{["enemySpawnTimer","waveTimer","difficultyTimer","portalTimer"].forEach((e=>{this[e]&&!this[e].hasDispatched&&(this[e].destroy(),this[e]=null)})),[{obj:this.gameplayManager,prop:"enemies"},{obj:this.gameplayManager,prop:"expOrbs"},{obj:this,prop:"enemies"},{obj:this,prop:"zombieGroup"},{obj:this,prop:"experienceOrbs"}].forEach((({obj:e,prop:t})=>{var s;(null==(s=null==e?void 0:e[t])?void 0:s.active)&&"function"==typeof e[t].clear&&e[t].clear(!0,!0)})),this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemiesKilled=0}catch(e){console.error("Error during portal teleport cleanup:",e)}}setupZombieCollisionSystem(){try{this.map_Col_1&&this.registerCollisionLayer(this.map_Col_1,"Map Collision"),this.backGround&&this.registerCollisionLayer(this.backGround,"Background Collision"),[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach(((e,t)=>{(null==e?void 0:e.active)&&this.registerStaticObstacle(e,`Stone Statue ${t+1}`)})),"function"==typeof this.setupZombieObstacleCollisions&&this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up zombie collision system:",e)}}setupCollisions(){try{this.setupStatueCollisions(),this.setupTilemapCollisions()}catch(e){console.error("Error setting up player collisions:",e)}}setupStatueCollisions(){[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach((e=>{var t;(null==e?void 0:e.active)&&this.playerPrefab&&(null==(t=e.setupCollision)||t.call(e,this.playerPrefab))}))}setupTilemapCollisions(){this.playerPrefab&&[this.map_Col_1,this.backGround].forEach((e=>{e&&(this.physics.add.collider(this.playerPrefab,e),e.setCollisionBetween(0,1e4))}))}setupHPBarIntegration(){this.ensurePlayerHealth(),this.updateHPBar(),this.updateGoldDisplay(),this.setupHealthEventListeners()}ensurePlayerHealth(){if(this.player&&(!this.player.health||!this.player.maxHealth)){console.warn("Player missing HP values, applying defaults");const{health:e,maxHealth:t}=HC.PLAYER.DEFAULTS;this.player.health=e,this.player.maxHealth=t}}setupHealthEventListeners(){PC.on("request-initial-gold",(()=>{this.time.delayedCall(50,(()=>this.updateGoldDisplay()))})),PC.on("main-scene-started",(()=>{this.time.delayedCall(200,(()=>this.updateGoldDisplay()))}))}playerTakeDamage(e){this.player&&(this.player.health=Math.max(0,this.player.health-e),this.updateHPBar(),this.showDamageEffect(),this.player.health<=0&&this.handlePlayerDeath())}showDamageEffect(){var e;(null==(e=this.player)?void 0:e.setTint)&&(this.player.setTint(HC.UI.HEALTH_BAR.DAMAGE_TINT),this.time.delayedCall(HC.UI.HEALTH_BAR.EFFECT_DURATION,(()=>{var e,t;null==(t=null==(e=this.player)?void 0:e.clearTint)||t.call(e)})))}playerHeal(e){this.player&&(this.player.health=Math.min(this.player.maxHealth,this.player.health+e),this.updateHPBar(),this.showHealEffect())}showHealEffect(){var e;(null==(e=this.player)?void 0:e.setTint)&&(this.player.setTint(HC.UI.HEALTH_BAR.HEAL_TINT),this.time.delayedCall(HC.UI.HEALTH_BAR.EFFECT_DURATION,(()=>{var e,t;null==(t=null==(e=this.player)?void 0:e.clearTint)||t.call(e)})))}updateHPBar(){if(!this.player)return;const e={currentHP:this.player.health||HC.PLAYER.DEFAULTS.health,maxHP:this.player.maxHealth||HC.PLAYER.DEFAULTS.maxHealth,health:this.player.health||HC.PLAYER.DEFAULTS.health,maxHealth:this.player.maxHealth||HC.PLAYER.DEFAULTS.maxHealth};PC.emit("player-health-updated",e)}updateGoldDisplay(){var e;const t=(null==(e=this.gameManager)?void 0:e.getGold())||HC.BALANCE.GOLD.STARTING_AMOUNT,s={gold:t,totalGold:t,currentGold:t};PC.emit("player-gold-updated",s),PC.emit("player-stats-updated",s)}handlePlayerDeath(){var e;(null==(e=this.player)?void 0:e.setAlpha)&&this.player.setAlpha(.5),this.time.delayedCall(2e3,(()=>{var e;this.player.health=this.player.maxHealth,(null==(e=this.player)?void 0:e.setAlpha)&&this.player.setAlpha(1),this.updateHPBar()}))}setupVaseSpawning(){try{if(!this.physics||!this.add)return void console.error("Scene not ready for vase spawning");if(!this.textures.exists("Vase"))return void console.error("Vase texture not loaded, skipping vase spawning");this.vaseSpawner=new aV(this),this.vase_1?this.vaseSpawner.spawnVasesOnTilemap(this.vase_1,{spawnChance:HC.BALANCE.VASES.SPAWN_CHANCE,maxVases:HC.BALANCE.VASES.MAX_COUNT,textureKey:"Vase",targetTileIndex:null,excludeTileIndices:[0],removeTiles:!1}):console.error("vase_1 layer not found!"),this.setupVaseAttackCollision()}catch(e){console.error("Error setting up vase spawning:",e)}}setupVaseAttackCollision(){var e;try{(null==(e=this.gameManager)?void 0:e.debugMode)&&this.input.on("pointerdown",(e=>{this.breakableVases&&this.breakableVases.children.entries.forEach((t=>{t.active&&t.getBounds().contains(e.worldX,e.worldY)&&t.onPlayerAttack(1)}))}))}catch(t){console.error("Error setting up vase attack collision:",t)}}setupPlayerLevelSystem(){var e;try{this.playerLevelSystem=new Xz(this,10,50);const{level:t,experience:s,nextLevelExp:n}=HC.PLAYER.DEFAULTS;this.playerLevelSystem.level=t,this.playerLevelSystem.experience=s,this.playerLevelSystem.nextLevelExp=n,this.playerLevelSystem.updateText(),this.playerLevelSystem.updateExpBar(),(null==(e=this.gameManager)?void 0:e.debugMode)&&HC.DEBUG.ENABLED}catch(t){console.error("Error setting up Player Level System:",t)}}update(e,t){var s;null==(s=super.update)||s.call(this,e,t);try{this.updateCamera(),this.updateManagers(e,t)}catch(n){console.error("Update loop error:",n)}}updateCamera(){var e,t;(null==(e=this.player)?void 0:e.active)&&!this.player.isDead&&(null==(t=this.cameras)?void 0:t.main)&&this.cameras.main.startFollow(this.player,!0,.1,.1)}updateManagers(e,t){this.mobManager&&this.mobManager.update(e,t)}shutdown(){var e;try{this.stopGameSystems(),this.cleanupTimers(),this.cleanupPortals(),this.cleanupManagers(),this.cleanupEventListeners(),null==(e=super.shutdown)||e.call(this)}catch(t){console.error("Shutdown error:",t)}}stopGameSystems(){this.isGameRunning=!1,PC.emit("timer-stop")}cleanupTimers(){["portalTimer","gameTimer","enemySpawnTimer","waveTimer","difficultyTimer"].forEach((e=>{this[e]&&!this[e].hasDispatched&&(this[e].destroy(),this[e]=null)}))}cleanupPortals(){this.portals.forEach((e=>this.deactivatePortal(e))),this.portals=[],this.activePortal=null,this.isTeleporting=!1}cleanupManagers(){this.playerLevelSystem&&(this.playerLevelSystem.destroy(),this.playerLevelSystem=null),this.mobManager&&(this.mobManager.shutdown(),this.mobManager=null),window.currentGameScene===this&&delete window.currentGameScene}cleanupEventListeners(){["request-initial-gold","main-scene-started","wave-updated"].forEach((e=>PC.removeListener(e)))}}class rV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??1125,s??954,n||"animated lamp posts-4",a??0),this.play("LampPostsAnimation1animated lamp posts"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(40,10),this.body.setOffset(15,75),this.body.moves=!1,this.body.immovable=!0,this.isLampInvisible=!1,this.isPlayerInvisible=!1,this.lampTop=this.y-45,this.lampBottom=this.y+20,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-20))<45;this.player.y>this.lampTop&&this.player.y<this.lampBottom&&t?(this.isLampInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isLampInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isLampInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isLampInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class oV extends Yz{constructor(){super("MiniMapDarkForastScene"),En(this,"tile_Layer"),En(this,"road_1"),En(this,"tall_Grass_1"),En(this,"rampt_1"),En(this,"base_1"),En(this,"scrift_1"),En(this,"pad_1"),En(this,"cliff_1"),En(this,"tree"),En(this,"tree_1"),En(this,"tree_2"),En(this,"river_1"),En(this,"playerPrefab"),En(this,"shrine_1"),En(this,"lampPrefab"),En(this,"lampPrefab_1"),En(this,"lampPrefab_2"),En(this,"lampPrefab_3"),En(this,"lampPrefab_4"),En(this,"lampPrefab_5"),En(this,"telAnimation"),En(this,"miniMapDarkForast")}editorCreate(){const e=this.add.tilemap("MiniMapDarkForast");e.addTilesetImage("Tree_pattern","Tree_pattern"),e.addTilesetImage("GroundTileset_V02","GroundTileset_V02"),e.addTilesetImage("AncientScript_V01-Sheet","AncientScript_V01-Sheet"),e.addTilesetImage("shrine-buff available animation-295x311","shrine-buff available animation-295x311"),e.addTilesetImage("animated lamp posts-4","animated lamp posts-4"),e.addTilesetImage("animated lamp posts-5","animated lamp posts-5"),e.addTilesetImage("stronghold - embranchment section","stronghold - embranchment section"),e.addTilesetImage("Lift_Platform","Lift_Platform"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("carriage - no tent","carriage - no tent"),e.addTilesetImage("bone - big - 2","bone - big - 2"),e.addTilesetImage("bone - big - 1","bone - big - 1"),e.addTilesetImage("RiverShallowSheet_v01","RiverShallowSheet_v01"),e.addTilesetImage("tree - color scheme 1 - 2","tree - color scheme 1 - 2"),e.addTilesetImage("tree - color scheme 1 - 1","tree - color scheme 1 - 1"),e.addTilesetImage("tree - color scheme 4 - 1","tree - color scheme 4 - 1"),e.addTilesetImage("tree - color scheme 5 - 1","tree - color scheme 5 - 1"),e.addTilesetImage("tree - naked 1","tree - naked 1");const t=e.createLayer("Tile Layer 2",["GroundTileset_V02"],0,0),s=e.createLayer("Road",["GroundTileset_V02"],0,0),n=e.createLayer("Tall Grass",["GroundTileset_V02"],0,0),a=e.createLayer("Rampt",["GroundTileset_V02"],0,0),i=e.createLayer("Base",["GroundTileset_V02","AncientScript_V01-Sheet"],0,0),r=e.createLayer("Scrift",["AncientScript_V01-Sheet"],0,0),o=e.createLayer("Pad",["Lift_Platform"],16,4),l=e.createLayer("Cliff",["GroundTileset_V02"],0,0),c=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),h=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),u=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),d=e.createLayer("River",["RiverShallowSheet_v01"],0,0),p=new Jz(this,1180,715);this.add.existing(p);const f=e.createLayer("Shrine",["shrine-buff available animation-295x311"],0,0);this.add.image(266,243,"tree - color scheme 5 - 1",0),this.add.image(85,590,"tree - color scheme 5 - 1",0),this.add.image(72,2066,"tree - color scheme 5 - 1",0),this.add.image(183,965,"tree - color scheme 5 - 1",0);const m=new rV(this,654,758);this.add.existing(m),m.flipX=!0,m.flipY=!1;const g=new rV(this,654,927);this.add.existing(g),g.flipX=!0,g.flipY=!1;const y=new rV(this,1404,1558);this.add.existing(y);const b=new rV(this,1185,1558);this.add.existing(b),b.flipX=!0,b.flipY=!1;const v=new rV(this,1906,896);this.add.existing(v);const w=new rV(this,1906,759);this.add.existing(w);const x=this.add.sprite(1263,393,"golden monument anim-going up-packed sheet",53);x.play("TelAnimation"),this.tile_Layer=t,this.road_1=s,this.tall_Grass_1=n,this.rampt_1=a,this.base_1=i,this.scrift_1=r,this.pad_1=o,this.cliff_1=l,this.tree=c,this.tree_1=h,this.tree_2=u,this.river_1=d,this.playerPrefab=p,this.shrine_1=f,this.lampPrefab=m,this.lampPrefab_1=g,this.lampPrefab_2=y,this.lampPrefab_3=b,this.lampPrefab_4=v,this.lampPrefab_5=w,this.telAnimation=x,this.miniMapDarkForast=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{this.editorCreate(),super.create(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning()}catch(e){console.error("Error in MiniMapDarkForastScene create:",e)}}setupCollisions(){try{this.lampPrefab&&this.lampPrefab.setupCollision(this.playerPrefab),this.lampPrefab_1&&this.lampPrefab_1.setupCollision(this.playerPrefab),this.lampPrefab_2&&this.lampPrefab_2.setupCollision(this.playerPrefab),this.lampPrefab_3&&this.lampPrefab_3.setupCollision(this.playerPrefab),this.lampPrefab_4&&this.lampPrefab_4.setupCollision(this.playerPrefab),this.lampPrefab_5&&this.lampPrefab_5.setupCollision(this.playerPrefab),this.cliff_1&&(this.physics.add.collider(this.playerPrefab,this.cliff_1),this.cliff_1.setCollisionBetween(0,1e4)),this.rampt_1&&(this.physics.add.collider(this.playerPrefab,this.rampt_1),this.rampt_1.setCollisionBetween(0,1e4)),this.base_1&&(this.physics.add.collider(this.playerPrefab,this.base_1),this.base_1.setCollisionBetween(0,1e4))}catch(e){console.error("Error setting up dark forest collisions:",e)}}setupZombieCollisionSystem(){try{this.cliff_1&&this.registerCollisionLayer(this.cliff_1,"Cliff Collision"),this.rampt_1&&this.registerCollisionLayer(this.rampt_1,"Ramp Collision"),this.base_1&&this.registerCollisionLayer(this.base_1,"Base Collision"),[this.lampPrefab,this.lampPrefab_1,this.lampPrefab_2,this.lampPrefab_3,this.lampPrefab_4,this.lampPrefab_5].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Forest Lamp ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up dark forest zombie collision system:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapDarkForastScene update:",s)}}shutdown(){super.shutdown()}}class lV extends Yz{constructor(){super("MiniMapBossFightScene"),En(this,"floor_1"),En(this,"bg_1"),En(this,"lava_floor_1"),En(this,"fire_animation_1"),En(this,"floating_plat_form_Chain_1"),En(this,"floating_plat_form_Floating_Col_1"),En(this,"floating_plat_form_Floatind_platform_1"),En(this,"gate_1"),En(this,"wall_wall_bottom_1"),En(this,"lift_1"),En(this,"floating_plat_form_Chain_shadow_1"),En(this,"wall_Wall_side_1"),En(this,"pillar_1"),En(this,"decoration_1"),En(this,"stoneStatuePrefab_1"),En(this,"stoneStatuePrefab"),En(this,"telAnimation"),En(this,"playerPrefab"),En(this,"miniMapBossFight")}editorCreate(){const e=this.add.tilemap("MiniMapBossFight");e.addTilesetImage("Tileset 4 - transp","Tileset 4"),e.addTilesetImage("Tileset 2","Tileset 2"),e.addTilesetImage("pillars-bg_5","pillars-bg_5"),e.addTilesetImage("pillars-bg_0","pillars-bg_0"),e.addTilesetImage("floor","floor"),e.addTilesetImage("Decor corner","Decor corner"),e.addTilesetImage("TorchBowlRegular_V01-Sheet","TorchBowlRegular_V01-Sheet"),e.addTilesetImage("side way-Sheet","side way-Sheet"),e.addTilesetImage("Lift_Platform","Lift_Platform"),e.addTilesetImage("Floading_flat_form","Floading_flat_form"),e.addTilesetImage("animated lava river spritesheet","animated lava river spritesheet"),e.addTilesetImage("floor_Lava_Crack","floor_Lava_Crack"),e.addTilesetImage("static idle","static idle"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("rock pillars coming from darkness-bg_2","rock pillars coming from darkness-bg_2"),e.addTilesetImage("Crystals2-improved refraction_25","Crystals2-improved refraction_25"),e.addTilesetImage("Crystals2-improved refraction_3","Crystals2-improved refraction_3"),e.addTilesetImage("Crystals2-improved refraction_9","Crystals2-improved refraction_9"),e.addTilesetImage("Crystals2-improved refraction_19","Crystals2-improved refraction_19"),e.addTilesetImage("AncientScript_V01","AncientScript_V01");const t=e.createLayer("Floor",["floor","floor_Lava_Crack"],0,0),s=e.createLayer("bg",["Tileset 4 - transp"],0,0),n=e.createLayer("lava floor",["animated lava river spritesheet"],0,0),a=e.createLayer("fire animation",["TorchBowlRegular_V01-Sheet"],0,0),i=e.createLayer("Floating plat form/Chain",["Floading_flat_form"],0,0),r=e.createLayer("Floating plat form/Floating Col",["Floading_flat_form"],0,0),o=e.createLayer("Floating plat form/Floatind platform",["Floading_flat_form"],0,0),l=e.createLayer("Gate",["side way-Sheet"],0,0),c=e.createLayer("wall/wall bottom",["Tileset 4 - transp"],0,0),h=e.createLayer("lift",["Lift_Platform"],0,0),u=e.createLayer("Floating plat form/Chain shadow",["Floading_flat_form"],0,0),d=e.createLayer("wall/Wall side",["Tileset 4 - transp"],0,0),p=e.createLayer("pillar",["pillars-bg_5","pillars-bg_0","Decor corner"],0,0),f=e.createLayer("Decoration",["Crystals2-improved refraction_3","Crystals2-improved refraction_9","Crystals2-improved refraction_25","Crystals2-improved refraction_19","AncientScript_V01"],0,0),m=new eV(this,1610,1451);this.add.existing(m);const g=new eV(this,856,1451);this.add.existing(g);const y=this.add.sprite(1280,844,"golden monument anim-going up-packed sheet",53);y.play("TelAnimation");const b=new Jz(this,978,1191);this.add.existing(b),this.add.sprite(618,1797,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(1935,1797,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(1935,872,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(618,872,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.floor_1=t,this.bg_1=s,this.lava_floor_1=n,this.fire_animation_1=a,this.floating_plat_form_Chain_1=i,this.floating_plat_form_Floating_Col_1=r,this.floating_plat_form_Floatind_platform_1=o,this.gate_1=l,this.wall_wall_bottom_1=c,this.lift_1=h,this.floating_plat_form_Chain_shadow_1=u,this.wall_Wall_side_1=d,this.pillar_1=p,this.decoration_1=f,this.stoneStatuePrefab_1=m,this.stoneStatuePrefab=g,this.telAnimation=y,this.playerPrefab=b,this.miniMapBossFight=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupLavaAnimations()}catch(e){console.error("Error in MiniMapBossFightScene create:",e)}}setupCollisions(){try{this.lava_floor_1.setDepth(1),this.floating_plat_form_Floating_Col_1.setDepth(2),this.floating_plat_form_Floatind_platform_1.setDepth(3),this.stoneStatuePrefab.setDepth(4),this.stoneStatuePrefab_1.setDepth(4),this.playerPrefab.setDepth(4),this.decoration_1.setDepth(4),this.telAnimation.setDepth(4),this.floating_plat_form_Chain_1.setDepth(4),this.stoneStatuePrefab_1.setupCollision(this.playerPrefab),this.stoneStatuePrefab.setupCollision(this.playerPrefab),this.physics.add.collider(this.playerPrefab,this.floating_plat_form_Floating_Col_1),this.floating_plat_form_Floating_Col_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up boss fight collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.floating_plat_form_Floating_Col_1,"Platform Collision"),[this.stoneStatuePrefab,this.stoneStatuePrefab_1].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Boss Arena Statue ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up boss fight zombie collision system:",e)}}setupLavaAnimations(){try{const e=this.lava_floor_1.getTilesWithin(),t=this.add.container(0,0);t.setDepth(1),this.lavaSprites=[],e.forEach((e=>{if(e&&-1!==e.index){let s=null;switch(e.index){case 2309:s="lava0";break;case 2307:s="lava9";break;case 2275:s="lava6";break;case 2311:s="lava3";break;case 2343:s="lava12";break;case 2324:s="lava10";break;case 2290:s="lava7.1";break;case 2276:s="lava4.1";break;case 2328:s="lava1.1"}if(s){const n=this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"animated lava river spritesheet");n.play(s),t.add(n),this.lavaSprites.push(n),e.visible=!1}}}))}catch(e){console.error("Error setting up lava animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapBossFightScene update:",s)}}shutdown(){super.shutdown()}}let cV=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??65,s??105,n||"TreePalmSheet_01",a??0),this.play("Tree1"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(30,15),this.body.setOffset(70,135),this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-85))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}};class hV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??669,s??803,n||"TreePalmSheet_02",a??0),this.play("Tree2"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(20,15),this.body.setOffset(50,105),this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-55))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class uV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,a){super(e,t??48,s??80,n||"TreePalmSheet_03",a??0),this.play("Tree3"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(20,15),this.body.setOffset(40,105),this.body.moves=!1,this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-50))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class dV extends Yz{constructor(){super("MiniMapBeachScene"),En(this,"beachTreePrefab"),En(this,"beachTree1Prefab"),En(this,"beachTreePrefab2"),En(this,"water_1"),En(this,"ground_1"),En(this,"bridge_1"),En(this,"respawn_point_1"),En(this,"block_1"),En(this,"recked_ship_1"),En(this,"decor_1"),En(this,"block"),En(this,"skull_stone_1"),En(this,"playerPrefab"),En(this,"miniMapBeachBiom")}editorCreate(){const e=this.add.tilemap("MiniMapBeachBiom");e.addTilesetImage("beach - standard - with thick foam - spritesheet","beach - standard - with thick foam - spritesheet"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("rocky skull structure-sand","rocky skull structure-sand"),e.addTilesetImage("stranded ship-sand","stranded ship-sand"),e.addTilesetImage("TreePalmSheet_03","TreePalmSheet_03"),e.addTilesetImage("TreePalmSheet_01","TreePalmSheet_01"),e.addTilesetImage("TreePalmSheet_02","TreePalmSheet_02"),e.addTilesetImage("bones_17","bones_17"),e.addTilesetImage("bones_15","bones_15"),e.addTilesetImage("bones_16","bones_16"),e.addTilesetImage("TreePalmSheet_02","TreePalmSheet_02"),e.addTilesetImage("BeachDeckSheet","BeachDeckSheet");const t=new cV(this,1402,842);this.add.existing(t);const s=new hV(this,1081,870);this.add.existing(s),s.flipX=!0,s.flipY=!1;const n=new uV(this,1201,816);this.add.existing(n);const a=e.createLayer("water",["beach - standard - with thick foam - spritesheet"],0,0),i=e.createLayer("Ground",["beach - standard - with thick foam - spritesheet"],0,0),r=e.createLayer("bridge",["BeachDeckSheet"],0,-9),o=e.createLayer("respawn point",[],0,0),l=e.createLayer("Block",["BeachDeckSheet"],0,0),c=e.createLayer("Recked ship",["stranded ship-sand","golden monument anim-going up-packed sheet"],0,0),h=e.createLayer("decor",["bones_15","bones_16","bones_17"],0,0),u=e.createLayer("Block",["BeachDeckSheet"],0,0),d=e.createLayer("Skull stone",["rocky skull structure-sand"],4,5),p=new Jz(this,846,1110);this.add.existing(p),this.beachTreePrefab=t,this.beachTree1Prefab=s,this.beachTreePrefab2=n,this.water_1=a,this.ground_1=i,this.bridge_1=r,this.respawn_point_1=o,this.block_1=l,this.recked_ship_1=c,this.decor_1=h,this.block=u,this.skull_stone_1=d,this.playerPrefab=p,this.miniMapBeachBiom=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupWaterAnimations()}catch(e){console.error("Error in MiniMapBeachScene create:",e)}}setupCollisions(){try{this.playerPrefab.setDepth(2),this.bridge_1.setDepth(1),this.beachTreePrefab.setupCollision(this.playerPrefab),this.beachTree1Prefab.setupCollision(this.playerPrefab),this.beachTreePrefab2.setupCollision(this.playerPrefab),this.physics.add.collider(this.playerPrefab,this.block_1),this.block_1.setCollisionBetween(0,1e4),this.physics.add.collider(this.playerPrefab,this.water_1),this.water_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up beach collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.block_1,"Beach Blocks"),this.registerCollisionLayer(this.water_1,"Water Collision"),[this.beachTreePrefab,this.beachTree1Prefab,this.beachTreePrefab2].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Beach Tree ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up beach zombie collision system:",e)}}setupWaterAnimations(){try{this.water_1.getTilesWithin().forEach((e=>{e&&227===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water_1").play("Water0")})),this.ground_1.getTilesWithin().forEach((e=>{e&&103===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.1").play("water.r"),e&&174===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.2").play("water.r.d"),e&&70===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.3").play("water.r.u"),e&&69===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.4").play("water12"),e&&37===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.5").play("water11"),e&&36===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.6").play("water13"),e&&107===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.7").play("water1"),e&&137===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.8").play("water2"),e&&138===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.9").play("water3"),e&&73===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.10").play("water4"),e&&72===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.11").play("water5"),e&&173===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.12").play("water6"),e&&141===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.13").play("water7"),e&&140===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.14").play("water8"),e&&172===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.15").play("water9")}))}catch(e){console.error("Error setting up water animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapBeachScene update:",s)}}shutdown(){super.shutdown()}}class pV extends Yz{constructor(){super("MiniMapLavaScene"),En(this,"bG_lava_1"),En(this,"bG_Platform_1"),En(this,"bG_Platform_L__1"),En(this,"bG_Stairs_1"),En(this,"bG_Totem_platform_1"),En(this,"decor_Shard_rocks_1"),En(this,"decor_Decor_1"),En(this,"traps_Statue_1"),En(this,"playerPrefab"),En(this,"miniMapLava")}editorCreate(){const e=this.add.tilemap("MiniMapLava");e.addTilesetImage("platform1","platform1"),e.addTilesetImage("animated lava river spritesheet","animated lava river spritesheet"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("tileset","tileset"),e.addTilesetImage("spike-pack-horizontal-attack","spike-pack-horizontal-attack"),e.addTilesetImage("spike-pack-horizontal-retreat","spike-pack-horizontal-retreat"),e.addTilesetImage("spike-pack-vertical-attack","spike-pack-vertical-attack"),e.addTilesetImage("spike-pack-vertical-retreat","spike-pack-vertical-retreat"),e.addTilesetImage("tumor-destroy","tumor-destroy"),e.addTilesetImage("egg-ish prop-explosion","egg-ish prop-explosion"),e.addTilesetImage("lava ball-falling","lava ball-falling"),e.addTilesetImage("nasty structure_0","nasty structure_0"),e.addTilesetImage("big eye-loop","big eye-loop"),e.addTilesetImage("crusher-stand-retreat-v2","crusher-stand-retreat-v2"),e.addTilesetImage("crusher-retreat-v2","crusher-retreat-v2"),e.addTilesetImage("crusher-smash-pentagram FX","crusher-smash-pentagram FX"),e.addTilesetImage("spitfire device-vertical-starting","spitfire device-vertical-starting"),e.addTilesetImage("spitfire device-multidirectional-firing-loop-8frames","spitfire device-multidirectional-firing-loop-8frames"),e.addTilesetImage("spitfire device-horizontal-starting","spitfire device-horizontal-starting"),e.addTilesetImage("spitfire device-vertical-firing-loop-flame","spitfire device-vertical-firing-loop-flame"),e.addTilesetImage("spitfire device-diagonal-firing-loop-flame","spitfire device-diagonal-firing-loop-flame"),e.addTilesetImage("tormented souls tile-9-hand3","tormented souls tile-9-hand3"),e.addTilesetImage("tormented souls tile-7-hand1","tormented souls tile-7-hand1"),e.addTilesetImage("tormented souls tile-8-hand2","tormented souls tile-8-hand2"),e.addTilesetImage("tiny volcanos_0","tiny volcanos_0"),e.addTilesetImage("spears with dead bodies_0","spears with dead bodies_0"),e.addTilesetImage("spears with dead bodies_1","spears with dead bodies_1"),e.addTilesetImage("spears with dead bodies_2","spears with dead bodies_2"),e.addTilesetImage("spears with dead bodies_3","spears with dead bodies_3"),e.addTilesetImage("spears with dead bodies_4","spears with dead bodies_4"),e.addTilesetImage("spears with dead bodies_5","spears with dead bodies_5"),e.addTilesetImage("statues_0","statues_0"),e.addTilesetImage("statues_3","statues_3"),e.addTilesetImage("towers_0","towers_0"),e.addTilesetImage("sharp rocks_0","sharp rocks_0"),e.addTilesetImage("sharp rocks_1","sharp rocks_1"),e.addTilesetImage("sharp rocks_2","sharp rocks_2"),e.addTilesetImage("sharp rocks_3","sharp rocks_3"),e.addTilesetImage("sharp rocks_4","sharp rocks_4"),e.addTilesetImage("rock-formations on lava-_0","rock-formations on lava-_0"),e.addTilesetImage("rock-formations on lava-_1","rock-formations on lava-_1"),e.addTilesetImage("rock-formations on lava-_2","rock-formations on lava-_2"),e.addTilesetImage("rock-formations on lava-_3","rock-formations on lava-_3"),e.addTilesetImage("rock-formations on lava-_4","rock-formations on lava-_4"),e.addTilesetImage("rocks1-_0","rocks1-_0"),e.addTilesetImage("rocks1-_1","rocks1-_1"),e.addTilesetImage("rocks1-_2","rocks1-_2"),e.addTilesetImage("rocks1-_3","rocks1-_3"),e.addTilesetImage("rocks1-_4","rocks1-_4"),e.addTilesetImage("rocks1-_5","rocks1-_5"),e.addTilesetImage("rocks1-_6","rocks1-_6"),e.addTilesetImage("rocks1-_7","rocks1-_7"),e.addTilesetImage("tormented souls Manu hand","tormented souls Manu hand"),e.addTilesetImage("spike-1-attack","spike-1-attack"),e.addTilesetImage("spike-3-retreat","spike-3-retreat"),e.addTilesetImage("big rocks_1","big rocks_1"),e.addTilesetImage("big rocks_11","big rocks_11"),e.addTilesetImage("towers_2","towers_2"),e.addTilesetImage("chest-anims-shaking","chest-anims-shaking");const t=e.createLayer("BG/lava",["animated lava river spritesheet"],0,0),s=e.createLayer("BG/Platform",["platform1","tileset"],0,0),n=e.createLayer("BG/Platform L@",["platform1","tileset"],0,0),a=e.createLayer("BG/Stairs",["tileset","crusher-stand-retreat-v2"],0,0),i=e.createLayer("BG/Totem platform",["tileset"],0,0),r=e.createLayer("decor/Shard rocks",["rock-formations on lava-_2","rock-formations on lava-_0","sharp rocks_0","rock-formations on lava-_4","sharp rocks_2","sharp rocks_3","sharp rocks_1","rock-formations on lava-_3","rock-formations on lava-_1","rocks1-_7","rocks1-_4","sharp rocks_4","big rocks_1","rocks1-_2","rocks1-_0","rocks1-_6","rocks1-_1","rocks1-_3"],0,0),o=e.createLayer("decor/Decor",["rock-formations on lava-_2","rocks1-_0","spears with dead bodies_1","spears with dead bodies_4","spears with dead bodies_2","spears with dead bodies_5","rock-formations on lava-_4","spears with dead bodies_0","spears with dead bodies_3","rock-formations on lava-_3","big rocks_1","big rocks_11","rocks1-_5","towers_2","rock-formations on lava-_1","rocks1-_4"],0,0),l=e.createLayer("Traps/Statue",["statues_0","statues_3"],0,0);this.add.sprite(668,2510,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(898,2687,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(1901,1667,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(1436,1698,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(2412,546,"tumor-destroy",0).play("TumorDestroyAni");const c=new Jz(this,644,2600);this.add.existing(c),this.bG_lava_1=t,this.bG_Platform_1=s,this.bG_Platform_L__1=n,this.bG_Stairs_1=a,this.bG_Totem_platform_1=i,this.decor_Shard_rocks_1=r,this.decor_Decor_1=o,this.traps_Statue_1=l,this.playerPrefab=c,this.miniMapLava=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,3200,3200),this.physics.world.bounds.width=3200,this.physics.world.bounds.height=3200;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupLavaAnimations()}catch(e){console.error("Error in MiniMapLavaScene create:",e)}}setupCollisions(){try{this.bG_lava_1.setDepth(1),this.bG_Platform_1.setDepth(2),this.playerPrefab.setDepth(2),this.bG_Stairs_1.setDepth(2),this.bG_Totem_platform_1.setDepth(2),this.decor_Decor_1.setDepth(2),this.traps_Statue_1.setDepth(2),this.bG_Platform_L__1.setDepth(2),this.physics.add.collider(this.playerPrefab,this.bG_lava_1),this.bG_lava_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up lava scene collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.bG_lava_1,"Lava Collision"),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up lava scene zombie collision system:",e)}}setupLavaAnimations(){try{this.lavaContainer=this.add.container(0,0);const e=this.bG_lava_1.getTilesWithin();this.lavaSprites=[],e.forEach((e=>{if(e&&-1!==e.index){let t=null;if(391===e.index&&(t="lava0"),t){const s=this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"animated lava river spritesheet");s.play(t),this.lavaContainer.add(s),this.lavaSprites.push(s),e.visible=!1}}}))}catch(e){console.error("Error setting up lava animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapLavaScene update:",s)}}shutdown(){super.shutdown()}}const fV={type:Phaser.AUTO,width:1920,height:1080,backgroundColor:"#242424",parent:"game-container",physics:{default:"arcade",arcade:{debug:!1,tileBias:32}},render:{pixelArt:!0},scale:{mode:Phaser.Scale.WIDTH_CONTROLS_HEIGHT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1920,height:1080,min:{width:1280,height:720},max:{width:2560,height:1440}}};class mV extends Phaser.Scene{constructor(){super("Boot")}preload(){this.load.pack("pack","./assets/preload-asset-pack.json")}create(){window.dispatchEvent(new CustomEvent("gameBootComplete")),this.scene.start("Preload"),PC.emit("current-scene-ready",this)}}let gV=null;window.startGameManually=function(){if(gV){const e=gV.registry.get("gameManager");e&&e.startNewRun(),gV.scene.start("MainMapScene")}},window.stopGameManually=function(){if(console.log("Manual game stop requested"),gV){const e=gV.registry.get("gameManager");e&&e.isGameRunning&&e.handlePlayerDeath("Manual Exit"),gV.scene.getScenes(!0).forEach((e=>{"Boot"!==e.scene.key&&"Preload"!==e.scene.key&&gV.scene.stop(e.scene.key)}))}};const yV=({isVisible:e,deathData:t,onComplete:s})=>{const[n,a]=ya.useState(!1);return ya.useEffect((()=>{if(!e)return void a(!1);const t=setTimeout((()=>{a(!0)}),2e3);return()=>clearTimeout(t)}),[e]),e?Pa.jsxs("div",{className:"death-screen-overlay",children:[Pa.jsxs("div",{className:"death-screen-container",children:[Pa.jsx("div",{className:"game-over-svg",children:Pa.jsx("img",{src:"/gameOver.svg",alt:"Game Over",className:"svg-image game-over-image"})}),t&&Pa.jsx("div",{className:"death-info",children:t.score&&Pa.jsxs("p",{className:"death-score",children:["Final Score: ",t.score]})}),n&&Pa.jsx("div",{className:"return-menu-svg",children:Pa.jsx("img",{src:"/returnToMenu.svg",alt:"returnToMenu",className:"svg-image return-menu-image",onClick:()=>{s&&s()}})})]}),Pa.jsx("style",{jsx:!0,children:"\n        .death-screen-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          background: linear-gradient(45deg, #1a1a1a, #2d1b1b, #1a1a1a);\n          background-size: 400% 400%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n          animation: backgroundShift 4s ease-in-out infinite;\n        }\n\n        .death-screen-container {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          text-align: center;\n          padding: 40px;\n          max-width: 800px;\n          width: 90%;\n          height: 100%;\n        }\n\n        .return-menu-svg {\n          margin-top: 40px;\n          animation: returnButtonEntrance 0.8s ease-out;\n        }\n\n        .svg-image {\n          max-width: 100%;\n          height: auto;\n          display: block;\n        }\n\n        .return-menu-image {\n          max-width: 300px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));\n        }\n\n        .return-menu-image:active {\n          transform: scale(0.95);\n        }\n\n        .death-reason {\n          color: #ff8888;\n          font-size: 1.4rem;\n          margin-bottom: 15px;\n          font-weight: bold;\n          text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n        }\n\n        .death-score {\n          color: #cccccc;\n          font-size: 1.2rem;\n          font-weight: bold;\n          text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n        }\n\n        @keyframes backgroundShift {\n          0%,\n          100% {\n            background-position: 0% 50%;\n          }\n          50% {\n            background-position: 100% 50%;\n          }\n        }\n\n        @keyframes gameOverEntrance {\n          0% {\n            opacity: 0;\n            transform: translateY(-50px) scale(0.5);\n          }\n          50% {\n            opacity: 0.8;\n            transform: translateY(-10px) scale(1.1);\n          }\n          100% {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        @keyframes returnButtonEntrance {\n          0% {\n            opacity: 0;\n            transform: translateY(30px);\n          }\n          100% {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeInDelayed {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        @keyframes pulseGlow {\n          0%,\n          100% {\n            filter: drop-shadow(0 0 20px rgba(255, 68, 68, 0.3));\n          }\n          50% {\n            filter: drop-shadow(0 0 30px rgba(255, 68, 68, 0.6));\n          }\n        }\n\n        @media (max-width: 768px) {\n          .death-screen-container {\n            padding: 20px;\n          }\n\n          .game-over-image {\n            max-width: 350px;\n          }\n\n          .return-menu-image {\n            max-width: 250px;\n          }\n\n          .death-reason {\n            font-size: 1.2rem;\n          }\n\n          .death-score {\n            font-size: 1rem;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .game-over-image {\n            max-width: 280px;\n          }\n\n          .return-menu-image {\n            max-width: 200px;\n          }\n\n          .death-reason {\n            font-size: 1rem;\n          }\n\n          .death-score {\n            font-size: 0.9rem;\n          }\n        }\n      "})]}):null};yV.propTypes={isVisible:kz.bool.isRequired,deathData:kz.object,onComplete:kz.func.isRequired};const bV=ya.forwardRef((function({currentActiveScene:e,showModal:t,autoStart:s=!1,onReturnToMainMenu:n},a){const i=ya.useRef(),{gameManager:r}=XC(),o=ya.useRef(!1),[l,c]=ya.useState(!1),[h,u]=ya.useState(null);return ya.useLayoutEffect((()=>{var e;return void 0===i.current&&(i.current=((e,t=null,s=!1)=>{console.log("Initializing Phaser game...",{parent:e,autoStartGame:s});const n=t||new QC,a={...fV,parent:e};return gV=new Phaser.Game(a),gV.registry.set("gameManager",n),console.log("GameManager initialized and registered with Phaser"),gV.scene.add("Boot",mV,!0),gV.scene.add("Preload",Ez),gV.scene.add("Level",Az),gV.scene.add("MainMapScene",iV),gV.scene.add("MiniMapDarkForastScene",oV),gV.scene.add("MiniMapBossFightScene",lV),gV.scene.add("MiniMapBeachScene",dV),gV.scene.add("MiniMapLavaScene",pV),window.game=gV,window.EventBus=PC,PC.on("return-to-menu",(()=>{console.log("Return to menu event received"),n&&n.isGameRunning&&n.handlePlayerDeath("Manual Exit"),PC.emit("game-stopped")})),PC.on("change-scene",((e,t)=>{console.log(`Changing scene to: ${e}`),gV.scene.isActive(e)?gV.scene.restart(e,t):gV.scene.start(e,t)})),PC.on("player-health-update",(e=>{PC.emit("player-health-updated",e)})),PC.on("game-state-update",(e=>{PC.emit("game-state-updated",e),window.dispatchEvent(new CustomEvent("gameStateUpdated",{detail:e}))})),s&&setTimeout((()=>{n&&n.startNewRun(),gV.scene.start("MainMapScene")}),1e3),gV})("game-container",r,!1),null!==a&&(a.current={game:i.current,scene:null,gameManager:r,startGame:()=>{console.log("Manual game start triggered"),i.current&&r&&!o.current&&(o.current=!0,r.applyPassiveUpgrades&&r.applyPassiveUpgrades(),r.startNewRun&&r.startNewRun(),setTimeout((()=>{i.current.scene.start("MainMapScene"),PC.emit("game-started")}),100))},stopGame:()=>{console.log("Manual game stop triggered"),i.current&&o.current&&(o.current=!1,i.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&i.current.scene.stop(e.key)})),r&&r.isGameRunning&&r.handlePlayerDeath("Manual Exit"),PC.emit("game-stopped"))},pauseGame:()=>{i.current&&o.current&&(i.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&i.current.scene.pause(e.key)})),PC.emit("game-paused"))},resumeGame:()=>{i.current&&o.current&&(i.current.scene.getScenes(!1).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&i.current.scene.resume(e.key)})),PC.emit("game-resumed"))},getCurrentScene:()=>i.current&&i.current.scene.getScenes(!0).find((e=>"Boot"!==e.key&&"Preload"!==e.key))||null}),s&&(null==(e=null==a?void 0:a.current)?void 0:e.startGame)&&setTimeout((()=>{a.current.startGame()}),100)),()=>{i.current&&(console.log("Destroying Phaser game"),o.current=!1,i.current.destroy(!0),i.current=void 0)}}),[a,r,s]),ya.useEffect((()=>{const s=t=>{var s,n;console.log("Scene ready:",null==(s=null==t?void 0:t.scene)?void 0:s.key),e&&"function"==typeof e&&e(t),a&&a.current&&(a.current.scene=t),"MainMapScene"===(null==(n=null==t?void 0:t.scene)?void 0:n.key)&&PC.emit("main-scene-started")},n=e=>{console.log("Player death detected:",e),o.current=!1,u(e),i.current&&i.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&i.current.scene.stop(e.key)})),c(!0),PC.emit("game-over",e)},r=()=>{var e;console.log("Return to menu requested"),(null==(e=null==a?void 0:a.current)?void 0:e.stopGame)&&a.current.stopGame(),PC.emit("return-to-menu")},l=()=>{t&&t("PAUSE_MENU")};return PC.on("current-scene-ready",s),PC.on("player-died",n),PC.on("return-to-menu",r),PC.on("pause-game",l),window.addEventListener("playerDeath",(e=>n(e.detail))),window.addEventListener("returnToMenu",r),()=>{PC.removeListener("current-scene-ready",s),PC.removeListener("player-died",n),PC.removeListener("return-to-menu",r),PC.removeListener("pause-game",l),window.removeEventListener("playerDeath",(e=>n(e.detail))),window.removeEventListener("returnToMenu",r)}}),[e,t,a]),ya.useEffect((()=>{const e=e=>{"Escape"===e.key&&o.current&&PC.emit("pause-game")};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("div",{id:"game-container",className:"game-container",style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#242424",margin:0,padding:0,overflow:"hidden"}}),Pa.jsx(yV,{isVisible:l,deathData:h,onComplete:()=>{c(!1),u(null),n&&"function"==typeof n?n():(console.log("No onReturnToMainMenu function provided"),PC.emit("navigate-to-main-menu"))},loadingDuration:3e3})]})}));bV.propTypes={currentActiveScene:kz.func,showModal:kz.func,autoStart:kz.bool,onReturnToMainMenu:kz.func};class vV{constructor(){this.gameManager=null,this.currentScene=null,this.isConnected=!1,this.sessionId=null,this.sessionEnding=!1,this.lastSyncTime=0,this.syncInterval=5e3,this.maps=[],this.mapsLoading=!1,this.mapsError=null,this.batchDataCache={sessionId:null,mobKills:new Map,skillUsage:new Map,consumablesUsed:0},this.lastBatchSendTime=0,this.batchSendInterval=1e4,this.setupMutations(),this.init(),this.fetchMaps()}init(){this.startPolling(),this.setupEventEnhancement(),this.isConnected=!0,console.log("GameBridge connected"),console.log("GameBridge: Mutations setup complete"),PC.emit("bridge-connected")}startPolling(){setInterval((()=>{this.updateGameReferences(),this.syncGameData()}),100)}updateGameReferences(){var e,t,s,n,a;const i=null==(t=null==(e=window.game)?void 0:e.registry)?void 0:t.get("gameManager"),r=window.gameManager,o=null==(s=window.currentGameScene)?void 0:s.gameManager,l=i||r||o||null;l&&l!==this.gameManager&&(this.gameManager=l,console.log("GameBridge: GameManager connected"));const c=null==(a=null==(n=window.game)?void 0:n.scene)?void 0:a.getScene("MainMapScene"),h=window.currentGameScene,u=c||h||null;u&&u!==this.currentScene&&(this.currentScene=u,console.log("GameBridge: Scene connected"),(u.player||u.playerPrefab)&&(this.player=u.player||u.playerPrefab,console.log("GameBridge: Player connected")))}syncGameData(){if(!this.gameManager||!this.currentScene)return;const e=this.getPlayerData();PC.emit("bridge-player-data",e);const t=this.getGameProgress();PC.emit("bridge-game-progress",t);const s=Date.now();this.sessionId&&s-this.lastSyncTime>this.syncInterval&&(this.syncToBackend(e,t),this.lastSyncTime=s),this.checkForMobKills(),this.sessionId&&s-this.lastBatchSendTime>this.batchSendInterval?(console.log("GameBridge: Batch sync interval reached, attempting to send batch data"),this.sendBatchDataToBackend(),this.lastBatchSendTime=s):s%3e4<100&&(console.log("GameBridge: Batch sync debug - sessionId:",!!this.sessionId,"timeSinceLastBatch:",s-this.lastBatchSendTime,"interval:",this.batchSendInterval),console.log("GameBridge: Current batch data cache:",{mobKills:this.batchDataCache.mobKills.size,skillUsage:this.batchDataCache.skillUsage.size,consumables:this.batchDataCache.consumablesUsed}))}getPlayerData(){var e,t,s;const n={health:100,maxHealth:100,healthPercentage:100,experience:0,maxExperience:100,level:1,experiencePercentage:0,gold:500,isAlive:!0,isInGame:!1},a=this.player||(null==(e=this.currentScene)?void 0:e.player)||(null==(t=this.currentScene)?void 0:t.playerPrefab);if(a&&(n.health=void 0!==a.health?a.health:n.health,n.maxHealth=void 0!==a.maxHealth?a.maxHealth:n.maxHealth,n.isAlive=!1!==a.alive&&a.health>0),null==(s=this.gameManager)?void 0:s.playerStats){const e=this.gameManager.playerStats;n.health=void 0!==e.health?e.health:n.health,n.maxHealth=void 0!==e.maxHealth?e.maxHealth:n.maxHealth,n.experience=void 0!==e.experience?e.experience:n.experience,n.maxExperience=void 0!==e.nextLevelExp?e.nextLevelExp:n.maxExperience,n.level=void 0!==e.level?e.level:n.level}return this.gameManager&&(n.gold=void 0!==this.gameManager.gold?this.gameManager.gold:n.gold,n.isInGame=this.gameManager.isGameRunning||!1),n.healthPercentage=n.maxHealth>0?Math.max(0,n.health/n.maxHealth*100):0,n.experiencePercentage=n.maxExperience>0?n.experience/n.maxExperience*100:0,n}getGameProgress(){var e,t,s,n,a;const i={gameTime:0,formattedTime:"00:00",currentWave:1,survivalTime:0,isGameRunning:!1};if(this.gameManager&&(i.survivalTime=this.gameManager.getCurrentSurvivalTime(),i.isGameRunning=this.gameManager.isGameRunning),null==(t=null==(e=this.currentScene)?void 0:e.uiManager)?void 0:t.timer){const e=this.currentScene.uiManager.timer.elapsed||0;i.gameTime=e;const t=Math.floor(e/60),s=Math.floor(e%60);i.formattedTime=`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}return(null==(n=null==(s=this.currentScene)?void 0:s.uiManager)?void 0:n.lastWave)?i.currentWave=this.currentScene.uiManager.lastWave:(null==(a=this.currentScene)?void 0:a.currentWave)&&(i.currentWave=this.currentScene.currentWave),i}setupEventEnhancement(){PC.on("player-health-updated",(e=>{const t={...e,percentage:e.maxHP>0?e.currentHP/e.maxHP*100:0,isLowHealth:e.currentHP<.25*e.maxHP,isCritical:e.currentHP<.1*e.maxHP};PC.emit("bridge-health-updated",t)})),PC.on("player-gold-updated",(e=>{const t={...e,formatted:this.formatNumber(e.gold||0)};PC.emit("bridge-gold-updated",t)})),PC.on("game-started",(()=>{console.log("GameBridge: Game started event received"),this.startSession()})),PC.on("player-died",(e=>{console.log("GameBridge: Player death event received",e),this.endSession(e)})),PC.on("attack-used",(e=>{console.log("GameBridge: Attack used event received",e);const t="3c0f31b5-b7c9-4b10-9971-c0c9b2bb0fff";console.log("GameBridge: Adding skill usage for:",t),this.addSkillUsage(t)})),this.lastKnownKills=0,PC.on("mob-killed",(e=>{console.log("GameBridge: Mob killed event received",e),this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592")})),PC.on("enemy-defeated",(e=>{console.log("GameBridge: Enemy defeated event received",e),this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592")})),PC.on("consumable-used",(e=>{console.log("GameBridge: Consumable used event received",e),this.addConsumableUsed()})),PC.on("item-consumed",(e=>{console.log("GameBridge: Item consumed event received",e),"consumable"!==e.type&&"consumable"!==e.category||this.addConsumableUsed()})),PC.on("health-potion-used",(e=>{console.log("GameBridge: Health potion used event received",e),this.addConsumableUsed()}))}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}setupMutations(){console.log("GameBridge: Setting up mutations for API calls"),this.startSessionMutation={mutationFn:_C,onSuccess:e=>{console.log("GameBridge: Start session mutation success",e),this.sessionId=e.sessionId,this.lastSyncTime=Date.now(),PC.emit("bridge-session-started",{sessionId:this.sessionId})},onError:e=>{console.error("GameBridge: Start session mutation error",e)}},this.saveCheckpointMutation={mutationFn:DC,onSuccess:(e,t)=>{console.log("GameBridge: Save checkpoint mutation success",e,t)},onError:(e,t)=>{console.error("GameBridge: Save checkpoint mutation error",e,t)}},this.endSessionMutation={mutationFn:NC,onSuccess:(e,t)=>{console.log("GameBridge: End session mutation success",e,t),PC.emit("bridge-session-ended",{sessionId:this.sessionId,deathData:t}),this.sessionId=null},onError:(e,t)=>{console.error("GameBridge: End session mutation error",e,t)}}}async startSession(){var e;try{console.log("GameBridge: Starting session...");const t=this.getMainMap(),s=t?t.id:"87224afa-25e3-4bce-8fce-0981f854e6b6",n={userId:this.getCurrentUserId(),mapId:s};console.log("GameBridge: Session data prepared",n);const a=await _C(n);console.log("GameBridge: Session API response",a),this.sessionId=null==(e=a.data)?void 0:e.id,this.lastSyncTime=Date.now(),this.lastBatchSendTime=Date.now(),this.resetBatchData(),this.lastKnownKills=0,console.log("GameBridge: Session started successfully!"),console.log("GameBridge: Session ID:",this.sessionId),console.log("GameBridge: Session data:",n),PC.emit("bridge-session-started",{sessionId:this.sessionId})}catch(t){console.error("GameBridge: Failed to start session",t),console.error("GameBridge: Error details",t.message,t.stack)}}async syncToBackend(e,t){if(this.sessionId)try{console.log("GameBridge: Starting backend sync...");const t={sessionId:this.sessionId,xp:e.experience||0,gold:e.gold||0,position:this.getPlayerPosition(),skillsUsed:this.getSkillsUsedWithCounts()};console.log("GameBridge: Checkpoint data prepared",t);const s=await DC(t);console.log("GameBridge: Checkpoint API response",s),console.log("GameBridge: Checkpoint saved:",t)}catch(s){console.error("GameBridge: Failed to save checkpoint",s),console.error("GameBridge: Checkpoint error details",s.message,s.stack)}else console.log("GameBridge: No session ID available for sync")}getPlayerPosition(){var e;return(null==(e=this.currentScene)?void 0:e.player)?`x${Math.floor(this.currentScene.player.x||0)}y${Math.floor(this.currentScene.player.y||0)}`:this.player?`x${Math.floor(this.player.x||0)}y${Math.floor(this.player.y||0)}`:"x0y0"}getSkillsUsedWithCounts(){var e,t,s;return(null==(t=null==(e=this.gameManager)?void 0:e.playerStats)?void 0:t.skillsUsed)?this.gameManager.playerStats.skillsUsed.map((e=>({skillId:e.skillId,uses:e.uses||e.count||1}))):(null==(s=this.currentScene)?void 0:s.skillsUsed)?this.currentScene.skillsUsed:[]}async endSession(e={}){if(this.sessionEnding)console.log("GameBridge: Session already ending, ignoring duplicate call");else{this.sessionId||console.log("GameBridge: No session ID available, but still sending death data"),this.sessionEnding=!0;try{console.log("GameBridge: Ending session...",e);const t={userId:this.getCurrentUserId(),deathReason:this.getDeathReason(e),causeOfDeath:this.getDeathReason(e),survivalTime:e.survivalTime||this.getGameProgress().survivalTime||0,enemiesKilled:e.enemiesKilled||0,goldEarned:e.goldEarned||0,maxLevel:e.maxLevel||1,kills:this.formatKillsData(e),skillsUsed:this.getSkillsUsed(),perfectRun:this.isPerfectRun(e),achievementPoints:this.calculateAchievementPoints(e)};console.log("GameBridge: Death payload prepared",t),console.log("GameBridge: Attempting to send death data to API...");const s=await NC(t);console.log("GameBridge: End session API response",s),console.log("GameBridge: Session ended with death data:",t),PC.emit("bridge-session-ended",{sessionId:this.sessionId,deathData:t}),await this.forceSendBatchData(),PC.emit("invalidate-dashboard-data"),console.log("GameBridge: Dashboard data invalidation requested"),this.sessionId=null}catch(t){console.error("GameBridge: Failed to end session",t),console.error("GameBridge: End session error details",t.message,t.stack)}finally{this.sessionEnding=!1}}}getCurrentUserId(){const e=localStorage.getItem("access_token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));return t.userId||t.sub}catch(IV){console.warn("Failed to parse user ID from token")}return null}getCurrentMapId(){var e,t,s,n;return(null==(e=this.currentScene)?void 0:e.mapId)?this.currentScene.mapId:(null==(s=null==(t=this.currentScene)?void 0:t.scene)?void 0:s.key)?this.getMapIdFromSceneKey(this.currentScene.scene.key):(null==(n=this.gameManager)?void 0:n.currentMapId)?this.gameManager.currentMapId:"a1b32a8b-0ff3-432c-b787-dd1713f580d9"}getMapIdFromSceneKey(e){return{MainMapScene:"a1b32a8b-0ff3-432c-b787-dd1713f580d9",MiniMapBeachScene:"b2c43b9c-1aa4-543d-c898-ee2824g691ea",MiniMapDarkForastScene:"c3d54cad-2bb5-654e-d9a9-ff3935h7a2fb",MiniMapLavaScene:"d4e65dbe-3cc6-765f-eaba-004046i8b3gc",MiniMapBossFightScene:"e5f76ecf-4dd7-876g-fbc-115157j9c4hd"}[e]||"a1b32a8b-0ff3-432c-b787-dd1713f580d9"}getDeathReason(e){return e.deathReason?e.deathReason:0===e.enemiesKilled?"You barely survived the first wave":e.survivalTime<30?"Quick death, better luck next time":"You have failed emperor"}formatKillsData(e){const t=[];return e.enemiesKilled&&t.push({type:"regular",count:e.enemiesKilled}),e.bossKills&&t.push({type:"boss",count:e.bossKills}),0===t.length&&t.push({type:"regular",count:0}),t}getSkillsUsed(){var e,t,s;return(null==(t=null==(e=this.gameManager)?void 0:e.playerStats)?void 0:t.skillsUsed)?this.gameManager.playerStats.skillsUsed.map((e=>({skillId:e.skillId,tier:e.tier||e.level||1}))):(null==(s=this.currentScene)?void 0:s.skillsUsed)?this.currentScene.skillsUsed.map((e=>({skillId:e.skillId,tier:e.tier||e.level||1}))):[]}isPerfectRun(e){const t=this.getPlayerData();return t.health===t.maxHealth&&e.survivalTime>60&&e.enemiesKilled>10}calculateAchievementPoints(e){let t=0;return t+=10*(e.survivalTime||0),t+=100*(e.enemiesKilled||0),t+=1e3*(e.bossKills||0),this.isPerfectRun(e)&&(t*=2),t}async fetchMaps(){this.mapsLoading=!0,this.mapsError=null;try{console.log("GameBridge: Fetching maps...");const e=await TC();this.maps=e||[],console.log("GameBridge: Maps fetched successfully",this.maps.data),PC.emit("bridge-maps-loaded",this.maps)}catch(e){console.error("GameBridge: Failed to fetch maps",e),this.mapsError=e.message||"Failed to fetch maps",PC.emit("bridge-maps-error",this.mapsError)}finally{this.mapsLoading=!1}}getMaps(){return{data:this.maps,loading:this.mapsLoading,error:this.mapsError}}getMapById(e){return this.maps.find((t=>t.id===e))||null}getMainMap(){var e;const t=Array.isArray(this.maps)?this.maps:(null==(e=this.maps)?void 0:e.data)||[];return t.find((e=>{var t,s;return e.isMain||(null==(t=e.name)?void 0:t.toLowerCase().includes("main"))||"main"===(null==(s=e.type)?void 0:s.toLowerCase())}))||t[0]}getCurrentMap(){const e=this.getCurrentMapId();return this.getMapById(e)}async refreshMaps(){await this.fetchMaps()}getGameState(){return{player:this.getPlayerData(),progress:this.getGameProgress(),connected:this.isConnected,sessionId:this.sessionId,maps:this.getMaps()}}isGameReady(){return!(!this.gameManager||!this.currentScene)}async forceSyncToBackend(){if(!this.sessionId)return void console.warn("GameBridge: No active session to sync");console.log("GameBridge: Force sync requested");const e=this.getPlayerData(),t=this.getGameProgress();console.log("GameBridge: Force sync data",{playerData:e,gameProgress:t}),await this.syncToBackend(e,t)}getSessionInfo(){return{sessionId:this.sessionId,isActive:!!this.sessionId,lastSyncTime:this.lastSyncTime}}addMobKill(e){if(!e)return;const t=this.batchDataCache.mobKills.get(e)||0;this.batchDataCache.mobKills.set(e,t+1),console.log(`GameBridge: Mob kill tracked - ${e}, count: ${t+1}`)}addSkillUsage(e){if(!e)return;const t=this.batchDataCache.skillUsage.get(e)||0;this.batchDataCache.skillUsage.set(e,t+1),console.log(`GameBridge: Skill usage tracked - ${e}, count: ${t+1}`)}addConsumableUsed(){this.batchDataCache.consumablesUsed+=1,console.log(`GameBridge: Consumable used tracked, total: ${this.batchDataCache.consumablesUsed}`)}resetBatchData(){this.batchDataCache.mobKills.clear(),this.batchDataCache.skillUsage.clear(),this.batchDataCache.consumablesUsed=0,this.batchDataCache.sessionId=this.sessionId,console.log("GameBridge: Batch data cache reset")}getBatchDataPayload(){const e=Array.from(this.batchDataCache.mobKills.entries()).map((([e,t])=>({mobId:e,count:t}))),t=Array.from(this.batchDataCache.skillUsage.entries()).map((([e,t])=>({skillId:e,count:t})));return{sessionId:this.sessionId||this.batchDataCache.sessionId,mobKills:e,skillUsage:t,consumablesUsed:this.batchDataCache.consumablesUsed}}async sendBatchDataToBackend(){if(console.log("GameBridge: sendBatchDataToBackend called"),console.log("GameBridge: sessionId:",this.sessionId),console.log("GameBridge: batchDataCache.sessionId:",this.batchDataCache.sessionId),!this.sessionId&&!this.batchDataCache.sessionId)return void console.log("GameBridge: No session ID available for batch data sync - EXITING");const e=this.getBatchDataPayload();if(console.log("GameBridge: Generated batch payload:",e),0===e.mobKills.length&&0===e.skillUsage.length&&0===e.consumablesUsed)return console.log("GameBridge: No meaningful batch data to send - EXITING"),console.log("GameBridge: - mobKills:",e.mobKills.length),console.log("GameBridge: - skillUsage:",e.skillUsage.length),void console.log("GameBridge: - consumablesUsed:",e.consumablesUsed);try{console.log("GameBridge: Attempting to send batch data...",e);const t=await(async e=>{try{return(await jv.post("/log-batch-events",e)).data}catch(t){throw console.error("Failed to send batch data:",t),t}})(e);console.log("GameBridge: Batch data sent successfully",t),this.resetBatchData(),PC.emit("bridge-batch-data-sent",{payload:e,response:t})}catch(t){console.error("GameBridge: Failed to send batch data",t),console.error("GameBridge: Error details:",t.message,t.stack),PC.emit("bridge-batch-data-error",{error:t,payload:e})}}async forceSendBatchData(){console.log("GameBridge: Force batch data send requested"),await this.sendBatchDataToBackend()}addTestBatchData(){console.log("GameBridge: Adding test batch data"),this.addMobKill("test-goblin"),this.addMobKill("test-skeleton"),this.addSkillUsage("test-fireball"),this.addSkillUsage("test-heal"),this.addConsumableUsed(),console.log("GameBridge: Test data added, current cache:",this.getBatchDataPayload())}logBatchDataStructure(){const e=this.getBatchDataPayload();return console.log("=== BATCH DATA STRUCTURE ==="),console.log("sessionId:",e.sessionId),console.log("mobKills:",e.mobKills),console.log("skillUsage:",e.skillUsage),console.log("consumablesUsed:",e.consumablesUsed),console.log("=== JSON STRUCTURE ==="),console.log(JSON.stringify(e,null,2)),e}checkForMobKills(){if(!this.gameManager||!this.gameManager.lastRunStats)return;const e=this.gameManager.lastRunStats.enemiesKilled||0;if(e>this.lastKnownKills){const t=e-this.lastKnownKills;console.log(`GameBridge: Detected ${t} new mob kills (${this.lastKnownKills} -> ${e})`);for(let e=0;e<t;e++)this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592");this.lastKnownKills=e}}}let wV=null;const xV=()=>(wV||(wV=new vV,window.bridgeInstance=wV,window.getBridge=xV),wV),kV=({showGoldIcon:e=!0})=>{const[t,s]=ya.useState({currentHP:100,maxHP:100,gold:500}),[n,a]=ya.useState(!0),[i,r]=ya.useState(!1),o=ya.useRef(!1);if(ya.useEffect((()=>{const e=e=>{console.log("HPBar: Health update received:",e),s((t=>({...t,currentHP:e.currentHP||e.health||e.hp||t.currentHP,maxHP:e.maxHP||e.maxHealth||e.maxHp||t.maxHP}))),r(!0),o.current=!0,a(!0)},t=e=>{if(s((t=>({currentHP:e.health||t.currentHP,maxHP:e.maxHealth||t.maxHP,gold:e.gold||t.gold}))),e.health>0&&e.maxHealth>0)return r(!0),o.current=!0,void a(!0);o.current||!1!==e.isInGame&&!1!==e.isAlive?!1!==e.isInGame&&a(!0):(a(!1),r(!1),o.current=!1)},n=e=>{s((t=>({...t,gold:e.gold||e.totalGold||t.gold})))};PC.on("player-health-updated",e),PC.on("player-hp-changed",e),PC.on("bridge-player-data",t),PC.on("player-gold-updated",n),PC.on("bridge-gold-updated",n);const i=()=>{console.log("HPBar: Game started - showing HP bar and marking as active"),r(!0),o.current=!0,a(!0)},l=()=>{console.log("HPBar: Game ended - marking as inactive"),r(!1),o.current=!1};PC.on("game-started",i),PC.on("main-scene-started",i),PC.on("current-scene-ready",i),PC.on("new-run-started",i),PC.on("player-death",l),PC.on("game-ended",l);const c=xV().getGameState();c&&c.player&&t(c.player);const h=setTimeout((()=>{console.log("HPBar: Fallback timer - ensuring HP bar is visible"),a(!0)}),2e3);return()=>{clearTimeout(h),PC.off("player-health-updated",e),PC.off("player-hp-changed",e),PC.off("bridge-player-data",t),PC.off("player-gold-updated",n),PC.off("bridge-gold-updated",n),PC.off("game-started",i),PC.off("main-scene-started",i),PC.off("current-scene-ready",i),PC.off("new-run-started",i),PC.off("player-death",l),PC.off("game-ended",l)}}),[]),!n)return null;const l=Math.max(0,Math.min(100,t.currentHP/t.maxHP*100)),c=l<25,h=l<10;return Pa.jsx("div",{children:n&&Pa.jsxs("div",{style:{position:"fixed",top:"2vh",left:"2vw",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px"},children:[Pa.jsxs("div",{style:{position:"relative",width:"300px",height:"50px"},children:[Pa.jsx("div",{style:{position:"absolute",top:"0px",left:"0px",width:"200%",height:"250%",backgroundImage:"url(/assets/HUD/HUD_HP_BG_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),Pa.jsx("div",{style:{position:"absolute",top:"26px",left:"60px",width:`calc((165% - 24px) * ${l/100})`,height:"calc(140% - 12px)",backgroundColor:l>50?"#4CAF50":l>25?"#FF9800":"#F44336",borderRadius:"3px",zIndex:2,transition:"width 0.3s ease-in-out, background-color 0.3s ease-in-out"}}),Pa.jsx("div",{style:{position:"absolute",top:"26px",left:"60px",width:"160%",height:"140%",backgroundImage:"url(./assets/HUD/HUD_HP_Indicator_Frame_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:3}}),Pa.jsxs("div",{style:{position:"absolute",top:"130%",left:"100%",transform:"translate(-50%, -50%)",color:c?"#ff6b6b":"white",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:4,pointerEvents:"none"},children:[Math.ceil(t.currentHP),"/",t.maxHP]}),c&&Pa.jsx("div",{style:{position:"absolute",top:"55px",left:"150px",transform:"translateX(-50%)",color:h?"#ff4444":"#ff8844",fontSize:"12px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.9)",zIndex:4},children:h?"CRITICAL!":"LOW HEALTH!"})]}),e&&Pa.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"rgba(0,0,0,0.7)",padding:"10px 15px",borderRadius:"25px",border:"2px solid #FFD700",marginTop:"65px",marginLeft:"10px"},children:[Pa.jsx("div",{style:{width:"30px",height:"30px",backgroundImage:"url(./assets/HUD/HUD_Gold_Icon_V01.png)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Pa.jsx("span",{style:{color:"#FFD700",fontSize:"20px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:t.gold.toLocaleString()})]})]})})},AV=()=>{const[e,t]=ya.useState({currentExp:0,maxExp:100,level:1}),[s,n]=ya.useState([]),[a,i]=ya.useState({}),[r,o]=ya.useState({}),[l,c]=ya.useState({}),[h,u]=ya.useState(!0),d=ya.useRef({}),p={slash:{name:"Slash Attack",icon:"/upgrade-icon/icon_slash.png",glowIcon:"/upgrade-icon/icon_slash_glow_effect.png",defaultCooldown:1e3,keybind:"1"},fireBullet:{name:"Fire Arrow",icon:"/upgrade-icon/icon_fire_arrow.png",glowIcon:"/upgrade-icon/icon_fire_arrow_glow_effect.png",defaultCooldown:800,keybind:"2"},fireBomb:{name:"Fire Ball",icon:"/upgrade-icon/icon_fire_ball.png",glowIcon:"/upgrade-icon/icon_fire_ball_glow_effect.png",defaultCooldown:2500,keybind:"3"},ice:{name:"Ice Shard",icon:"/upgrade-icon/icon_ice_shard.png",glowIcon:"/upgrade-icon/icon_ice_shard_glow_effect.png",defaultCooldown:1600,keybind:"4"},lightning:{name:"Lightning Chain",icon:"/upgrade-icon/icon_lightning_chain.png",glowIcon:"/upgrade-icon/icon_lightning_chain_glow_effect.png",defaultCooldown:2e3,keybind:"5"},blindingLight:{name:"Holy Light",icon:"/upgrade-icon/icon_holy_light-.png",glowIcon:"/upgrade-icon/icon_holy_light_glow_effect.png",defaultCooldown:6e3,keybind:"6"},marksman:{name:"Marksman Shot",icon:"/upgrade-icon/icon_marksman.png",glowIcon:"/upgrade-icon/icon_marksman_glow_effect.png",defaultCooldown:3300,keybind:"7"}},f=()=>{Object.keys(d.current).forEach((e=>{d.current[e]&&(clearInterval(d.current[e]),delete d.current[e])}))},m=e=>{d.current[e]&&(clearInterval(d.current[e]),delete d.current[e])};ya.useEffect((()=>{const e=e=>{t((t=>({...t,currentExp:e.currentExp??e.experience??e.exp??t.currentExp,maxExp:e.maxExp??e.maxExperience??e.maxExp??t.maxExp,level:e.level??e.lvl??t.level})))},s=e=>{t((t=>({...t,currentExp:e.currentExp??e.experience??e.exp??t.currentExp,maxExp:e.maxExp??e.maxExperience??e.maxExp??t.maxExp,level:e.level??e.lvl??t.level})))},n=e=>{e.skillLevels&&(c(e.skillLevels),g(e.skillLevels))},a=e=>{const{skillKey:t,cooldown:s}=e;t&&p[t]&&s&&!isNaN(s)&&s>0&&(o((e=>({...e,[t]:s}))),i((e=>({...e,[t]:s}))),(e=>{m(e);const t=setInterval((()=>{i((t=>{const s=t[e];if(!s||s<=0){m(e);const{[e]:s,...n}=t;return n}const n=Math.max(0,s-100);return{...t,[e]:n}}))}),100);d.current[e]=t})(t))},r=e=>{const t={slash:"slash",fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e.attackType||e.type];if(t&&p[t]){const s=e.cooldown||p[t].defaultCooldown;!isNaN(s)&&s>0&&a({skillKey:t,cooldown:s})}},l=()=>{u(!0)},h=()=>{u(!1),f(),i({}),o({})},y=()=>{u(!1),f(),i({}),o({})};PC.on("player-exp-updated",e),PC.on("player-experience-updated",e),PC.on("player-stats-updated",s),PC.on("skill-levels-updated",n),PC.on("skill-used",a),PC.on("attack-used",r),PC.on("player-attack-used",r),PC.on("game-started",l),PC.on("game-stopped",h),PC.on("player-death",y),PC.on("main-scene-started",l);const b=t=>{t.detail&&e(t.detail)},v=e=>{e.detail&&s(e.detail)},w=e=>{e.detail&&n(e.detail)},x=e=>{e.detail&&r(e.detail)};return window.addEventListener("playerExpUpdated",b),window.addEventListener("playerExperienceUpdated",b),window.addEventListener("playerStatsUpdated",v),window.addEventListener("skillLevelsUpdated",w),window.addEventListener("playerDeath",y),window.addEventListener("attackUsed",x),window.addEventListener("playerAttackUsed",x),()=>{f(),PC.removeListener("player-exp-updated",e),PC.removeListener("player-experience-updated",e),PC.removeListener("player-stats-updated",s),PC.removeListener("skill-levels-updated",n),PC.removeListener("skill-used",a),PC.removeListener("attack-used",r),PC.removeListener("player-attack-used",r),PC.removeListener("game-started",l),PC.removeListener("game-stopped",h),PC.removeListener("player-death",y),PC.removeListener("main-scene-started",l),window.removeEventListener("playerExpUpdated",b),window.removeEventListener("playerExperienceUpdated",b),window.removeEventListener("playerStatsUpdated",v),window.removeEventListener("skillLevelsUpdated",w),window.removeEventListener("playerDeath",y),window.removeEventListener("attackUsed",x),window.removeEventListener("playerAttackUsed",x)}}),[]);const g=e=>{const t=Object.keys(p).filter((t=>e[t]>0)).slice(0,7);n(t)};if(!h)return null;const y=Math.max(0,Math.min(100,e.currentExp/e.maxExp*100));return Pa.jsxs("div",{style:{position:"fixed",bottom:"3vh",left:"50%",transform:"translateX(-50%)",zIndex:9999},children:[Pa.jsxs("div",{style:{position:"relative",width:"600px",height:"180px"},children:[Pa.jsx("div",{style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",backgroundImage:"url(/assets/HUD/HUD_Skill_Table_XP_BG_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:2}}),Pa.jsx("div",{style:{position:"absolute",left:"48px",top:"26px",width:`calc((26.3vw) * ${y/100})`,height:"24px",backgroundImage:"url(/assets/HUD/HUD_Skill_Table_XP_Indicator_Animation_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1,transition:"width 0.5s ease-in-out"}}),Pa.jsx("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"15px",zIndex:2},children:[1,2,3,4,5,6,7].map((e=>{const t=s[e-1],n=t?p[t]:null,i=t&&a[t]&&a[t]>0&&!isNaN(a[t]),o=t?(e=>{const t=a[e],s=r[e];return!t||!s||isNaN(t)||isNaN(s)||t<=0||s<=0?0:Math.min(100,Math.max(0,t/s*100))})(t):0,c=t?l[t]:0,h=t?(e=>{const t=a[e];if(!t||t<=0||isNaN(t))return"";const s=Math.ceil(t/1e3);return s>0?s.toString():""})(t):"";return Pa.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",backgroundColor:n?"rgba(30, 30, 30, 0.8)":"rgba(0,0,0,0.5)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s ease",boxShadow:n&&!i?"0 0 10px rgba(255, 215, 0, 0.3)":"none"},title:n?`${n.name} (Auto) - Level ${c}`:`Skill Slot ${e}`,children:[n&&Pa.jsx("img",{src:n.icon,alt:n.name,style:{width:"60px",height:"60px",opacity:i?.5:1,filter:i?"grayscale(50%)":"none",transition:"all 0.2s ease"}}),i&&Pa.jsxs(Pa.Fragment,{children:[Pa.jsx("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:`${o}%`,backgroundColor:"rgba(0, 0, 0, 0.7)",transition:"height 0.1s ease-out",zIndex:3}}),h&&Pa.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#FF6B6B",fontSize:"16px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",zIndex:4},children:h})]}),n&&c>0&&Pa.jsx("div",{style:{position:"absolute",top:"-3px",right:"-3px",width:"18px",height:"18px",backgroundColor:"#4A90E2",border:"1px solid #FFD700",borderRadius:"50%",color:"white",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",zIndex:5},children:c}),n&&!i&&Pa.jsx("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundImage:`url(${n.glowIcon})`,backgroundSize:"80% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:.3,animation:"skillGlow 2s ease-in-out infinite alternate",pointerEvents:"none",zIndex:1}})]},e)}))}),Pa.jsxs("div",{style:{position:"absolute",left:"24px",color:"#FFD700",fontSize:"20px",top:"-5px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:3,pointerEvents:"none"},children:["Lv.",e.level]}),Pa.jsxs("div",{style:{position:"absolute",top:"-5px",right:"24px",color:"white",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:3,pointerEvents:"none"},children:[Math.floor(e.currentExp),"/",e.maxExp]})]}),Pa.jsx("style",{jsx:!0,children:"\n                @keyframes skillGlow {\n                    0% { opacity: 0.1; }\n                    100% { opacity: 0.4; }\n                }\n            "})]})},EV=()=>{const[e,t]=ya.useState("00:00"),[s,n]=ya.useState(1),[a,i]=ya.useState(!1);return ya.useEffect((()=>{const e=()=>{i(!0)},s=()=>{i(!1)},a=e=>{e.formattedTime&&t(e.formattedTime),void 0!==e.currentWave&&n(e.currentWave)},r=e=>{void 0!==e.wave&&n(e.wave)};return PC.on("timer-start",e),PC.on("timer-stop",s),PC.on("timer-updated",a),PC.on("wave-updated",r),PC.on("wave-notification",r),()=>{PC.off("timer-start",e),PC.off("timer-stop",s),PC.off("timer-updated",a),PC.off("wave-updated",r),PC.off("wave-notification",r)}}),[]),ya.useEffect((()=>(window.reactTimerState={time:e,currentWave:s,isGameRunning:a,getGameScene:()=>{var e,t,s,n,a;return(null==(t=null==(e=window.game)?void 0:e.scene)?void 0:t.getScene("MainMapScene"))||(null==(a=null==(n=null==(s=window.game)?void 0:s.scene)?void 0:n.scenes)?void 0:a.find((e=>"MainMapScene"===e.scene.key)))||window.currentGameScene}},()=>{delete window.reactTimerState})),[e,s,a]),Pa.jsx("div",{style:{position:"fixed",top:"2vh",left:"50%",transform:"translateX(-50%)",zIndex:9999},children:Pa.jsxs("div",{style:{position:"relative",width:"280px",height:"120px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Pa.jsx("div",{style:{position:"absolute",top:"0px",left:"50%",transform:"translateX(-50%)",width:"240px",height:"80px",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Top_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),Pa.jsx("div",{style:{position:"absolute",top:"35%",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:Pa.jsx("div",{style:{color:"white",fontSize:"40px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",letterSpacing:"1px"},children:e})}),Pa.jsx("div",{style:{position:"absolute",top:"65%",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:Pa.jsxs("div",{style:{color:"#FFD700",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",letterSpacing:"1px"},children:["WAVE ",s]})}),Pa.jsx("div",{style:{position:"absolute",top:"80%",left:"50%",transform:"translateX(-50%)",width:"200px",height:"60px",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Bottom_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),!1]})})},SV=()=>{const[e,t]=ya.useState(null);return ya.useEffect((()=>{const e=e=>{const s={id:Date.now(),text:`WAVE ${e.wave||e.value||1}`,timestamp:Date.now()};t(s),setTimeout((()=>{t(null)}),3e3)};return PC.on("wave-notification",e),()=>{PC.removeListener("wave-notification",e)}}),[]),e?Pa.jsxs("div",{style:{position:"fixed",bottom:"20vh",left:"50%",transform:"translateX(-50%)",width:"220px",height:"80px",zIndex:1e4,pointerEvents:"none",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Top_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",display:"flex",alignItems:"center",justifyContent:"center",animation:"simpleFade 3s ease-in-out forwards"},children:[Pa.jsx("div",{style:{color:"#FFD700",marginTop:"5vh",fontSize:"20px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,1)",letterSpacing:"1px",textAlign:"center",whiteSpace:"nowrap"},children:e.text}),Pa.jsx("style",{jsx:!0,children:"\n                @keyframes simpleFade {\n                    0% { opacity: 0; }\n                    20% { opacity: 1; }\n                    80% { opacity: 1; }\n                    100% { opacity: 0; }\n                }\n            "})]}):null},PV=({children:e})=>{const{user:t,isLoading:s}=Zv();return s?Pa.jsx("div",{children:"Loading..."}):t?e:Pa.jsx(Wg,{to:"/login",replace:!0})},TV=({children:e})=>{const{user:t,isLoading:s}=Zv();return s?Pa.jsx("div",{children:"Loading..."}):t?Pa.jsx(Wg,{to:"/",replace:!0}):e};function BV(){const e=ya.useRef(),[t,s]=ya.useState("menu"),[n,a]=ya.useState(!1),[i,r]=ya.useState(null),[o,l]=ya.useState(!1),[c,h]=ya.useState(null),[u,d]=ya.useState(3),{setGameControls:p}=Yv(),f=Mg(),m=_g(),g=()=>{var t;s("playing"),a(!0),(null==(t=e.current)?void 0:t.startGame)&&e.current.startGame()},y=()=>{var t;s("menu"),a(!1),(null==(t=e.current)?void 0:t.stopGame)&&e.current.stopGame()};return ya.useEffect((()=>{p&&p({startGame:g,returnToMenu:y,gameState:t})}),[p,t]),ya.useEffect((()=>{"true"===new URLSearchParams(f.search).get("autostart")&&"menu"===t&&(console.log("Auto-starting game from URL parameter"),setTimeout((()=>{g()}),500))}),[f.search,t]),ya.useEffect((()=>{let e;return"paused"===t&&(e=setTimeout((()=>{s("playing")}),3e3)),()=>{e&&clearTimeout(e)}}),[t]),ya.useEffect((()=>{let e;return"paused"===t&&(d(3),e=setInterval((()=>{d((t=>t<=1?(clearInterval(e),0):t-1))}),1e3)),()=>{e&&clearInterval(e)}}),[t]),ya.useEffect((()=>{const e=()=>{s("playing"),a(!0)},n=e=>{console.log("Game over event received:",e),h(e),l(!0),a(!1)},i=()=>{y()};PC.on("game-started",e),PC.on("game-over",n),PC.on("return-to-menu",i);const r=e=>{"Escape"===e.key&&"playing"===t&&y()};return document.addEventListener("keydown",r),()=>{PC.removeListener("game-started",e),PC.removeListener("game-over",n),PC.removeListener("return-to-menu",i),document.removeEventListener("keydown",r)}}),[t,m]),Pa.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",overflow:"hidden"},children:["menu"===t&&!o&&Pa.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10},children:Pa.jsx(eM,{onStartGame:g})}),Pa.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,overflow:"hidden",display:"playing"===t?"block":"none"},children:Pa.jsx(bV,{ref:e,currentActiveScene:e=>{var t;"MainMapScene"===(null==(t=null==e?void 0:e.scene)?void 0:t.key)&&a(!0)},showModal:(e,t)=>{switch(console.log("Game modal requested:",{id:e,modalData:t}),e){case"PAUSE_MENU":s("paused");break;case"GAME_OVER":console.log("Game over - showing death loading screen",t),h(t),l(!0),a(!1)}},autoStart:!1})}),"playing"===t&&!o&&Pa.jsxs(Pa.Fragment,{children:[n&&Pa.jsx(kV,{showGoldIcon:!0}),n&&Pa.jsx(AV,{}),n&&Pa.jsx(EV,{}),n&&Pa.jsx(SV,{}),Pa.jsx("div",{style:{position:"fixed",top:"2vh",right:"2vw",color:"white",fontSize:"14px",background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"4px",zIndex:1e3},children:"Press ESC to return to menu"})]}),"paused"===t&&!o&&Pa.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(45deg, #1a1a1a, #2d1b1b, #1a1a1a)",backgroundSize:"400% 400%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"backgroundShift 4s ease-in-out infinite"},children:Pa.jsxs("div",{className:"bg-cover p-5 rounded-lg text-white text-center w-[500px] h-[200px] flex flex-col justify-center items-center gap-[32px]",children:[Pa.jsx("div",{children:Pa.jsx("img",{src:"GamePause.png",className:"w-140 h-auto",alt:""})}),Pa.jsx("div",{className:"text-2xl text-yellow-400 font-bold",children:u}),Pa.jsxs("div",{className:"flex gap-[10px]",children:[Pa.jsx("button",{onClick:()=>s("playing"),className:"bg-cover bg-center bg-no-repeat w-[200px] h-[50px] border-none cursor-pointer transition-transform duration-200 hover:scale-105",style:{backgroundImage:"url('./Resume.png')"}}),Pa.jsx("button",{onClick:y,className:"bg-cover bg-center bg-no-repeat w-[200px] pr-50 h-[50px] border-none cursor-pointer transition-transform duration-200 hover:scale-105",style:{backgroundImage:"url('./PauseGame.png')"}})]})]})}),Pa.jsx(yV,{isVisible:o,deathData:c,onComplete:()=>{console.log("Death loading complete - navigating to dashboard"),l(!1),h(null),s("menu"),m("/")}})]})}function CV(){return Pa.jsx("div",{className:"App",children:Pa.jsxs(Qg,{children:[Pa.jsx(qg,{path:"/login",element:Pa.jsx(TV,{children:Pa.jsx(kC,{})})}),Pa.jsxs(qg,{path:"/",element:Pa.jsx(PV,{children:Pa.jsx(cM,{})}),children:[Pa.jsx(qg,{index:!0,element:Pa.jsx(gR,{})}),Pa.jsx(qg,{path:"leaderboard",element:Pa.jsx(yR,{})}),Pa.jsx(qg,{path:"quest",element:Pa.jsx(bR,{})}),Pa.jsx(qg,{path:"market",element:Pa.jsx(vR,{})}),Pa.jsx(qg,{path:"guide",element:Pa.jsx(xR,{})}),Pa.jsx(qg,{path:"about",element:Pa.jsx(PV,{children:Pa.jsxs("div",{className:"p-8",children:[Pa.jsx("h1",{className:"text-display-1-alagard-bold",children:"Alagard title"}),Pa.jsx("h1",{className:"text-display-1-pixelify-bold",children:"Pixelify title"}),Pa.jsx("h2",{className:"text-heading-1-alagard",children:"Alagard heading"}),Pa.jsx("h2",{className:"text-heading-1-pixelify-bold",children:"Pixelify heading"}),Pa.jsx("p",{className:"text-body-1-alagard",children:"Alagard body text"}),Pa.jsx("p",{className:"text-body-2-pixelify-bold",children:"Pixelify body text"}),Pa.jsx("button",{className:"text-button-56-alagard",children:"Alagard button"}),Pa.jsx("button",{className:"text-button-48-pixelify",children:"Pixelify button"})]})})}),Pa.jsx(qg,{path:"account",element:Pa.jsx(bz,{})}),Pa.jsx(qg,{path:"*",element:Pa.jsx(Wg,{to:"/",replace:!0})})]}),Pa.jsx(qg,{path:"/game/*",element:Pa.jsx(PV,{children:Pa.jsx(Jv,{children:Pa.jsx(BV,{})})})})]})})}const MV=new eR({defaultOptions:{queries:{staleTime:3e5,retry:1}}});function RV(){return Pa.jsx(cR,{client:MV,children:Pa.jsx(Qv,{children:Pa.jsx(YC,{children:Pa.jsx(fy,{children:Pa.jsx(CV,{})})})})})}Ta.createRoot(document.getElementById("root")).render(Pa.jsx(ba.StrictMode,{children:Pa.jsx(RV,{})}));export{xI as B,xN as H,BO as a,cD as b,UF as c,ZD as d,bD as e,yI as f,fN as g,hF as i,TO as l,XD as s};
