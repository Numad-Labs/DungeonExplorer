const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ccip-wN7DKlIT.js","./phaser-CPm-u6kw.js"])))=>i.map(i=>d[i]);
var e,t,s,n,i,a,r,o,l,c,h,u,d,p,f,m,g,y,b,v,w,x,k,A,E,S,P,T,B,C,M,R,D,I,_,N,L,F,O,j,U,G,H,z,V,W,$,q,K,Q,Z,X,Y,J,ee,te,se,ne,ie,ae,re,oe,le,ce,he,ue,de,pe,fe,me,ge,ye,be,ve,we,xe,ke,Ae,Ee,Se,Pe,Te,Be,Ce,Me,Re,De,Ie,_e,Ne,Le,Fe,Oe,je,Ue,Ge,He,ze,Ve,We,$e,qe,Ke,Qe,Ze,Xe,Ye,Je,et,tt,st,nt,it,at,rt,ot,lt,ct,ht,ut,dt,pt,ft,mt,gt,yt,bt,vt,wt,xt,kt,At,Et,St,Pt,Tt,Bt,Ct,Mt,Rt,Dt,It,_t,Nt,Lt,Ft,Ot,jt,Ut,Gt,Ht,zt,Vt,Wt,$t,qt,Kt,Qt,Zt,Xt,Yt,Jt,es,ts,ss,ns,is,as,rs,os,ls,cs,hs,us,ds,ps,fs,ms,gs,ys,bs,vs,ws,xs,ks,As,Es,Ss,Ps,Ts,Bs,Cs,Ms,Rs,Ds,Is,_s,Ns,Ls,Fs,Os,js,Us,Gs,Hs,zs,Vs,Ws,$s,qs,Ks,Qs,Zs,Xs,Ys,Js,en,tn,sn,nn,an,rn,on,ln,cn,hn,un,dn,pn,fn,mn,gn,yn,bn,vn,wn,xn,kn=Object.defineProperty,An=e=>{throw TypeError(e)},En=(e,t,s)=>((e,t,s)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),Sn=(e,t,s)=>t.has(e)||An("Cannot "+s),Pn=(e,t,s)=>(Sn(e,t,"read from private field"),s?s.call(e):t.get(e)),Tn=(e,t,s)=>t.has(e)?An("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Bn=(e,t,s,n)=>(Sn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Cn=(e,t,s)=>(Sn(e,t,"access private method"),s),Mn=(e,t,s,n)=>({set _(n){Bn(e,t,n,s)},get _(){return Pn(e,t,n)}});import{g as Rn,P as Dn}from"./phaser-CPm-u6kw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var In={exports:{}},_n={},Nn={exports:{}},Ln={},Fn=Symbol.for("react.element"),On=Symbol.for("react.portal"),jn=Symbol.for("react.fragment"),Un=Symbol.for("react.strict_mode"),Gn=Symbol.for("react.profiler"),Hn=Symbol.for("react.provider"),zn=Symbol.for("react.context"),Vn=Symbol.for("react.forward_ref"),Wn=Symbol.for("react.suspense"),$n=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Kn=Symbol.iterator,Qn={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zn=Object.assign,Xn={};function Yn(e,t,s){this.props=e,this.context=t,this.refs=Xn,this.updater=s||Qn}function Jn(){}function ei(e,t,s){this.props=e,this.context=t,this.refs=Xn,this.updater=s||Qn}Yn.prototype.isReactComponent={},Yn.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},Yn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Jn.prototype=Yn.prototype;var ti=ei.prototype=new Jn;ti.constructor=ei,Zn(ti,Yn.prototype),ti.isPureReactComponent=!0;var si=Array.isArray,ni=Object.prototype.hasOwnProperty,ii={current:null},ai={key:!0,ref:!0,__self:!0,__source:!0};function ri(e,t,s){var n,i={},a=null,r=null;if(null!=t)for(n in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(a=""+t.key),t)ni.call(t,n)&&!ai.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(1===o)i.children=s;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===i[n]&&(i[n]=o[n]);return{$$typeof:Fn,type:e,key:a,ref:r,props:i,_owner:ii.current}}function oi(e){return"object"==typeof e&&null!==e&&e.$$typeof===Fn}var li=/\/+/g;function ci(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function hi(e,t,s,n,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var r=!1;if(null===e)r=!0;else switch(a){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Fn:case On:r=!0}}if(r)return i=i(r=e),e=""===n?"."+ci(r,0):n,si(i)?(s="",null!=e&&(s=e.replace(li,"$&/")+"/"),hi(i,t,s,"",(function(e){return e}))):null!=i&&(oi(i)&&(i=function(e,t){return{$$typeof:Fn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||r&&r.key===i.key?"":(""+i.key).replace(li,"$&/")+"/")+e)),t.push(i)),1;if(r=0,n=""===n?".":n+":",si(e))for(var o=0;o<e.length;o++){var l=n+ci(a=e[o],o);r+=hi(a,t,s,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Kn&&e[Kn]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(a=e.next()).done;)r+=hi(a=a.value,t,s,l=n+ci(a,o++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return r}function ui(e,t,s){if(null==e)return e;var n=[],i=0;return hi(e,n,"","",(function(e){return t.call(s,e,i++)})),n}function di(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var pi={current:null},fi={transition:null},mi={ReactCurrentDispatcher:pi,ReactCurrentBatchConfig:fi,ReactCurrentOwner:ii};function gi(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:ui,forEach:function(e,t,s){ui(e,(function(){t.apply(this,arguments)}),s)},count:function(e){var t=0;return ui(e,(function(){t++})),t},toArray:function(e){return ui(e,(function(e){return e}))||[]},only:function(e){if(!oi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Ln.Component=Yn,Ln.Fragment=jn,Ln.Profiler=Gn,Ln.PureComponent=ei,Ln.StrictMode=Un,Ln.Suspense=Wn,Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mi,Ln.act=gi,Ln.cloneElement=function(e,t,s){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Zn({},e.props),i=e.key,a=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,r=ii.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)ni.call(t,l)&&!ai.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=s;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:Fn,type:e.type,key:i,ref:a,props:n,_owner:r}},Ln.createContext=function(e){return(e={$$typeof:zn,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Hn,_context:e},e.Consumer=e},Ln.createElement=ri,Ln.createFactory=function(e){var t=ri.bind(null,e);return t.type=e,t},Ln.createRef=function(){return{current:null}},Ln.forwardRef=function(e){return{$$typeof:Vn,render:e}},Ln.isValidElement=oi,Ln.lazy=function(e){return{$$typeof:qn,_payload:{_status:-1,_result:e},_init:di}},Ln.memo=function(e,t){return{$$typeof:$n,type:e,compare:void 0===t?null:t}},Ln.startTransition=function(e){var t=fi.transition;fi.transition={};try{e()}finally{fi.transition=t}},Ln.unstable_act=gi,Ln.useCallback=function(e,t){return pi.current.useCallback(e,t)},Ln.useContext=function(e){return pi.current.useContext(e)},Ln.useDebugValue=function(){},Ln.useDeferredValue=function(e){return pi.current.useDeferredValue(e)},Ln.useEffect=function(e,t){return pi.current.useEffect(e,t)},Ln.useId=function(){return pi.current.useId()},Ln.useImperativeHandle=function(e,t,s){return pi.current.useImperativeHandle(e,t,s)},Ln.useInsertionEffect=function(e,t){return pi.current.useInsertionEffect(e,t)},Ln.useLayoutEffect=function(e,t){return pi.current.useLayoutEffect(e,t)},Ln.useMemo=function(e,t){return pi.current.useMemo(e,t)},Ln.useReducer=function(e,t,s){return pi.current.useReducer(e,t,s)},Ln.useRef=function(e){return pi.current.useRef(e)},Ln.useState=function(e){return pi.current.useState(e)},Ln.useSyncExternalStore=function(e,t,s){return pi.current.useSyncExternalStore(e,t,s)},Ln.useTransition=function(){return pi.current.useTransition()},Ln.version="18.3.1",Nn.exports=Ln;var yi=Nn.exports;const bi=Rn(yi);var vi=yi,wi=Symbol.for("react.element"),xi=Symbol.for("react.fragment"),ki=Object.prototype.hasOwnProperty,Ai=vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ei={key:!0,ref:!0,__self:!0,__source:!0};function Si(e,t,s){var n,i={},a=null,r=null;for(n in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(r=t.ref),t)ki.call(t,n)&&!Ei.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:wi,type:e,key:a,ref:r,props:i,_owner:Ai.current}}_n.Fragment=xi,_n.jsx=Si,_n.jsxs=Si,In.exports=_n;var Pi=In.exports,Ti={},Bi={exports:{}},Ci={},Mi={exports:{}},Ri={};!function(e){function t(e,t){var s=e.length;e.push(t);e:for(;0<s;){var n=s-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[s]=a,s=n}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var n=0,a=e.length,r=a>>>1;n<r;){var o=2*(n+1)-1,l=e[o],c=o+1,h=e[c];if(0>i(l,s))c<a&&0>i(h,l)?(e[n]=h,e[c]=s,n=c):(e[n]=l,e[o]=s,n=o);else{if(!(c<a&&0>i(h,s)))break e;e[n]=h,e[c]=s,n=c}}}return t}function i(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var r=Date,o=r.now();e.unstable_now=function(){return r.now()-o}}var l=[],c=[],h=1,u=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=s(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=s(c)}}function w(e){if(m=!1,v(e),!f)if(null!==s(l))f=!0,D(x);else{var t=s(c);null!==t&&I(w,t.startTime-e)}}function x(t,i){f=!1,m&&(m=!1,y(S),S=-1),p=!0;var a=d;try{for(v(i),u=s(l);null!==u&&(!(u.expirationTime>i)||t&&!B());){var r=u.callback;if("function"==typeof r){u.callback=null,d=u.priorityLevel;var o=r(u.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?u.callback=o:u===s(l)&&n(l),v(i)}else n(l);u=s(l)}if(null!==u)var h=!0;else{var g=s(c);null!==g&&I(w,g.startTime-i),h=!1}return h}finally{u=null,d=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,E=null,S=-1,P=5,T=-1;function B(){return!(e.unstable_now()-T<P)}function C(){if(null!==E){var t=e.unstable_now();T=t;var s=!0;try{s=E(!0,t)}finally{s?k():(A=!1,E=null)}}else A=!1}if("function"==typeof b)k=function(){b(C)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,R=M.port2;M.port1.onmessage=C,k=function(){R.postMessage(null)}}else k=function(){g(C,0)};function D(e){E=e,A||(A=!0,k())}function I(t,s){S=g((function(){t(e.unstable_now())}),s)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,D(x))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return s(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var s=d;d=t;try{return e()}finally{d=s}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=d;d=e;try{return t()}finally{d=s}},e.unstable_scheduleCallback=function(n,i,a){var r=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?r+a:r,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:h++,callback:i,priorityLevel:n,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>r?(n.sortIndex=a,t(c,n),null===s(l)&&n===s(c)&&(m?(y(S),S=-1):m=!0,I(w,a-r))):(n.sortIndex=o,t(l,n),f||p||(f=!0,D(x))),n},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(e){var t=d;return function(){var s=d;d=t;try{return e.apply(this,arguments)}finally{d=s}}}}(Ri),Mi.exports=Ri;var Di=Mi.exports,Ii=yi,_i=Di;function Ni(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Li=new Set,Fi={};function Oi(e,t){ji(e,t),ji(e+"Capture",t)}function ji(e,t){for(Fi[e]=t,e=0;e<t.length;e++)Li.add(t[e])}var Ui=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Gi=Object.prototype.hasOwnProperty,Hi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zi={},Vi={};function Wi(e,t,s,n,i,a,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=r}var $i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$i[e]=new Wi(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$i[t]=new Wi(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$i[e]=new Wi(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$i[e]=new Wi(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$i[e]=new Wi(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$i[e]=new Wi(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){$i[e]=new Wi(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){$i[e]=new Wi(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){$i[e]=new Wi(e,5,!1,e.toLowerCase(),null,!1,!1)}));var qi=/[\-:]([a-z])/g;function Ki(e){return e[1].toUpperCase()}function Qi(e,t,s,n){var i=$i.hasOwnProperty(t)?$i[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,n){if(null==t||function(e,t,s,n){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,n))return!0;if(n)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,i,n)&&(s=null),n||null===i?function(e){return!!Gi.call(Vi,e)||!Gi.call(zi,e)&&(Hi.test(e)?Vi[e]=!0:(zi[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=null===s?3!==i.type&&"":s:(t=i.attributeName,n=i.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(i=i.type)||4===i&&!0===s?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(qi,Ki);$i[t]=new Wi(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(qi,Ki);$i[t]=new Wi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(qi,Ki);$i[t]=new Wi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){$i[e]=new Wi(e,1,!1,e.toLowerCase(),null,!1,!1)})),$i.xlinkHref=new Wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){$i[e]=new Wi(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Zi=Ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xi=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),ta=Symbol.for("react.profiler"),sa=Symbol.for("react.provider"),na=Symbol.for("react.context"),ia=Symbol.for("react.forward_ref"),aa=Symbol.for("react.suspense"),ra=Symbol.for("react.suspense_list"),oa=Symbol.for("react.memo"),la=Symbol.for("react.lazy"),ca=Symbol.for("react.offscreen"),ha=Symbol.iterator;function ua(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ha&&e[ha]||e["@@iterator"])?e:null}var da,pa=Object.assign;function fa(e){if(void 0===da)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);da=t&&t[1]||""}return"\n"+da+e}var ma=!1;function ga(e,t){if(!e||ma)return"";ma=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=n.stack.split("\n"),r=i.length-1,o=a.length-1;1<=r&&0<=o&&i[r]!==a[o];)o--;for(;1<=r&&0<=o;r--,o--)if(i[r]!==a[o]){if(1!==r||1!==o)do{if(r--,0>--o||i[r]!==a[o]){var l="\n"+i[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=o);break}}}finally{ma=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?fa(e):""}function ya(e){switch(e.tag){case 5:return fa(e.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return ga(e.type,!1);case 11:return ga(e.type.render,!1);case 1:return ga(e.type,!0);default:return""}}function ba(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ji:return"Fragment";case Yi:return"Portal";case ta:return"Profiler";case ea:return"StrictMode";case aa:return"Suspense";case ra:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case na:return(e.displayName||"Context")+".Consumer";case sa:return(e._context.displayName||"Context")+".Provider";case ia:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case oa:return null!==(t=e.displayName||null)?t:ba(e.type)||"Memo";case la:t=e._payload,e=e._init;try{return ba(e(t))}catch(s){}}return null}function va(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ba(t);case 8:return t===ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function wa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function xa(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ka(e){e._valueTracker||(e._valueTracker=function(e){var t=xa(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var i=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Aa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=xa(e)?e.checked?"true":"false":e.value),(e=n)!==s&&(t.setValue(e),!0)}function Ea(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Sa(e,t){var s=t.checked;return pa({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function Pa(e,t){var s=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;s=wa(null!=t.value?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ta(e,t){null!=(t=t.checked)&&Qi(e,"checked",t,!1)}function Ba(e,t){Ta(e,t);var s=wa(t.value),n=t.type;if(null!=s)"number"===n?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ma(e,t.type,s):t.hasOwnProperty("defaultValue")&&Ma(e,t.type,wa(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ca(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function Ma(e,t,s){"number"===t&&Ea(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ra=Array.isArray;function Da(e,t,s,n){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&n&&(e[s].defaultSelected=!0)}else{for(s=""+wa(s),t=null,i=0;i<e.length;i++){if(e[i].value===s)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ia(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Ni(91));return pa({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _a(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(Ni(92));if(Ra(s)){if(1<s.length)throw Error(Ni(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:wa(s)}}function Na(e,t){var s=wa(t.value),n=wa(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=n&&(e.defaultValue=""+n)}function La(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Fa(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fa(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ja,Ua,Ga=(Ua=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ja=ja||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ja.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,n){MSApp.execUnsafeLocalFunction((function(){return Ua(e,t)}))}:Ua);function Ha(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Va=["Webkit","ms","Moz","O"];function Wa(e,t,s){return null==t||"boolean"==typeof t||""===t?"":s||"number"!=typeof t||0===t||za.hasOwnProperty(e)&&za[e]?(""+t).trim():t+"px"}function $a(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var n=0===s.indexOf("--"),i=Wa(s,t[s],n);"float"===s&&(s="cssFloat"),n?e.setProperty(s,i):e[s]=i}}Object.keys(za).forEach((function(e){Va.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),za[t]=za[e]}))}));var qa=pa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(qa[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Ni(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Ni(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ni(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Ni(62))}}function Qa(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Xa(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ya=null,Ja=null,er=null;function tr(e){if(e=Qc(e)){if("function"!=typeof Ya)throw Error(Ni(280));var t=e.stateNode;t&&(t=Xc(t),Ya(e.stateNode,e.type,t))}}function sr(e){Ja?er?er.push(e):er=[e]:Ja=e}function nr(){if(Ja){var e=Ja,t=er;if(er=Ja=null,tr(e),t)for(e=0;e<t.length;e++)tr(t[e])}}function ir(e,t){return e(t)}function ar(){}var rr=!1;function or(e,t,s){if(rr)return e(t,s);rr=!0;try{return ir(e,t,s)}finally{rr=!1,(null!==Ja||null!==er)&&(ar(),nr())}}function lr(e,t){var s=e.stateNode;if(null===s)return null;var n=Xc(s);if(null===n)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(s&&"function"!=typeof s)throw Error(Ni(231,t,typeof s));return s}var cr=!1;if(Ui)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){cr=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch(Ua){cr=!1}function ur(e,t,s,n,i,a,r,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(h){this.onError(h)}}var dr=!1,pr=null,fr=!1,mr=null,gr={onError:function(e){dr=!0,pr=e}};function yr(e,t,s,n,i,a,r,o,l){dr=!1,pr=null,ur.apply(gr,arguments)}function br(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function vr(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function wr(e){if(br(e)!==e)throw Error(Ni(188))}function xr(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=br(e)))throw Error(Ni(188));return t!==e?null:e}for(var s=e,n=t;;){var i=s.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return wr(i),e;if(a===n)return wr(i),t;a=a.sibling}throw Error(Ni(188))}if(s.return!==n.return)s=i,n=a;else{for(var r=!1,o=i.child;o;){if(o===s){r=!0,s=i,n=a;break}if(o===n){r=!0,n=i,s=a;break}o=o.sibling}if(!r){for(o=a.child;o;){if(o===s){r=!0,s=a,n=i;break}if(o===n){r=!0,n=a,s=i;break}o=o.sibling}if(!r)throw Error(Ni(189))}}if(s.alternate!==n)throw Error(Ni(190))}if(3!==s.tag)throw Error(Ni(188));return s.stateNode.current===s?e:t}(e))?kr(e):null}function kr(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=kr(e);if(null!==t)return t;e=e.sibling}return null}var Ar=_i.unstable_scheduleCallback,Er=_i.unstable_cancelCallback,Sr=_i.unstable_shouldYield,Pr=_i.unstable_requestPaint,Tr=_i.unstable_now,Br=_i.unstable_getCurrentPriorityLevel,Cr=_i.unstable_ImmediatePriority,Mr=_i.unstable_UserBlockingPriority,Rr=_i.unstable_NormalPriority,Dr=_i.unstable_LowPriority,Ir=_i.unstable_IdlePriority,_r=null,Nr=null,Lr=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Fr(e)/Or|0)|0},Fr=Math.log,Or=Math.LN2,jr=64,Ur=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hr(e,t){var s=e.pendingLanes;if(0===s)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,r=268435455&s;if(0!==r){var o=r&~i;0!==o?n=Gr(o):0!=(a&=r)&&(n=Gr(a))}else 0!=(r=s&~i)?n=Gr(r):0!==a&&(n=Gr(a));if(0===n)return 0;if(0!==t&&t!==n&&!(t&i)&&((i=n&-n)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&n&&(n|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(s=31-Lr(t)),n|=e[s],t&=~i;return n}function zr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Vr(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wr(){var e=jr;return!(4194240&(jr<<=1))&&(jr=64),e}function $r(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function qr(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Lr(t)]=s}function Kr(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Lr(s),i=1<<n;i&t|e[n]&t&&(e[n]|=t),s&=~i}}var Qr=0;function Zr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Xr,Yr,Jr,eo,to,so=!1,no=[],io=null,ao=null,ro=null,oo=new Map,lo=new Map,co=[],ho="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uo(e,t){switch(e){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(t.pointerId)}}function po(e,t,s,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=Qc(t))&&Yr(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function fo(e){var t=Kc(e.target);if(null!==t){var s=br(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=vr(s)))return e.blockedOn=t,void to(e.priority,(function(){Jr(s)}))}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function mo(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Po(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=Qc(s))&&Yr(t),e.blockedOn=s,!1;var n=new(s=e.nativeEvent).constructor(s.type,s);Za=n,s.target.dispatchEvent(n),Za=null,t.shift()}return!0}function go(e,t,s){mo(e)&&s.delete(t)}function yo(){so=!1,null!==io&&mo(io)&&(io=null),null!==ao&&mo(ao)&&(ao=null),null!==ro&&mo(ro)&&(ro=null),oo.forEach(go),lo.forEach(go)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,so||(so=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,yo)))}function vo(e){function t(t){return bo(t,e)}if(0<no.length){bo(no[0],e);for(var s=1;s<no.length;s++){var n=no[s];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==io&&bo(io,e),null!==ao&&bo(ao,e),null!==ro&&bo(ro,e),oo.forEach(t),lo.forEach(t),s=0;s<co.length;s++)(n=co[s]).blockedOn===e&&(n.blockedOn=null);for(;0<co.length&&null===(s=co[0]).blockedOn;)fo(s),null===s.blockedOn&&co.shift()}var wo=Zi.ReactCurrentBatchConfig,xo=!0;function ko(e,t,s,n){var i=Qr,a=wo.transition;wo.transition=null;try{Qr=1,Eo(e,t,s,n)}finally{Qr=i,wo.transition=a}}function Ao(e,t,s,n){var i=Qr,a=wo.transition;wo.transition=null;try{Qr=4,Eo(e,t,s,n)}finally{Qr=i,wo.transition=a}}function Eo(e,t,s,n){if(xo){var i=Po(e,t,s,n);if(null===i)wc(e,t,n,So,s),uo(e,n);else if(function(e,t,s,n,i){switch(t){case"focusin":return io=po(io,e,t,s,n,i),!0;case"dragenter":return ao=po(ao,e,t,s,n,i),!0;case"mouseover":return ro=po(ro,e,t,s,n,i),!0;case"pointerover":var a=i.pointerId;return oo.set(a,po(oo.get(a)||null,e,t,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,lo.set(a,po(lo.get(a)||null,e,t,s,n,i)),!0}return!1}(i,e,t,s,n))n.stopPropagation();else if(uo(e,n),4&t&&-1<ho.indexOf(e)){for(;null!==i;){var a=Qc(i);if(null!==a&&Xr(a),null===(a=Po(e,t,s,n))&&wc(e,t,n,So,s),a===i)break;i=a}null!==i&&n.stopPropagation()}else wc(e,t,n,null,s)}}var So=null;function Po(e,t,s,n){if(So=null,null!==(e=Kc(e=Xa(n))))if(null===(t=br(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=vr(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function To(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Br()){case Cr:return 1;case Mr:return 4;case Rr:case Dr:return 16;case Ir:return 536870912;default:return 16}default:return 16}}var Bo=null,Co=null,Mo=null;function Ro(){if(Mo)return Mo;var e,t,s=Co,n=s.length,i="value"in Bo?Bo.value:Bo.textContent,a=i.length;for(e=0;e<n&&s[e]===i[e];e++);var r=n-e;for(t=1;t<=r&&s[n-t]===i[a-t];t++);return Mo=i.slice(e,1<t?1-t:void 0)}function Do(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Io(){return!0}function _o(){return!1}function No(e){function t(t,s,n,i,a){for(var r in this._reactName=t,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(i):i[r]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Io:_o,this.isPropagationStopped=_o,this}return pa(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),t}var Lo,Fo,Oo,jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=No(jo),Go=pa({},jo,{view:0,detail:0}),Ho=No(Go),zo=pa({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tl,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oo&&(Oo&&"mousemove"===e.type?(Lo=e.screenX-Oo.screenX,Fo=e.screenY-Oo.screenY):Fo=Lo=0,Oo=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:Fo}}),Vo=No(zo),Wo=No(pa({},zo,{dataTransfer:0})),$o=No(pa({},Go,{relatedTarget:0})),qo=No(pa({},jo,{animationName:0,elapsedTime:0,pseudoElement:0})),Ko=pa({},jo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qo=No(Ko),Zo=No(pa({},jo,{data:0})),Xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Jo[e])&&!!t[e]}function tl(){return el}var sl=pa({},Go,{key:function(e){if(e.key){var t=Xo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Do(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Yo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tl,charCode:function(e){return"keypress"===e.type?Do(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Do(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),nl=No(sl),il=No(pa({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),al=No(pa({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tl})),rl=No(pa({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0})),ol=pa({},zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ll=No(ol),cl=[9,13,27,32],hl=Ui&&"CompositionEvent"in window,ul=null;Ui&&"documentMode"in document&&(ul=document.documentMode);var dl=Ui&&"TextEvent"in window&&!ul,pl=Ui&&(!hl||ul&&8<ul&&11>=ul),fl=String.fromCharCode(32),ml=!1;function gl(e,t){switch(e){case"keyup":return-1!==cl.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var bl=!1,vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!vl[e.type]:"textarea"===t}function xl(e,t,s,n){sr(n),0<(t=kc(t,"onChange")).length&&(s=new Uo("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var kl=null,Al=null;function El(e){fc(e,0)}function Sl(e){if(Aa(Zc(e)))return e}function Pl(e,t){if("change"===e)return t}var Tl=!1;if(Ui){var Bl;if(Ui){var Cl="oninput"in document;if(!Cl){var Ml=document.createElement("div");Ml.setAttribute("oninput","return;"),Cl="function"==typeof Ml.oninput}Bl=Cl}else Bl=!1;Tl=Bl&&(!document.documentMode||9<document.documentMode)}function Rl(){kl&&(kl.detachEvent("onpropertychange",Dl),Al=kl=null)}function Dl(e){if("value"===e.propertyName&&Sl(Al)){var t=[];xl(t,Al,e,Xa(e)),or(El,t)}}function Il(e,t,s){"focusin"===e?(Rl(),Al=s,(kl=t).attachEvent("onpropertychange",Dl)):"focusout"===e&&Rl()}function _l(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Sl(Al)}function Nl(e,t){if("click"===e)return Sl(t)}function Ll(e,t){if("input"===e||"change"===e)return Sl(t)}var Fl="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ol(e,t){if(Fl(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Gi.call(t,i)||!Fl(e[i],t[i]))return!1}return!0}function jl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ul(e,t){var s,n=jl(e);for(e=0;n;){if(3===n.nodeType){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jl(n)}}function Gl(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Gl(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Hl(){for(var e=window,t=Ea();t instanceof e.HTMLIFrameElement;){try{var s="string"==typeof t.contentWindow.location.href}catch(n){s=!1}if(!s)break;t=Ea((e=t.contentWindow).document)}return t}function zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Vl(e){var t=Hl(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Gl(s.ownerDocument.documentElement,s)){if(null!==n&&zl(s))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=Ul(s,a);var r=Ul(s,n);i&&r&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wl=Ui&&"documentMode"in document&&11>=document.documentMode,$l=null,ql=null,Kl=null,Ql=!1;function Zl(e,t,s){var n=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Ql||null==$l||$l!==Ea(n)||(n="selectionStart"in(n=$l)&&zl(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kl&&Ol(Kl,n)||(Kl=n,0<(n=kc(ql,"onSelect")).length&&(t=new Uo("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=$l)))}function Xl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Yl={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Jl={},ec={};function tc(e){if(Jl[e])return Jl[e];if(!Yl[e])return e;var t,s=Yl[e];for(t in s)if(s.hasOwnProperty(t)&&t in ec)return Jl[e]=s[t];return e}Ui&&(ec=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);var sc=tc("animationend"),nc=tc("animationiteration"),ic=tc("animationstart"),ac=tc("transitionend"),rc=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lc(e,t){rc.set(e,t),Oi(t,[e])}for(var cc=0;cc<oc.length;cc++){var hc=oc[cc];lc(hc.toLowerCase(),"on"+(hc[0].toUpperCase()+hc.slice(1)))}lc(sc,"onAnimationEnd"),lc(nc,"onAnimationIteration"),lc(ic,"onAnimationStart"),lc("dblclick","onDoubleClick"),lc("focusin","onFocus"),lc("focusout","onBlur"),lc(ac,"onTransitionEnd"),ji("onMouseEnter",["mouseout","mouseover"]),ji("onMouseLeave",["mouseout","mouseover"]),ji("onPointerEnter",["pointerout","pointerover"]),ji("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dc=new Set("cancel close invalid load scroll toggle".split(" ").concat(uc));function pc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,n,i,a,r,o,l){if(yr.apply(this,arguments),dr){if(!dr)throw Error(Ni(198));var c=pr;dr=!1,pr=null,fr||(fr=!0,mr=c)}}(n,t,void 0,e),e.currentTarget=null}function fc(e,t){t=!!(4&t);for(var s=0;s<e.length;s++){var n=e[s],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var r=n.length-1;0<=r;r--){var o=n[r],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;pc(i,o,c),a=l}else for(r=0;r<n.length;r++){if(l=(o=n[r]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;pc(i,o,c),a=l}}}if(fr)throw e=mr,fr=!1,mr=null,e}function mc(e,t){var s=t[Wc];void 0===s&&(s=t[Wc]=new Set);var n=e+"__bubble";s.has(n)||(vc(t,e,2,!1),s.add(n))}function gc(e,t,s){var n=0;t&&(n|=4),vc(s,e,n,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function bc(e){if(!e[yc]){e[yc]=!0,Li.forEach((function(t){"selectionchange"!==t&&(dc.has(t)||gc(t,!1,e),gc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[yc]||(t[yc]=!0,gc("selectionchange",!1,t))}}function vc(e,t,s,n){switch(To(t)){case 1:var i=ko;break;case 4:i=Ao;break;default:i=Eo}s=i.bind(null,t,s,e),i=void 0,!cr||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):void 0!==i?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function wc(e,t,s,n,i){var a=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var r=n.tag;if(3===r||4===r){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===r)for(r=n.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;r=r.return}for(;null!==o;){if(null===(r=Kc(o)))return;if(5===(l=r.tag)||6===l){n=a=r;continue e}o=o.parentNode}}n=n.return}or((function(){var n=a,i=Xa(s),r=[];e:{var o=rc.get(e);if(void 0!==o){var l=Uo,c=e;switch(e){case"keypress":if(0===Do(s))break e;case"keydown":case"keyup":l=nl;break;case"focusin":c="focus",l=$o;break;case"focusout":c="blur",l=$o;break;case"beforeblur":case"afterblur":l=$o;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=al;break;case sc:case nc:case ic:l=qo;break;case ac:l=rl;break;case"scroll":l=Ho;break;case"wheel":l=ll;break;case"copy":case"cut":case"paste":l=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=il}var h=!!(4&t),u=!h&&"scroll"===e,d=h?null!==o?o+"Capture":null:o;h=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=lr(f,d))&&h.push(xc(f,m,p))),u)break;f=f.return}0<h.length&&(o=new l(o,c,null,s,i),r.push({event:o,listeners:h}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===Za||!(c=s.relatedTarget||s.fromElement)||!Kc(c)&&!c[Vc])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=s.relatedTarget||s.toElement)?Kc(c):null)&&(c!==(u=br(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(h=Vo,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=il,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==l?o:Zc(l),p=null==c?o:Zc(c),(o=new h(m,f+"leave",l,s,i)).target=u,o.relatedTarget=p,m=null,Kc(i)===n&&((h=new h(d,f+"enter",c,s,i)).target=p,h.relatedTarget=u,m=h),u=m,l&&c)e:{for(d=c,f=0,p=h=l;p;p=Ac(p))f++;for(p=0,m=d;m;m=Ac(m))p++;for(;0<f-p;)h=Ac(h),f--;for(;0<p-f;)d=Ac(d),p--;for(;f--;){if(h===d||null!==d&&h===d.alternate)break e;h=Ac(h),d=Ac(d)}h=null}else h=null;null!==l&&Ec(r,o,l,h,!1),null!==c&&null!==u&&Ec(r,u,c,h,!0)}if("select"===(l=(o=n?Zc(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Pl;else if(wl(o))if(Tl)g=Ll;else{g=_l;var y=Il}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=Nl);switch(g&&(g=g(e,n))?xl(r,g,s,i):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&Ma(o,"number",o.value)),y=n?Zc(n):window,e){case"focusin":(wl(y)||"true"===y.contentEditable)&&($l=y,ql=n,Kl=null);break;case"focusout":Kl=ql=$l=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,Zl(r,s,i);break;case"selectionchange":if(Wl)break;case"keydown":case"keyup":Zl(r,s,i)}var b;if(hl)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else bl?gl(e,s)&&(v="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(v="onCompositionStart");v&&(pl&&"ko"!==s.locale&&(bl||"onCompositionStart"!==v?"onCompositionEnd"===v&&bl&&(b=Ro()):(Co="value"in(Bo=i)?Bo.value:Bo.textContent,bl=!0)),0<(y=kc(n,v)).length&&(v=new Zo(v,e,null,s,i),r.push({event:v,listeners:y}),(b||null!==(b=yl(s)))&&(v.data=b))),(b=dl?function(e,t){switch(e){case"compositionend":return yl(t);case"keypress":return 32!==t.which?null:(ml=!0,fl);case"textInput":return(e=t.data)===fl&&ml?null:e;default:return null}}(e,s):function(e,t){if(bl)return"compositionend"===e||!hl&&gl(e,t)?(e=Ro(),Mo=Co=Bo=null,bl=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pl&&"ko"!==t.locale?null:t.data}}(e,s))&&0<(n=kc(n,"onBeforeInput")).length&&(i=new Zo("onBeforeInput","beforeinput",null,s,i),r.push({event:i,listeners:n}),i.data=b)}fc(r,t)}))}function xc(e,t,s){return{instance:e,listener:t,currentTarget:s}}function kc(e,t){for(var s=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=lr(e,s))&&n.unshift(xc(e,a,i)),null!=(a=lr(e,t))&&n.push(xc(e,a,i))),e=e.return}return n}function Ac(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ec(e,t,s,n,i){for(var a=t._reactName,r=[];null!==s&&s!==n;){var o=s,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=lr(s,a))&&r.unshift(xc(s,l,o)):i||null!=(l=lr(s,a))&&r.push(xc(s,l,o))),s=s.return}0!==r.length&&e.push({event:t,listeners:r})}var Sc=/\r\n?/g,Pc=/\u0000|\uFFFD/g;function Tc(e){return("string"==typeof e?e:""+e).replace(Sc,"\n").replace(Pc,"")}function Bc(e,t,s){if(t=Tc(t),Tc(e)!==t&&s)throw Error(Ni(425))}function Cc(){}var Mc=null,Rc=null;function Dc(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ic="function"==typeof setTimeout?setTimeout:void 0,_c="function"==typeof clearTimeout?clearTimeout:void 0,Nc="function"==typeof Promise?Promise:void 0,Lc="function"==typeof queueMicrotask?queueMicrotask:void 0!==Nc?function(e){return Nc.resolve(null).then(e).catch(Fc)}:Ic;function Fc(e){setTimeout((function(){throw e}))}function Oc(e,t){var s=t,n=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&8===i.nodeType)if("/$"===(s=i.data)){if(0===n)return e.removeChild(i),void vo(t);n--}else"$"!==s&&"$?"!==s&&"$!"!==s||n++;s=i}while(s);vo(t)}function jc(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Uc(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var Gc=Math.random().toString(36).slice(2),Hc="__reactFiber$"+Gc,zc="__reactProps$"+Gc,Vc="__reactContainer$"+Gc,Wc="__reactEvents$"+Gc,$c="__reactListeners$"+Gc,qc="__reactHandles$"+Gc;function Kc(e){var t=e[Hc];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Vc]||s[Hc]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=Uc(e);null!==e;){if(s=e[Hc])return s;e=Uc(e)}return t}s=(e=s).parentNode}return null}function Qc(e){return!(e=e[Hc]||e[Vc])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zc(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Ni(33))}function Xc(e){return e[zc]||null}var Yc=[],Jc=-1;function eh(e){return{current:e}}function th(e){0>Jc||(e.current=Yc[Jc],Yc[Jc]=null,Jc--)}function sh(e,t){Jc++,Yc[Jc]=e.current,e.current=t}var nh={},ih=eh(nh),ah=eh(!1),rh=nh;function oh(e,t){var s=e.type.contextTypes;if(!s)return nh;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in s)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function lh(e){return null!=e.childContextTypes}function ch(){th(ah),th(ih)}function hh(e,t,s){if(ih.current!==nh)throw Error(Ni(168));sh(ih,t),sh(ah,s)}function uh(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return s;for(var i in n=n.getChildContext())if(!(i in t))throw Error(Ni(108,va(e)||"Unknown",i));return pa({},s,n)}function dh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nh,rh=ih.current,sh(ih,e),sh(ah,ah.current),!0}function ph(e,t,s){var n=e.stateNode;if(!n)throw Error(Ni(169));s?(e=uh(e,t,rh),n.__reactInternalMemoizedMergedChildContext=e,th(ah),th(ih),sh(ih,e)):th(ah),sh(ah,s)}var fh=null,mh=!1,gh=!1;function yh(e){null===fh?fh=[e]:fh.push(e)}function bh(){if(!gh&&null!==fh){gh=!0;var e=0,t=Qr;try{var s=fh;for(Qr=1;e<s.length;e++){var n=s[e];do{n=n(!0)}while(null!==n)}fh=null,mh=!1}catch(i){throw null!==fh&&(fh=fh.slice(e+1)),Ar(Cr,bh),i}finally{Qr=t,gh=!1}}return null}var vh=[],wh=0,xh=null,kh=0,Ah=[],Eh=0,Sh=null,Ph=1,Th="";function Bh(e,t){vh[wh++]=kh,vh[wh++]=xh,xh=e,kh=t}function Ch(e,t,s){Ah[Eh++]=Ph,Ah[Eh++]=Th,Ah[Eh++]=Sh,Sh=e;var n=Ph;e=Th;var i=32-Lr(n)-1;n&=~(1<<i),s+=1;var a=32-Lr(t)+i;if(30<a){var r=i-i%5;a=(n&(1<<r)-1).toString(32),n>>=r,i-=r,Ph=1<<32-Lr(t)+i|s<<i|n,Th=a+e}else Ph=1<<a|s<<i|n,Th=e}function Mh(e){null!==e.return&&(Bh(e,1),Ch(e,1,0))}function Rh(e){for(;e===xh;)xh=vh[--wh],vh[wh]=null,kh=vh[--wh],vh[wh]=null;for(;e===Sh;)Sh=Ah[--Eh],Ah[Eh]=null,Th=Ah[--Eh],Ah[Eh]=null,Ph=Ah[--Eh],Ah[Eh]=null}var Dh=null,Ih=null,_h=!1,Nh=null;function Lh(e,t){var s=om(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function Fh(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Dh=e,Ih=jc(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Dh=e,Ih=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Sh?{id:Ph,overflow:Th}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=om(18,null,null,0)).stateNode=t,s.return=e,e.child=s,Dh=e,Ih=null,!0);default:return!1}}function Oh(e){return!(!(1&e.mode)||128&e.flags)}function jh(e){if(_h){var t=Ih;if(t){var s=t;if(!Fh(e,t)){if(Oh(e))throw Error(Ni(418));t=jc(s.nextSibling);var n=Dh;t&&Fh(e,t)?Lh(n,s):(e.flags=-4097&e.flags|2,_h=!1,Dh=e)}}else{if(Oh(e))throw Error(Ni(418));e.flags=-4097&e.flags|2,_h=!1,Dh=e}}}function Uh(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Dh=e}function Gh(e){if(e!==Dh)return!1;if(!_h)return Uh(e),_h=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Dc(e.type,e.memoizedProps)),t&&(t=Ih)){if(Oh(e))throw Hh(),Error(Ni(418));for(;t;)Lh(e,t),t=jc(t.nextSibling)}if(Uh(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Ni(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){Ih=jc(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}Ih=null}}else Ih=Dh?jc(e.stateNode.nextSibling):null;return!0}function Hh(){for(var e=Ih;e;)e=jc(e.nextSibling)}function zh(){Ih=Dh=null,_h=!1}function Vh(e){null===Nh?Nh=[e]:Nh.push(e)}var Wh=Zi.ReactCurrentBatchConfig;function $h(e,t,s){if(null!==(e=s.ref)&&"function"!=typeof e&&"object"!=typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(Ni(309));var n=s.stateNode}if(!n)throw Error(Ni(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(Ni(284));if(!s._owner)throw Error(Ni(290,e))}return e}function qh(e,t){throw e=Object.prototype.toString.call(t),Error(Ni(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Kh(e){return(0,e._init)(e._payload)}function Qh(e){function t(t,s){if(e){var n=t.deletions;null===n?(t.deletions=[s],t.flags|=16):n.push(s)}}function s(s,n){if(!e)return null;for(;null!==n;)t(s,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=cm(e,t)).index=0,e.sibling=null,e}function a(t,s,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<s?(t.flags|=2,s):n:(t.flags|=2,s):(t.flags|=1048576,s)}function r(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,n){return null===t||6!==t.tag?((t=pm(s,e.mode,n)).return=e,t):((t=i(t,s)).return=e,t)}function l(e,t,s,n){var a=s.type;return a===Ji?h(e,t,s.props.children,n,s.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===la&&Kh(a)===t.type)?((n=i(t,s.props)).ref=$h(e,t,s),n.return=e,n):((n=hm(s.type,s.key,s.props,null,e.mode,n)).ref=$h(e,t,s),n.return=e,n)}function c(e,t,s,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=fm(s,e.mode,n)).return=e,t):((t=i(t,s.children||[])).return=e,t)}function h(e,t,s,n,a){return null===t||7!==t.tag?((t=um(s,e.mode,n,a)).return=e,t):((t=i(t,s)).return=e,t)}function u(e,t,s){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=pm(""+t,e.mode,s)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Xi:return(s=hm(t.type,t.key,t.props,null,e.mode,s)).ref=$h(e,null,t),s.return=e,s;case Yi:return(t=fm(t,e.mode,s)).return=e,t;case la:return u(e,(0,t._init)(t._payload),s)}if(Ra(t)||ua(t))return(t=um(t,e.mode,s,null)).return=e,t;qh(e,t)}return null}function d(e,t,s,n){var i=null!==t?t.key:null;if("string"==typeof s&&""!==s||"number"==typeof s)return null!==i?null:o(e,t,""+s,n);if("object"==typeof s&&null!==s){switch(s.$$typeof){case Xi:return s.key===i?l(e,t,s,n):null;case Yi:return s.key===i?c(e,t,s,n):null;case la:return d(e,t,(i=s._init)(s._payload),n)}if(Ra(s)||ua(s))return null!==i?null:h(e,t,s,n,null);qh(e,s)}return null}function p(e,t,s,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(s)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xi:return l(t,e=e.get(null===n.key?s:n.key)||null,n,i);case Yi:return c(t,e=e.get(null===n.key?s:n.key)||null,n,i);case la:return p(e,t,s,(0,n._init)(n._payload),i)}if(Ra(n)||ua(n))return h(t,e=e.get(s)||null,n,i,null);qh(t,n)}return null}return function o(l,c,h,f){if("object"==typeof h&&null!==h&&h.type===Ji&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case Xi:e:{for(var m=h.key,g=c;null!==g;){if(g.key===m){if((m=h.type)===Ji){if(7===g.tag){s(l,g.sibling),(c=i(g,h.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===la&&Kh(m)===g.type){s(l,g.sibling),(c=i(g,h.props)).ref=$h(l,g,h),c.return=l,l=c;break e}s(l,g);break}t(l,g),g=g.sibling}h.type===Ji?((c=um(h.props.children,l.mode,f,h.key)).return=l,l=c):((f=hm(h.type,h.key,h.props,null,l.mode,f)).ref=$h(l,c,h),f.return=l,l=f)}return r(l);case Yi:e:{for(g=h.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){s(l,c.sibling),(c=i(c,h.children||[])).return=l,l=c;break e}s(l,c);break}t(l,c),c=c.sibling}(c=fm(h,l.mode,f)).return=l,l=c}return r(l);case la:return o(l,c,(g=h._init)(h._payload),f)}if(Ra(h))return function(i,r,o,l){for(var c=null,h=null,f=r,m=r=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var y=d(i,f,o[m],l);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(i,f),r=a(y,r,m),null===h?c=y:h.sibling=y,h=y,f=g}if(m===o.length)return s(i,f),_h&&Bh(i,m),c;if(null===f){for(;m<o.length;m++)null!==(f=u(i,o[m],l))&&(r=a(f,r,m),null===h?c=f:h.sibling=f,h=f);return _h&&Bh(i,m),c}for(f=n(i,f);m<o.length;m++)null!==(g=p(f,i,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),r=a(g,r,m),null===h?c=g:h.sibling=g,h=g);return e&&f.forEach((function(e){return t(i,e)})),_h&&Bh(i,m),c}(l,c,h,f);if(ua(h))return function(i,r,o,l){var c=ua(o);if("function"!=typeof c)throw Error(Ni(150));if(null==(o=c.call(o)))throw Error(Ni(151));for(var h=c=null,f=r,m=r=0,g=null,y=o.next();null!==f&&!y.done;m++,y=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=d(i,f,y.value,l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),r=a(b,r,m),null===h?c=b:h.sibling=b,h=b,f=g}if(y.done)return s(i,f),_h&&Bh(i,m),c;if(null===f){for(;!y.done;m++,y=o.next())null!==(y=u(i,y.value,l))&&(r=a(y,r,m),null===h?c=y:h.sibling=y,h=y);return _h&&Bh(i,m),c}for(f=n(i,f);!y.done;m++,y=o.next())null!==(y=p(f,i,m,y.value,l))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),r=a(y,r,m),null===h?c=y:h.sibling=y,h=y);return e&&f.forEach((function(e){return t(i,e)})),_h&&Bh(i,m),c}(l,c,h,f);qh(l,h)}return"string"==typeof h&&""!==h||"number"==typeof h?(h=""+h,null!==c&&6===c.tag?(s(l,c.sibling),(c=i(c,h)).return=l,l=c):(s(l,c),(c=pm(h,l.mode,f)).return=l,l=c),r(l)):s(l,c)}}var Zh=Qh(!0),Xh=Qh(!1),Yh=eh(null),Jh=null,eu=null,tu=null;function su(){tu=eu=Jh=null}function nu(e){var t=Yh.current;th(Yh),e._currentValue=t}function iu(e,t,s){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function au(e,t){Jh=e,tu=eu=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(Kd=!0),e.firstContext=null)}function ru(e){var t=e._currentValue;if(tu!==e)if(e={context:e,memoizedValue:t,next:null},null===eu){if(null===Jh)throw Error(Ni(308));eu=e,Jh.dependencies={lanes:0,firstContext:e}}else eu=eu.next=e;return t}var ou=null;function lu(e){null===ou?ou=[e]:ou.push(e)}function cu(e,t,s,n){var i=t.interleaved;return null===i?(s.next=s,lu(t)):(s.next=i.next,i.next=s),t.interleaved=s,hu(e,n)}function hu(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var uu=!1;function du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mu(e,t,s){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&nf){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,hu(e,s)}return null===(i=n.interleaved)?(t.next=t,lu(n)):(t.next=i.next,i.next=t),n.interleaved=t,hu(e,s)}function gu(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&s)){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Kr(e,s)}}function yu(e,t){var s=e.updateQueue,n=e.alternate;if(null!==n&&s===(n=n.updateQueue)){var i=null,a=null;if(null!==(s=s.firstBaseUpdate)){do{var r={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===a?i=a=r:a=a.next=r,s=s.next}while(null!==s);null===a?i=a=t:a=a.next=t}else i=a=t;return s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function bu(e,t,s,n){var i=e.updateQueue;uu=!1;var a=i.firstBaseUpdate,r=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===r?a=c:r.next=c,r=l;var h=e.alternate;null!==h&&(o=(h=h.updateQueue).lastBaseUpdate)!==r&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l)}if(null!==a){var u=i.baseState;for(r=0,h=c=l=null,o=a;;){var d=o.lane,p=o.eventTime;if((n&d)===d){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=s,m.tag){case 1:if("function"==typeof(f=m.payload)){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,u,d):f))break e;u=pa({},u,d);break e;case 2:uu=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,l=u):h=h.next=p,r|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===h&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{r|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);df|=r,e.lanes=r,e.memoizedState=u}}function vu(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=s,"function"!=typeof i)throw Error(Ni(191,i));i.call(n)}}}var wu={},xu=eh(wu),ku=eh(wu),Au=eh(wu);function Eu(e){if(e===wu)throw Error(Ni(174));return e}function Su(e,t){switch(sh(Au,t),sh(ku,e),sh(xu,wu),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oa(null,"");break;default:t=Oa(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}th(xu),sh(xu,t)}function Pu(){th(xu),th(ku),th(Au)}function Tu(e){Eu(Au.current);var t=Eu(xu.current),s=Oa(t,e.type);t!==s&&(sh(ku,e),sh(xu,s))}function Bu(e){ku.current===e&&(th(xu),th(ku))}var Cu=eh(0);function Mu(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ru=[];function Du(){for(var e=0;e<Ru.length;e++)Ru[e]._workInProgressVersionPrimary=null;Ru.length=0}var Iu=Zi.ReactCurrentDispatcher,_u=Zi.ReactCurrentBatchConfig,Nu=0,Lu=null,Fu=null,Ou=null,ju=!1,Uu=!1,Gu=0,Hu=0;function zu(){throw Error(Ni(321))}function Vu(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Fl(e[s],t[s]))return!1;return!0}function Wu(e,t,s,n,i,a){if(Nu=a,Lu=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Iu.current=null===e||null===e.memoizedState?Bd:Cd,e=s(n,i),Uu){a=0;do{if(Uu=!1,Gu=0,25<=a)throw Error(Ni(301));a+=1,Ou=Fu=null,t.updateQueue=null,Iu.current=Md,e=s(n,i)}while(Uu)}if(Iu.current=Td,t=null!==Fu&&null!==Fu.next,Nu=0,Ou=Fu=Lu=null,ju=!1,t)throw Error(Ni(300));return e}function $u(){var e=0!==Gu;return Gu=0,e}function qu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ou?Lu.memoizedState=Ou=e:Ou=Ou.next=e,Ou}function Ku(){if(null===Fu){var e=Lu.alternate;e=null!==e?e.memoizedState:null}else e=Fu.next;var t=null===Ou?Lu.memoizedState:Ou.next;if(null!==t)Ou=t,Fu=e;else{if(null===e)throw Error(Ni(310));e={memoizedState:(Fu=e).memoizedState,baseState:Fu.baseState,baseQueue:Fu.baseQueue,queue:Fu.queue,next:null},null===Ou?Lu.memoizedState=Ou=e:Ou=Ou.next=e}return Ou}function Qu(e,t){return"function"==typeof t?t(e):t}function Zu(e){var t=Ku(),s=t.queue;if(null===s)throw Error(Ni(311));s.lastRenderedReducer=e;var n=Fu,i=n.baseQueue,a=s.pending;if(null!==a){if(null!==i){var r=i.next;i.next=a.next,a.next=r}n.baseQueue=i=a,s.pending=null}if(null!==i){a=i.next,n=n.baseState;var o=r=null,l=null,c=a;do{var h=c.lane;if((Nu&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,r=n):l=l.next=u,Lu.lanes|=h,df|=h}c=c.next}while(null!==c&&c!==a);null===l?r=n:l.next=o,Fl(n,t.memoizedState)||(Kd=!0),t.memoizedState=n,t.baseState=r,t.baseQueue=l,s.lastRenderedState=n}if(null!==(e=s.interleaved)){i=e;do{a=i.lane,Lu.lanes|=a,df|=a,i=i.next}while(i!==e)}else null===i&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Xu(e){var t=Ku(),s=t.queue;if(null===s)throw Error(Ni(311));s.lastRenderedReducer=e;var n=s.dispatch,i=s.pending,a=t.memoizedState;if(null!==i){s.pending=null;var r=i=i.next;do{a=e(a,r.action),r=r.next}while(r!==i);Fl(a,t.memoizedState)||(Kd=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),s.lastRenderedState=a}return[a,n]}function Yu(){}function Ju(e,t){var s=Lu,n=Ku(),i=t(),a=!Fl(n.memoizedState,i);if(a&&(n.memoizedState=i,Kd=!0),n=n.queue,ud(sd.bind(null,s,n,e),[e]),n.getSnapshot!==t||a||null!==Ou&&1&Ou.memoizedState.tag){if(s.flags|=2048,rd(9,td.bind(null,s,n,i,t),void 0,null),null===af)throw Error(Ni(349));30&Nu||ed(s,t,i)}return i}function ed(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=Lu.updateQueue)?(t={lastEffect:null,stores:null},Lu.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function td(e,t,s,n){t.value=s,t.getSnapshot=n,nd(t)&&id(e)}function sd(e,t,s){return s((function(){nd(t)&&id(e)}))}function nd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Fl(e,s)}catch(n){return!0}}function id(e){var t=hu(e,1);null!==t&&Df(t,e,1,-1)}function ad(e){var t=qu();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:e},t.queue=e,e=e.dispatch=Ad.bind(null,Lu,e),[t.memoizedState,e]}function rd(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},null===(t=Lu.updateQueue)?(t={lastEffect:null,stores:null},Lu.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function od(){return Ku().memoizedState}function ld(e,t,s,n){var i=qu();Lu.flags|=e,i.memoizedState=rd(1|t,s,void 0,void 0===n?null:n)}function cd(e,t,s,n){var i=Ku();n=void 0===n?null:n;var a=void 0;if(null!==Fu){var r=Fu.memoizedState;if(a=r.destroy,null!==n&&Vu(n,r.deps))return void(i.memoizedState=rd(t,s,a,n))}Lu.flags|=e,i.memoizedState=rd(1|t,s,a,n)}function hd(e,t){return ld(8390656,8,e,t)}function ud(e,t){return cd(2048,8,e,t)}function dd(e,t){return cd(4,2,e,t)}function pd(e,t){return cd(4,4,e,t)}function fd(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function md(e,t,s){return s=null!=s?s.concat([e]):null,cd(4,4,fd.bind(null,t,e),s)}function gd(){}function yd(e,t){var s=Ku();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&Vu(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function bd(e,t){var s=Ku();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&Vu(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function vd(e,t,s){return 21&Nu?(Fl(s,t)||(s=Wr(),Lu.lanes|=s,df|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kd=!0),e.memoizedState=s)}function wd(e,t){var s=Qr;Qr=0!==s&&4>s?s:4,e(!0);var n=_u.transition;_u.transition={};try{e(!1),t()}finally{Qr=s,_u.transition=n}}function xd(){return Ku().memoizedState}function kd(e,t,s){var n=Rf(e);s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Ed(e)?Sd(t,s):null!==(s=cu(e,t,s,n))&&(Df(s,e,n,Mf()),Pd(s,t,n))}function Ad(e,t,s){var n=Rf(e),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ed(e))Sd(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=a(r,s);if(i.hasEagerState=!0,i.eagerState=o,Fl(o,r)){var l=t.interleaved;return null===l?(i.next=i,lu(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(s=cu(e,t,i,n))&&(Df(s,e,n,i=Mf()),Pd(s,t,n))}}function Ed(e){var t=e.alternate;return e===Lu||null!==t&&t===Lu}function Sd(e,t){Uu=ju=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pd(e,t,s){if(4194240&s){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Kr(e,s)}}var Td={readContext:ru,useCallback:zu,useContext:zu,useEffect:zu,useImperativeHandle:zu,useInsertionEffect:zu,useLayoutEffect:zu,useMemo:zu,useReducer:zu,useRef:zu,useState:zu,useDebugValue:zu,useDeferredValue:zu,useTransition:zu,useMutableSource:zu,useSyncExternalStore:zu,useId:zu,unstable_isNewReconciler:!1},Bd={readContext:ru,useCallback:function(e,t){return qu().memoizedState=[e,void 0===t?null:t],e},useContext:ru,useEffect:hd,useImperativeHandle:function(e,t,s){return s=null!=s?s.concat([e]):null,ld(4194308,4,fd.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ld(4194308,4,e,t)},useInsertionEffect:function(e,t){return ld(4,2,e,t)},useMemo:function(e,t){var s=qu();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=qu();return t=void 0!==s?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=kd.bind(null,Lu,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},qu().memoizedState=e},useState:ad,useDebugValue:gd,useDeferredValue:function(e){return qu().memoizedState=e},useTransition:function(){var e=ad(!1),t=e[0];return e=wd.bind(null,e[1]),qu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Lu,i=qu();if(_h){if(void 0===s)throw Error(Ni(407));s=s()}else{if(s=t(),null===af)throw Error(Ni(349));30&Nu||ed(n,t,s)}i.memoizedState=s;var a={value:s,getSnapshot:t};return i.queue=a,hd(sd.bind(null,n,a,e),[e]),n.flags|=2048,rd(9,td.bind(null,n,a,s,t),void 0,null),s},useId:function(){var e=qu(),t=af.identifierPrefix;if(_h){var s=Th;t=":"+t+"R"+(s=(Ph&~(1<<32-Lr(Ph)-1)).toString(32)+s),0<(s=Gu++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=Hu++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cd={readContext:ru,useCallback:yd,useContext:ru,useEffect:ud,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:bd,useReducer:Zu,useRef:od,useState:function(){return Zu(Qu)},useDebugValue:gd,useDeferredValue:function(e){return vd(Ku(),Fu.memoizedState,e)},useTransition:function(){return[Zu(Qu)[0],Ku().memoizedState]},useMutableSource:Yu,useSyncExternalStore:Ju,useId:xd,unstable_isNewReconciler:!1},Md={readContext:ru,useCallback:yd,useContext:ru,useEffect:ud,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:pd,useMemo:bd,useReducer:Xu,useRef:od,useState:function(){return Xu(Qu)},useDebugValue:gd,useDeferredValue:function(e){var t=Ku();return null===Fu?t.memoizedState=e:vd(t,Fu.memoizedState,e)},useTransition:function(){return[Xu(Qu)[0],Ku().memoizedState]},useMutableSource:Yu,useSyncExternalStore:Ju,useId:xd,unstable_isNewReconciler:!1};function Rd(e,t){if(e&&e.defaultProps){for(var s in t=pa({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function Dd(e,t,s,n){s=null==(s=s(n,t=e.memoizedState))?t:pa({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var Id={isMounted:function(e){return!!(e=e._reactInternals)&&br(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Mf(),i=Rf(e),a=fu(n,i);a.payload=t,null!=s&&(a.callback=s),null!==(t=mu(e,a,i))&&(Df(t,e,i,n),gu(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Mf(),i=Rf(e),a=fu(n,i);a.tag=1,a.payload=t,null!=s&&(a.callback=s),null!==(t=mu(e,a,i))&&(Df(t,e,i,n),gu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Mf(),n=Rf(e),i=fu(s,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=mu(e,i,n))&&(Df(t,e,n,s),gu(t,e,n))}};function _d(e,t,s,n,i,a,r){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,r):!(t.prototype&&t.prototype.isPureReactComponent&&Ol(s,n)&&Ol(i,a))}function Nd(e,t,s){var n=!1,i=nh,a=t.contextType;return"object"==typeof a&&null!==a?a=ru(a):(i=lh(t)?rh:ih.current,a=(n=null!=(n=t.contextTypes))?oh(e,i):nh),t=new t(s,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Id,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ld(e,t,s,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Id.enqueueReplaceState(t,t.state,null)}function Fd(e,t,s,n){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs={},du(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=ru(a):(a=lh(t)?rh:ih.current,i.context=oh(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Dd(e,t,a,s),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Id.enqueueReplaceState(i,i.state,null),bu(e,s,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Od(e,t){try{var s="",n=t;do{s+=ya(n),n=n.return}while(n);var i=s}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function jd(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function Ud(e,t){try{console.error(t.value)}catch(s){setTimeout((function(){throw s}))}}var Gd="function"==typeof WeakMap?WeakMap:Map;function Hd(e,t,s){(s=fu(-1,s)).tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){wf||(wf=!0,xf=n),Ud(0,t)},s}function zd(e,t,s){(s=fu(-1,s)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;s.payload=function(){return n(i)},s.callback=function(){Ud(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(s.callback=function(){Ud(0,t),"function"!=typeof n&&(null===kf?kf=new Set([this]):kf.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function Vd(e,t,s){var n=e.pingCache;if(null===n){n=e.pingCache=new Gd;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(s)||(i.add(s),e=tm.bind(null,e,t,s),t.then(e,e))}function Wd(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function $d(e,t,s,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=fu(-1,1)).tag=2,mu(s,t,1))),s.lanes|=1),e)}var qd=Zi.ReactCurrentOwner,Kd=!1;function Qd(e,t,s,n){t.child=null===e?Xh(t,null,s,n):Zh(t,e.child,s,n)}function Zd(e,t,s,n,i){s=s.render;var a=t.ref;return au(t,i),n=Wu(e,t,s,n,a,i),s=$u(),null===e||Kd?(_h&&s&&Mh(t),t.flags|=1,Qd(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vp(e,t,i))}function Xd(e,t,s,n,i){if(null===e){var a=s.type;return"function"!=typeof a||lm(a)||void 0!==a.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=hm(s.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Yd(e,t,a,n,i))}if(a=e.child,!(e.lanes&i)){var r=a.memoizedProps;if((s=null!==(s=s.compare)?s:Ol)(r,n)&&e.ref===t.ref)return vp(e,t,i)}return t.flags|=1,(e=cm(a,n)).ref=t.ref,e.return=t,t.child=e}function Yd(e,t,s,n,i){if(null!==e){var a=e.memoizedProps;if(Ol(a,n)&&e.ref===t.ref){if(Kd=!1,t.pendingProps=n=a,!(e.lanes&i))return t.lanes=e.lanes,vp(e,t,i);131072&e.flags&&(Kd=!0)}}return tp(e,t,s,n,i)}function Jd(e,t,s){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&s))return e=null!==a?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sh(cf,lf),lf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:s,sh(cf,lf),lf|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sh(cf,lf),lf|=s;else null!==a?(n=a.baseLanes|s,t.memoizedState=null):n=s,sh(cf,lf),lf|=n;return Qd(e,t,i,s),t.child}function ep(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function tp(e,t,s,n,i){var a=lh(s)?rh:ih.current;return a=oh(t,a),au(t,i),s=Wu(e,t,s,n,a,i),n=$u(),null===e||Kd?(_h&&n&&Mh(t),t.flags|=1,Qd(e,t,s,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vp(e,t,i))}function sp(e,t,s,n,i){if(lh(s)){var a=!0;dh(t)}else a=!1;if(au(t,i),null===t.stateNode)bp(e,t),Nd(t,s,n),Fd(t,s,n,i),n=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var l=r.context,c=s.contextType;c="object"==typeof c&&null!==c?ru(c):oh(t,c=lh(s)?rh:ih.current);var h=s.getDerivedStateFromProps,u="function"==typeof h||"function"==typeof r.getSnapshotBeforeUpdate;u||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==n||l!==c)&&Ld(t,r,n,c),uu=!1;var d=t.memoizedState;r.state=d,bu(t,n,r,i),l=t.memoizedState,o!==n||d!==l||ah.current||uu?("function"==typeof h&&(Dd(t,s,h,n),l=t.memoizedState),(o=uu||_d(t,s,o,n,d,l,c))?(u||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4194308)):("function"==typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),r.props=n,r.state=l,r.context=c,n=o):("function"==typeof r.componentDidMount&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,pu(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Rd(t.type,o),r.props=c,u=t.pendingProps,d=r.context,l="object"==typeof(l=s.contextType)&&null!==l?ru(l):oh(t,l=lh(s)?rh:ih.current);var p=s.getDerivedStateFromProps;(h="function"==typeof p||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==u||d!==l)&&Ld(t,r,n,l),uu=!1,d=t.memoizedState,r.state=d,bu(t,n,r,i);var f=t.memoizedState;o!==u||d!==f||ah.current||uu?("function"==typeof p&&(Dd(t,s,p,n),f=t.memoizedState),(c=uu||_d(t,s,c,n,d,f,l)||!1)?(h||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(n,f,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),r.props=n,r.state=f,r.context=l,n=c):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return np(e,t,s,n,a,i)}function np(e,t,s,n,i,a){ep(e,t);var r=!!(128&t.flags);if(!n&&!r)return i&&ph(t,s,!1),vp(e,t,a);n=t.stateNode,qd.current=t;var o=r&&"function"!=typeof s.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&r?(t.child=Zh(t,e.child,null,a),t.child=Zh(t,null,o,a)):Qd(e,t,o,a),t.memoizedState=n.state,i&&ph(t,s,!0),t.child}function ip(e){var t=e.stateNode;t.pendingContext?hh(0,t.pendingContext,t.pendingContext!==t.context):t.context&&hh(0,t.context,!1),Su(e,t.containerInfo)}function ap(e,t,s,n,i){return zh(),Vh(i),t.flags|=256,Qd(e,t,s,n),t.child}var rp,op,lp,cp,hp={dehydrated:null,treeContext:null,retryLane:0};function up(e){return{baseLanes:e,cachePool:null,transitions:null}}function dp(e,t,s){var n,i=t.pendingProps,a=Cu.current,r=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&a)),n?(r=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),sh(Cu,1&a),null===e)return jh(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},1&i||null===r?r=dm(o,i,0,null):(r.childLanes=0,r.pendingProps=o),e=um(e,i,s,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=up(s),t.memoizedState=hp,e):pp(t,o));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,s,n,i,a,r){if(s)return 256&t.flags?(t.flags&=-257,fp(e,t,r,n=jd(Error(Ni(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=dm({mode:"visible",children:n.children},i,0,null),(a=um(a,i,r,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,1&t.mode&&Zh(t,e.child,null,r),t.child.memoizedState=up(r),t.memoizedState=hp,a);if(!(1&t.mode))return fp(e,t,r,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var o=n.dgst;return n=o,fp(e,t,r,n=jd(a=Error(Ni(419)),n,void 0))}if(o=!!(r&e.childLanes),Kd||o){if(null!==(n=af)){switch(r&-r){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(n.suspendedLanes|r)?0:i)&&i!==a.retryLane&&(a.retryLane=i,hu(e,i),Df(n,e,i,-1))}return Wf(),fp(e,t,r,n=jd(Error(Ni(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=nm.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ih=jc(i.nextSibling),Dh=t,_h=!0,Nh=null,null!==e&&(Ah[Eh++]=Ph,Ah[Eh++]=Th,Ah[Eh++]=Sh,Ph=e.id,Th=e.overflow,Sh=t),(t=pp(t,n.children)).flags|=4096,t)}(e,t,o,i,n,a,s);if(r){r=i.fallback,o=t.mode,n=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===a?(i=cm(a,l)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==n?r=cm(n,r):(r=um(r,o,s,null)).flags|=2,r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=null===(o=e.child.memoizedState)?up(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~s,t.memoizedState=hp,i}return e=(r=e.child).sibling,i=cm(r,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=s),i.return=t,i.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function pp(e,t){return(t=dm({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function fp(e,t,s,n){return null!==n&&Vh(n),Zh(t,e.child,null,s),(e=pp(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function mp(e,t,s){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),iu(e.return,t,s)}function gp(e,t,s,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function yp(e,t,s){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Qd(e,t,n.children,s),2&(n=Cu.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&mp(e,s,t);else if(19===e.tag)mp(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(sh(Cu,n),1&t.mode)switch(i){case"forwards":for(s=t.child,i=null;null!==s;)null!==(e=s.alternate)&&null===Mu(e)&&(i=s),s=s.sibling;null===(s=i)?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),gp(t,!1,i,s,a);break;case"backwards":for(s=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Mu(e)){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}gp(t,!0,s,null,a);break;case"together":gp(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function bp(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vp(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),df|=t.lanes,!(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(Ni(153));if(null!==t.child){for(s=cm(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=cm(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function wp(e,t){if(!_h)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;null!==s;)null!==s.alternate&&(n=s),s=s.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xp(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,n=0;if(t)for(var i=e.child;null!==i;)s|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function kp(e,t,s){var n=t.pendingProps;switch(Rh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xp(t),null;case 1:case 17:return lh(t.type)&&ch(),xp(t),null;case 3:return n=t.stateNode,Pu(),th(ah),th(ih),Du(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Gh(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Nh&&(Lf(Nh),Nh=null))),op(e,t),xp(t),null;case 5:Bu(t);var i=Eu(Au.current);if(s=t.type,null!==e&&null!=t.stateNode)lp(e,t,s,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(Ni(166));return xp(t),null}if(e=Eu(xu.current),Gh(t)){n=t.stateNode,s=t.type;var a=t.memoizedProps;switch(n[Hc]=t,n[zc]=a,e=!!(1&t.mode),s){case"dialog":mc("cancel",n),mc("close",n);break;case"iframe":case"object":case"embed":mc("load",n);break;case"video":case"audio":for(i=0;i<uc.length;i++)mc(uc[i],n);break;case"source":mc("error",n);break;case"img":case"image":case"link":mc("error",n),mc("load",n);break;case"details":mc("toggle",n);break;case"input":Pa(n,a),mc("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},mc("invalid",n);break;case"textarea":_a(n,a),mc("invalid",n)}for(var r in Ka(s,a),i=null,a)if(a.hasOwnProperty(r)){var o=a[r];"children"===r?"string"==typeof o?n.textContent!==o&&(!0!==a.suppressHydrationWarning&&Bc(n.textContent,o,e),i=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Bc(n.textContent,o,e),i=["children",""+o]):Fi.hasOwnProperty(r)&&null!=o&&"onScroll"===r&&mc("scroll",n)}switch(s){case"input":ka(n),Ca(n,a,!0);break;case"textarea":ka(n),La(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Cc)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{r=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Fa(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=r.createElement(s,{is:n.is}):(e=r.createElement(s),"select"===s&&(r=e,n.multiple?r.multiple=!0:n.size&&(r.size=n.size))):e=r.createElementNS(e,s),e[Hc]=t,e[zc]=n,rp(e,t,!1,!1),t.stateNode=e;e:{switch(r=Qa(s,n),s){case"dialog":mc("cancel",e),mc("close",e),i=n;break;case"iframe":case"object":case"embed":mc("load",e),i=n;break;case"video":case"audio":for(i=0;i<uc.length;i++)mc(uc[i],e);i=n;break;case"source":mc("error",e),i=n;break;case"img":case"image":case"link":mc("error",e),mc("load",e),i=n;break;case"details":mc("toggle",e),i=n;break;case"input":Pa(e,n),i=Sa(e,n),mc("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=pa({},n,{value:void 0}),mc("invalid",e);break;case"textarea":_a(e,n),i=Ia(e,n),mc("invalid",e)}for(a in Ka(s,i),o=i)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?$a(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&Ga(e,l):"children"===a?"string"==typeof l?("textarea"!==s||""!==l)&&Ha(e,l):"number"==typeof l&&Ha(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Fi.hasOwnProperty(a)?null!=l&&"onScroll"===a&&mc("scroll",e):null!=l&&Qi(e,a,l,r))}switch(s){case"input":ka(e),Ca(e,n,!1);break;case"textarea":ka(e),La(e);break;case"option":null!=n.value&&e.setAttribute("value",""+wa(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?Da(e,!!n.multiple,a,!1):null!=n.defaultValue&&Da(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Cc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return xp(t),null;case 6:if(e&&null!=t.stateNode)cp(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(Ni(166));if(s=Eu(Au.current),Eu(xu.current),Gh(t)){if(n=t.stateNode,s=t.memoizedProps,n[Hc]=t,(a=n.nodeValue!==s)&&null!==(e=Dh))switch(e.tag){case 3:Bc(n.nodeValue,s,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Bc(n.nodeValue,s,!!(1&e.mode))}a&&(t.flags|=4)}else(n=(9===s.nodeType?s:s.ownerDocument).createTextNode(n))[Hc]=t,t.stateNode=n}return xp(t),null;case 13:if(th(Cu),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(_h&&null!==Ih&&1&t.mode&&!(128&t.flags))Hh(),zh(),t.flags|=98560,a=!1;else if(a=Gh(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(Ni(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(Ni(317));a[Hc]=t}else zh(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;xp(t),a=!1}else null!==Nh&&(Lf(Nh),Nh=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=s,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Cu.current?0===hf&&(hf=3):Wf())),null!==t.updateQueue&&(t.flags|=4),xp(t),null);case 4:return Pu(),op(e,t),null===e&&bc(t.stateNode.containerInfo),xp(t),null;case 10:return nu(t.type._context),xp(t),null;case 19:if(th(Cu),null===(a=t.memoizedState))return xp(t),null;if(n=!!(128&t.flags),null===(r=a.rendering))if(n)wp(a,!1);else{if(0!==hf||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(r=Mu(e))){for(t.flags|=128,wp(a,!1),null!==(n=r.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;null!==s;)e=n,(a=s).flags&=14680066,null===(r=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,a.type=r.type,e=r.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return sh(Cu,1&Cu.current|2),t.child}e=e.sibling}null!==a.tail&&Tr()>bf&&(t.flags|=128,n=!0,wp(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Mu(r))){if(t.flags|=128,n=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),wp(a,!0),null===a.tail&&"hidden"===a.tailMode&&!r.alternate&&!_h)return xp(t),null}else 2*Tr()-a.renderingStartTime>bf&&1073741824!==s&&(t.flags|=128,n=!0,wp(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(null!==(s=a.last)?s.sibling=r:t.child=r,a.last=r)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Tr(),t.sibling=null,s=Cu.current,sh(Cu,n?1&s|2:1&s),t):(xp(t),null);case 22:case 23:return Gf(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&lf)&&(xp(t),6&t.subtreeFlags&&(t.flags|=8192)):xp(t),null;case 24:case 25:return null}throw Error(Ni(156,t.tag))}function Ap(e,t){switch(Rh(t),t.tag){case 1:return lh(t.type)&&ch(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Pu(),th(ah),th(ih),Du(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Bu(t),null;case 13:if(th(Cu),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Ni(340));zh()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return th(Cu),null;case 4:return Pu(),null;case 10:return nu(t.type._context),null;case 22:case 23:return Gf(),null;default:return null}}rp=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},op=function(){},lp=function(e,t,s,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Eu(xu.current);var a,r=null;switch(s){case"input":i=Sa(e,i),n=Sa(e,n),r=[];break;case"select":i=pa({},i,{value:void 0}),n=pa({},n,{value:void 0}),r=[];break;case"textarea":i=Ia(e,i),n=Ia(e,n),r=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=Cc)}for(c in Ka(s,n),s=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(Fi.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var l=n[c];if(o=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(s||(s={}),s[a]=l[a])}else s||(r||(r=[]),r.push(c,s)),s=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(r=r||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(r=r||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(Fi.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&mc("scroll",e),r||o===l||(r=[])):(r=r||[]).push(c,l))}s&&(r=r||[]).push("style",s);var c=r;(t.updateQueue=c)&&(t.flags|=4)}},cp=function(e,t,s,n){s!==n&&(t.flags|=4)};var Ep=!1,Sp=!1,Pp="function"==typeof WeakSet?WeakSet:Set,Tp=null;function Bp(e,t){var s=e.ref;if(null!==s)if("function"==typeof s)try{s(null)}catch(n){em(e,t,n)}else s.current=null}function Cp(e,t,s){try{s()}catch(n){em(e,t,n)}}var Mp=!1;function Rp(e,t,s){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Cp(t,s,a)}i=i.next}while(i!==n)}}function Dp(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Ip(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"==typeof t?t(e):t.current=e}}function _p(e){var t=e.alternate;null!==t&&(e.alternate=null,_p(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[Hc],delete t[zc],delete t[Wc],delete t[$c],delete t[qc]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Np(e){return 5===e.tag||3===e.tag||4===e.tag}function Lp(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Fp(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!=(s=s._reactRootContainer)||null!==t.onclick||(t.onclick=Cc));else if(4!==n&&null!==(e=e.child))for(Fp(e,t,s),e=e.sibling;null!==e;)Fp(e,t,s),e=e.sibling}function Op(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==n&&null!==(e=e.child))for(Op(e,t,s),e=e.sibling;null!==e;)Op(e,t,s),e=e.sibling}var jp=null,Up=!1;function Gp(e,t,s){for(s=s.child;null!==s;)Hp(e,t,s),s=s.sibling}function Hp(e,t,s){if(Nr&&"function"==typeof Nr.onCommitFiberUnmount)try{Nr.onCommitFiberUnmount(_r,s)}catch(o){}switch(s.tag){case 5:Sp||Bp(s,t);case 6:var n=jp,i=Up;jp=null,Gp(e,t,s),Up=i,null!==(jp=n)&&(Up?(e=jp,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):jp.removeChild(s.stateNode));break;case 18:null!==jp&&(Up?(e=jp,s=s.stateNode,8===e.nodeType?Oc(e.parentNode,s):1===e.nodeType&&Oc(e,s),vo(e)):Oc(jp,s.stateNode));break;case 4:n=jp,i=Up,jp=s.stateNode.containerInfo,Up=!0,Gp(e,t,s),jp=n,Up=i;break;case 0:case 11:case 14:case 15:if(!Sp&&null!==(n=s.updateQueue)&&null!==(n=n.lastEffect)){i=n=n.next;do{var a=i,r=a.destroy;a=a.tag,void 0!==r&&(2&a||4&a)&&Cp(s,t,r),i=i.next}while(i!==n)}Gp(e,t,s);break;case 1:if(!Sp&&(Bp(s,t),"function"==typeof(n=s.stateNode).componentWillUnmount))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){em(s,t,o)}Gp(e,t,s);break;case 21:Gp(e,t,s);break;case 22:1&s.mode?(Sp=(n=Sp)||null!==s.memoizedState,Gp(e,t,s),Sp=n):Gp(e,t,s);break;default:Gp(e,t,s)}}function zp(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Pp),t.forEach((function(t){var n=im.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))}))}}function Vp(e,t){var s=t.deletions;if(null!==s)for(var n=0;n<s.length;n++){var i=s[n];try{var a=e,r=t,o=r;e:for(;null!==o;){switch(o.tag){case 5:jp=o.stateNode,Up=!1;break e;case 3:case 4:jp=o.stateNode.containerInfo,Up=!0;break e}o=o.return}if(null===jp)throw Error(Ni(160));Hp(a,r,i),jp=null,Up=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){em(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Wp(t,e),t=t.sibling}function Wp(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vp(t,e),$p(e),4&n){try{Rp(3,e,e.return),Dp(3,e)}catch(m){em(e,e.return,m)}try{Rp(5,e,e.return)}catch(m){em(e,e.return,m)}}break;case 1:Vp(t,e),$p(e),512&n&&null!==s&&Bp(s,s.return);break;case 5:if(Vp(t,e),$p(e),512&n&&null!==s&&Bp(s,s.return),32&e.flags){var i=e.stateNode;try{Ha(i,"")}catch(m){em(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,r=null!==s?s.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Ta(i,a),Qa(o,r);var c=Qa(o,a);for(r=0;r<l.length;r+=2){var h=l[r],u=l[r+1];"style"===h?$a(i,u):"dangerouslySetInnerHTML"===h?Ga(i,u):"children"===h?Ha(i,u):Qi(i,h,u,c)}switch(o){case"input":Ba(i,a);break;case"textarea":Na(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?Da(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?Da(i,!!a.multiple,a.defaultValue,!0):Da(i,!!a.multiple,a.multiple?[]:"",!1))}i[zc]=a}catch(m){em(e,e.return,m)}}break;case 6:if(Vp(t,e),$p(e),4&n){if(null===e.stateNode)throw Error(Ni(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){em(e,e.return,m)}}break;case 3:if(Vp(t,e),$p(e),4&n&&null!==s&&s.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(m){em(e,e.return,m)}break;case 4:default:Vp(t,e),$p(e);break;case 13:Vp(t,e),$p(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(yf=Tr())),4&n&&zp(e);break;case 22:if(h=null!==s&&null!==s.memoizedState,1&e.mode?(Sp=(c=Sp)||h,Vp(t,e),Sp=c):Vp(t,e),$p(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&1&e.mode)for(Tp=e,h=e.child;null!==h;){for(u=Tp=h;null!==Tp;){switch(p=(d=Tp).child,d.tag){case 0:case 11:case 14:case 15:Rp(4,d,d.return);break;case 1:Bp(d,d.return);var f=d.stateNode;if("function"==typeof f.componentWillUnmount){n=d,s=d.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){em(n,s,m)}}break;case 5:Bp(d,d.return);break;case 22:if(null!==d.memoizedState){Zp(u);continue}}null!==p?(p.return=d,Tp=p):Zp(u)}h=h.sibling}e:for(h=null,u=e;;){if(5===u.tag){if(null===h){h=u;try{i=u.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=u.stateNode,r=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=Wa("display",r))}catch(m){em(e,e.return,m)}}}else if(6===u.tag){if(null===h)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){em(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Vp(t,e),$p(e),4&n&&zp(e);case 21:}}function $p(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(Np(s)){var n=s;break e}s=s.return}throw Error(Ni(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(Ha(i,""),n.flags&=-33),Op(e,Lp(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;Fp(e,Lp(e),a);break;default:throw Error(Ni(161))}}catch(r){em(e,e.return,r)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qp(e,t,s){Tp=e,Kp(e)}function Kp(e,t,s){for(var n=!!(1&e.mode);null!==Tp;){var i=Tp,a=i.child;if(22===i.tag&&n){var r=null!==i.memoizedState||Ep;if(!r){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Sp;o=Ep;var c=Sp;if(Ep=r,(Sp=l)&&!c)for(Tp=i;null!==Tp;)l=(r=Tp).child,22===r.tag&&null!==r.memoizedState?Xp(i):null!==l?(l.return=r,Tp=l):Xp(i);for(;null!==a;)Tp=a,Kp(a),a=a.sibling;Tp=i,Ep=o,Sp=c}Qp(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Tp=a):Qp(e)}}function Qp(e){for(;null!==Tp;){var t=Tp;if(8772&t.flags){var s=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Sp||Dp(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Sp)if(null===s)n.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:Rd(t.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&vu(t,a,n);break;case 3:var r=t.updateQueue;if(null!==r){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}vu(t,r,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break;case"img":l.src&&(s.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var u=h.dehydrated;null!==u&&vo(u)}}}break;default:throw Error(Ni(163))}Sp||512&t.flags&&Ip(t)}catch(d){em(t,t.return,d)}}if(t===e){Tp=null;break}if(null!==(s=t.sibling)){s.return=t.return,Tp=s;break}Tp=t.return}}function Zp(e){for(;null!==Tp;){var t=Tp;if(t===e){Tp=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Tp=s;break}Tp=t.return}}function Xp(e){for(;null!==Tp;){var t=Tp;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Dp(4,t)}catch(l){em(t,s,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){em(t,i,l)}}var a=t.return;try{Ip(t)}catch(l){em(t,a,l)}break;case 5:var r=t.return;try{Ip(t)}catch(l){em(t,r,l)}}}catch(l){em(t,t.return,l)}if(t===e){Tp=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Tp=o;break}Tp=t.return}}var Yp,Jp=Math.ceil,ef=Zi.ReactCurrentDispatcher,tf=Zi.ReactCurrentOwner,sf=Zi.ReactCurrentBatchConfig,nf=0,af=null,rf=null,of=0,lf=0,cf=eh(0),hf=0,uf=null,df=0,pf=0,ff=0,mf=null,gf=null,yf=0,bf=1/0,vf=null,wf=!1,xf=null,kf=null,Af=!1,Ef=null,Sf=0,Pf=0,Tf=null,Bf=-1,Cf=0;function Mf(){return 6&nf?Tr():-1!==Bf?Bf:Bf=Tr()}function Rf(e){return 1&e.mode?2&nf&&0!==of?of&-of:null!==Wh.transition?(0===Cf&&(Cf=Wr()),Cf):0!==(e=Qr)?e:e=void 0===(e=window.event)?16:To(e.type):1}function Df(e,t,s,n){if(50<Pf)throw Pf=0,Tf=null,Error(Ni(185));qr(e,s,n),2&nf&&e===af||(e===af&&(!(2&nf)&&(pf|=s),4===hf&&Ff(e,of)),If(e,n),1===s&&0===nf&&!(1&t.mode)&&(bf=Tr()+500,mh&&bh()))}function If(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var r=31-Lr(a),o=1<<r,l=i[r];-1===l?o&s&&!(o&n)||(i[r]=zr(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=Hr(e,e===af?of:0);if(0===n)null!==s&&Er(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=s&&Er(s),1===t)0===e.tag?function(e){mh=!0,yh(e)}(Of.bind(null,e)):yh(Of.bind(null,e)),Lc((function(){!(6&nf)&&bh()})),s=null;else{switch(Zr(n)){case 1:s=Cr;break;case 4:s=Mr;break;case 16:default:s=Rr;break;case 536870912:s=Ir}s=am(s,_f.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function _f(e,t){if(Bf=-1,Cf=0,6&nf)throw Error(Ni(327));var s=e.callbackNode;if(Yf()&&e.callbackNode!==s)return null;var n=Hr(e,e===af?of:0);if(0===n)return null;if(30&n||n&e.expiredLanes||t)t=$f(e,n);else{t=n;var i=nf;nf|=2;var a=Vf();for(af===e&&of===t||(vf=null,bf=Tr()+500,Hf(e,t));;)try{Kf();break}catch(o){zf(e,o)}su(),ef.current=a,nf=i,null!==rf?t=0:(af=null,of=0,t=hf)}if(0!==t){if(2===t&&0!==(i=Vr(e))&&(n=i,t=Nf(e,i)),1===t)throw s=uf,Hf(e,0),Ff(e,n),If(e,Tr()),s;if(6===t)Ff(e,n);else{if(i=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!Fl(a(),i))return!1}catch(r){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=$f(e,n),2===t&&(a=Vr(e),0!==a&&(n=a,t=Nf(e,a))),1!==t)))throw s=uf,Hf(e,0),Ff(e,n),If(e,Tr()),s;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Ni(345));case 2:case 5:Xf(e,gf,vf);break;case 3:if(Ff(e,n),(130023424&n)===n&&10<(t=yf+500-Tr())){if(0!==Hr(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Mf(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ic(Xf.bind(null,e,gf,vf),t);break}Xf(e,gf,vf);break;case 4:if(Ff(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var r=31-Lr(n);a=1<<r,(r=t[r])>i&&(i=r),n&=~a}if(n=i,10<(n=(120>(n=Tr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jp(n/1960))-n)){e.timeoutHandle=Ic(Xf.bind(null,e,gf,vf),n);break}Xf(e,gf,vf);break;default:throw Error(Ni(329))}}}return If(e,Tr()),e.callbackNode===s?_f.bind(null,e):null}function Nf(e,t){var s=mf;return e.current.memoizedState.isDehydrated&&(Hf(e,t).flags|=256),2!==(e=$f(e,t))&&(t=gf,gf=s,null!==t&&Lf(t)),e}function Lf(e){null===gf?gf=e:gf.push.apply(gf,e)}function Ff(e,t){for(t&=~ff,t&=~pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Lr(t),n=1<<s;e[s]=-1,t&=~n}}function Of(e){if(6&nf)throw Error(Ni(327));Yf();var t=Hr(e,0);if(!(1&t))return If(e,Tr()),null;var s=$f(e,t);if(0!==e.tag&&2===s){var n=Vr(e);0!==n&&(t=n,s=Nf(e,n))}if(1===s)throw s=uf,Hf(e,0),Ff(e,t),If(e,Tr()),s;if(6===s)throw Error(Ni(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xf(e,gf,vf),If(e,Tr()),null}function jf(e,t){var s=nf;nf|=1;try{return e(t)}finally{0===(nf=s)&&(bf=Tr()+500,mh&&bh())}}function Uf(e){null!==Ef&&0===Ef.tag&&!(6&nf)&&Yf();var t=nf;nf|=1;var s=sf.transition,n=Qr;try{if(sf.transition=null,Qr=1,e)return e()}finally{Qr=n,sf.transition=s,!(6&(nf=t))&&bh()}}function Gf(){lf=cf.current,th(cf)}function Hf(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,_c(s)),null!==rf)for(s=rf.return;null!==s;){var n=s;switch(Rh(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&ch();break;case 3:Pu(),th(ah),th(ih),Du();break;case 5:Bu(n);break;case 4:Pu();break;case 13:case 19:th(Cu);break;case 10:nu(n.type._context);break;case 22:case 23:Gf()}s=s.return}if(af=e,rf=e=cm(e.current,null),of=lf=t,hf=0,uf=null,ff=pf=df=0,gf=mf=null,null!==ou){for(t=0;t<ou.length;t++)if(null!==(n=(s=ou[t]).interleaved)){s.interleaved=null;var i=n.next,a=s.pending;if(null!==a){var r=a.next;a.next=i,n.next=r}s.pending=n}ou=null}return e}function zf(e,t){for(;;){var s=rf;try{if(su(),Iu.current=Td,ju){for(var n=Lu.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}ju=!1}if(Nu=0,Ou=Fu=Lu=null,Uu=!1,Gu=0,tf.current=null,null===s||null===s.return){hf=1,uf=t,rf=null;break}e:{var a=e,r=s.return,o=s,l=t;if(t=of,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,h=o,u=h.tag;if(!(1&h.mode||0!==u&&11!==u&&15!==u)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Wd(r);if(null!==p){p.flags&=-257,$d(p,r,o,0,t),1&p.mode&&Vd(a,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){Vd(a,c,t),Wf();break e}l=Error(Ni(426))}else if(_h&&1&o.mode){var g=Wd(r);if(null!==g){!(65536&g.flags)&&(g.flags|=256),$d(g,r,o,0,t),Vh(Od(l,o));break e}}a=l=Od(l,o),4!==hf&&(hf=2),null===mf?mf=[a]:mf.push(a),a=r;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,yu(a,Hd(0,l,t));break e;case 1:o=l;var y=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof y.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==kf&&kf.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,yu(a,zd(a,o,t));break e}}a=a.return}while(null!==a)}Zf(s)}catch(v){t=v,rf===s&&null!==s&&(rf=s=s.return);continue}break}}function Vf(){var e=ef.current;return ef.current=Td,null===e?Td:e}function Wf(){0!==hf&&3!==hf&&2!==hf||(hf=4),null===af||!(268435455&df)&&!(268435455&pf)||Ff(af,of)}function $f(e,t){var s=nf;nf|=2;var n=Vf();for(af===e&&of===t||(vf=null,Hf(e,t));;)try{qf();break}catch(i){zf(e,i)}if(su(),nf=s,ef.current=n,null!==rf)throw Error(Ni(261));return af=null,of=0,hf}function qf(){for(;null!==rf;)Qf(rf)}function Kf(){for(;null!==rf&&!Sr();)Qf(rf)}function Qf(e){var t=Yp(e.alternate,e,lf);e.memoizedProps=e.pendingProps,null===t?Zf(e):rf=t,tf.current=null}function Zf(e){var t=e;do{var s=t.alternate;if(e=t.return,32768&t.flags){if(null!==(s=Ap(s,t)))return s.flags&=32767,void(rf=s);if(null===e)return hf=6,void(rf=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(s=kp(s,t,lf)))return void(rf=s);if(null!==(t=t.sibling))return void(rf=t);rf=t=e}while(null!==t);0===hf&&(hf=5)}function Xf(e,t,s){var n=Qr,i=sf.transition;try{sf.transition=null,Qr=1,function(e,t,s,n){do{Yf()}while(null!==Ef);if(6&nf)throw Error(Ni(327));s=e.finishedWork;var i=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Ni(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-Lr(s),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,s&=~a}}(e,a),e===af&&(rf=af=null,of=0),!(2064&s.subtreeFlags)&&!(2064&s.flags)||Af||(Af=!0,am(Rr,(function(){return Yf(),null}))),a=!!(15990&s.flags),15990&s.subtreeFlags||a){a=sf.transition,sf.transition=null;var r=Qr;Qr=1;var o=nf;nf|=4,tf.current=null,function(e,t){if(Mc=xo,zl(e=Hl())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(n&&0!==n.rangeCount){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch(w){s=null;break e}var r=0,o=-1,l=-1,c=0,h=0,u=e,d=null;t:for(;;){for(var p;u!==s||0!==i&&3!==u.nodeType||(o=r+i),u!==a||0!==n&&3!==u.nodeType||(l=r+n),3===u.nodeType&&(r+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===e)break t;if(d===s&&++c===i&&(o=r),d===a&&++h===n&&(l=r),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}s=-1===o||-1===l?null:{start:o,end:l}}else s=null}s=s||{start:0,end:0}}else s=null;for(Rc={focusedElem:e,selectionRange:s},xo=!1,Tp=t;null!==Tp;)if(e=(t=Tp).child,1028&t.subtreeFlags&&null!==e)e.return=t,Tp=e;else for(;null!==Tp;){t=Tp;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Rd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(Ni(163))}}catch(w){em(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Tp=e;break}Tp=t.return}f=Mp,Mp=!1}(e,s),Wp(s,e),Vl(Rc),xo=!!Mc,Rc=Mc=null,e.current=s,qp(s),Pr(),nf=o,Qr=r,sf.transition=a}else e.current=s;if(Af&&(Af=!1,Ef=e,Sf=i),0===(a=e.pendingLanes)&&(kf=null),function(e){if(Nr&&"function"==typeof Nr.onCommitFiberRoot)try{Nr.onCommitFiberRoot(_r,e,void 0,!(128&~e.current.flags))}catch(t){}}(s.stateNode),If(e,Tr()),null!==t)for(n=e.onRecoverableError,s=0;s<t.length;s++)n((i=t[s]).value,{componentStack:i.stack,digest:i.digest});if(wf)throw wf=!1,e=xf,xf=null,e;!!(1&Sf)&&0!==e.tag&&Yf(),1&(a=e.pendingLanes)?e===Tf?Pf++:(Pf=0,Tf=e):Pf=0,bh()}(e,t,s,n)}finally{sf.transition=i,Qr=n}return null}function Yf(){if(null!==Ef){var e=Zr(Sf),t=sf.transition,s=Qr;try{if(sf.transition=null,Qr=16>e?16:e,null===Ef)var n=!1;else{if(e=Ef,Ef=null,Sf=0,6&nf)throw Error(Ni(331));var i=nf;for(nf|=4,Tp=e.current;null!==Tp;){var a=Tp,r=a.child;if(16&Tp.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Tp=c;null!==Tp;){var h=Tp;switch(h.tag){case 0:case 11:case 15:Rp(8,h,a)}var u=h.child;if(null!==u)u.return=h,Tp=u;else for(;null!==Tp;){var d=(h=Tp).sibling,p=h.return;if(_p(h),h===c){Tp=null;break}if(null!==d){d.return=p,Tp=d;break}Tp=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Tp=a}}if(2064&a.subtreeFlags&&null!==r)r.return=a,Tp=r;else e:for(;null!==Tp;){if(2048&(a=Tp).flags)switch(a.tag){case 0:case 11:case 15:Rp(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Tp=y;break e}Tp=a.return}}var b=e.current;for(Tp=b;null!==Tp;){var v=(r=Tp).child;if(2064&r.subtreeFlags&&null!==v)v.return=r,Tp=v;else e:for(r=b;null!==Tp;){if(2048&(o=Tp).flags)try{switch(o.tag){case 0:case 11:case 15:Dp(9,o)}}catch(x){em(o,o.return,x)}if(o===r){Tp=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Tp=w;break e}Tp=o.return}}if(nf=i,bh(),Nr&&"function"==typeof Nr.onPostCommitFiberRoot)try{Nr.onPostCommitFiberRoot(_r,e)}catch(x){}n=!0}return n}finally{Qr=s,sf.transition=t}}return!1}function Jf(e,t,s){e=mu(e,t=Hd(0,t=Od(s,t),1),1),t=Mf(),null!==e&&(qr(e,1,t),If(e,t))}function em(e,t,s){if(3===e.tag)Jf(e,e,s);else for(;null!==t;){if(3===t.tag){Jf(t,e,s);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===kf||!kf.has(n))){t=mu(t,e=zd(t,e=Od(s,e),1),1),e=Mf(),null!==t&&(qr(t,1,e),If(t,e));break}}t=t.return}}function tm(e,t,s){var n=e.pingCache;null!==n&&n.delete(t),t=Mf(),e.pingedLanes|=e.suspendedLanes&s,af===e&&(of&s)===s&&(4===hf||3===hf&&(130023424&of)===of&&500>Tr()-yf?Hf(e,0):ff|=s),If(e,t)}function sm(e,t){0===t&&(1&e.mode?(t=Ur,!(130023424&(Ur<<=1))&&(Ur=4194304)):t=1);var s=Mf();null!==(e=hu(e,t))&&(qr(e,t,s),If(e,s))}function nm(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),sm(e,s)}function im(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(s=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ni(314))}null!==n&&n.delete(t),sm(e,s)}function am(e,t){return Ar(e,t)}function rm(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function om(e,t,s,n){return new rm(e,t,s,n)}function lm(e){return!(!(e=e.prototype)||!e.isReactComponent)}function cm(e,t){var s=e.alternate;return null===s?((s=om(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function hm(e,t,s,n,i,a){var r=2;if(n=e,"function"==typeof e)lm(e)&&(r=1);else if("string"==typeof e)r=5;else e:switch(e){case Ji:return um(s.children,i,a,t);case ea:r=8,i|=8;break;case ta:return(e=om(12,s,t,2|i)).elementType=ta,e.lanes=a,e;case aa:return(e=om(13,s,t,i)).elementType=aa,e.lanes=a,e;case ra:return(e=om(19,s,t,i)).elementType=ra,e.lanes=a,e;case ca:return dm(s,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case sa:r=10;break e;case na:r=9;break e;case ia:r=11;break e;case oa:r=14;break e;case la:r=16,n=null;break e}throw Error(Ni(130,null==e?e:typeof e,""))}return(t=om(r,s,t,i)).elementType=e,t.type=n,t.lanes=a,t}function um(e,t,s,n){return(e=om(7,e,n,t)).lanes=s,e}function dm(e,t,s,n){return(e=om(22,e,n,t)).elementType=ca,e.lanes=s,e.stateNode={isHidden:!1},e}function pm(e,t,s){return(e=om(6,e,null,t)).lanes=s,e}function fm(e,t,s){return(t=om(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mm(e,t,s,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gm(e,t,s,n,i,a,r,o,l){return e=new mm(e,t,s,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=om(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},du(a),e}function ym(e){if(!e)return nh;e:{if(br(e=e._reactInternals)!==e||1!==e.tag)throw Error(Ni(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lh(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(Ni(171))}if(1===e.tag){var s=e.type;if(lh(s))return uh(e,s,t)}return t}function bm(e,t,s,n,i,a,r,o,l){return(e=gm(s,n,!0,e,0,a,0,o,l)).context=ym(null),s=e.current,(a=fu(n=Mf(),i=Rf(s))).callback=null!=t?t:null,mu(s,a,i),e.current.lanes=i,qr(e,i,n),If(e,n),e}function vm(e,t,s,n){var i=t.current,a=Mf(),r=Rf(i);return s=ym(s),null===t.context?t.context=s:t.pendingContext=s,(t=fu(a,r)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=mu(i,t,r))&&(Df(e,i,r,a),gu(e,i,r)),r}function wm(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function xm(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function km(e,t){xm(e,t),(e=e.alternate)&&xm(e,t)}Yp=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||ah.current)Kd=!0;else{if(!(e.lanes&s||128&t.flags))return Kd=!1,function(e,t,s){switch(t.tag){case 3:ip(t),zh();break;case 5:Tu(t);break;case 1:lh(t.type)&&dh(t);break;case 4:Su(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;sh(Yh,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(sh(Cu,1&Cu.current),t.flags|=128,null):s&t.child.childLanes?dp(e,t,s):(sh(Cu,1&Cu.current),null!==(e=vp(e,t,s))?e.sibling:null);sh(Cu,1&Cu.current);break;case 19:if(n=!!(s&t.childLanes),128&e.flags){if(n)return yp(e,t,s);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),sh(Cu,Cu.current),n)break;return null;case 22:case 23:return t.lanes=0,Jd(e,t,s)}return vp(e,t,s)}(e,t,s);Kd=!!(131072&e.flags)}else Kd=!1,_h&&1048576&t.flags&&Ch(t,kh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;bp(e,t),e=t.pendingProps;var i=oh(t,ih.current);au(t,s),i=Wu(null,t,n,e,i,s);var a=$u();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lh(n)?(a=!0,dh(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,du(t),i.updater=Id,t.stateNode=i,i._reactInternals=t,Fd(t,n,e,s),t=np(null,t,n,!0,a,s)):(t.tag=0,_h&&a&&Mh(t),Qd(null,t,i,s),t=t.child),t;case 16:n=t.elementType;e:{switch(bp(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return lm(e)?1:0;if(null!=e){if((e=e.$$typeof)===ia)return 11;if(e===oa)return 14}return 2}(n),e=Rd(n,e),i){case 0:t=tp(null,t,n,e,s);break e;case 1:t=sp(null,t,n,e,s);break e;case 11:t=Zd(null,t,n,e,s);break e;case 14:t=Xd(null,t,n,Rd(n.type,e),s);break e}throw Error(Ni(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,tp(e,t,n,i=t.elementType===n?i:Rd(n,i),s);case 1:return n=t.type,i=t.pendingProps,sp(e,t,n,i=t.elementType===n?i:Rd(n,i),s);case 3:e:{if(ip(t),null===e)throw Error(Ni(387));n=t.pendingProps,i=(a=t.memoizedState).element,pu(e,t),bu(t,n,null,s);var r=t.memoizedState;if(n=r.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ap(e,t,n,s,i=Od(Error(Ni(423)),t));break e}if(n!==i){t=ap(e,t,n,s,i=Od(Error(Ni(424)),t));break e}for(Ih=jc(t.stateNode.containerInfo.firstChild),Dh=t,_h=!0,Nh=null,s=Xh(t,null,n,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(zh(),n===i){t=vp(e,t,s);break e}Qd(e,t,n,s)}t=t.child}return t;case 5:return Tu(t),null===e&&jh(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,r=i.children,Dc(n,i)?r=null:null!==a&&Dc(n,a)&&(t.flags|=32),ep(e,t),Qd(e,t,r,s),t.child;case 6:return null===e&&jh(t),null;case 13:return dp(e,t,s);case 4:return Su(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Zh(t,null,n,s):Qd(e,t,n,s),t.child;case 11:return n=t.type,i=t.pendingProps,Zd(e,t,n,i=t.elementType===n?i:Rd(n,i),s);case 7:return Qd(e,t,t.pendingProps,s),t.child;case 8:case 12:return Qd(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,r=i.value,sh(Yh,n._currentValue),n._currentValue=r,null!==a)if(Fl(a.value,r)){if(a.children===i.children&&!ah.current){t=vp(e,t,s);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){r=a.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===a.tag){(l=fu(-1,s&-s)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}a.lanes|=s,null!==(l=a.alternate)&&(l.lanes|=s),iu(a.return,s,t),o.lanes|=s;break}l=l.next}}else if(10===a.tag)r=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(r=a.return))throw Error(Ni(341));r.lanes|=s,null!==(o=r.alternate)&&(o.lanes|=s),iu(r,s,t),r=a.sibling}else r=a.child;if(null!==r)r.return=a;else for(r=a;null!==r;){if(r===t){r=null;break}if(null!==(a=r.sibling)){a.return=r.return,r=a;break}r=r.return}a=r}Qd(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,au(t,s),n=n(i=ru(i)),t.flags|=1,Qd(e,t,n,s),t.child;case 14:return i=Rd(n=t.type,t.pendingProps),Xd(e,t,n,i=Rd(n.type,i),s);case 15:return Yd(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Rd(n,i),bp(e,t),t.tag=1,lh(n)?(e=!0,dh(t)):e=!1,au(t,s),Nd(t,n,i),Fd(t,n,i,s),np(null,t,n,!0,e,s);case 19:return yp(e,t,s);case 22:return Jd(e,t,s)}throw Error(Ni(156,t.tag))};var Am="function"==typeof reportError?reportError:function(e){console.error(e)};function Em(e){this._internalRoot=e}function Sm(e){this._internalRoot=e}function Pm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Tm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bm(){}function Cm(e,t,s,n,i){var a=s._reactRootContainer;if(a){var r=a;if("function"==typeof i){var o=i;i=function(){var e=wm(r);o.call(e)}}vm(t,r,e,i)}else r=function(e,t,s,n,i){if(i){if("function"==typeof n){var a=n;n=function(){var e=wm(r);a.call(e)}}var r=bm(t,n,e,0,null,!1,0,"",Bm);return e._reactRootContainer=r,e[Vc]=r.current,bc(8===e.nodeType?e.parentNode:e),Uf(),r}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var o=n;n=function(){var e=wm(l);o.call(e)}}var l=gm(e,0,!1,null,0,!1,0,"",Bm);return e._reactRootContainer=l,e[Vc]=l.current,bc(8===e.nodeType?e.parentNode:e),Uf((function(){vm(t,l,s,n)})),l}(s,t,e,i,n);return wm(r)}Sm.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Ni(409));vm(e,t,null,null)},Sm.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Uf((function(){vm(null,e,null,null)})),t[Vc]=null}},Sm.prototype.unstable_scheduleHydration=function(e){if(e){var t=eo();e={blockedOn:null,target:e,priority:t};for(var s=0;s<co.length&&0!==t&&t<co[s].priority;s++);co.splice(s,0,e),0===s&&fo(e)}},Xr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Gr(t.pendingLanes);0!==s&&(Kr(t,1|s),If(t,Tr()),!(6&nf)&&(bf=Tr()+500,bh()))}break;case 13:Uf((function(){var t=hu(e,1);if(null!==t){var s=Mf();Df(t,e,1,s)}})),km(e,1)}},Yr=function(e){if(13===e.tag){var t=hu(e,134217728);null!==t&&Df(t,e,134217728,Mf()),km(e,134217728)}},Jr=function(e){if(13===e.tag){var t=Rf(e),s=hu(e,t);null!==s&&Df(s,e,t,Mf()),km(e,t)}},eo=function(){return Qr},to=function(e,t){var s=Qr;try{return Qr=e,t()}finally{Qr=s}},Ya=function(e,t,s){switch(t){case"input":if(Ba(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var i=Xc(n);if(!i)throw Error(Ni(90));Aa(n),Ba(n,i)}}}break;case"textarea":Na(e,s);break;case"select":null!=(t=s.value)&&Da(e,!!s.multiple,t,!1)}},ir=jf,ar=Uf;var Mm={usingClientEntryPoint:!1,Events:[Qc,Zc,Xc,sr,nr,jf]},Rm={findFiberByHostInstance:Kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dm={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=xr(e))?null:e.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Im.isDisabled&&Im.supportsFiber)try{_r=Im.inject(Dm),Nr=Im}catch(Ua){}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm,Ci.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Pm(t))throw Error(Ni(200));return function(e,t,s){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Yi,key:null==n?null:""+n,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},Ci.createRoot=function(e,t){if(!Pm(e))throw Error(Ni(299));var s=!1,n="",i=Am;return null!=t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=gm(e,1,!1,null,0,s,0,n,i),e[Vc]=t.current,bc(8===e.nodeType?e.parentNode:e),new Em(t)},Ci.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Ni(188));throw e=Object.keys(e).join(","),Error(Ni(268,e))}return null===(e=xr(t))?null:e.stateNode},Ci.flushSync=function(e){return Uf(e)},Ci.hydrate=function(e,t,s){if(!Tm(t))throw Error(Ni(200));return Cm(null,e,t,!0,s)},Ci.hydrateRoot=function(e,t,s){if(!Pm(e))throw Error(Ni(405));var n=null!=s&&s.hydratedSources||null,i=!1,a="",r=Am;if(null!=s&&(!0===s.unstable_strictMode&&(i=!0),void 0!==s.identifierPrefix&&(a=s.identifierPrefix),void 0!==s.onRecoverableError&&(r=s.onRecoverableError)),t=bm(t,null,e,1,null!=s?s:null,i,0,a,r),e[Vc]=t.current,bc(e),n)for(e=0;e<n.length;e++)i=(i=(s=n[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Sm(t)},Ci.render=function(e,t,s){if(!Tm(t))throw Error(Ni(200));return Cm(null,e,t,!1,s)},Ci.unmountComponentAtNode=function(e){if(!Tm(e))throw Error(Ni(40));return!!e._reactRootContainer&&(Uf((function(){Cm(null,null,e,!1,(function(){e._reactRootContainer=null,e[Vc]=null}))})),!0)},Ci.unstable_batchedUpdates=jf,Ci.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Tm(s))throw Error(Ni(200));if(null==e||void 0===e._reactInternals)throw Error(Ni(38));return Cm(e,t,s,!1,n)},Ci.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Bi.exports=Ci;var _m=Bi.exports;Ti.createRoot=_m.createRoot,Ti.hydrateRoot=_m.hydrateRoot;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.parse=function(e,t){const s=new Gm,n=e.length;if(n<2)return s;const i=(null==t?void 0:t.decode)||Vm;let a=0;do{const t=e.indexOf("=",a);if(-1===t)break;const r=e.indexOf(";",a),o=-1===r?n:r;if(t>o){a=e.lastIndexOf(";",t-1)+1;continue}const l=Hm(e,a,t),c=zm(e,t,l),h=e.slice(l,c);if(void 0===s[h]){let n=Hm(e,t+1,o),a=zm(e,o,n);const r=i(e.slice(n,a));s[h]=r}a=o+1}while(a<n);return s},Nm.serialize=function(e,t,s){const n=(null==s?void 0:s.encode)||encodeURIComponent;if(!Lm.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=n(t);if(!Fm.test(i))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!s)return a;if(void 0!==s.maxAge){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);a+="; Max-Age="+s.maxAge}if(s.domain){if(!Om.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);a+="; Domain="+s.domain}if(s.path){if(!jm.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);a+="; Path="+s.path}if(s.expires){if(!function(e){return"[object Date]"===Um.call(e)}(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);a+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.partitioned&&(a+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return a};const Lm=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Fm=/^[\u0021-\u003A\u003C-\u007E]*$/,Om=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,jm=/^[\u0020-\u003A\u003D-\u007E]*$/,Um=Object.prototype.toString,Gm=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Hm(e,t,s){do{const s=e.charCodeAt(t);if(32!==s&&9!==s)return t}while(++t<s);return s}function zm(e,t,s){for(;t>s;){const s=e.charCodeAt(--t);if(32!==s&&9!==s)return t+1}return s}function Vm(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}var Wm="popstate";function $m(e,t){if(!1===e||null==e)throw new Error(t)}function qm(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function Km(e,t){return{usr:e.state,key:e.key,idx:t}}function Qm(e,t,s=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Xm(t):t,state:s,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Zm({pathname:e="/",search:t="",hash:s=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),s&&"#"!==s&&(e+="#"===s.charAt(0)?s:"#"+s),e}function Xm(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Ym(e,t,s="/"){return function(e,t,s){let n=dg(("string"==typeof t?Xm(t):t).pathname||"/",s);if(null==n)return null;let i=Jm(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,s)=>e===t[s]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let r=0;null==a&&r<i.length;++r){let e=ug(n);a=cg(i[r],e,false)}return a}(e,t,s)}function Jm(e,t=[],s=[],n=""){let i=(e,i,a)=>{let r={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};r.relativePath.startsWith("/")&&($m(r.relativePath.startsWith(n),`Absolute route path "${r.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),r.relativePath=r.relativePath.slice(n.length));let o=gg([n,r.relativePath]),l=s.concat(r);e.children&&e.children.length>0&&($m(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),Jm(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:lg(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var s;if(""!==e.path&&(null==(s=e.path)?void 0:s.includes("?")))for(let n of eg(e.path))i(e,t,n);else i(e,t)})),t}function eg(e){let t=e.split("/");if(0===t.length)return[];let[s,...n]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(0===n.length)return i?[a,""]:[a];let r=eg(n.join("/")),o=[];return o.push(...r.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...r),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var tg=/^:[\w-]+$/,sg=3,ng=2,ig=1,ag=10,rg=-2,og=e=>"*"===e;function lg(e,t){let s=e.split("/"),n=s.length;return s.some(og)&&(n+=rg),t&&(n+=ng),s.filter((e=>!og(e))).reduce(((e,t)=>e+(tg.test(t)?sg:""===t?ig:ag)),n)}function cg(e,t,s=!1){let{routesMeta:n}=e,i={},a="/",r=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",h=hg({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&s&&!n[n.length-1].route.index&&(h=hg({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),r.push({params:i,pathname:gg([a,h.pathname]),pathnameBase:yg(gg([a,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(a=gg([a,h.pathnameBase]))}return r}function hg(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=function(e,t=!1,s=!0){qm("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,s)=>(n.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(s);if(!i)return null;let a=i[0],r=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce(((e,{paramName:t,isOptional:s},n)=>{if("*"===t){let e=o[n]||"";r=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[n];return e[t]=s&&!i?void 0:(i||"").replace(/%2F/g,"/"),e}),{}),pathname:a,pathnameBase:r,pattern:e}}function ug(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return qm(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function dg(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&"/"!==n?null:e.slice(s)||"/"}function pg(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fg(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,s)=>s===t.length-1?e.pathname:e.pathnameBase))}function mg(e,t,s,n=!1){let i;"string"==typeof e?i=Xm(e):(i={...e},$m(!i.pathname||!i.pathname.includes("?"),pg("?","pathname","search",i)),$m(!i.pathname||!i.pathname.includes("#"),pg("#","pathname","hash",i)),$m(!i.search||!i.search.includes("#"),pg("#","search","hash",i)));let a,r=""===e||""===i.pathname,o=r?"/":i.pathname;if(null==o)a=s;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:s,search:n="",hash:i=""}="string"==typeof e?Xm(e):e,a=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)})),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:a,search:bg(n),hash:vg(i)}}(i,a),c=o&&"/"!==o&&o.endsWith("/"),h=(r||"."===o)&&s.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}var gg=e=>e.join("/").replace(/\/\/+/g,"/"),yg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bg=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",vg=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",wg=["POST","PUT","PATCH","DELETE"];new Set(wg);var xg=["GET",...wg];new Set(xg);var kg=yi.createContext(null);kg.displayName="DataRouter";var Ag=yi.createContext(null);Ag.displayName="DataRouterState";var Eg=yi.createContext({isTransitioning:!1});Eg.displayName="ViewTransition",yi.createContext(new Map).displayName="Fetchers",yi.createContext(null).displayName="Await";var Sg=yi.createContext(null);Sg.displayName="Navigation";var Pg=yi.createContext(null);Pg.displayName="Location";var Tg=yi.createContext({outlet:null,matches:[],isDataRoute:!1});Tg.displayName="Route";var Bg=yi.createContext(null);function Cg(){return null!=yi.useContext(Pg)}function Mg(){return $m(Cg(),"useLocation() may be used only in the context of a <Router> component."),yi.useContext(Pg).location}Bg.displayName="RouteError";var Rg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dg(e){yi.useContext(Sg).static||yi.useLayoutEffect(e)}function Ig(){let{isDataRoute:e}=yi.useContext(Tg);return e?function(){let{router:e}=function(){let e=yi.useContext(kg);return $m(e,Gg("useNavigate")),e}(),t=Hg("useNavigate"),s=yi.useRef(!1);return Dg((()=>{s.current=!0})),yi.useCallback((async(n,i={})=>{qm(s.current,Rg),s.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))}),[e,t])}():function(){$m(Cg(),"useNavigate() may be used only in the context of a <Router> component.");let e=yi.useContext(kg),{basename:t,navigator:s}=yi.useContext(Sg),{matches:n}=yi.useContext(Tg),{pathname:i}=Mg(),a=JSON.stringify(fg(n)),r=yi.useRef(!1);return Dg((()=>{r.current=!0})),yi.useCallback(((n,o={})=>{if(qm(r.current,Rg),!r.current)return;if("number"==typeof n)return void s.go(n);let l=mg(n,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:gg([t,l.pathname])),(o.replace?s.replace:s.push)(l,o.state,o)}),[t,s,a,i,e])}()}var _g=yi.createContext(null);function Ng(e,{relative:t}={}){let{matches:s}=yi.useContext(Tg),{pathname:n}=Mg(),i=JSON.stringify(fg(s));return yi.useMemo((()=>mg(e,JSON.parse(i),n,"path"===t)),[e,i,n,t])}function Lg(e,t,s,n){var i;$m(Cg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:r}=yi.useContext(Sg),{matches:o}=yi.useContext(Tg),l=o[o.length-1],c=l?l.params:{},h=l?l.pathname:"/",u=l?l.pathnameBase:"/",d=l&&l.route;{let e=d&&d.path||"";Vg(h,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=Mg();if(t){let e="string"==typeof t?Xm(t):t;$m("/"===u||(null==(i=e.pathname)?void 0:i.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=!r&&s&&s.matches&&s.matches.length>0?s.matches:Ym(e,{pathname:g});qm(d||null!=y,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),qm(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],s=null){if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let n=e,i=null==s?void 0:s.errors;if(null!=i){let e=n.findIndex((e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id])));$m(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let a=!1,r=-1;if(s)for(let o=0;o<n.length;o++){let e=n[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(r=o),e.route.id){let{loaderData:t,errors:i}=s,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||o){a=!0,n=r>=0?n.slice(0,r+1):[n[0]];break}}}return n.reduceRight(((e,o,l)=>{let c,h=!1,u=null,d=null;s&&(c=i&&o.route.id?i[o.route.id]:void 0,u=o.route.errorElement||Og,a&&(r<0&&0===l?(Vg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,d=null):r===l&&(h=!0,d=o.route.hydrateFallbackElement||null)));let p=t.concat(n.slice(0,l+1)),f=()=>{let t;return t=c?u:h?d:o.route.Component?yi.createElement(o.route.Component,null):o.route.element?o.route.element:e,yi.createElement(Ug,{match:o,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?yi.createElement(jg,{location:s.location,revalidation:s.revalidation,component:u,error:c,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:gg([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:gg([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,s);return t&&b?yi.createElement(Pg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Fg(){let e=function(){var e;let t=yi.useContext(Bg),s=function(){let e=yi.useContext(Ag);return $m(e,Gg("useRouteError")),e}(),n=Hg("useRouteError");return void 0!==t?t:null==(e=s.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=yi.createElement(yi.Fragment,null,yi.createElement("p",null," Hey developer "),yi.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",yi.createElement("code",{style:a},"ErrorBoundary")," or"," ",yi.createElement("code",{style:a},"errorElement")," prop on your route.")),yi.createElement(yi.Fragment,null,yi.createElement("h2",null,"Unexpected Application Error!"),yi.createElement("h3",{style:{fontStyle:"italic"}},t),s?yi.createElement("pre",{style:i},s):null,r)}var Og=yi.createElement(Fg,null),jg=class extends yi.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?yi.createElement(Tg.Provider,{value:this.props.routeContext},yi.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ug({routeContext:e,match:t,children:s}){let n=yi.useContext(kg);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),yi.createElement(Tg.Provider,{value:e},s)}function Gg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hg(e){let t=function(e){let t=yi.useContext(Tg);return $m(t,Gg(e)),t}(e),s=t.matches[t.matches.length-1];return $m(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}var zg={};function Vg(e,t,s){t||zg[e]||(zg[e]=!0,qm(!1,s))}function Wg({to:e,replace:t,state:s,relative:n}){$m(Cg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=yi.useContext(Sg);qm(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=yi.useContext(Tg),{pathname:r}=Mg(),o=Ig(),l=mg(e,fg(a),r,"path"===n),c=JSON.stringify(l);return yi.useEffect((()=>{o(JSON.parse(c),{replace:t,state:s,relative:n})}),[o,c,n,t,s]),null}function $g(e){return function(e){let t=yi.useContext(Tg).outlet;return t?yi.createElement(_g.Provider,{value:e},t):t}(e.context)}function qg(e){$m(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kg({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:i,static:a=!1}){$m(!Cg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),o=yi.useMemo((()=>({basename:r,navigator:i,static:a,future:{}})),[r,i,a]);"string"==typeof s&&(s=Xm(s));let{pathname:l="/",search:c="",hash:h="",state:u=null,key:d="default"}=s,p=yi.useMemo((()=>{let e=dg(l,r);return null==e?null:{location:{pathname:e,search:c,hash:h,state:u,key:d},navigationType:n}}),[r,l,c,h,u,d,n]);return qm(null!=p,`<Router basename="${r}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:yi.createElement(Sg.Provider,{value:o},yi.createElement(Pg.Provider,{children:t,value:p}))}function Qg({children:e,location:t}){return Lg(Zg(e),t)}function Zg(e,t=[]){let s=[];return yi.Children.forEach(e,((e,n)=>{if(!yi.isValidElement(e))return;let i=[...t,n];if(e.type===yi.Fragment)return void s.push.apply(s,Zg(e.props.children,i));$m(e.type===qg,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$m(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Zg(e.props.children,i)),s.push(a)})),s}yi.memo((function({routes:e,future:t,state:s}){return Lg(e,void 0,s)}));var Xg="get",Yg="application/x-www-form-urlencoded";function Jg(e){return null!=e&&"string"==typeof e.tagName}var ey=null,ty=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sy(e){return null==e||ty.has(e)?e:(qm(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yg}"`),null)}function ny(e,t){if(!1===e||null==e)throw new Error(t)}function iy(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function ay(e,t,s,n,i,a){let r=(e,t)=>!s[t]||e.route.id!==s[t].route.id,o=(e,t)=>{var n;return s[t].pathname!==e.pathname||(null==(n=s[t].route.path)?void 0:n.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter(((e,t)=>r(e,t)||o(e,t))):"data"===a?t.filter(((t,a)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(r(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=s[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0})):[]}function ry(){let e=yi.useContext(kg);return ny(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oy=yi.createContext(void 0);function ly(){let e=yi.useContext(oy);return ny(e,"You must render this element inside a <HydratedRouter> element"),e}function cy(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function hy({page:e,...t}){let{router:s}=ry(),n=yi.useMemo((()=>Ym(s.routes,e,s.basename)),[s.routes,e,s.basename]);return n?yi.createElement(uy,{page:e,matches:n,...t}):null}function uy({page:e,matches:t,...s}){let n=Mg(),{manifest:i,routeModules:a}=ly(),{basename:r}=ry(),{loaderData:o,matches:l}=function(){let e=yi.useContext(Ag);return ny(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=yi.useMemo((()=>ay(e,t,l,i,n,"data")),[e,t,l,i,n]),h=yi.useMemo((()=>ay(e,t,l,i,n,"assets")),[e,t,l,i,n]),u=yi.useMemo((()=>{if(e===n.pathname+n.search+n.hash)return[];let s=new Set,l=!1;if(t.forEach((e=>{var t;let n=i.routes[e.route.id];n&&n.hasLoader&&(!c.some((t=>t.route.id===e.route.id))&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?l=!0:s.add(e.route.id))})),0===s.size)return[];let h=function(e,t){let s="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===s.pathname?s.pathname="_root.data":t&&"/"===dg(s.pathname,t)?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}(e,r);return l&&s.size>0&&h.searchParams.set("_routes",t.filter((e=>s.has(e.route.id))).map((e=>e.route.id)).join(",")),[h.pathname+h.search]}),[r,o,n,i,c,t,e,a]),d=yi.useMemo((()=>function(e,t,{includeHydrateFallback:s}={}){return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i})).flat(1),[...new Set(n)];var n}(h,i)),[h,i]),p=function(e){let{manifest:t,routeModules:s}=ly(),[n,i]=yi.useState([]);return yi.useEffect((()=>{let n=!1;return async function(e,t,s){return function(e){let t=new Set;return new Set(void 0),e.reduce(((e,s)=>{let n=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}(s));return t.has(n)||(t.add(n),e.push({key:n,link:s})),e}),[])}((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(n,s);return e.links?e.links():[]}return[]})))).flat(1).filter(iy).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,s).then((e=>{n||i(e)})),()=>{n=!0}}),[e,t,s]),n}(h);return yi.createElement(yi.Fragment,null,u.map((e=>yi.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s}))),d.map((e=>yi.createElement("link",{key:e,rel:"modulepreload",href:e,...s}))),p.map((({key:e,link:t})=>yi.createElement("link",{key:e,...t}))))}function dy(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}oy.displayName="FrameworkContext";var py="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{py&&(window.__reactRouterVersion="7.6.0")}catch(RV){}function fy({basename:e,children:t,window:s}){let n=yi.useRef();null==n.current&&(n.current=function(e={}){return function(e,t,s,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,r=i.history,o="POP",l=null,c=h();function h(){return(r.state||{idx:null}).idx}function u(){o="POP";let e=h(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function d(e){return function(e,t=!1){let s="http://localhost";"undefined"!=typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href),$m(s,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:Zm(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=s+n),new URL(n,s)}(e)}null==c&&(c=0,r.replaceState({...r.state,idx:c},""));let p={get action(){return o},get location(){return e(i,r)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Wm,u),l=e,()=>{i.removeEventListener(Wm,u),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let s=Qm(p.location,e,t);c=h()+1;let n=Km(s,c),u=p.createHref(s);try{r.pushState(n,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(u)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let s=Qm(p.location,e,t);c=h();let n=Km(s,c),i=p.createHref(s);r.replaceState(n,"",i),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>r.go(e)};return p}((function(e,t){let{pathname:s,search:n,hash:i}=e.location;return Qm("",{pathname:s,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:Zm(t)}),0,e)}({window:s,v5Compat:!0}));let i=n.current,[a,r]=yi.useState({action:i.action,location:i.location}),o=yi.useCallback((e=>{yi.startTransition((()=>r(e)))}),[r]);return yi.useLayoutEffect((()=>i.listen(o)),[i,o]),yi.createElement(Kg,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var my=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gy=yi.forwardRef((function({onClick:e,discover:t="render",prefetch:s="none",relative:n,reloadDocument:i,replace:a,state:r,target:o,to:l,preventScrollReset:c,viewTransition:h,...u},d){let p,{basename:f}=yi.useContext(Sg),m="string"==typeof l&&my.test(l),g=!1;if("string"==typeof l&&m&&(p=l,py))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),s=dg(t.pathname,f);t.origin===e.origin&&null!=s?l=s+t.search+t.hash:g=!0}catch(RV){qm(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){$m(Cg(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=yi.useContext(Sg),{hash:i,pathname:a,search:r}=Ng(e,{relative:t}),o=a;return"/"!==s&&(o="/"===a?s:gg([s,a])),n.createHref({pathname:o,search:r,hash:i})}(l,{relative:n}),[b,v,w]=function(e,t){let s=yi.useContext(oy),[n,i]=yi.useState(!1),[a,r]=yi.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:u}=t,d=yi.useRef(null);yi.useEffect((()=>{if("render"===e&&r(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{r(e.isIntersecting)}))}),{threshold:.5});return d.current&&e.observe(d.current),()=>{e.disconnect()}}}),[e]),yi.useEffect((()=>{if(n){let e=setTimeout((()=>{r(!0)}),100);return()=>{clearTimeout(e)}}}),[n]);let p=()=>{i(!0)},f=()=>{i(!1),r(!1)};return s?"intent"!==e?[a,d,{}]:[a,d,{onFocus:cy(o,p),onBlur:cy(l,f),onMouseEnter:cy(c,p),onMouseLeave:cy(h,f),onTouchStart:cy(u,p)}]:[!1,d,{}]}(s,u),x=function(e,{target:t,replace:s,state:n,preventScrollReset:i,relative:a,viewTransition:r}={}){let o=Ig(),l=Mg(),c=Ng(e,{relative:a});return yi.useCallback((h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==s?s:Zm(l)===Zm(c);o(e,{replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:r})}}),[l,o,c,s,n,t,e,i,a,r])}(l,{replace:a,state:r,target:o,preventScrollReset:c,relative:n,viewTransition:h}),k=yi.createElement("a",{...u,...w,href:p||y,onClick:g||i?e:function(t){e&&e(t),t.defaultPrevented||x(t)},ref:dy(d,v),target:o,"data-discover":m||"render"!==t?void 0:"true"});return b&&!m?yi.createElement(yi.Fragment,null,k,yi.createElement(hy,{page:y})):k}));function yy(e){let t=yi.useContext(kg);return $m(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}gy.displayName="Link",yi.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:n=!1,style:i,to:a,viewTransition:r,children:o,...l},c){let h=Ng(a,{relative:l.relative}),u=Mg(),d=yi.useContext(Ag),{navigator:p,basename:f}=yi.useContext(Sg),m=null!=d&&function(e,t={}){let s=yi.useContext(Eg);$m(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=yy("useViewTransitionState"),i=Ng(e,{relative:t.relative});if(!s.isTransitioning)return!1;let a=dg(s.currentLocation.pathname,n)||s.currentLocation.pathname,r=dg(s.nextLocation.pathname,n)||s.nextLocation.pathname;return null!=hg(i.pathname,r)||null!=hg(i.pathname,a)}(h)&&!0===r,g=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,y=u.pathname,b=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&f&&(b=dg(b,f)||b);const v="/"!==g&&g.endsWith("/")?g.length-1:g.length;let w,x=y===g||!n&&y.startsWith(g)&&"/"===y.charAt(v),k=null!=b&&(b===g||!n&&b.startsWith(g)&&"/"===b.charAt(g.length)),A={isActive:x,isPending:k,isTransitioning:m},E=x?e:void 0;w="function"==typeof s?s(A):[s,x?"active":null,k?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let S="function"==typeof i?i(A):i;return yi.createElement(gy,{...l,"aria-current":E,className:w,ref:c,style:S,to:a,viewTransition:r},"function"==typeof o?o(A):o)})).displayName="NavLink",yi.forwardRef((({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:i,state:a,method:r=Xg,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:u,...d},p)=>{let f=function(){let{router:e}=yy("useSubmit"),{basename:t}=yi.useContext(Sg),s=Hg("useRouteId");return yi.useCallback((async(n,i={})=>{let{action:a,method:r,encType:o,formData:l,body:c}=function(e,t){let s,n,i,a,r;if(Jg(o=e)&&"form"===o.tagName.toLowerCase()){let r=e.getAttribute("action");n=r?dg(r,t):null,s=e.getAttribute("method")||Xg,i=sy(e.getAttribute("enctype"))||Yg,a=new FormData(e)}else if(function(e){return Jg(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Jg(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let r=e.form;if(null==r)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||r.getAttribute("action");if(n=o?dg(o,t):null,s=e.getAttribute("formmethod")||r.getAttribute("method")||Xg,i=sy(e.getAttribute("formenctype"))||sy(r.getAttribute("enctype"))||Yg,a=new FormData(r,e),!function(){if(null===ey)try{new FormData(document.createElement("form"),0),ey=!1}catch(RV){ey=!0}return ey}()){let{name:t,type:s,value:n}=e;if("image"===s){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(Jg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Xg,n=null,i=Yg,r=e}var o;return a&&"text/plain"===i&&(r=a,a=void 0),{action:n,method:s.toLowerCase(),encType:i,formData:a,body:r}}(n,t);if(!1===i.navigate){let t=i.fetcherKey||vy();await e.fetch(t,s,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||r,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||r,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,s])}(),m=function(e,{relative:t}={}){let{basename:s}=yi.useContext(Sg),n=yi.useContext(Tg);$m(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Ng(e||".",{relative:t})},r=Mg();if(null==e){a.search=r.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let s=e.toString();a.search=s?`?${s}`:""}}return e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),"/"!==s&&(a.pathname="/"===a.pathname?s:gg([s,a.pathname])),Zm(a)}(o,{relative:c}),g="get"===r.toLowerCase()?"get":"post",y="string"==typeof o&&my.test(o);return yi.createElement("form",{ref:p,method:g,action:m,onSubmit:n?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,o=(null==n?void 0:n.getAttribute("formmethod"))||r;f(n||e.currentTarget,{fetcherKey:t,method:o,navigate:s,replace:i,state:a,relative:c,preventScrollReset:h,viewTransition:u})},...d,"data-discover":y||"render"!==e?void 0:"true"})})).displayName="Form";var by=0,vy=()=>`__${String(++by)}__`;function wy(e,t){return function(){return e.apply(t,arguments)}}const{toString:xy}=Object.prototype,{getPrototypeOf:ky}=Object,{iterator:Ay,toStringTag:Ey}=Symbol,Sy=(e=>t=>{const s=xy.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Py=e=>(e=e.toLowerCase(),t=>Sy(t)===e),Ty=e=>t=>typeof t===e,{isArray:By}=Array,Cy=Ty("undefined"),My=Py("ArrayBuffer"),Ry=Ty("string"),Dy=Ty("function"),Iy=Ty("number"),_y=e=>null!==e&&"object"==typeof e,Ny=e=>{if("object"!==Sy(e))return!1;const t=ky(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ey in e||Ay in e)},Ly=Py("Date"),Fy=Py("File"),Oy=Py("Blob"),jy=Py("FileList"),Uy=Py("URLSearchParams"),[Gy,Hy,zy,Vy]=["ReadableStream","Request","Response","Headers"].map(Py);function Wy(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),By(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=s?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let r;for(n=0;n<a;n++)r=i[n],t.call(null,e[r],r,e)}}function $y(e,t){t=t.toLowerCase();const s=Object.keys(e);let n,i=s.length;for(;i-- >0;)if(n=s[i],t===n.toLowerCase())return n;return null}const qy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ky=e=>!Cy(e)&&e!==qy,Qy=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&ky(Uint8Array)),Zy=Py("HTMLFormElement"),Xy=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Yy=Py("RegExp"),Jy=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Wy(s,((s,i)=>{let a;!1!==(a=t(s,i,e))&&(n[i]=a||s)})),Object.defineProperties(e,n)},eb=Py("AsyncFunction"),tb=(sb="function"==typeof setImmediate,nb=Dy(qy.postMessage),sb?setImmediate:nb?(ib=`axios@${Math.random()}`,ab=[],qy.addEventListener("message",(({source:e,data:t})=>{e===qy&&t===ib&&ab.length&&ab.shift()()}),!1),e=>{ab.push(e),qy.postMessage(ib,"*")}):e=>setTimeout(e));var sb,nb,ib,ab;const rb="undefined"!=typeof queueMicrotask?queueMicrotask.bind(qy):"undefined"!=typeof process&&process.nextTick||tb,ob={isArray:By,isArrayBuffer:My,isBuffer:function(e){return null!==e&&!Cy(e)&&null!==e.constructor&&!Cy(e.constructor)&&Dy(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Dy(e.append)&&("formdata"===(t=Sy(e))||"object"===t&&Dy(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&My(e.buffer),t},isString:Ry,isNumber:Iy,isBoolean:e=>!0===e||!1===e,isObject:_y,isPlainObject:Ny,isReadableStream:Gy,isRequest:Hy,isResponse:zy,isHeaders:Vy,isUndefined:Cy,isDate:Ly,isFile:Fy,isBlob:Oy,isRegExp:Yy,isFunction:Dy,isStream:e=>_y(e)&&Dy(e.pipe),isURLSearchParams:Uy,isTypedArray:Qy,isFileList:jy,forEach:Wy,merge:function e(){const{caseless:t}=Ky(this)&&this||{},s={},n=(n,i)=>{const a=t&&$y(s,i)||i;Ny(s[a])&&Ny(n)?s[a]=e(s[a],n):Ny(n)?s[a]=e({},n):By(n)?s[a]=n.slice():s[a]=n};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Wy(arguments[i],n);return s},extend:(e,t,s,{allOwnKeys:n}={})=>(Wy(t,((t,n)=>{s&&Dy(t)?e[n]=wy(t,s):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let i,a,r;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)r=i[a],n&&!n(r,e,t)||o[r]||(t[r]=e[r],o[r]=!0);e=!1!==s&&ky(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:Sy,kindOfTest:Py,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if(By(e))return e;let t=e.length;if(!Iy(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Ay]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:Zy,hasOwnProperty:Xy,hasOwnProp:Xy,reduceDescriptors:Jy,freezeMethods:e=>{Jy(e,((t,s)=>{if(Dy(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];Dy(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))}))},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach((e=>{s[e]=!0}))};return By(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,s){return t.toUpperCase()+s})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$y,global:qy,isContextDefined:Ky,isSpecCompliantForm:function(e){return!!(e&&Dy(e.append)&&"FormData"===e[Ey]&&e[Ay])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(_y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=By(e)?[]:{};return Wy(e,((e,t)=>{const a=s(e,n+1);!Cy(a)&&(i[t]=a)})),t[n]=void 0,i}}return e};return s(e,0)},isAsyncFn:eb,isThenable:e=>e&&(_y(e)||Dy(e))&&Dy(e.then)&&Dy(e.catch),setImmediate:tb,asap:rb,isIterable:e=>null!=e&&Dy(e[Ay])};function lb(e,t,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ob.inherits(lb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ob.toJSONObject(this.config),code:this.code,status:this.status}}});const cb=lb.prototype,hb={};function ub(e){return ob.isPlainObject(e)||ob.isArray(e)}function db(e){return ob.endsWith(e,"[]")?e.slice(0,-2):e}function pb(e,t,s){return e?e.concat(t).map((function(e,t){return e=db(e),!s&&t?"["+e+"]":e})).join(s?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{hb[e]={value:e}})),Object.defineProperties(lb,hb),Object.defineProperty(cb,"isAxiosError",{value:!0}),lb.from=(e,t,s,n,i,a)=>{const r=Object.create(cb);return ob.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),lb.call(r,e.message,t,s,n,i),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};const fb=ob.toFlatObject(ob,{},null,(function(e){return/^is[A-Z]/.test(e)}));function mb(e,t,s){if(!ob.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=ob.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ob.isUndefined(t[e])}))).metaTokens,i=s.visitor||c,a=s.dots,r=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&ob.isSpecCompliantForm(t);if(!ob.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ob.isDate(e))return e.toISOString();if(ob.isBoolean(e))return e.toString();if(!o&&ob.isBlob(e))throw new lb("Blob is not supported. Use a Buffer instead.");return ob.isArrayBuffer(e)||ob.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,i){let o=e;if(e&&!i&&"object"==typeof e)if(ob.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(ob.isArray(e)&&function(e){return ob.isArray(e)&&!e.some(ub)}(e)||(ob.isFileList(e)||ob.endsWith(s,"[]"))&&(o=ob.toArray(e)))return s=db(s),o.forEach((function(e,n){!ob.isUndefined(e)&&null!==e&&t.append(!0===r?pb([s],n,a):null===r?s:s+"[]",l(e))})),!1;return!!ub(e)||(t.append(pb(i,s,a),l(e)),!1)}const h=[],u=Object.assign(fb,{defaultVisitor:c,convertValue:l,isVisitable:ub});if(!ob.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!ob.isUndefined(s)){if(-1!==h.indexOf(s))throw Error("Circular reference detected in "+n.join("."));h.push(s),ob.forEach(s,(function(s,a){!0===(!(ob.isUndefined(s)||null===s)&&i.call(t,s,ob.isString(a)?a.trim():a,n,u))&&e(s,n?n.concat(a):[a])})),h.pop()}}(e),t}function gb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function yb(e,t){this._pairs=[],e&&mb(e,this,t)}const bb=yb.prototype;function vb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wb(e,t,s){if(!t)return e;const n=s&&s.encode||vb;ob.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let a;if(a=i?i(t,s):ob.isURLSearchParams(t)?t.toString():new yb(t,s).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}bb.append=function(e,t){this._pairs.push([e,t])},bb.toString=function(e){const t=e?function(t){return e.call(this,t,gb)}:gb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class xb{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ob.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const kb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ab={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:yb,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Eb="undefined"!=typeof window&&"undefined"!=typeof document,Sb="object"==typeof navigator&&navigator||void 0,Pb=Eb&&(!Sb||["ReactNative","NativeScript","NS"].indexOf(Sb.product)<0),Tb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Bb=Eb&&window.location.href||"http://localhost",Cb={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Eb,hasStandardBrowserEnv:Pb,hasStandardBrowserWebWorkerEnv:Tb,navigator:Sb,origin:Bb},Symbol.toStringTag,{value:"Module"})),...Ab};function Mb(e){function t(e,s,n,i){let a=e[i++];if("__proto__"===a)return!0;const r=Number.isFinite(+a),o=i>=e.length;return a=!a&&ob.isArray(n)?n.length:a,o?(ob.hasOwnProp(n,a)?n[a]=[n[a],s]:n[a]=s,!r):(n[a]&&ob.isObject(n[a])||(n[a]=[]),t(e,s,n[a],i)&&ob.isArray(n[a])&&(n[a]=function(e){const t={},s=Object.keys(e);let n;const i=s.length;let a;for(n=0;n<i;n++)a=s[n],t[a]=e[a];return t}(n[a])),!r)}if(ob.isFormData(e)&&ob.isFunction(e.entries)){const s={};return ob.forEachEntry(e,((e,n)=>{t(function(e){return ob.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,s,0)})),s}return null}const Rb={transitional:kb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,i=ob.isObject(e);if(i&&ob.isHTMLForm(e)&&(e=new FormData(e)),ob.isFormData(e))return n?JSON.stringify(Mb(e)):e;if(ob.isArrayBuffer(e)||ob.isBuffer(e)||ob.isStream(e)||ob.isFile(e)||ob.isBlob(e)||ob.isReadableStream(e))return e;if(ob.isArrayBufferView(e))return e.buffer;if(ob.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return mb(e,new Cb.classes.URLSearchParams,Object.assign({visitor:function(e,t,s,n){return Cb.isNode&&ob.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=ob.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return mb(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e){if(ob.isString(e))try{return(0,JSON.parse)(e),ob.trim(e)}catch(RV){if("SyntaxError"!==RV.name)throw RV}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Rb.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(ob.isResponse(e)||ob.isReadableStream(e))return e;if(e&&ob.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(RV){if(s){if("SyntaxError"===RV.name)throw lb.from(RV,lb.ERR_BAD_RESPONSE,this,null,this.response);throw RV}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cb.classes.FormData,Blob:Cb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ob.forEach(["delete","get","head","post","put","patch"],(e=>{Rb.headers[e]={}}));const Db=ob.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ib=Symbol("internals");function _b(e){return e&&String(e).trim().toLowerCase()}function Nb(e){return!1===e||null==e?e:ob.isArray(e)?e.map(Nb):String(e)}function Lb(e,t,s,n,i){return ob.isFunction(n)?n.call(this,t,s):(i&&(t=s),ob.isString(t)?ob.isString(n)?-1!==t.indexOf(n):ob.isRegExp(n)?n.test(t):void 0:void 0)}let Fb=class{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function i(e,t,s){const i=_b(t);if(!i)throw new Error("header name must be a non-empty string");const a=ob.findKey(n,i);(!a||void 0===n[a]||!0===s||void 0===s&&!1!==n[a])&&(n[a||t]=Nb(e))}const a=(e,t)=>ob.forEach(e,((e,s)=>i(e,s,t)));if(ob.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(ob.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let s,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),s=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!s||t[s]&&Db[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)})),t})(e),t);else if(ob.isObject(e)&&ob.isIterable(e)){let s,n,i={};for(const t of e){if(!ob.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(s=i[n])?ob.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}a(i,t)}else null!=e&&i(t,e,s);return this}get(e,t){if(e=_b(e)){const s=ob.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(ob.isFunction(t))return t.call(this,e,s);if(ob.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_b(e)){const s=ob.findKey(this,e);return!(!s||void 0===this[s]||t&&!Lb(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function i(e){if(e=_b(e)){const i=ob.findKey(s,e);!i||t&&!Lb(0,s[i],i,t)||(delete s[i],n=!0)}}return ob.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const i=t[s];e&&!Lb(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,s={};return ob.forEach(this,((n,i)=>{const a=ob.findKey(s,i);if(a)return t[a]=Nb(n),void delete t[i];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,s)=>t.toUpperCase()+s))}(i):String(i).trim();r!==i&&delete t[i],t[r]=Nb(n),s[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ob.forEach(this,((s,n)=>{null!=s&&!1!==s&&(t[n]=e&&ob.isArray(s)?s.join(", "):s)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach((e=>s.set(e))),s}static accessor(e){const t=(this[Ib]=this[Ib]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=_b(e);t[n]||(function(e,t){const s=ob.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+s,{value:function(e,s,i){return this[n].call(this,t,e,s,i)},configurable:!0})}))}(s,e),t[n]=!0)}return ob.isArray(e)?e.forEach(n):n(e),this}};function Ob(e,t){const s=this||Rb,n=t||s,i=Fb.from(n.headers);let a=n.data;return ob.forEach(e,(function(e){a=e.call(s,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function jb(e){return!(!e||!e.__CANCEL__)}function Ub(e,t,s){lb.call(this,null==e?"canceled":e,lb.ERR_CANCELED,t,s),this.name="CanceledError"}function Gb(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new lb("Request failed with status code "+s.status,[lb.ERR_BAD_REQUEST,lb.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}Fb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ob.reduceDescriptors(Fb.prototype,(({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}})),ob.freezeMethods(Fb),ob.inherits(Ub,lb,{__CANCEL__:!0});const Hb=(e,t,s=3)=>{let n=0;const i=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let i,a=0,r=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[r];i||(i=l),s[a]=o,n[a]=l;let h=r,u=0;for(;h!==a;)u+=s[h++],h%=e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}}(50,250);return function(e,t){let s,n,i=0,a=1e3/t;const r=(t,a=Date.now())=>{i=a,s=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=a?r(e,t):(s=e,n||(n=setTimeout((()=>{n=null,r(s)}),a-o)))},()=>s&&r(s)]}((s=>{const a=s.loaded,r=s.lengthComputable?s.total:void 0,o=a-n,l=i(o);n=a,e({loaded:a,total:r,progress:r?a/r:void 0,bytes:o,rate:l||void 0,estimated:l&&r&&a<=r?(r-a)/l:void 0,event:s,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),s)},zb=(e,t)=>{const s=null!=e;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Vb=e=>(...t)=>ob.asap((()=>e(...t))),Wb=Cb.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Cb.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Cb.origin),Cb.navigator&&/(msie|trident)/i.test(Cb.navigator.userAgent)):()=>!0,$b=Cb.hasStandardBrowserEnv?{write(e,t,s,n,i,a){const r=[e+"="+encodeURIComponent(t)];ob.isNumber(s)&&r.push("expires="+new Date(s).toGMTString()),ob.isString(n)&&r.push("path="+n),ob.isString(i)&&r.push("domain="+i),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function qb(e,t,s){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kb=e=>e instanceof Fb?{...e}:e;function Qb(e,t){t=t||{};const s={};function n(e,t,s,n){return ob.isPlainObject(e)&&ob.isPlainObject(t)?ob.merge.call({caseless:n},e,t):ob.isPlainObject(t)?ob.merge({},t):ob.isArray(t)?t.slice():t}function i(e,t,s,i){return ob.isUndefined(t)?ob.isUndefined(e)?void 0:n(void 0,e,0,i):n(e,t,0,i)}function a(e,t){if(!ob.isUndefined(t))return n(void 0,t)}function r(e,t){return ob.isUndefined(t)?ob.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(s,i,a){return a in t?n(s,i):a in e?n(void 0,s):void 0}const l={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(e,t,s)=>i(Kb(e),Kb(t),0,!0)};return ob.forEach(Object.keys(Object.assign({},e,t)),(function(n){const a=l[n]||i,r=a(e[n],t[n],n);ob.isUndefined(r)&&a!==o||(s[n]=r)})),s}const Zb=e=>{const t=Qb({},e);let s,{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:r,headers:o,auth:l}=t;if(t.headers=o=Fb.from(o),t.url=wb(qb(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ob.isFormData(n))if(Cb.hasStandardBrowserEnv||Cb.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(s=o.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Cb.hasStandardBrowserEnv&&(i&&ob.isFunction(i)&&(i=i(t)),i||!1!==i&&Wb(t.url))){const e=a&&r&&$b.read(r);e&&o.set(a,e)}return t},Xb="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,s){const n=Zb(e);let i=n.data;const a=Fb.from(n.headers).normalize();let r,o,l,c,h,{responseType:u,onUploadProgress:d,onDownloadProgress:p}=n;function f(){c&&c(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(r),n.signal&&n.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=Fb.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Gb((function(e){t(e),f()}),(function(e){s(e),f()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(s(new lb("Request aborted",lb.ECONNABORTED,e,m)),m=null)},m.onerror=function(){s(new lb("Network Error",lb.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||kb;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),s(new lb(t,i.clarifyTimeoutError?lb.ETIMEDOUT:lb.ECONNABORTED,e,m)),m=null},void 0===i&&a.setContentType(null),"setRequestHeader"in m&&ob.forEach(a.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),ob.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),u&&"json"!==u&&(m.responseType=n.responseType),p&&([l,h]=Hb(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([o,c]=Hb(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(r=t=>{m&&(s(!t||t.type?new Ub(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(r),n.signal&&(n.signal.aborted?r():n.signal.addEventListener("abort",r)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===Cb.protocols.indexOf(y)?s(new lb("Unsupported protocol "+y+":",lb.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Yb=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,n=new AbortController;const i=function(e){if(!s){s=!0,r();const t=e instanceof Error?e:this.reason;n.abort(t instanceof lb?t:new Ub(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,i(new lb(`timeout ${t} of ms exceeded`,lb.ETIMEDOUT))}),t);const r=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=n;return o.unsubscribe=()=>ob.asap(r),o}},Jb=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let n,i=0;for(;i<s;)n=i+t,yield e.slice(i,n),i=n},ev=(e,t,s,n)=>{const i=async function*(e,t){for await(const s of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}}(e))yield*Jb(s,t)}(e,t);let a,r=0,o=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return o(),void e.close();let a=n.byteLength;if(s){let e=r+=a;s(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},tv="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,sv=tv&&"function"==typeof ReadableStream,nv=tv&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),iv=(e,...t)=>{try{return!!e(...t)}catch(RV){return!1}},av=sv&&iv((()=>{let e=!1;const t=new Request(Cb.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),rv=sv&&iv((()=>ob.isReadableStream(new Response("").body))),ov={stream:rv&&(e=>e.body)};var lv;tv&&(lv=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!ov[e]&&(ov[e]=ob.isFunction(lv[e])?t=>t[e]():(t,s)=>{throw new lb(`Response type '${e}' is not supported`,lb.ERR_NOT_SUPPORT,s)})})));const cv={http:null,xhr:Xb,fetch:tv&&(async e=>{let{url:t,method:s,data:n,signal:i,cancelToken:a,timeout:r,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:h,withCredentials:u="same-origin",fetchOptions:d}=Zb(e);c=c?(c+"").toLowerCase():"text";let p,f=Yb([i,a&&a.toAbortSignal()],r);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&av&&"get"!==s&&"head"!==s&&0!==(g=await(async(e,t)=>{const s=ob.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(ob.isBlob(e))return e.size;if(ob.isSpecCompliantForm(e)){const t=new Request(Cb.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ob.isArrayBufferView(e)||ob.isArrayBuffer(e)?e.byteLength:(ob.isURLSearchParams(e)&&(e+=""),ob.isString(e)?(await nv(e)).byteLength:void 0)})(t):s})(h,n))){let e,s=new Request(t,{method:"POST",body:n,duplex:"half"});if(ob.isFormData(n)&&(e=s.headers.get("content-type"))&&h.setContentType(e),s.body){const[e,t]=zb(g,Hb(Vb(l)));n=ev(s.body,65536,e,t)}}ob.isString(u)||(u=u?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:i?u:void 0});let a=await fetch(p,d);const r=rv&&("stream"===c||"response"===c);if(rv&&(o||r&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=ob.toFiniteNumber(a.headers.get("content-length")),[s,n]=o&&zb(t,Hb(Vb(o),!0))||[];a=new Response(ev(a.body,65536,s,(()=>{n&&n(),m&&m()})),e)}c=c||"text";let y=await ov[ob.findKey(ov,c)||"text"](a,e);return!r&&m&&m(),await new Promise(((t,s)=>{Gb(t,s,{data:y,headers:Fb.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:p})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new lb("Network Error",lb.ERR_NETWORK,e,p),{cause:y.cause||y});throw lb.from(y,y&&y.code,e,p)}})};ob.forEach(cv,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(RV){}Object.defineProperty(e,"adapterName",{value:t})}}));const hv=e=>`- ${e}`,uv=e=>ob.isFunction(e)||null===e||!1===e,dv=e=>{e=ob.isArray(e)?e:[e];const{length:t}=e;let s,n;const i={};for(let a=0;a<t;a++){let t;if(s=e[a],n=s,!uv(s)&&(n=cv[(t=String(s)).toLowerCase()],void 0===n))throw new lb(`Unknown adapter '${t}'`);if(n)break;i[t||"#"+a]=n}if(!n){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new lb("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(hv).join("\n"):" "+hv(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function pv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ub(null,e)}function fv(e){return pv(e),e.headers=Fb.from(e.headers),e.data=Ob.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dv(e.adapter||Rb.adapter)(e).then((function(t){return pv(e),t.data=Ob.call(e,e.transformResponse,t),t.headers=Fb.from(t.headers),t}),(function(t){return jb(t)||(pv(e),t&&t.response&&(t.response.data=Ob.call(e,e.transformResponse,t.response),t.response.headers=Fb.from(t.response.headers))),Promise.reject(t)}))}const mv="1.10.0",gv={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{gv[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));const yv={};gv.transitional=function(e,t,s){function n(e,t){return"[Axios v"+mv+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,i,a)=>{if(!1===e)throw new lb(n(i," has been removed"+(t?" in "+t:"")),lb.ERR_DEPRECATED);return t&&!yv[i]&&(yv[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,i,a)}},gv.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const bv={assertOptions:function(e,t,s){if("object"!=typeof e)throw new lb("options must be an object",lb.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],r=t[a];if(r){const t=e[a],s=void 0===t||r(t,a,e);if(!0!==s)throw new lb("option "+a+" must be "+s,lb.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new lb("Unknown option "+a,lb.ERR_BAD_OPTION)}},validators:gv},vv=bv.validators;let wv=class{constructor(e){this.defaults=e||{},this.interceptors={request:new xb,response:new xb}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(RV){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Qb(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:i}=t;void 0!==s&&bv.assertOptions(s,{silentJSONParsing:vv.transitional(vv.boolean),forcedJSONParsing:vv.transitional(vv.boolean),clarifyTimeoutError:vv.transitional(vv.boolean)},!1),null!=n&&(ob.isFunction(n)?t.paramsSerializer={serialize:n}:bv.assertOptions(n,{encode:vv.function,serialize:vv.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bv.assertOptions(t,{baseUrl:vv.spelling("baseURL"),withXsrfToken:vv.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&ob.merge(i.common,i[t.method]);i&&ob.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Fb.concat(a,i);const r=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,u=0;if(!o){const e=[fv.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,l),h=e.length,c=Promise.resolve(t);u<h;)c=c.then(e[u++],e[u++]);return c}h=r.length;let d=t;for(u=0;u<h;){const e=r[u++],t=r[u++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=fv.call(this,d)}catch(p){return Promise.reject(p)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(e){return wb(qb((e=Qb(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};ob.forEach(["delete","get","head","options"],(function(e){wv.prototype[e]=function(t,s){return this.request(Qb(s||{},{method:e,url:t,data:(s||{}).data}))}})),ob.forEach(["post","put","patch"],(function(e){function t(t){return function(s,n,i){return this.request(Qb(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}wv.prototype[e]=t(),wv.prototype[e+"Form"]=t(!0)}));const xv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xv).forEach((([e,t])=>{xv[t]=e}));const kv=function e(t){const s=new wv(t),n=wy(wv.prototype.request,s);return ob.extend(n,wv.prototype,s,{allOwnKeys:!0}),ob.extend(n,s,null,{allOwnKeys:!0}),n.create=function(s){return e(Qb(t,s))},n}(Rb);kv.Axios=wv,kv.CanceledError=Ub,kv.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const s=this;this.promise.then((e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{s.subscribe(e),t=e})).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e((function(e,n,i){s.reason||(s.reason=new Ub(e,n,i),t(s.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},kv.isCancel=jb,kv.VERSION=mv,kv.toFormData=mb,kv.AxiosError=lb,kv.Cancel=kv.CanceledError,kv.all=function(e){return Promise.all(e)},kv.spread=function(e){return function(t){return e.apply(null,t)}},kv.isAxiosError=function(e){return ob.isObject(e)&&!0===e.isAxiosError},kv.mergeConfig=Qb,kv.AxiosHeaders=Fb,kv.formToJSON=e=>Mb(ob.isHTMLForm(e)?new FormData(e):e),kv.getAdapter=dv,kv.HttpStatusCode=xv,kv.default=kv;const{Axios:Av,AxiosError:Ev,CanceledError:Sv,isCancel:Pv,CancelToken:Tv,VERSION:Bv,all:Cv,Cancel:Mv,isAxiosError:Rv,spread:Dv,toFormData:Iv,AxiosHeaders:_v,HttpStatusCode:Nv,formToJSON:Lv,getAdapter:Fv,mergeConfig:Ov}=kv,jv=kv.create({baseURL:"https://insomnus-backend-production-8a4c3b46c656.herokuapp.com/api",withCredentials:!0});let Uv=!1,Gv=[];const Hv=(e,t=null)=>{Gv.forEach((s=>{e?s.reject(e):s.resolve(t)})),Gv=[]};jv.interceptors.request.use((e=>{var t;const s=null==(t=e.url)?void 0:t.includes("/auth/"),n=localStorage.getItem("access_token");return n&&!s&&(e.headers.Authorization=`Bearer ${n}`),e})),jv.interceptors.response.use((e=>e),(async e=>{var t;const s=e.config;if(401===(null==(t=e.response)?void 0:t.status)&&!s._retry){if(Uv)return new Promise(((e,t)=>{Gv.push({resolve:e,reject:t})})).then((e=>(s.headers.Authorization=`Bearer ${e}`,jv(s)))).catch((e=>Promise.reject(e)));s._retry=!0,Uv=!0;try{const{accessToken:e}=await zv();return localStorage.setItem("access_token",e),Hv(null,e),jv(s)}catch(n){return Hv(n,null),localStorage.removeItem("access_token"),window.location.href="/login",Promise.reject(n)}finally{Uv=!1}}return Promise.reject(e)}));const zv=async()=>(await jv.post("/auth/refresh")).data,Vv={somnia:{chainId:parseInt("50312"),chainIdHex:`0x${parseInt("50312").toString(16)}`,chainName:"Somnia Shannon Testnet",rpcUrls:["https://dream-rpc.somnia.network"],blockExplorerUrls:["https://shannon-explorer.somnia.network/"],nativeCurrency:{name:"STT",symbol:"STT",decimals:parseInt("18")}}},Wv=(e="somnia")=>Vv[e],$v=()=>Wv(),qv={isCorrectNetwork:async()=>{if(void 0===window.ethereum)return!1;try{return await window.ethereum.request({method:"eth_chainId"})===$v().chainIdHex}catch(e){return console.error("Error checking network:",e),!1}},switchToCorrectNetwork:async()=>{if(void 0===window.ethereum)throw new Error("MetaMask is not installed");const e=$v();try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainIdHex}]}),!0}catch(t){if(4902!==t.code)throw console.error("Error switching network:",t),new Error("Failed to switch to Somnia testnet");try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainIdHex,chainName:e.chainName,rpcUrls:e.rpcUrls,blockExplorerUrls:e.blockExplorerUrls,nativeCurrency:e.nativeCurrency}]}),!0}catch(s){throw console.error("Error adding network:",s),new Error("Failed to add Somnia testnet to MetaMask")}}},getCurrentConfig:$v,getConfig:Wv},Kv=yi.createContext(),Qv=({children:e})=>{const[t,s]=yi.useState(null),[n,i]=yi.useState(!0),[a,r]=yi.useState("checking");yi.useEffect((()=>{const e=localStorage.getItem("access_token"),t=localStorage.getItem("user_data");e&&t&&s({...JSON.parse(t),token:e}),i(!1),o()}),[]),yi.useEffect((()=>{if(window.ethereum){const e=()=>{o()},t=e=>{0===e.length?l():o()};return window.ethereum.on("chainChanged",e),window.ethereum.on("accountsChanged",t),()=>{window.ethereum.removeListener("chainChanged",e),window.ethereum.removeListener("accountsChanged",t)}}}),[]);const o=async()=>{try{const e=await qv.isCorrectNetwork();r(e?"correct":"wrong")}catch(e){console.error("Error checking network:",e),r("error")}},l=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),s(null)};return n?Pi.jsx("div",{children:"Loading..."}):Pi.jsx(Kv.Provider,{value:{user:t,login:async({walletAddress:e,signature:t,message:n})=>{try{const i=await(async({walletAddress:e,signature:t,message:s})=>(await jv.post("/auth/connect",{walletAddress:e,signature:t,message:s})).data)({walletAddress:e,signature:t,message:n});if(console.log(i.data.token),(null==i?void 0:i.data.token)&&(null==i?void 0:i.data.user))return localStorage.setItem("access_token",i.data.token),localStorage.setItem("user_data",JSON.stringify(i.data.user)),s({...i.data.user,token:i.data.token}),i.data;throw new Error("Invalid login response")}catch(i){throw console.error("Login error:",i),i}},logout:l,isLoading:n,networkStatus:a,checkNetworkStatus:o,switchToCorrectNetwork:qv.switchToCorrectNetwork},children:e})},Zv=()=>yi.useContext(Kv),Xv=yi.createContext(),Yv=()=>yi.useContext(Xv)||{},Jv=({children:e})=>{const[t,s]=yi.useState({}),n={gameControls:t,setGameControls:s};return Pi.jsx(Xv.Provider,{value:n,children:e})};function ew(e,t,s){const n=t.split("|").map((e=>e.trim()));for(let a=0;a<n.length;a++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${s}`,i.value=e,i}async function tw(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,s,n)=>(e[t[n]]=s,e)),{})}function sw(e,t,s){for(let n in t){let i=t[n];const a=s?s[n]:null;a&&ew(i,a,n),Object.defineProperty(e,n,{enumerable:!0,value:i,writable:!1})}}function nw(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(nw).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let s="0x";for(let n=0;n<e.length;n++)s+=t[e[n]>>4],s+=t[15&e[n]];return s}if("object"==typeof e&&"function"==typeof e.toJSON)return nw(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${nw(t)}: ${nw(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function iw(e,t){return e&&e.code===t}function aw(e){return iw(e,"CALL_EXCEPTION")}function rw(e,t,s){let n,i=e;{const n=[];if(s){if("message"in s||"code"in s||"name"in s)throw new Error(`value will overwrite populated values: ${nw(s)}`);for(const e in s){if("shortMessage"===e)continue;const t=s[e];n.push(e+"="+nw(t))}}n.push(`code=${t}`),n.push("version=6.13.5"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(e);break;default:n=new Error(e)}return sw(n,{code:t}),s&&Object.assign(n,s),null==n.shortMessage&&sw(n,{shortMessage:i}),n}function ow(e,t,s,n){if(!e)throw rw(t,s,n)}function lw(e,t,s,n){ow(e,t,"INVALID_ARGUMENT",{argument:s,value:n})}function cw(e,t,s){null==s&&(s=""),s&&(s=": "+s),ow(e>=t,"missing argument"+s,"MISSING_ARGUMENT",{count:e,expectedCount:t}),ow(e<=t,"too many arguments"+s,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}function hw(e,t,s){if(null==s&&(s=""),e!==t){let e=s,t="new";s&&(e+=".",t+=" "+s),ow(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function uw(e,t,s){if(e instanceof Uint8Array)return s?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let s=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(s,s+2),16),s+=2;return t}lw(!1,"invalid BytesLike value",t||"value",e)}function dw(e,t){return uw(e,t,!1)}function pw(e,t){return uw(e,t,!0)}function fw(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}function mw(e){return fw(e,!0)||e instanceof Uint8Array}["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(s){}return e}),[]);const gw="0123456789abcdef";function yw(e){const t=dw(e);let s="0x";for(let n=0;n<t.length;n++){const e=t[n];s+=gw[(240&e)>>4]+gw[15&e]}return s}function bw(e){return"0x"+e.map((e=>yw(e).substring(2))).join("")}function vw(e){return fw(e,!0)?(e.length-2)/2:dw(e).length}function ww(e,t,s){const n=dw(e);return null!=s&&s>n.length&&ow(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s}),yw(n.slice(null==t?0:t,null==s?n.length:s))}function xw(e,t,s){const n=dw(e);ow(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),s?i.set(n,t-n.length):i.set(n,0),yw(i)}function kw(e,t){return xw(e,t,!0)}const Aw=BigInt(0),Ew=BigInt(1),Sw=9007199254740991;function Pw(e,t){let s=Bw(e,"value");const n=BigInt(Dw(t,"width")),i=Ew<<n-Ew;return s<Aw?(s=-s,ow(s<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~s&(Ew<<n)-Ew)+Ew):(ow(s<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),s)}function Tw(e,t){const s=Cw(e,"value"),n=BigInt(Dw(t,"bits"));return s&(Ew<<n)-Ew}function Bw(e,t){switch(typeof e){case"bigint":return e;case"number":return lw(Number.isInteger(e),"underflow",t||"value",e),lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(RV){lw(!1,`invalid BigNumberish string: ${RV.message}`,t||"value",e)}}lw(!1,"invalid BigNumberish value",t||"value",e)}function Cw(e,t){const s=Bw(e,t);return ow(s>=Aw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),s}const Mw="0123456789abcdef";function Rw(e){if(e instanceof Uint8Array){let t="0x0";for(const s of e)t+=Mw[s>>4],t+=Mw[15&s];return BigInt(t)}return Bw(e)}function Dw(e,t){switch(typeof e){case"bigint":return lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),Number(e);case"number":return lw(Number.isInteger(e),"underflow",t||"value",e),lw(e>=-9007199254740991&&e<=Sw,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return Dw(BigInt(e),t)}catch(RV){lw(!1,`invalid numeric string: ${RV.message}`,t||"value",e)}}lw(!1,"invalid numeric value",t||"value",e)}function Iw(e,t){let s=Cw(e,"value").toString(16);if(null==t)s.length%2&&(s="0"+s);else{const n=Dw(t,"width");for(ow(2*n>=s.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});s.length<2*n;)s="0"+s}return"0x"+s}function _w(e){const t=Cw(e,"value");if(t===Aw)return new Uint8Array([]);let s=t.toString(16);s.length%2&&(s="0"+s);const n=new Uint8Array(s.length/2);for(let i=0;i<n.length;i++){const e=2*i;n[i]=parseInt(s.substring(e,e+2),16)}return n}function Nw(e){let t=yw(mw(e)?e:_w(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const Lw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Fw=BigInt(58);class Ow{constructor(t,s,n){En(this,"filter"),En(this,"emitter"),Tn(this,e),Bn(this,e,s),sw(this,{emitter:t,filter:n})}async removeListener(){null!=Pn(this,e)&&await this.emitter.off(this.filter,Pn(this,e))}}function jw(e,t,s,n,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<s.length&&s[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?s.length-t-1:0}e=new WeakMap;const Uw=Object.freeze({error:function(e,t,s,n,i){lw(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",s)},ignore:jw,replace:function(e,t,s,n,i){return"OVERLONG"===e?(lw("number"==typeof i,"invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),jw(e,t,s))}});function Gw(e,t){lw("string"==typeof e,"invalid string value","str",e);let s=[];for(let n=0;n<e.length;n++){const t=e.charCodeAt(n);if(t<128)s.push(t);else if(t<2048)s.push(t>>6|192),s.push(63&t|128);else if(55296==(64512&t)){n++;const i=e.charCodeAt(n);lw(n<e.length&&56320==(64512&i),"invalid surrogate pair","str",e);const a=65536+((1023&t)<<10)+(1023&i);s.push(a>>18|240),s.push(a>>12&63|128),s.push(a>>6&63|128),s.push(63&a|128)}else s.push(t>>12|224),s.push(t>>6&63|128),s.push(63&t|128)}return new Uint8Array(s)}function Hw(e,t){return s=function(e,t){null==t&&(t=Uw.error);const s=dw(e,"bytes"),n=[];let i=0;for(;i<s.length;){const e=s[i++];if(!(e>>7)){n.push(e);continue}let a=null,r=null;if(192==(224&e))a=1,r=127;else if(224==(240&e))a=2,r=2047;else{if(240!=(248&e)){i+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",i-1,s,n);continue}a=3,r=65535}if(i-1+a>=s.length){i+=t("OVERRUN",i-1,s,n);continue}let o=e&(1<<8-a-1)-1;for(let l=0;l<a;l++){let e=s[i];if(128!=(192&e)){i+=t("MISSING_CONTINUE",i,s,n),o=null;break}o=o<<6|63&e,i++}null!==o&&(o>1114111?i+=t("OUT_OF_RANGE",i-1-a,s,n,o):o>=55296&&o<=57343?i+=t("UTF16_SURROGATE",i-1-a,s,n,o):o<=r?i+=t("OVERLONG",i-1-a,s,n,o):n.push(o))}return n}(e,t),s.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("");var s}function zw(e){return async function(e,t){ow(null==t||!t.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();ow("http"===s||"https"===s,`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ow("https"===s||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=null;const i=new AbortController,a=setTimeout((()=>{n=rw("request timeout","TIMEOUT"),i.abort()}),e.timeout);t&&t.addListener((()=>{n=rw("request cancelled","CANCELLED"),i.abort()}));const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:i.signal};let o;try{o=await fetch(e.url,r)}catch(u){if(clearTimeout(a),n)throw n;throw u}clearTimeout(a);const l={};o.headers.forEach(((e,t)=>{l[t.toLowerCase()]=e}));const c=await o.arrayBuffer(),h=null==c?null:new Uint8Array(c);return{statusCode:o.status,statusMessage:o.statusText,headers:l,body:h}}}let Vw=zw();const Ww=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),$w=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let qw=!1;async function Kw(e,t){try{const t=e.match(Ww);if(!t)throw new Error("invalid data");return new nx(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return dw(t)}(t[3]):Gw(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(s){return new nx(599,"BAD REQUEST (invalid data: URI)",{},null,new tx(e))}}function Qw(e){return async function(t,s){try{const s=t.match($w);if(!s)throw new Error("invalid link");return new tx(`${e}${s[2]}`)}catch(n){return new nx(599,"BAD REQUEST (invalid IPFS URI)",{},null,new tx(t))}}}const Zw={data:Kw,ipfs:Qw("https://gateway.ipfs.io/ipfs/")},Xw=new WeakMap;class Yw{constructor(e){Tn(this,t),Tn(this,s),Bn(this,t,[]),Bn(this,s,!1),Xw.set(e,(()=>{if(!Pn(this,s)){Bn(this,s,!0);for(const e of Pn(this,t))setTimeout((()=>{e()}),0);Bn(this,t,[])}}))}addListener(e){ow(!Pn(this,s),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Pn(this,t).push(e)}get cancelled(){return Pn(this,s)}checkSignal(){ow(!this.cancelled,"cancelled","CANCELLED",{})}}function Jw(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}t=new WeakMap,s=new WeakMap;const ex=class e{constructor(e){Tn(this,b),Tn(this,n),Tn(this,i),Tn(this,a),Tn(this,r),Tn(this,o),Tn(this,l),Tn(this,c),Tn(this,h),Tn(this,u),Tn(this,d),Tn(this,p),Tn(this,f),Tn(this,m),Tn(this,g),Tn(this,y),Bn(this,l,String(e)),Bn(this,n,!1),Bn(this,i,!0),Bn(this,a,{}),Bn(this,r,""),Bn(this,o,3e5),Bn(this,g,{slotInterval:250,maxAttempts:12}),Bn(this,y,null)}get url(){return Pn(this,l)}set url(e){Bn(this,l,String(e))}get body(){return null==Pn(this,c)?null:new Uint8Array(Pn(this,c))}set body(e){if(null==e)Bn(this,c,void 0),Bn(this,h,void 0);else if("string"==typeof e)Bn(this,c,Gw(e)),Bn(this,h,"text/plain");else if(e instanceof Uint8Array)Bn(this,c,e),Bn(this,h,"application/octet-stream");else{if("object"!=typeof e)throw new Error("invalid body");Bn(this,c,Gw(JSON.stringify(e))),Bn(this,h,"application/json")}}hasBody(){return null!=Pn(this,c)}get method(){return Pn(this,r)?Pn(this,r):this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),Bn(this,r,String(e).toUpperCase())}get headers(){const e=Object.assign({},Pn(this,a));return Pn(this,u)&&(e.authorization=`Basic ${function(e){const t=dw(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}(Gw(Pn(this,u)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&Pn(this,h)&&(e["content-type"]=Pn(this,h)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){Pn(this,a)[String(e).toLowerCase()]=String(t)}clearHeaders(){Bn(this,a,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const n=t[s++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return Pn(this,u)||null}setCredentials(e,t){lw(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),Bn(this,u,`${e}:${t}`)}get allowGzip(){return Pn(this,i)}set allowGzip(e){Bn(this,i,!!e)}get allowInsecureAuthentication(){return!!Pn(this,n)}set allowInsecureAuthentication(e){Bn(this,n,!!e)}get timeout(){return Pn(this,o)}set timeout(e){lw(e>=0,"timeout must be non-zero","timeout",e),Bn(this,o,e)}get preflightFunc(){return Pn(this,d)||null}set preflightFunc(e){Bn(this,d,e)}get processFunc(){return Pn(this,p)||null}set processFunc(e){Bn(this,p,e)}get retryFunc(){return Pn(this,f)||null}set retryFunc(e){Bn(this,f,e)}get getUrlFunc(){return Pn(this,y)||Vw}set getUrlFunc(e){Bn(this,y,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${Pn(this,c)?yw(Pn(this,c)):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(Pn(this,g).slotInterval=e.slotInterval),null!=e.maxAttempts&&(Pn(this,g).maxAttempts=e.maxAttempts)}send(){return ow(null==Pn(this,m),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),Bn(this,m,new Yw(this)),Cn(this,b,v).call(this,0,ix()+this.timeout,0,this,new nx(0,"",{},null,this))}cancel(){ow(null!=Pn(this,m),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Xw.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(t){const s=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();ow("GET"===this.method&&("https"!==s||"http"!==n)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new e(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,Bn(i,a,Object.assign({},Pn(this,a))),Pn(this,c)&&Bn(i,c,new Uint8Array(Pn(this,c))),Bn(i,h,Pn(this,h)),i}clone(){const t=new e(this.url);return Bn(t,r,Pn(this,r)),Pn(this,c)&&Bn(t,c,Pn(this,c)),Bn(t,h,Pn(this,h)),Bn(t,a,Object.assign({},Pn(this,a))),Bn(t,u,Pn(this,u)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),Bn(t,d,Pn(this,d)),Bn(t,p,Pn(this,p)),Bn(t,f,Pn(this,f)),Bn(t,g,Object.assign({},Pn(this,g))),Bn(t,y,Pn(this,y)),t}static lockConfig(){qw=!0}static getGateway(e){return Zw[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(qw)throw new Error("gateways locked");Zw[e]=t}static registerGetUrl(e){if(qw)throw new Error("gateways locked");Vw=e}static createGetUrlFunc(e){return zw()}static createDataGateway(){return Kw}static createIpfsGatewayFunc(e){return Qw(e)}};n=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakSet,v=async function(e,t,s,n,i){var a,r,o;if(e>=Pn(this,g).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ow(ix()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),s>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(s);let l=this.clone();const c=(l.url.split(":")[0]||"").toLowerCase();if(c in Zw){const e=await Zw[c](l.url,Jw(Pn(n,m)));if(e instanceof nx){let t=e;if(this.processFunc){Jw(Pn(n,m));try{t=await this.processFunc(l,t)}catch(d){null!=d.throttle&&"number"==typeof d.stall||t.makeServerError("error in post-processing function",d).assertOk()}}return t}l=e}this.preflightFunc&&(l=await this.preflightFunc(l));const h=await this.getUrlFunc(l,Jw(Pn(n,m)));let u=new nx(h.statusCode,h.statusMessage,h.headers,h.body,n);if(301===u.statusCode||302===u.statusCode){try{const s=u.headers.location||"";return Cn(a=l.redirect(s),b,v).call(a,e+1,t,0,n,u)}catch(d){}return u}if(429===u.statusCode&&(null==this.retryFunc||await this.retryFunc(l,u,e))){const s=u.headers["retry-after"];let i=Pn(this,g).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof s&&s.match(/^[1-9][0-9]*$/)&&(i=parseInt(s)),Cn(r=l.clone(),b,v).call(r,e+1,t,i,n,u)}if(this.processFunc){Jw(Pn(n,m));try{u=await this.processFunc(l,u)}catch(d){null!=d.throttle&&"number"==typeof d.stall||u.makeServerError("error in post-processing function",d).assertOk();let s=Pn(this,g).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(s=d.stall),Cn(o=l.clone(),b,v).call(o,e+1,t,s,n,u)}}return u};let tx=ex;const sx=class e{constructor(e,t,s,n,i){Tn(this,w),Tn(this,x),Tn(this,k),Tn(this,A),Tn(this,E),Tn(this,S),Bn(this,w,e),Bn(this,x,t),Bn(this,k,Object.keys(s).reduce(((e,t)=>(e[t.toLowerCase()]=String(s[t]),e)),{})),Bn(this,A,null==n?null:new Uint8Array(n)),Bn(this,E,i||null),Bn(this,S,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${Pn(this,A)?yw(Pn(this,A)):"null"}>`}get statusCode(){return Pn(this,w)}get statusMessage(){return Pn(this,x)}get headers(){return Object.assign({},Pn(this,k))}get body(){return null==Pn(this,A)?null:new Uint8Array(Pn(this,A))}get bodyText(){try{return null==Pn(this,A)?"":Hw(Pn(this,A))}catch(e){ow(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){ow(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let s=0;return{next:()=>{if(s<t.length){const n=t[s++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,s){let n;n=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const i=new e(599,n,this.headers,this.body,Pn(this,E)||void 0);return Bn(i,S,{message:t,error:s}),i}throwThrottleError(e,t){null==t?t=-1:lw(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const s=new Error(e||"throttling requests");throw sw(s,{stall:t,throttle:!0}),s}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=Pn(this,A)}get request(){return Pn(this,E)}ok(){return""===Pn(this,S).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=Pn(this,S);""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let s=null;this.request&&(s=this.request.url);let n=null;try{Pn(this,A)&&(n=Hw(Pn(this,A)))}catch(RV){}ow(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:s,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};w=new WeakMap,x=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,S=new WeakMap;let nx=sx;function ix(){return(new Date).getTime()}function ax(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function rx(e,t,s){let n=0;for(let i=0;i<s;i++)n=256*n+e[t+i];return n}function ox(e,t,s,n){const i=[];for(;s<t+1+n;){const a=lx(e,s);i.push(a.result),ow((s+=a.consumed)<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:i}}function lx(e,t){ow(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const s=t=>{ow(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const n=e[t]-247;s(t+1+n);const i=rx(e,t+1,n);return s(t+1+n+i),ox(e,t,t+1+n,n+i)}if(e[t]>=192){const n=e[t]-192;return s(t+1+n),ox(e,t,t+1,n)}if(e[t]>=184){const n=e[t]-183;s(t+1+n);const i=rx(e,t+1,n);return s(t+1+n+i),{consumed:1+n+i,result:yw(e.slice(t+1+n,t+1+n+i))}}if(e[t]>=128){const n=e[t]-128;return s(t+1+n),{consumed:1+n,result:yw(e.slice(t+1,t+1+n))}}return{consumed:1,result:ax(e[t])}}function cx(e){const t=dw(e,"data"),s=lx(t,0);return lw(s.consumed===t.length,"unexpected junk after rlp payload","data",e),s.result}function hx(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function ux(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(ux(e))})),t.length<=55)return t.unshift(192+t.length),t;const s=hx(t.length);return s.unshift(247+s.length),s.concat(t)}const t=Array.prototype.slice.call(dw(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const s=hx(t.length);return s.unshift(183+s.length),s.concat(t)}const dx="0123456789abcdef";function px(e){let t="0x";for(const s of ux(e))t+=dx[s>>4],t+=dx[15&s];return t}const fx=32,mx=new Uint8Array(fx),gx=["then"],yx={},bx=new WeakMap;function vx(e){return bx.get(e)}function wx(e,t){bx.set(e,t)}function xx(e,t){const s=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw s.error=t,s}function kx(e,t,s){return e.indexOf(null)>=0?t.map(((e,t)=>e instanceof Ax?kx(vx(e),e,s):e)):e.reduce(((e,n,i)=>{let a=t.getValue(n);return n in e||(s&&a instanceof Ax&&(a=kx(vx(a),a,s)),e[n]=a),e}),{})}P=new WeakMap;let Ax=class e extends Array{constructor(...e){const t=e[0];let s=e[1],n=(e[2]||[]).slice(),i=!0;t!==yx&&(s=e,n=[],i=!1),super(s.length),Tn(this,P),s.forEach(((e,t)=>{this[t]=e}));const a=n.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(wx(this,Object.freeze(s.map(((e,t)=>{const s=n[t];return null!=s&&1===a.get(s)?s:null})))),Bn(this,P,[]),null==Pn(this,P)&&Pn(this,P),!i)return;Object.freeze(this);const r=new Proxy(this,{get:(e,t,s)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const s=Dw(t,"%index");if(s<0||s>=this.length)throw new RangeError("out of result range");const n=e[s];return n instanceof Error&&xx(`index ${s}`,n),n}if(gx.indexOf(t)>=0)return Reflect.get(e,t,s);const n=e[t];if(n instanceof Function)return function(...t){return n.apply(this===s?e:this,t)};if(!(t in e))return e.getValue.apply(this===s?e:this,[t])}return Reflect.get(e,t,s)}});return wx(r,vx(this)),r}toArray(t){const s=[];return this.forEach(((n,i)=>{n instanceof Error&&xx(`index ${i}`,n),t&&n instanceof e&&(n=n.toArray(t)),s.push(n)})),s}toObject(e){const t=vx(this);return t.reduce(((s,n,i)=>(ow(null!=n,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),kx(t,this,e))),{})}slice(t,s){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==s&&(s=this.length),s<0&&(s+=this.length)<0&&(s=0),s>this.length&&(s=this.length);const n=vx(this),i=[],a=[];for(let e=t;e<s;e++)i.push(this[e]),a.push(n[e]);return new e(yx,i,a)}filter(t,s){const n=vx(this),i=[],a=[];for(let e=0;e<this.length;e++){const r=this[e];r instanceof Error&&xx(`index ${e}`,r),t.call(s,r,e,this)&&(i.push(r),a.push(n[e]))}return new e(yx,i,a)}map(e,t){const s=[];for(let n=0;n<this.length;n++){const i=this[n];i instanceof Error&&xx(`index ${n}`,i),s.push(e.call(t,i,n,this))}return s}getValue(e){const t=vx(this).indexOf(e);if(-1===t)return;const s=this[t];return s instanceof Error&&xx(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(t,s){return new e(yx,t,s)}};function Ex(e){let t=_w(e);return ow(t.length<=fx,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:fx,offset:t.length}),t.length!==fx&&(t=pw(bw([mx.slice(t.length%fx),t]))),t}class Sx{constructor(e,t,s,n){En(this,"name"),En(this,"type"),En(this,"localName"),En(this,"dynamic"),sw(this,{name:e,type:t,localName:s,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){lw(!1,e,this.localName,t)}}class Px{constructor(){Tn(this,C),Tn(this,T),Tn(this,B),Bn(this,T,[]),Bn(this,B,0)}get data(){return bw(Pn(this,T))}get length(){return Pn(this,B)}appendWriter(e){return Cn(this,C,M).call(this,pw(e.data))}writeBytes(e){let t=pw(e);const s=t.length%fx;return s&&(t=pw(bw([t,mx.slice(s)]))),Cn(this,C,M).call(this,t)}writeValue(e){return Cn(this,C,M).call(this,Ex(e))}writeUpdatableValue(){const e=Pn(this,T).length;return Pn(this,T).push(mx),Bn(this,B,Pn(this,B)+fx),t=>{Pn(this,T)[e]=Ex(t)}}}T=new WeakMap,B=new WeakMap,C=new WeakSet,M=function(e){return Pn(this,T).push(e),Bn(this,B,Pn(this,B)+e.length),e.length},R=new WeakMap,D=new WeakMap,I=new WeakMap,_=new WeakMap,N=new WeakMap,L=new WeakSet,F=function(e){var t;if(Pn(this,_))return Cn(t=Pn(this,_),L,F).call(t,e);Bn(this,I,Pn(this,I)+e),ow(Pn(this,N)<1||Pn(this,I)<=Pn(this,N)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${Pn(this,N)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:pw(Pn(this,R)),offset:Pn(this,D),length:e,info:{bytesRead:Pn(this,I),dataLength:this.dataLength}})},O=function(e,t,s){let n=Math.ceil(t/fx)*fx;return Pn(this,D)+n>Pn(this,R).length&&(this.allowLoose&&s&&Pn(this,D)+t<=Pn(this,R).length?n=t:ow(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:pw(Pn(this,R)),length:Pn(this,R).length,offset:Pn(this,D)+n})),Pn(this,R).slice(Pn(this,D),Pn(this,D)+n)};let Tx=class e{constructor(e,t,s){Tn(this,L),En(this,"allowLoose"),Tn(this,R),Tn(this,D),Tn(this,I),Tn(this,_),Tn(this,N),sw(this,{allowLoose:!!t}),Bn(this,R,pw(e)),Bn(this,I,0),Bn(this,_,null),Bn(this,N,null!=s?s:1024),Bn(this,D,0)}get data(){return yw(Pn(this,R))}get dataLength(){return Pn(this,R).length}get consumed(){return Pn(this,D)}get bytes(){return new Uint8Array(Pn(this,R))}subReader(t){const s=new e(Pn(this,R).slice(Pn(this,D)+t),this.allowLoose,Pn(this,N));return Bn(s,_,this),s}readBytes(e,t){let s=Cn(this,L,O).call(this,0,e,!!t);return Cn(this,L,F).call(this,e),Bn(this,D,Pn(this,D)+s.length),s.slice(0,e)}readValue(){return Rw(this.readBytes(fx))}readIndex(){return Dw(Rw(this.readBytes(fx)))}};function Bx(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Cx(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Mx(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Rx(e,t){Cx(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const Dx="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Ix=e=>e instanceof Uint8Array,_x=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Nx=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Lx(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Ix(e))throw new Error("expected Uint8Array, got "+typeof e);return e}let Fx=class{clone(){return this._cloneInto()}};function Ox(e){const t=t=>e().update(Lx(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}function jx(e=32){if(Dx&&"function"==typeof Dx.getRandomValues)return Dx.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let Ux=class extends Fx{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Bx(e.outputLen),Bx(e.blockLen)}(e);const s=Lx(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(s.length>n?e.create().update(s).digest():s);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Mx(this),this.iHash.update(e),this}digestInto(e){Mx(this),Cx(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:n,destroyed:i,blockLen:a,outputLen:r}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=r,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Gx=(e,t,s)=>new Ux(e,t).update(s).digest();Gx.create=(e,t)=>new Ux(e,t);class Hx extends Fx{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_x(this.buffer)}update(e){Mx(this);const{view:t,buffer:s,blockLen:n}=this,i=(e=Lx(e)).length;for(let a=0;a<i;){const r=Math.min(n-this.pos,i-a);if(r!==n)s.set(e.subarray(a,a+r),this.pos),this.pos+=r,a+=r,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=_x(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mx(this),Rx(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(s,0),a=0);for(let h=a;h<n;h++)t[h]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const i=BigInt(32),a=BigInt(4294967295),r=Number(s>>i&a),o=Number(s&a),l=n?4:0,c=n?0:4;e.setUint32(t+l,r,n),e.setUint32(t+c,o,n)}(s,n-8,BigInt(8*this.length),i),this.process(s,0);const r=_x(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)r.setUint32(4*h,c[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:i,destroyed:a,pos:r}=this;return e.length=n,e.pos=r,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(s),e}}const zx=(e,t,s)=>e&t^~e&s,Vx=(e,t,s)=>e&t^e&s^t&s,Wx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$x=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qx=new Uint32Array(64);let Kx=class extends Hx{constructor(){super(64,32,8,!1),this.A=0|$x[0],this.B=0|$x[1],this.C=0|$x[2],this.D=0|$x[3],this.E=0|$x[4],this.F=0|$x[5],this.G=0|$x[6],this.H=0|$x[7]}get(){const{A:e,B:t,C:s,D:n,E:i,F:a,G:r,H:o}=this;return[e,t,s,n,i,a,r,o]}set(e,t,s,n,i,a,r,o){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|r,this.H=0|o}process(e,t){for(let h=0;h<16;h++,t+=4)qx[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=qx[h-15],t=qx[h-2],s=Nx(e,7)^Nx(e,18)^e>>>3,n=Nx(t,17)^Nx(t,19)^t>>>10;qx[h]=n+qx[h-7]+s+qx[h-16]|0}let{A:s,B:n,C:i,D:a,E:r,F:o,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(Nx(r,6)^Nx(r,11)^Nx(r,25))+zx(r,o,l)+Wx[h]+qx[h]|0,t=(Nx(s,2)^Nx(s,13)^Nx(s,22))+Vx(s,n,i)|0;c=l,l=o,o=r,r=a+e|0,a=i,i=n,n=s,s=e+t|0}s=s+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,r=r+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(s,n,i,a,r,o,l,c)}roundClean(){qx.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Qx=Ox((()=>new Kx)),Zx=BigInt(2**32-1),Xx=BigInt(32);function Yx(e,t=!1){return t?{h:Number(e&Zx),l:Number(e>>Xx&Zx)}:{h:0|Number(e>>Xx&Zx),l:0|Number(e&Zx)}}function Jx(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:r}=Yx(e[i],t);[s[i],n[i]]=[a,r]}return[s,n]}const ek=(e,t,s)=>e<<s|t>>>32-s,tk=(e,t,s)=>t<<s|e>>>32-s,sk=(e,t,s)=>t<<s-32|e>>>64-s,nk=(e,t,s)=>e<<s-32|t>>>64-s,ik={fromBig:Yx,split:Jx,toBig:(e,t)=>BigInt(e>>>0)<<Xx|BigInt(t>>>0),shrSH:(e,t,s)=>e>>>s,shrSL:(e,t,s)=>e<<32-s|t>>>s,rotrSH:(e,t,s)=>e>>>s|t<<32-s,rotrSL:(e,t,s)=>e<<32-s|t>>>s,rotrBH:(e,t,s)=>e<<64-s|t>>>s-32,rotrBL:(e,t,s)=>e>>>s-32|t<<64-s,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:ek,rotlSL:tk,rotlBH:sk,rotlBL:nk,add:function(e,t,s,n){const i=(t>>>0)+(n>>>0);return{h:e+s+(i/2**32|0)|0,l:0|i}},add3L:(e,t,s)=>(e>>>0)+(t>>>0)+(s>>>0),add3H:(e,t,s,n)=>t+s+n+(e/2**32|0)|0,add4L:(e,t,s,n)=>(e>>>0)+(t>>>0)+(s>>>0)+(n>>>0),add4H:(e,t,s,n,i)=>t+s+n+i+(e/2**32|0)|0,add5H:(e,t,s,n,i,a)=>t+s+n+i+a+(e/2**32|0)|0,add5L:(e,t,s,n,i)=>(e>>>0)+(t>>>0)+(s>>>0)+(n>>>0)+(i>>>0)},[ak,rk]=(()=>ik.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),ok=new Uint32Array(80),lk=new Uint32Array(80);class ck extends Hx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:s,Bl:n,Ch:i,Cl:a,Dh:r,Dl:o,Eh:l,El:c,Fh:h,Fl:u,Gh:d,Gl:p,Hh:f,Hl:m}=this;return[e,t,s,n,i,a,r,o,l,c,h,u,d,p,f,m]}set(e,t,s,n,i,a,r,o,l,c,h,u,d,p,f,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|s,this.Bl=0|n,this.Ch=0|i,this.Cl=0|a,this.Dh=0|r,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|h,this.Fl=0|u,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|m}process(e,t){for(let b=0;b<16;b++,t+=4)ok[b]=e.getUint32(t),lk[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|ok[b-15],t=0|lk[b-15],s=ik.rotrSH(e,t,1)^ik.rotrSH(e,t,8)^ik.shrSH(e,t,7),n=ik.rotrSL(e,t,1)^ik.rotrSL(e,t,8)^ik.shrSL(e,t,7),i=0|ok[b-2],a=0|lk[b-2],r=ik.rotrSH(i,a,19)^ik.rotrBH(i,a,61)^ik.shrSH(i,a,6),o=ik.rotrSL(i,a,19)^ik.rotrBL(i,a,61)^ik.shrSL(i,a,6),l=ik.add4L(n,o,lk[b-7],lk[b-16]),c=ik.add4H(l,s,r,ok[b-7],ok[b-16]);ok[b]=0|c,lk[b]=0|l}let{Ah:s,Al:n,Bh:i,Bl:a,Ch:r,Cl:o,Dh:l,Dl:c,Eh:h,El:u,Fh:d,Fl:p,Gh:f,Gl:m,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const e=ik.rotrSH(h,u,14)^ik.rotrSH(h,u,18)^ik.rotrBH(h,u,41),t=ik.rotrSL(h,u,14)^ik.rotrSL(h,u,18)^ik.rotrBL(h,u,41),v=h&d^~h&f,w=u&p^~u&m,x=ik.add5L(y,t,w,rk[b],lk[b]),k=ik.add5H(x,g,e,v,ak[b],ok[b]),A=0|x,E=ik.rotrSH(s,n,28)^ik.rotrBH(s,n,34)^ik.rotrBH(s,n,39),S=ik.rotrSL(s,n,28)^ik.rotrBL(s,n,34)^ik.rotrBL(s,n,39),P=s&i^s&r^i&r,T=n&a^n&o^a&o;g=0|f,y=0|m,f=0|d,m=0|p,d=0|h,p=0|u,({h:h,l:u}=ik.add(0|l,0|c,0|k,0|A)),l=0|r,c=0|o,r=0|i,o=0|a,i=0|s,a=0|n;const B=ik.add3L(A,S,T);s=ik.add3H(B,k,E,P),n=0|B}({h:s,l:n}=ik.add(0|this.Ah,0|this.Al,0|s,0|n)),({h:i,l:a}=ik.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:r,l:o}=ik.add(0|this.Ch,0|this.Cl,0|r,0|o)),({h:l,l:c}=ik.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:h,l:u}=ik.add(0|this.Eh,0|this.El,0|h,0|u)),({h:d,l:p}=ik.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:m}=ik.add(0|this.Gh,0|this.Gl,0|f,0|m)),({h:g,l:y}=ik.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(s,n,i,a,r,o,l,c,h,u,d,p,f,m,g,y)}roundClean(){ok.fill(0),lk.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hk=Ox((()=>new ck)),uk=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();uk.crypto||uk.msCrypto;const[dk,pk,fk]=[[],[],[]],mk=BigInt(0),gk=BigInt(1),yk=BigInt(2),bk=BigInt(7),vk=BigInt(256),wk=BigInt(113);for(let DV=0,IV=gk,_V=1,NV=0;DV<24;DV++){[_V,NV]=[NV,(2*_V+3*NV)%5],dk.push(2*(5*NV+_V)),pk.push((DV+1)*(DV+2)/2%64);let e=mk;for(let t=0;t<7;t++)IV=(IV<<gk^(IV>>bk)*wk)%vk,IV&yk&&(e^=gk<<(gk<<BigInt(t))-gk);fk.push(e)}const[xk,kk]=Jx(fk,!0),Ak=(e,t,s)=>s>32?sk(e,t,s):ek(e,t,s),Ek=(e,t,s)=>s>32?nk(e,t,s):tk(e,t,s);let Sk=class e extends Fx{constructor(e,t,s,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Bx(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,a=s[i],r=s[i+1],o=Ak(a,r,1)^s[t],l=Ek(a,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],i=e[3];for(let s=0;s<24;s++){const n=pk[s],a=Ak(t,i,n),r=Ek(t,i,n),o=dk[s];t=e[o],i=e[o+1],e[o]=a,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=xk[n],e[1]^=kk[n]}s.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Mx(this);const{blockLen:t,state:s}=this,n=(e=Lx(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Mx(this,!1),Cx(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,i=e.length;n<i;){this.posOut>=s&&this.keccak();const a=Math.min(s-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Rx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:s,suffix:n,outputLen:i,rounds:a,enableXOF:r}=this;return t||(t=new e(s,n,i,r,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=n,t.outputLen=i,t.enableXOF=r,t.destroyed=this.destroyed,t}};const Pk=(()=>Ox((()=>new Sk(136,1,32))))();let Tk=!1;const Bk=function(e){return Pk(e)};let Ck=Bk;function Mk(e){const t=dw(e,"data");return yw(Ck(t))}Mk._=Bk,Mk.lock=function(){Tk=!0},Mk.register=function(e){if(Tk)throw new TypeError("keccak256 is locked");Ck=e},Object.freeze(Mk);const Rk=function(e){return function(e){switch(e){case"sha256":return Qx.create();case"sha512":return hk.create()}lw(!1,"invalid hashing algorithm name","algorithm",e)}("sha256").update(e).digest()};let Dk=Rk,Ik=!1;function _k(e){const t=dw(e,"data");return yw(Dk(t))}_k._=Rk,_k.lock=function(){Ik=!0},_k.register=function(e){if(Ik)throw new Error("sha256 is locked");Dk=e},Object.freeze(_k),Object.freeze(_k);const Nk=BigInt(0),Lk=BigInt(1),Fk=BigInt(2),Ok=e=>e instanceof Uint8Array,jk=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Uk(e){if(!Ok(e))throw new Error("Uint8Array expected");let t="";for(let s=0;s<e.length;s++)t+=jk[e[s]];return t}function Gk(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Hk(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function zk(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(t/2);for(let n=0;n<s.length;n++){const t=2*n,i=e.slice(t,t+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");s[n]=a}return s}function Vk(e){return Hk(Uk(e))}function Wk(e){if(!Ok(e))throw new Error("Uint8Array expected");return Hk(Uk(Uint8Array.from(e).reverse()))}function $k(e,t){return zk(e.toString(16).padStart(2*t,"0"))}function qk(e,t){return $k(e,t).reverse()}function Kk(e,t,s){let n;if("string"==typeof t)try{n=zk(t)}catch(RV){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${RV}`)}else{if(!Ok(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof s&&i!==s)throw new Error(`${e} expected ${s} bytes, got ${i}`);return n}function Qk(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let s=0;return e.forEach((e=>{if(!Ok(e))throw new Error("Uint8Array expected");t.set(e,s),s+=e.length})),t}const Zk=e=>(Fk<<BigInt(e-1))-Lk,Xk=e=>new Uint8Array(e),Yk=e=>Uint8Array.from(e);function Jk(e,t,s){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof s)throw new Error("hmacFn must be a function");let n=Xk(e),i=Xk(e),a=0;const r=()=>{n.fill(1),i.fill(0),a=0},o=(...e)=>s(i,n,...e),l=(e=Xk())=>{i=o(Yk([0]),e),n=o(),0!==e.length&&(i=o(Yk([1]),e),n=o())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const s=[];for(;e<t;){n=o();const t=n.slice();s.push(t),e+=n.length}return Qk(...s)};return(e,t)=>{let s;for(r(),l(e);!(s=t(c()));)l();return r(),s}}const eA={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tA(e,t,s={}){const n=(t,s,n)=>{const i=eA[s];if("function"!=typeof i)throw new Error(`Invalid validator "${s}", expected function`);const a=e[t];if(!(n&&void 0===a||i(a,e)))throw new Error(`Invalid param ${String(t)}=${a} (${typeof a}), expected ${s}`)};for(const[i,a]of Object.entries(t))n(i,a,!1);for(const[i,a]of Object.entries(s))n(i,a,!0);return e}const sA=Object.freeze(Object.defineProperty({__proto__:null,bitGet:function(e,t){return e>>BigInt(t)&Lk},bitLen:function(e){let t;for(t=0;e>Nk;e>>=Lk,t+=1);return t},bitMask:Zk,bitSet:(e,t,s)=>e|(s?Lk:Nk)<<BigInt(t),bytesToHex:Uk,bytesToNumberBE:Vk,bytesToNumberLE:Wk,concatBytes:Qk,createHmacDrbg:Jk,ensureBytes:Kk,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},hexToBytes:zk,hexToNumber:Hk,numberToBytesBE:$k,numberToBytesLE:qk,numberToHexUnpadded:Gk,numberToVarBytesBE:function(e){return zk(Gk(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:tA},Symbol.toStringTag,{value:"Module"})),nA=BigInt(0),iA=BigInt(1),aA=BigInt(2),rA=BigInt(3),oA=BigInt(4),lA=BigInt(5),cA=BigInt(8);function hA(e,t){const s=e%t;return s>=nA?s:t+s}function uA(e,t,s){if(s<=nA||t<nA)throw new Error("Expected power/modulo > 0");if(s===iA)return nA;let n=iA;for(;t>nA;)t&iA&&(n=n*e%s),e=e*e%s,t>>=iA;return n}function dA(e,t,s){let n=e;for(;t-- >nA;)n*=n,n%=s;return n}function pA(e,t){if(e===nA||t<=nA)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let s=hA(e,t),n=t,i=nA,a=iA;for(;s!==nA;){const e=n%s,t=i-a*(n/s);n=s,s=e,i=a,a=t}if(n!==iA)throw new Error("invert: does not exist");return hA(i,t)}BigInt(9),BigInt(16);const fA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mA(e,t){const s=void 0!==t?t:e.toString(2).length;return{nBitLength:s,nByteLength:Math.ceil(s/8)}}function gA(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function yA(e){const t=gA(e);return t+Math.ceil(t/2)}const bA=BigInt(0),vA=BigInt(1);function wA(e){return tA(e.Fp,fA.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),tA(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mA(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:xA,hexToBytes:kA}=sA,AA={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=AA;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const s=e[1],n=e.subarray(2,s+2);if(!s||n.length!==s)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xA(n),l:e.subarray(s+2)}},toSig(e){const{Err:t}=AA,s="string"==typeof e?kA(e):e;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let n=s.length;if(n<2||48!=s[0])throw new t("Invalid signature tag");if(s[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:a}=AA._parseInt(s.subarray(2)),{d:r,l:o}=AA._parseInt(a);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:r}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,s=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(s(e.s)),i=t(s(e.r)),a=n.length/2,r=i.length/2,o=s(a),l=s(r);return`30${s(r+a+4)}02${l}${i}02${o}${n}`}},EA=BigInt(0),SA=BigInt(1);BigInt(2);const PA=BigInt(3);function TA(e){const t=function(e){const t=wA(e);return tA(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:s,n:n}=t,i=s.BYTES+1,a=2*s.BYTES+1;function r(e){return hA(e,n)}function o(e){return pA(e,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:u}=function(e){const t=function(e){const t=wA(e);tA(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:n,a:i}=t;if(s){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof s||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Qk(Uint8Array.from([4]),s.toBytes(i.x),s.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function a(e){const{a:n,b:i}=t,a=s.sqr(e),r=s.mul(a,e);return s.add(s.add(r,s.mul(e,n)),i)}if(!s.eql(s.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function r(e){return"bigint"==typeof e&&EA<e&&e<t.n}function o(e){if(!r(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:s,nByteLength:n,wrapPrivateKey:i,n:a}=t;if(s&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=Uk(e)),"string"!=typeof e||!s.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let r;try{r="bigint"==typeof e?e:Vk(Kk("private key",e,n))}catch(l){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(r=hA(r,a)),o(r),r}const c=new Map;function h(e){if(!(e instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==n||!s.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!s.isValid(t)||!s.isValid(n))throw new Error("invalid affine point");if(e instanceof u)throw new Error("projective point not allowed");const i=e=>s.eql(e,s.ZERO);return i(t)&&i(n)?u.ZERO:new u(t,n,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}static fromHex(e){const t=u.fromAffine(i(Kk("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return u.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!s.isValid(e)||!s.isValid(n))throw new Error("bad point: x or y not FE");const i=s.sqr(n),r=a(e);if(!s.eql(i,r))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:n,pz:i}=this,{px:a,py:r,pz:o}=e,l=s.eql(s.mul(t,o),s.mul(a,i)),c=s.eql(s.mul(n,o),s.mul(r,i));return l&&c}negate(){return new u(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=s.mul(n,PA),{px:a,py:r,pz:o}=this;let l=s.ZERO,c=s.ZERO,h=s.ZERO,d=s.mul(a,a),p=s.mul(r,r),f=s.mul(o,o),m=s.mul(a,r);return m=s.add(m,m),h=s.mul(a,o),h=s.add(h,h),l=s.mul(e,h),c=s.mul(i,f),c=s.add(l,c),l=s.sub(p,c),c=s.add(p,c),c=s.mul(l,c),l=s.mul(m,l),h=s.mul(i,h),f=s.mul(e,f),m=s.sub(d,f),m=s.mul(e,m),m=s.add(m,h),h=s.add(d,d),d=s.add(h,d),d=s.add(d,f),d=s.mul(d,m),c=s.add(c,d),f=s.mul(r,o),f=s.add(f,f),d=s.mul(f,m),l=s.sub(l,d),h=s.mul(f,p),h=s.add(h,h),h=s.add(h,h),new u(l,c,h)}add(e){h(e);const{px:n,py:i,pz:a}=this,{px:r,py:o,pz:l}=e;let c=s.ZERO,d=s.ZERO,p=s.ZERO;const f=t.a,m=s.mul(t.b,PA);let g=s.mul(n,r),y=s.mul(i,o),b=s.mul(a,l),v=s.add(n,i),w=s.add(r,o);v=s.mul(v,w),w=s.add(g,y),v=s.sub(v,w),w=s.add(n,a);let x=s.add(r,l);return w=s.mul(w,x),x=s.add(g,b),w=s.sub(w,x),x=s.add(i,a),c=s.add(o,l),x=s.mul(x,c),c=s.add(y,b),x=s.sub(x,c),p=s.mul(f,w),c=s.mul(m,b),p=s.add(c,p),c=s.sub(y,p),p=s.add(y,p),d=s.mul(c,p),y=s.add(g,g),y=s.add(y,g),b=s.mul(f,b),w=s.mul(m,w),y=s.add(y,b),b=s.sub(g,b),b=s.mul(f,b),w=s.add(w,b),g=s.mul(y,w),d=s.add(d,g),g=s.mul(x,w),c=s.mul(v,c),c=s.sub(c,g),g=s.mul(v,y),p=s.mul(x,p),p=s.add(p,g),new u(c,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(u.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,(e=>{const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}))}multiplyUnsafe(e){const n=u.ZERO;if(e===EA)return n;if(o(e),e===SA)return this;const{endo:i}=t;if(!i)return p.unsafeLadder(this,e);let{k1neg:a,k1:r,k2neg:l,k2:c}=i.splitScalar(e),h=n,d=n,f=this;for(;r>EA||c>EA;)r&SA&&(h=h.add(f)),c&SA&&(d=d.add(f)),f=f.double(),r>>=SA,c>>=SA;return a&&(h=h.negate()),l&&(d=d.negate()),d=new u(s.mul(d.px,i.beta),d.py,d.pz),h.add(d)}multiply(e){o(e);let n,i,a=e;const{endo:r}=t;if(r){const{k1neg:e,k1:t,k2neg:o,k2:l}=r.splitScalar(a);let{p:c,f:h}=this.wNAF(t),{p:d,f:f}=this.wNAF(l);c=p.constTimeNegate(e,c),d=p.constTimeNegate(o,d),d=new u(s.mul(d.px,r.beta),d.py,d.pz),n=c.add(d),i=h.add(f)}else{const{p:e,f:t}=this.wNAF(a);n=e,i=t}return u.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,s){const n=u.BASE,i=(e,t)=>t!==EA&&t!==SA&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,s));return a.is0()?void 0:a}toAffine(e){const{px:t,py:n,pz:i}=this,a=this.is0();null==e&&(e=a?s.ONE:s.inv(i));const r=s.mul(t,e),o=s.mul(n,e),l=s.mul(i,e);if(a)return{x:s.ZERO,y:s.ZERO};if(!s.eql(l,s.ONE))throw new Error("invZ was invalid");return{x:r,y:o}}isTorsionFree(){const{h:e,isTorsionFree:s}=t;if(e===SA)return!0;if(s)return s(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:s}=t;return e===SA?this:s?s(u,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(u,this,e)}toHex(e=!0){return Uk(this.toRawBytes(e))}}u.BASE=new u(t.Gx,t.Gy,s.ONE),u.ZERO=new u(s.ZERO,s.ONE,s.ZERO);const d=t.nBitLength,p=function(e,t){const s=(e,t)=>{const s=t.negate();return e?s:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:s,unsafeLadder(t,s){let n=e.ZERO,i=t;for(;s>bA;)s&vA&&(n=n.add(i)),i=i.double(),s>>=vA;return n},precomputeWindow(e,t){const{windows:s,windowSize:i}=n(t),a=[];let r=e,o=r;for(let n=0;n<s;n++){o=r,a.push(o);for(let e=1;e<i;e++)o=o.add(r),a.push(o);r=o.double()}return a},wNAF(t,i,a){const{windows:r,windowSize:o}=n(t);let l=e.ZERO,c=e.BASE;const h=BigInt(2**t-1),u=2**t,d=BigInt(t);for(let e=0;e<r;e++){const t=e*o;let n=Number(a&h);a>>=d,n>o&&(n-=u,a+=vA);const r=t,p=t+Math.abs(n)-1,f=e%2!=0,m=n<0;0===n?c=c.add(s(f,i[r])):l=l.add(s(m,i[p]))}return{p:l,f:c}},wNAFCached(e,t,s,n){const i=e._WINDOW_SIZE||1;let a=t.get(e);return a||(a=this.precomputeWindow(e,i),1!==i&&t.set(e,n(a))),this.wNAF(i,a,s)}}}(u,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:r}}({...t,toBytes(e,t,n){const i=t.toAffine(),a=s.toBytes(i.x),r=Qk;return n?r(Uint8Array.from([t.hasEvenY()?2:3]),a):r(Uint8Array.from([4]),a,s.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===a&&4===n)return{x:s.fromBytes(r.subarray(0,s.BYTES)),y:s.fromBytes(r.subarray(s.BYTES,2*s.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}{const e=Vk(r);if(!(EA<(o=e)&&o<s.ORDER))throw new Error("Point is not on curve");const t=h(e);let i=s.sqrt(t);return!(1&~n)!=((i&SA)===SA)&&(i=s.neg(i)),{x:e,y:i}}var o}}),d=e=>Uk($k(e,t.nByteLength));function p(e){return e>n>>SA}const f=(e,t,s)=>Vk(e.slice(t,s));class m{constructor(e,t,s){this.r=e,this.s=t,this.recovery=s,this.assertValidity()}static fromCompact(e){const s=t.nByteLength;return e=Kk("compactSignature",e,2*s),new m(f(e,0,s),f(e,s,2*s))}static fromDER(e){const{r:t,s:s}=AA.toSig(Kk("DER",e));return new m(t,s)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:a}=this,c=v(Kk("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const h=2===a||3===a?n+t.n:n;if(h>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&a?"03":"02",p=l.fromHex(u+d(h)),f=o(h),m=r(-c*f),g=r(i*f),y=l.BASE.multiplyAndAddUnsafe(p,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,r(-this.s),this.recovery):this}toDERRawBytes(){return zk(this.toDERHex())}toDERHex(){return AA.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zk(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=yA(t.n);return function(e,t,s=!1){const n=e.length,i=gA(t),a=yA(t);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const r=hA(s?Vk(e):Wk(e),t-iA)+iA;return s?qk(r,i):$k(r,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=e instanceof Uint8Array,s="string"==typeof e,n=(t||s)&&e.length;return t?n===i||n===a:s?n===2*i||n===2*a:e instanceof l}const b=t.bits2int||function(e){const s=Vk(e),n=8*e.length-t.nBitLength;return n>0?s>>BigInt(n):s},v=t.bits2int_modN||function(e){return r(b(e))},w=Zk(t.nBitLength);function x(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(EA<=e&&e<w))throw new Error(`bigint expected < 2^${t.nBitLength}`);return $k(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,s=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(s)},sign:function(e,n,i=k){const{seed:a,k2sig:h}=function(e,n,i=k){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:h}=t;let{lowS:d,prehash:f,extraEntropy:g}=i;null==d&&(d=!0),e=Kk("msgHash",e),f&&(e=Kk("prehashed msgHash",a(e)));const y=v(e),w=c(n),A=[x(w),x(y)];if(null!=g){const e=!0===g?h(s.BYTES):g;A.push(Kk("extraEntropy",e))}const E=Qk(...A),S=y;return{seed:E,k2sig:function(e){const t=b(e);if(!u(t))return;const s=o(t),n=l.BASE.multiply(t).toAffine(),i=r(n.x);if(i===EA)return;const a=r(s*r(S+i*w));if(a===EA)return;let c=(n.x===i?0:2)|Number(n.y&SA),h=a;return d&&p(a)&&(h=function(e){return p(e)?r(-e):e}(a),c^=1),new m(i,h,c)}}}(e,n,i),d=t;return Jk(d.hash.outputLen,d.nByteLength,d.hmac)(a,h)},verify:function(e,s,n,i=A){var a;const c=e;if(s=Kk("msgHash",s),n=Kk("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:h,prehash:u}=i;let d,p;try{if("string"==typeof c||c instanceof Uint8Array)try{d=m.fromDER(c)}catch(E){if(!(E instanceof AA.Err))throw E;d=m.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;d=new m(e,t)}}p=l.fromHex(n)}catch(S){if("PARSE"===S.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(h&&d.hasHighS())return!1;u&&(s=t.hash(s));const{r:f,s:g}=d,y=v(s),b=o(g),w=r(y*b),x=r(f*b),k=null==(a=l.BASE.multiplyAndAddUnsafe(p,w,x))?void 0:a.toAffine();return!!k&&r(k.x)===f},ProjectivePoint:l,Signature:m,utils:g}}function BA(e){return{hash:e,hmac:(t,...s)=>Gx(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let s=0;return e.forEach((e=>{if(!Ix(e))throw new Error("Uint8Array expected");t.set(e,s),s+=e.length})),t}(...s)),randomBytes:jx}}BigInt(4);const CA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),MA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),RA=BigInt(1),DA=BigInt(2),IA=(e,t)=>(e+t/DA)/t,_A=function(e,t,s=!1,n={}){if(e<=nA)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:a}=mA(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const r=function(e){if(e%oA===rA){const t=(e+iA)/oA;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}if(e%cA===lA){const t=(e-lA)/cA;return function(e,s){const n=e.mul(s,aA),i=e.pow(n,t),a=e.mul(s,i),r=e.mul(e.mul(a,aA),i),o=e.mul(a,e.sub(r,e.ONE));if(!e.eql(e.sqr(o),s))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-iA)/aA;let s,n,i;for(s=e-iA,n=0;s%aA===nA;s/=aA,n++);for(i=aA;i<e&&uA(i,t,e)!==e-iA;i++);if(1===n){const t=(e+iA)/oA;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}const a=(s+iA)/aA;return function(e,r){if(e.pow(r,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,i),s),c=e.pow(r,a),h=e.pow(r,s);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const s=e.pow(l,iA<<BigInt(o-t-1));l=e.sqr(s),c=e.mul(c,s),h=e.mul(h,l),o=t}return c}}(e)}(e),o=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:Zk(i),ZERO:nA,ONE:iA,create:t=>hA(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return nA<=t&&t<e},is0:e=>e===nA,isOdd:e=>(e&iA)===iA,neg:t=>hA(-t,e),eql:(e,t)=>e===t,sqr:t=>hA(t*t,e),add:(t,s)=>hA(t+s,e),sub:(t,s)=>hA(t-s,e),mul:(t,s)=>hA(t*s,e),pow:(e,t)=>function(e,t,s){if(s<nA)throw new Error("Expected power > 0");if(s===nA)return e.ONE;if(s===iA)return t;let n=e.ONE,i=t;for(;s>nA;)s&iA&&(n=e.mul(n,i)),i=e.sqr(i),s>>=iA;return n}(o,e,t),div:(t,s)=>hA(t*pA(s,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>pA(t,e),sqrt:n.sqrt||(e=>r(o,e)),invertBatch:e=>function(e,t){const s=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(s[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(s[i]=e.mul(t,s[i]),e.mul(t,n))),i),s}(o,e),cmov:(e,t,s)=>s?t:e,toBytes:e=>s?qk(e,a):$k(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return s?Wk(e):Vk(e)}});return Object.freeze(o)}(CA,void 0,void 0,{sqrt:function(e){const t=CA,s=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),r=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,h=c*c*e%t,u=dA(h,s,t)*h%t,d=dA(u,s,t)*h%t,p=dA(d,DA,t)*c%t,f=dA(p,i,t)*p%t,m=dA(f,a,t)*f%t,g=dA(m,o,t)*m%t,y=dA(g,l,t)*g%t,b=dA(y,o,t)*m%t,v=dA(b,s,t)*h%t,w=dA(v,r,t)*f%t,x=dA(w,n,t)*c%t,k=dA(x,DA,t);if(!_A.eql(_A.sqr(k),e))throw new Error("Cannot find square root");return k}}),NA=function(e,t){const s=t=>TA({...e,...BA(t)});return Object.freeze({...s(t),create:s})}({a:BigInt(0),b:BigInt(7),Fp:_A,n:MA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=MA,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-RA*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=s,r=BigInt("0x100000000000000000000000000000000"),o=IA(a*e,t),l=IA(-n*e,t);let c=hA(e-o*s-l*i,t),h=hA(-o*n-l*a,t);const u=c>r,d=h>r;if(u&&(c=t-c),d&&(h=t-h),c>r||h>r)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:d,k2:h}}}},Qx);BigInt(0),NA.ProjectivePoint;const LA="0x0000000000000000000000000000000000000000",FA="0x0000000000000000000000000000000000000000000000000000000000000000",OA=BigInt(0),jA=BigInt(1),UA=BigInt(2),GA=BigInt(27),HA=BigInt(28),zA=BigInt(35),VA={};function WA(e){return kw(_w(e),32)}const $A=class e{constructor(e,t,s,n){Tn(this,j),Tn(this,U),Tn(this,G),Tn(this,H),hw(e,VA,"Signature"),Bn(this,j,t),Bn(this,U,s),Bn(this,G,n),Bn(this,H,null)}get r(){return Pn(this,j)}set r(e){lw(32===vw(e),"invalid r","value",e),Bn(this,j,yw(e))}get s(){return Pn(this,U)}set s(e){lw(32===vw(e),"invalid s","value",e);const t=yw(e);lw(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),Bn(this,U,t)}get v(){return Pn(this,G)}set v(e){const t=Dw(e,"value");lw(27===t||28===t,"invalid v","v",e),Bn(this,G,t)}get networkV(){return Pn(this,H)}get legacyChainId(){const t=this.networkV;return null==t?null:e.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=dw(this.s);return this.yParity&&(e[0]|=128),yw(e)}get compactSerialized(){return bw([this.r,this.yParityAndS])}get serialized(){return bw([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new e(VA,this.r,this.s,this.v);return this.networkV&&Bn(t,H,this.networkV),t}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Bw(e,"v");return t==GA||t==HA?OA:(lw(t>=zA,"invalid EIP-155 v","v",e),(t-zA)/UA)}static getChainIdV(e,t){return Bw(e)*UA+BigInt(35+t-27)}static getNormalizedV(e){const t=Bw(e);return t===OA||t===GA?27:t===jA||t===HA?28:(lw(t>=zA,"invalid v","v",e),t&jA?27:28)}static from(t){function s(e,s){lw(e,s,"signature",t)}if(null==t)return new e(VA,FA,FA,27);if("string"==typeof t){const n=dw(t,"signature");if(64===n.length){const t=yw(n.slice(0,32)),s=n.slice(32,64),i=128&s[0]?28:27;return s[0]&=127,new e(VA,t,yw(s),i)}if(65===n.length){const t=yw(n.slice(0,32)),i=n.slice(32,64);s(!(128&i[0]),"non-canonical s");const a=e.getNormalizedV(n[64]);return new e(VA,t,yw(i),a)}s(!1,"invalid raw signature length")}if(t instanceof e)return t.clone();const n=t.r;s(null!=n,"missing r");const i=WA(n),a=function(e,t){if(null!=e)return WA(e);if(null!=t){s(fw(t,32),"invalid yParityAndS");const e=dw(t);return e[0]&=127,yw(e)}s(!1,"missing s")}(t.s,t.yParityAndS);s(!(128&dw(a)[0]),"non-canonical s");const{networkV:r,v:o}=function(t,n,i){if(null!=t){const s=Bw(t);return{networkV:s>=zA?s:void 0,v:e.getNormalizedV(s)}}if(null!=n)return s(fw(n,32),"invalid yParityAndS"),{v:128&dw(n)[0]?28:27};if(null!=i){switch(Dw(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}s(!1,"invalid yParity")}s(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new e(VA,i,a,o);return r&&Bn(l,H,r),s(null==t.yParity||Dw(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),s(null==t.yParityAndS||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};j=new WeakMap,U=new WeakMap,G=new WeakMap,H=new WeakMap;let qA=$A;z=new WeakMap;let KA=class e{constructor(e){Tn(this,z),lw(32===vw(e),"invalid private key","privateKey","[REDACTED]"),Bn(this,z,yw(e))}get privateKey(){return Pn(this,z)}get publicKey(){return e.computePublicKey(Pn(this,z))}get compressedPublicKey(){return e.computePublicKey(Pn(this,z),!0)}sign(e){lw(32===vw(e),"invalid digest length","digest",e);const t=NA.sign(pw(e),pw(Pn(this,z)),{lowS:!0});return qA.from({r:Iw(t.r,32),s:Iw(t.s,32),v:t.recovery?28:27})}computeSharedSecret(t){const s=e.computePublicKey(t);return yw(NA.getSharedSecret(pw(Pn(this,z)),dw(s),!1))}static computePublicKey(e,t){let s=dw(e,"key");if(32===s.length)return yw(NA.getPublicKey(s,!!t));if(64===s.length){const e=new Uint8Array(65);e[0]=4,e.set(s,1),s=e}return yw(NA.ProjectivePoint.fromHex(s).toRawBytes(t))}static recoverPublicKey(e,t){lw(32===vw(e),"invalid digest length","digest",e);const s=qA.from(t);let n=NA.Signature.fromCompact(pw(bw([s.r,s.s])));n=n.addRecoveryBit(s.yParity);const i=n.recoverPublicKey(pw(e));return lw(null!=i,"invalid signautre for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(t,s,n){const i=NA.ProjectivePoint.fromHex(e.computePublicKey(t).substring(2)),a=NA.ProjectivePoint.fromHex(e.computePublicKey(s).substring(2));return"0x"+i.add(a).toHex(!!n)}};const QA=BigInt(0),ZA=BigInt(36);function XA(e){const t=(e=e.toLowerCase()).substring(2).split(""),s=new Uint8Array(40);for(let i=0;i<40;i++)s[i]=t[i].charCodeAt(0);const n=dw(Mk(s));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(15&n[i>>1])>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const YA={};for(let DV=0;DV<10;DV++)YA[String(DV)]=String(DV);for(let DV=0;DV<26;DV++)YA[String.fromCharCode(65+DV)]=String(10+DV);const JA=function(){const e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function eE(e){if(lw("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=XA(e);return lw(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){lw(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>YA[e])).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let s=String(98-parseInt(t,10)%97);for(;s.length<2;)s="0"+s;return s}(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=QA;for(let s=0;s<e.length;s++)t=t*ZA+JA[e[s]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return XA("0x"+t)}lw(!1,"invalid address","address",e)}function tE(e){return e&&"function"==typeof e.getAddress}async function sE(e,t){const s=await t;return null!=s&&"0x0000000000000000000000000000000000000000"!==s||(ow("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),lw(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),eE(s)}function nE(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?eE(e):(ow(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),sE(e,t.resolveName(e))):tE(e)?sE(e,e.getAddress()):e&&"function"==typeof e.then?sE(e,e):void lw(!1,"unsupported addressable value","target",e)}const iE={};function aE(e,t){let s=!1;return t<0&&(s=!0,t*=-1),new lE(iE,`${s?"":"u"}int${t}`,e,{signed:s,width:t})}function rE(e,t){return new lE(iE,`bytes${t||""}`,e,{size:t})}const oE=Symbol.for("_ethers_typed");V=new WeakMap;let lE=class e{constructor(e,t,s,n){En(this,"type"),En(this,"value"),Tn(this,V),En(this,"_typedSymbol"),null==n&&(n=null),hw(iE,e,"Typed"),sw(this,{_typedSymbol:oE,type:t,value:s}),Bn(this,V,n),this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return Pn(this,V)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===Pn(this,V)?-1:!1===Pn(this,V)?this.value.length:null}static from(t,s){return new e(iE,t,s)}static uint8(e){return aE(e,8)}static uint16(e){return aE(e,16)}static uint24(e){return aE(e,24)}static uint32(e){return aE(e,32)}static uint40(e){return aE(e,40)}static uint48(e){return aE(e,48)}static uint56(e){return aE(e,56)}static uint64(e){return aE(e,64)}static uint72(e){return aE(e,72)}static uint80(e){return aE(e,80)}static uint88(e){return aE(e,88)}static uint96(e){return aE(e,96)}static uint104(e){return aE(e,104)}static uint112(e){return aE(e,112)}static uint120(e){return aE(e,120)}static uint128(e){return aE(e,128)}static uint136(e){return aE(e,136)}static uint144(e){return aE(e,144)}static uint152(e){return aE(e,152)}static uint160(e){return aE(e,160)}static uint168(e){return aE(e,168)}static uint176(e){return aE(e,176)}static uint184(e){return aE(e,184)}static uint192(e){return aE(e,192)}static uint200(e){return aE(e,200)}static uint208(e){return aE(e,208)}static uint216(e){return aE(e,216)}static uint224(e){return aE(e,224)}static uint232(e){return aE(e,232)}static uint240(e){return aE(e,240)}static uint248(e){return aE(e,248)}static uint256(e){return aE(e,256)}static uint(e){return aE(e,256)}static int8(e){return aE(e,-8)}static int16(e){return aE(e,-16)}static int24(e){return aE(e,-24)}static int32(e){return aE(e,-32)}static int40(e){return aE(e,-40)}static int48(e){return aE(e,-48)}static int56(e){return aE(e,-56)}static int64(e){return aE(e,-64)}static int72(e){return aE(e,-72)}static int80(e){return aE(e,-80)}static int88(e){return aE(e,-88)}static int96(e){return aE(e,-96)}static int104(e){return aE(e,-104)}static int112(e){return aE(e,-112)}static int120(e){return aE(e,-120)}static int128(e){return aE(e,-128)}static int136(e){return aE(e,-136)}static int144(e){return aE(e,-144)}static int152(e){return aE(e,-152)}static int160(e){return aE(e,-160)}static int168(e){return aE(e,-168)}static int176(e){return aE(e,-176)}static int184(e){return aE(e,-184)}static int192(e){return aE(e,-192)}static int200(e){return aE(e,-200)}static int208(e){return aE(e,-208)}static int216(e){return aE(e,-216)}static int224(e){return aE(e,-224)}static int232(e){return aE(e,-232)}static int240(e){return aE(e,-240)}static int248(e){return aE(e,-248)}static int256(e){return aE(e,-256)}static int(e){return aE(e,-256)}static bytes1(e){return rE(e,1)}static bytes2(e){return rE(e,2)}static bytes3(e){return rE(e,3)}static bytes4(e){return rE(e,4)}static bytes5(e){return rE(e,5)}static bytes6(e){return rE(e,6)}static bytes7(e){return rE(e,7)}static bytes8(e){return rE(e,8)}static bytes9(e){return rE(e,9)}static bytes10(e){return rE(e,10)}static bytes11(e){return rE(e,11)}static bytes12(e){return rE(e,12)}static bytes13(e){return rE(e,13)}static bytes14(e){return rE(e,14)}static bytes15(e){return rE(e,15)}static bytes16(e){return rE(e,16)}static bytes17(e){return rE(e,17)}static bytes18(e){return rE(e,18)}static bytes19(e){return rE(e,19)}static bytes20(e){return rE(e,20)}static bytes21(e){return rE(e,21)}static bytes22(e){return rE(e,22)}static bytes23(e){return rE(e,23)}static bytes24(e){return rE(e,24)}static bytes25(e){return rE(e,25)}static bytes26(e){return rE(e,26)}static bytes27(e){return rE(e,27)}static bytes28(e){return rE(e,28)}static bytes29(e){return rE(e,29)}static bytes30(e){return rE(e,30)}static bytes31(e){return rE(e,31)}static bytes32(e){return rE(e,32)}static address(t){return new e(iE,"address",t)}static bool(t){return new e(iE,"bool",!!t)}static bytes(t){return new e(iE,"bytes",t)}static string(t){return new e(iE,"string",t)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(t){return new e(iE,"overrides",Object.assign({},t))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===oE}static dereference(t,s){if(e.isTyped(t)){if(t.type!==s)throw new Error(`invalid type: expecetd ${s}, got ${t.type}`);return t.value}return t}};class cE extends Sx{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let s=lE.dereference(t,"string");try{s=eE(s)}catch(n){return this._throwError(n.message,t)}return e.writeValue(s)}decode(e){return eE(Iw(e.readValue(),20))}}class hE extends Sx{constructor(e){super(e.name,e.type,"_",e.dynamic),En(this,"coder"),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function uE(e,t,s){let n=[];if(Array.isArray(s))n=s;else if(s&&"object"==typeof s){let e={};n=t.map((t=>{const n=t.localName;return ow(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:s}),ow(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:s}),e[n]=!0,s[n]}))}else lw(!1,"invalid tuple value","tuple",s);lw(t.length===n.length,"types/value length mismatch","tuple",s);let i=new Px,a=new Px,r=[];t.forEach(((e,t)=>{let s=n[t];if(e.dynamic){let t=a.length;e.encode(a,s);let n=i.writeUpdatableValue();r.push((e=>{n(e+t)}))}else e.encode(i,s)})),r.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);return o+=e.appendWriter(a),o}function dE(e,t){let s=[],n=[],i=e.subReader(0);return t.forEach((t=>{let a=null;if(t.dynamic){let s=e.readIndex(),n=i.subReader(s);try{a=t.decode(n)}catch(r){if(iw(r,"BUFFER_OVERRUN"))throw r;a=r,a.baseType=t.name,a.name=t.localName,a.type=t.type}}else try{a=t.decode(e)}catch(r){if(iw(r,"BUFFER_OVERRUN"))throw r;a=r,a.baseType=t.name,a.name=t.localName,a.type=t.type}if(null==a)throw new Error("investigate");s.push(a),n.push(t.localName||null)})),Ax.fromItems(s,n)}class pE extends Sx{constructor(e,t,s){super("array",e.type+"["+(t>=0?t:"")+"]",s,-1===t||e.dynamic),En(this,"coder"),En(this,"length"),sw(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let s=0;s<this.length;s++)t.push(e);return t}encode(e,t){const s=lE.dereference(t,"array");Array.isArray(s)||this._throwError("expected array value",s);let n=this.length;-1===n&&(n=s.length,e.writeValue(s.length)),cw(s.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let a=0;a<s.length;a++)i.push(this.coder);return uE(e,i,s)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),ow(t*fx<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*fx,length:e.dataLength}));let s=[];for(let n=0;n<t;n++)s.push(new hE(this.coder));return dE(e,s)}}class fE extends Sx{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const s=lE.dereference(t,"bool");return e.writeValue(s?1:0)}decode(e){return!!e.readValue()}}class mE extends Sx{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=pw(t);let s=e.writeValue(t.length);return s+=e.writeBytes(t),s}decode(e){return e.readBytes(e.readIndex(),!0)}}class gE extends mE{constructor(e){super("bytes",e)}decode(e){return yw(super.decode(e))}}class yE extends Sx{constructor(e,t){let s="bytes"+String(e);super(s,s,t,!1),En(this,"size"),sw(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let s=pw(lE.dereference(t,this.type));return s.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(s)}decode(e){return yw(e.readBytes(this.size))}}const bE=new Uint8Array([]);class vE extends Sx{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(bE)}decode(e){return e.readBytes(0),null}}const wE=BigInt(0),xE=BigInt(1),kE=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class AE extends Sx{constructor(e,t,s){const n=(t?"int":"uint")+8*e;super(n,n,s,!1),En(this,"size"),En(this,"signed"),sw(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let s=Bw(lE.dereference(t,this.type)),n=Tw(kE,256);if(this.signed){let e=Tw(n,8*this.size-1);(s>e||s<-(e+xE))&&this._throwError("value out-of-bounds",t),s=Pw(s,256)}else(s<wE||s>Tw(n,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(s)}decode(e){let t=Tw(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){const s=Cw(e,"value"),n=BigInt(Dw(t,"width"));return ow(s>>n===Aw,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),s>>n-Ew?-((~s&(Ew<<n)-Ew)+Ew):s}(t,8*this.size)),t}}class EE extends mE{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Gw(lE.dereference(t,"string")))}decode(e){return Hw(super.decode(e))}}class SE extends Sx{constructor(e,t){let s=!1;const n=[];e.forEach((e=>{e.dynamic&&(s=!0),n.push(e.type)})),super("tuple","tuple("+n.join(",")+")",t,s),En(this,"coders"),sw(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const s=t.localName;return s&&(e[s]||(e[s]=0),e[s]++),e}),{});return this.coders.forEach(((s,n)=>{let i=s.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}encode(e,t){const s=lE.dereference(t,"tuple");return uE(e,this.coders,s)}decode(e){return dE(e,this.coders)}}function PE(e){return Mk(Gw(e))}const TE=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function BE(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function s(){return e[t++]<<8|e[t++]}let n=s(),i=1,a=[0,1];for(let w=1;w<n;w++)a.push(i+=s());let r=s(),o=t;t+=r;let l=0,c=0;function h(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}const u=2**31,d=u>>>1,p=d>>1,f=u-1;let m=0;for(let w=0;w<31;w++)m=m<<1|h();let g=[],y=0,b=u;for(;;){let e=Math.floor(((m-y+1)*i-1)/b),t=0,s=n;for(;s-t>1;){let n=t+s>>>1;e<a[n]?s=n:t=n}if(0==t)break;g.push(t);let r=y+Math.floor(b*a[t]/i),o=y+Math.floor(b*a[t+1]/i)-1;for(;!((r^o)&d);)m=m<<1&f|h(),r=r<<1&f,o=o<<1&f|1;for(;r&~o&p;)m=m&d|m<<1&f>>>1|h(),r=r<<1^d,o=(o^d)<<1|d|1;y=r,b=1+o-r}let v=n-4;return g.map((t=>{switch(t-v){case 3:return v+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return v+256+(e[o++]<<8|e[o++]);case 1:return v+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,s)=>t[e.charCodeAt(0)]=s));let s=e.length,n=new Uint8Array(6*s>>3);for(let i=0,a=0,r=0,o=0;i<s;i++)o=o<<6|t[e.charCodeAt(i)],r+=6,r>=8&&(n[a++]=o>>(r-=8));return n}(e)))}function CE(e){return 1&e?~e>>1:e>>1}function ME(e,t){let s=Array(e);for(let n=0,i=0;n<e;n++)s[n]=i+=CE(t());return s}function RE(e,t=0){let s=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)s.push(t+e);t+=i+1}return s}function DE(e){return _E((()=>{let t=RE(e);if(t.length)return t}))}function IE(e){let t=[];for(;;){let s=e();if(0==s)break;t.push(LE(s,e))}for(;;){let s=e()-1;if(s<0)break;t.push(FE(s,e))}return t.flat()}function _E(e){let t=[];for(;;){let s=e(t.length);if(!s)break;t.push(s)}return t}function NE(e,t,s){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++)ME(e,s).forEach(((e,t)=>n[t].push(e)));return n}function LE(e,t){let s=1+t(),n=t(),i=_E(t);return NE(i.length,1+e,t).flatMap(((e,t)=>{let[a,...r]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[a+t*s,r.map((e=>e+i))]}))}))}function FE(e,t){return NE(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function OE(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function jE(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let s=[];for(let n=0;n<t;)s.push(String.fromCodePoint(...e.slice(n,n+=4096)));return s.join("")}function UE(e,t){let s=e.length,n=s-t.length;for(let i=0;0==n&&i<s;i++)n=e[i]-t[i];return n}const GE=44032,HE=4352,zE=4449,VE=4519;function WE(e){return e>>24&255}function $E(e){return 16777215&e}let qE,KE,QE,ZE;function XE(e){return e>=GE&&e<55204}function YE(e,t){if(e>=HE&&e<4371&&t>=zE&&t<4470)return GE+588*(e-HE)+28*(t-zE);if(XE(e)&&t>VE&&t<4547&&(e-GE)%28==0)return e+(t-VE);{let s=ZE.get(e);return s&&(s=s.get(t),s)?s:-1}}function JE(e){qE||function(){let e=BE("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");qE=new Map(DE(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),KE=new Set(RE(e)),QE=new Map,ZE=new Map;for(let[t,s]of IE(e)){if(!KE.has(t)&&2==s.length){let[e,n]=s,i=ZE.get(e);i||(i=new Map,ZE.set(e,i)),i.set(n,t)}QE.set(t,s.reverse())}}();let t=[],s=[],n=!1;function i(e){let s=qE.get(e);s&&(n=!0,e|=s),t.push(e)}for(let a of e)for(;;){if(a<128)t.push(a);else if(XE(a)){let e=a-GE,t=e%588/28|0,s=e%28;i(HE+(e/588|0)),i(zE+t),s>0&&i(VE+s)}else{let e=QE.get(a);e?s.push(...e):i(a)}if(!s.length)break;a=s.pop()}if(n&&t.length>1){let e=WE(t[0]);for(let s=1;s<t.length;s++){let n=WE(t[s]);if(0==n||e<=n){e=n;continue}let i=s-1;for(;;){let s=t[i+1];if(t[i+1]=t[i],t[i]=s,!i)break;if(e=WE(t[--i]),e<=n)break}e=WE(t[s])}}return t}function eS(e){return JE(e).map($E)}function tS(e){return function(e){let t=[],s=[],n=-1,i=0;for(let a of e){let e=WE(a),r=$E(a);if(-1==n)0==e?n=r:t.push(r);else if(i>0&&i>=e)0==e?(t.push(n,...s),s.length=0,n=r):s.push(r),i=e;else{let a=YE(n,r);a>=0?n=a:0==i&&0==e?(t.push(n),n=r):(s.push(r),i=e)}}return n>=0&&t.push(n,...s),t}(JE(e))}const sS=e=>Array.from(e);function nS(e,t){return e.P.has(t)||e.Q.has(t)}class iS extends Array{get is_emoji(){return!0}}let aS,rS,oS,lS,cS,hS,uS,dS,pS,fS,mS;function gS(){if(aS)return;let e=BE("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>RE(e),s=()=>new Set(t()),n=(e,t)=>t.forEach((t=>e.add(t)));aS=new Map(IE(e)),rS=s(),oS=t(),lS=new Set(t().map((e=>oS[e]))),oS=new Set(oS),cS=s(),s();let i=DE(e),a=e();const r=()=>{let e=new Set;return t().forEach((t=>n(e,i[t]))),n(e,t()),e};hS=_E((t=>{let s=_E(e).map((e=>e+96));if(s.length){let n=t>=a;return s[0]-=32,s=jE(s),n&&(s=`Restricted[${s}]`),{N:s,P:r(),Q:r(),M:!e(),R:n}}})),uS=s(),dS=new Map;let o=t().concat(sS(uS)).sort(((e,t)=>e-t));o.forEach(((t,s)=>{let n=e(),i=o[s]=n?o[s-n]:{V:[],M:new Map};i.V.push(t),uS.has(t)||dS.set(t,i)}));for(let{V:h,M:u}of new Set(dS.values())){let e=[];for(let s of h){let t=hS.filter((e=>nS(e,s))),i=e.find((({G:e})=>t.some((t=>e.has(t)))));i||(i={G:new Set,V:[]},e.push(i)),i.V.push(s),n(i.G,t)}let t=e.flatMap((e=>sS(e.G)));for(let{G:s,V:n}of e){let e=new Set(t.filter((e=>!s.has(e))));for(let t of n)u.set(t,e)}}pS=new Set;let l=new Set;const c=e=>pS.has(e)?l.add(e):pS.add(e);for(let h of hS){for(let e of h.P)c(e);for(let e of h.Q)c(e)}for(let h of pS)dS.has(h)||l.has(h)||dS.set(h,1);n(pS,eS(pS)),fS=function(e){let t=[],s=RE(e);return function e({S:s,B:n},i,a){if(!(4&s&&a===i[i.length-1])){2&s&&(a=i[i.length-1]),1&s&&t.push(i);for(let t of n)for(let s of t.Q)e(t,[...i,s],a)}}(function t(n){return{S:e(),B:_E((()=>{let n=RE(e).map((e=>s[e]));if(n.length)return t(n)})),Q:n}}([]),[]),t}(e).map((e=>iS.from(e))).sort(UE),mS=new Map;for(let h of fS){let e=[mS];for(let t of h){let s=e.map((e=>{let s=e.get(t);return s||(s=new Map,e.set(t,s)),s}));65039===t?e.push(...s):e=s}for(let t of e)t.V=h}}function yS(e){return(wS(e)?"":`${bS(vS([e]))} `)+OE(e)}function bS(e){return`"${e}"`}function vS(e,t=1/0,s=OE){let n=[];var i;i=e[0],gS(),oS.has(i)&&n.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let a=0,r=e.length;for(let o=0;o<r;o++){let t=e[o];wS(t)&&(n.push(jE(e.slice(a,o))),n.push(s(t)),a=o+1)}return n.push(jE(e.slice(a,r))),n.join("")}function wS(e){return gS(),cS.has(e)}function xS(e){return new Error(`disallowed character: ${yS(e)}`)}function kS(e,t){let s=yS(t),n=hS.find((e=>e.P.has(t)));return n&&(s=`${n.N} ${s}`),new Error(`illegal mixture: ${e.N} + ${s}`)}function AS(e){return new Error(`illegal placement: ${e}`)}function ES(e){return e.filter((e=>65039!=e))}function SS(e,t){let s,n=mS,i=e.length;for(;i&&(n=n.get(e[--i]),n);){let{V:t}=n;t&&(s=t,e.length=i)}return s}const PS=new Uint8Array(32);function TS(e){return lw(0!==e.length,"invalid ENS name; empty component","comp",e),e}function BS(e){const t=Gw(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return t=function(e,t,s){if(!e)return[];gS();let n=0;return e.split(".").map((e=>{let i=function(e){let t=[];for(let s=0,n=e.length;s<n;){let n=e.codePointAt(s);s+=n<65536?1:2,t.push(n)}return t}(e),a={input:i,offset:n};n+=i.length+1;try{let e,n=a.tokens=function(e,t,s){let n=[],i=[];for(e=e.slice().reverse();e.length;){let a=SS(e);if(a)i.length&&(n.push(t(i)),i=[]),n.push(s(a));else{let t=e.pop();if(pS.has(t))i.push(t);else{let e=aS.get(t);if(e)i.push(...e);else if(!rS.has(t))throw xS(t)}}}return i.length&&n.push(t(i)),n}(i,t,s),r=n.length;if(!r)throw new Error("empty label");let o=a.output=n.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(o),!(a.emoji=r>1||n[0].is_emoji)&&o.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${jE(e.slice(0,4))}"`)}(o),e="ASCII";else{let t=n.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(oS.has(o[0]))throw AS("leading combining mark");for(let e=1;e<r;e++){let t=n[e];if(!t.is_emoji&&oS.has(t[0]))throw AS(`emoji + combining mark: "${jE(n[e-1])} + ${vS([t[0]])}"`)}!function(e){let t=e[0],s=TE.get(t);if(s)throw AS(`leading ${s}`);let n=e.length,i=-1;for(let a=1;a<n;a++){t=e[a];let n=TE.get(t);if(n){if(i==a)throw AS(`${s} + ${n}`);i=a+1,s=n}}if(i==n)throw AS(`trailing ${s}`)}(o);let s=sS(new Set(t)),[i]=function(e){let t=hS;for(let s of e){let e=t.filter((e=>nS(e,s)));if(!e.length)throw hS.some((e=>nS(e,s)))?kS(t[0],s):xS(s);if(t=e,1==e.length)break}return t}(s);!function(e,t){for(let s of t)if(!nS(e,s))throw kS(e,s);if(e.M){let e=eS(t);for(let t=1,s=e.length;t<s;t++)if(lS.has(e[t])){let n=t+1;for(let i;n<s&&lS.has(i=e[n]);n++)for(let s=t;s<n;s++)if(e[s]==i)throw new Error(`duplicate non-spacing marks: ${yS(i)}`);if(n-t>4)throw new Error(`excessive non-spacing marks: ${bS(vS(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}}(i,t),function(e,t){let s,n=[];for(let i of t){let e=dS.get(i);if(1===e)return;if(e){let t=e.M.get(i);if(s=s?s.filter((e=>t.has(e))):sS(t),!s.length)return}else n.push(i)}if(s)for(let i of s)if(n.every((e=>nS(i,e))))throw new Error(`whole-script confusable: ${e.N}/${i.N}`)}(i,s),e=i.N}else e="Emoji"}a.type=e}catch(r){a.error=r}return a}))}(e,tS,ES),t.map((({input:e,error:s,output:n})=>{if(s){let n=s.message;throw new Error(1==t.length?n:`Invalid label ${bS(vS(e,63))}: ${n}`)}return jE(n)})).join(".");var t}(e)}catch(t){lw(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),s=[];if(0===e.length)return s;let n=0;for(let i=0;i<t.length;i++)46===t[i]&&(s.push(TS(t.slice(n,i))),n=i+1);return lw(n<t.length,"invalid ENS name; empty component","name",e),s.push(TS(t.slice(n))),s}function CS(e){lw("string"==typeof e,"invalid ENS name; not a string","name",e),lw(e.length,"invalid ENS name (empty label)","name",e);let t=PS;const s=BS(e);for(;s.length;)t=Mk(bw([t,Mk(s.pop())]));return yw(t)}function MS(e,t){const s=t;return lw(s<=255,"DNS encoded label cannot exceed 255","length",s),yw(bw(BS(e).map((t=>{lw(t.length<=s,`label ${JSON.stringify(e)} exceeds ${s} bytes`,"name",e);const n=new Uint8Array(t.length+1);return n.set(t,1),n[0]=n.length-1,n}))))+"00"}function RS(e,t){return{address:eE(e),storageKeys:t.map(((e,t)=>(lw(fw(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function DS(e){if(Array.isArray(e))return e.map(((t,s)=>Array.isArray(t)?(lw(2===t.length,"invalid slot set",`value[${s}]`,t),RS(t[0],t[1])):(lw(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),RS(t.address,t.storageKeys))));lw(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const s=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return RS(t,Object.keys(s).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}PS.fill(0);const IS=BigInt(0),_S=BigInt(2),NS=BigInt(27),LS=BigInt(28),FS=BigInt(35),OS=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),jS=131072;function US(e,t){let s=e.toString(16);for(;s.length<2;)s="0"+s;return s+=_k(t).substring(4),"0x"+s}function GS(e){return"0x"===e?null:eE(e)}function HS(e,t){try{return DS(e)}catch(s){lw(!1,s.message,t,e)}}function zS(e,t){return"0x"===e?0:Dw(e,t)}function VS(e,t){if("0x"===e)return IS;const s=Bw(e,t);return lw(s<=OS,"value exceeds uint size",t,s),s}function WS(e,t){const s=Bw(e,"value"),n=_w(s);return lw(n.length<=32,"value too large",`tx.${t}`,s),n}function $S(e){return DS(e).map((e=>[e.address,e.storageKeys]))}function qS(e,t){lw(Array.isArray(e),`invalid ${t}`,"value",e);for(let s=0;s<e.length;s++)lw(fw(e[s],32),"invalid ${ param } hash",`value[${s}]`,e[s]);return e}function KS(e,t){let s;try{if(s=zS(t[0],"yParity"),0!==s&&1!==s)throw new Error("bad yParity")}catch(r){lw(!1,"invalid yParity","yParity",t[0])}const n=kw(t[1],32),i=kw(t[2],32),a=qA.from({r:n,s:i,yParity:s});e.signature=a}W=new WeakMap,$=new WeakMap,q=new WeakMap,K=new WeakMap,Q=new WeakMap,Z=new WeakMap,X=new WeakMap,Y=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,ie=new WeakMap,ae=new WeakMap,re=new WeakMap,oe=new WeakSet,le=function(e,t){ow(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const s=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const s=[WS(e.nonce,"nonce"),WS(e.gasPrice||0,"gasPrice"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data];let n=IS;if(e.chainId!=IS)n=Bw(e.chainId,"tx.chainId"),lw(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==IS&&(s.push(_w(n)),s.push("0x"),s.push("0x")),px(s);let i=BigInt(27+t.yParity);return n!==IS?i=qA.getChainIdV(n,t.v):BigInt(t.v)!==i&&lw(!1,"tx.chainId/sig.v mismatch","sig",t),s.push(_w(i)),s.push(_w(t.r)),s.push(_w(t.s)),px(s)}(this,s);case 1:return function(e,t){const s=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.gasPrice||0,"gasPrice"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data,$S(e.accessList||[])];return t&&(s.push(WS(t.yParity,"recoveryParam")),s.push(_w(t.r)),s.push(_w(t.s))),bw(["0x01",px(s)])}(this,s);case 2:return function(e,t){const s=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),WS(e.maxFeePerGas||0,"maxFeePerGas"),WS(e.gasLimit,"gasLimit"),e.to||"0x",WS(e.value,"value"),e.data,$S(e.accessList||[])];return t&&(s.push(WS(t.yParity,"yParity")),s.push(_w(t.r)),s.push(_w(t.s))),bw(["0x02",px(s)])}(this,s);case 3:return function(e,t,s){const n=[WS(e.chainId,"chainId"),WS(e.nonce,"nonce"),WS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),WS(e.maxFeePerGas||0,"maxFeePerGas"),WS(e.gasLimit,"gasLimit"),e.to||LA,WS(e.value,"value"),e.data,$S(e.accessList||[]),WS(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),qS(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(WS(t.yParity,"yParity")),n.push(_w(t.r)),n.push(_w(t.s)),s)?bw(["0x03",px([n,s.map((e=>e.data)),s.map((e=>e.commitment)),s.map((e=>e.proof))])]):bw(["0x03",px(n)])}(this,s,t?this.blobs:null)}ow(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let QS=class e{constructor(){Tn(this,oe),Tn(this,W),Tn(this,$),Tn(this,q),Tn(this,K),Tn(this,Q),Tn(this,Z),Tn(this,X),Tn(this,Y),Tn(this,J),Tn(this,ee),Tn(this,te),Tn(this,se),Tn(this,ne),Tn(this,ie),Tn(this,ae),Tn(this,re),Bn(this,W,null),Bn(this,$,null),Bn(this,K,0),Bn(this,Q,IS),Bn(this,Z,null),Bn(this,X,null),Bn(this,Y,null),Bn(this,q,"0x"),Bn(this,J,IS),Bn(this,ee,IS),Bn(this,te,null),Bn(this,se,null),Bn(this,ne,null),Bn(this,ie,null),Bn(this,re,null),Bn(this,ae,null)}get type(){return Pn(this,W)}set type(e){switch(e){case null:Bn(this,W,null);break;case 0:case"legacy":Bn(this,W,0);break;case 1:case"berlin":case"eip-2930":Bn(this,W,1);break;case 2:case"london":case"eip-1559":Bn(this,W,2);break;case 3:case"cancun":case"eip-4844":Bn(this,W,3);break;default:lw(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=Pn(this,$);return null==e&&3===this.type?LA:e}set to(e){Bn(this,$,null==e?null:eE(e))}get nonce(){return Pn(this,K)}set nonce(e){Bn(this,K,Dw(e,"value"))}get gasLimit(){return Pn(this,Q)}set gasLimit(e){Bn(this,Q,Bw(e))}get gasPrice(){const e=Pn(this,Z);return null!=e||0!==this.type&&1!==this.type?e:IS}set gasPrice(e){Bn(this,Z,null==e?null:Bw(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Pn(this,X);return null==e?2===this.type||3===this.type?IS:null:e}set maxPriorityFeePerGas(e){Bn(this,X,null==e?null:Bw(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Pn(this,Y);return null==e?2===this.type||3===this.type?IS:null:e}set maxFeePerGas(e){Bn(this,Y,null==e?null:Bw(e,"maxFeePerGas"))}get data(){return Pn(this,q)}set data(e){Bn(this,q,yw(e))}get value(){return Pn(this,J)}set value(e){Bn(this,J,Bw(e,"value"))}get chainId(){return Pn(this,ee)}set chainId(e){Bn(this,ee,Bw(e))}get signature(){return Pn(this,te)||null}set signature(e){Bn(this,te,null==e?null:qA.from(e))}get accessList(){const e=Pn(this,se)||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){Bn(this,se,null==e?null:DS(e))}get maxFeePerBlobGas(){const e=Pn(this,ne);return null==e&&3===this.type?IS:e}set maxFeePerBlobGas(e){Bn(this,ne,null==e?null:Bw(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Pn(this,ie);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){lw(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)lw(fw(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}Bn(this,ie,e)}get blobs(){return null==Pn(this,re)?null:Pn(this,re).map((e=>Object.assign({},e)))}set blobs(e){if(null==e)return void Bn(this,re,null);const t=[],s=[];for(let n=0;n<e.length;n++){const i=e[n];if(mw(i)){ow(Pn(this,ae),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=dw(i);if(lw(e.length<=jS,"blob is too large",`blobs[${n}]`,i),e.length!==jS){const t=new Uint8Array(jS);t.set(e),e=t}const a=Pn(this,ae).blobToKzgCommitment(e),r=yw(Pn(this,ae).computeBlobKzgProof(e,a));t.push({data:yw(e),commitment:yw(a),proof:r}),s.push(US(1,a))}else{const e=yw(i.commitment);t.push({data:yw(i.data),commitment:e,proof:yw(i.proof)}),s.push(US(1,e))}}Bn(this,re,t),Bn(this,ie,s)}get kzg(){return Pn(this,ae)}set kzg(e){Bn(this,ae,e)}get hash(){return null==this.signature?null:Mk(Cn(this,oe,le).call(this,!0,!1))}get unsignedHash(){return Mk(this.unsignedSerialized)}get from(){return null==this.signature?null:(e=this.unsignedHash,t=this.signature,function(e){let t;return t="string"==typeof e?KA.computePublicKey(e,!1):e.publicKey,eE(Mk("0x"+t.substring(4)).substring(26))}(KA.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return null==this.signature?null:KA.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return Cn(this,oe,le).call(this,!0,!0)}get unsignedSerialized(){return Cn(this,oe,le).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,s=null!=this.accessList,n=null!=Pn(this,ne)||Pn(this,ie);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&ow(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ow(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ow(0!==this.type||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return null!=this.type?i.push(this.type):t?i.push(2):e?(i.push(1),s||i.push(0)):s?(i.push(1),i.push(2)):(n&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return e.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new e;if("string"==typeof t){const s=dw(t);if(s[0]>=127)return e.from(function(e){const t=cx(e);lw(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const s={type:0,nonce:zS(t[0],"nonce"),gasPrice:VS(t[1],"gasPrice"),gasLimit:VS(t[2],"gasLimit"),to:GS(t[3]),value:VS(t[4],"value"),data:yw(t[5]),chainId:IS};if(6===t.length)return s;const n=VS(t[6],"v"),i=VS(t[7],"r"),a=VS(t[8],"s");if(i===IS&&a===IS)s.chainId=n;else{let e=(n-FS)/_S;e<IS&&(e=IS),s.chainId=e,lw(e!==IS||n===NS||n===LS,"non-canonical legacy v","v",t[6]),s.signature=qA.from({r:kw(t[7],32),s:kw(t[8],32),v:n})}return s}(s));switch(s[0]){case 1:return e.from(function(e){const t=cx(dw(e).slice(1));lw(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",yw(e));const s={type:1,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),gasPrice:VS(t[2],"gasPrice"),gasLimit:VS(t[3],"gasLimit"),to:GS(t[4]),value:VS(t[5],"value"),data:yw(t[6]),accessList:HS(t[7],"accessList")};return 8===t.length||KS(s,t.slice(8)),s}(s));case 2:return e.from(function(e){const t=cx(dw(e).slice(1));lw(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",yw(e));const s={type:2,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),maxPriorityFeePerGas:VS(t[2],"maxPriorityFeePerGas"),maxFeePerGas:VS(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:VS(t[4],"gasLimit"),to:GS(t[5]),value:VS(t[6],"value"),data:yw(t[7]),accessList:HS(t[8],"accessList")};return 9===t.length||KS(s,t.slice(9)),s}(s));case 3:return e.from(function(e){let t=cx(dw(e).slice(1)),s="3",n=null;if(4===t.length&&Array.isArray(t[0])){s="3 (network format)";const e=t[1],i=t[2],a=t[3];lw(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),lw(Array.isArray(i),"invalid network format: commitments not an array","fields[2]",i),lw(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),lw(e.length===i.length,"invalid network format: blobs/commitments length mismatch","fields",t),lw(e.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let s=0;s<t[1].length;s++)n.push({data:e[s],commitment:i[s],proof:a[s]});t=t[0]}lw(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${s}`,"data",yw(e));const i={type:3,chainId:VS(t[0],"chainId"),nonce:zS(t[1],"nonce"),maxPriorityFeePerGas:VS(t[2],"maxPriorityFeePerGas"),maxFeePerGas:VS(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:VS(t[4],"gasLimit"),to:GS(t[5]),value:VS(t[6],"value"),data:yw(t[7]),accessList:HS(t[8],"accessList"),maxFeePerBlobGas:VS(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(i.blobs=n),lw(null!=i.to,`invalid address for transaction type: ${s}`,"data",e),lw(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let a=0;a<i.blobVersionedHashes.length;a++)lw(fw(i.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",e);return 11===t.length||KS(i,t.slice(11)),i}(s))}ow(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new e;return null!=t.type&&(s.type=t.type),null!=t.to&&(s.to=t.to),null!=t.nonce&&(s.nonce=t.nonce),null!=t.gasLimit&&(s.gasLimit=t.gasLimit),null!=t.gasPrice&&(s.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(s.maxFeePerGas=t.maxFeePerGas),null!=t.maxFeePerBlobGas&&(s.maxFeePerBlobGas=t.maxFeePerBlobGas),null!=t.data&&(s.data=t.data),null!=t.value&&(s.value=t.value),null!=t.chainId&&(s.chainId=t.chainId),null!=t.signature&&(s.signature=qA.from(t.signature)),null!=t.accessList&&(s.accessList=t.accessList),null!=t.blobVersionedHashes&&(s.blobVersionedHashes=t.blobVersionedHashes),null!=t.kzg&&(s.kzg=t.kzg),null!=t.blobs&&(s.blobs=t.blobs),null!=t.hash&&(lw(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),lw(s.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(lw(s.isSigned(),"unsigned transaction cannot define '.from'","tx",t),lw(s.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),s}};const ZS=new Uint8Array(32);ZS.fill(0);const XS=BigInt(-1),YS=BigInt(0),JS=BigInt(1),eP=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tP=Iw(JS,32),sP=Iw(YS,32),nP={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},iP=["name","version","chainId","verifyingContract","salt"];function aP(e){return function(t){return lw("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const rP={name:aP("name"),version:aP("version"),chainId:function(e){const t=Bw(e,"domain.chainId");return lw(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Nw(t)},verifyingContract:function(e){try{return eE(e).toLowerCase()}catch(t){}lw(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=dw(e,"domain.salt");return lw(32===t.length,'invalid domain value "salt"',"domain.salt",e),yw(t)}};function oP(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const s=""===t[1],n=parseInt(t[2]);lw(n%8==0&&0!==n&&n<=256&&t[2]===String(n),"invalid numeric width","type",e);const i=Tw(eP,s?n-1:n),a=s?(i+JS)*XS:YS;return function(t){const n=Bw(t,"value");return lw(n>=a&&n<=i,`value out-of-bounds for ${e}`,"value",n),Iw(s?Pw(n,256):n,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const s=parseInt(t[1]);return lw(0!==s&&s<=32&&t[1]===String(s),"invalid bytes width","type",e),function(t){return lw(dw(t).length===s,`invalid length for ${e}`,"value",t),function(e){const t=dw(e),s=t.length%32;return s?bw([t,ZS.slice(s)]):yw(t)}(t)}}}switch(e){case"address":return function(e){return kw(eE(e),32)};case"bool":return function(e){return e?tP:sP};case"bytes":return function(e){return Mk(e)};case"string":return function(e){return PE(e)}}return null}function lP(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function cP(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}ce=new WeakMap,he=new WeakMap,ue=new WeakMap,de=new WeakSet,pe=function(e){{const t=oP(e);if(t)return t}const t=cP(e).array;if(t){const e=t.prefix,s=this.getEncoder(e);return n=>{lw(-1===t.count||t.count===n.length,`array length mismatch; expected length ${t.count}`,"value",n);let i=n.map(s);return Pn(this,he).has(e)&&(i=i.map(Mk)),Mk(bw(i))}}const s=this.types[e];if(s){const t=PE(Pn(this,he).get(e));return e=>{const n=s.map((({name:t,type:s})=>{const n=this.getEncoder(s)(e[t]);return Pn(this,he).has(s)?Mk(n):n}));return n.unshift(t),bw(n)}}lw(!1,`unknown type: ${e}`,"type",e)};let hP=class e{constructor(e){Tn(this,de),En(this,"primaryType"),Tn(this,ce),Tn(this,he),Tn(this,ue),Bn(this,he,new Map),Bn(this,ue,new Map);const t=new Map,s=new Map,n=new Map,i={};Object.keys(e).forEach((a=>{i[a]=e[a].map((({name:t,type:s})=>{let{base:n,index:i}=cP(s);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(i||"")}})),t.set(a,new Set),s.set(a,[]),n.set(a,new Set)})),Bn(this,ce,JSON.stringify(i));for(const r in i){const n=new Set;for(const a of i[r]){lw(!n.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(r)}`,"types",e),n.add(a.name);const i=cP(a.type).base;lw(i!==r,`circular type reference to ${JSON.stringify(i)}`,"types",e),oP(i)||(lw(s.has(i),`unknown type ${JSON.stringify(i)}`,"types",e),s.get(i).push(r),t.get(r).add(i))}}const a=Array.from(s.keys()).filter((e=>0===s.get(e).length));lw(0!==a.length,"missing primary type","types",e),lw(1===a.length,`ambiguous primary types or unused types: ${a.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),sw(this,{primaryType:a[0]}),function i(a,r){lw(!r.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",e),r.add(a);for(const e of t.get(a))if(s.has(e)){i(e,r);for(const t of r)n.get(t).add(e)}r.delete(a)}(this.primaryType,new Set);for(const[r,o]of n){const e=Array.from(o);e.sort(),Pn(this,he).set(r,lP(r,i[r])+e.map((e=>lP(e,i[e]))).join(""))}}get types(){return JSON.parse(Pn(this,ce))}getEncoder(e){let t=Pn(this,ue).get(e);return t||(t=Cn(this,de,pe).call(this,e),Pn(this,ue).set(e,t)),t}encodeType(e){const t=Pn(this,he).get(e);return lw(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Mk(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,s){if(oP(e))return s(e,t);const n=cP(e).array;if(n)return lw(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map((e=>this._visit(n.prefix,e,s)));const i=this.types[e];if(i)return i.reduce(((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],s),e)),{});lw(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(t){return new e(t)}static getPrimaryType(t){return e.from(t).primaryType}static hashStruct(t,s,n){return e.from(s).hashStruct(t,n)}static hashDomain(t){const s=[];for(const e in t){if(null==t[e])continue;const n=nP[e];lw(n,`invalid typed-data domain key: ${JSON.stringify(e)}`,"domain",t),s.push({name:e,type:n})}return s.sort(((e,t)=>iP.indexOf(e.name)-iP.indexOf(t.name))),e.hashStruct("EIP712Domain",{EIP712Domain:s},t)}static encode(t,s,n){return bw(["0x1901",e.hashDomain(t),e.from(s).hash(n)])}static hash(t,s,n){return Mk(e.encode(t,s,n))}static async resolveNames(t,s,n,i){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const a={};t.verifyingContract&&!fw(t.verifyingContract,20)&&(a[t.verifyingContract]="0x");const r=e.from(s);r.visit(n,((e,t)=>("address"!==e||fw(t,20)||(a[t]="0x"),t)));for(const e in a)a[e]=await i(e);return t.verifyingContract&&a[t.verifyingContract]&&(t.verifyingContract=a[t.verifyingContract]),{domain:t,value:n=r.visit(n,((e,t)=>"address"===e&&a[t]?a[t]:t))}}static getPayload(t,s,n){e.hashDomain(t);const i={},a=[];iP.forEach((e=>{const s=t[e];null!=s&&(i[e]=rP[e](s),a.push({name:e,type:nP[e]}))}));const r=e.from(s);s=r.types;const o=Object.assign({},s);return lw(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",s),o.EIP712Domain=a,r.encode(n),{types:o,domain:i,primaryType:r.primaryType,message:r.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return yw(dw(t));if(e.match(/^u?int/))return Bw(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return lw("string"==typeof t,"invalid string","value",t),t}lw(!1,"unsupported type","type",e)}))}}};function uP(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const dP=uP("external public payable override".split(" ")),pP="constant external internal payable private public pure view override",fP=uP(pP.split(" ")),mP="constructor error event fallback function receive struct",gP=uP(mP.split(" ")),yP="calldata memory storage payable indexed",bP=uP(yP.split(" ")),vP=uP([mP,yP,"tuple returns",pP].join(" ").split(" ")),wP={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},xP=new RegExp("^(\\s*)"),kP=new RegExp("^([0-9]+)"),AP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),EP=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),SP=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),PP=class e{constructor(e){Tn(this,ge),Tn(this,fe),Tn(this,me),Bn(this,fe,0),Bn(this,me,e.slice())}get offset(){return Pn(this,fe)}get length(){return Pn(this,me).length-Pn(this,fe)}clone(){return new e(Pn(this,me))}reset(){Bn(this,fe,0)}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=Cn(this,ge,ye).call(this,Pn(this,fe)+1,e.match+1);return Bn(this,fe,e.match+1),t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;Pn(this,fe)<e.match-1;){const e=this.peek().linkNext;t.push(Cn(this,ge,ye).call(this,Pn(this,fe)+1,e)),Bn(this,fe,e)}return Bn(this,fe,e.match+1),t}peek(){if(Pn(this,fe)>=Pn(this,me).length)throw new Error("out-of-bounds");return Pn(this,me)[Pn(this,fe)]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Mn(this,fe)._++,e}toString(){const e=[];for(let t=Pn(this,fe);t<Pn(this,me).length;t++){const s=Pn(this,me)[t];e.push(`${s.type}:${s.text}`)}return`<TokenString ${e.join(" ")}>`}};fe=new WeakMap,me=new WeakMap,ge=new WeakSet,ye=function(e=0,t=0){return new PP(Pn(this,me).slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))};let TP=PP;function BP(e){const t=[],s=t=>{const s=a<e.length?JSON.stringify(e[a]):"$EOI";throw new Error(`invalid token ${s} at ${a}: ${t}`)};let n=[],i=[],a=0;for(;a<e.length;){let r=e.substring(a),o=r.match(xP);o&&(a+=o[1].length,r=e.substring(a));const l={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};t.push(l);let c=wP[r[0]]||"";if(c){if(l.type=c,l.text=r[0],a++,"OPEN_PAREN"===c)n.push(t.length-1),i.push(t.length-1);else if("CLOSE_PAREN"==c)0===n.length&&s("no matching open bracket"),l.match=n.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const s=t.pop().text;e=s+e,t[t.length-1].value=Dw(s)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=r.match(AP),o){if(l.text=o[1],a+=l.text.length,vP.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(SP)){l.type="TYPE";continue}l.type="ID"}else{if(o=r.match(kP),!o)throw new Error(`unexpected token ${JSON.stringify(r[0])} at position ${a}`);l.text=o[1],l.type="NUMBER",a+=l.text.length}}return new TP(t.map((e=>Object.freeze(e))))}function CP(e,t){let s=[];for(const n in t.keys())e.has(n)&&s.push(n);if(s.length>1)throw new Error(`conflicting types: ${s.join(", ")}`)}function MP(e,t){if(t.peekKeyword(gP)){const s=t.pop().text;if(s!==e)throw new Error(`expected ${e}, got ${s}`)}return t.popType("ID")}function RP(e,t){const s=new Set;for(;;){const n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),s.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);s.add(n)}return Object.freeze(s)}function DP(e){let t=RP(e,fP);return CP(t,uP("constant payable nonpayable".split(" "))),CP(t,uP("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function IP(e,t){return e.popParams().map((e=>qP.from(e,t)))}function _P(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Bw(e.pop().text);throw new Error("invalid gas")}return null}function NP(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const LP=new RegExp(/^(.*)\[([0-9]*)\]$/);function FP(e){const t=e.match(SP);if(lw(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const s=parseInt(t[2]);lw(0!==s&&s<=32,"invalid bytes length","type",e)}else if(t[3]){const s=parseInt(t[3]);lw(0!==s&&s<=256&&s%8==0,"invalid numeric width","type",e)}return e}const OP={},jP=Symbol.for("_ethers_internal"),UP="_ParamTypeInternal",GP="_ErrorInternal",HP="_EventInternal",zP="_ConstructorInternal",VP="_FallbackInternal",WP="_FunctionInternal",$P="_StructInternal";be=new WeakSet,ve=function(e,t,s,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const i=this.arrayChildren,a=t.slice();return a.forEach(((t,n)=>{var r;Cn(r=i,be,ve).call(r,e,t,s,(e=>{a[n]=e}))})),void n(a)}if(this.isTuple()){const i=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");a=i.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(a.length!==this.components.length)throw new Error("array is wrong length");return a.forEach(((t,n)=>{var r;Cn(r=i[n],be,ve).call(r,e,t,s,(e=>{a[n]=e}))})),void n(a)}const i=s(this.type,t);i.then?e.push(async function(){n(await i)}()):n(i)};let qP=class e{constructor(e,t,s,n,i,a,r,o){if(Tn(this,be),En(this,"name"),En(this,"type"),En(this,"baseType"),En(this,"indexed"),En(this,"components"),En(this,"arrayLength"),En(this,"arrayChildren"),hw(e,OP,"ParamType"),Object.defineProperty(this,jP,{value:UP}),a&&(a=Object.freeze(a.slice())),"array"===n){if(null==r||null==o)throw new Error("")}else if(null!=r||null!=o)throw new Error("");if("tuple"===n){if(null==a)throw new Error("")}else if(null!=a)throw new Error("");sw(this,{name:t,type:s,baseType:n,indexed:i,components:a,arrayLength:r,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const s={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this;return e.map((e=>s.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const s=this;return e.map(((e,n)=>s.components[n].walk(e,t)))}return t(this.type,e)}async walkAsync(e,t){const s=[],n=[e];return Cn(this,be,ve).call(this,s,e,t,(e=>{n[0]=e})),s.length&&await Promise.all(s),n[0]}static from(t,s){if(e.isParamType(t))return t;if("string"==typeof t)try{return e.from(BP(t),s)}catch(o){lw(!1,"invalid param type","obj",t)}else if(t instanceof TP){let n="",i="",a=null;RP(t,uP(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(i="tuple",a=t.popParams().map((t=>e.from(t))),n=`tuple(${a.map((e=>e.format())).join(",")})`):(n=FP(t.popType("TYPE")),i=n);let r=null,o=null;for(;t.length&&t.peekType("BRACKET");){const s=t.pop();r=new e(OP,"",n,i,null,a,o,r),o=s.value,n+=s.text,i="array",a=null}let l=null;if(RP(t,bP).has("indexed")){if(!s)throw new Error("");l=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new e(OP,c,n,i,l,a,o,r)}const n=t.name;lw(!n||"string"==typeof n&&n.match(EP),"invalid name","obj.name",n);let i=t.indexed;null!=i&&(lw(s,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let a=t.type,r=a.match(LP);if(r){const s=parseInt(r[2]||"-1"),o=e.from({type:r[1],components:t.components});return new e(OP,n||"",a,"array",i,null,s,o)}if("tuple"===a||a.startsWith("tuple(")||a.startsWith("(")){const s=null!=t.components?t.components.map((t=>e.from(t))):null;return new e(OP,n||"",a,"tuple",i,s,null,null)}return a=FP(t.type),new e(OP,n||"",a,a,i,null,null,null)}static isParamType(e){return e&&e[jP]===UP}};class KP{constructor(e,t,s){En(this,"type"),En(this,"inputs"),hw(e,OP,"Fragment"),sw(this,{type:t,inputs:s=Object.freeze(s.slice())})}static from(e){if("string"==typeof e){try{KP.from(JSON.parse(e))}catch(RV){}return KP.from(BP(e))}if(e instanceof TP)switch(e.peekKeyword(gP)){case"constructor":return JP.from(e);case"error":return XP.from(e);case"event":return YP.from(e);case"fallback":case"receive":return eT.from(e);case"function":return tT.from(e);case"struct":return sT.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return JP.from(e);case"error":return XP.from(e);case"event":return YP.from(e);case"fallback":case"receive":return eT.from(e);case"function":return tT.from(e);case"struct":return sT.from(e)}ow(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}lw(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return JP.isFragment(e)}static isError(e){return XP.isFragment(e)}static isEvent(e){return YP.isFragment(e)}static isFunction(e){return tT.isFragment(e)}static isStruct(e){return sT.isFragment(e)}}class QP extends KP{constructor(e,t,s,n){super(e,t,n),En(this,"name"),lw("string"==typeof s&&s.match(EP),"invalid identifier","name",s),n=Object.freeze(n.slice()),sw(this,{name:s})}}function ZP(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class XP extends QP{constructor(e,t,s){super(e,"error",t,s),Object.defineProperty(this,jP,{value:GP})}get selector(){return PE(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+ZP(e,this.inputs)),t.join(" ")}static from(e){if(XP.isFragment(e))return e;if("string"==typeof e)return XP.from(BP(e));if(e instanceof TP){const t=MP("error",e),s=IP(e);return NP(e),new XP(OP,t,s)}return new XP(OP,e.name,e.inputs?e.inputs.map(qP.from):[])}static isFragment(e){return e&&e[jP]===GP}}class YP extends QP{constructor(e,t,s,n){super(e,"event",t,s),En(this,"anonymous"),Object.defineProperty(this,jP,{value:HP}),sw(this,{anonymous:n})}get topicHash(){return PE(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+ZP(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map((e=>qP.from(e))),new YP(OP,e,t,!1).topicHash}static from(e){if(YP.isFragment(e))return e;if("string"==typeof e)try{return YP.from(BP(e))}catch(t){lw(!1,"invalid event fragment","obj",e)}else if(e instanceof TP){const t=MP("event",e),s=IP(e,!0),n=!!RP(e,uP(["anonymous"])).has("anonymous");return NP(e),new YP(OP,t,s,n)}return new YP(OP,e.name,e.inputs?e.inputs.map((e=>qP.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[jP]===HP}}class JP extends KP{constructor(e,t,s,n,i){super(e,t,s),En(this,"payable"),En(this,"gas"),Object.defineProperty(this,jP,{value:zP}),sw(this,{payable:n,gas:i})}format(e){if(ow(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${ZP(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(JP.isFragment(e))return e;if("string"==typeof e)try{return JP.from(BP(e))}catch(t){lw(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof TP){RP(e,uP(["constructor"]));const t=IP(e),s=!!RP(e,dP).has("payable"),n=_P(e);return NP(e),new JP(OP,"constructor",t,s,n)}return new JP(OP,"constructor",e.inputs?e.inputs.map(qP.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[jP]===zP}}class eT extends KP{constructor(e,t,s){super(e,"fallback",t),En(this,"payable"),Object.defineProperty(this,jP,{value:VP}),sw(this,{payable:s})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(eT.isFragment(e))return e;if("string"==typeof e)try{return eT.from(BP(e))}catch(t){lw(!1,"invalid fallback fragment","obj",e)}else if(e instanceof TP){const t=e.toString();if(lw(e.peekKeyword(uP(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(uP(["fallback","receive"]))){const t=IP(e);return lw(0===t.length,"receive cannot have arguments","obj.inputs",t),RP(e,uP(["payable"])),NP(e),new eT(OP,[],!0)}let s=IP(e);s.length?lw(1===s.length&&"bytes"===s[0].type,"invalid fallback inputs","obj.inputs",s.map((e=>e.format("minimal"))).join(", ")):s=[qP.from("bytes")];const n=DP(e);if(lw("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),RP(e,uP(["returns"])).has("returns")){const t=IP(e);lw(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return NP(e),new eT(OP,s,"payable"===n)}if("receive"===e.type)return new eT(OP,[],!0);if("fallback"===e.type){const t=[qP.from("bytes")],s="payable"===e.stateMutability;return new eT(OP,t,s)}lw(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[jP]===VP}}class tT extends QP{constructor(e,t,s,n,i,a){super(e,"function",t,n),En(this,"constant"),En(this,"outputs"),En(this,"stateMutability"),En(this,"payable"),En(this,"gas"),Object.defineProperty(this,jP,{value:WP}),sw(this,{constant:"view"===s||"pure"===s,gas:a,outputs:i=Object.freeze(i.slice()),payable:"payable"===s,stateMutability:s})}get selector(){return PE(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+ZP(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(ZP(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map((e=>qP.from(e))),new tT(OP,e,"view",t,[],null).selector}static from(e){if(tT.isFragment(e))return e;if("string"==typeof e)try{return tT.from(BP(e))}catch(s){lw(!1,"invalid function fragment","obj",e)}else if(e instanceof TP){const t=MP("function",e),s=IP(e),n=DP(e);let i=[];RP(e,uP(["returns"])).has("returns")&&(i=IP(e));const a=_P(e);return NP(e),new tT(OP,t,n,s,i,a)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new tT(OP,e.name,t,e.inputs?e.inputs.map(qP.from):[],e.outputs?e.outputs.map(qP.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[jP]===WP}}class sT extends QP{constructor(e,t,s){super(e,"struct",t,s),Object.defineProperty(this,jP,{value:$P})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return sT.from(BP(e))}catch(t){lw(!1,"invalid struct fragment","obj",e)}else if(e instanceof TP){const t=MP("struct",e),s=IP(e);return NP(e),new sT(OP,t,s)}return new sT(OP,e.name,e.inputs?e.inputs.map(qP.from):[])}static isFragment(e){return e&&e[jP]===$P}}const nT=new Map;nT.set(0,"GENERIC_PANIC"),nT.set(1,"ASSERT_FALSE"),nT.set(17,"OVERFLOW"),nT.set(18,"DIVIDE_BY_ZERO"),nT.set(33,"ENUM_RANGE_ERROR"),nT.set(34,"BAD_STORAGE_DATA"),nT.set(49,"STACK_UNDERFLOW"),nT.set(50,"ARRAY_RANGE_ERROR"),nT.set(65,"OUT_OF_MEMORY"),nT.set(81,"UNINITIALIZED_FUNCTION_CALL");const iT=new RegExp(/^bytes([0-9]*)$/),aT=new RegExp(/^(u?int)([0-9]*)$/);let rT=null,oT=1024;we=new WeakSet,xe=function(e){if(e.isArray())return new pE(Cn(this,we,xe).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new SE(e.components.map((e=>Cn(this,we,xe).call(this,e))),e.name);switch(e.baseType){case"address":return new cE(e.name);case"bool":return new fE(e.name);case"string":return new EE(e.name);case"bytes":return new gE(e.name);case"":return new vE(e.name)}let t=e.type.match(aT);if(t){let s=parseInt(t[2]||"256");return lw(0!==s&&s<=256&&s%8==0,"invalid "+t[1]+" bit length","param",e),new AE(s/8,"int"===t[1],e.name)}if(t=e.type.match(iT),t){let s=parseInt(t[1]);return lw(0!==s&&s<=32,"invalid bytes length","param",e),new yE(s,e.name)}lw(!1,"invalid type","type",e.type)};let lT=class e{constructor(){Tn(this,we)}getDefaultValue(e){const t=e.map((e=>Cn(this,we,xe).call(this,qP.from(e))));return new SE(t,"_").defaultValue()}encode(e,t){cw(t.length,e.length,"types/values length mismatch");const s=e.map((e=>Cn(this,we,xe).call(this,qP.from(e)))),n=new SE(s,"_"),i=new Px;return n.encode(i,t),i.data}decode(e,t,s){const n=e.map((e=>Cn(this,we,xe).call(this,qP.from(e))));return new SE(n,"_").decode(new Tx(t,s,oT))}static _setDefaultMaxInflation(e){lw("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),oT=e}static defaultAbiCoder(){return null==rT&&(rT=new e),rT}static getBuiltinCallException(t,s,n){return function(e,t,s,n){let i="missing revert data",a=null,r=null;if(s){i="execution reverted";const e=dw(s);if(s=yw(s),0===e.length)i+=" (no data present; likely require(false) occurred",a="require(false)";else if(e.length%32!=4)i+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===yw(e.slice(0,4)))try{a=n.decode(["string"],e.slice(4))[0],r={signature:"Error(string)",name:"Error",args:[a]},i+=`: ${JSON.stringify(a)}`}catch(l){i+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===yw(e.slice(0,4)))try{const t=Number(n.decode(["uint256"],e.slice(4))[0]);r={signature:"Panic(uint256)",name:"Panic",args:[t]},a=`Panic due to ${nT.get(t)||"UNKNOWN"}(${t})`,i+=`: ${a}`}catch(l){i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const o={to:t.to?eE(t.to):null,data:t.data||"0x"};return t.from&&(o.from=eE(t.from)),rw(i,"CALL_EXCEPTION",{action:e,data:s,reason:a,transaction:o,invocation:null,revert:r})}(t,s,n,e.defaultAbiCoder())}};class cT{constructor(e,t,s){En(this,"fragment"),En(this,"name"),En(this,"signature"),En(this,"topic"),En(this,"args");const n=e.name,i=e.format();sw(this,{fragment:e,name:n,signature:i,topic:t,args:s})}}class hT{constructor(e,t,s,n){En(this,"fragment"),En(this,"name"),En(this,"args"),En(this,"signature"),En(this,"selector"),En(this,"value");const i=e.name,a=e.format();sw(this,{fragment:e,name:i,args:s,signature:a,selector:t,value:n})}}class uT{constructor(e,t,s){En(this,"fragment"),En(this,"name"),En(this,"args"),En(this,"signature"),En(this,"selector");const n=e.name,i=e.format();sw(this,{fragment:e,name:n,args:s,signature:i,selector:t})}}class dT{constructor(e){En(this,"hash"),En(this,"_isIndexed"),sw(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!(!e||!e._isIndexed)}}const pT={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},fT={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&pT[e.toString()]&&(t=pT[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};ke=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Pe=new WeakSet,Te=function(e,t,s){if(fw(e)){const t=e.toLowerCase();for(const e of Pn(this,Ee).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const n=[];for(const[t,s]of Pn(this,Ee))t.split("(")[0]===e&&n.push(s);if(t){const e=t.length>0?t[t.length-1]:null;let s=t.length,i=!0;lE.isTyped(e)&&"overrides"===e.type&&(i=!1,s--);for(let t=n.length-1;t>=0;t--){const e=n[t].inputs.length;e===s||i&&e===s-1||n.splice(t,1)}for(let a=n.length-1;a>=0;a--){const e=n[a].inputs;for(let s=0;s<t.length;s++)if(lE.isTyped(t[s])){if(s>=e.length){if("overrides"===t[s].type)continue;n.splice(a,1);break}if(t[s].type!==e[s].baseType){n.splice(a,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}return 0===n.length?null:(n.length>1&&s&&lw(!1,`ambiguous function description (i.e. matches ${n.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),n[0])}return Pn(this,Ee).get(tT.from(e).format())||null},Be=function(e,t,s){if(fw(e)){const t=e.toLowerCase();for(const e of Pn(this,Ae).values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const n=[];for(const[t,s]of Pn(this,Ae))t.split("(")[0]===e&&n.push(s);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){const s=n[e].inputs;for(let i=0;i<t.length;i++)if(lE.isTyped(t[i])&&t[i].type!==s[i].baseType){n.splice(e,1);break}}}return 0===n.length?null:(n.length>1&&s&&lw(!1,`ambiguous event description (i.e. matches ${n.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),n[0])}return Pn(this,Ae).get(YP.from(e).format())||null};let mT=class e{constructor(e){Tn(this,Pe),En(this,"fragments"),En(this,"deploy"),En(this,"fallback"),En(this,"receive"),Tn(this,ke),Tn(this,Ae),Tn(this,Ee),Tn(this,Se);let t=[];t="string"==typeof e?JSON.parse(e):e,Bn(this,Ee,new Map),Bn(this,ke,new Map),Bn(this,Ae,new Map);const s=[];for(const r of t)try{s.push(KP.from(r))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(r)}:`,a.message)}sw(this,{fragments:Object.freeze(s)});let n=null,i=!1;Bn(this,Se,this.getAbiCoder()),this.fragments.forEach(((e,t)=>{let s;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void sw(this,{deploy:e});case"fallback":return void(0===e.inputs.length?i=!0:(lw(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),n=e,i=n.payable));case"function":s=Pn(this,Ee);break;case"event":s=Pn(this,Ae);break;case"error":s=Pn(this,ke);break;default:return}const a=e.format();s.has(a)||s.set(a,e)})),this.deploy||sw(this,{deploy:JP.from("constructor()")}),sw(this,{fallback:n,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return lT.defaultAbiCoder()}getFunctionName(e){const t=Cn(this,Pe,Te).call(this,e,null,!1);return lw(t,"no matching function","key",e),t.name}hasFunction(e){return!!Cn(this,Pe,Te).call(this,e,null,!1)}getFunction(e,t){return Cn(this,Pe,Te).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(Pn(this,Ee).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,Ee).get(n),s)}}getEventName(e){const t=Cn(this,Pe,Be).call(this,e,null,!1);return lw(t,"no matching event","key",e),t.name}hasEvent(e){return!!Cn(this,Pe,Be).call(this,e,null,!1)}getEvent(e,t){return Cn(this,Pe,Be).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(Pn(this,Ae).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,Ae).get(n),s)}}getError(e,t){if(fw(e)){const t=e.toLowerCase();if(fT[t])return XP.from(fT[t].signature);for(const e of Pn(this,ke).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[s,n]of Pn(this,ke))s.split("(")[0]===e&&t.push(n);return 0===t.length?"Error"===e?XP.from("error Error(string)"):"Panic"===e?XP.from("error Panic(uint256)"):null:(t.length>1&&lw(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e),t[0])}if("Error(string)"===(e=XP.from(e).format()))return XP.from("error Error(string)");if("Panic(uint256)"===e)return XP.from("error Panic(uint256)");return Pn(this,ke).get(e)||null}forEachError(e){const t=Array.from(Pn(this,ke).keys());t.sort(((e,t)=>e.localeCompare(t)));for(let s=0;s<t.length;s++){const n=t[s];e(Pn(this,ke).get(n),s)}}_decodeParams(e,t){return Pn(this,Se).decode(e,t)}_encodeParams(e,t){return Pn(this,Se).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);lw(t,"unknown error","fragment",e),e=t}return lw(ww(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,ww(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);lw(t,"unknown error","fragment",e),e=t}return bw([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return lw(ww(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,ww(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return bw([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}let s="invalid length for result data";const n=pw(t);if(n.length%32==0)try{return Pn(this,Se).decode(e.outputs,n)}catch(i){s="could not decode result data"}ow(!1,s,"BAD_DATA",{value:yw(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){const s=dw(e,"data"),n=lT.getBuiltinCallException("call",t,s);if(n.message.startsWith("execution reverted (unknown custom error)")){const e=yw(s.slice(0,4)),t=this.getError(e);if(t)try{const e=Pn(this,Se).decode(t.inputs,s.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(RV){n.message="execution reverted (coult not decode custom error)"}}const i=this.parseTransaction(t);return i&&(n.invocation={method:i.name,signature:i.signature,args:i.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);lw(t,"unknown function","fragment",e),e=t}return yw(Pn(this,Se).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}ow(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const s=[];e.anonymous||s.push(e.topicHash);const n=(e,t)=>"string"===e.type?PE(t):"bytes"===e.type?Mk(yw(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=Iw(t):e.type.match(/^bytes/)?t=xw(t,32,!1):"address"===e.type&&Pn(this,Se).encode(["address"],[t]),kw(yw(t),32));for(t.forEach(((t,i)=>{const a=e.inputs[i];a.indexed?null==t?s.push(null):"array"===a.baseType||"tuple"===a.baseType?lw(!1,"filtering with tuples or arrays not supported","contract."+a.name,t):Array.isArray(t)?s.push(t.map((e=>n(a,e)))):s.push(n(a,t)):lw(null==t,"cannot filter non-indexed parameters; must be null","contract."+a.name,t)}));s.length&&null===s[s.length-1];)s.pop();return s}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}const s=[],n=[],i=[];return e.anonymous||s.push(e.topicHash),lw(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,a)=>{const r=t[a];if(e.indexed)if("string"===e.type)s.push(PE(r));else if("bytes"===e.type)s.push(Mk(r));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");s.push(Pn(this,Se).encode([e.type],[r]))}else n.push(e),i.push(r)})),{data:Pn(this,Se).encode(n,i),topics:s}}decodeEventLog(e,t,s){if("string"==typeof e){const t=this.getEvent(e);lw(t,"unknown event","eventFragment",e),e=t}if(null!=s&&!e.anonymous){const t=e.topicHash;lw(fw(s[0],32)&&s[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",s[0]),s=s.slice(1)}const n=[],i=[],a=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(qP.from({type:"bytes32",name:e.name})),a.push(!0)):(n.push(e),a.push(!1)):(i.push(e),a.push(!1))}));const r=null!=s?Pn(this,Se).decode(n,bw(s)):null,o=Pn(this,Se).decode(i,t,!0),l=[],c=[];let h=0,u=0;return e.inputs.forEach(((e,t)=>{let s=null;if(e.indexed)if(null==r)s=new dT(null);else if(a[t])s=new dT(r[u++]);else try{s=r[u++]}catch(n){s=n}else try{s=o[h++]}catch(n){s=n}l.push(s),c.push(e.name||null)})),Ax.fromItems(l,c)}parseTransaction(e){const t=dw(e.data,"tx.data"),s=Bw(null!=e.value?e.value:0,"tx.value"),n=this.getFunction(yw(t.slice(0,4)));if(!n)return null;const i=Pn(this,Se).decode(n.inputs,t.slice(4));return new hT(n,n.selector,i,s)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new cT(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=yw(e),s=this.getError(ww(t,0,4));if(!s)return null;const n=Pn(this,Se).decode(s.inputs,ww(t,4));return new uT(s,s.selector,n)}static from(t){return t instanceof e?t:"string"==typeof t?new e(JSON.parse(t)):"function"==typeof t.formatJson?new e(t.formatJson()):"function"==typeof t.format?new e(t.format("json")):new e(t)}};const gT=BigInt(0);function yT(e){return null==e?null:e}function bT(e){return null==e?null:e.toString()}class vT{constructor(e,t,s){En(this,"gasPrice"),En(this,"maxFeePerGas"),En(this,"maxPriorityFeePerGas"),sw(this,{gasPrice:yT(e),maxFeePerGas:yT(t),maxPriorityFeePerGas:yT(s)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:s}=this;return{_type:"FeeData",gasPrice:bT(e),maxFeePerGas:bT(t),maxPriorityFeePerGas:bT(s)}}}function wT(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=yw(e.data));const s="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of s)i in e&&null!=e[i]&&(t[i]=Bw(e[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)i in e&&null!=e[i]&&(t[i]=Dw(e[i],`request.${i}`));return e.accessList&&(t.accessList=DS(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map((e=>mw(e)?yw(e):Object.assign({},e)))),t}class xT{constructor(e,t){En(this,"provider"),En(this,"number"),En(this,"hash"),En(this,"timestamp"),En(this,"parentHash"),En(this,"parentBeaconBlockRoot"),En(this,"nonce"),En(this,"difficulty"),En(this,"gasLimit"),En(this,"gasUsed"),En(this,"stateRoot"),En(this,"receiptsRoot"),En(this,"blobGasUsed"),En(this,"excessBlobGas"),En(this,"miner"),En(this,"prevRandao"),En(this,"extraData"),En(this,"baseFeePerGas"),Tn(this,Ce),Bn(this,Ce,e.transactions.map((e=>"string"!=typeof e?new ET(e,t):e))),sw(this,{provider:t,hash:yT(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:yT(e.prevRandao),extraData:e.extraData,baseFeePerGas:yT(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return Pn(this,Ce).map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=Pn(this,Ce).slice();return 0===e.length?[]:(ow("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:s,gasLimit:n,gasUsed:i,hash:a,miner:r,prevRandao:o,nonce:l,number:c,parentHash:h,parentBeaconBlockRoot:u,stateRoot:d,receiptsRoot:p,timestamp:f,transactions:m}=this;return{_type:"Block",baseFeePerGas:bT(e),difficulty:bT(t),extraData:s,gasLimit:bT(n),gasUsed:bT(i),blobGasUsed:bT(this.blobGasUsed),excessBlobGas:bT(this.excessBlobGas),hash:a,miner:r,prevRandao:o,nonce:l,number:c,parentHash:h,timestamp:f,parentBeaconBlockRoot:u,stateRoot:d,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Pn(this,Ce).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=Pn(this,Ce)[e];else{const s=e.toLowerCase();for(const e of Pn(this,Ce)){if("string"==typeof e){if(e!==s)continue;t=e;break}if(e.hash===s){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const s of t)if(s.hash===e)return s;lw(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}Ce=new WeakMap;class kT{constructor(e,t){En(this,"provider"),En(this,"transactionHash"),En(this,"blockHash"),En(this,"blockNumber"),En(this,"removed"),En(this,"address"),En(this,"data"),En(this,"topics"),En(this,"index"),En(this,"transactionIndex"),this.provider=t;const s=Object.freeze(e.topics.slice());sw(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:s,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:s,data:n,index:i,removed:a,topics:r,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:s,data:n,index:i,removed:a,topics:r,transactionHash:o,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ow(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ow(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ow(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class AT{constructor(e,t){En(this,"provider"),En(this,"to"),En(this,"from"),En(this,"contractAddress"),En(this,"hash"),En(this,"index"),En(this,"blockHash"),En(this,"blockNumber"),En(this,"logsBloom"),En(this,"gasUsed"),En(this,"blobGasUsed"),En(this,"cumulativeGasUsed"),En(this,"gasPrice"),En(this,"blobGasPrice"),En(this,"type"),En(this,"status"),En(this,"root"),Tn(this,Me),Bn(this,Me,Object.freeze(e.logs.map((e=>new kT(e,t)))));let s=gT;null!=e.effectiveGasPrice?s=e.effectiveGasPrice:null!=e.gasPrice&&(s=e.gasPrice),sw(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:s,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return Pn(this,Me)}toJSON(){const{to:e,from:t,contractAddress:s,hash:n,index:i,blockHash:a,blockNumber:r,logsBloom:o,logs:l,status:c,root:h}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:r,contractAddress:s,cumulativeGasUsed:bT(this.cumulativeGasUsed),from:t,gasPrice:bT(this.gasPrice),blobGasUsed:bT(this.blobGasUsed),blobGasPrice:bT(this.blobGasPrice),gasUsed:bT(this.gasUsed),hash:n,index:i,logs:l,logsBloom:o,root:h,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return PT(this)}reorderedEvent(e){return ow(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ST(this,e)}}Me=new WeakMap,Re=new WeakMap;let ET=class e{constructor(e,t){En(this,"provider"),En(this,"blockNumber"),En(this,"blockHash"),En(this,"index"),En(this,"hash"),En(this,"type"),En(this,"to"),En(this,"from"),En(this,"nonce"),En(this,"gasLimit"),En(this,"gasPrice"),En(this,"maxPriorityFeePerGas"),En(this,"maxFeePerGas"),En(this,"maxFeePerBlobGas"),En(this,"data"),En(this,"value"),En(this,"chainId"),En(this,"signature"),En(this,"accessList"),En(this,"blobVersionedHashes"),Tn(this,Re),this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,Bn(this,Re,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:s,hash:n,type:i,to:a,from:r,nonce:o,data:l,signature:c,accessList:h,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:t,blobVersionedHashes:u,chainId:bT(this.chainId),data:l,from:r,gasLimit:bT(this.gasLimit),gasPrice:bT(this.gasPrice),hash:n,maxFeePerGas:bT(this.maxFeePerGas),maxPriorityFeePerGas:bT(this.maxPriorityFeePerGas),maxFeePerBlobGas:bT(this.maxFeePerBlobGas),nonce:o,signature:c,to:a,index:s,type:i,value:bT(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await tw({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const s=null==e?1:e,n=null==t?0:t;let i=Pn(this,Re),a=-1,r=-1===i;const o=async()=>{if(r)return null;const{blockNumber:e,nonce:t}=await tw({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(i=e);if(r)return null;const n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===a&&(a=i-3,a<Pn(this,Re)&&(a=Pn(this,Re)));a<=e;){if(r)return null;const t=await this.provider.getBlock(a,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let n=0;n<t.length;n++){const a=await t.getTransaction(n);if(a.from===this.from&&a.nonce===this.nonce){if(r)return null;const t=await this.provider.getTransactionReceipt(a.hash);if(null==t)return;if(e-t.blockNumber+1<s)return;let n="replaced";a.data===this.data&&a.to===this.to&&a.value===this.value?n="repriced":"0x"===a.data&&a.from===a.to&&a.value===gT&&(n="cancelled"),ow(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:a.replaceableTransaction(i),hash:a.hash,receipt:t})}}a++}},l=e=>{if(null==e||0!==e.status)return e;ow(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===s)return l(c);if(c){if(await c.confirmations()>=s)return l(c)}else if(await o(),0===s)return null;const h=new Promise(((e,t)=>{const a=[],c=()=>{a.forEach((e=>e()))};if(a.push((()=>{r=!0})),n>0){const e=setTimeout((()=>{c(),t(rw("wait for transaction timeout","TIMEOUT"))}),n);a.push((()=>{clearTimeout(e)}))}const h=async n=>{if(await n.confirmations()>=s){c();try{e(l(n))}catch(i){t(i)}}};if(a.push((()=>{this.provider.off(this.hash,h)})),this.provider.on(this.hash,h),i>=0){const e=async()=>{try{await o()}catch(s){if(iw(s,"TRANSACTION_REPLACED"))return c(),void t(s)}r||this.provider.once("block",e)};a.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await h}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return ow(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),PT(this)}reorderedEvent(e){return ow(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ow(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ST(this,e)}replaceableTransaction(t){lw(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const s=new e(this,this.provider);return Bn(s,Re,t),s}};function ST(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function PT(e){return{orphan:"drop-transaction",tx:e}}class TT extends kT{constructor(e,t,s){super(e,e.provider),En(this,"interface"),En(this,"fragment"),En(this,"args"),sw(this,{args:t.decodeEventLog(s,e.data,e.topics),fragment:s,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class BT extends kT{constructor(e,t){super(e,e.provider),En(this,"error"),sw(this,{error:t})}}class CT extends AT{constructor(e,t,s){super(s,t),Tn(this,De),Bn(this,De,e)}get logs(){return super.logs.map((e=>{const t=e.topics.length?Pn(this,De).getEvent(e.topics[0]):null;if(t)try{return new TT(e,Pn(this,De),t)}catch(s){return new BT(e,s)}return e}))}}De=new WeakMap;class MT extends ET{constructor(e,t,s){super(s,t),Tn(this,Ie),Bn(this,Ie,e)}async wait(e,t){const s=await super.wait(e,t);return null==s?null:new CT(Pn(this,Ie),this.provider,s)}}Ie=new WeakMap;class RT extends Ow{constructor(e,t,s,n){super(e,t,s),En(this,"log"),sw(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class DT extends RT{constructor(e,t,s,n,i){super(e,t,s,new TT(i,e.interface,n)),sw(this,{args:e.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const IT=BigInt(0);function _T(e){return e&&"function"==typeof e.call}function NT(e){return e&&"function"==typeof e.estimateGas}function LT(e){return e&&"function"==typeof e.resolveName}function FT(e){return e&&"function"==typeof e.sendTransaction}function OT(e){if(null!=e){if(LT(e))return e;if(e.provider)return e.provider}}class jT{constructor(e,t,s){if(Tn(this,_e),En(this,"fragment"),sw(this,{fragment:t}),t.inputs.length<s.length)throw new Error("too many arguments");const n=UT(e.runner,"resolveName"),i=LT(n)?n:null;Bn(this,_e,async function(){const n=await Promise.all(t.inputs.map(((e,t)=>null==s[t]?null:e.walkAsync(s[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>nE(e,i)))):nE(t,i):t)))));return e.interface.encodeFilterTopics(t,n)}())}getTopicFilter(){return Pn(this,_e)}}function UT(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function GT(e){return null==e?null:e.provider||null}async function HT(e,t){const s=lE.dereference(e,"overrides");lw("object"==typeof s,"invalid overrides parameter","overrides",e);const n=wT(s);return lw(null==n.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),lw(null==n.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}function zT(e){const t=async function(t){const s=await HT(t,["data"]);s.to=await e.getAddress(),s.from&&(s.from=await nE(s.from,OT(e.runner)));const n=e.interface,i=Bw(s.value||IT,"overrides.value")===IT,a="0x"===(s.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||a||i||lw(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),lw(n.fallback||a,"cannot send data to receive-only contract","overrides.data",s.data),lw(n.receive||n.fallback&&n.fallback.payable||i,"cannot send value to non-payable fallback","overrides.value",s.value),lw(n.fallback||a,"cannot send data to receive-only contract","overrides.data",s.data),s},s=async function(s){const n=e.runner;ow(FT(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await n.sendTransaction(await t(s)),a=GT(e.runner);return new MT(e.interface,a,i)},n=async e=>await s(e);return sw(n,{_contract:e,estimateGas:async function(s){const n=UT(e.runner,"estimateGas");return ow(NT(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(s))},populateTransaction:t,send:s,staticCall:async function(s){const n=UT(e.runner,"call");ow(_T(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await t(s);try{return await n.call(i)}catch(a){if(aw(a)&&a.data)throw e.interface.makeError(a.data,i);throw a}}}),n}_e=new WeakMap;const VT=Symbol.for("_ethersInternal_contract"),WT=new WeakMap;function $T(e){return WT.get(e[VT])}async function qT(e,t){let s,n=null;if(Array.isArray(t)){const n=function(t){if(fw(t,32))return t;const s=e.interface.getEvent(t);return lw(s,"unknown fragment","name",t),s.topicHash};s=t.map((e=>null==e?null:Array.isArray(e)?e.map(n):n(e)))}else"*"===t?s=[null]:"string"==typeof t?fw(t,32)?s=[t]:(n=e.interface.getEvent(t),lw(n,"unknown fragment","event",t),s=[n.topicHash]):(i=t)&&"object"==typeof i&&"getTopicFilter"in i&&"function"==typeof i.getTopicFilter&&i.fragment?s=await t.getTopicFilter():"fragment"in t?(n=t.fragment,s=[n.topicHash]):lw(!1,"unknown event name","event",t);var i;return s=s.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})),{fragment:n,tag:s.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:s}}async function KT(e,t){const{subs:s}=$T(e);return s.get((await qT(e,t)).tag)||null}async function QT(e,t,s){const n=GT(e.runner);ow(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:a,topics:r}=await qT(e,s),{addr:o,subs:l}=$T(e);let c=l.get(a);if(!c){const t={address:o||e,topics:r},h=t=>{let n=i;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(a){}if(n){const a=n,r=i?e.interface.decodeEventLog(i,t.data,t.topics):[];XT(e,s,r,(n=>new DT(e,n,s,a,t)))}else XT(e,s,[],(n=>new RT(e,n,s,t)))};let u=[];c={tag:a,listeners:[],start:()=>{u.length||u.push(n.on(t,h))},stop:async()=>{if(0==u.length)return;let e=u;u=[],await Promise.all(e),n.off(t,h)}},l.set(a,c)}return c}let ZT=Promise.resolve();async function XT(e,t,s,n){try{await ZT}catch(a){}const i=async function(e,t,s,n){await ZT;const i=await KT(e,t);if(!i)return!1;const r=i.listeners.length;return i.listeners=i.listeners.filter((({listener:t,once:i})=>{const r=Array.from(s);n&&r.push(n(i?null:t));try{t.call(e,...r)}catch(a){}return!i})),0===i.listeners.length&&(i.stop(),$T(e).subs.delete(i.tag)),r>0}(e,t,s,n);return ZT=i,await i}const YT=["then"];Ne=VT;let JT=class e{constructor(e,t,s,n){En(this,"target"),En(this,"interface"),En(this,"runner"),En(this,"filters"),En(this,Ne),En(this,"fallback"),lw("string"==typeof e||tE(e),"invalid value for Contract target","target",e),null==s&&(s=null);const i=mT.from(t);let a;sw(this,{target:e,runner:s,interface:i}),Object.defineProperty(this,VT,{value:{}});let r=null,o=null;if(n){const e=GT(s);o=new MT(this.interface,e,n)}let l=new Map;if("string"==typeof e)if(fw(e))r=e,a=Promise.resolve(e);else{const t=UT(s,"resolveName");if(!LT(t))throw rw("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=t.resolveName(e).then((t=>{if(null==t)throw rw("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return $T(this).addr=t,t}))}else a=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return $T(this).addr=e,e}));var c;return c={addrPromise:a,addr:r,deployTx:o,subs:l},WT.set(this[VT],c),sw(this,{filters:new Proxy({},{get:(e,t,s)=>{if("symbol"==typeof t||YT.indexOf(t)>=0)return Reflect.get(e,t,s);try{return this.getEvent(t)}catch(n){if(!iw(n,"INVALID_ARGUMENT")||"key"!==n.argument)throw n}},has:(e,t)=>YT.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))})}),sw(this,{fallback:i.receive||i.fallback?zT(this):null}),new Proxy(this,{get:(e,t,s)=>{if("symbol"==typeof t||t in e||YT.indexOf(t)>=0)return Reflect.get(e,t,s);try{return e.getFunction(t)}catch(n){if(!iw(n,"INVALID_ARGUMENT")||"key"!==n.argument)throw n}},has:(e,t)=>"symbol"==typeof t||t in e||YT.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(t){return new e(this.target,this.interface,t)}attach(t){return new e(t,this.interface,this.runner)}async getAddress(){return await $T(this).addrPromise}async getDeployedCode(){const e=GT(this.runner);ow(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=GT(this.runner);return ow(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,s)=>{const n=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",n)}catch(i){s(i)}};n()}))}deploymentTransaction(){return $T(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const s=function(...s){const n=e.interface.getFunction(t,s);return ow(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),n},n=async function(...t){const n=s(...t);let i={};if(n.inputs.length+1===t.length&&(i=await HT(t.pop()),i.from&&(i.from=await nE(i.from,OT(e.runner)))),n.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const a=await async function(e,t,s){const n=UT(e,"resolveName"),i=LT(n)?n:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(s[t],((e,t)=>(t=lE.dereference(t,e),"address"===e?nE(t,i):t))))))}(e.runner,n.inputs,t);return Object.assign({},i,await tw({to:e.getAddress(),data:e.interface.encodeFunctionData(n,a)}))},i=async function(...e){const t=await r(...e);return 1===t.length?t[0]:t},a=async function(...t){const s=e.runner;ow(FT(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await s.sendTransaction(await n(...t)),a=GT(e.runner);return new MT(e.interface,a,i)},r=async function(...t){const i=UT(e.runner,"call");ow(_T(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const a=await n(...t);let r="0x";try{r=await i.call(a)}catch(l){if(aw(l)&&l.data)throw e.interface.makeError(l.data,a);throw l}const o=s(...t);return e.interface.decodeFunctionResult(o,r)},o=async(...e)=>s(...e).constant?await i(...e):await a(...e);return sw(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:s,estimateGas:async function(...t){const s=UT(e.runner,"estimateGas");return ow(NT(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await n(...t))},populateTransaction:n,send:a,staticCall:i,staticCallResult:r}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=e.interface.getFunction(t);return ow(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),o}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const s=function(...s){const n=e.interface.getEvent(t,s);return ow(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),n},n=function(...t){return new jT(e,s(...t),t)};return sw(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:s}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=e.interface.getEvent(t);return ow(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,s){null==t&&(t=0),null==s&&(s="latest");const{addr:n,addrPromise:i}=$T(this),a=n||await i,{fragment:r,topics:o}=await qT(this,e),l={address:a,topics:o,fromBlock:t,toBlock:s},c=GT(this.runner);return ow(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map((e=>{let t=r;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(s){}if(t)try{return new TT(e,this.interface,t)}catch(s){return new BT(e,s)}return new kT(e,c)}))}async on(e,t){const s=await QT(this,"on",e);return s.listeners.push({listener:t,once:!1}),s.start(),this}async once(e,t){const s=await QT(this,"once",e);return s.listeners.push({listener:t,once:!0}),s.start(),this}async emit(e,...t){return await XT(this,e,t,null)}async listenerCount(e){if(e){const t=await KT(this,e);return t?t.listeners.length:0}const{subs:t}=$T(this);let s=0;for(const{listeners:n}of t.values())s+=n.length;return s}async listeners(e){if(e){const t=await KT(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=$T(this);let s=[];for(const{listeners:n}of t.values())s=s.concat(n.map((({listener:e})=>e)));return s}async off(e,t){const s=await KT(this,e);if(!s)return this;if(t){const e=s.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&s.listeners.splice(e,1)}return null!=t&&0!==s.listeners.length||(s.stop(),$T(this).subs.delete(s.tag)),this}async removeAllListeners(e){if(e){const t=await KT(this,e);if(!t)return this;t.stop(),$T(this).subs.delete(t.tag)}else{const{subs:e}=$T(this);for(const{tag:t,stop:s}of e.values())s(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(t){return class extends e{constructor(e,s=null){super(e,t,s)}}}static from(e,t,s){return null==s&&(s=null),new this(e,t,s)}};class eB extends(function(){return JT}()){}function tB(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):lw(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class sB{constructor(e){En(this,"name"),sw(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const nB=new RegExp("^(ipfs)://(.*)$","i"),iB=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),nB,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],aB=class e{constructor(e,t,s){Tn(this,Oe),En(this,"provider"),En(this,"address"),En(this,"name"),Tn(this,Le),Tn(this,Fe),sw(this,{provider:e,address:t,name:s}),Bn(this,Le,null),Bn(this,Fe,new eB(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return null==Pn(this,Le)&&Bn(this,Le,(async()=>{try{return await Pn(this,Fe).supportsInterface("0x9061b923")}catch(e){if(iw(e,"CALL_EXCEPTION"))return!1;throw Bn(this,Le,null),e}})()),await Pn(this,Le)}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await Cn(this,Oe,je).call(this,"addr(bytes32)");return null==e||e===LA?null:e}catch(i){if(iw(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let t=e+2147483648;const s=await Cn(this,Oe,je).call(this,"addr(bytes32,uint)",[t]);if(fw(s,20))return eE(s)}let t=null;for(const a of this.provider.plugins)if(a instanceof sB&&a.supportsCoinType(e)){t=a;break}if(null==t)return null;const s=await Cn(this,Oe,je).call(this,"addr(bytes32,uint)",[e]);if(null==s||"0x"===s)return null;const n=await t.decodeAddress(e,s);if(null!=n)return n;ow(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:s}})}async getText(e){const t=await Cn(this,Oe,je).call(this,"text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await Cn(this,Oe,je).call(this,"contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===2*s)return`${e}://${function(e){const t=dw(e);let s=Rw(t),n="";for(;s;)n=Lw[Number(s%Fw)]+n,s/=Fw;for(let i=0;i<t.length&&!t[i];i++)n=Lw[0]+n;return n}("0x"+t[2])}`}const s=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(s&&64===s[1].length)return`bzz://${s[1]}`;ow(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(null==n)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let i=0;i<iB.length;i++){const a=n.match(iB[i]);if(null==a)continue;const r=a[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const t=tB(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:t}),{linkage:e,url:t}}case"erc721":case"erc1155":{const i="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:n});const o=await this.getAddress();if(null==o)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(a[2]||"").split("/");if(2!==l.length)return e.push({type:`!${r}caip`,value:a[2]||""}),{url:null,linkage:e};const c=l[1],h=new eB(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await h.ownerOf(c);if(o!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await h.balanceOf(o,c);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let u=await h[i](c);if(null==u||"0x"===u)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:u}),"erc1155"===r&&(u=u.replace("{id}",Iw(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=tB(u)),e.push({type:"metadata-url",value:u});let d={};const p=await new tx(u).send();p.assertOk();try{d=p.bodyJson}catch(t){try{e.push({type:"!metadata",value:p.bodyText})}catch(s){const t=p.body;return t&&e.push({type:"!metadata",value:yw(t)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let f=d.image;if("string"!=typeof f)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(nB))return e.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:f}),f=tB(f)}return e.push({type:"url",value:f}),{linkage:e,url:f}}}}}catch(t){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),s=t.getPlugin("org.ethers.plugins.network.Ens");return ow(s,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),s.address}static async fromName(t,s){var n;let i=s;for(;;){if(""===i||"."===i)return null;if("eth"!==s&&"eth"===i)return null;const a=await Cn(n=e,Ue,Ge).call(n,t,i);if(null!=a){const n=new e(t,a,s);return i===s||await n.supportsWildcard()?n:null}i=i.split(".").slice(1).join(".")}}};Le=new WeakMap,Fe=new WeakMap,Oe=new WeakSet,je=async function(e,t){t=(t||[]).slice();const s=Pn(this,Fe).interface;t.unshift(CS(this.name));let n=null;await this.supportsWildcard()&&(n=s.getFunction(e),ow(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[MS(this.name,255),s.encodeFunctionData(n,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await Pn(this,Fe)[e](...t);return n?s.decodeFunctionResult(n,i)[0]:i}catch(i){if(!iw(i,"CALL_EXCEPTION"))throw i}return null},Ue=new WeakSet,Ge=async function(e,t){const s=await aB.getEnsAddress(e);try{const n=new eB(s,["function resolver(bytes32) view returns (address)"],e),i=await n.resolver(CS(t),{enableCcipRead:!0});return i===LA?null:i}catch(n){throw n}return null},Tn(aB,Ue);let rB=aB;const oB=BigInt(0);function lB(e,t){return function(s){return null==s?t:e(s)}}function cB(e,t){return s=>{if(t&&null==s)return null;if(!Array.isArray(s))throw new Error("not an array");return s.map((t=>e(t)))}}function hB(e,t){return s=>{const n={};for(const a in e){let r=a;if(t&&a in t&&!(r in s))for(const e of t[a])if(e in s){r=e;break}try{const t=e[a](s[r]);void 0!==t&&(n[a]=t)}catch(i){ow(!1,`invalid value for value.${a} (${i instanceof Error?i.message:"not-an-error"})`,"BAD_DATA",{value:s})}}return n}}function uB(e){return lw(fw(e,!0),"invalid data","value",e),e}function dB(e){return lw(fw(e,32),"invalid hash","value",e),e}const pB=hB({address:eE,blockHash:dB,blockNumber:Dw,data:uB,index:Dw,removed:lB((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}lw(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:cB(dB),transactionHash:dB,transactionIndex:Dw},{index:["logIndex"]}),fB=hB({hash:lB(dB),parentHash:dB,parentBeaconBlockRoot:lB(dB,null),number:Dw,timestamp:Dw,nonce:lB(uB),difficulty:Bw,gasLimit:Bw,gasUsed:Bw,stateRoot:lB(dB,null),receiptsRoot:lB(dB,null),blobGasUsed:lB(Bw,null),excessBlobGas:lB(Bw,null),miner:lB(eE),prevRandao:lB(dB,null),extraData:uB,baseFeePerGas:lB(Bw)},{prevRandao:["mixHash"]}),mB=hB({transactionIndex:Dw,blockNumber:Dw,transactionHash:dB,address:eE,topics:cB(dB),data:uB,index:Dw,blockHash:dB},{index:["logIndex"]}),gB=hB({to:lB(eE,null),from:lB(eE,null),contractAddress:lB(eE,null),index:Dw,root:lB(yw),gasUsed:Bw,blobGasUsed:lB(Bw,null),logsBloom:lB(uB),blockHash:dB,hash:dB,logs:cB((function(e){return mB(e)})),blockNumber:Dw,cumulativeGasUsed:Bw,effectiveGasPrice:lB(Bw),blobGasPrice:lB(Bw,null),status:lB(Dw),type:lB(Dw,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function yB(e){e.to&&Bw(e.to)===oB&&(e.to="0x0000000000000000000000000000000000000000");const t=hB({hash:dB,index:lB(Dw,void 0),type:e=>"0x"===e||null==e?0:Dw(e),accessList:lB(DS,null),blobVersionedHashes:lB(cB(dB,!0),null),blockHash:lB(dB,null),blockNumber:lB(Dw,null),transactionIndex:lB(Dw,null),from:eE,gasPrice:lB(Bw),maxPriorityFeePerGas:lB(Bw),maxFeePerGas:lB(Bw),maxFeePerBlobGas:lB(Bw,null),gasLimit:Bw,to:lB(eE,null),value:Bw,nonce:Dw,data:uB,creates:lB(eE,null),chainId:lB(Bw,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=eE(e.from);let s=Bw(e.nonce,"tx.nonce").toString(16);return s="0"===s?"0x":s.length%2?"0x0"+s:"0x"+s,eE(ww(Mk(px([t,s])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=qA.from(e.signature):t.signature=qA.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Bw(t.blockHash)===oB&&(t.blockHash=null),t}class bB{constructor(e){En(this,"name"),sw(this,{name:e})}clone(){return new bB(this.name)}}class vB extends bB{constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`),En(this,"effectiveBlock"),En(this,"txBase"),En(this,"txCreate"),En(this,"txDataZero"),En(this,"txDataNonzero"),En(this,"txAccessListStorageKey"),En(this,"txAccessListAddress");const s={effectiveBlock:e};function n(e,n){let i=(t||{})[e];null==i&&(i=n),lw("number"==typeof i,`invalud value for ${e}`,"costs",t),s[e]=i}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),sw(this,s)}clone(){return new vB(this.effectiveBlock,this)}}class wB extends bB{constructor(e,t){super("org.ethers.plugins.network.Ens"),En(this,"address"),En(this,"targetNetwork"),sw(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new wB(this.address,this.targetNetwork)}}class xB extends bB{constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),Tn(this,He),Tn(this,ze),Bn(this,He,e),Bn(this,ze,t)}get url(){return Pn(this,He)}get processFunc(){return Pn(this,ze)}clone(){return this}}He=new WeakMap,ze=new WeakMap;const kB=new Map;Ve=new WeakMap,We=new WeakMap,$e=new WeakMap;let AB=class e{constructor(e,t){Tn(this,Ve),Tn(this,We),Tn(this,$e),Bn(this,Ve,e),Bn(this,We,Bw(t)),Bn(this,$e,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return Pn(this,Ve)}set name(e){Bn(this,Ve,e)}get chainId(){return Pn(this,We)}set chainId(e){Bn(this,We,Bw(e,"chainId"))}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===Bw(e)}catch(t){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===Bw(e)}catch(t){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===Bw(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(Pn(this,$e).values())}attachPlugin(e){if(Pn(this,$e).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Pn(this,$e).set(e.name,e.clone()),this}getPlugin(e){return Pn(this,$e).get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const t=new e(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new vB;let s=t.txBase;if(null==e.to&&(s+=t.txCreate),e.data)for(let n=2;n<e.data.length;n+=2)"00"===e.data.substring(n,n+2)?s+=t.txDataZero:s+=t.txDataNonzero;if(e.accessList){const n=DS(e.accessList);for(const e in n)s+=t.txAccessListAddress+t.txAccessListStorageKey*n[e].storageKeys.length}return s}static from(t){if(function(){function e(e,t,s){const n=function(){const n=new AB(e,t);return null!=s.ensNetwork&&n.attachPlugin(new wB(null,s.ensNetwork)),n.attachPlugin(new vB),(s.plugins||[]).forEach((e=>{n.attachPlugin(e)})),n};AB.register(e,n),AB.register(t,n),s.altNames&&s.altNames.forEach((e=>{AB.register(e,n)}))}PB||(PB=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[SB("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[SB("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}))}(),null==t)return e.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const s=kB.get(t);if(s)return s();if("bigint"==typeof t)return new e("unknown",t);lw(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){lw("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const s=new e(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&s.attachPlugin(new wB(t.ensAddress,t.ensNetwork)),s}lw(!1,"invalid network","network",t)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const s=kB.get(e);s&&lw(!1,`conflicting network for ${JSON.stringify(s.name)}`,"nameOrChainId",e),kB.set(e,t)}};function EB(e,t){const s=String(e);if(!s.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const n=s.split(".");if(1===n.length&&n.push(""),2!==n.length)throw new Error(`invalid gwei value: ${e}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let e=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||e++,n[1]=e.toString()}return BigInt(n[0]+n[1])}function SB(e){return new xB(e,(async(e,t,s)=>{let n;s.setHeader("User-Agent","ethers");try{const[t,i]=await Promise.all([s.send(),e()]);n=t;const a=n.bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:EB(a.maxFee,9),maxPriorityFeePerGas:EB(a.maxPriorityFee,9)}}catch(i){ow(!1,`error encountered with polygon gas station (${JSON.stringify(s.url)})`,"SERVER_ERROR",{request:s,response:n,error:i})}}))}let PB=!1;function TB(e){return JSON.parse(JSON.stringify(e))}class BB{constructor(e){Tn(this,Xe),Tn(this,qe),Tn(this,Ke),Tn(this,Qe),Tn(this,Ze),Bn(this,qe,e),Bn(this,Ke,null),Bn(this,Qe,4e3),Bn(this,Ze,-2)}get pollingInterval(){return Pn(this,Qe)}set pollingInterval(e){Bn(this,Qe,e)}start(){Pn(this,Ke)||(Bn(this,Ke,Pn(this,qe)._setTimeout(Cn(this,Xe,Ye).bind(this),Pn(this,Qe))),Cn(this,Xe,Ye).call(this))}stop(){Pn(this,Ke)&&(Pn(this,qe)._clearTimeout(Pn(this,Ke)),Bn(this,Ke,null))}pause(e){this.stop(),e&&Bn(this,Ze,-2)}resume(){this.start()}}qe=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Ze=new WeakMap,Xe=new WeakSet,Ye=async function(){try{const e=await Pn(this,qe).getBlockNumber();if(-2===Pn(this,Ze))return void Bn(this,Ze,e);if(e!==Pn(this,Ze)){for(let t=Pn(this,Ze)+1;t<=e;t++){if(null==Pn(this,Ke))return;await Pn(this,qe).emit("block",t)}Bn(this,Ze,e)}}catch(e){}null!=Pn(this,Ke)&&Bn(this,Ke,Pn(this,qe)._setTimeout(Cn(this,Xe,Ye).bind(this),Pn(this,Qe)))};class CB{constructor(e){Tn(this,Je),Tn(this,et),Tn(this,tt),Bn(this,Je,e),Bn(this,tt,!1),Bn(this,et,(e=>{this._poll(e,Pn(this,Je))}))}async _poll(e,t){throw new Error("sub-classes must override this")}start(){Pn(this,tt)||(Bn(this,tt,!0),Pn(this,et).call(this,-2),Pn(this,Je).on("block",Pn(this,et)))}stop(){Pn(this,tt)&&(Bn(this,tt,!1),Pn(this,Je).off("block",Pn(this,et)))}pause(e){this.stop()}resume(){this.start()}}Je=new WeakMap,et=new WeakMap,tt=new WeakMap;class MB extends CB{constructor(e,t){super(e),Tn(this,st),Tn(this,nt),Bn(this,st,t),Bn(this,nt,-2)}pause(e){e&&Bn(this,nt,-2),super.pause(e)}async _poll(e,t){const s=await t.getBlock(Pn(this,st));null!=s&&(-2===Pn(this,nt)?Bn(this,nt,s.number):s.number>Pn(this,nt)&&(t.emit(Pn(this,st),s.number),Bn(this,nt,s.number)))}}st=new WeakMap,nt=new WeakMap;class RB extends CB{constructor(e,t){super(e),Tn(this,it),Bn(this,it,TB(t))}async _poll(e,t){throw new Error("@TODO")}}it=new WeakMap;class DB extends CB{constructor(e,t){super(e),Tn(this,at),Bn(this,at,t)}async _poll(e,t){const s=await t.getTransactionReceipt(Pn(this,at));s&&t.emit(Pn(this,at),s)}}at=new WeakMap;class IB{constructor(e,t){Tn(this,ut),Tn(this,rt),Tn(this,ot),Tn(this,lt),Tn(this,ct),Tn(this,ht),Bn(this,rt,e),Bn(this,ot,TB(t)),Bn(this,lt,Cn(this,ut,dt).bind(this)),Bn(this,ct,!1),Bn(this,ht,-2)}start(){Pn(this,ct)||(Bn(this,ct,!0),-2===Pn(this,ht)&&Pn(this,rt).getBlockNumber().then((e=>{Bn(this,ht,e)})),Pn(this,rt).on("block",Pn(this,lt)))}stop(){Pn(this,ct)&&(Bn(this,ct,!1),Pn(this,rt).off("block",Pn(this,lt)))}pause(e){this.stop(),e&&Bn(this,ht,-2)}resume(){this.start()}}rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,ct=new WeakMap,ht=new WeakMap,ut=new WeakSet,dt=async function(e){if(-2===Pn(this,ht))return;const t=TB(Pn(this,ot));t.fromBlock=Pn(this,ht)+1,t.toBlock=e;const s=await Pn(this,rt).getLogs(t);if(0!==s.length)for(const n of s)Pn(this,rt).emit(Pn(this,ot),n),Bn(this,ht,n.blockNumber);else Pn(this,ht)<e-60&&Bn(this,ht,e-60)};const _B=BigInt(2);function NB(e){return e&&"function"==typeof e.then}function LB(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,s)=>(e[s]=t[s],e)),{})}return t}))}class FB{constructor(e){En(this,"name"),sw(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function OB(e){return(e=Array.from(new Set(e).values())).sort(),e}async function jB(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(fw(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:LB("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:LB("orphan",t),filter:(s=t,JSON.parse(JSON.stringify(s)))}}var s;if(e.address||e.topics){const s=e,n={topics:(s.topics||[]).map((e=>null==e?null:Array.isArray(e)?OB(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(s.address){const e=[],i=[],a=s=>{fw(s)?e.push(s):i.push((async()=>{e.push(await nE(s,t))})())};Array.isArray(s.address)?s.address.forEach(a):a(s.address),i.length&&await Promise.all(i),n.address=OB(e.map((e=>e.toLowerCase())))}return{filter:n,tag:LB("event",n),type:"event"}}lw(!1,"unknown ProviderEvent","event",e)}function UB(){return(new Date).getTime()}const GB={cacheTimeout:250,pollingInterval:4e3};class HB{constructor(e,t){if(Tn(this,St),Tn(this,pt),Tn(this,ft),Tn(this,mt),Tn(this,gt),Tn(this,yt),Tn(this,bt),Tn(this,vt),Tn(this,wt),Tn(this,xt),Tn(this,kt),Tn(this,At),Tn(this,Et),Bn(this,Et,Object.assign({},GB,t||{})),"any"===e)Bn(this,bt,!0),Bn(this,yt,null);else if(e){const t=AB.from(e);Bn(this,bt,!1),Bn(this,yt,Promise.resolve(t)),setTimeout((()=>{this.emit("network",t,null)}),0)}else Bn(this,bt,!1),Bn(this,yt,null);Bn(this,wt,-1),Bn(this,vt,new Map),Bn(this,pt,new Map),Bn(this,ft,new Map),Bn(this,mt,null),Bn(this,gt,!1),Bn(this,xt,1),Bn(this,kt,new Map),Bn(this,At,!1)}get pollingInterval(){return Pn(this,Et).pollingInterval}get provider(){return this}get plugins(){return Array.from(Pn(this,ft).values())}attachPlugin(e){if(Pn(this,ft).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return Pn(this,ft).set(e.name,e.connect(this)),this}getPlugin(e){return Pn(this,ft).get(e)||null}get disableCcipRead(){return Pn(this,At)}set disableCcipRead(e){Bn(this,At,!!e)}async ccipReadFetch(e,t,s){if(this.disableCcipRead||0===s.length||null==e.to)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),a=[];for(let o=0;o<s.length;o++){const t=s[o],l=t.replace("{sender}",n).replace("{data}",i),c=new tx(l);-1===t.indexOf("{data}")&&(c.body={data:i,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:o,urls:s});let h,u="unknown error";try{h=await c.send()}catch(r){a.push(r.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:{error:r}});continue}try{const e=h.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(u=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(r){}ow(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${u}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:t,errorMessage:u}}),a.push(u)}ow(!1,`error encountered during CCIP fetch: ${a.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:s,errorMessages:a}})}_wrapBlock(e,t){return new xT(function(e){const t=fB(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:yB(e))),t}(e),this)}_wrapLog(e,t){return new kT(function(e){return pB(e)}(e),this)}_wrapTransactionReceipt(e,t){return new AT(function(e){return gB(e)}(e),this)}_wrapTransactionResponse(e,t){return new ET(yB(e),this)}_detectNetwork(){ow(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ow(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Dw(await Cn(this,St,Pt).call(this,{method:"getBlockNumber"}),"%response");return Pn(this,wt)>=0&&Bn(this,wt,e),e}_getAddress(e){return nE(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return fw(e)?fw(e,32)?e:Nw(e):("bigint"==typeof e&&(e=Dw(e,"blockTag")),"number"==typeof e?e>=0?Nw(e):Pn(this,wt)>=0?Nw(Pn(this,wt)+e):this.getBlockNumber().then((t=>Nw(t+e))):void lw(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?OB(e.map((e=>e.toLowerCase()))):e.toLowerCase())),s="blockHash"in e?e.blockHash:void 0,n=(e,n,i)=>{let a;switch(e.length){case 0:break;case 1:a=e[0];break;default:e.sort(),a=e}if(s&&(null!=n||null!=i))throw new Error("invalid filter");const r={};return a&&(r.address=a),t.length&&(r.topics=t),n&&(r.fromBlock=n),i&&(r.toBlock=i),s&&(r.blockHash=s),r};let i,a,r=[];if(e.address)if(Array.isArray(e.address))for(const o of e.address)r.push(this._getAddress(o));else r.push(this._getAddress(e.address));return"fromBlock"in e&&(i=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),r.filter((e=>"string"!=typeof e)).length||null!=i&&"string"!=typeof i||null!=a&&"string"!=typeof a?Promise.all([Promise.all(r),i,a]).then((e=>n(e[0],e[1],e[2]))):n(r,i,a)}_getTransactionRequest(e){const t=wT(e),s=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const n=nE(t[e],this);NB(n)?s.push(async function(){t[e]=await n}()):t[e]=n})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);NB(e)?s.push(async function(){t.blockTag=await e}()):t.blockTag=e}return s.length?async function(){return await Promise.all(s),t}():t}async getNetwork(){if(null==Pn(this,yt)){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw Pn(this,yt)===e&&Bn(this,yt,null),t}})();return Bn(this,yt,e),(await e).clone()}const e=Pn(this,yt),[t,s]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==s.chainId&&(Pn(this,bt)?(this.emit("network",s,t),Pn(this,yt)===e&&Bn(this,yt,Promise.resolve(s))):ow(!1,`network changed: ${t.chainId} => ${s.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:s,priorityFee:n}=await tw({_block:Cn(this,St,Mt).call(this,"latest",!1),gasPrice:(async()=>{try{return Bw(await Cn(this,St,Pt).call(this,{method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return Bw(await Cn(this,St,Pt).call(this,{method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let i=null,a=null;const r=this._wrapBlock(t,e);return r&&r.baseFeePerGas&&(a=null!=n?n:BigInt("1000000000"),i=r.baseFeePerGas*_B+a),new vT(s,i,a)},s=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(s){const e=new tx(s.url),n=await s.processFunc(t,this,e);return new vT(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return NB(t)&&(t=await t),Bw(await Cn(this,St,Pt).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:s}=await tw({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Cn(this,St,Bt).call(this,Cn(this,St,Tt).call(this,t,s,e.enableCcipRead?0:-1))}async getBalance(e,t){return Bw(await Cn(this,St,Ct).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Dw(await Cn(this,St,Ct).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return yw(await Cn(this,St,Ct).call(this,{method:"getCode"},e,t))}async getStorage(e,t,s){const n=Bw(t,"position");return yw(await Cn(this,St,Ct).call(this,{method:"getStorage",position:n},e,s))}async broadcastTransaction(e){const{blockNumber:t,hash:s,network:n}=await tw({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=QS.from(e);if(i.hash!==s)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,n).replaceableTransaction(t)}async getBlock(e,t){const{network:s,params:n}=await tw({network:this.getNetwork(),params:Cn(this,St,Mt).call(this,e,!!t)});return null==n?null:this._wrapBlock(n,s)}async getTransaction(e){const{network:t,params:s}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getTransaction",hash:e})});return null==s?null:this._wrapTransactionResponse(s,t)}async getTransactionReceipt(e){const{network:t,params:s}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getTransactionReceipt",hash:e})});if(null==s)return null;if(null==s.gasPrice&&null==s.effectiveGasPrice){const t=await Cn(this,St,Pt).call(this,{method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");s.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(s,t)}async getTransactionResult(e){const{result:t}=await tw({network:this.getNetwork(),result:Cn(this,St,Pt).call(this,{method:"getTransactionResult",hash:e})});return null==t?null:yw(t)}async getLogs(e){let t=this._getFilter(e);NB(t)&&(t=await t);const{network:s,params:n}=await tw({network:this.getNetwork(),params:Cn(this,St,Pt).call(this,{method:"getLogs",filter:t})});return n.map((e=>this._wrapLog(e,s)))}_getProvider(e){ow(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await rB.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=CS((e=eE(e)).substring(2).toLowerCase()+".addr.reverse");try{const s=await rB.getEnsAddress(this),n=new eB(s,["function resolver(bytes32) view returns (address)"],this),i=await n.resolver(t);if(null==i||i===LA)return null;const a=new eB(i,["function name(bytes32) view returns (string)"],this),r=await a.name(t);return await this.resolveName(r)!==e?null:r}catch(s){if(iw(s,"BAD_DATA")&&"0x"===s.value)return null;if(iw(s,"CALL_EXCEPTION"))return null;throw s}return null}async waitForTransaction(e,t,s){const n=null!=t?t:1;return 0===n?this.getTransactionReceipt(e):new Promise((async(t,i)=>{let a=null;const r=async s=>{try{const i=await this.getTransactionReceipt(e);if(null!=i&&s-i.blockNumber+1>=n)return t(i),void(a&&(clearTimeout(a),a=null))}catch(i){console.log("EEE",i)}this.once("block",r)};null!=s&&(a=setTimeout((()=>{null!=a&&(a=null,this.off("block",r),i(rw("timeout","TIMEOUT",{reason:"timeout"})))}),s)),r(await this.getBlockNumber())}))}async waitForBlock(e){ow(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=Pn(this,kt).get(e);t&&(t.timer&&clearTimeout(t.timer),Pn(this,kt).delete(e))}_setTimeout(e,t){null==t&&(t=0);const s=Mn(this,xt)._++,n=()=>{Pn(this,kt).delete(s),e()};if(this.paused)Pn(this,kt).set(s,{timer:null,func:n,time:t});else{const e=setTimeout(n,t);Pn(this,kt).set(s,{timer:e,func:n,time:UB()})}return s}_forEachSubscriber(e){for(const t of Pn(this,pt).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new FB(e.type);case"block":{const e=new BB(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new MB(this,e.type);case"event":return new IB(this,e.filter);case"transaction":return new DB(this,e.hash);case"orphan":return new RB(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const s of Pn(this,pt).values())if(s.subscriber===e){s.started&&s.subscriber.stop(),s.subscriber=t,s.started&&t.start(),null!=Pn(this,mt)&&t.pause(Pn(this,mt));break}}async on(e,t){const s=await Cn(this,St,Dt).call(this,e);return s.listeners.push({listener:t,once:!1}),s.started||(s.subscriber.start(),s.started=!0,null!=Pn(this,mt)&&s.subscriber.pause(Pn(this,mt))),this}async once(e,t){const s=await Cn(this,St,Dt).call(this,e);return s.listeners.push({listener:t,once:!0}),s.started||(s.subscriber.start(),s.started=!0,null!=Pn(this,mt)&&s.subscriber.pause(Pn(this,mt))),this}async emit(e,...t){const s=await Cn(this,St,Rt).call(this,e,t);if(!s||0===s.listeners.length)return!1;const n=s.listeners.length;return s.listeners=s.listeners.filter((({listener:s,once:n})=>{const i=new Ow(this,n?null:s,e);try{s.call(this,...t,i)}catch(a){}return!n})),0===s.listeners.length&&(s.started&&s.subscriber.stop(),Pn(this,pt).delete(s.tag)),n>0}async listenerCount(e){if(e){const t=await Cn(this,St,Rt).call(this,e);return t?t.listeners.length:0}let t=0;for(const{listeners:s}of Pn(this,pt).values())t+=s.length;return t}async listeners(e){if(e){const t=await Cn(this,St,Rt).call(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:s}of Pn(this,pt).values())t=t.concat(s.map((({listener:e})=>e)));return t}async off(e,t){const s=await Cn(this,St,Rt).call(this,e);if(!s)return this;if(t){const e=s.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&s.listeners.splice(e,1)}return t&&0!==s.listeners.length||(s.started&&s.subscriber.stop(),Pn(this,pt).delete(s.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:s,subscriber:n}=await Cn(this,St,Dt).call(this,e);s&&n.stop(),Pn(this,pt).delete(t)}else for(const[t,{started:s,subscriber:n}]of Pn(this,pt))s&&n.stop(),Pn(this,pt).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return Pn(this,gt)}destroy(){this.removeAllListeners();for(const e of Pn(this,kt).keys())this._clearTimeout(e);Bn(this,gt,!0)}get paused(){return null!=Pn(this,mt)}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(Bn(this,wt,-1),null!=Pn(this,mt)){if(Pn(this,mt)==!!e)return;ow(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),Bn(this,mt,!!e);for(const t of Pn(this,kt).values())t.timer&&clearTimeout(t.timer),t.time=UB()-t.time}resume(){if(null!=Pn(this,mt)){this._forEachSubscriber((e=>e.resume())),Bn(this,mt,null);for(const e of Pn(this,kt).values()){let t=e.time;t<0&&(t=0),e.time=UB(),setTimeout(e.func,t)}}}}function zB(e,t){try{const s=VB(e,t);if(s)return Hw(s)}catch(s){}return null}function VB(e,t){if("0x"===e)return null;try{const s=Dw(ww(e,t,t+32)),n=Dw(ww(e,s,s+32));return ww(e,s+32,s+32+n)}catch(s){}return null}function WB(e){const t=_w(e);if(t.length>32)throw new Error("internal; should not happen");const s=new Uint8Array(32);return s.set(t,32-t.length),s}function $B(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}pt=new WeakMap,ft=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,bt=new WeakMap,vt=new WeakMap,wt=new WeakMap,xt=new WeakMap,kt=new WeakMap,At=new WeakMap,Et=new WeakMap,St=new WeakSet,Pt=async function(e){const t=Pn(this,Et).cacheTimeout;if(t<0)return await this._perform(e);const s=LB(e.method,e);let n=Pn(this,vt).get(s);return n||(n=this._perform(e),Pn(this,vt).set(s,n),setTimeout((()=>{Pn(this,vt).get(s)===n&&Pn(this,vt).delete(s)}),t)),await n},Tt=async function(e,t,s){ow(s<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const n=wT(e);try{return yw(await this._perform({method:"call",transaction:n,blockTag:t}))}catch(i){if(!this.disableCcipRead&&aw(i)&&i.data&&s>=0&&"latest"===t&&null!=n.to&&"0x556f1830"===ww(i.data,0,4)){const e=i.data,r=await nE(n.to,this);let o;try{o=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ow(vw(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const s=ww(e,0,32);ow(ww(s,0,12)===ww(QB,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ww(s,12);try{const s=[],n=Dw(ww(e,32,64)),i=Dw(ww(e,n,n+32)),a=ww(e,n+32);for(let e=0;e<i;e++){const t=zB(a,32*e);if(null==t)throw new Error("abort");s.push(t)}t.urls=s}catch(i){ow(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const s=VB(e,64);if(null==s)throw new Error("abort");t.calldata=s}catch(i){ow(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ow(ww(e,100,128)===ww(QB,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ww(e,96,100);try{const s=VB(e,128);if(null==s)throw new Error("abort");t.extraData=s}catch(i){ow(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(ww(i.data,4))}catch(a){ow(!1,a.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:e}})}ow(o.sender.toLowerCase()===r.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:e,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const l=await this.ccipReadFetch(n,o.calldata,o.urls);ow(null!=l,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:i.data,errorArgs:o.errorArgs}});const c={to:r,data:bw([o.selector,KB([l,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await Cn(this,St,Tt).call(this,c,t,s+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(a){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:a}),a}}throw i}},Bt=async function(e){const{value:t}=await tw({network:this.getNetwork(),value:e});return t},Ct=async function(e,t,s){let n=this._getAddress(t),i=this._getBlockTag(s);return"string"==typeof n&&"string"==typeof i||([n,i]=await Promise.all([n,i])),await Cn(this,St,Bt).call(this,Cn(this,St,Pt).call(this,Object.assign(e,{address:n,blockTag:i})))},Mt=async function(e,t){if(fw(e,32))return await Cn(this,St,Pt).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let s=this._getBlockTag(e);return"string"!=typeof s&&(s=await s),await Cn(this,St,Pt).call(this,{method:"getBlock",blockTag:s,includeTransactions:t})},Rt=async function(e,t){let s=await jB(e,this);return"event"===s.type&&t&&t.length>0&&!0===t[0].removed&&(s=await jB({orphan:"drop-log",log:t[0]},this)),Pn(this,pt).get(s.tag)||null},Dt=async function(e){const t=await jB(e,this),s=t.tag;let n=Pn(this,pt).get(s);return n||(n={subscriber:this._getSubscriber(t),tag:s,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},Pn(this,pt).set(s,n)),n};const qB=new Uint8Array([]);function KB(e){const t=[];let s=0;for(let n=0;n<e.length;n++)t.push(qB),s+=32;for(let n=0;n<e.length;n++){const i=dw(e[n]);t[n]=WB(s),t.push(WB(i.length)),t.push($B(i)),s+=32+32*Math.ceil(i.length/32)}return bw(t)}const QB="0x0000000000000000000000000000000000000000000000000000000000000000";function ZB(e,t){if(e.provider)return e.provider;ow(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function XB(e,t){let s=wT(t);if(null!=s.to&&(s.to=nE(s.to,e)),null!=s.from){const t=s.from;s.from=Promise.all([e.getAddress(),nE(t,e)]).then((([e,t])=>(lw(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else s.from=e.getAddress();return await tw(s)}class YB{constructor(e){En(this,"provider"),sw(this,{provider:e||null})}async getNonce(e){return ZB(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await XB(this,e)}async populateTransaction(e){const t=ZB(this,"populateTransaction"),s=await XB(this,e);null==s.nonce&&(s.nonce=await this.getNonce("pending")),null==s.gasLimit&&(s.gasLimit=await this.estimateGas(s));const n=await this.provider.getNetwork();null!=s.chainId?lw(Bw(s.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):s.chainId=n.chainId;const i=null!=s.maxFeePerGas||null!=s.maxPriorityFeePerGas;if(null==s.gasPrice||2!==s.type&&!i?0!==s.type&&1!==s.type||!i||lw(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):lw(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==s.type&&null!=s.type||null==s.maxFeePerGas||null==s.maxPriorityFeePerGas)if(0===s.type||1===s.type){const e=await t.getFeeData();ow(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==s.gasPrice&&(s.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==s.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(s.type=2,null!=s.gasPrice){const e=s.gasPrice;delete s.gasPrice,s.maxFeePerGas=e,s.maxPriorityFeePerGas=e}else null==s.maxFeePerGas&&(s.maxFeePerGas=e.maxFeePerGas),null==s.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(ow(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==s.gasPrice&&(s.gasPrice=e.gasPrice),s.type=0):ow(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==s.type&&3!==s.type||(null==s.maxFeePerGas&&(s.maxFeePerGas=e.maxFeePerGas),null==s.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else s.type=2;return await tw(s)}async estimateGas(e){return ZB(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ZB(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=ZB(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=ZB(this,"sendTransaction"),s=await this.populateTransaction(e);delete s.from;const n=QS.from(s);return await t.broadcastTransaction(await this.signTransaction(n))}}class JB{constructor(e){Tn(this,jt),Tn(this,It),Tn(this,_t),Tn(this,Nt),Tn(this,Lt),Tn(this,Ft),Tn(this,Ot),Bn(this,It,e),Bn(this,_t,null),Bn(this,Nt,Cn(this,jt,Ut).bind(this)),Bn(this,Lt,!1),Bn(this,Ft,null),Bn(this,Ot,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){Pn(this,Lt)||(Bn(this,Lt,!0),Cn(this,jt,Ut).call(this,-2))}stop(){Pn(this,Lt)&&(Bn(this,Lt,!1),Bn(this,Ot,!0),Cn(this,jt,Gt).call(this),Pn(this,It).off("block",Pn(this,Nt)))}pause(e){e&&Cn(this,jt,Gt).call(this),Pn(this,It).off("block",Pn(this,Nt))}resume(){this.start()}}It=new WeakMap,_t=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap,jt=new WeakSet,Ut=async function(e){try{null==Pn(this,_t)&&Bn(this,_t,this._subscribe(Pn(this,It)));let e=null;try{e=await Pn(this,_t)}catch(t){if(!iw(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==e)return Bn(this,_t,null),void Pn(this,It)._recoverSubscriber(this,this._recover(Pn(this,It)));const s=await Pn(this,It).getNetwork();if(Pn(this,Ft)||Bn(this,Ft,s),Pn(this,Ft).chainId!==s.chainId)throw new Error("chaid changed");if(Pn(this,Ot))return;const n=await Pn(this,It).send("eth_getFilterChanges",[e]);await this._emitResults(Pn(this,It),n)}catch(t){console.log("@TODO",t)}Pn(this,It).once("block",Pn(this,Nt))},Gt=function(){const e=Pn(this,_t);e&&(Bn(this,_t,null),e.then((e=>{Pn(this,It).destroyed||Pn(this,It).send("eth_uninstallFilter",[e])})))};class eC extends JB{constructor(e,t){var s;super(e),Tn(this,Ht),Bn(this,Ht,(s=t,JSON.parse(JSON.stringify(s))))}_recover(e){return new IB(e,Pn(this,Ht))}async _subscribe(e){return await e.send("eth_newFilter",[Pn(this,Ht)])}async _emitResults(e,t){for(const s of t)e.emit(Pn(this,Ht),e._wrapLog(s,e._network))}}Ht=new WeakMap;class tC extends JB{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const s of t)e.emit("pending",s)}}const sC="bigint,boolean,function,number,string,symbol".split(/,/g);function nC(e){if(null==e||sC.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(nC);if("object"==typeof e)return Object.keys(e).reduce(((t,s)=>(t[s]=e[s],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function iC(e){return new Promise((t=>{setTimeout(t,e)}))}function aC(e){return e?e.toLowerCase():e}function rC(e){return e&&"number"==typeof e.pollingInterval}const oC={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class lC extends YB{constructor(e,t){super(e),En(this,"address"),sw(this,{address:t=eE(t)})}connect(e){ow(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=nC(e),s=[];if(t.from){const n=t.from;s.push((async()=>{const s=await nE(n,this.provider);lw(null!=s&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=s})())}else t.from=this.address;if(null==t.gasLimit&&s.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;s.push((async()=>{t.to=await nE(e,this.provider)})())}s.length&&await Promise.all(s);const n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise(((e,n)=>{const i=[1e3,100];let a=0;const r=async()=>{try{const n=await this.provider.getTransaction(s);if(null!=n)return void e(n.replaceableTransaction(t))}catch(o){if(iw(o,"CANCELLED")||iw(o,"BAD_DATA")||iw(o,"NETWORK_ERROR")||iw(o,"UNSUPPORTED_OPERATION"))return null==o.info&&(o.info={}),o.info.sendTransactionHash=s,void n(o);if(iw(o,"INVALID_ARGUMENT")&&(a++,null==o.info&&(o.info={}),o.info.sendTransactionHash=s,a>10))return void n(o);this.provider.emit("error",rw("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:o}))}this.provider._setTimeout((()=>{r()}),i.pop()||4e3)};r()}))}async signTransaction(e){const t=nC(e);if(t.from){const s=await nE(t.from,this.provider);lw(null!=s&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=s}else t.from=this.address;const s=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const t="string"==typeof e?Gw(e):e;return await this.provider.send("personal_sign",[yw(t),this.address.toLowerCase()])}async signTypedData(e,t,s){const n=nC(s),i=await hP.resolveNames(e,t,n,(async e=>{const t=await nE(e);return lw(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(hP.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Gw(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),yw(t)])}}class cC extends HB{constructor(e,t){super(e,t),Tn(this,Zt),Tn(this,zt),Tn(this,Vt),Tn(this,Wt),Tn(this,$t),Tn(this,qt),Tn(this,Kt),Tn(this,Qt),Bn(this,Vt,1),Bn(this,zt,Object.assign({},oC,t||{})),Bn(this,Wt,[]),Bn(this,$t,null),Bn(this,Kt,null),Bn(this,Qt,null);{let e=null;const t=new Promise((t=>{e=t}));Bn(this,qt,{promise:t,resolve:e})}const s=this._getOption("staticNetwork");"boolean"==typeof s?(lw(!s||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),s&&null!=e&&Bn(this,Kt,AB.from(e))):s&&(lw(null==e||s.matches(e),"staticNetwork MUST match network object","options",t),Bn(this,Kt,s))}_getOption(e){return Pn(this,zt)[e]}get _network(){return ow(Pn(this,Kt),"network is not available yet","NETWORK_ERROR"),Pn(this,Kt)}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Bw(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const s=await this.getFeeData();null==s.maxFeePerGas&&null==s.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(Pn(this,Kt))return Pn(this,Kt)}return Pn(this,Qt)?await Pn(this,Qt):this.ready?(Bn(this,Qt,(async()=>{try{const e=AB.from(Bw(await this.send("eth_chainId",[])));return Bn(this,Qt,null),e}catch(e){throw Bn(this,Qt,null),e}})()),await Pn(this,Qt)):(Bn(this,Qt,(async()=>{const e={id:Mn(this,Vt)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],Bn(this,Qt,null)}catch(s){throw Bn(this,Qt,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return AB.from(Bw(t.result));throw this.getRpcError(e,t)})()),await Pn(this,Qt))}_start(){null!=Pn(this,qt)&&null!=Pn(this,qt).resolve&&(Pn(this,qt).resolve(),Bn(this,qt,null),(async()=>{for(;null==Pn(this,Kt)&&!this.destroyed;)try{Bn(this,Kt,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",rw("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await iC(1e3)}Cn(this,Zt,Xt).call(this)})())}async _waitUntilReady(){if(null!=Pn(this,qt))return await Pn(this,qt).promise}_getSubscriber(e){return"pending"===e.type?new tC(this):"event"===e.type?this._getOption("polling")?new IB(this,e.filter):new eC(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new FB("orphan"):super._getSubscriber(e)}get ready(){return null==Pn(this,qt)}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((s=>{if(null==e[s])return;let n=s;"gasLimit"===s&&(n="gas"),t[n]=Nw(Bw(e[s],`tx.${s}`))})),["from","to","data"].forEach((s=>{null!=e[s]&&(t[s]=yw(e[s]))})),e.accessList&&(t.accessList=DS(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map((e=>e.toLowerCase()))),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[aC(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[aC(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[aC(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[aC(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(aC):e.filter.address=aC(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:s}=e,{error:n}=t;if("eth_estimateGas"===s&&n.message){const t=n.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return rw("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:n}})}if("eth_call"===s||"eth_estimateGas"===s){const t=uC(n),i=lT.getBuiltinCallException("eth_call"===s?"call":"estimateGas",e.params[0],t?t.data:null);return i.info={error:n,payload:e},i}const i=JSON.stringify(function(e){const t=[];return dC(e,t),t}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return rw("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:n}});if("eth_sendRawTransaction"===s||"eth_sendTransaction"===s){const t=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return rw("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:n}});if(i.match(/nonce/i)&&i.match(/too low/i))return rw("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:n}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return rw("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:n}});if(i.match(/only replay-protected/i))return rw("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:t,info:{error:n}}})}let a=!!i.match(/the method .* does not exist/i);return a||n&&n.details&&n.details.startsWith("Unauthorized method:")&&(a=!0),a?rw("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:n,payload:e}}):rw("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=Mn(this,Vt)._++,n=new Promise(((n,i)=>{Pn(this,Wt).push({resolve:n,reject:i,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})}));return Cn(this,Zt,Xt).call(this),n}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const s=await t;if(e>=s.length)throw new Error("no such account");return new lC(this,s[e])}const{accounts:s}=await tw({network:this.getNetwork(),accounts:t});e=eE(e);for(const n of s)if(eE(n)===e)return new lC(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new lC(this,e)))}destroy(){Pn(this,$t)&&(clearTimeout(Pn(this,$t)),Bn(this,$t,null));for(const{payload:e,reject:t}of Pn(this,Wt))t(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));Bn(this,Wt,[]),super.destroy()}}zt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap,$t=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Zt=new WeakSet,Xt=function(){if(Pn(this,$t))return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");Bn(this,$t,setTimeout((()=>{Bn(this,$t,null);const e=Pn(this,Wt);for(Bn(this,Wt,[]);e.length;){const t=[e.shift()];for(;e.length&&t.length!==Pn(this,zt).batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map((e=>e.payload))).length>Pn(this,zt).batchMaxSize){e.unshift(t.pop());break}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const s=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:s});for(const{resolve:e,reject:n,payload:i}of t){if(this.destroyed){n(rw("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}const t=s.filter((e=>e.id===i.id))[0];if(null!=t)"error"in t?n(this.getRpcError(i,t)):e(t.result);else{const e=rw("missing response for request","BAD_DATA",{value:s,info:{payload:i}});this.emit("error",e),n(e)}}}catch(s){this.emit("debug",{action:"receiveRpcError",error:s});for(const{reject:e}of t)e(s)}})()}}),e))};class hC extends cC{constructor(e,t){super(e,t),Tn(this,Yt);let s=this._getOption("pollingInterval");null==s&&(s=oC.pollingInterval),Bn(this,Yt,s)}_getSubscriber(e){const t=super._getSubscriber(e);return rC(t)&&(t.pollingInterval=Pn(this,Yt)),t}get pollingInterval(){return Pn(this,Yt)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");Bn(this,Yt,e),this._forEachSubscriber((e=>{rC(e)&&(e.pollingInterval=Pn(this,Yt))}))}}function uC(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&fw(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const s=uC(e[t]);if(s)return s}return null}if("string"==typeof e)try{return uC(JSON.parse(e))}catch(t){}return null}function dC(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const s in e)dC(e[s],t);if("string"==typeof e)try{return dC(JSON.parse(e),t)}catch(s){}}}Yt=new WeakMap;class pC extends hC{constructor(e,t,s){const n=Object.assign({},null!=s?s:{},{batchMaxCount:1});lw(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,n),Tn(this,Jt),Bn(this,Jt,(async(t,s)=>{const n={method:t,params:s};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const t=await e.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(RV){const t=new Error(RV.message);throw t.code=RV.code,t.data=RV.data,t.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}))}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){lw(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await Pn(this,Jt).call(this,e.method,e.params||[]);return[{id:e.id,result:t}]}catch(RV){return[{id:e.id,error:{code:RV.code,data:RV.data,message:RV.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!(await this.hasSigner(e)))try{await Pn(this,Jt).call(this,"eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}}Jt=new WeakMap;const fC=""+new URL("Vector-L8wVFDDW.png",import.meta.url).href,mC=""+new URL("Flame-BejVHtvN.png",import.meta.url).href,gC=""+new URL("Flame-1-DQvoWNes.png",import.meta.url).href,yC=""+new URL("Flame-2-BpnUaCkv.png",import.meta.url).href,bC=""+new URL("Corner-Frame-3 1-D2BLk6eF.png",import.meta.url).href,vC=""+new URL("Corner-Frame-3 2-BTERBFke.png",import.meta.url).href,wC=""+new URL("Corner-Frame-3 3-CSmT3o1a.png",import.meta.url).href,xC=""+new URL("Corner-Frame-3 4-BcteDHs9.png",import.meta.url).href;function kC(){const{login:e}=Zv(),t=Ig(),[s,n]=yi.useState(!1),[i,a]=yi.useState("checking");yi.useEffect((()=>{o(),r()}),[]);const r=async()=>{try{const e=await qv.isCorrectNetwork();a(e?"correct":"wrong")}catch(e){console.error("Error checking network:",e),a("error")}},o=async()=>{if(window.ethereum)try{(await window.ethereum.request({method:"eth_accounts"})).length>0&&localStorage.getItem("access_token")&&console.log("already connected")}catch(e){console.error("Error checking wallet connection:",e)}};return Pi.jsxs("div",{className:"login-root",children:[Pi.jsx("img",{src:mC,className:"flame-top",alt:"Flame Top"}),Pi.jsx("img",{src:mC,className:"flame-bottom",style:{transform:"rotate(180deg)"},alt:"Flame Bottom"}),Pi.jsx("img",{src:yC,className:"flame-left",alt:"Flame Left"}),Pi.jsx("img",{src:gC,className:"flame-right",alt:"Flame Right"}),Pi.jsx("img",{src:wC,className:"corner-frame corner-tl",style:{width:"129px",height:"129px"},alt:"Corner TL"}),Pi.jsx("img",{src:xC,className:"corner-frame corner-tr",style:{width:"129px",height:"129px"},alt:"Corner TR"}),Pi.jsx("img",{src:bC,className:"corner-frame corner-bl",style:{width:"129px",height:"129px"},alt:"Corner BL"}),Pi.jsx("img",{src:vC,className:"corner-frame corner-br",style:{width:"129px",height:"129px"},alt:"Corner BR"}),Pi.jsxs("div",{className:"login-box",children:[Pi.jsx("img",{src:fC,alt:"vector",className:"login-vector"}),Pi.jsx("h2",{className:"login-title",children:"Log In or Sign Up"}),"wrong"===i&&Pi.jsx("div",{style:{color:"#ff6b6b",marginBottom:"10px",fontSize:"14px",textAlign:"center"},children:" Please switch to Somnia Testnet"}),Pi.jsxs("button",{onClick:async()=>{if(window.ethereum){n(!0);try{if(!(await qv.isCorrectNetwork()))try{await qv.switchToCorrectNetwork(),a("correct")}catch(s){return alert(`Please switch to Somnia Testnet in MetaMask to continue.\n\nNetwork Error: ${s.message}`),void n(!1)}const i=new pC(window.ethereum),r=await i.getSigner(),o=await r.getAddress(),l="Welcome to the game!\n\nClick to sign in.",c=await r.signMessage(l);await e({walletAddress:o,signature:c,message:l}),console.log("connected"),t("/")}catch(i){console.error("Login failed:",i),alert("Failed to connect wallet. Please try again.")}finally{n(!1)}}else alert("No MetaMask Detected")},className:"login-metamask-btn",disabled:s,style:{opacity:s?.7:1},children:[Pi.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPpSURBVHgB5VRNbBtFFP529td14jpBdpMmVdcCNYWqTahoJP7sjcS1aoo4cEEVnLgA6SW9IMENQYSUihsH1JwiQKLlUgmJKg4BUXFpWlRESdO6pSRGbuON69jetXeG2d/YqluExAneYfbNzJv3vfe99xb4z8jSm7qBf0lOGQN6qAuhMp0dKh8ckMxcRskTitPDMyvL+Afy+6knDEqJcWndfueH2zaapJaZzZumBzBt7JkEdc66+lBCxEuPq0iowjIFnaWCs5j5sFDo5vTmlJ6UVPkEVyc3G9S4sGrjj4rj3TmETnycL+YlLw3mHGPBI9fg7C8NjA/LY/tT0hmREZjvZwqyTDucN5sElZqkM+a/Of+bBavFonvJIS6wD8CYYPI1uqxYFN+uWt53fFhBwya6LHUCWBzAlaWChcvF1gPZhdY+AMFlgT5gg5/uNPFrycHLB1T0xHimQcXcqEtV4Py1Ou7Wujz0afFqSILtQwvqZjF/pcEdRv2AtQrw+c+Nhzv3o+gAeKS4NPUo26Z9mojxIfmRb6jodyjxF8fsZqRKAo4/FcPogOTR0i6jgzJePRRDryp0e2oezh31fLbNwe5L/DPm6nq/gJEUgZ5QIYu+iapQ9Gh+Mat1KSqyS2GxZuNaieLWhh8FYyw/s7Q+4epSCPDiPnKyXxEW9qcJNH5aa4io212j65CESpDulfHsXgcNjl/YoLiyTk+G9xHAREbShTYeNqsituoEoujvYyrjGfh6dYtwcD8Dh8+VogBxzfECcwN8cpeYe/1LdBaZMJxoj6w/0YLIb+9UJPz4pwra1jAO1y+saXzA/Nqkkp1zQBmbjPy6S/0DXWdgRruRy/lj/CHb6eAGHxS5rWmafCCKhE/yDop0f4tn19munFij/J6ejCjiERnd2N7B087GW8gO1iNKXEknmnj38Ian283una4qHiOnPYByRd7Z3oYWL+5mhUCRGXanbMQ0yulq+88EPt1GKN6TYVkCEr0UmrptIwSqB8DZ/lqEM7uNznjhmPd7qtkSmjxFKjJcNf2eSKkOem0RLUfwiqxpnc59n1gM6PLl9vS+m9yjHu4pc7tFQG+fhmYmi08u3kd++bp3lztyEG+9kIay8g1qd8scgHkNEQp/Wtj70UomyiA4PseXqWBjEtBz8dGJQnXk6BQRSHLXre8x7vjxJOIxtIaPoD7wtBm/+sUZxbyhU6dlsHolGdCTj+gMFYdhTukbNGl5Lb9n5vqif7qKhfnn59S4tJB95oD+3NiIdyry4diyrOX790rHD709Xwh9lD59LddYvTgmCEIE8PejGsh3X312jFEkw33ulTfm8L+QvwAAcJAHVMDC3wAAAABJRU5ErkJggg==",alt:"MetaMask Logo",className:"login-metamask-logo"}),Pi.jsx("p",{className:"login-metamask-text",children:s?"Connecting...":"Connect Metamask"})]})]})]})}const AC="survivor_game_save";function EC(e){try{const t={gold:e.gold||0,passiveUpgrades:e.passiveUpgrades||{},allTimeStats:e.allTimeStats||{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},lastRunStats:e.lastRunStats||null,savedAt:(new Date).toISOString(),version:"1.0"};return localStorage.setItem(AC,JSON.stringify(t)),console.log("Game data saved to local storage"),!0}catch(t){return console.error("Error saving to local storage:",t),!1}}function SC(){try{const e=localStorage.getItem(AC);if(!e)return console.log("No saved data found in local storage"),null;const t=JSON.parse(e);return console.log("Game data loaded from local storage:",t),t}catch(e){return console.error("Error loading from local storage:",e),null}}const PC=new Dn.Events.EventEmitter;"undefined"!=typeof window&&(window.EventBus=PC);const TC=async()=>{try{return(await jv.get("/maps")).data}catch(e){throw console.error("Failed to get maps:",e),e}},BC=async()=>{try{return(await jv.get("/scores/global")).data}catch(e){throw console.error("Failed to get global scores:",e),e}},CC=async()=>{try{return(await jv.get("/scores/global")).data}catch(e){throw console.error("Failed to get global kill counts:",e),e}},MC=async()=>{try{return(await jv.get("/profile")).data}catch(e){throw console.error("Failed to get user profile:",e),e}},RC=async()=>{try{return(await jv.get("/my/upgrades")).data}catch(e){throw console.error("Failed to get upgrades:",e),e}},DC=async e=>{try{return(await jv.post("/user/upgrade",{statId:e})).data}catch(t){throw console.error("Failed to buy upgrade:",t),t}},IC=async e=>{try{return(await jv.post("/session",e)).data}catch(t){throw console.error("Failed to start game session:",t),t}},_C=async e=>{try{return(await jv.post("/session/checkpoint",e)).data}catch(t){throw console.error("Failed to save checkpoint:",t),t}},NC=async e=>{try{return(await jv.post("/session/end",e)).data}catch(t){throw console.error("Failed to end game session:",t),t}},LC=class e{constructor(){if(e.instance)return e.instance;e.instance=this,this.backendUpgrades=null,this.isLoaded=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}async loadBackendUpgrades(){if(!localStorage.getItem("access_token"))return console.log("[BackendStatsManager] No auth token, skipping backend upgrades"),this.backendUpgrades={},this.isLoaded=!1,{};try{console.log("[BackendStatsManager] Loading backend upgrades...");const e=await RC(),t=e.data||e;return this.backendUpgrades=this.convertBackendUpgrades(t),this.isLoaded=!0,console.log("[BackendStatsManager] Backend upgrades loaded:",this.backendUpgrades),this.backendUpgrades}catch(e){return console.error("[BackendStatsManager] Failed to load backend upgrades:",e),this.backendUpgrades={},this.isLoaded=!1,{}}}convertBackendUpgrades(e){const t={};return Array.isArray(e)?(e.forEach((e=>{const{type:s,level:n}=e;switch(s){case"MAX_HEALTH":t.maxHealthBonus=20*n;break;case"DAMAGE_BOOST":t.damageBonus=5*n;break;case"MOVESPEED":t.moveSpeedBonus=10*n;break;case"COOLDOWN_REDUCTION":t.cooldownReduction=Math.min(.05*n,.5);break;case"ATTACK_RANGE":t.attackRangeBonus=15*n;break;case"PICKUP_RADIUS":t.pickupRangeBonus=10*n;break;case"HP_REGEN":t.hpRegenBonus=1*n;break;default:console.warn(`[BackendStatsManager] Unknown upgrade type: ${s}`)}})),t):(console.warn("[BackendStatsManager] Invalid backend upgrades format"),{})}applyBackendUpgradesToPlayer(e){var t,s;if(!e||!this.backendUpgrades||!this.isLoaded)return void console.log("[BackendStatsManager] Cannot apply upgrades - missing data");console.log("[BackendStatsManager] Applying backend upgrades to player...");const n=this.backendUpgrades;if(n.maxHealthBonus){const t=e.maxHealth;e.maxHealth=100+n.maxHealthBonus,e.health=e.maxHealth,console.log(`[BackendStatsManager] Applied health: ${t} -> ${e.maxHealth}`)}if(n.damageBonus){const t=e.damage;e.damage=10+n.damageBonus,console.log(`[BackendStatsManager] Applied damage: ${t} -> ${e.damage}`)}if(n.moveSpeedBonus){const t=e.moveSpeed;e.moveSpeed=150+n.moveSpeedBonus,console.log(`[BackendStatsManager] Applied speed: ${t} -> ${e.moveSpeed}`)}if(n.attackRangeBonus){const t=e.attackRange;e.attackRange=100+n.attackRangeBonus,console.log(`[BackendStatsManager] Applied range: ${t} -> ${e.attackRange}`)}if(n.pickupRangeBonus){const t=e.pickupRange;e.pickupRange=50+n.pickupRangeBonus,console.log(`[BackendStatsManager] Applied pickup: ${t} -> ${e.pickupRange}`)}if(n.cooldownReduction&&e.fireRate){const t=e.fireRate;e.fireRate=e.fireRate*(1+n.cooldownReduction),console.log(`[BackendStatsManager] Applied fire rate: ${t} -> ${e.fireRate}`)}n.hpRegenBonus&&(e.hpRegenRate=n.hpRegenBonus,console.log(`[BackendStatsManager] Set HP regen rate: ${e.hpRegenRate}/sec`)),(null==(s=null==(t=e.scene)?void 0:t.playerAttackSystem)?void 0:s.updateStats)&&e.scene.playerAttackSystem.updateStats(),console.log("[BackendStatsManager] Backend upgrades applied successfully")}getBackendUpgrades(){return this.backendUpgrades||{}}isBackendUpgradesLoaded(){return this.isLoaded}};En(LC,"instance",null);let FC=LC;const OC={GOLD:{STARTING_AMOUNT:500,MIN_REWARD:2,MAX_REWARD:7},DIFFICULTY:{SCALING_INTERVAL:60,MAX_ENEMIES_BASE:30,MAX_ENEMIES_CAP:60,ENEMIES_PER_DIFFICULTY:3,SPAWN_DELAY_BASE:3e3,SPAWN_DELAY_MIN:100,SPAWN_DELAY_REDUCTION:300},VASES:{SPAWN_CHANCE:1,MAX_COUNT:500}},jC={maxHealth:{base:100,perLevel:20,baseCost:100,multiplier:1.5,maxLevel:15,name:"Max Health",description:"Increases maximum health"},baseDamage:{base:10,perLevel:2,baseCost:150,multiplier:1.6,maxLevel:15,name:"Base Damage",description:"Increases base damage output"},moveSpeed:{base:200,perLevel:15,baseCost:125,multiplier:1.4,maxLevel:12,name:"Movement Speed",description:"Increases movement speed"},attackSpeed:{base:1,perLevel:.1,baseCost:175,multiplier:1.7,maxLevel:10,name:"Attack Speed",description:"Increases attack frequency"},critChance:{base:5,perLevel:2,baseCost:200,multiplier:1.8,maxLevel:10,name:"Critical Chance",description:"Increases chance for critical hits"},critDamage:{base:150,perLevel:25,baseCost:250,multiplier:1.9,maxLevel:8,name:"Critical Damage",description:"Increases critical hit damage"},pickupRange:{base:50,perLevel:10,baseCost:120,multiplier:1.3,maxLevel:12,name:"Pickup Range",description:"Increases item collection range"},armor:{base:0,perLevel:2,baseCost:180,multiplier:1.6,maxLevel:10,name:"Armor",description:"Reduces incoming damage"},expMultiplier:{base:100,perLevel:10,baseCost:300,multiplier:2,maxLevel:8,name:"Experience Multiplier",description:"Increases experience gain"},goldMultiplier:{base:100,perLevel:20,baseCost:350,multiplier:2.2,maxLevel:8,name:"Gold Multiplier",description:"Increases gold gain"}},UC={zombie:{texture:"zombierun",baseHealth:30,baseDamage:10,baseSpeed:50,expValue:10,goldValue:5,spawnWeight:50,minWave:1,expDropChance:.8,goldDropChance:.4},zombieBig:{texture:"Zombie2RunAni",baseHealth:50,baseDamage:20,baseSpeed:40,expValue:20,goldValue:15,spawnWeight:25,minWave:1,expDropChance:.85,goldDropChance:.5},policeDroid:{texture:"Police run",baseHealth:35,baseDamage:15,baseSpeed:55,expValue:15,goldValue:10,spawnWeight:20,minWave:1,expDropChance:.82,goldDropChance:.45},assassin:{texture:"Dagger Bandit-Run",baseHealth:25,baseDamage:25,baseSpeed:70,expValue:25,goldValue:20,spawnWeight:15,minWave:2,expDropChance:.9,goldDropChance:.6},assassinTank:{texture:"assassinTank",baseHealth:80,baseDamage:30,baseSpeed:30,expValue:40,goldValue:35,spawnWeight:8,minWave:2,expDropChance:.95,goldDropChance:.75},assassinArcher:{texture:"assassinArcher",baseHealth:20,baseDamage:18,baseSpeed:45,expValue:30,goldValue:25,spawnWeight:12,minWave:2,expDropChance:.92,goldDropChance:.7},bigDude:{texture:"run_2",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},wreacker:{texture:"WreackerRun",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},choppor:{texture:"Warrior-Run",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},bomber:{texture:"Bomber_Activited_run_v01",baseHealth:10,baseDamage:42,baseSpeed:35,expValue:20,goldValue:15,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},crawler:{texture:"CrawlerRun",baseHealth:25,baseDamage:30,baseSpeed:60,expValue:40,goldValue:25,spawnWeight:12,minWave:4,expDropChance:.85,goldDropChance:.65},saber:{texture:"saber",baseHealth:40,baseDamage:35,baseSpeed:55,expValue:45,goldValue:30,spawnWeight:10,minWave:4,expDropChance:.88,goldDropChance:.7},guardian:{texture:"guardian",baseHealth:120,baseDamage:25,baseSpeed:25,expValue:60,goldValue:45,spawnWeight:6,minWave:5,expDropChance:.95,goldDropChance:.8},charger:{texture:"charger",baseHealth:60,baseDamage:40,baseSpeed:80,expValue:50,goldValue:35,spawnWeight:8,minWave:5,expDropChance:.9,goldDropChance:.75}},GC={SPAWN_SETTINGS:{INITIAL_SPAWN_DELAY:2e3,MIN_SPAWN_DELAY:800,MAX_SPAWN_DELAY:3e3,SPAWN_DELAY_REDUCTION_PER_WAVE:50,MAX_MOBS_BASE:20,MAX_MOBS_PER_WAVE:2,MAX_MOBS_CAP:50},WAVE_SETTINGS:{WAVE_DURATION:3e4,MOBS_PER_WAVE_BASE:10,MOBS_PER_WAVE_INCREASE:3,HEALTH_SCALING_PER_WAVE:.15,DAMAGE_SCALING_PER_WAVE:.1},TELEPORT_SETTINGS:{CHECK_INTERVAL:2e3,DISTANCE_THRESHOLD:600,SAFE_DISTANCE:150,EFFECT_DURATION:500,EFFECT_RADIUS:30,COLORS:{TELEPORT_OUT:16729156,TELEPORT_IN:4521796},EFFECT_DEPTH:100,MOB_FLASH_DURATION:300},ABILITIES:{COOLDOWNS:{CHARGE:5e3,BOMB:3e3,GUARD:8e3},RANGES:{CHARGE_DETECT:200,BOMB_EXPLODE:100,GUARD_BLOCK:50}}},HC={WORLD:{WIDTH:2560,HEIGHT:2560,BOUNDS:{MIN_X:0,MIN_Y:0,MAX_X:2560,MAX_Y:2560}},PORTAL:{ACTIVATION_INTERVAL:2e4,GLOW_RADIUS:60,OVERLAP_SIZE:100,TELEPORT_DELAY:500,COLORS:{ACTIVE_TINT:65280,ORIGINAL_TINT:16777215,GLOW_COLOR:65280},POSITIONS:[{x:72,y:57},{x:2482,y:57},{x:2482,y:2420},{x:72,y:2420}],AVAILABLE_SCENES:["MiniMapDarkForastScene","MiniMapBossFightScene","MiniMapBeachScene","MiniMapLavaScene"]},WAVE:{ADVANCE_TIMER:3e4,ENEMIES_PER_ADVANCE:10,INITIAL_WAVE:1,MAX_WAVE:100},PLAYER:{DEFAULTS:{health:100,maxHealth:100,damage:10,moveSpeed:100,fireRate:1,attackRange:80,level:1,experience:0,nextLevelExp:100},LEVEL_UP:{EXP_MULTIPLIER:1.2,BASE_EXP_REQUIREMENT:100},COMBAT:{EXP_PER_KILL:10,BASE_GOLD_REWARD:2,MAX_GOLD_REWARD:7}},BALANCE:OC,UPGRADES:jC,MOBS:UC,MOB_SYSTEM:GC,ASSETS:{PICKUPS:{EXP:"./assets/PickUp/Exp.png",HEALTH_POTION:"./assets/PickUp/Health_Potion_01.png"},EFFECTS:{FIRE_BALL:"./assets/Hero/AttackPatterns/fire_ball.png",FIRE_BLAST:"./assets/Hero/AttackPatterns/fire_blast.png",ICE_SHARD:"./assets/Hero/AttackPatterns/ice_shard.png"},SPRITESHEETS:{FIRE_BALL:{frameWidth:32,frameHeight:32},FIRE_BLAST:{frameWidth:48,frameHeight:48},ICE_SHARD:{frameWidth:32,frameHeight:32}}},DEBUG:{ENABLED:!1,CONTROLS:{TOGGLE_DEBUG:"D",TRIGGER_LEVEL_UP:"T",HEAL_PLAYER:"H",ADD_GOLD:"Y",MANUAL_ATTACK:"K"},AUTO_FEATURES:{LEVEL_UP_INTERVAL:5e3,AUTO_EXP_AMOUNT:25}},PERFORMANCE:{UPDATE_INTERVALS:{STATS:1e3,DIFFICULTY:3e4,CLEANUP:6e4},LIMITS:{MAX_PARTICLES:100,MAX_ENEMIES:60,MAX_PROJECTILES:50}},Utils:{getUpgradeConfig:e=>jC[e],getUpgradeCost:(e,t)=>{const s=jC[e];return s?Math.floor(s.baseCost*Math.pow(s.multiplier,t)):0},getUpgradeValue:(e,t)=>{const s=jC[e];return s?s.base+s.perLevel*t:0},isUpgradeMaxed:(e,t)=>{const s=jC[e];return!s||t>=s.maxLevel},getDifficultySpawnDelay:e=>{const{SPAWN_DELAY_BASE:t,SPAWN_DELAY_MIN:s,SPAWN_DELAY_REDUCTION:n}=OC.DIFFICULTY;return Math.max(s,t-(e-1)*n)},getDifficultyMaxEnemies:e=>{const{MAX_ENEMIES_BASE:t,MAX_ENEMIES_CAP:s,ENEMIES_PER_DIFFICULTY:n}=OC.DIFFICULTY;return Math.min(s,t+(e-1)*n)},getMobConfig:e=>UC[e],getAvailableMobsForWave:e=>Object.entries(UC).filter((([t,s])=>s.minWave<=e)),calculateMobStats:(e,t)=>{const s=UC[e];if(!s)return null;const n=1+(t-1)*GC.WAVE_SETTINGS.HEALTH_SCALING_PER_WAVE,i=1+(t-1)*GC.WAVE_SETTINGS.DAMAGE_SCALING_PER_WAVE;return{health:Math.floor(s.baseHealth*n),damage:Math.floor(s.baseDamage*i),speed:s.baseSpeed,expValue:s.expValue,goldValue:s.goldValue}},getWaveSpawnCount:e=>{const{MOBS_PER_WAVE_BASE:t,MOBS_PER_WAVE_INCREASE:s}=GC.WAVE_SETTINGS;return t+(e-1)*s},getSpawnDelay:e=>{const{INITIAL_SPAWN_DELAY:t,MIN_SPAWN_DELAY:s,SPAWN_DELAY_REDUCTION_PER_WAVE:n}=GC.SPAWN_SETTINGS;return Math.max(s,t-(e-1)*n)}}},zC=()=>({level:HC.PLAYER.DEFAULTS.level,experience:HC.PLAYER.DEFAULTS.experience,nextLevelExp:HC.PLAYER.DEFAULTS.nextLevelExp,maxHealth:HC.PLAYER.DEFAULTS.maxHealth,health:HC.PLAYER.DEFAULTS.health,damage:HC.PLAYER.DEFAULTS.damage,moveSpeed:HC.PLAYER.DEFAULTS.moveSpeed,fireRate:HC.PLAYER.DEFAULTS.fireRate,attackRange:HC.PLAYER.DEFAULTS.attackRange}),VC=()=>({gameTime:0,currentDifficulty:1,maxEnemies:HC.BALANCE.DIFFICULTY.MAX_ENEMIES_BASE,enemySpawnDelay:HC.BALANCE.DIFFICULTY.SPAWN_DELAY_BASE});class WC{constructor(e){this.gameManager=e}purchaseUpgrade(e,t){var s;if(!this.canPurchase(e,t))return!1;const n=HC.UPGRADES[e],i=((null==(s=this.gameManager.passiveUpgrades[e])?void 0:s.level)||0)+1,a=n.base+n.perLevel*i;return this.gameManager.gold-=t,this.gameManager.passiveUpgrades[e]={level:i,value:a},this.gameManager.saveGame(),this.gameManager.emitStateUpdate(),PC.emit("game-state-updated"),!0}canPurchase(e,t){var s;if(this.gameManager.gold<t)return!1;const n=HC.UPGRADES[e];return!!n&&((null==(s=this.gameManager.passiveUpgrades[e])?void 0:s.level)||0)<n.maxLevel}getUpgradeConfig(e){return HC.UPGRADES[e]}}class $C{constructor(e){this.gameManager=e}trackRunEvent(e,t=1){var s;if(!this.gameManager.isGameRunning)return;const n=this.gameManager.currentRunStats,i={enemyKill:()=>n.enemiesKilled++,experienceGained:()=>n.experienceGained+=t,goldEarned:()=>n.goldEarned+=t,damageDealt:()=>n.damageDealt+=t,damageTaken:()=>n.damageTaken+=t,levelReached:()=>n.maxLevel=Math.max(n.maxLevel,t)};null==(s=i[e])||s.call(i)}updateAllTimeStats(e){const t=this.gameManager.allTimeStats;t.totalRuns++,["goldEarned","enemiesKilled","experienceGained","damageDealt"].forEach((s=>{t[`total${s.charAt(0).toUpperCase()+s.slice(1)}`]+=e[s]})),e.maxLevel>t.highestLevel&&(t.highestLevel=e.maxLevel),e.survivalTime>t.longestSurvivalTime&&(t.longestSurvivalTime=e.survivalTime),t.averageSurvivalTime=Math.floor((t.longestSurvivalTime+e.survivalTime)/t.totalRuns)}}class qC{constructor(e){this.gameManager=e}applyAllStats(e){if(!e)return;Object.assign(e,zC()),this.applyLocalUpgrades(e);const t=this.gameManager.backendStatsManager;t.isBackendUpgradesLoaded()&&t.applyBackendUpgradesToPlayer(e),this.syncInternalStats(e)}applyLocalUpgrades(e){Object.entries(this.gameManager.passiveUpgrades).forEach((([t,s])=>{this.applySingleUpgrade(e,t,s.value)}))}applySingleUpgrade(e,t,s){var n;const i={maxHealth:()=>{e.maxHealth=s,e.health=s},baseDamage:()=>e.damage=s,moveSpeed:()=>e.moveSpeed=s,attackSpeed:()=>e.fireRate=s,armor:()=>e.armor=s,critChance:()=>e.critChance=s/100,critDamage:()=>e.critDamage=s/100,pickupRange:()=>e.pickupRange=s};null==(n=i[t])||n.call(i)}syncInternalStats(e){const t=this.gameManager.playerStats;["maxHealth","health","damage","moveSpeed","fireRate","attackRange"].forEach((s=>{t[s]=e[s]}))}}const KC=class e{constructor(){if(e.instance)return e.instance;e.instance=this,this.initializeCore(),this.initializeModules(),this.initializeState(),this.setupEventListeners(),this.loadBackendUpgradesAsync()}static get(){return e.instance||new e}initializeCore(){this.gold=HC.BALANCE.GOLD.STARTING_AMOUNT,this.passiveUpgrades={},this.isGameRunning=!1,this.gameStartTime=0,this.currentScene=null,this.loadingBackendUpgrades=!1,this.events=new Phaser.Events.EventEmitter,this.backendStatsManager=FC.getInstance()}initializeModules(){this.upgradeSystem=new WC(this),this.statsTracker=new $C(this),this.playerStatsManager=new qC(this)}initializeState(){this.playerStats=zC(),this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.lastRunStats=null,this.allTimeStats={totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.gameProgress=VC(),this.loadGame(),this.applyPassiveUpgrades()}setupEventListeners(){PC.on("upgrade-purchased",(()=>this.loadBackendUpgradesAsync()))}async loadBackendUpgradesAsync(){var e;if(!this.loadingBackendUpgrades){this.loadingBackendUpgrades=!0;try{await this.backendStatsManager.loadBackendUpgrades(),(null==(e=this.currentScene)?void 0:e.player)&&this.applyPlayerStats(this.currentScene.player)}catch(t){console.warn("Backend upgrade loading failed:",t)}finally{this.loadingBackendUpgrades=!1}}}purchaseUpgrade(e,t){return this.upgradeSystem.purchaseUpgrade(e,t)}getUpgradeConfig(e){return this.upgradeSystem.getUpgradeConfig(e)}startNewRun(){this.isGameRunning=!0,this.gameStartTime=Date.now(),this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.playerStats=zC(),this.gameProgress=VC(),this.loadBackendUpgradesAsync(),this.applyPassiveUpgrades(),this.emitGoldUpdate(),this.emitKillUpdate()}handlePlayerDeath(e="Unknown"){if(!this.isGameRunning)return;this.isGameRunning=!1;const t=Math.floor((Date.now()-this.gameStartTime)/1e3);this.currentRunStats.survivalTime=t,this.currentRunStats.causeOfDeath=e,this.lastRunStats={...this.currentRunStats},this.statsTracker.updateAllTimeStats(this.currentRunStats),this.saveGame(),PC.emit("player-died",this.lastRunStats),window.dispatchEvent(new CustomEvent("playerDeath",{detail:this.lastRunStats}))}resetProgress(){return this.gold=0,this.passiveUpgrades={},this.currentRunStats={survivalTime:0,maxLevel:1,enemiesKilled:0,goldEarned:0,experienceGained:0,damageDealt:0,damageTaken:0,causeOfDeath:null},this.lastRunStats=null,this.allTimeStats={totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.playerStats=zC(),function(e=500){try{const t={gold:e,passiveUpgrades:{},allTimeStats:{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},lastRunStats:null,savedAt:(new Date).toISOString(),version:"1.0"};return localStorage.setItem(AC,JSON.stringify(t)),console.log("Progress reset successfully with",e,"starting gold"),!0}catch(t){return console.error("Error resetting progress:",t),!1}}(0),this.emitStateUpdate(),!0}addExperience(e){const t=this.getMultiplier("expMultiplier"),s=Math.floor(e*t);return this.playerStats.experience+=s,this.statsTracker.trackRunEvent("experienceGained",s),this.playerStats.experience>=this.playerStats.nextLevelExp?(this.levelUp(),!0):(this.events.emit("experienceUpdated",this.playerStats.experience,this.playerStats.nextLevelExp),!1)}levelUp(){this.playerStats.level++,this.statsTracker.trackRunEvent("levelReached",this.playerStats.level);const e=this.playerStats.experience-this.playerStats.nextLevelExp;this.playerStats.nextLevelExp=Math.floor(this.playerStats.nextLevelExp*HC.PLAYER.LEVEL_UP.EXP_MULTIPLIER),this.playerStats.experience=e,this.events.emit("levelUp",this.playerStats.level)}addGold(e){const t=this.getMultiplier("goldMultiplier"),s=Math.floor(e*t);this.gold+=s,this.statsTracker.trackRunEvent("goldEarned",s),this.emitGoldUpdate(s),this.updateUI()}addEnemyKill(){this.statsTracker.trackRunEvent("enemyKill"),this.emitKillUpdate()}addDamageDealt(e){this.statsTracker.trackRunEvent("damageDealt",e)}trackEnemyKill(){this.statsTracker.trackRunEvent("enemyKill"),this.emitKillUpdate(),console.log(`Enemy killed, total: ${this.currentRunStats.enemiesKilled}`)}emitKillUpdate(){const e={kills:this.currentRunStats.enemiesKilled,enemiesKilled:this.currentRunStats.enemiesKilled};PC.emit("player-kill-updated",e),PC.emit("enemy-killed",e)}applyPlayerStats(e){this.playerStatsManager.applyAllStats(e)}applyPassiveUpgrades(){Object.entries(this.passiveUpgrades).forEach((([e,t])=>{this.playerStatsManager.applySingleUpgrade(this.playerStats,e,t.value)}))}updateDifficulty(e){this.gameProgress.gameTime+=e/1e3;const t=1+Math.floor(this.gameProgress.gameTime/HC.BALANCE.DIFFICULTY.SCALING_INTERVAL);t!==this.gameProgress.currentDifficulty&&(this.gameProgress.currentDifficulty=t,this.gameProgress.maxEnemies=HC.Utils.getDifficultyMaxEnemies(t),this.gameProgress.enemySpawnDelay=HC.Utils.getDifficultySpawnDelay(t),this.events.emit("difficultyUpdated",t))}getMultiplier(e){return this.passiveUpgrades[e]?this.passiveUpgrades[e].value/100:1}getCurrentSurvivalTime(){return this.isGameRunning?Math.floor((Date.now()-this.gameStartTime)/1e3):0}getGold(){return this.gold}formatTime(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}toggleDebugMode(){return this.debugMode=!this.debugMode,this.debugMode}emitGoldUpdate(e=0){const t={gold:this.gold,goldEarned:e,totalGold:this.gold,currentGold:this.gold};PC.emit("player-gold-updated",t),PC.emit("player-stats-updated",t),window.dispatchEvent(new CustomEvent("playerGoldUpdated",{detail:t}))}updateUI(){var e;(null==(e=this.currentScene)?void 0:e.uiManager)&&this.currentScene.uiManager.updateScoreboard()}emitStateUpdate(){const e={gold:this.gold,passiveUpgrades:this.passiveUpgrades,allTimeStats:this.allTimeStats,lastRunStats:this.lastRunStats,currentRunStats:this.currentRunStats};window.dispatchEvent(new CustomEvent("gameStateUpdated",{detail:e})),PC.emit("game-state-updated",e)}saveGame(){EC({gold:this.gold,passiveUpgrades:this.passiveUpgrades,allTimeStats:this.allTimeStats,lastRunStats:this.lastRunStats})}loadGame(){const e=SC();e&&(this.gold=e.gold||HC.BALANCE.GOLD.STARTING_AMOUNT,this.passiveUpgrades=e.passiveUpgrades||{},this.allTimeStats=e.allTimeStats||{totalRuns:0,totalGoldEarned:0,totalEnemiesKilled:0,totalExperienceGained:0,totalDamageDealt:0,highestLevel:1,longestSurvivalTime:0,averageSurvivalTime:0},this.lastRunStats=e.lastRunStats||null)}setCurrentScene(e){this.currentScene=e}};En(KC,"instance",null);let QC=KC;const ZC=yi.createContext(),XC=()=>{const e=yi.useContext(ZC);if(!e)throw new Error("useGame must be used within a GameProvider");return e},YC=({children:e})=>{const[t]=yi.useState((()=>new QC));console.log("gameManager",t);const[s,n]=yi.useState(!1),[i,a]=yi.useState(null);yi.useEffect((()=>{const e=()=>{var e,s;const n=(null==(s=null==(e=window.game)?void 0:e.registry)?void 0:s.get("gameManager"))||null;n&&!t&&(console.log("GameManager found and initialized"),setGameManager(n),r(n))};e();const s=setInterval(e,1e3);return()=>clearInterval(s)}),[t]);const r=e=>{try{const t=SC();t&&e&&(e.gold=t.gold||500,e.passiveUpgrades={...t.passiveUpgrades||{}},e.allTimeStats={...t.allTimeStats||{}},console.log("Saved data loaded into GameManager"))}catch(t){console.error("Error loading saved data:",t)}},o=()=>{if(t)try{t.saveGame&&t.saveGame(),EC({gold:t.gold||0,passiveUpgrades:t.passiveUpgrades||{},allTimeStats:t.allTimeStats||{}}),console.log("Game data saved")}catch(e){console.error("Error saving game data:",e)}},l=()=>{if(i)return i;let e=document.getElementById("phaser-game-container");if(!e){e=document.createElement("div"),e.id="phaser-game-container",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="1",document.body.appendChild(e);const t=document.querySelector("canvas");t&&t.parentNode!==e&&(e.appendChild(t),console.log("Canvas moved to game container"))}return a(e),e},c=()=>{try{window.game.scene.getScenes(!0).forEach((e=>{"MainMapScene"!==e.scene.key&&window.game.scene.pause(e.scene.key)})),console.log("All scenes cleaned up")}catch(e){console.error("Error cleaning up scenes:",e)}},h={gameManager:t,isGameInitialized:s,startGameScene:()=>{var e;if(!(null==(e=window.game)?void 0:e.scene))return console.error("Game or scene manager not available!"),!1;try{return(null==t?void 0:t.applyPassiveUpgrades)&&t.applyPassiveUpgrades(),o(),l(),c(),window.game.scene.getScene("MainMapScene")?(window.game.scene.stop("MainMapScene"),setTimeout((()=>{window.game.scene.start("MainMapScene"),console.log("MainMapScene started fresh")}),100),!0):(console.error("MainMapScene not found!"),!1)}catch(s){return console.error("Error starting game scene:",s),!1}},stopGame:()=>{try{o(),c(),console.log("Game stopped and cleaned up")}catch(e){console.error("Error stopping game:",e)}},saveGameData:o,initializeGameContainer:l};return Pi.jsx(ZC.Provider,{value:h,children:e})},JC=({onStartGame:e})=>{const[t,s]=yi.useState(3),[n,i]=yi.useState(0);return yi.useEffect((()=>{const t=setInterval((()=>{i((e=>{if(e>=100)return clearInterval(t),100;const s=1.3*Math.random()+.2;return Math.min(e+s,100)}))}),16),n=setInterval((()=>{s((t=>t<=1?(clearInterval(n),e&&e(),0):t-1))}),1e3);return()=>{clearInterval(n),clearInterval(t)}}),[e]),Pi.jsx("div",{className:"w-screen h-screen flex justify-center items-center bg-dark-secondary",children:Pi.jsxs("div",{className:"relative",children:[Pi.jsxs("div",{className:"relative p-10 h-132 w-162",children:[Pi.jsx("img",{src:"LogoBlack.svg",alt:"Game Logo",className:"absolute inset-0 w-full h-full object-contain"}),Pi.jsx("div",{className:"absolute inset-0 overflow-hidden transition-all duration-75 ease-linear",style:{clipPath:`polygon(0% ${100-n}%, 100% ${100-n}%, 100% 100%, 0% 100%)`},children:Pi.jsx("img",{src:"LogoColor.svg",alt:"Game Logo",className:"w-full h-full object-contain"})})]}),Pi.jsx("div",{className:"text-center mt-4",children:Pi.jsxs("div",{className:"text-white text-lg font-semibold",children:["Loading... ",Math.round(n),"%"]})})]})})},eM=({onStartGame:e})=>{const{gameManager:t}=XC();return Pi.jsx(JC,{gameManager:t,onStartGame:()=>{console.log("Starting game from MainMenu"),t&&t.startNewRun&&console.log("GameManager ready for new run"),e&&e()}})},tM=({size:e})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pi.jsxs("g",{clipPath:"url(#clip0_17780_125)",children:[Pi.jsx("path",{d:"M8.33337 10.833H1.66671V11.6663H0.833374V18.333H1.66671V19.1663H8.33337V18.333H9.16671V11.6663H8.33337V10.833ZM7.50004 17.4997H2.50004V12.4997H7.50004V17.4997Z",fill:"white"}),Pi.jsx("path",{d:"M8.33337 1.66634V0.833008H1.66671V1.66634H0.833374V8.33301H1.66671V9.16634H8.33337V8.33301H9.16671V1.66634H8.33337ZM2.50004 7.49967V2.49967H7.50004V7.49967H2.50004Z",fill:"white"}),Pi.jsx("path",{d:"M18.3334 10.833H11.6667V11.6663H10.8334V18.333H11.6667V19.1663H18.3334V18.333H19.1667V11.6663H18.3334V10.833ZM17.5 17.4997H12.5V12.4997H17.5V17.4997Z",fill:"white"}),Pi.jsx("path",{d:"M18.3334 1.66634V0.833008H11.6667V1.66634H10.8334V8.33301H11.6667V9.16634H18.3334V8.33301H19.1667V1.66634H18.3334ZM17.5 7.49967H12.5V2.49967H17.5V7.49967Z",fill:"white"})]}),Pi.jsx("defs",{children:Pi.jsx("clipPath",{id:"clip0_17780_125",children:Pi.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),sM=({size:e})=>Pi.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:Pi.jsx("path",{d:"M19.1667 4.16699V11.667H18.3334V10.8337H17.5V10.0003H16.6667V9.16699H15V10.0003H14.1667V10.8337H13.3334V11.667H12.5V12.5003H11.6667V13.3337H10.8334V14.167H10V15.0003H8.33337V14.167H7.50004V13.3337H6.66671V12.5003H5.83337V11.667H4.16671V12.5003H3.33337V13.3337H2.50004V14.167H0.833374V12.5003H1.66671V11.667H2.50004V10.8337H3.33337V10.0003H4.16671V9.16699H5.83337V10.0003H6.66671V10.8337H7.50004V11.667H8.33337V12.5003H10V11.667H10.8334V10.8337H11.6667V10.0003H12.5V9.16699H13.3334V8.33366H14.1667V6.66699H13.3334V5.83366H12.5V5.00033H11.6667V4.16699H19.1667Z",fill:"white"})}),nM=({size:e})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",children:[Pi.jsx("path",{d:"M23 18H9V19H23V18Z",fill:"white"}),Pi.jsx("path",{d:"M23 12H9V13H23V12Z",fill:"white"}),Pi.jsx("path",{d:"M23 6H9V7H23V6Z",fill:"white"}),Pi.jsx("path",{d:"M7 15H8V17H7V18H6V19H5V20H4V21H3V20H2V19H1V17H2V18H3V19H4V18H5V17H6V16H7V15Z",fill:"white"}),Pi.jsx("path",{d:"M8 9V11H7V12H6V13H5V14H4V15H3V14H2V13H1V11H2V12H3V13H4V12H5V11H6V10H7V9H8Z",fill:"white"}),Pi.jsx("path",{d:"M8 3V5H7V6H6V7H5V8H4V9H3V8H2V7H1V5H2V6H3V7H4V6H5V5H6V4H7V3H8Z",fill:"white"})]}),iM=({size:e})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pi.jsx("g",{"clip-path":"url(#clip0_17795_142)",children:Pi.jsx("path",{d:"M18.3334 4.99967V3.33301H17.5V2.49967H16.6667V1.66634H15.8334V0.833008H4.16671V1.66634H3.33337V2.49967H2.50004V3.33301H1.66671V4.99967H0.833374V18.333H1.66671V19.1663H18.3334V18.333H19.1667V4.99967H18.3334ZM10.8334 2.49967H15V3.33301H15.8334V4.16634H16.6667V5.83301H10.8334V2.49967ZM3.33337 4.16634H4.16671V3.33301H5.00004V2.49967H9.16671V5.83301H3.33337V4.16634ZM2.50004 17.4997V7.49967H9.16671V9.16634H7.50004V12.4997H8.33337V13.333H10.8334V14.1663H7.50004V15.833H9.16671V17.4997H2.50004ZM17.5 17.4997H10.8334V15.833H12.5V12.4997H11.6667V11.6663H9.16671V10.833H12.5V9.16634H10.8334V7.49967H17.5V17.4997Z",fill:"white"})}),Pi.jsx("defs",{children:Pi.jsx("clipPath",{id:"clip0_17795_142",children:Pi.jsx("rect",{width:"20",height:"20",fill:"white"})})})]}),aM=({size:e})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pi.jsx("path",{d:"M15 4.99967V7.49967H14.1666V8.33301H13.3333V9.16634H12.5V9.99967H11.6666V10.833H10.8333V11.6663H9.99996V10.833H9.16663V9.99967H8.33329V9.16634H7.49996V8.33301H6.66663V7.49967H5.83329V4.99967H6.66663V4.16634H9.16663V4.99967H9.99996V5.83301H10.8333V4.99967H11.6666V4.16634H14.1666V4.99967H15Z",fill:"white"}),Pi.jsx("path",{d:"M16.6666 14.1663H17.5V13.333H18.3333V1.66634H17.5V0.833008H3.33329V1.66634H2.49996V2.49967H1.66663V17.4997H2.49996V18.333H3.33329V19.1663H17.5V18.333H18.3333V17.4997H17.5V16.6663H16.6666V14.1663ZM15 17.4997H4.16663V16.6663H3.33329V14.9997H4.16663V14.1663H15V17.4997ZM3.33329 2.49967H16.6666V12.4997H3.33329V2.49967Z",fill:"white"})]}),rM=({size:e})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pi.jsx("path",{d:"M14.1666 4.16634V2.49967H13.3333V1.66634H11.6666V0.833008H8.33329V1.66634H6.66663V2.49967H5.83329V4.16634H4.99996V7.49967H5.83329V9.16634H6.66663V9.99967H8.33329V10.833H11.6666V9.99967H13.3333V9.16634H14.1666V7.49967H15V4.16634H14.1666ZM12.5 7.49967V8.33301H11.6666V9.16634H8.33329V8.33301H7.49996V7.49967H6.66663V4.16634H7.49996V3.33301H8.33329V2.49967H11.6666V3.33301H12.5V4.16634H13.3333V7.49967H12.5Z",fill:"white"}),Pi.jsx("path",{d:"M17.5 15.833V14.9997H16.6666V14.1663H15.8333V13.333H14.1666V12.4997H5.83329V13.333H4.16663V14.1663H3.33329V14.9997H2.49996V15.833H1.66663V18.333H2.49996V19.1663H17.5V18.333H18.3333V15.833H17.5ZM4.16663 15.833V14.9997H5.83329V14.1663H14.1666V14.9997H15.8333V15.833H16.6666V17.4997H3.33329V15.833H4.16663Z",fill:"white"})]}),oM=({size:e,color:t})=>Pi.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:[Pi.jsx("path",{d:"M13.333 14.1663L12.1413 12.9746L14.283 10.833H7.49967V9.16634H14.283L12.1413 7.02467L13.333 5.83301L17.4997 9.99967L13.333 14.1663Z",fill:t}),Pi.jsx("path",{d:"M15.833 2.49967H4.16634C3.24967 2.49967 2.49967 3.24967 2.49967 4.16634V7.49967H4.16634V4.16634H15.833V15.833H4.16634V12.4997H2.49967V15.833C2.49967 16.7497 3.24967 17.4997 4.16634 17.4997H15.833C16.7497 17.4997 17.4997 16.7497 17.4997 15.833V4.16634C17.4997 3.24967 16.7497 2.49967 15.833 2.49967Z",fill:t})]}),lM=({size:e})=>Pi.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 20 20",fill:"none",children:Pi.jsx("path",{d:"M17.5001 9.16634V8.33301H16.6667V7.49967H15.0001V6.66634H13.3334V5.83301H12.5001V4.99967H10.8334V4.16634H9.16675V3.33301H8.33342V2.49967H6.66675V1.66634H5.00008V0.833008H2.50008V1.66634H1.66675V18.333H2.50008V19.1663H5.00008V18.333H6.66675V17.4997H8.33342V16.6663H9.16675V15.833H10.8334V14.9997H12.5001V14.1663H13.3334V13.333H15.0001V12.4997H16.6667V11.6663H17.5001V10.833H18.3334V9.16634H17.5001ZM15.8334 10.833H14.1667V11.6663H12.5001V12.4997H11.6667V13.333H10.0001V14.1663H8.33342V14.9997H7.50008V15.833H5.83342V16.6663H4.16675V17.4997H3.33341V2.49967H4.16675V3.33301H5.83342V4.16634H7.50008V4.99967H8.33342V5.83301H10.0001V6.66634H11.6667V7.49967H12.5001V8.33301H14.1667V9.16634H15.8334V10.833Z",fill:"white"})}),cM=()=>{const e=Mg(),t=Ig(),{logout:s,user:n}=Zv(),{gameControls:i}=Yv(),[a,r]=yi.useState(!1),o=t=>e.pathname===t?"active":"",l=e.pathname.startsWith("/game");return Pi.jsxs("div",{className:"min-h-screen text-white flex",children:[Pi.jsx("nav",{className:"bg-dark-primary border-r-2 pb-4  border-r-dark-tertiary w-64 h-screen relative overflow-hidden",children:Pi.jsxs("div",{className:"p-4 flex flex-col",children:[Pi.jsxs("div",{className:"mb-16 flex flex-col gap-3 justify-center items-center",children:[Pi.jsx("img",{src:"/logo.svg",alt:"Logo",draggable:"false"}),Pi.jsx("p",{className:"text-heading-1-alagard",children:"Insomnus"})]}),Pi.jsxs("div",{className:" gap-5 flex flex-col",children:[Pi.jsx("div",{className:"",children:Pi.jsxs("button",{onClick:()=>{l&&"playing"===(null==i?void 0:i.gameState)&&(null==i?void 0:i.returnToMenu)?i.returnToMenu():l&&(null==i?void 0:i.startGame)?i.startGame():t("/game")},className:"w-full flex gap-4 px-6 py-3 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded transition-colors shadow-lg",children:[Pi.jsx(lM,{size:20}),l&&"playing"===(null==i?void 0:i.gameState)?" Return to Menu":"Start Game"]})}),Pi.jsxs(gy,{to:"/",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(tM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Dashboard"})]}),Pi.jsxs(gy,{to:"/leaderboard",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/leaderboard")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(sM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Leaderboard"})]}),Pi.jsxs(gy,{to:"/quest",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/quest")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(nM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Quest"})]}),Pi.jsxs(gy,{to:"/market",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/market")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(iM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Market"})]}),Pi.jsxs(gy,{to:"/guide",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/guide")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(aM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Guide"})]}),Pi.jsxs(gy,{to:"/account",className:" flex gap-3 pl-6 pr-5 py-3 outline-none border-none  text-sm font-medium transition-colors "+(o("/account")?"bg-translucent-light-8 text-light-primary":"text-light-primary hover:bg-translucent-light-8"),children:[Pi.jsx(rM,{size:20}),Pi.jsx("p",{className:"text-button-48-pixelify",children:"Account"})]})]}),Pi.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:Pi.jsxs("div",{className:"relative",children:[a&&Pi.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-dark-secondary border border-dark-tertiary rounded-lg shadow-lg z-50",children:Pi.jsx("div",{className:"py-1",children:Pi.jsxs("button",{onClick:()=>{s(),t("/login"),r(!1)},className:"w-full flex items-center gap-3 px-6 py-3 text-sm font-medium text-light-primary hover:bg-translucent-light-8 transition-colors",children:[Pi.jsx(oM,{size:20,color:"#CC1508"}),Pi.jsx("span",{className:"text-button-48-pixelify text-[#CC1508]",children:"Logout"})]})})}),Pi.jsxs("button",{onClick:()=>r(!a),className:"w-full flex gap-3 p-2 items-center outline-none mb-10 bg-translucent-light-8 border-none text-sm font-medium transition-colors text-light-primary hover:bg-translucent-light-8",children:[Pi.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:Pi.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pi.jsxs("p",{className:"text-button-16-pixelify",children:[n.walletAddress.slice(0,4),"...",n.walletAddress.slice(-4)]})]})]})})]})}),Pi.jsx("div",{className:"flex-1 flex flex-col h-screen bg-dark-primary overflow-hidden",children:Pi.jsx($g,{})})]})},hM=({title:e,value:t,onClick:s,disabled:n=!1})=>Pi.jsxs("div",{className:"relative p-4 gap-2 flex flex-col justify-center items-center bg-[#24110F] border-4 border-[#46110D] flex-1 w-full",children:[Pi.jsx("p",{className:"text-light-secondary",children:e}),Pi.jsx("p",{className:"text-heading-4-alagard",children:t})]}),uM=({title:e,value:t,progress:s,description:n,onUpgrade:i,isMaxed:a,upgradeId:r,upgradeCost:o,isLoading:l=!1})=>Pi.jsxs("div",{className:"relative p-8 flex w-full h-[160px] bg-dark-secondary outline-4 outline-[#46110D]",children:[Pi.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute top-0 left-0 w-6 h-6 pointer-events-none scale-y-[-1] scale-x-[-1]"}),Pi.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute top-0 right-0 w-6 h-6 pointer-events-none scale-y-[-1]"}),Pi.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute bottom-0 right-0 w-6 h-6 pointer-events-none"}),Pi.jsx("img",{src:"/Item-corner.svg",alt:"",className:"absolute bottom-0 left-0 w-6 h-6 pointer-events-none scale-x-[-1]"}),Pi.jsxs("div",{className:"relative z-10 flex flex-col justify-center items-center w-full h-full gap-3",children:[Pi.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[Pi.jsx("p",{className:"text-body-2-pixelify text-center text-[#ffae0b]",children:e}),Pi.jsx("p",{className:"text-heading-4-alagard",children:t}),s&&Pi.jsx("p",{className:"text-xs text-gray-400",children:s})]}),i&&Pi.jsx("button",{onClick:()=>i(r),disabled:a||l,className:"mt-2 px-4 py-2 text-sm font-bold rounded flex items-center gap-2 "+(a||l?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700 text-white"),children:l?Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-white"}),"UPGRADING..."]}):a?"MAXED":`UPGRADE (${o||0} gold)`})]})]});var dM=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pM="undefined"==typeof window||"Deno"in globalThis;function fM(){}function mM(e){return"number"==typeof e&&e>=0&&e!==1/0}function gM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yM(e,t){return"function"==typeof e?e(t):e}function bM(e,t){return"function"==typeof e?e(t):e}function vM(e,t){const{type:s="all",exact:n,fetchStatus:i,predicate:a,queryKey:r,stale:o}=e;if(r)if(n){if(t.queryHash!==xM(r,t.options))return!1}else if(!AM(t.queryKey,r))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return!("boolean"==typeof o&&t.isStale()!==o||i&&i!==t.state.fetchStatus||a&&!a(t))}function wM(e,t){const{exact:s,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(kM(t.options.mutationKey)!==kM(a))return!1}else if(!AM(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function xM(e,t){return((null==t?void 0:t.queryKeyHashFn)||kM)(e)}function kM(e){return JSON.stringify(e,((e,t)=>TM(t)?Object.keys(t).sort().reduce(((e,s)=>(e[s]=t[s],e)),{}):t))}function AM(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((s=>AM(e[s],t[s])))}function EM(e,t){if(e===t)return e;const s=PM(e)&&PM(t);if(s||TM(e)&&TM(t)){const n=s?e:Object.keys(e),i=n.length,a=s?t:Object.keys(t),r=a.length,o=s?[]:{},l=new Set(n);let c=0;for(let h=0;h<r;h++){const n=s?h:a[h];(!s&&l.has(n)||s)&&void 0===e[n]&&void 0===t[n]?(o[n]=void 0,c++):(o[n]=EM(e[n],t[n]),o[n]===e[n]&&void 0!==e[n]&&c++)}return i===r&&c===i?e:o}return t}function SM(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function PM(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function TM(e){if(!BM(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!BM(s)&&!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function BM(e){return"[object Object]"===Object.prototype.toString.call(e)}function CM(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?EM(e,t):t}function MM(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function RM(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var DM=Symbol();function IM(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==DM?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function _M(e,t){return"function"==typeof e?e(...t):!!e}var NM=new(ns=class extends dM{constructor(){super(),Tn(this,es),Tn(this,ts),Tn(this,ss),Bn(this,ss,(e=>{if(!pM&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}))}onSubscribe(){Pn(this,ts)||this.setEventListener(Pn(this,ss))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Pn(this,ts))||e.call(this),Bn(this,ts,void 0))}setEventListener(e){var t;Bn(this,ss,e),null==(t=Pn(this,ts))||t.call(this),Bn(this,ts,e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})))}setFocused(e){Pn(this,es)!==e&&(Bn(this,es,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){var e;return"boolean"==typeof Pn(this,es)?Pn(this,es):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},es=new WeakMap,ts=new WeakMap,ss=new WeakMap,ns),LM=new(os=class extends dM{constructor(){super(),Tn(this,is,!0),Tn(this,as),Tn(this,rs),Bn(this,rs,(e=>{if(!pM&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}))}onSubscribe(){Pn(this,as)||this.setEventListener(Pn(this,rs))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=Pn(this,as))||e.call(this),Bn(this,as,void 0))}setEventListener(e){var t;Bn(this,rs,e),null==(t=Pn(this,as))||t.call(this),Bn(this,as,e(this.setOnline.bind(this)))}setOnline(e){Pn(this,is)!==e&&(Bn(this,is,e),this.listeners.forEach((t=>{t(e)})))}isOnline(){return Pn(this,is)}},is=new WeakMap,as=new WeakMap,rs=new WeakMap,os);function FM(){let e,t;const s=new Promise(((s,n)=>{e=s,t=n}));function n(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch((()=>{})),s.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},s.reject=e=>{n({status:"rejected",reason:e}),t(e)},s}function OM(e){return Math.min(1e3*2**e,3e4)}function jM(e){return"online"!==(e??"online")||LM.isOnline()}var UM=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function GM(e){return e instanceof UM}function HM(e){let t,s=!1,n=0,i=!1;const a=FM(),r=()=>NM.isFocused()&&("always"===e.networkMode||LM.isOnline())&&e.canRun(),o=()=>jM(e.networkMode)&&e.canRun(),l=s=>{var n;i||(i=!0,null==(n=e.onSuccess)||n.call(e,s),null==t||t(),a.resolve(s))},c=s=>{var n;i||(i=!0,null==(n=e.onError)||n.call(e,s),null==t||t(),a.reject(s))},h=()=>new Promise((s=>{var n;t=e=>{(i||r())&&s(e)},null==(n=e.onPause)||n.call(e)})).then((()=>{var s;t=void 0,i||null==(s=e.onContinue)||s.call(e)})),u=()=>{if(i)return;let t;const a=0===n?e.initialPromise:void 0;try{t=a??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch((t=>{var a;if(i)return;const o=e.retry??(pM?0:3),l=e.retryDelay??OM,d="function"==typeof l?l(n,t):l,p=!0===o||"number"==typeof o&&n<o||"function"==typeof o&&o(n,t);var f;!s&&p?(n++,null==(a=e.onFail)||a.call(e,n,t),(f=d,new Promise((e=>{setTimeout(e,f)}))).then((()=>r()?void 0:h())).then((()=>{s?c(t):u()}))):c(t)}))};return{promise:a,cancel:t=>{var s;i||(c(new UM(t)),null==(s=e.abort)||s.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():h().then(u),a)}}var zM=e=>setTimeout(e,0),VM=function(){let e=[],t=0,s=e=>{e()},n=e=>{e()},i=zM;const a=n=>{t?e.push(n):i((()=>{s(n)}))};return{batch:a=>{let r;t++;try{r=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{n((()=>{t.forEach((e=>{s(e)}))}))}))})()}return r},batchCalls:e=>(...t)=>{a((()=>{e(...t)}))},schedule:a,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{i=e}}}(),WM=(cs=class{constructor(){Tn(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mM(this.gcTime)&&Bn(this,ls,setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pM?1/0:3e5))}clearGcTimeout(){Pn(this,ls)&&(clearTimeout(Pn(this,ls)),Bn(this,ls,void 0))}},ls=new WeakMap,cs),$M=(vs=class extends WM{constructor(e){super(),Tn(this,ys),Tn(this,hs),Tn(this,us),Tn(this,ds),Tn(this,ps),Tn(this,fs),Tn(this,ms),Tn(this,gs),Bn(this,gs,!1),Bn(this,ms,e.defaultOptions),this.setOptions(e.options),this.observers=[],Bn(this,ps,e.client),Bn(this,ds,Pn(this,ps).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Bn(this,hs,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,n=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=e.state??Pn(this,hs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=Pn(this,fs))?void 0:e.promise}setOptions(e){this.options={...Pn(this,ms),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Pn(this,ds).remove(this)}setData(e,t){const s=CM(this.state.data,e,this.options);return Cn(this,ys,bs).call(this,{data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),s}setState(e,t){Cn(this,ys,bs).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const n=null==(t=Pn(this,fs))?void 0:t.promise;return null==(s=Pn(this,fs))||s.cancel(e),n?n.then(fM).catch(fM):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Pn(this,hs))}isActive(){return this.observers.some((e=>!1!==bM(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some((e=>"static"===yM(e.options.staleTime,this)))}isStale(){return this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!gM(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));null==t||t.refetch({cancelRefetch:!1}),null==(e=Pn(this,fs))||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));null==t||t.refetch({cancelRefetch:!1}),null==(e=Pn(this,fs))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Pn(this,ds).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(Pn(this,fs)&&(Pn(this,gs)?Pn(this,fs).cancel({revert:!0}):Pn(this,fs).cancelRetry()),this.scheduleGc()),Pn(this,ds).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Cn(this,ys,bs).call(this,{type:"invalidate"})}fetch(e,t){var s,n,i;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(Pn(this,fs))return Pn(this,fs).continueRetry(),Pn(this,fs).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const a=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Bn(this,gs,!0),a.signal)})},o=()=>{const e=IM(this.options,t),s=(()=>{const e={client:Pn(this,ps),queryKey:this.queryKey,meta:this.meta};return r(e),e})();return Bn(this,gs,!1),this.options.persister?this.options.persister(e,s,this):e(s)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Pn(this,ps),state:this.state,fetchFn:o};return r(e),e})();null==(s=this.options.behavior)||s.onFetch(l,this),Bn(this,us,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(n=l.fetchOptions)?void 0:n.meta)||Cn(this,ys,bs).call(this,{type:"fetch",meta:null==(i=l.fetchOptions)?void 0:i.meta});const c=e=>{var t,s,n,i;GM(e)&&e.silent||Cn(this,ys,bs).call(this,{type:"error",error:e}),GM(e)||(null==(s=(t=Pn(this,ds).config).onError)||s.call(t,e,this),null==(i=(n=Pn(this,ds).config).onSettled)||i.call(n,this.state.data,e,this)),this.scheduleGc()};return Bn(this,fs,HM({initialPromise:null==t?void 0:t.initialPromise,fn:l.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,s,n,i;if(void 0!==e){try{this.setData(e)}catch(a){return void c(a)}null==(s=(t=Pn(this,ds).config).onSuccess)||s.call(t,e,this),null==(i=(n=Pn(this,ds).config).onSettled)||i.call(n,e,this.state.error,this),this.scheduleGc()}else c(new Error(`${this.queryHash} data is undefined`))},onError:c,onFail:(e,t)=>{Cn(this,ys,bs).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Cn(this,ys,bs).call(this,{type:"pause"})},onContinue:()=>{Cn(this,ys,bs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Pn(this,fs).start()}},hs=new WeakMap,us=new WeakMap,ds=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ys=new WeakSet,bs=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...qM(t.data,this.options),fetchMeta:e.meta??null};case"success":return Bn(this,us,void 0),{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return GM(s)&&s.revert&&Pn(this,us)?{...Pn(this,us),fetchStatus:"idle"}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),VM.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),Pn(this,ds).notify({query:this,type:"updated",action:e})}))},vs);function qM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jM(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var KM=(xs=class extends dM{constructor(e={}){super(),Tn(this,ws),this.config=e,Bn(this,ws,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??xM(n,t);let a=this.get(i);return a||(a=new $M({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){Pn(this,ws).has(e.queryHash)||(Pn(this,ws).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Pn(this,ws).get(e.queryHash);t&&(e.destroy(),t===e&&Pn(this,ws).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){VM.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return Pn(this,ws).get(e)}getAll(){return[...Pn(this,ws).values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>vM(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>vM(e,t))):t}notify(e){VM.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){VM.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){VM.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},ws=new WeakMap,xs),QM=(Ts=class extends WM{constructor(e){super(),Tn(this,Ss),Tn(this,ks),Tn(this,As),Tn(this,Es),this.mutationId=e.mutationId,Bn(this,As,e.mutationCache),Bn(this,ks,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Pn(this,ks).includes(e)||(Pn(this,ks).push(e),this.clearGcTimeout(),Pn(this,As).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Bn(this,ks,Pn(this,ks).filter((t=>t!==e))),this.scheduleGc(),Pn(this,As).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Pn(this,ks).length||("pending"===this.state.status?this.scheduleGc():Pn(this,As).remove(this))}continue(){var e;return(null==(e=Pn(this,Es))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,s,n,i,a,r,o,l,c,h,u,d,p,f,m,g,y,b,v,w;const x=()=>{Cn(this,Ss,Ps).call(this,{type:"continue"})};Bn(this,Es,HM({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Cn(this,Ss,Ps).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Cn(this,Ss,Ps).call(this,{type:"pause"})},onContinue:x,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Pn(this,As).canRun(this)}));const k="pending"===this.state.status,A=!Pn(this,Es).canStart();try{if(k)x();else{Cn(this,Ss,Ps).call(this,{type:"pending",variables:e,isPaused:A}),await(null==(s=(t=Pn(this,As).config).onMutate)?void 0:s.call(t,e,this));const a=await(null==(i=(n=this.options).onMutate)?void 0:i.call(n,e));a!==this.state.context&&Cn(this,Ss,Ps).call(this,{type:"pending",context:a,variables:e,isPaused:A})}const p=await Pn(this,Es).start();return await(null==(r=(a=Pn(this,As).config).onSuccess)?void 0:r.call(a,p,e,this.state.context,this)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,p,e,this.state.context)),await(null==(h=(c=Pn(this,As).config).onSettled)?void 0:h.call(c,p,null,this.state.variables,this.state.context,this)),await(null==(d=(u=this.options).onSettled)?void 0:d.call(u,p,null,e,this.state.context)),Cn(this,Ss,Ps).call(this,{type:"success",data:p}),p}catch(E){try{throw await(null==(f=(p=Pn(this,As).config).onError)?void 0:f.call(p,E,e,this.state.context,this)),await(null==(g=(m=this.options).onError)?void 0:g.call(m,E,e,this.state.context)),await(null==(b=(y=Pn(this,As).config).onSettled)?void 0:b.call(y,void 0,E,this.state.variables,this.state.context,this)),await(null==(w=(v=this.options).onSettled)?void 0:w.call(v,void 0,E,e,this.state.context)),E}finally{Cn(this,Ss,Ps).call(this,{type:"error",error:E})}}finally{Pn(this,As).runNext(this)}}},ks=new WeakMap,As=new WeakMap,Es=new WeakMap,Ss=new WeakSet,Ps=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),VM.batch((()=>{Pn(this,ks).forEach((t=>{t.onMutationUpdate(e)})),Pn(this,As).notify({mutation:this,type:"updated",action:e})}))},Ts),ZM=(Rs=class extends dM{constructor(e={}){super(),Tn(this,Bs),Tn(this,Cs),Tn(this,Ms),this.config=e,Bn(this,Bs,new Set),Bn(this,Cs,new Map),Bn(this,Ms,0)}build(e,t,s){const n=new QM({mutationCache:this,mutationId:++Mn(this,Ms)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){Pn(this,Bs).add(e);const t=XM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t);s?s.push(e):Pn(this,Cs).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Pn(this,Bs).delete(e)){const t=XM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&Pn(this,Cs).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=XM(e);if("string"==typeof t){const s=Pn(this,Cs).get(t),n=null==s?void 0:s.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){var t;const s=XM(e);if("string"==typeof s){const n=null==(t=Pn(this,Cs).get(s))?void 0:t.find((t=>t!==e&&t.state.isPaused));return(null==n?void 0:n.continue())??Promise.resolve()}return Promise.resolve()}clear(){VM.batch((()=>{Pn(this,Bs).forEach((e=>{this.notify({type:"removed",mutation:e})})),Pn(this,Bs).clear(),Pn(this,Cs).clear()}))}getAll(){return Array.from(Pn(this,Bs))}find(e){const t={exact:!0,...e};return this.getAll().find((e=>wM(t,e)))}findAll(e={}){return this.getAll().filter((t=>wM(e,t)))}notify(e){VM.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return VM.batch((()=>Promise.all(e.map((e=>e.continue().catch(fM))))))}},Bs=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Rs);function XM(e){var t;return null==(t=e.options.scope)?void 0:t.id}function YM(e){return{onFetch:(t,s)=>{var n,i,a,r,o;const l=t.options,c=null==(a=null==(i=null==(n=t.fetchOptions)?void 0:n.meta)?void 0:i.fetchMore)?void 0:a.direction,h=(null==(r=t.state.data)?void 0:r.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let d={pages:[],pageParams:[]},p=0;const f=async()=>{let s=!1;const n=IM(t.options,t.fetchOptions),i=async(e,i,a)=>{if(s)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);const r=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:a?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",(()=>{s=!0})),t.signal)}),e})(),o=await n(r),{maxPages:l}=t.options,c=a?RM:MM;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,i,l)}};if(c&&h.length){const e="backward"===c,t={pages:h,pageParams:u},s=(e?eR:JM)(l,t);d=await i(t,s,e)}else{const t=e??h.length;do{const e=0===p?u[0]??l.initialPageParam:JM(l,d);if(p>0&&null==e)break;d=await i(d,e),p++}while(p<t)}return d};t.options.persister?t.fetchFn=()=>{var e,n;return null==(n=(e=t.options).persister)?void 0:n.call(e,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=f}}}function JM(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function eR(e,{pages:t,pageParams:s}){var n;return t.length>0?null==(n=e.getPreviousPageParam)?void 0:n.call(e,t[0],t,s[0],s):void 0}var tR=(Us=class{constructor(e={}){Tn(this,Ds),Tn(this,Is),Tn(this,_s),Tn(this,Ns),Tn(this,Ls),Tn(this,Fs),Tn(this,Os),Tn(this,js),Bn(this,Ds,e.queryCache||new KM),Bn(this,Is,e.mutationCache||new ZM),Bn(this,_s,e.defaultOptions||{}),Bn(this,Ns,new Map),Bn(this,Ls,new Map),Bn(this,Fs,0)}mount(){Mn(this,Fs)._++,1===Pn(this,Fs)&&(Bn(this,Os,NM.subscribe((async e=>{e&&(await this.resumePausedMutations(),Pn(this,Ds).onFocus())}))),Bn(this,js,LM.subscribe((async e=>{e&&(await this.resumePausedMutations(),Pn(this,Ds).onOnline())}))))}unmount(){var e,t;Mn(this,Fs)._--,0===Pn(this,Fs)&&(null==(e=Pn(this,Os))||e.call(this),Bn(this,Os,void 0),null==(t=Pn(this,js))||t.call(this),Bn(this,js,void 0))}isFetching(e){return Pn(this,Ds).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Pn(this,Is).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=Pn(this,Ds).get(s.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Pn(this,Ds).build(this,t),n=s.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(yM(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Pn(this,Ds).findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),i=Pn(this,Ds).get(n.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==i?void 0:i.state.data);if(void 0!==a)return Pn(this,Ds).build(this,n).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return VM.batch((()=>Pn(this,Ds).findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,s)]))))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=Pn(this,Ds).get(s.queryHash))?void 0:t.state}removeQueries(e){const t=Pn(this,Ds);VM.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const s=Pn(this,Ds);return VM.batch((()=>(s.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const s={revert:!0,...t},n=VM.batch((()=>Pn(this,Ds).findAll(e).map((e=>e.cancel(s)))));return Promise.all(n).then(fM).catch(fM)}invalidateQueries(e,t={}){return VM.batch((()=>(Pn(this,Ds).findAll(e).forEach((e=>{e.invalidate()})),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t))))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=VM.batch((()=>Pn(this,Ds).findAll(e).filter((e=>!e.isDisabled()&&!e.isStatic())).map((e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(fM)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(n).then(fM)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=Pn(this,Ds).build(this,t);return s.isStaleByTime(yM(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(fM).catch(fM)}fetchInfiniteQuery(e){return e.behavior=YM(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(fM).catch(fM)}ensureInfiniteQueryData(e){return e.behavior=YM(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return LM.isOnline()?Pn(this,Is).resumePausedMutations():Promise.resolve()}getQueryCache(){return Pn(this,Ds)}getMutationCache(){return Pn(this,Is)}getDefaultOptions(){return Pn(this,_s)}setDefaultOptions(e){Bn(this,_s,e)}setQueryDefaults(e,t){Pn(this,Ns).set(kM(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Pn(this,Ns).values()],s={};return t.forEach((t=>{AM(e,t.queryKey)&&Object.assign(s,t.defaultOptions)})),s}setMutationDefaults(e,t){Pn(this,Ls).set(kM(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Pn(this,Ls).values()],s={};return t.forEach((t=>{AM(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)})),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Pn(this,_s).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xM(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===DM&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...Pn(this,_s).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Pn(this,Ds).clear(),Pn(this,Is).clear()}},Ds=new WeakMap,Is=new WeakMap,_s=new WeakMap,Ns=new WeakMap,Ls=new WeakMap,Fs=new WeakMap,Os=new WeakMap,js=new WeakMap,Us),sR=(pn=class extends dM{constructor(e,t){super(),Tn(this,sn),Tn(this,Gs),Tn(this,Hs),Tn(this,zs),Tn(this,Vs),Tn(this,Ws),Tn(this,$s),Tn(this,qs),Tn(this,Ks),Tn(this,Qs),Tn(this,Zs),Tn(this,Xs),Tn(this,Ys),Tn(this,Js),Tn(this,en),Tn(this,tn,new Set),this.options=t,Bn(this,Gs,e),Bn(this,Ks,null),Bn(this,qs,FM()),this.options.experimental_prefetchInRender||Pn(this,qs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Pn(this,Hs).addObserver(this),nR(Pn(this,Hs),this.options)?Cn(this,sn,nn).call(this):this.updateResult(),Cn(this,sn,ln).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iR(Pn(this,Hs),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iR(Pn(this,Hs),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Cn(this,sn,cn).call(this),Cn(this,sn,hn).call(this),Pn(this,Hs).removeObserver(this)}setOptions(e){const t=this.options,s=Pn(this,Hs);if(this.options=Pn(this,Gs).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof bM(this.options.enabled,Pn(this,Hs)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Cn(this,sn,un).call(this),Pn(this,Hs).setOptions(this.options),t._defaulted&&!SM(this.options,t)&&Pn(this,Gs).getQueryCache().notify({type:"observerOptionsUpdated",query:Pn(this,Hs),observer:this});const n=this.hasListeners();n&&aR(Pn(this,Hs),s,this.options,t)&&Cn(this,sn,nn).call(this),this.updateResult(),!n||Pn(this,Hs)===s&&bM(this.options.enabled,Pn(this,Hs))===bM(t.enabled,Pn(this,Hs))&&yM(this.options.staleTime,Pn(this,Hs))===yM(t.staleTime,Pn(this,Hs))||Cn(this,sn,an).call(this);const i=Cn(this,sn,rn).call(this);!n||Pn(this,Hs)===s&&bM(this.options.enabled,Pn(this,Hs))===bM(t.enabled,Pn(this,Hs))&&i===Pn(this,en)||Cn(this,sn,on).call(this,i)}getOptimisticResult(e){const t=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),e),s=this.createResult(t,e);return n=s,!SM(this.getCurrentResult(),n)&&(Bn(this,Vs,s),Bn(this,$s,this.options),Bn(this,Ws,Pn(this,Hs).state)),s;var n}getCurrentResult(){return Pn(this,Vs)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null==t||t(s),Reflect.get(e,s))})}trackProp(e){Pn(this,tn).add(e)}getCurrentQuery(){return Pn(this,Hs)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Pn(this,Gs).defaultQueryOptions(e),s=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),t);return s.fetch().then((()=>this.createResult(s,t)))}fetch(e){return Cn(this,sn,nn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),Pn(this,Vs))))}createResult(e,t){var s;const n=Pn(this,Hs),i=this.options,a=Pn(this,Vs),r=Pn(this,Ws),o=Pn(this,$s),l=e!==n?e.state:Pn(this,zs),{state:c}=e;let h,u={...c},d=!1;if(t._optimisticResults){const s=this.hasListeners(),a=!s&&nR(e,t),r=s&&aR(e,n,t,i);(a||r)&&(u={...u,...qM(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:m}=u;h=u.data;let g=!1;if(void 0!==t.placeholderData&&void 0===h&&"pending"===m){let e;(null==a?void 0:a.isPlaceholderData)&&t.placeholderData===(null==o?void 0:o.placeholderData)?(e=a.data,g=!0):e="function"==typeof t.placeholderData?t.placeholderData(null==(s=Pn(this,Xs))?void 0:s.state.data,Pn(this,Xs)):t.placeholderData,void 0!==e&&(m="success",h=CM(null==a?void 0:a.data,e,t),d=!0)}if(t.select&&void 0!==h&&!g)if(a&&h===(null==r?void 0:r.data)&&t.select===Pn(this,Qs))h=Pn(this,Zs);else try{Bn(this,Qs,t.select),h=t.select(h),h=CM(null==a?void 0:a.data,h,t),Bn(this,Zs,h),Bn(this,Ks,null)}catch(A){Bn(this,Ks,A)}Pn(this,Ks)&&(p=Pn(this,Ks),h=Pn(this,Zs),f=Date.now(),m="error");const y="fetching"===u.fetchStatus,b="pending"===m,v="error"===m,w=b&&y,x=void 0!==h,k={status:m,fetchStatus:u.fetchStatus,isPending:b,isSuccess:"success"===m,isError:v,isInitialLoading:w,isLoading:w,data:h,dataUpdatedAt:u.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:v&&!x,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:v&&x,isStale:rR(e,t),refetch:this.refetch,promise:Pn(this,qs),isEnabled:!1!==bM(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},s=()=>{const e=Bn(this,qs,k.promise=FM());t(e)},i=Pn(this,qs);switch(i.status){case"pending":e.queryHash===n.queryHash&&t(i);break;case"fulfilled":"error"!==k.status&&k.data===i.value||s();break;case"rejected":"error"===k.status&&k.error===i.reason||s()}}return k}updateResult(){const e=Pn(this,Vs),t=this.createResult(Pn(this,Hs),this.options);Bn(this,Ws,Pn(this,Hs).state),Bn(this,$s,this.options),void 0!==Pn(this,Ws).data&&Bn(this,Xs,Pn(this,Hs)),SM(t,e)||(Bn(this,Vs,t),Cn(this,sn,dn).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!Pn(this,tn).size)return!0;const n=new Set(s??Pn(this,tn));return this.options.throwOnError&&n.add("error"),Object.keys(Pn(this,Vs)).some((t=>{const s=t;return Pn(this,Vs)[s]!==e[s]&&n.has(s)}))})()}))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Cn(this,sn,ln).call(this)}},Gs=new WeakMap,Hs=new WeakMap,zs=new WeakMap,Vs=new WeakMap,Ws=new WeakMap,$s=new WeakMap,qs=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,Zs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Js=new WeakMap,en=new WeakMap,tn=new WeakMap,sn=new WeakSet,nn=function(e){Cn(this,sn,un).call(this);let t=Pn(this,Hs).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(fM)),t},an=function(){Cn(this,sn,cn).call(this);const e=yM(this.options.staleTime,Pn(this,Hs));if(pM||Pn(this,Vs).isStale||!mM(e))return;const t=gM(Pn(this,Vs).dataUpdatedAt,e);Bn(this,Ys,setTimeout((()=>{Pn(this,Vs).isStale||this.updateResult()}),t+1))},rn=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Pn(this,Hs)):this.options.refetchInterval)??!1},on=function(e){Cn(this,sn,hn).call(this),Bn(this,en,e),!pM&&!1!==bM(this.options.enabled,Pn(this,Hs))&&mM(Pn(this,en))&&0!==Pn(this,en)&&Bn(this,Js,setInterval((()=>{(this.options.refetchIntervalInBackground||NM.isFocused())&&Cn(this,sn,nn).call(this)}),Pn(this,en)))},ln=function(){Cn(this,sn,an).call(this),Cn(this,sn,on).call(this,Cn(this,sn,rn).call(this))},cn=function(){Pn(this,Ys)&&(clearTimeout(Pn(this,Ys)),Bn(this,Ys,void 0))},hn=function(){Pn(this,Js)&&(clearInterval(Pn(this,Js)),Bn(this,Js,void 0))},un=function(){const e=Pn(this,Gs).getQueryCache().build(Pn(this,Gs),this.options);if(e===Pn(this,Hs))return;const t=Pn(this,Hs);Bn(this,Hs,e),Bn(this,zs,e.state),this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))},dn=function(e){VM.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(Pn(this,Vs))})),Pn(this,Gs).getQueryCache().notify({query:Pn(this,Hs),type:"observerResultsUpdated"})}))},pn);function nR(e,t){return function(e,t){return!1!==bM(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&iR(e,t,t.refetchOnMount)}function iR(e,t,s){if(!1!==bM(t.enabled,e)&&"static"!==yM(t.staleTime,e)){const n="function"==typeof s?s(e):s;return"always"===n||!1!==n&&rR(e,t)}return!1}function aR(e,t,s,n){return(e!==t||!1===bM(n.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&rR(e,s)}function rR(e,t){return!1!==bM(t.enabled,e)&&e.isStaleByTime(yM(t.staleTime,e))}var oR=(xn=class extends dM{constructor(e,t){super(),Tn(this,bn),Tn(this,fn),Tn(this,mn),Tn(this,gn),Tn(this,yn),Bn(this,fn,e),this.setOptions(t),this.bindMethods(),Cn(this,bn,vn).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=Pn(this,fn).defaultMutationOptions(e),SM(this.options,s)||Pn(this,fn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Pn(this,gn),observer:this}),(null==s?void 0:s.mutationKey)&&this.options.mutationKey&&kM(s.mutationKey)!==kM(this.options.mutationKey)?this.reset():"pending"===(null==(t=Pn(this,gn))?void 0:t.state.status)&&Pn(this,gn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=Pn(this,gn))||e.removeObserver(this)}onMutationUpdate(e){Cn(this,bn,vn).call(this),Cn(this,bn,wn).call(this,e)}getCurrentResult(){return Pn(this,mn)}reset(){var e;null==(e=Pn(this,gn))||e.removeObserver(this),Bn(this,gn,void 0),Cn(this,bn,vn).call(this),Cn(this,bn,wn).call(this)}mutate(e,t){var s;return Bn(this,yn,t),null==(s=Pn(this,gn))||s.removeObserver(this),Bn(this,gn,Pn(this,fn).getMutationCache().build(Pn(this,fn),this.options)),Pn(this,gn).addObserver(this),Pn(this,gn).execute(e)}},fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,yn=new WeakMap,bn=new WeakSet,vn=function(){var e;const t=(null==(e=Pn(this,gn))?void 0:e.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Bn(this,mn,{...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},wn=function(e){VM.batch((()=>{var t,s,n,i,a,r,o,l;if(Pn(this,yn)&&this.hasListeners()){const c=Pn(this,mn).variables,h=Pn(this,mn).context;"success"===(null==e?void 0:e.type)?(null==(s=(t=Pn(this,yn)).onSuccess)||s.call(t,e.data,c,h),null==(i=(n=Pn(this,yn)).onSettled)||i.call(n,e.data,null,c,h)):"error"===(null==e?void 0:e.type)&&(null==(r=(a=Pn(this,yn)).onError)||r.call(a,e.error,c,h),null==(l=(o=Pn(this,yn)).onSettled)||l.call(o,void 0,e.error,c,h))}this.listeners.forEach((e=>{e(Pn(this,mn))}))}))},xn),lR=yi.createContext(void 0),cR=e=>{const t=yi.useContext(lR);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},hR=({client:e,children:t})=>(yi.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),Pi.jsx(lR.Provider,{value:e,children:t})),uR=yi.createContext(!1);uR.Provider;var dR=yi.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),pR=(e,t,s)=>t.fetchOptimistic(e).catch((()=>{s.clearReset()}));function fR(e,t){return function(e,t){var s,n,i,a,r;const o=yi.useContext(uR),l=yi.useContext(dR),c=cR(),h=c.defaultQueryOptions(e);null==(n=null==(s=c.getDefaultOptions().queries)?void 0:s._experimental_beforeQuery)||n.call(s,h),h._optimisticResults=o?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(e??1e3,1e3),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>t(s(...e)):t(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(h),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(h,l),(e=>{yi.useEffect((()=>{e.clearReset()}),[e])})(l);const u=!c.getQueryCache().get(h.queryHash),[d]=yi.useState((()=>new t(c,h))),p=d.getOptimisticResult(h),f=!o&&!1!==e.subscribed;if(yi.useSyncExternalStore(yi.useCallback((e=>{const t=f?d.subscribe(VM.batchCalls(e)):fM;return d.updateResult(),t}),[d,f]),(()=>d.getCurrentResult()),(()=>d.getCurrentResult())),yi.useEffect((()=>{d.setOptions(h)}),[h,d]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(h,p))throw pR(h,d,l);if((({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||_M(s,[e.error,n])))({result:p,errorResetBoundary:l,throwOnError:h.throwOnError,query:c.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw p.error;if(null==(a=null==(i=c.getDefaultOptions().queries)?void 0:i._experimental_afterQuery)||a.call(i,h,p),h.experimental_prefetchInRender&&!pM&&((e,t)=>e.isLoading&&e.isFetching&&!t)(p,o)){const e=u?pR(h,d,l):null==(r=c.getQueryCache().get(h.queryHash))?void 0:r.promise;null==e||e.catch(fM).finally((()=>{d.updateResult()}))}return h.notifyOnChangeProps?p:d.trackResult(p)}(e,sR)}const mR=()=>{var e,t,s,n;const{user:i}=Zv(),a=cR(),[r,o]=yi.useState(""),[l,c]=yi.useState(null),{data:h,isLoading:u,error:d}=fR({queryKey:["user",i.id],queryFn:()=>(async e=>{try{return(await jv.get(`/users/${e}`)).data}catch(d){throw console.error("Failed to get user by ID:",d),d}})(i.id),enabled:!!(null==i?void 0:i.id)}),{data:p}=fR({queryKey:["user-maps"],queryFn:()=>TC()}),{data:f}=fR({queryKey:["user-stats"],queryFn:()=>(async()=>{try{return(await jv.get("/my/statistic")).data.data}catch(d){throw console.error("Failed to get all users:",d),d}})()}),{data:m}=fR({queryKey:["user-upgrades"],queryFn:()=>RC()}),{data:g}=fR({queryKey:["user-global-rank"],queryFn:async()=>{try{console.log("Fetching global scores...");const e=await BC();console.log("Global scores response:",e);const t=(null==e?void 0:e.data)||e||[];console.log("Scores data:",t);const s=t.findIndex((e=>{var t;return e.userId===(null==i?void 0:i.id)||e.id===(null==i?void 0:i.id)||e.username===(null==(t=null==i?void 0:i.data)?void 0:t.username)||e.username===(null==i?void 0:i.username)}));console.log("User rank found:",s);const n=-1!==s?s+1:"N/A";return console.log("Final rank:",n),n}catch(e){return console.error("Failed to get global rank:",e),"N/A"}},enabled:!!(null==i?void 0:i.id)}),y=function(e){const t=cR(),[s]=yi.useState((()=>new oR(t,e)));yi.useEffect((()=>{s.setOptions(e)}),[s,e]);const n=yi.useSyncExternalStore(yi.useCallback((e=>s.subscribe(VM.batchCalls(e))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),i=yi.useCallback(((e,t)=>{s.mutate(e,t).catch(fM)}),[s]);if(n.error&&_M(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}({mutationFn:DC,onMutate:e=>{c(e)},onSuccess:()=>{c(null),a.invalidateQueries({queryKey:["user-upgrades"]}),a.invalidateQueries({queryKey:["user-stats"]}),a.invalidateQueries({queryKey:["user",i.id]}),PC.emit("upgrade-purchased"),console.log("Dashboard: Upgrade purchased, notified GameManager"),o("Upgrade successful!"),setTimeout((()=>o("")),3e3)},onError:e=>{var t,s,n,i,a,r,l,h;c(null),console.error("Failed to upgrade:",e);let u="Failed to upgrade. Please try again.";(null==(n=null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.error)?void 0:n.message)?u=e.response.data.error.message:400===(null==(i=e.response)?void 0:i.status)?u="Insufficient gold to purchase this upgrade!":401===(null==(a=e.response)?void 0:a.status)?u="Authentication required. Please log in again.":403===(null==(r=e.response)?void 0:r.status)?u="You don't have permission to perform this action.":404===(null==(l=e.response)?void 0:l.status)?u="Upgrade not found.":(null==(h=e.response)?void 0:h.status)>=500&&(u="Server error. Please try again later."),o(u),setTimeout((()=>o("")),5e3)}}),b=e=>{y.mutate(e)};return console.log("globalRank",g),yi.useEffect((()=>{const e=()=>{console.log("Dashboard: Invalidating queries after game session ended"),a.invalidateQueries({queryKey:["user"]}),a.invalidateQueries({queryKey:["user-stats"]}),a.invalidateQueries({queryKey:["user-upgrades"]}),a.invalidateQueries({queryKey:["user-maps"]})};return PC.on("invalidate-dashboard-data",e),()=>{PC.removeListener("invalidate-dashboard-data",e)}}),[a]),u?Pi.jsx("div",{children:"Loading..."}):d?Pi.jsx("div",{children:"Error loading user data"}):Pi.jsxs("div",{className:"bg-dark-primary flex flex-col text-white pl-6 pr-6",children:[r&&Pi.jsx("div",{className:"p-4 mb-4 bg-yellow-900 text-[#ffae0b] rounded text-center font-bold shadow border border-[#ffae0b] animate-in slide-in-from-top-8 fade-in duration-700",children:r}),Pi.jsxs("div",{className:"p-6 flex flex-col gap-6 rounded-lg bg-dark-primary mb-6",children:[Pi.jsx("h1",{className:"text-heading-3-alagard",style:{color:"#ffae0b"},children:"Dashboard"}),Pi.jsxs("div",{className:"flex gap-9",children:[Pi.jsxs("div",{className:"flex flex-col p-[30px] justify-center items-center gap-4",children:[Pi.jsx("div",{className:"w-30 h-30 rounded-full overflow-hidden",children:Pi.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pi.jsx("p",{className:"text-heading-3-alagard",children:null==(e=null==h?void 0:h.data)?void 0:e.username})]}),Pi.jsx("div",{className:"flex flex-1 w-full",children:Pi.jsxs("div",{className:"grid grid-cols-3 gap-6 w-full flex-1",children:[Pi.jsx(hM,{title:"Current Gold",value:(null==(s=null==(t=null==h?void 0:h.data)?void 0:t.gold)?void 0:s.toLocaleString())||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pi.jsx(hM,{title:"Total Runs",value:(null==f?void 0:f.totalRuns)||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pi.jsx(hM,{title:"Global Rank",value:g||"Loading...",titleStyle:"text-body-2-pixelify text-light-primary"}),Pi.jsx(hM,{title:"Highest level",value:(null==f?void 0:f.maxSkillLevel)||0,titleStyle:"text-body-2-pixelify text-light-primary"}),Pi.jsx(hM,{title:"Longest Survival",value:(null==f?void 0:f.longestSurvival)||"00:00",titleStyle:"text-body-2-pixelify text-light-primary"}),Pi.jsx(hM,{title:"Enemies Killed",value:(null==f?void 0:f.totalKillPoints)||0,titleStyle:"text-body-2-pixelify text-light-primary"})]})})]})]}),Pi.jsxs("div",{className:"bg-dark-primary  rounded-lg overflow-hidden w-full",children:[Pi.jsx("div",{className:"bg-dark-primary ",children:Pi.jsx("h2",{className:"text-heading-1-pixelify-bold text-[#FFAE0B]",children:"Upgrades"})}),Pi.jsx("div",{className:"p-6 max-h-96 overflow-y-auto \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:Pi.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3  gap-6",children:null==(n=null==m?void 0:m.data)?void 0:n.map((e=>Pi.jsx(uM,{title:e.name,value:`Level ${e.level}`,progress:e.progress,description:e.description,onUpgrade:b,isMaxed:e.isMaxed,upgradeId:e.id,upgradeCost:e.cost||e.upgradeCost||0,isLoading:l===e.id},e.id)))})})]})]})},gR=()=>{const{user:e}=Zv(),[t,s]=yi.useState("experience"),{data:n,isLoading:i,isError:a,error:r}=fR({queryKey:["globalScores"],queryFn:BC}),{data:o,isLoading:l,isError:c,error:h}=fR({queryKey:["globalKillCounts"],queryFn:CC}),u="killCount"===t?c:a,d="killCount"===t?h:r,p="killCount"===t?o:n;if("killCount"===t?l:i)return Pi.jsx("div",{className:"p-8 text-white",children:"Loading..."});if(u)return Pi.jsxs("div",{className:"p-8 text-white",children:["Failed to load leaderboard.",Pi.jsx("br",{}),JSON.stringify(d)]});const f=(null==p?void 0:p.data)?[...p.data].sort(((e,s)=>{let n,i;switch(t){case"killCount":n=e.killPoints||0,i=s.killPoints||0;break;case"experience":default:n=e.experience||0,i=s.experience||0;break;case"gold":n=e.gold||0,i=s.gold||0;break;case"totalGames":n=e.totalGames||0,i=s.totalGames||0}return n<i?1:-1})):[],m=f.findIndex((t=>t.walletAddress===(null==e?void 0:e.walletAddress)||t.username===(null==e?void 0:e.username)))+1,g=f.find((t=>t.walletAddress===(null==e?void 0:e.walletAddress)||t.username===(null==e?void 0:e.username))),y=m>0&&m<=10?f.slice(0,10):[...f.slice(0,10),g].filter(Boolean);return Pi.jsxs("div",{className:"h-full bg-dark-primary flex flex-col text-white px-4 sm:px-6 overflow-y-auto",children:[Pi.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-secondary-500 py-10 gap-4",children:[Pi.jsx("h1",{className:"text-heading-2-alagard",children:"Leaderboard"}),Pi.jsx("div",{className:"flex outline-none   bg-dark-secondary items-center",children:Pi.jsxs("div",{className:"relative w-full sm:w-auto min-w-[200px]",children:[Pi.jsxs("select",{value:t,onChange:e=>s(e.target.value),className:"bg-dark-secondary outline-none focus:outline-none active:outline-none rounded px-3 py-2 text-white appearance-none cursor-pointer pr-8 w-full h-full text-sm sm:text-base",children:[Pi.jsx("option",{value:"experience",children:"Experience"}),Pi.jsx("option",{value:"killCount",children:"Kill Points"}),Pi.jsx("option",{value:"gold",children:"Gold"}),Pi.jsx("option",{value:"totalGames",children:"Games Played"})]}),Pi.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Pi.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Pi.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})})]}),Pi.jsxs("div",{className:"bg-dark-secondary border border-[#24110F] pb-10 rounded-lg overflow-hidden w-full flex flex-col flex-1",children:[Pi.jsxs("div",{className:"bg-dark-secondary border-b border-[#2F1A18] px-4 sm:px-6 py-3 flex items-center justify-between",children:[Pi.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[Pi.jsx("div",{className:"w-8 sm:w-12 flex justify-center",children:Pi.jsx("span",{className:"text-body-1-pixelify text-light-tertiary font-bold",children:"#"})}),Pi.jsx("div",{children:Pi.jsx("span",{className:"text-body-1-pixelify text-light-tertiary font-bold",children:"Player"})})]}),Pi.jsx("div",{className:"text-right",children:Pi.jsx("span",{className:"text-body-1-pixelify text-light-tertiary",children:"killCount"===t?"Kill Points":"experience"===t?"Experience":"gold"===t?"Gold":"totalGames"===t?"Games Played":"Experience"})})]}),Pi.jsx("div",{className:"divide-y divide-[#2F1A18] flex-1 overflow-y-auto \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:y.map(((s,n)=>{const i=s.walletAddress&&(null==e?void 0:e.walletAddress)&&s.walletAddress===e.walletAddress||s.username&&(null==e?void 0:e.username)&&s.username===e.username,a=i&&m>10?m:n+1,r=i&&m>10;return Pi.jsxs("div",{children:[r&&10===n&&Pi.jsxs("div",{className:"flex items-center justify-center py-2",children:[Pi.jsx("div",{className:"flex-1 h-px bg-[#2F1A18]"}),Pi.jsx("span",{className:"px-4 text-sm text-light-tertiary",children:"..."}),Pi.jsx("div",{className:"flex-1 h-px bg-[#2F1A18]"})]}),Pi.jsxs("div",{className:" p-4 flex items-center justify-between transition-colors "+(i?"bg-gradient-to-r from-[#FFAE0B]/30 to-transparent border-2 border-[#FFAE0B] shadow-lg shadow-[#FFAE0B]/20":"hover:bg-translucent-light-4"),children:[Pi.jsxs("div",{className:"flex items-center space-x-4",children:[Pi.jsx("div",{className:"flex items-center justify-center border-2 border-[#392423] bg-dark-secondary p-1 w-12 h-9",children:a}),Pi.jsx("div",{children:Pi.jsxs("div",{className:"flex items-center gap-2",children:[Pi.jsx("p",{className:"text-body-1-alagard font-bold",children:s.username||s.name}),i&&Pi.jsx("span",{className:"bg-[#FFAE0B] text-black px-2 py-1 rounded text-xs font-bold",children:"YOU"})]})})]}),Pi.jsx("div",{className:"text-right",children:Pi.jsx("p",{className:"text-body-1-alagard font-bold",children:"killCount"===t?`${(s.killPoints||0).toLocaleString()} kills`:"experience"===t?`${(s.experience||0).toLocaleString()} XP`:"gold"===t?`${(s.gold||0).toLocaleString()} gold`:"totalGames"===t?`${(s.totalGames||0).toLocaleString()} games`:`${(s.experience||0).toLocaleString()} XP`})})]})]},`${s.id||n}-${i?"user":"other"}`)}))})]})]})},yR=()=>Pi.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:Pi.jsx("h1",{className:"text-display-1-alagard-bold text-center text-[#FFAE0B]",children:"Coming soon"})}),bR=()=>Pi.jsx("div",{children:Pi.jsx("h1",{className:"text-display-1-alagard-bold flex flex-col items-center justify-center h-screen text-center text-[#FFAE0B]",children:"Coming soon"})}),vR=[{id:"slash",name:"Slash",image:"/skills/Slash card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Basic skill: Slash"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Physical Swordsmanship"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," ","Short (Melee)"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A masterful swordsmanship technique passed down through generations of cathedral knights, this devastating slash channels the wielder's soul into their blade. What begins as a simple cut evolves into a strike capable of cleaving through the very fabric of darkness itself."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Slash's AoE and Damage will increase due to the Slash card"}),Pi.jsx("li",{children:" Slash's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Slash's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Slash's AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Slash will upgrade into Dash slash select 10 times Slash card in per session"})]})]})]})},{id:"marksman",name:"Marksman",image:"/skills/marksman card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Basic Skill: Marksman"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Skill Type:"})," Single target/Projectile"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A refined marksmanship technique developed by monster hunters who rely on precision and skill rather than mystical power. This gunmanship art focuses on exploiting weak points and vital areas of monstrous creatures through disciplined training and keen observation. Beginning with basic accuracy, the skill evolves through ten levels of masteryfrom simple headshots to god-tier precision that can pierce through multiple targets, ignore thick hide and bone, and deliver devastating critical strikes. At its pinnacle, master marksmen achieve supernatural focus and timing, allowing them to place shots with impossible accuracy even against the fastest and most elusive beasts."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Marksman's Damage will increase due to the Marksman card"}),Pi.jsx("li",{children:" Marksman's Projectile number will increase due to the Marksman skill tier"}),Pi.jsx("li",{children:" Marksman's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Marksman's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Marksman's Attack range will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Marksman will upgrade into Barrage skill when the Marksmanship skill becomes God Tier"})]})]})]})},{id:"fireball",name:"Fire Ball",image:"/skills/Fire ball card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Fire Ball"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/ AoE/DOT/Magical"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast enemies, does DOT damage"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," ","Medium (Ranged)"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A devastating magical art that conjures spheres of concentrated flame to obliterate enemies from afar. This ancient pyromantic technique begins with simple fire manipulation but evolves through ten levels of mastery into an apocalyptic force capable of turning entire battlefields into blazing infernos. The caster manifests a blazing orb of pure fire that streaks across the battlefield before erupting in a violent explosion, incinerating everything within its radius. At god-tier mastery, these fireballs burn with such intensity they can melt stone, vaporize water, and leave craters of molten glass where once enemies stood, with explosions so massive they can consume entire monster hordes in walls of searing flame."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Fire Ball's Damage will increase due to the Fire Ball card"}),Pi.jsx("li",{children:" Fire Ball's Projectile number will increase when Fire Ball is in each tier"}),Pi.jsx("li",{children:" Fire Ball's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Fire Ball's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Fire Ball's Attack range and AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Fire Ball will upgrade into Fire Blizzard skill when the Fire Ball skill becomes God Tier"})]})]})]})},{id:"firearrow",name:"Fire Arrow",image:"/skills/Fire arrow card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Fire Arrow"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/DOT/ Magical"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Pierces through enemies, does DOT damage"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God-tier)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A precise magical archery technique that creates arrows of pure flame to pierce and burn through enemy ranks. This ancient pyromantic art begins with simple fire-imbued projectiles but evolves through ten levels of mastery into devastating lances of concentrated flame that can penetrate multiple foes in a single shot. The caster manifests a blazing arrow that streaks through the air, piercing straight through enemies while leaving trails of searing fire in its wake, scorching everything it passes through. At god-tier mastery, these flame arrows burn with such ferocity they can punch through the thickest armor and bone, creating chains of burning destruction as they pass through entire groups of monsters, leaving smoldering wounds that continue to burn long after impact."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Fire Arrow's Damage will increase due to the Fire Arrow card"}),Pi.jsx("li",{children:" Fire Arrow's Projectile number will increase when Fire Arrow is in each tier"}),Pi.jsx("li",{children:" Fire Arrow's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Fire Arrows CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Fire Arrow's Attack range and AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Fire Arrow will upgrade into the Split Fire skill when the Fire Arrow skill becomes God Tier"})]})]})]})},{id:"iceshard",name:"Ice Shard",image:"/skills/Ice shard card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Ice Shard"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," Single target/ AoE/Crowd Control/Magical/ Slow"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast slows enemies in the area"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God-tier)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A chilling magical technique that hurls razor-sharp shards of enchanted ice to slow and damage enemies across the battlefield. This ancient cryomantic art begins with simple ice manipulation but evolves through ten levels of mastery into devastating frozen projectiles that can halt entire monster hordes in their tracks. The caster manifests a gleaming ice shard that streaks toward its target before shattering mid-air, releasing a burst of freezing mist that chills the air and slows all enemies caught within its frigid radius. At god-tier mastery, these ice shards explode with such bone-deep cold they can freeze blood in veins, turn flesh brittle as glass, and create expanding zones of supernatural winter that leave monsters crawling at a snail's pace through fields of deadly frost."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Ice Shard's Damage will increase due to the Ice Shard card"}),Pi.jsx("li",{children:" Ice Shard's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Ice Shard's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Ice Shard's Attack range and AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Ice Shard will upgrade into the Freezing Field skill when the Ice Shard skill becomes God Tier"})]})]})]})},{id:"lightningchain",name:"Lightning Chain",image:"/skills/Lightning chain card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Lightning Chain"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," ","Multi-target/Chain/Crowd Control/Magical/"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Blast slows enemies in the area"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," Long (Piercing Ranged)"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God-tier)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A devastating electrical magic that unleashes arcing bolts of lightning to jump between multiple enemies in succession. This ancient storm magic begins with simple electrical manipulation but evolves through ten levels of mastery into god-tier lightning that can leap across entire battlefields, stunning and frying dozens of monsters in a single cast. The caster releases a crackling bolt that strikes the first target before chaining to nearby enemies, each successive jump dealing reduced but still lethal damage while leaving victims paralyzed by electrical shock. At its pinnacle, these lightning chains can arc through seemingly endless numbers of foes, turning entire monster hordes into writhing, electrocuted masses as the bolt seeks out every living creature within range, growing weaker with each jump but never losing its ability to stun and disable even the most resilient beasts."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Lightning Chain's Damage will increase due to the Lightning Chain card"}),Pi.jsx("li",{children:" Lightning Chain's target number will increase due to the Lightning Chain card, but the leap number will decrease"}),Pi.jsx("li",{children:" Lightning Chain's Damage will increase due to the Attack Damage card"}),Pi.jsx("li",{children:" Lightning Chain's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Lightning Chain's Attack range and AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Lightning Chain will upgrade into the Surge of Lightning skill when the Lightning Chain skill becomes God Tier"})]})]})]})},{id:"holylight",name:"Holy Light",image:"/skills/Holy light card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Magic skill: Holy Light"}),Pi.jsxs("div",{className:"space-y-2 mb-4",children:[Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Type:"})," AoE/Crowd Control/Magical/"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Effect:"})," Slim chance of Blinds the enemy, not able to do melee damage"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Attack Range:"})," AoE"]}),Pi.jsxs("p",{className:"text-body-1-alagard text-gray-300",children:[Pi.jsx("span",{className:"text-[#FFAE0B] font-bold",children:"Progression:"})," 10 Levels (BasicMasterEmperor Divine  God-tier)"]})]}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A sacred magical art that unleashes blinding flashes of pure holy light to temporarily disable enemies across the battlefield. This divine technique begins with simple light manipulation but evolves through ten levels of mastery into god-tier radiance that can blind entire armies of darkness with overwhelming luminescence. The caster channels celestial energy into a brilliant flash that erupts outward, searing the vision of all enemies within range and leaving them unable to strike accurately for several crucial moments. At its pinnacle, this holy light burns with such intensity that it can blind even creatures of shadow and undead abominations, creating cascading waves of radiance that spread from enemy to enemy, ensuring that entire monster hordes stumble helplessly in temporary blindness as the divine light overwhelms their senses and renders them defenseless against follow-up attacks."}),Pi.jsxs("div",{children:[Pi.jsx("h5",{className:"text-heading-3-pixelify-bold mb-2 text-[#FFAE0B]",children:"Upgrade:"}),Pi.jsxs("ul",{className:"text-body-1-alagard text-gray-300 space-y-1",children:[Pi.jsx("li",{children:" Holy Light's change to blind the enemy will increase due to the Holy Light in each tier"}),Pi.jsx("li",{children:" Holy Light's CD will be reduced due to the Holy Light card"}),Pi.jsx("li",{children:" Holy Light's CD will be reduced due to the Cooldown Reduction card"}),Pi.jsx("li",{children:" Holy Light's Attack range and AoE will increase due to the Attack Range card"}),Pi.jsx("li",{children:" Holy Light will upgrade into the Holy Being skill when the Holy Light skill becomes God Tier"})]})]})]})},{id:"agility",name:"Agility",image:"/skills/agility card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Agility"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A fundamental physical enhancement that sharpens reflexes and lightens the body's burden, allowing for swift movement across treacherous terrain. This passive ability increases the character's natural grace and coordination, enabling faster traversal of battlefields and quicker positioning during combat encounters."})]})},{id:"armor",name:"Armor",image:"/skills/armor card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Armor"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A defensive mastery that hardens the body's natural resilience and improves equipment effectiveness, reducing incoming damage from all sources. This passive protection creates layers of defense that can absorb and deflect a certain amount of punishment before harm reaches vital areas."})]})},{id:"attackdamage",name:"Attack Damage",image:"/skills/attack damage card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Attack Damage"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A combat enhancement that channels raw power into every strike, increasing the destructive force behind all offensive abilities. This passive amplification affects every form of attack, from sword strikes to magical spells, ensuring each blow carries maximum devastating potential."})]})},{id:"attackrate",name:"Attack Rate",image:"/skills/attack rate card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Attack Rate"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A precision technique that streamlines combat movements and reduces recovery time between strikes, allowing for rapid successive attacks. This passive skill eliminates wasted motion and hesitation, creating fluid combat chains with minimal downtime between offensive actions."})]})},{id:"expgain",name:"EXP Gain",image:"/skills/EXP gain card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"EXP Gain"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A learning enhancement that sharpens the mind's ability to absorb knowledge from combat experience, accelerating personal growth and skill development. This passive ability allows the character to extract maximum wisdom from every encounter and challenge."})]})},{id:"goldgain",name:"Gold Gain",image:"/skills/Gold gain card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Gold Gain"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A fortune-finding instinct that improves the ability to locate and secure valuable treasures from defeated enemies, increasing monetary rewards from all sources. This passive skill represents keen eyes for valuable items and shrewd collection practices."})]})},{id:"pickuprange",name:"Pickup Range",image:"/skills/Pickup range card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Pickup Range"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"An awareness enhancement that extends the character's natural perception and reach for collecting battlefield spoils, automatically gathering dropped items from greater distances. This passive ability ensures no valuable loot is left behind during intense combat."})]})},{id:"strength",name:"Strength",image:"/skills/strength card.png",description:Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Strength"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300 mb-4",children:"A physical enhancement that fortifies the body's core vitality and endurance, significantly increasing maximum health capacity and overall physical resilience. This passive ability represents the fundamental power that keeps warriors standing through the most brutal encounters."})]})}],wR=()=>{const[e,t]=yi.useState("faq"),[s,n]=yi.useState(vR[0]),i=yi.useRef(null);yi.useEffect((()=>{i.current&&(i.current.scrollTop=0)}),[s]);const a={faq:{content:Pi.jsxs("div",{className:"space-y-8 bg-dark-primary",children:[Pi.jsxs("div",{children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"How to play?"}),Pi.jsxs("div",{className:"space-y-4",children:[Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Movement:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Use WASD keys or hold the right mouse button to follow the cursor."}),Pi.jsx("img",{className:"pt-2",src:"/guideGif.gif",alt:"Movement"})]}),Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2 text-[#FFAE0B]",children:"Collecting Resources:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Collect EXP and gold drops from enemy mobs by walking near or over the items."})]})]})]}),Pi.jsxs("div",{children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Portal System"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"The main map has 4 portals located at each corner of the map. Portals randomly activate after the player survives 3 minutes. If the player manages to enter an activated portal before it closes, they are transported to one of 4 bonus maps: - Beach of Undeath- Dark Forest - Nest of Underlord - Maze"})]}),Pi.jsxs("div",{children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Character Upgrades"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"To upgrade your character, collect EXP throughout the map to level up. When leveled up, 3 random skill upgrade cards appear and the player must choose one of the 3. If a player manages to choose the same skill 10 times, that skill upgrades to an Ultimate skill and unlocks a hidden ability."})]}),Pi.jsxs("div",{children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Base Stats:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Upgrades Every player can upgrade their base stats from the main menu Dashboard section, using gold coins collected from previous game sessions."})]}),Pi.jsxs("div",{children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4 text-[#FFAE0B]",children:"Maps"}),Pi.jsxs("div",{className:"space-y-6",children:[Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Dark Forest:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Dark Forest is the territory of Dark Elves, who are allies with humans. However, ancient creatures controlled by demons want to destroy the Dark Elves' totem, which has the ability to keep demons away from their territory. The player helps protect their totem and receives an EXP multiplier as a reward. This map features wave-based attacks with a total of 5 waves."})]}),Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Nest of Underlord:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"This place is a boss area featuring the most powerful enemy in the game, along with ghouls that you must fight. The map has a 5-minute time limit. If the player manages to kill the boss, they are granted an Ultimate skill. If not, the player will be sent back to the main map as long as they survive."})]}),Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Beach of Undeaths:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"A nice beach cursed with pirate members and goblins. This map provides a gold multiplier and has randomly spawning gold treasure. There is also a mini-boss pirate captain who is much more powerful than regular mobs on the map. The map has a 3-minute time limit, so kill as many mobs as possible to collect resources for later upgrades and consumable items."})]}),Pi.jsxs("div",{children:[Pi.jsx("h4",{className:"text-heading-2-pixelify-bold mb-2",children:"Chaos Realm:"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"The Chaos Realm is a hellish, volcanic underground place where the player must escape within 5 minutes. This map features extreme difficulty with exclusive rewards. The longer it takes, the more the player loses score. If the score reaches 0, the player faces instant death. When the map is completed, the player is rewarded with multiplied rewards based on leftover time."})]})]})]})]})},skill:{content:Pi.jsxs("div",{className:"flex bg-dark-primary gap-8 h-full",children:[Pi.jsx("div",{className:"grid grid-cols-3 gap-4 overflow-y-auto max-h-[600px] w-1/2 pr-2",style:{flexShrink:0},children:vR.map((e=>Pi.jsx("div",{className:"cursor-pointer border-2 rounded-md flex justify-center transition-all duration-200 "+(s&&s.id===e.id?"border-[#FFAE0B]":"border-gray-700 hover:border-[#FFAE0B]/60"),style:{aspectRatio:"3/4",width:"100%",height:"100%"},onClick:()=>n(s&&s.id===e.id?null:e),children:Pi.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain",style:{aspectRatio:"3/4"}})},e.id)))}),s&&Pi.jsxs("div",{ref:i,className:"flex-1 bg-dark-primary rounded-lg p-6 max-h-[600px] border-2 border-[#FFAE0B] overflow-y-auto scrollbar-invisible",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[Pi.jsx("style",{children:".scrollbar-invisible::-webkit-scrollbar { display: none; }"}),s.description]})]})},defense:{content:Pi.jsxs("div",{className:"space-y-6 bg-dark-secondary",children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Defense Mechanics"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Understanding defense mechanics is crucial for surviving the dangerous dungeons and boss encounters."})]})},stats:{content:Pi.jsxs("div",{className:"space-y-6 bg-dark-secondary",children:[Pi.jsx("h3",{className:"text-heading-1-pixelify-bold mb-4",children:"Character Statistics"}),Pi.jsx("p",{className:"text-body-1-alagard text-gray-300",children:"Your character's stats determine their effectiveness in combat and exploration."})]})}};return Pi.jsx("div",{className:"min-h-screen bg-dark-primary flex flex-col text-white pl-6 pr-6",children:Pi.jsxs("div",{className:"text-white flex flex-col w-full bg-dark-primary pt-12 pr-6 pb-12 pl-6 gap-6",children:[Pi.jsx("h1",{className:"text-display-1-alagard-bold text-left text-[#FFAE0B]",children:"Guide"}),Pi.jsx("div",{className:"flex space-x-2",children:[{id:"faq",label:"FAQ"},{id:"skill",label:"Skill"}].map((s=>Pi.jsx("button",{onClick:()=>t(s.id),className:"px-6 py-3 rounded-md transition-colors text-button-48-pixelify "+(e===s.id?"bg-red-600 text-white":"bg-transparent border border-red-600 text-white hover:bg-red-600/20"),children:s.label},s.id)))}),Pi.jsx("div",{className:"w-full flex-1 overflow-y-auto max-h-[600px] \n    scrollbar-thin\n    scrollbar-track-gray-800\n    scrollbar-thumb-[#FFAE0B]\n    scrollbar-thumb-rounded-full\n    hover:scrollbar-thumb-[#FFAE0B]/80\n    [&::-webkit-scrollbar]:w-2\n    [&::-webkit-scrollbar-track]:bg-gray-800\n    [&::-webkit-scrollbar-thumb]:bg-[#FFAE0B]\n    [&::-webkit-scrollbar-thumb]:rounded-full\n    [&::-webkit-scrollbar-thumb]:hover:bg-[#FFAE0B]/80\n  ",style:{scrollbarWidth:"thin",scrollbarColor:"#FFAE0B #2D3748"},children:a[e].content})]})})},xR=({size:e})=>Pi.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Pi.jsx("path",{d:"M29.3333 13.334V10.6673H27.9999V8.00065H26.6666V5.33398H25.3333V4.00065H22.6666V2.66732H18.6666V1.33398H13.3333V2.66732H9.33325V4.00065H6.66658V5.33398H5.33325V6.66732H3.99992V9.33398H2.66659V12.0007H1.33325V20.0007H2.66659V22.6673H3.99992V25.334H5.33325V26.6673H6.66658V28.0006H9.33325V29.334H13.3333V30.6673H18.6666V29.334H22.6666V26.6673H18.6666V28.0006H13.3333V26.6673H9.33325V25.334H7.99992V24.0007H6.66658V21.334H5.33325V18.6673H3.99992V13.334H5.33325V10.6673H6.66658V8.00065H7.99992V6.66732H9.33325V5.33398H13.3333V4.00065H18.6666V5.33398H22.6666V6.66732H23.9999V8.00065H25.3333V10.6673H26.6666V13.334H27.9999V18.6673H26.6666V20.0007H23.9999V13.334H22.6666V10.6673H21.3333V9.33398H18.6666V8.00065H13.3333V9.33398H10.6666V10.6673H9.33325V13.334H7.99992V18.6673H9.33325V21.334H10.6666V22.6673H13.3333V24.0007H18.6666V22.6673H21.3333V21.334H22.6666V22.6673H27.9999V21.334H29.3333V18.6673H30.6666V13.334H29.3333ZM21.3333 18.6673H19.9999V20.0007H18.6666V21.334H13.3333V20.0007H11.9999V18.6673H10.6666V13.334H11.9999V12.0007H13.3333V10.6673H18.6666V12.0007H19.9999V13.334H21.3333V18.6673Z",fill:"white"})}),kR=({size:e})=>Pi.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Pi.jsx("path",{d:"M23.9999 15.9993V17.3327H25.3333V19.9993H23.9999V21.3327H21.3333V19.9993H19.9999V17.3327H21.3333V15.9993H23.9999Z",fill:"white"}),Pi.jsx("path",{d:"M30.6666 10.666V27.9993H29.3333V29.3327H2.66659V27.9993H1.33325V3.99935H2.66659V2.66602H27.9999V3.99935H29.3333V5.33268H3.99992V26.666H27.9999V11.9993H6.66658V9.33268H29.3333V10.666H30.6666Z",fill:"white"})]}),AR=({className:e="w-5 h-5",...t})=>Pi.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[Pi.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),Pi.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),Pi.jsx("path",{d:"M9 14h6"}),Pi.jsx("path",{d:"M9 18h6"}),Pi.jsx("path",{d:"M9 10h6"})]});let ER=class e extends Error{constructor(t,s={}){var n;const i=s.cause instanceof e?s.cause.details:(null==(n=s.cause)?void 0:n.message)?s.cause.message:s.details,a=s.cause instanceof e&&s.cause.docsPath||s.docsPath;super([t||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...i?[`Details: ${i}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),s.cause&&(this.cause=s.cause),this.details=i,this.docsPath=a,this.metaMessages=s.metaMessages,this.shortMessage=t}};function SR(e,t){const s=e.exec(t);return null==s?void 0:s.groups}const PR=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,TR=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,BR=/^\(.+?\).*?$/,CR=/^tuple(?<array>(\[(\d*)\])*)$/;function MR(e){let t=e.type;if(CR.test(e.type)&&"components"in e){t="(";const s=e.components.length;for(let i=0;i<s;i++)t+=MR(e.components[i]),i<s-1&&(t+=", ");const n=SR(CR,e.type);return t+=`)${(null==n?void 0:n.array)??""}`,MR({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function RR(e){let t="";const s=e.length;for(let n=0;n<s;n++)t+=MR(e[n]),n!==s-1&&(t+=", ");return t}const DR=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,IR=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,_R=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/,NR=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function LR(e){return NR.test(e)}function FR(e){return SR(NR,e)}const OR=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,jR=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/,UR=/^receive\(\) external payable$/,GR=new Set(["indexed"]),HR=new Set(["calldata","memory","storage"]);let zR=class extends ER{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},VR=class extends ER{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}},WR=class extends ER{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},$R=class extends ER{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},qR=class extends ER{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},KR=class extends ER{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${s}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},QR=class extends ER{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}},ZR=class extends ER{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},XR=class extends ER{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},YR=class extends ER{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}},JR=class extends ER{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}},eD=class extends ER{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};const tD=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function sD(e,t={}){if(function(e){return _R.test(e)}(e))return function(e,t={}){const s=function(e){return SR(_R,e)}(e);if(!s)throw new ZR({signature:e,type:"function"});const n=oD(s.parameters),i=[],a=n.length;for(let o=0;o<a;o++)i.push(rD(n[o],{modifiers:HR,structs:t,type:"function"}));const r=[];if(s.returns){const e=oD(s.returns),n=e.length;for(let s=0;s<n;s++)r.push(rD(e[s],{modifiers:HR,structs:t,type:"function"}))}return{name:s.name,type:"function",stateMutability:s.stateMutability??"nonpayable",inputs:i,outputs:r}}(e,t);if(function(e){return IR.test(e)}(e))return function(e,t={}){const s=function(e){return SR(IR,e)}(e);if(!s)throw new ZR({signature:e,type:"event"});const n=oD(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(rD(n[r],{modifiers:GR,structs:t,type:"event"}));return{name:s.name,type:"event",inputs:i}}(e,t);if(function(e){return DR.test(e)}(e))return function(e,t={}){const s=function(e){return SR(DR,e)}(e);if(!s)throw new ZR({signature:e,type:"error"});const n=oD(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(rD(n[r],{structs:t,type:"error"}));return{name:s.name,type:"error",inputs:i}}(e,t);if(function(e){return OR.test(e)}(e))return function(e,t={}){const s=function(e){return SR(OR,e)}(e);if(!s)throw new ZR({signature:e,type:"constructor"});const n=oD(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(rD(n[r],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:s.stateMutability??"nonpayable",inputs:i}}(e,t);if(function(e){return jR.test(e)}(e))return function(e){const t=function(e){return SR(jR,e)}(e);if(!t)throw new ZR({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(function(e){return UR.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new XR({signature:e})}const nD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,iD=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,aD=/^u?int$/;function rD(e,t){var s,n;const i=function(e,t,s){let n="";if(s)for(const i of Object.entries(s)){if(!i)continue;let e="";for(const t of i[1])e+=`[${t.type}${t.name?`:${t.name}`:""}]`;n+=`(${i[0]}{${e}})`}return t?`${t}:${e}${n}`:e}(e,null==t?void 0:t.type,null==t?void 0:t.structs);if(tD.has(i))return tD.get(i);const a=BR.test(e),r=SR(a?iD:nD,e);if(!r)throw new WR({param:e});if(r.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||PR.test(e)||TR.test(e)||cD.test(e)}(r.name))throw new $R({param:e,name:r.name});const o=r.name?{name:r.name}:{},l="indexed"===r.modifier?{indexed:!0}:{},c=(null==t?void 0:t.structs)??{};let h,u={};if(a){h="tuple";const e=oD(r.type),t=[],s=e.length;for(let n=0;n<s;n++)t.push(rD(e[n],{structs:c}));u={components:t}}else if(r.type in c)h="tuple",u={components:c[r.type]};else if(aD.test(r.type))h=`${r.type}256`;else if(h=r.type,"struct"!==(null==t?void 0:t.type)&&!lD(h))throw new VR({type:h});if(r.modifier){if(!(null==(n=null==(s=null==t?void 0:t.modifiers)?void 0:s.has)?void 0:n.call(s,r.modifier)))throw new qR({param:e,type:null==t?void 0:t.type,modifier:r.modifier});if(HR.has(r.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(h,!!r.array))throw new KR({param:e,type:null==t?void 0:t.type,modifier:r.modifier})}const d={type:`${h}${r.array??""}`,...o,...l,...u};return tD.set(i,d),d}function oD(e,t=[],s="",n=0){const i=e.trim().length;for(let a=0;a<i;a++){const i=e[a],r=e.slice(a+1);switch(i){case",":return 0===n?oD(r,[...t,s.trim()]):oD(r,t,`${s}${i}`,n);case"(":return oD(r,t,`${s}${i}`,n+1);case")":return oD(r,t,`${s}${i}`,n-1);default:return oD(r,t,`${s}${i}`,n)}}if(""===s)return t;if(0!==n)throw new eD({current:s,depth:n});return t.push(s.trim()),t}function lD(e){return"address"===e||"bool"===e||"function"===e||"string"===e||PR.test(e)||TR.test(e)}const cD=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/,hD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function uD(e,t,s=new Set){const n=[],i=e.length;for(let a=0;a<i;a++){const i=e[a];if(BR.test(i.type))n.push(i);else{const e=SR(hD,i.type);if(!(null==e?void 0:e.type))throw new QR({abiParameter:i});const{array:a,type:r}=e;if(r in t){if(s.has(r))throw new JR({type:r});n.push({...i,type:`tuple${a??""}`,components:uD(t[r]??[],t,new Set([...s,r]))})}else{if(!lD(r))throw new zR({type:r});n.push(i)}}}return n}function dD(e){const t=function(e){const t={},s=e.length;for(let r=0;r<s;r++){const s=e[r];if(!LR(s))continue;const n=FR(s);if(!n)throw new ZR({signature:s,type:"struct"});const i=n.properties.split(";"),a=[],o=i.length;for(let e=0;e<o;e++){const t=i[e].trim();if(!t)continue;const s=rD(t,{type:"struct"});a.push(s)}if(!a.length)throw new YR({signature:s});t[n.name]=a}const n={},i=Object.entries(t),a=i.length;for(let r=0;r<a;r++){const[e,s]=i[r];n[e]=uD(s,t)}return n}(e),s=[],n=e.length;for(let i=0;i<n;i++){const n=e[i];LR(n)||s.push(sD(n,t))}return s}function pD(e,t,s){const n=e[t.name];if("function"==typeof n)return n;const i=e[s];return"function"==typeof i?i:s=>t(e,s)}function fD(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new WD(e.type);return`${e.name}(${mD(e.inputs,{includeName:t})})`}function mD(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){return e.type.startsWith("tuple")?`(${mD(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function gD(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}function yD(e){return gD(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const bD="2.27.0";let vD={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:s})=>t?`${e??"https://viem.sh"}${t}${s?`#${s}`:""}`:void 0,version:`viem@${bD}`},wD=class e extends Error{constructor(t,s={}){var n;const i=s.cause instanceof e?s.cause.details:(null==(a=s.cause)?void 0:a.message)?s.cause.message:s.details;var a;const r=s.cause instanceof e&&s.cause.docsPath||s.docsPath,o=null==(n=vD.getDocsUrl)?void 0:n.call(vD,{...s,docsPath:r});super([t||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...i?[`Details: ${i}`]:[],...vD.version?[`Version: ${vD.version}`]:[]].join("\n"),s.cause?{cause:s.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=r,this.metaMessages=s.metaMessages,this.name=s.name??this.name,this.shortMessage=t,this.version=bD}walk(e){return xD(this,e)}};function xD(e,t){return(null==t?void 0:t(e))?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?xD(e.cause,t):t?null:e}class kD extends wD{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class AD extends wD{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ED extends wD{constructor({data:e,params:t,size:s}){super([`Data size of ${s} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${mD(t,{includeName:!0})})`,`Data:   ${e} (${s} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=s}}class SD extends wD{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class PD extends wD{constructor({expectedLength:e,givenLength:t,type:s}){super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class TD extends wD{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${yD(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class BD extends wD{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class CD extends wD{constructor(e,{docsPath:t}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join("\n"),{docsPath:t,name:"AbiErrorInputsNotFoundError"})}}class MD extends wD{constructor(e,{docsPath:t}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join("\n"),{docsPath:t,name:"AbiErrorNotFoundError"})}}class RD extends wD{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class DD extends wD{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class ID extends wD{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class _D extends wD{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t,name:"AbiEventNotFoundError"})}}class ND extends wD{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class LD extends wD{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class FD extends wD{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class OD extends wD{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${fD(e.abiItem)}\`, and`,`\`${t.type}\` in \`${fD(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let jD=class extends wD{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}};class UD extends wD{constructor({abiItem:e,data:t,params:s,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${mD(s,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=s,this.size=n}}class GD extends wD{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${fD(e,{includeName:!0})}".`].join("\n"),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class HD extends wD{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class zD extends wD{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}let VD=class extends wD{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}};class WD extends wD{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class $D extends wD{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let qD=class extends wD{constructor({offset:e,position:t,size:s}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${s}).`,{name:"SliceOffsetOutOfBoundsError"})}},KD=class extends wD{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};class QD extends wD{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} is expected to be ${t} ${s} long, but is ${e} ${s} long.`,{name:"InvalidBytesLengthError"})}}function ZD(e,{dir:t,size:s=32}={}){return"string"==typeof e?XD(e,{dir:t,size:s}):function(e,{dir:t,size:s=32}={}){if(null===s)return e;if(e.length>s)throw new KD({size:e.length,targetSize:s,type:"bytes"});const n=new Uint8Array(s);for(let i=0;i<s;i++){const a="right"===t;n[a?i:s-i-1]=e[a?i:e.length-i-1]}return n}(e,{dir:t,size:s})}function XD(e,{dir:t,size:s=32}={}){if(null===s)return e;const n=e.replace("0x","");if(n.length>2*s)throw new KD({size:Math.ceil(n.length/2),targetSize:s,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*s,"0")}`}let YD=class extends wD{constructor({max:e,min:t,signed:s,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}};class JD extends wD{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class eI extends wD{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let tI=class extends wD{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function sI(e,{dir:t="left"}={}){let s="string"==typeof e?e.replace("0x",""):e,n=0;for(let i=0;i<s.length-1&&"0"===s["left"===t?i:s.length-i-1].toString();i++)n++;return s="left"===t?s.slice(n):s.slice(0,s.length-n),"string"==typeof e?(1===s.length&&"right"===t&&(s=`${s}0`),`0x${s.length%2==1?`0${s}`:s}`):s}function nI(e,{size:t}){if(yD(e)>t)throw new tI({givenSize:yD(e),maxSize:t})}function iI(e,t={}){const{signed:s}=t;t.size&&nI(e,{size:t.size});const n=BigInt(e);if(!s)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}function aI(e,t={}){return Number(iI(e,t))}const rI=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function oI(e,t={}){return"number"==typeof e||"bigint"==typeof e?hI(e,t):"string"==typeof e?dI(e,t):"boolean"==typeof e?lI(e,t):cI(e,t)}function lI(e,t={}){const s=`0x${Number(e)}`;return"number"==typeof t.size?(nI(s,{size:t.size}),ZD(s,{size:t.size})):s}function cI(e,t={}){let s="";for(let i=0;i<e.length;i++)s+=rI[e[i]];const n=`0x${s}`;return"number"==typeof t.size?(nI(n,{size:t.size}),ZD(n,{dir:"right",size:t.size})):n}function hI(e,t={}){const{signed:s,size:n}=t,i=BigInt(e);let a;n?a=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const r="bigint"==typeof a&&s?-a-1n:0;if(a&&i>a||i<r){const t="bigint"==typeof e?"n":"";throw new YD({max:a?`${a}${t}`:void 0,min:`${r}${t}`,signed:s,size:n,value:`${e}${t}`})}const o=`0x${(s&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?ZD(o,{size:n}):o}const uI=new TextEncoder;function dI(e,t={}){return cI(uI.encode(e),t)}const pI=new TextEncoder;function fI(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return yI(hI(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const s=new Uint8Array(1);return s[0]=Number(e),"number"==typeof t.size?(nI(s,{size:t.size}),ZD(s,{size:t.size})):s}(e,t):gD(e)?yI(e,t):bI(e,t)}const mI={zero:48,nine:57,A:65,F:70,a:97,f:102};function gI(e){return e>=mI.zero&&e<=mI.nine?e-mI.zero:e>=mI.A&&e<=mI.F?e-(mI.A-10):e>=mI.a&&e<=mI.f?e-(mI.a-10):void 0}function yI(e,t={}){let s=e;t.size&&(nI(s,{size:t.size}),s=ZD(s,{dir:"right",size:t.size}));let n=s.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,a=new Uint8Array(i);for(let r=0,o=0;r<i;r++){const e=gI(n.charCodeAt(o++)),t=gI(n.charCodeAt(o++));if(void 0===e||void 0===t)throw new wD(`Invalid byte sequence ("${n[o-2]}${n[o-1]}" in "${n}").`);a[r]=16*e+t}return a}function bI(e,t={}){const s=pI.encode(e);return"number"==typeof t.size?(nI(s,{size:t.size}),ZD(s,{dir:"right",size:t.size})):s}function vI(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function wI(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function xI(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kI(e,t){wI(e);const s=t.outputLen;if(e.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}const AI=BigInt(2**32-1),EI=BigInt(32);function SI(e,t=!1){return t?{h:Number(e&AI),l:Number(e>>EI&AI)}:{h:0|Number(e>>EI&AI),l:0|Number(e&AI)}}function PI(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:r}=SI(e[i],t);[s[i],n[i]]=[a,r]}return[s,n]}const TI="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function BI(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function CI(e,t){return e<<32-t|e>>>t}const MI=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function RI(e){for(let s=0;s<e.length;s++)e[s]=(t=e[s])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function DI(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),wI(e),e}let II=class{clone(){return this._cloneInto()}};function _I(e){const t=t=>e().update(DI(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}function NI(e=32){if(TI&&"function"==typeof TI.getRandomValues)return TI.getRandomValues(new Uint8Array(e));if(TI&&"function"==typeof TI.randomBytes)return TI.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const LI=[],FI=[],OI=[],jI=BigInt(0),UI=BigInt(1),GI=BigInt(2),HI=BigInt(7),zI=BigInt(256),VI=BigInt(113);for(let DV=0,IV=UI,_V=1,NV=0;DV<24;DV++){[_V,NV]=[NV,(2*_V+3*NV)%5],LI.push(2*(5*NV+_V)),FI.push((DV+1)*(DV+2)/2%64);let e=jI;for(let t=0;t<7;t++)IV=(IV<<UI^(IV>>HI)*VI)%zI,IV&GI&&(e^=UI<<(UI<<BigInt(t))-UI);OI.push(e)}const[WI,$I]=PI(OI,!0),qI=(e,t,s)=>s>32?((e,t,s)=>t<<s-32|e>>>64-s)(e,t,s):((e,t,s)=>e<<s|t>>>32-s)(e,t,s),KI=(e,t,s)=>s>32?((e,t,s)=>e<<s-32|t>>>64-s)(e,t,s):((e,t,s)=>t<<s|e>>>32-s)(e,t,s);let QI=class e extends II{constructor(e,t,s,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vI(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){MI||RI(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,a=s[i],r=s[i+1],o=qI(a,r,1)^s[t],l=KI(a,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],i=e[3];for(let s=0;s<24;s++){const n=FI[s],a=qI(t,i,n),r=KI(t,i,n),o=LI[s];t=e[o],i=e[o+1],e[o]=a,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=WI[n],e[1]^=$I[n]}s.fill(0)}(this.state32,this.rounds),MI||RI(this.state32),this.posOut=0,this.pos=0}update(e){xI(this);const{blockLen:t,state:s}=this,n=(e=DI(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){xI(this,!1),wI(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,i=e.length;n<i;){this.posOut>=s&&this.keccak();const a=Math.min(s-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(kI(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:s,suffix:n,outputLen:i,rounds:a,enableXOF:r}=this;return t||(t=new e(s,n,i,r,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=n,t.outputLen=i,t.enableXOF=r,t.destroyed=this.destroyed,t}};const ZI=(()=>_I((()=>new QI(136,1,32))))();function XI(e,t){const s=t||"hex",n=ZI(gD(e,{strict:!1})?fI(e):e);return"bytes"===s?n:oI(n)}function YI(e){return XI(fI(function(e){let t=!0,s="",n=0,i="",a=!1;for(let r=0;r<e.length;r++){const o=e[r];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t)if(0!==n)" "!==o?(i+=o,s+=o):","!==e[r-1]&&","!==s&&",("!==s&&(s="",t=!1);else if(" "===o&&["event","function",""].includes(i))i="";else if(i+=o,")"===o){a=!0;break}}if(!a)throw new wD("Unable to normalize signature.");return i}("string"==typeof(t=e)?t:"function"===(s=t).type?`function ${s.name}(${RR(s.inputs)})${s.stateMutability&&"nonpayable"!==s.stateMutability?` ${s.stateMutability}`:""}${(null==(n=s.outputs)?void 0:n.length)?` returns (${RR(s.outputs)})`:""}`:"event"===s.type?`event ${s.name}(${RR(s.inputs)})`:"error"===s.type?`error ${s.name}(${RR(s.inputs)})`:"constructor"===s.type?`constructor(${RR(s.inputs)})${"payable"===s.stateMutability?" payable":""}`:"fallback"===s.type?"fallback() external"+("payable"===s.stateMutability?" payable":""):"receive() external payable")));var t,s,n}const JI=YI;let e_=class extends wD{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},t_=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}};const s_=new t_(8192);function n_(e,t){if(s_.has(`${e}.${t}`))return s_.get(`${e}.${t}`);const s=e.substring(2).toLowerCase(),n=XI(bI(s),"bytes"),i=s.split("");for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&i[r]&&(i[r]=i[r].toUpperCase()),(15&n[r>>1])>=8&&i[r+1]&&(i[r+1]=i[r+1].toUpperCase());const a=`0x${i.join("")}`;return s_.set(`${e}.${t}`,a),a}function i_(e,t){if(!o_(e,{strict:!1}))throw new e_({address:e});return n_(e,t)}const a_=/^0x[a-fA-F0-9]{40}$/,r_=new t_(8192);function o_(e,t){const{strict:s=!0}=t??{},n=`${e}.${s}`;if(r_.has(n))return r_.get(n);const i=!(!a_.test(e)||e.toLowerCase()!==e&&s&&n_(e)!==e);return r_.set(n,i),i}function l_(e){return"string"==typeof e[0]?c_(e):function(e){let t=0;for(const i of e)t+=i.length;const s=new Uint8Array(t);let n=0;for(const i of e)s.set(i,n),n+=i.length;return s}(e)}function c_(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function h_(e,t,s,{strict:n}={}){return gD(e,{strict:!1})?f_(e,t,s,{strict:n}):p_(e,t,s,{strict:n})}function u_(e,t){if("number"==typeof t&&t>0&&t>yD(e)-1)throw new qD({offset:t,position:"start",size:yD(e)})}function d_(e,t,s){if("number"==typeof t&&"number"==typeof s&&yD(e)!==s-t)throw new qD({offset:s,position:"end",size:yD(e)})}function p_(e,t,s,{strict:n}={}){u_(e,t);const i=e.slice(t,s);return n&&d_(i,t,s),i}function f_(e,t,s,{strict:n}={}){u_(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(s??e.length))}`;return n&&d_(i,t,s),i}const m_=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,g_=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function y_(e,t){if(e.length!==t.length)throw new BD({expectedLength:e.length,givenLength:t.length});const s=function({params:e,values:t}){const s=[];for(let n=0;n<e.length;n++)s.push(b_({param:e[n],value:t[n]}));return s}({params:e,values:t}),n=v_(s);return 0===n.length?"0x":n}function b_({param:e,value:t}){const s=w_(e.type);if(s){const[n,i]=s;return function(e,{length:t,param:s}){const n=null===t;if(!Array.isArray(e))throw new VD(e);if(!n&&e.length!==t)throw new PD({expectedLength:t,givenLength:e.length,type:`${s.type}[${t}]`});let i=!1;const a=[];for(let r=0;r<e.length;r++){const t=b_({param:s,value:e[r]});t.dynamic&&(i=!0),a.push(t)}if(n||i){const e=v_(a);if(n){const t=hI(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?l_([t,e]):t}}if(i)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:l_(a.map((({encoded:e})=>e)))}}(t,{length:n,param:{...e,type:i}})}if("tuple"===e.type)return function(e,{param:t}){let s=!1;const n=[];for(let i=0;i<t.components.length;i++){const a=t.components[i],r=b_({param:a,value:e[Array.isArray(e)?i:a.name]});n.push(r),r.dynamic&&(s=!0)}return{dynamic:s,encoded:s?v_(n):l_(n.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!o_(e))throw new e_({address:e});return{dynamic:!1,encoded:XD(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new wD(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:XD(lI(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const s=e.type.startsWith("int"),[,,n="256"]=g_.exec(e.type)??[];return function(e,{signed:t,size:s=256}){if("number"==typeof s){const n=2n**(BigInt(s)-(t?1n:0n))-1n,i=t?-n-1n:0n;if(e>n||e<i)throw new YD({max:n.toString(),min:i.toString(),signed:t,size:s/8,value:e.toString()})}return{dynamic:!1,encoded:hI(e,{size:32,signed:t})}}(t,{signed:s,size:Number(n)})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,s]=t.type.split("bytes"),n=yD(e);if(!s){let t=e;return n%32!=0&&(t=XD(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:l_([XD(hI(n,{size:32})),t])}}if(n!==Number.parseInt(s))throw new TD({expectedSize:Number.parseInt(s),value:e});return{dynamic:!1,encoded:XD(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=dI(e),s=Math.ceil(yD(t)/32),n=[];for(let i=0;i<s;i++)n.push(XD(h_(t,32*i,32*(i+1)),{dir:"right"}));return{dynamic:!0,encoded:l_([XD(hI(yD(t),{size:32})),...n])}}(t);throw new HD(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function v_(e){let t=0;for(let a=0;a<e.length;a++){const{dynamic:s,encoded:n}=e[a];t+=s?32:yD(n)}const s=[],n=[];let i=0;for(let a=0;a<e.length;a++){const{dynamic:r,encoded:o}=e[a];r?(s.push(hI(t+i,{size:32})),n.push(o),i+=yD(o)):s.push(o)}return l_([...s,...n])}function w_(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const x_=e=>h_(YI(e),0,4);function k_(e){const{abi:t,args:s=[],name:n}=e,i=gD(n,{strict:!1}),a=t.filter((e=>i?"function"===e.type?x_(e)===n:"event"===e.type&&JI(e)===n:"name"in e&&e.name===n));if(0===a.length)return;if(1===a.length)return a[0];let r;for(const o of a)if("inputs"in o)if(s&&0!==s.length){if(o.inputs&&0!==o.inputs.length&&o.inputs.length===s.length&&s.every(((e,t)=>{const s="inputs"in o&&o.inputs[t];return!!s&&A_(e,s)}))){if(r&&"inputs"in r&&r.inputs){const e=E_(o.inputs,r.inputs,s);if(e)throw new OD({abiItem:o,type:e[0]},{abiItem:r,type:e[1]})}r=o}}else if(!o.inputs||0===o.inputs.length)return o;return r||a[0]}function A_(e,t){const s=typeof e,n=t.type;switch(n){case"address":return o_(e,{strict:!1});case"bool":return"boolean"===s;case"function":case"string":return"string"===s;default:return"tuple"===n&&"components"in t?Object.values(t.components).every(((t,s)=>A_(Object.values(e)[s],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?"number"===s||"bigint"===s:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?"string"===s||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)&&Array.isArray(e)&&e.every((e=>A_(e,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})))}}function E_(e,t,s){for(const n in e){const i=e[n],a=t[n];if("tuple"===i.type&&"tuple"===a.type&&"components"in i&&"components"in a)return E_(i.components,a.components,s[n]);const r=[i.type,a.type];if(r.includes("address")&&r.includes("bytes20")||(r.includes("address")&&r.includes("string")||r.includes("address")&&r.includes("bytes"))&&o_(s[n],{strict:!1}))return r}}const S_="/docs/contract/encodeEventTopics";function P_(e){var t;const{abi:s,eventName:n,args:i}=e;let a=s[0];if(n){const e=k_({abi:s,name:n});if(!e)throw new _D(n,{docsPath:S_});a=e}if("event"!==a.type)throw new _D(void 0,{docsPath:S_});const r=fD(a),o=JI(r);let l=[];if(i&&"inputs"in a){const e=null==(t=a.inputs)?void 0:t.filter((e=>"indexed"in e&&e.indexed)),s=Array.isArray(i)?i:Object.values(i).length>0?(null==e?void 0:e.map((e=>i[e.name])))??[]:[];s.length>0&&(l=(null==e?void 0:e.map(((e,t)=>Array.isArray(s[t])?s[t].map(((n,i)=>T_({param:e,value:s[t][i]}))):void 0!==s[t]&&null!==s[t]?T_({param:e,value:s[t]}):null)))??[])}return[o,...l]}function T_({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return XI(fI(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new $D(e.type);return y_([e],[t])}function B_(e,{method:t}){var s,n;const i={};return"fallback"===e.transport.type&&(null==(n=(s=e.transport).onResponse)||n.call(s,(({method:e,response:s,status:n,transport:a})=>{"success"===n&&t===e&&(i[s]=a.request)}))),t=>i[t]||e.request}async function C_(e,t){const{address:s,abi:n,args:i,eventName:a,fromBlock:r,strict:o,toBlock:l}=t,c=B_(e,{method:"eth_newFilter"}),h=a?P_({abi:n,args:i,eventName:a}):void 0,u=await e.request({method:"eth_newFilter",params:[{address:s,fromBlock:"bigint"==typeof r?hI(r):r,toBlock:"bigint"==typeof l?hI(l):l,topics:h}]});return{abi:n,args:i,eventName:a,id:u,request:c(u),strict:Boolean(o),type:"event"}}function M_(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const R_="/docs/contract/encodeFunctionData";function D_(e){const{args:t}=e,{abi:s,functionName:n}=1===e.abi.length&&(null==(i=e.functionName)?void 0:i.startsWith("0x"))?e:function(e){const{abi:t,args:s,functionName:n}=e;let i=t[0];if(n){const e=k_({abi:t,args:s,name:n});if(!e)throw new ND(n,{docsPath:R_});i=e}if("function"!==i.type)throw new ND(void 0,{docsPath:R_});return{abi:[i],functionName:x_(fD(i))}}(e);var i;const a=s[0];return c_([n,("inputs"in a&&a.inputs?y_(a.inputs,t??[]):void 0)??"0x"])}const I_={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},__={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},N_={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class L_ extends wD{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class F_ extends wD{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class O_ extends wD{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const j_={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new O_({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new F_({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new L_({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new L_({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const s=t??this.position;return this.assertPosition(s+e-1),this.bytes.subarray(s,s+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const s=this.inspectBytes(e);return this.position+=t??e,s},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function U_(e,{recursiveReadLimit:t=8192}={}){const s=Object.create(j_);return s.bytes=e,s.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),s.positionReadCount=new Map,s.recursiveReadLimit=t,s}function G_(e,t={}){return void 0!==t.size&&nI(e,{size:t.size}),iI(cI(e,t),t)}function H_(e,t={}){let s=e;if(void 0!==t.size&&(nI(s,{size:t.size}),s=sI(s)),s.length>1||s[0]>1)throw new JD(s);return Boolean(s[0])}function z_(e,t={}){return void 0!==t.size&&nI(e,{size:t.size}),aI(cI(e,t),t)}function V_(e,t){const s="string"==typeof t?yI(t):t,n=U_(s);if(0===yD(s)&&e.length>0)throw new SD;if(yD(t)&&yD(t)<32)throw new ED({data:"string"==typeof t?t:cI(t),params:e,size:yD(t)});let i=0;const a=[];for(let r=0;r<e.length;++r){const t=e[r];n.setPosition(i);const[s,o]=W_(n,t,{staticPosition:0});i+=o,a.push(s)}return a}function W_(e,t,{staticPosition:s}){const n=w_(t.type);if(n){const[i,a]=n;return function(e,t,{length:s,staticPosition:n}){if(!s){const s=n+z_(e.readBytes(q_)),i=s+$_;e.setPosition(s);const a=z_(e.readBytes($_)),r=K_(t);let o=0;const l=[];for(let n=0;n<a;++n){e.setPosition(i+(r?32*n:o));const[s,a]=W_(e,t,{staticPosition:i});o+=a,l.push(s)}return e.setPosition(n+32),[l,32]}if(K_(t)){const i=n+z_(e.readBytes(q_)),a=[];for(let n=0;n<s;++n){e.setPosition(i+32*n);const[s]=W_(e,t,{staticPosition:i});a.push(s)}return e.setPosition(n+32),[a,32]}let i=0;const a=[];for(let r=0;r<s;++r){const[s,r]=W_(e,t,{staticPosition:n+i});i+=r,a.push(s)}return[a,i]}(e,{...t,type:a},{length:i,staticPosition:s})}if("tuple"===t.type)return function(e,t,{staticPosition:s}){const n=0===t.components.length||t.components.some((({name:e})=>!e)),i=n?[]:{};let a=0;if(K_(t)){const r=s+z_(e.readBytes(q_));for(let s=0;s<t.components.length;++s){const o=t.components[s];e.setPosition(r+a);const[l,c]=W_(e,o,{staticPosition:r});a+=c,i[n?s:null==o?void 0:o.name]=l}return e.setPosition(s+32),[i,32]}for(let r=0;r<t.components.length;++r){const o=t.components[r],[l,c]=W_(e,o,{staticPosition:s});i[n?r:null==o?void 0:o.name]=l,a+=c}return[i,a]}(e,t,{staticPosition:s});if("address"===t.type)return function(e){return[n_(cI(p_(e.readBytes(32),-20))),32]}(e);if("bool"===t.type)return function(e){return[H_(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:s}){const[n,i]=t.type.split("bytes");if(!i){const t=z_(e.readBytes(32));e.setPosition(s+t);const n=z_(e.readBytes(32));if(0===n)return e.setPosition(s+32),["0x",32];const i=e.readBytes(n);return e.setPosition(s+32),[cI(i),32]}return[cI(e.readBytes(Number.parseInt(i),32)),32]}(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const s=t.type.startsWith("int"),n=Number.parseInt(t.type.split("int")[1]||"256"),i=e.readBytes(32);return[n>48?G_(i,{signed:s}):z_(i,{signed:s}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const s=t+z_(e.readBytes(32));e.setPosition(s);const n=z_(e.readBytes(32));if(0===n)return e.setPosition(t+32),["",32];const i=function(e,t={}){let s=e;return void 0!==t.size&&(nI(s,{size:t.size}),s=sI(s,{dir:"right"})),(new TextDecoder).decode(s)}(sI(e.readBytes(n,32)));return e.setPosition(t+32),[i,32]}(e,{staticPosition:s});throw new zD(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const $_=32,q_=32;function K_(e){var t;const{type:s}=e;if("string"===s)return!0;if("bytes"===s)return!0;if(s.endsWith("[]"))return!0;if("tuple"===s)return null==(t=e.components)?void 0:t.some(K_);const n=w_(e.type);return!(!n||!K_({...e,type:n[1]}))}function Q_(e){const{abi:t,data:s}=e,n=h_(s,0,4);if("0x"===n)throw new SD;const i=[...t||[],__,N_].find((e=>"error"===e.type&&n===x_(fD(e))));if(!i)throw new RD(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?V_(i.inputs,h_(s,4)):void 0,errorName:i.name}}const Z_=(e,t,s)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),s);function X_({abiItem:e,args:t,includeFunctionName:s=!0,includeName:n=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${s?e.name:""}(${e.inputs.map(((e,s)=>`${n&&e.name?`${e.name}: `:""}${"object"==typeof t[s]?Z_(t[s]):t[s]}`)).join(", ")})`}const Y_={gwei:9,wei:18},J_={ether:-9,wei:9};function eN(e,t){let s=e.toString();const n=s.startsWith("-");n&&(s=s.slice(1)),s=s.padStart(t,"0");let[i,a]=[s.slice(0,s.length-t),s.slice(s.length-t)];return a=a.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${a?`.${a}`:""}`}function tN(e,t="wei"){return eN(e,Y_[t])}function sN(e,t="wei"){return eN(e,J_[t])}class nN extends wD{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class iN extends wD{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function aN(e){return e.reduce(((e,{slot:t,value:s})=>`${e}        ${t}: ${s}\n`),"")}function rN(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),s=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(s+1)}  ${t}`)).join("\n")}class oN extends wD{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}class lN extends wD{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",rN(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class cN extends wD{constructor(e,{account:t,docsPath:s,chain:n,data:i,gas:a,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u}){var d;const p=rN({chain:n&&`${null==n?void 0:n.name} (id: ${null==n?void 0:n.id})`,from:null==t?void 0:t.address,to:h,value:void 0!==u&&`${tN(u)} ${(null==(d=null==n?void 0:n.nativeCurrency)?void 0:d.symbol)||"ETH"}`,data:i,gas:a,gasPrice:void 0!==r&&`${sN(r)} gwei`,maxFeePerGas:void 0!==o&&`${sN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${sN(l)} gwei`,nonce:c});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class hN extends wD{constructor({blockHash:e,blockNumber:t,blockTag:s,hash:n,index:i}){let a="Transaction";s&&void 0!==i&&(a=`Transaction at block time "${s}" at index "${i}"`),e&&void 0!==i&&(a=`Transaction at block hash "${e}" at index "${i}"`),t&&void 0!==i&&(a=`Transaction at block number "${t}" at index "${i}"`),n&&(a=`Transaction with hash "${n}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class uN extends wD{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class dN extends wD{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const pN=e=>e;class fN extends wD{constructor(e,{account:t,docsPath:s,chain:n,data:i,gas:a,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u,stateOverride:d}){var p;const f=t?M_(t):void 0;let m=rN({from:null==f?void 0:f.address,to:h,value:void 0!==u&&`${tN(u)} ${(null==(p=null==n?void 0:n.nativeCurrency)?void 0:p.symbol)||"ETH"}`,data:i,gas:a,gasPrice:void 0!==r&&`${sN(r)} gwei`,maxFeePerGas:void 0!==o&&`${sN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${sN(l)} gwei`,nonce:c});d&&(m+=`\n${function(e){return e.reduce(((e,{address:t,...s})=>{let n=`${e}    ${t}:\n`;return s.nonce&&(n+=`      nonce: ${s.nonce}\n`),s.balance&&(n+=`      balance: ${s.balance}\n`),s.code&&(n+=`      code: ${s.code}\n`),s.state&&(n+="      state:\n",n+=aN(s.state)),s.stateDiff&&(n+="      stateDiff:\n",n+=aN(s.stateDiff)),n}),"  State Override:\n").slice(0,-1)}(d)}`),super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class mN extends wD{constructor(e,{abi:t,args:s,contractAddress:n,docsPath:i,functionName:a,sender:r}){const o=k_({abi:t,args:s,name:a}),l=o?X_({abiItem:o,args:s,includeFunctionName:!1,includeName:!1}):void 0,c=rN({address:n&&n,function:o?fD(o,{includeName:!0}):void 0,args:l&&"()"!==l&&`${[...Array((null==a?void 0:a.length)??0).keys()].map((()=>" ")).join("")}${l}`,sender:r});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],c&&"Contract Call:",c].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=s,this.cause=e,this.contractAddress=n,this.functionName=a,this.sender=r}}class gN extends wD{constructor({abi:e,data:t,functionName:s,message:n}){let i,a,r,o,l;if(t&&"0x"!==t)try{a=Q_({abi:e,data:t});const{abiItem:s,errorName:n,args:i}=a;if("Error"===n)o=i[0];else if("Panic"===n){const[e]=i;o=I_[e]}else{const e=s?fD(s,{includeName:!0}):void 0,t=s&&i?X_({abiItem:s,args:i,includeFunctionName:!1,includeName:!1}):void 0;r=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array((null==n?void 0:n.length)??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(c){i=c}else n&&(o=n);i instanceof RD&&(l=i.signature,r=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(o&&"execution reverted"!==o||l?[`The contract function "${s}" reverted with the following ${l?"signature":"reason"}:`,o||l].join("\n"):`The contract function "${s}" reverted.`,{cause:i,metaMessages:r,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=t,this.reason=o,this.signature=l}}class yN extends wD{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class bN extends wD{constructor({factory:e}){super("Deployment for counterfactual contract call failed"+(e?` for factory "${e}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class vN extends wD{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class wN extends wD{constructor({body:e,cause:t,details:s,headers:n,status:i,url:a}){super("HTTP request failed.",{cause:t,details:s,metaMessages:[i&&`Status: ${i}`,`URL: ${a}`,e&&`Request body: ${Z_(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=i,this.url=a}}class xN extends wD{constructor({body:e,error:t,url:s}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${s}`,`Request body: ${Z_(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class kN extends wD{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${Z_(e)}`],name:"TimeoutError"})}}class AN extends wD{constructor(e,{code:t,docsPath:s,metaMessages:n,name:i,shortMessage:a}){super(a,{cause:e,docsPath:s,metaMessages:n||(null==e?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof xN?e.code:t??-1}}class EN extends AN{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class SN extends AN{constructor(e){super(e,{code:SN.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(SN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class PN extends AN{constructor(e){super(e,{code:PN.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(PN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class TN extends AN{constructor(e,{method:t}={}){super(e,{code:TN.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(TN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class BN extends AN{constructor(e){super(e,{code:BN.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(BN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class CN extends AN{constructor(e){super(e,{code:CN.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(CN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class MN extends AN{constructor(e){super(e,{code:MN.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(MN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class RN extends AN{constructor(e){super(e,{code:RN.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(RN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class DN extends AN{constructor(e){super(e,{code:DN.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(DN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class IN extends AN{constructor(e){super(e,{code:IN.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(IN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _N extends AN{constructor(e,{method:t}={}){super(e,{code:_N.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(_N,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class NN extends AN{constructor(e){super(e,{code:NN.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(NN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class LN extends AN{constructor(e){super(e,{code:LN.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(LN,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class FN extends EN{constructor(e){super(e,{code:FN.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(FN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ON extends EN{constructor(e){super(e,{code:ON.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ON,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class jN extends EN{constructor(e,{method:t}={}){super(e,{code:jN.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(jN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class UN extends EN{constructor(e){super(e,{code:UN.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(UN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class GN extends EN{constructor(e){super(e,{code:GN.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(GN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class HN extends EN{constructor(e){super(e,{code:HN.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(HN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class zN extends EN{constructor(e){super(e,{code:zN.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(zN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class VN extends EN{constructor(e){super(e,{code:VN.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(VN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class WN extends EN{constructor(e){super(e,{code:WN.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(WN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class $N extends EN{constructor(e){super(e,{code:$N.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty($N,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class qN extends EN{constructor(e){super(e,{code:qN.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(qN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class KN extends EN{constructor(e){super(e,{code:KN.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(KN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class QN extends EN{constructor(e){super(e,{code:QN.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(QN,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ZN extends AN{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const XN=3;function YN(e,{abi:t,address:s,args:n,docsPath:i,functionName:a,sender:r}){const o=e instanceof vN?e:e instanceof wD?e.walk((e=>"data"in e))||e.walk():{},{code:l,data:c,details:h,message:u,shortMessage:d}=o,p=e instanceof SD?new yN({functionName:a}):[XN,CN.code].includes(l)&&(c||h||u||d)?new gN({abi:t,data:"object"==typeof c?c.data:c,functionName:a,message:o instanceof xN?h:d??u}):e;return new mN(p,{abi:t,args:n,contractAddress:s,docsPath:i,functionName:a,sender:r})}const JN={},eL=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));n=Promise.allSettled(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,s),t in JN)return;JN[t]=!0;const n=t.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(s)for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.href===t&&(!n||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const r=document.createElement("link");return r.rel=n?"stylesheet":"modulepreload",n||(r.as="script"),r.crossOrigin="",r.href=t,a&&r.setAttribute("nonce",a),document.head.appendChild(r),n?new Promise(((e,s)=>{r.addEventListener("load",e),r.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)}))};function tL(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function sL({hash:e,signature:t}){return s=await async function({hash:e,signature:t}){const s=gD(e)?e:oI(e),{secp256k1:n}=await eL((async()=>{const{secp256k1:e}=await Promise.resolve().then((()=>rz));return{secp256k1:e}}),[],import.meta.url);return`0x${(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:s,v:i,yParity:a}=t,r=tL(Number(a??i));return new n.Signature(iI(e),iI(s)).addRecoveryBit(r)}const e=gD(t)?t:oI(t),s=tL(aI(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(s)})().recoverPublicKey(s.substring(2)).toHex(!1)}`}({hash:e,signature:t}),n_(`0x${XI(`0x${s.substring(4)}`).substring(26)}`);var s}function nL(e,t="hex"){const s=iL(e),n=U_(new Uint8Array(s.length));return s.encode(n),"hex"===t?cI(n.bytes):n.bytes}function iL(e){return Array.isArray(e)?function(e){const t=e.reduce(((e,t)=>e+t.length),0),s=aL(t);return{length:t<=55?1+t:1+s+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+s),1===s?n.pushUint8(t):2===s?n.pushUint16(t):3===s?n.pushUint24(t):n.pushUint32(t));for(const{encode:t}of e)t(n)}}}(e.map((e=>iL(e)))):function(e){const t="string"==typeof e?yI(e):e,s=aL(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+s+t.length,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+s),1===s?e.pushUint8(t.length):2===s?e.pushUint16(t.length):3===s?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function aL(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new wD("Length is too large.")}function rL(e){const{chainId:t,nonce:s,to:n}=e,i=e.contractAddress??e.address,a=XI(c_(["0x05",nL([t?hI(t):"0x",i,s?hI(s):"0x"])]));return"bytes"===n?yI(a):a}async function oL(e){const{authorization:t,signature:s}=e;return sL({hash:rL(t),signature:s??t})}class lL extends wD{constructor(e,{account:t,docsPath:s,chain:n,data:i,gas:a,gasPrice:r,maxFeePerGas:o,maxPriorityFeePerGas:l,nonce:c,to:h,value:u}){var d;const p=rN({from:null==t?void 0:t.address,to:h,value:void 0!==u&&`${tN(u)} ${(null==(d=null==n?void 0:n.nativeCurrency)?void 0:d.symbol)||"ETH"}`,data:i,gas:a,gasPrice:void 0!==r&&`${sN(r)} gwei`,maxFeePerGas:void 0!==o&&`${sN(o)} gwei`,maxPriorityFeePerGas:void 0!==l&&`${sN(l)} gwei`,nonce:c});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class cL extends wD{constructor({cause:e,message:t}={}){var s;const n=null==(s=null==t?void 0:t.replace("execution reverted: ",""))?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(cL,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(cL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class hL extends wD{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${sN(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(hL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class uL extends wD{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${sN(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(uL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class dL extends wD{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(dL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class pL extends wD{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(pL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class fL extends wD{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(fL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class mL extends wD{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(mL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class gL extends wD{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(gL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class yL extends wD{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(yL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class bL extends wD{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(bL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class vL extends wD{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:s}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${sN(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${s?` = ${sN(s)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(vL,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class wL extends wD{constructor({cause:e}){super(`An error occurred while executing: ${null==e?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function xL(e,t){const s=(e.details||"").toLowerCase(),n=e instanceof wD?e.walk((e=>(null==e?void 0:e.code)===cL.code)):e;return n instanceof wD?new cL({cause:e,message:n.details}):cL.nodeMessage.test(s)?new cL({cause:e,message:e.details}):hL.nodeMessage.test(s)?new hL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):uL.nodeMessage.test(s)?new uL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):dL.nodeMessage.test(s)?new dL({cause:e,nonce:null==t?void 0:t.nonce}):pL.nodeMessage.test(s)?new pL({cause:e,nonce:null==t?void 0:t.nonce}):fL.nodeMessage.test(s)?new fL({cause:e,nonce:null==t?void 0:t.nonce}):mL.nodeMessage.test(s)?new mL({cause:e}):gL.nodeMessage.test(s)?new gL({cause:e,gas:null==t?void 0:t.gas}):yL.nodeMessage.test(s)?new yL({cause:e,gas:null==t?void 0:t.gas}):bL.nodeMessage.test(s)?new bL({cause:e}):vL.nodeMessage.test(s)?new vL({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas,maxPriorityFeePerGas:null==t?void 0:t.maxPriorityFeePerGas}):new wL({cause:e})}function kL(e,{format:t}){if(!t)return{};const s={};return function t(n){const i=Object.keys(n);for(const a of i)a in e&&(s[a]=e[a]),n[a]&&"object"==typeof n[a]&&!Array.isArray(n[a])&&t(n[a])}(t(e||{})),s}const AL={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function EL(e){const t={};return void 0!==e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.address,r:e.r?hI(BigInt(e.r)):e.r,s:e.s?hI(BigInt(e.s)):e.s,chainId:hI(e.chainId),nonce:hI(e.nonce),...void 0!==e.yParity?{yParity:hI(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:hI(e.v)}:{}})))),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map((e=>cI(e))):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=hI(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=hI(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=hI(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=hI(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=hI(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=hI(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=AL[e.type]),void 0!==e.value&&(t.value=hI(e.value)),t}function SL(e){if(e&&0!==e.length)return e.reduce(((e,{slot:t,value:s})=>{if(66!==t.length)throw new QD({size:t.length,targetSize:66,type:"hex"});if(66!==s.length)throw new QD({size:s.length,targetSize:66,type:"hex"});return e[t]=s,e}),{})}function PL(e){const{balance:t,nonce:s,state:n,stateDiff:i,code:a}=e,r={};if(void 0!==a&&(r.code=a),void 0!==t&&(r.balance=hI(t)),void 0!==s&&(r.nonce=hI(s)),void 0!==n&&(r.state=SL(n)),void 0!==i){if(r.state)throw new iN;r.stateDiff=SL(i)}return r}function TL(e){if(!e)return;const t={};for(const{address:s,...n}of e){if(!o_(s,{strict:!1}))throw new e_({address:s});if(t[s])throw new nN({address:s});t[s]=PL(n)}return t}const BL=2n**256n-1n;function CL(e){const{account:t,gasPrice:s,maxFeePerGas:n,maxPriorityFeePerGas:i,to:a}=e,r=t?M_(t):void 0;if(r&&!o_(r.address))throw new e_({address:r.address});if(a&&!o_(a))throw new e_({address:a});if(void 0!==s&&(void 0!==n||void 0!==i))throw new oN;if(n&&n>BL)throw new hL({maxFeePerGas:n});if(i&&n&&i>n)throw new vL({maxFeePerGas:n,maxPriorityFeePerGas:i})}class ML extends wD{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class RL extends wD{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class DL extends wD{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${sN(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class IL extends wD{constructor({blockHash:e,blockNumber:t}){let s="Block";e&&(s=`Block at hash "${e}"`),t&&(s=`Block at number "${t}"`),super(`${s} could not be found.`,{name:"BlockNotFoundError"})}}const _L={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function NL(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?aI(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?aI(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?_L[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function LL(e){const t=(e.transactions??[]).map((e=>"string"==typeof e?e:NL(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function FL(e,{blockHash:t,blockNumber:s,blockTag:n,includeTransactions:i}={}){var a,r,o;const l=n??"latest",c=i??!1,h=void 0!==s?hI(s):void 0;let u=null;if(u=t?await e.request({method:"eth_getBlockByHash",params:[t,c]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[h||l,c]},{dedupe:Boolean(h)}),!u)throw new IL({blockHash:t,blockNumber:s});return((null==(o=null==(r=null==(a=e.chain)?void 0:a.formatters)?void 0:r.block)?void 0:o.format)||LL)(u)}async function OL(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function jL(e,t){var s,n;const{block:i,chain:a=e.chain,request:r}=t||{};try{const t=(null==(s=null==a?void 0:a.fees)?void 0:s.maxPriorityFeePerGas)??(null==(n=null==a?void 0:a.fees)?void 0:n.defaultPriorityFee);if("function"==typeof t){const s=i||await pD(e,FL,"getBlock")({}),n=await t({block:s,client:e,request:r});if(null===n)throw new Error;return n}return void 0!==t?t:iI(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,s]=await Promise.all([i?Promise.resolve(i):pD(e,FL,"getBlock")({}),pD(e,OL,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new RL;const n=s-t.baseFeePerGas;return n<0n?0n:n}}async function UL(e,t){var s,n;const{block:i,chain:a=e.chain,request:r,type:o="eip1559"}=t||{},l=await(async()=>{var t,s;return"function"==typeof(null==(t=null==a?void 0:a.fees)?void 0:t.baseFeeMultiplier)?a.fees.baseFeeMultiplier({block:i,client:e,request:r}):(null==(s=null==a?void 0:a.fees)?void 0:s.baseFeeMultiplier)??1.2})();if(l<1)throw new ML;const c=10**((null==(s=l.toString().split(".")[1])?void 0:s.length)??0),h=e=>e*BigInt(Math.ceil(l*c))/BigInt(c),u=i||await pD(e,FL,"getBlock")({});if("function"==typeof(null==(n=null==a?void 0:a.fees)?void 0:n.estimateFeesPerGas)){const t=await a.fees.estimateFeesPerGas({block:i,client:e,multiply:h,request:r,type:o});if(null!==t)return t}if("eip1559"===o){if("bigint"!=typeof u.baseFeePerGas)throw new RL;const t="bigint"==typeof(null==r?void 0:r.maxPriorityFeePerGas)?r.maxPriorityFeePerGas:await jL(e,{block:u,chain:a,request:r}),s=h(u.baseFeePerGas);return{maxFeePerGas:(null==r?void 0:r.maxFeePerGas)??s+t,maxPriorityFeePerGas:t}}return{gasPrice:(null==r?void 0:r.gasPrice)??h(await pD(e,OL,"getGasPrice")({}))}}async function GL(e,{address:t,blockTag:s="latest",blockNumber:n}){return aI(await e.request({method:"eth_getTransactionCount",params:[t,n?hI(n):s]},{dedupe:Boolean(n)}))}function HL(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>yI(e))):e.blobs,i=[];for(const a of n)i.push(Uint8Array.from(t.blobToKzgCommitment(a)));return"bytes"===s?i:i.map((e=>cI(e)))}function zL(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>yI(e))):e.blobs,i="string"==typeof e.commitments[0]?e.commitments.map((e=>yI(e))):e.commitments,a=[];for(let r=0;r<n.length;r++){const e=n[r],s=i[r];a.push(Uint8Array.from(t.computeBlobKzgProof(e,s)))}return"bytes"===s?a:a.map((e=>cI(e)))}function VL(e,t,s){return e&t^~e&s}function WL(e,t,s){return e&t^e&s^t&s}class $L extends II{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=BI(this.buffer)}update(e){xI(this);const{view:t,buffer:s,blockLen:n}=this,i=(e=DI(e)).length;for(let a=0;a<i;){const r=Math.min(n-this.pos,i-a);if(r!==n)s.set(e.subarray(a,a+r),this.pos),this.pos+=r,a+=r,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=BI(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){xI(this),kI(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(s,0),a=0);for(let h=a;h<n;h++)t[h]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const i=BigInt(32),a=BigInt(4294967295),r=Number(s>>i&a),o=Number(s&a),l=n?4:0,c=n?0:4;e.setUint32(t+l,r,n),e.setUint32(t+c,o,n)}(s,n-8,BigInt(8*this.length),i),this.process(s,0);const r=BI(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)r.setUint32(4*h,c[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:i,destroyed:a,pos:r}=this;return e.length=n,e.pos=r,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(s),e}}const qL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),KL=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),QL=new Uint32Array(64);class ZL extends $L{constructor(){super(64,32,8,!1),this.A=0|KL[0],this.B=0|KL[1],this.C=0|KL[2],this.D=0|KL[3],this.E=0|KL[4],this.F=0|KL[5],this.G=0|KL[6],this.H=0|KL[7]}get(){const{A:e,B:t,C:s,D:n,E:i,F:a,G:r,H:o}=this;return[e,t,s,n,i,a,r,o]}set(e,t,s,n,i,a,r,o){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|r,this.H=0|o}process(e,t){for(let h=0;h<16;h++,t+=4)QL[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=QL[h-15],t=QL[h-2],s=CI(e,7)^CI(e,18)^e>>>3,n=CI(t,17)^CI(t,19)^t>>>10;QL[h]=n+QL[h-7]+s+QL[h-16]|0}let{A:s,B:n,C:i,D:a,E:r,F:o,G:l,H:c}=this;for(let h=0;h<64;h++){const e=c+(CI(r,6)^CI(r,11)^CI(r,25))+VL(r,o,l)+qL[h]+QL[h]|0,t=(CI(s,2)^CI(s,13)^CI(s,22))+WL(s,n,i)|0;c=l,l=o,o=r,r=a+e|0,a=i,i=n,n=s,s=e+t|0}s=s+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,r=r+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(s,n,i,a,r,o,l,c)}roundClean(){QL.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const XL=_I((()=>new ZL));function YL(e){const{commitment:t,version:s=1}=e,n=e.to??("string"==typeof t?"hex":"bytes"),i=XL(gD(a=t,{strict:!1})?fI(a):a);var a;return i.set([s],0),"bytes"===n?i:cI(i)}const JL=761855;class eF extends wD{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class tF extends wD{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}async function sF(e){return aI(await e.request({method:"eth_chainId"},{dedupe:!0}))}const nF=["blobVersionedHashes","chainId","fees","gas","nonce","type"],iF=new Map;async function aF(e,t){const{account:s=e.account,blobs:n,chain:i,gas:a,kzg:r,nonce:o,nonceManager:l,parameters:c=nF,type:h}=t,u=s?M_(s):s,d={...t,...u?{from:null==u?void 0:u.address}:{}};let p,f;async function m(){return p||(p=await pD(e,FL,"getBlock")({blockTag:"latest"}),p)}async function g(){if(f)return f;if(i)return i.id;if(void 0!==t.chainId)return t.chainId;const s=await pD(e,sF,"getChainId")({});return f=s,f}if(c.includes("nonce")&&void 0===o&&u)if(l){const t=await g();d.nonce=await l.consume({address:u.address,chainId:t,client:e})}else d.nonce=await pD(e,GL,"getTransactionCount")({address:u.address,blockTag:"pending"});if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&n&&r){const e=HL({blobs:n,kzg:r});if(c.includes("blobVersionedHashes")){const t=function(e){const{commitments:t,version:s}=e,n=e.to,i=[];for(const a of t)i.push(YL({commitment:a,to:n,version:s}));return i}({commitments:e,to:"hex"});d.blobVersionedHashes=t}if(c.includes("sidecars")){const t=function(e){const{data:t,kzg:s,to:n}=e,i=e.blobs??function(e){const t="string"==typeof e.data?yI(e.data):e.data,s=yD(t);if(!s)throw new tF;if(s>JL)throw new eF({maxSize:JL,size:s});const n=[];let i=!0,a=0;for(;i;){const e=U_(new Uint8Array(131072));let s=0;for(;s<4096;){const n=t.slice(a,a+31);if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),i=!1;break}s++,a+=31}n.push(e)}return n.map((e=>cI(e.bytes)))}({data:t}),a=e.commitments??HL({blobs:i,kzg:s,to:n}),r=e.proofs??zL({blobs:i,commitments:a,kzg:s,to:n}),o=[];for(let l=0;l<i.length;l++)o.push({blob:i[l],commitment:a[l],proof:r[l]});return o}({blobs:n,commitments:e,proofs:zL({blobs:n,commitments:e,kzg:r}),to:"hex"});d.sidecars=t}}if(c.includes("chainId")&&(d.chainId=await g()),(c.includes("fees")||c.includes("type"))&&void 0===h)try{d.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new lN({transaction:e})}(d)}catch{let t=iF.get(e.uid);if(void 0===t){const s=await m();t="bigint"==typeof(null==s?void 0:s.baseFeePerGas),iF.set(e.uid,t)}d.type=t?"eip1559":"legacy"}if(c.includes("fees"))if("legacy"!==d.type&&"eip2930"!==d.type){if(void 0===d.maxFeePerGas||void 0===d.maxPriorityFeePerGas){const s=await m(),{maxFeePerGas:n,maxPriorityFeePerGas:a}=await UL(e,{block:s,chain:i,request:d});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<a)throw new DL({maxPriorityFeePerGas:a});d.maxPriorityFeePerGas=a,d.maxFeePerGas=n}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new RL;if(void 0===t.gasPrice){const t=await m(),{gasPrice:s}=await UL(e,{block:t,chain:i,request:d,type:"legacy"});d.gasPrice=s}}return c.includes("gas")&&void 0===a&&(d.gas=await pD(e,oF,"estimateGas")({...d,account:u?{address:u.address,type:"json-rpc"}:u})),CL(d),delete d.parameters,d}async function rF(e,{address:t,blockNumber:s,blockTag:n="latest"}){const i=s?hI(s):void 0,a=await e.request({method:"eth_getBalance",params:[t,i||n]});return BigInt(a)}async function oF(e,t){var s,n,i;const{account:a=e.account}=t,r=a?M_(a):void 0;try{let a=function(t){const{block:s,request:n,rpcStateOverride:i}=t;return e.request({method:"eth_estimateGas",params:i?[n,s??"latest",i]:s?[n,s]:[n]})};const{accessList:o,authorizationList:l,blobs:c,blobVersionedHashes:h,blockNumber:u,blockTag:d,data:p,gas:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:w,stateOverride:x,...k}=await aF(e,{...t,parameters:"local"===(null==r?void 0:r.type)?void 0:["blobVersionedHashes"]}),A=(u?hI(u):void 0)||d,E=TL(x),S=await(async()=>k.to?k.to:l&&l.length>0?await oL({authorization:l[0]}).catch((()=>{throw new wD("`to` is required. Could not infer from `authorizationList`")})):void 0)();CL(t);const P=null==(i=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:i.format,T=(P||EL)({...kL(k,{format:P}),from:null==r?void 0:r.address,accessList:o,authorizationList:l,blobs:c,blobVersionedHashes:h,data:p,gas:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:S,value:w});let B=BigInt(await a({block:A,request:T,rpcStateOverride:E}));if(l){const t=await rF(e,{address:T.from});B+=(await Promise.all(l.map((async e=>{const{address:s}=e,n=await a({block:A,request:{authorizationList:void 0,data:p,from:null==r?void 0:r.address,to:s,value:hI(t)},rpcStateOverride:E}).catch((()=>100000n));return 2n*BigInt(n)})))).reduce(((e,t)=>e+t),0n)}return B}catch(o){throw function(e,{docsPath:t,...s}){const n=(()=>{const t=xL(e,s);return t instanceof wL?e:t})();return new lL(n,{docsPath:t,...s})}(o,{...t,account:r,chain:e.chain})}}async function lF(e,t){const{abi:s,address:n,args:i,functionName:a,dataSuffix:r,...o}=t,l=D_({abi:s,args:i,functionName:a});try{return await pD(e,oF,"estimateGas")({data:`${l}${r?r.replace("0x",""):""}`,to:n,...o})}catch(c){const e=o.account?M_(o.account):void 0;throw YN(c,{abi:s,address:n,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:null==e?void 0:e.address})}}function cF(e,t){if(!o_(e,{strict:!1}))throw new e_({address:e});if(!o_(t,{strict:!1}))throw new e_({address:t});return e.toLowerCase()===t.toLowerCase()}const hF="/docs/contract/decodeEventLog";function uF(e){const{abi:t,data:s,strict:n,topics:i}=e,a=n??!0,[r,...o]=i;if(!r)throw new DD({docsPath:hF});const l=1===t.length?t[0]:t.find((e=>"event"===e.type&&r===JI(fD(e))));if(!l||!("name"in l)||"event"!==l.type)throw new ID(r,{docsPath:hF});const{name:c,inputs:h}=l,u=null==h?void 0:h.some((e=>!("name"in e&&e.name)));let d=u?[]:{};const p=h.filter((e=>"indexed"in e&&e.indexed));for(let g=0;g<p.length;g++){const e=p[g],t=o[g];if(!t)throw new GD({abiItem:l,param:e});d[u?g:e.name||g]=dF({param:e,value:t})}const f=h.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(s&&"0x"!==s)try{const e=V_(f,s);if(e)if(u)d=[...d,...e];else for(let t=0;t<f.length;t++)d[f[t].name]=e[t]}catch(m){if(a){if(m instanceof ED||m instanceof F_)throw new UD({abiItem:l,data:s,params:f,size:yD(s)});throw m}}else if(a)throw new UD({abiItem:l,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(d).length>0?d:void 0}}function dF({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(V_([e],t)||[])[0]}function pF(e){const{abi:t,args:s,logs:n,strict:i=!0}=e,a=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map((e=>{var n;try{const n=t.find((t=>"event"===t.type&&e.topics[0]===JI(t)));if(!n)return null;const r=uF({...e,abi:[n],strict:i});return a&&!a.includes(r.eventName)?null:function(e){const{args:t,inputs:s,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function i(e,t,s){try{return"address"===e.type?cF(t,s):"string"===e.type||"bytes"===e.type?XI(fI(t))===s:t===s}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every(((e,n)=>{if(null==e)return!0;const a=s[n];return!!a&&(Array.isArray(e)?e:[e]).some((e=>i(a,e,t[n])))})):"object"==typeof t&&!Array.isArray(t)&&"object"==typeof n&&!Array.isArray(n)&&Object.entries(n).every((([e,n])=>{if(null==n)return!0;const a=s.find((t=>t.name===e));return!!a&&(Array.isArray(n)?n:[n]).some((s=>i(a,s,t[e])))}))}({args:r.args,inputs:n.inputs,matchArgs:s})?{...r,...e}:null}catch(r){let t,s;if(r instanceof ID)return null;if(r instanceof UD||r instanceof GD){if(i)return null;t=r.abiItem.name,s=null==(n=r.abiItem.inputs)?void 0:n.some((e=>!("name"in e&&e.name)))}return{...e,args:s?[]:{},eventName:t}}})).filter(Boolean)}function fF(e,{args:t,eventName:s}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...s?{args:t,eventName:s}:{}}}async function mF(e,{address:t,blockHash:s,fromBlock:n,toBlock:i,event:a,events:r,args:o,strict:l}={}){const c=l??!1,h=r??(a?[a]:void 0);let u,d=[];h&&(d=[h.flatMap((e=>P_({abi:[e],eventName:e.name,args:r?void 0:o})))],a&&(d=d[0])),u=s?await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:s}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:"bigint"==typeof n?hI(n):n,toBlock:"bigint"==typeof i?hI(i):i}]});const p=u.map((e=>fF(e)));return h?pF({abi:h,args:o,logs:p,strict:c}):p}async function gF(e,t){const{abi:s,address:n,args:i,blockHash:a,eventName:r,fromBlock:o,toBlock:l,strict:c}=t,h=r?k_({abi:s,name:r}):void 0,u=h?void 0:s.filter((e=>"event"===e.type));return pD(e,mF,"getLogs")({address:n,args:i,blockHash:a,event:h,events:u,fromBlock:o,toBlock:l,strict:c})}const yF="/docs/contract/decodeFunctionResult";function bF(e){const{abi:t,args:s,functionName:n,data:i}=e;let a=t[0];if(n){const e=k_({abi:t,args:s,name:n});if(!e)throw new ND(n,{docsPath:yF});a=e}if("function"!==a.type)throw new ND(void 0,{docsPath:yF});if(!a.outputs)throw new LD(a.name,{docsPath:yF});const r=V_(a.outputs,i);return r&&r.length>1?r:r&&1===r.length?r[0]:void 0}const vF=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],wF=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],xF=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],kF=[...xF,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],AF=[...xF,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],EF=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],SF=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],PF=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],TF="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe";class BF extends wD{constructor({blockNumber:e,chain:t,contract:s}){super(`Chain "${t.name}" does not support contract "${s.name}".`,{metaMessages:["This could be due to any of the following:",...e&&s.blockCreated&&s.blockCreated>e?[`- The contract "${s.name}" was not deployed until block ${s.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${s.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class CF extends wD{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class MF extends wD{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n"),{name:"ChainNotFoundError"})}}class RF extends wD{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const DF="/docs/contract/encodeDeployData";function IF(e){const{abi:t,args:s,bytecode:n}=e;if(!s||0===s.length)return n;const i=t.find((e=>"type"in e&&"constructor"===e.type));if(!i)throw new kD({docsPath:DF});if(!("inputs"in i))throw new AD({docsPath:DF});if(!i.inputs||0===i.inputs.length)throw new AD({docsPath:DF});return c_([n,y_(i.inputs,s)])}function _F({blockNumber:e,chain:t,contract:s}){var n;const i=null==(n=null==t?void 0:t.contracts)?void 0:n[s];if(!i)throw new BF({chain:t,contract:{name:s}});if(e&&i.blockCreated&&i.blockCreated>e)throw new BF({blockNumber:e,chain:t,contract:{name:s,blockCreated:i.blockCreated}});return i.address}function NF(e,{docsPath:t,...s}){const n=(()=>{const t=xL(e,s);return t instanceof wL?e:t})();return new fN(n,{docsPath:t,...s})}function LF(){let e=()=>{},t=()=>{};return{promise:new Promise(((s,n)=>{e=s,t=n})),resolve:e,reject:t}}const FF=new Map;function OF({fn:e,id:t,shouldSplitBatch:s,wait:n=0,sort:i}){const a=async()=>{const t=o();r();const s=t.map((({args:e})=>e));0!==s.length&&e(s).then((e=>{i&&Array.isArray(e)&&e.sort(i);for(let s=0;s<t.length;s++){const{resolve:n}=t[s];null==n||n([e[s],e])}})).catch((e=>{for(let s=0;s<t.length;s++){const{reject:n}=t[s];null==n||n(e)}}))},r=()=>FF.delete(t),o=()=>FF.get(t)||[],l=e=>FF.set(t,[...o(),e]);return{flush:r,async schedule(e){const{promise:t,resolve:i,reject:r}=LF();return(null==s?void 0:s([...o().map((({args:e})=>e)),e]))&&a(),o().length>0?(l({args:e,resolve:i,reject:r}),t):(l({args:e,resolve:i,reject:r}),setTimeout(a,n),t)}}}async function jF(e,t){var s,n,i,a;const{account:r=e.account,batch:o=Boolean(null==(s=e.batch)?void 0:s.multicall),blockNumber:l,blockTag:c="latest",accessList:h,blobs:u,code:d,data:p,factory:f,factoryData:m,gas:g,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,to:k,value:A,stateOverride:E,...S}=t,P=r?M_(r):void 0;if(d&&(f||m))throw new wD("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(d&&k)throw new wD("Cannot provide both `code` & `to` as parameters.");const T=d&&p,B=f&&m&&k&&p,C=T||B,M=T?function(e){const{code:t,data:s}=e;return IF({abi:dD(["constructor(bytes, bytes)"]),bytecode:TF,args:[t,s]})}({code:d,data:p}):B?function(e){const{data:t,factory:s,factoryData:n,to:i}=e;return IF({abi:dD(["constructor(address, bytes, address, bytes)"]),bytecode:"0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",args:[i,t,s,n]})}({data:p,factory:f,factoryData:m,to:k}):p;try{CL(t);const s=(l?hI(l):void 0)||c,r=TL(E),d=null==(a=null==(i=null==(n=e.chain)?void 0:n.formatters)?void 0:i.transactionRequest)?void 0:a.format,p=(d||EL)({...kL(S,{format:d}),from:null==P?void 0:P.address,accessList:h,blobs:u,data:M,gas:g,gasPrice:y,maxFeePerBlobGas:b,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,to:C?void 0:k,value:A});if(o&&function({request:e}){const{data:t,to:s,...n}=e;return!(!t||t.startsWith("0x82ad56cb")||!s||Object.values(n).filter((e=>void 0!==e)).length>0)}({request:p})&&!r)try{return await async function(e,t){var s;const{batchSize:n=1024,wait:i=0}="object"==typeof(null==(s=e.batch)?void 0:s.multicall)?e.batch.multicall:{},{blockNumber:a,blockTag:r="latest",data:o,multicallAddress:l,to:c}=t;let h=l;if(!h){if(!e.chain)throw new RF;h=_F({blockNumber:a,chain:e.chain,contract:"multicall3"})}const u=(a?hI(a):void 0)||r,{schedule:d}=OF({id:`${e.uid}.${u}`,wait:i,shouldSplitBatch:e=>e.reduce(((e,{data:t})=>e+(t.length-2)),0)>2*n,fn:async t=>{const s=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),n=D_({abi:vF,args:[s],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:n,to:h},u]});return bF({abi:vF,args:[s],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:p,success:f}]=await d({data:o,to:c});if(!f)throw new vN({data:p});return"0x"===p?{data:void 0}:{data:p}}(e,{...p,blockNumber:l,blockTag:c})}catch(R){if(!(R instanceof RF||R instanceof BF))throw R}const f=await e.request({method:"eth_call",params:r?[p,s,r]:[p,s]});return"0x"===f?{data:void 0}:{data:f}}catch(R){const s=function(e){var t;if(!(e instanceof wD))return;const s=e.walk();return"object"==typeof(null==s?void 0:s.data)?null==(t=s.data)?void 0:t.data:s.data}(R),{offchainLookup:n,offchainLookupSignature:i}=await eL((async()=>{const{offchainLookup:e,offchainLookupSignature:t}=await import("./ccip-wN7DKlIT.js");return{offchainLookup:e,offchainLookupSignature:t}}),__vite__mapDeps([0,1]),import.meta.url);if(!1!==e.ccipRead&&(null==s?void 0:s.slice(0,10))===i&&k)return{data:await n(e,{data:s,to:k})};if(C&&"0x101bb98d"===(null==s?void 0:s.slice(0,10)))throw new bN({factory:f});throw NF(R,{...t,account:P,chain:e.chain})}}async function UF(e,t){const{abi:s,address:n,args:i,functionName:a,...r}=t,o=D_({abi:s,args:i,functionName:a});try{const{data:t}=await pD(e,jF,"call")({...r,data:o,to:n});return bF({abi:s,args:i,functionName:a,data:t||"0x"})}catch(l){throw YN(l,{abi:s,address:n,args:i,docsPath:"/docs/contract/readContract",functionName:a})}}async function GF(e,t){const{abi:s,address:n,args:i,dataSuffix:a,functionName:r,...o}=t,l=o.account?M_(o.account):e.account,c=D_({abi:s,args:i,functionName:r});try{const{data:h}=await pD(e,jF,"call")({batch:!1,data:`${c}${a?a.replace("0x",""):""}`,to:n,...o,account:l});return{result:bF({abi:s,args:i,functionName:r,data:h||"0x"}),request:{abi:s.filter((e=>"name"in e&&e.name===t.functionName)),address:n,args:i,dataSuffix:a,functionName:r,...o,account:l}}}catch(h){throw YN(h,{abi:s,address:n,args:i,docsPath:"/docs/contract/simulateContract",functionName:r,sender:null==l?void 0:l.address})}}const HF=new Map,zF=new Map;let VF=0;function WF(e,t,s){const n=++VF,i=()=>HF.get(e)||[],a=()=>{const t=i();if(!t.some((e=>e.id===n)))return;const s=zF.get(e);1===t.length&&s&&s(),(()=>{const t=i();HF.set(e,t.filter((e=>e.id!==n)))})()},r=i();if(HF.set(e,[...r,{id:n,fns:t}]),r&&r.length>0)return a;const o={};for(const c in t)o[c]=(...e)=>{var t,s;const n=i();if(0!==n.length)for(const i of n)null==(s=(t=i.fns)[c])||s.call(t,...e)};const l=s(o);return"function"==typeof l&&zF.set(e,l),a}async function $F(e){return new Promise((t=>setTimeout(t,e)))}function qF(e,{emitOnBegin:t,initialWaitTime:s,interval:n}){let i=!0;const a=()=>i=!1;return(async()=>{let r;t&&(r=await e({unpoll:a}));const o=await(null==s?void 0:s(r))??n;await $F(o);const l=async()=>{i&&(await e({unpoll:a}),await $F(n),l())};l()})(),a}const KF=new Map,QF=new Map;async function ZF(e,{cacheTime:t=e.cacheTime}={}){const s=await async function(e,{cacheKey:t,cacheTime:s=Number.POSITIVE_INFINITY}){const n=function(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:s=>t.set(e,s)}),s=t(e,KF),n=t(e,QF);return{clear:()=>{s.clear(),n.clear()},promise:s,response:n}}(t),i=n.response.get();if(i&&s>0&&(new Date).getTime()-i.created.getTime()<s)return i.data;let a=n.promise.get();a||(a=e(),n.promise.set(a));try{const e=await a;return n.response.set({created:new Date,data:e}),e}finally{n.promise.clear()}}((()=>e.request({method:"eth_blockNumber"})),{cacheKey:(n=e.uid,`blockNumber.${n}`),cacheTime:t});var n;return BigInt(s)}async function XF(e,{filter:t}){const s="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof n[0])return n;const i=n.map((e=>fF(e)));return"abi"in t&&t.abi?pF({abi:t.abi,logs:i,strict:s}):i}async function YF(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function JF(e,t){const{abi:s,address:n,args:i,batch:a=!0,eventName:r,fromBlock:o,onError:l,onLogs:c,poll:h,pollingInterval:u=e.pollingInterval,strict:d}=t;return(void 0!==h?h:"bigint"==typeof o||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{const t=d??!1;return WF(Z_(["watchContractEvent",n,i,a,e.uid,r,u,t,o]),{onLogs:c,onError:l},(l=>{let c,h;void 0!==o&&(c=o-1n);let d=!1;const p=qF((async()=>{var u;if(d)try{let o;if(h)o=await pD(e,XF,"getFilterChanges")({filter:h});else{const a=await pD(e,ZF,"getBlockNumber")({});o=c&&c<a?await pD(e,gF,"getContractEvents")({abi:s,address:n,args:i,eventName:r,fromBlock:c+1n,toBlock:a,strict:t}):[],c=a}if(0===o.length)return;if(a)l.onLogs(o);else for(const e of o)l.onLogs([e])}catch(p){h&&p instanceof MN&&(d=!1),null==(u=l.onError)||u.call(l,p)}else{try{h=await pD(e,C_,"createContractEventFilter")({abi:s,address:n,args:i,eventName:r,strict:t,fromBlock:o})}catch{}d=!0}}),{emitOnBegin:!0,interval:u});return async()=>{h&&await pD(e,YF,"uninstallFilter")({filter:h}),p()}}))})():(()=>{const t=d??!1,o=Z_(["watchContractEvent",n,i,a,e.uid,r,u,t]);let h=!0,p=()=>h=!1;return WF(o,{onLogs:c,onError:l},(t=>((async()=>{try{const a=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),o=r?P_({abi:s,eventName:r,args:i}):[],{unsubscribe:l}=await a.subscribe({params:["logs",{address:n,topics:o}],onData(e){var n;if(!h)return;const i=e.result;try{const{eventName:e,args:n}=uF({abi:s,data:i.data,topics:i.topics,strict:d}),a=fF(i,{args:n,eventName:e});t.onLogs([a])}catch(a){let e,s;if(a instanceof UD||a instanceof GD){if(d)return;e=a.abiItem.name,s=null==(n=a.abiItem.inputs)?void 0:n.some((e=>!("name"in e&&e.name)))}const r=fF(i,{args:s?[]:{},eventName:e});t.onLogs([r])}},onError(e){var s;null==(s=t.onError)||s.call(t,e)}});p=l,h||p()}catch(a){null==l||l(a)}})(),()=>p())))})()}class eO extends wD{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class tO extends wD{constructor({docsPath:e,metaMessages:t,type:s}){super(`Account type "${s}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}function sO({chain:e,currentChainId:t}){if(!e)throw new MF;if(t!==e.id)throw new CF({chain:e,currentChainId:t})}async function nO(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const iO=new t_(128);async function aO(e,t){var s,n,i,a;const{account:r=e.account,chain:o=e.chain,accessList:l,authorizationList:c,blobs:h,data:u,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,value:b,...v}=t;if(void 0===r)throw new eO({docsPath:"/docs/actions/wallet/sendTransaction"});const w=r?M_(r):null;try{CL(t);const r=await(async()=>t.to?t.to:null!==t.to&&c&&c.length>0?await oL({authorization:c[0]}).catch((()=>{throw new wD("`to` is required. Could not infer from `authorizationList`.")})):void 0)();if("json-rpc"===(null==w?void 0:w.type)||null===w){let t;null!==o&&(t=await pD(e,sF,"getChainId")({}),sO({currentChainId:t,chain:o}));const a=null==(i=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:i.format,x=(a||EL)({...kL(v,{format:a}),accessList:l,authorizationList:c,blobs:h,chainId:t,data:u,from:null==w?void 0:w.address,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,to:r,value:b}),k=iO.get(e.uid),A=k?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:A,params:[x]},{retryCount:0})}catch(RV){if(!1===k)throw RV;const s=RV;if("InvalidInputRpcError"===s.name||"InvalidParamsRpcError"===s.name||"MethodNotFoundRpcError"===s.name||"MethodNotSupportedRpcError"===s.name)return await e.request({method:"wallet_sendTransaction",params:[x]},{retryCount:0}).then((t=>(iO.set(e.uid,!0),t))).catch((t=>{const n=t;if("MethodNotFoundRpcError"===n.name||"MethodNotSupportedRpcError"===n.name)throw iO.set(e.uid,!1),s;throw n}));throw s}}if("local"===(null==w?void 0:w.type)){const t=await pD(e,aF,"prepareTransactionRequest")({account:w,accessList:l,authorizationList:c,blobs:h,chain:o,data:u,gas:d,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:g,nonce:y,nonceManager:w.nonceManager,parameters:[...nF,"sidecars"],value:b,...v,to:r}),s=null==(a=null==o?void 0:o.serializers)?void 0:a.transaction,n=await w.signTransaction(t,{serializer:s});return await pD(e,nO,"sendRawTransaction")({serializedTransaction:n})}if("smart"===(null==w?void 0:w.type))throw new tO({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new tO({docsPath:"/docs/actions/wallet/sendTransaction",type:null==w?void 0:w.type})}catch(x){if(x instanceof tO)throw x;throw function(e,{docsPath:t,...s}){const n=(()=>{const t=xL(e,s);return t instanceof wL?e:t})();return new cN(n,{docsPath:t,...s})}(x,{...t,account:w,chain:t.chain||void 0})}}async function rO(e,t){const{abi:s,account:n=e.account,address:i,args:a,dataSuffix:r,functionName:o,...l}=t;if(void 0===n)throw new eO({docsPath:"/docs/contract/writeContract"});const c=n?M_(n):null,h=D_({abi:s,args:a,functionName:o});try{return await pD(e,aO,"sendTransaction")({data:`${h}${r?r.replace("0x",""):""}`,to:i,account:c,...l})}catch(u){throw YN(u,{abi:s,address:i,args:a,docsPath:"/docs/contract/writeContract",functionName:o,sender:null==c?void 0:c.address})}}function oO(e){const t=e.length&&Array.isArray(e[0]);return{args:t?e[0]:[],options:(t?e[1]:e[0])??{}}}function lO(e,t){let s=!1;return Array.isArray(e[0])?s=!0:1===e.length?s=t.inputs.some((e=>e.indexed)):2===e.length&&(s=!0),{args:s?e[0]:void 0,options:(s?e[1]:e[0])??{}}}let cO,hO=256;function uO(e=11){if(!cO||hO+e>512){cO="",hO=0;for(let e=0;e<256;e++)cO+=(256+256*Math.random()|0).toString(16).substring(1)}return cO.substring(hO,hO+++e)}function dO(e){const{batch:t,cacheTime:s=e.pollingInterval??4e3,ccipRead:n,key:i="base",name:a="Base Client",pollingInterval:r=4e3,type:o="base"}=e,l=e.chain,c=e.account?M_(e.account):void 0,{config:h,request:u,value:d}=e.transport({chain:l,pollingInterval:r}),p={account:c,batch:t,cacheTime:s,ccipRead:n,chain:l,key:i,name:a,pollingInterval:r,request:u,transport:{...h,...d},type:o,uid:uO()};return Object.assign(p,{extend:function e(t){return s=>{const n=s(t);for(const e in p)delete n[e];const i={...t,...n};return Object.assign(i,{extend:e(i)})}}(p)})}const pO=new t_(8192);function fO(e,{delay:t=100,retryCount:s=2,shouldRetry:n=()=>!0}={}){return new Promise(((i,a)=>{const r=async({count:o=0}={})=>{try{const t=await e();i(t)}catch(l){if(o<s&&await n({count:o,error:l}))return(async({error:e})=>{const s="function"==typeof t?t({count:o,error:e}):t;s&&await $F(s),r({count:o+1})})({error:l});a(l)}};r()}))}function mO(e,t={}){return async(s,n={})=>{var i;const{dedupe:a=!1,methods:r,retryDelay:o=150,retryCount:l=3,uid:c}={...t,...n},{method:h}=s;if(null==(i=null==r?void 0:r.exclude)?void 0:i.includes(h))throw new _N(new Error("method not supported"),{method:h});if((null==r?void 0:r.include)&&!r.include.includes(h))throw new _N(new Error("method not supported"),{method:h});return function(e,{enabled:t=!0,id:s}){if(!t||!s)return e();if(pO.get(s))return pO.get(s);const n=e().finally((()=>pO.delete(s)));return pO.set(s,n),n}((()=>fO((async()=>{try{return await e(s)}catch(t){const e=t;switch(e.code){case SN.code:throw new SN(e);case PN.code:throw new PN(e);case TN.code:throw new TN(e,{method:s.method});case BN.code:throw new BN(e);case CN.code:throw new CN(e);case MN.code:throw new MN(e);case RN.code:throw new RN(e);case DN.code:throw new DN(e);case IN.code:throw new IN(e);case _N.code:throw new _N(e,{method:s.method});case NN.code:throw new NN(e);case LN.code:throw new LN(e);case FN.code:throw new FN(e);case ON.code:throw new ON(e);case jN.code:throw new jN(e);case UN.code:throw new UN(e);case GN.code:throw new GN(e);case HN.code:throw new HN(e);case zN.code:throw new zN(e);case VN.code:throw new VN(e);case WN.code:throw new WN(e);case $N.code:throw new $N(e);case qN.code:throw new qN(e);case KN.code:throw new KN(e);case QN.code:throw new QN(e);case 5e3:throw new FN(e);default:if(t instanceof wD)throw t;throw new ZN(e)}}}),{delay:({count:e,error:t})=>{var s;if(t&&t instanceof wN){const e=null==(s=null==t?void 0:t.headers)?void 0:s.get("Retry-After");if(null==e?void 0:e.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*o},retryCount:l,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===NN.code||e.code===CN.code:!(e instanceof wN&&e.status)||(403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status)}(e)})),{enabled:a,id:a?dI(`${c}.${Z_(s)}`):void 0})}}function gO({key:e,methods:t,name:s,request:n,retryCount:i=3,retryDelay:a=150,timeout:r,type:o},l){return{config:{key:e,methods:t,name:s,request:n,retryCount:i,retryDelay:a,timeout:r,type:o},request:mO(n,{methods:t,retryCount:i,retryDelay:a,uid:uO()}),value:l}}function yO(e,t={}){const{key:s="custom",methods:n,name:i="Custom Provider",retryDelay:a}=t;return({retryCount:r})=>gO({key:s,methods:n,name:i,request:e.request.bind(e),retryCount:t.retryCount??r,retryDelay:a,type:"custom"})}class bO extends wD{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function vO(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const wO=vO();function xO(e,t={}){const{batch:s,fetchOptions:n,key:i="http",methods:a,name:r="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:l,retryDelay:c,raw:h}=t;return({chain:e,retryCount:u,timeout:d})=>{const{batchSize:p=1e3,wait:f=0}="object"==typeof s?s:{},m=t.retryCount??u,g=d??t.timeout??1e4,y=null==e?void 0:e.rpcUrls.default.http[0];if(!y)throw new bO;const b=function(e,t={}){return{async request(s){var n;const{body:i,onRequest:a=t.onRequest,onResponse:r=t.onResponse,timeout:o=t.timeout??1e4}=s,l={...t.fetchOptions??{},...s.fetchOptions??{}},{headers:c,method:h,signal:u}=l;try{const t=await function(e,{errorInstance:t=new Error("timed out"),timeout:s,signal:n}){return new Promise(((i,a)=>{(async()=>{let r;try{const t=new AbortController;s>0&&(r=setTimeout((()=>{n&&t.abort()}),s)),i(await e({signal:(null==t?void 0:t.signal)||null}))}catch(o){"AbortError"===(null==o?void 0:o.name)&&a(t),a(o)}finally{clearTimeout(r)}})()}))}((async({signal:t})=>{const s={...l,body:Array.isArray(i)?Z_(i.map((e=>({jsonrpc:"2.0",id:e.id??wO.take(),...e})))):Z_({jsonrpc:"2.0",id:i.id??wO.take(),...i}),headers:{"Content-Type":"application/json",...c},method:h||"POST",signal:u||(o>0?t:null)},n=new Request(e,s),r=await(null==a?void 0:a(n,s))??{...s,url:e};return await fetch(r.url??e,r)}),{errorInstance:new kN({body:i,url:e}),timeout:o,signal:!0});let s;if(r&&await r(t),null==(n=t.headers.get("Content-Type"))?void 0:n.startsWith("application/json"))s=await t.json();else{s=await t.text();try{s=JSON.parse(s||"{}")}catch(d){if(t.ok)throw d;s={error:s}}}if(!t.ok)throw new wN({body:i,details:Z_(s.error)||t.statusText,headers:t.headers,status:t.status,url:e});return s}catch(d){if(d instanceof wN)throw d;if(d instanceof kN)throw d;throw new wN({body:i,cause:d,url:e})}}}}(y,{fetchOptions:n,onRequest:o,onResponse:l,timeout:g});return gO({key:i,methods:a,name:r,async request({method:e,params:t}){const n={method:e,params:t},{schedule:i}=OF({id:y,wait:f,shouldSplitBatch:e=>e.length>p,fn:e=>b.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:a,result:r}]=await(async e=>s?i(e):[await b.request({body:e})])(n);if(h)return{error:a,result:r};if(a)throw new xN({body:n,error:a,url:y});return r},retryCount:m,retryDelay:c,timeout:g,type:"http"},{fetchOptions:n,url:y})}}function kO(e,t){var s,n,i,a,r,o;if(!(e instanceof wD))return!1;const l=e.walk((e=>e instanceof gN));return l instanceof gN&&("ResolverNotFound"===(null==(s=l.data)?void 0:s.errorName)||"ResolverWildcardNotSupported"===(null==(n=l.data)?void 0:n.errorName)||"ResolverNotContract"===(null==(i=l.data)?void 0:i.errorName)||"ResolverError"===(null==(a=l.data)?void 0:a.errorName)||"HttpError"===(null==(r=l.data)?void 0:r.errorName)||!!(null==(o=l.reason)?void 0:o.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&l.reason===I_[50])}const AO="/docs/contract/encodeErrorResult";function EO(e){const{abi:t,errorName:s,args:n}=e;let i=t[0];if(s){const e=k_({abi:t,args:n,name:s});if(!e)throw new MD(s,{docsPath:AO});i=e}if("error"!==i.type)throw new MD(void 0,{docsPath:AO});const a=fD(i),r=x_(a);let o="0x";if(n&&n.length>0){if(!i.inputs)throw new CD(i.name,{docsPath:AO});o=y_(i.inputs,n)}return c_([r,o])}const SO="/docs/contract/encodeFunctionResult",PO="x-batch-gateway:true";async function TO(e){const{data:t,ccipRequest:s}=e,{args:[n]}=function(e){const{abi:t,data:s}=e,n=h_(s,0,4),i=t.find((e=>"function"===e.type&&n===x_(fD(e))));if(!i)throw new FD(n,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:i.name,args:"inputs"in i&&i.inputs&&i.inputs.length>0?V_(i.inputs,h_(s,4)):void 0}}({abi:wF,data:t}),i=[],a=[];return await Promise.all(n.map((async(e,t)=>{try{a[t]=await s(e),i[t]=!1}catch(r){i[t]=!0,a[t]="HttpRequestError"===(n=r).name&&n.status?EO({abi:wF,errorName:"HttpError",args:[n.status,n.shortMessage]}):EO({abi:[__],errorName:"Error",args:["shortMessage"in n?n.shortMessage:n.message]})}var n}))),function(e){const{abi:t,functionName:s,result:n}=e;let i=t[0];if(s){const e=k_({abi:t,name:s});if(!e)throw new ND(s,{docsPath:SO});i=e}if("function"!==i.type)throw new ND(void 0,{docsPath:SO});if(!i.outputs)throw new LD(i.name,{docsPath:SO});const a=(()=>{if(0===i.outputs.length)return[];if(1===i.outputs.length)return[n];if(Array.isArray(n))return n;throw new VD(n)})();return y_(i.outputs,a)}({abi:wF,functionName:"query",result:[i,a]})}function BO(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return gD(t)?t:null}function CO(e){let t=new Uint8Array(32).fill(0);if(!e)return cI(t);const s=e.split(".");for(let n=s.length-1;n>=0;n-=1){const e=BO(s[n]),i=e?fI(e):XI(bI(s[n]),"bytes");t=XI(l_([t,i]),"bytes")}return cI(t)}function MO(e){const t=new Uint8Array(32).fill(0);return e?BO(e)||XI(bI(e)):cI(t)}function RO(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const s=new Uint8Array(bI(t).byteLength+2);let n=0;const i=t.split(".");for(let a=0;a<i.length;a++){let e=bI(i[a]);e.byteLength>255&&(e=bI(`[${MO(i[a]).slice(2)}]`)),s[n]=e.length,s.set(e,n+1),n+=e.length+1}return s.byteLength!==n+1?s.slice(0,n+1):s}class DO extends wD{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class IO extends wD{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class _O extends wD{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class NO extends wD{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const LO=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,FO=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,OO=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jO=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;function UO(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function GO({uri:e,gatewayUrls:t}){const s=OO.test(e);if(s)return{uri:e,isOnChain:!0,isEncoded:s};const n=UO(null==t?void 0:t.ipfs,"https://ipfs.io"),i=UO(null==t?void 0:t.arweave,"https://arweave.net"),a=e.match(LO),{protocol:r,subpath:o,target:l,subtarget:c=""}=(null==a?void 0:a.groups)||{},h="ipns:/"===r||"ipns/"===o,u="ipfs:/"===r||"ipfs/"===o||FO.test(e);if(e.startsWith("http")&&!h&&!u){let s=e;return(null==t?void 0:t.arweave)&&(s=e.replace(/https:\/\/arweave.net/g,null==t?void 0:t.arweave)),{uri:s,isOnChain:!1,isEncoded:!1}}if((h||u)&&l)return{uri:`${n}/${h?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if("ar:/"===r&&l)return{uri:`${i}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(jO,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new _O({uri:e})}function HO(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new DO({data:e});return e.image||e.image_url||e.image_data}async function zO({gatewayUrls:e,uri:t}){const{uri:s,isOnChain:n}=GO({uri:t,gatewayUrls:e});if(n)return s;const i=await async function(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return null==e?void 0:e.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const s=new Image;s.onload=()=>{t(!0)},s.onerror=()=>{t(!1)},s.src=e}))}}(s);if(i)return s;throw new _O({uri:t})}async function VO(e,t){const{blockNumber:s,blockTag:n,key:i,name:a,gatewayUrls:r,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return _F({blockNumber:s,chain:l,contract:"ensUniversalResolver"})})(),h=null==l?void 0:l.ensTlds;if(h&&!h.some((e=>a.endsWith(e))))return null;try{const t={address:c,abi:kF,functionName:"resolve",args:[oI(RO(a)),D_({abi:EF,functionName:"text",args:[CO(a),i]}),r??[PO]],blockNumber:s,blockTag:n},o=pD(e,UF,"readContract"),l=await o(t);if("0x"===l[0])return null;const h=bF({abi:EF,functionName:"text",data:l[0]});return""===h?null:h}catch(u){if(o)throw u;if(kO(u,"resolve"))return null;throw u}}async function WO(e,t){var s,n,i;const{account:a=e.account,blockNumber:r,blockTag:o="latest",blobs:l,data:c,gas:h,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:f,to:m,value:g,...y}=t,b=a?M_(a):void 0;try{CL(t);const a=(r?hI(r):void 0)||o,v=null==(i=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionRequest)?void 0:i.format,w=(v||EL)({...kL(y,{format:v}),from:null==b?void 0:b.address,blobs:l,data:c,gas:h,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:p,maxPriorityFeePerGas:f,to:m,value:g}),x=await e.request({method:"eth_createAccessList",params:[w,a]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(v){throw NF(v,{...t,account:b,chain:e.chain})}}async function $O(e,{address:t,args:s,event:n,events:i,fromBlock:a,strict:r,toBlock:o}={}){const l=i??(n?[n]:void 0),c=B_(e,{method:"eth_newFilter"});let h=[];l&&(h=[l.flatMap((e=>P_({abi:[e],eventName:e.name,args:s})))],n&&(h=h[0]));const u=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof a?hI(a):a,toBlock:"bigint"==typeof o?hI(o):o,...h.length?{topics:h}:{}}]});return{abi:l,args:s,eventName:n?n.name:void 0,fromBlock:a,id:u,request:c(u),strict:Boolean(r),toBlock:o,type:"event"}}async function qO(e){const t=B_(e,{method:"eth_newPendingTransactionFilter"}),s=await e.request({method:"eth_newPendingTransactionFilter"});return{id:s,request:t(s),type:"transaction"}}async function KO(e,{address:t,blockNumber:s,blockTag:n="latest"}){const i=void 0!==s?hI(s):void 0,a=await e.request({method:"eth_getCode",params:[t,i||n]},{dedupe:Boolean(i)});if("0x"!==a)return a}class QO extends wD{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}const ZO=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function XO(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}class YO extends wD{constructor({domain:e}){super(`Invalid domain "${Z_(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class JO extends wD{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class ej extends wD{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function tj(e){const{domain:t={},message:s,primaryType:n}=e,i={EIP712Domain:lj({domain:t}),...e.types};oj({domain:t,message:s,primaryType:n,types:i});const a=["0x1901"];return t&&a.push(function({domain:e,types:t}){return sj({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:i})),"EIP712Domain"!==n&&a.push(sj({data:s,primaryType:n,types:i})),XI(l_(a))}function sj({data:e,primaryType:t,types:s}){return XI(nj({data:e,primaryType:t,types:s}))}function nj({data:e,primaryType:t,types:s}){const n=[{type:"bytes32"}],i=[ij({primaryType:t,types:s})];for(const a of s[t]){const[t,r]=rj({types:s,name:a.name,type:a.type,value:e[a.name]});n.push(t),i.push(r)}return y_(n,i)}function ij({primaryType:e,types:t}){const s=oI(function({primaryType:e,types:t}){let s="";const n=aj({primaryType:e,types:t});n.delete(e);const i=[e,...Array.from(n).sort()];for(const a of i)s+=`${a}(${t[a].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return s}({primaryType:e,types:t}));return XI(s)}function aj({primaryType:e,types:t},s=new Set){const n=e.match(/^\w*/u),i=null==n?void 0:n[0];if(s.has(i)||void 0===t[i])return s;s.add(i);for(const a of t[i])aj({primaryType:a.type,types:t},s);return s}function rj({types:e,name:t,type:s,value:n}){if(void 0!==e[s])return[{type:"bytes32"},XI(nj({data:n,primaryType:s,types:e}))];if("bytes"===s)return[{type:"bytes32"},XI(n="0x"+((n.length%2?"0":"")+n.slice(2)))];if("string"===s)return[{type:"bytes32"},XI(oI(n))];if(s.lastIndexOf("]")===s.length-1){const i=s.slice(0,s.lastIndexOf("[")),a=n.map((s=>rj({name:t,type:i,types:e,value:s})));return[{type:"bytes32"},XI(y_(a.map((([e])=>e)),a.map((([,e])=>e))))]}return[{type:s},n]}function oj(e){const{domain:t,message:s,primaryType:n,types:i}=e,a=(e,t)=>{for(const s of e){const{name:e,type:n}=s,r=t[e],o=n.match(g_);if(o&&("number"==typeof r||"bigint"==typeof r)){const[e,t,s]=o;hI(r,{signed:"int"===t,size:Number.parseInt(s)/8})}if("address"===n&&"string"==typeof r&&!o_(r))throw new e_({address:r});const l=n.match(m_);if(l){const[e,t]=l;if(t&&yD(r)!==Number.parseInt(t))throw new jD({expectedSize:Number.parseInt(t),givenSize:yD(r)})}const c=i[n];c&&(cj(n),a(c,r))}};if(i.EIP712Domain&&t){if("object"!=typeof t)throw new YO({domain:t});a(i.EIP712Domain,t)}if("EIP712Domain"!==n){if(!i[n])throw new JO({primaryType:n,types:i});a(i[n],s)}}function lj({domain:e}){return["string"==typeof(null==e?void 0:e.name)&&{name:"name",type:"string"},(null==e?void 0:e.version)&&{name:"version",type:"string"},("number"==typeof(null==e?void 0:e.chainId)||"bigint"==typeof(null==e?void 0:e.chainId))&&{name:"chainId",type:"uint256"},(null==e?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==e?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function cj(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new ej({type:e})}const hj={"0x0":"reverted","0x1":"success"};function uj(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>fF(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?aI(e.transactionIndex):null,status:e.status?hj[e.status]:null,type:e.type?_L[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}function dj(e,t){return XI(function(e){const t="string"==typeof e?dI(e):"string"==typeof e.raw?e.raw:cI(e.raw);return l_([dI(`Ethereum Signed Message:\n${yD(t)}`),t])}(e),t)}const pj="0x6492649264926492649264926492649264926492649264926492649264926492";async function fj(e,{blockHash:t,blockNumber:s,blockTag:n,hash:i,index:a}){var r,o,l;const c=n||"latest",h=void 0!==s?hI(s):void 0;let u=null;if(u=i?await e.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):t?await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,hI(a)]},{dedupe:!0}):await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[h||c,hI(a)]},{dedupe:Boolean(h)}),!u)throw new hN({blockHash:t,blockNumber:s,blockTag:c,hash:i,index:a});return((null==(l=null==(o=null==(r=e.chain)?void 0:r.formatters)?void 0:o.transaction)?void 0:l.format)||NL)(u)}async function mj(e,{hash:t}){var s,n,i;const a=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!a)throw new uN({hash:t});return((null==(i=null==(n=null==(s=e.chain)?void 0:s.formatters)?void 0:n.transactionReceipt)?void 0:i.format)||uj)(a)}let gj=class e extends Error{constructor(t,s={}){const n=(()=>{var t;if(s.cause instanceof e){if(s.cause.details)return s.cause.details;if(s.cause.shortMessage)return s.cause.shortMessage}return(null==(t=s.cause)?void 0:t.message)?s.cause.message:s.details})(),i=s.cause instanceof e&&s.cause.docsPath||s.docsPath,a=`https://oxlib.sh${i??""}`;super([t||"An error occurred.",...s.metaMessages?["",...s.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${a}`:void 0]:[]].filter((e=>"string"==typeof e)).join("\n"),s.cause?{cause:s.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=s.cause,this.details=n,this.docs=a,this.docsPath=i,this.shortMessage=t}walk(e){return yj(this,e)}};function yj(e,t){return(null==t?void 0:t(e))?e:e&&"object"==typeof e&&"cause"in e&&e.cause?yj(e.cause,t):t?null:e}function bj(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function vj(e,t){if(Nj(e)>t)throw new jj({givenSize:Nj(e),maxSize:t})}function wj(e,t={}){const{dir:s,size:n=32}=t;if(0===n)return e;const i=e.replace("0x","");if(i.length>2*n)throw new Gj({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i["right"===s?"padEnd":"padStart"](2*n,"0")}`}const xj=new TextEncoder;function kj(e){return e.length}let Aj=class extends gj{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Ej=class extends gj{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Sj=new TextEncoder,Pj=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Tj(...e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function Bj(e,t={}){const s=`0x${Number(e)}`;return"number"==typeof t.size?(vj(s,t.size),Dj(s,t.size)):s}function Cj(e,t={}){let s="";for(let i=0;i<e.length;i++)s+=Pj[e[i]];const n=`0x${s}`;return"number"==typeof t.size?(vj(n,t.size),Ij(n,t.size)):n}function Mj(e,t={}){const{signed:s,size:n}=t,i=BigInt(e);let a;n?a=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const r="bigint"==typeof a&&s?-a-1n:0;if(a&&i>a||i<r){const t="bigint"==typeof e?"n":"";throw new Lj({max:a?`${a}${t}`:void 0,min:`${r}${t}`,signed:s,size:n,value:`${e}${t}`})}const o=`0x${(s&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?Dj(o,n):o}function Rj(e,t={}){return Cj(Sj.encode(e),t)}function Dj(e,t){return wj(e,{dir:"left",size:t})}function Ij(e,t){return wj(e,{dir:"right",size:t})}function _j(e,t,s,n={}){const{strict:i}=n;!function(e,t){if("number"==typeof t&&t>0&&t>Nj(e)-1)throw new Uj({offset:t,position:"start",size:Nj(e)})}(e,t);const a=`0x${e.replace("0x","").slice(2*(t??0),2*(s??e.length))}`;return i&&function(e,t,s){if("number"==typeof t&&"number"==typeof s&&Nj(e)!==s-t)throw new Uj({offset:s,position:"end",size:Nj(e)})}(a,t,s),a}function Nj(e){return Math.ceil((e.length-2)/2)}class Lj extends gj{constructor({max:e,min:t,signed:s,size:n,value:i}){super(`Number \`${i}\` is not in safe${n?` ${8*n}-bit`:""}${s?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Fj extends gj{constructor(e){super(`Value \`${"object"==typeof e?function(e){return JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"#__bigint":t),void 0)}(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Oj extends gj{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class jj extends gj{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Uj extends gj{constructor({offset:e,position:t,size:s}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${s}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Gj extends gj{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Hj(e){return{address:e.address,amount:Mj(e.amount),index:Mj(e.index),validatorIndex:Mj(e.validatorIndex)}}function zj(e){return{..."bigint"==typeof e.baseFeePerGas&&{baseFeePerGas:Mj(e.baseFeePerGas)},..."bigint"==typeof e.blobBaseFee&&{blobBaseFee:Mj(e.blobBaseFee)},..."string"==typeof e.feeRecipient&&{feeRecipient:e.feeRecipient},..."bigint"==typeof e.gasLimit&&{gasLimit:Mj(e.gasLimit)},..."bigint"==typeof e.number&&{number:Mj(e.number)},..."bigint"==typeof e.prevRandao&&{prevRandao:Mj(e.prevRandao)},..."bigint"==typeof e.time&&{time:Mj(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(Hj)}}}async function Vj(e,t){const{blockNumber:s,blockTag:n="latest",blocks:i,returnFullTransactions:a,traceTransfers:r,validation:o}=t;try{const t=[];for(const e of i){const s=e.blockOverrides?zj(e.blockOverrides):void 0,n=e.calls.map((e=>{const t=e,s=t.account?M_(t.account):void 0,n={...t,data:t.abi?D_(t):t.data,from:t.from??(null==s?void 0:s.address)};return CL(n),EL(n)})),i=e.stateOverrides?TL(e.stateOverrides):void 0;t.push({blockOverrides:s,calls:n,stateOverrides:i})}const l=(s?hI(s):void 0)||n;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:a,traceTransfers:r,validation:o},l]})).map(((e,t)=>({...LL(e),calls:e.calls.map(((e,s)=>{var n,a;const{abi:r,args:o,functionName:l,to:c}=i[t].calls[s],h=(null==(n=e.error)?void 0:n.data)??e.returnData,u=BigInt(e.gasUsed),d=null==(a=e.logs)?void 0:a.map((e=>fF(e))),p="0x1"===e.status?"success":"failure",f=r&&"success"===p&&"0x"!==h?bF({abi:r,data:h,functionName:l}):null,m=(()=>{var t;if("success"===p)return;let s;return"0x"===(null==(t=e.error)?void 0:t.data)?s=new SD:e.error&&(s=new vN(e.error)),s?YN(s,{abi:r??[],address:c,args:o,functionName:l??"<unknown>"}):void 0})();return{data:h,gasUsed:u,logs:d,status:p,..."success"===p?{result:f}:{error:m}}}))})))}catch(RV){const t=RV,s=xL(t,{});if(s instanceof wL)throw t;throw s}}class Wj extends Error{constructor(e,t={}){var s;const n=t.cause instanceof Wj?t.cause.details:(null==(s=t.cause)?void 0:s.message)?t.cause.message:t.details,i=t.cause instanceof Wj&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...n?[`Details: ${n}`]:[],"Version: abitype@1.0.8"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}}function $j(e,t){const s=e.exec(t);return null==s?void 0:s.groups}const qj=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Kj=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Qj=/^\(.+?\).*?$/,Zj=/^tuple(?<array>(\[(\d*)\])*)$/;function Xj(e){let t=e.type;if(Zj.test(e.type)&&"components"in e){t="(";const s=e.components.length;for(let i=0;i<s;i++)t+=Xj(e.components[i]),i<s-1&&(t+=", ");const n=$j(Zj,e.type);return t+=`)${(null==n?void 0:n.array)??""}`,Xj({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Yj(e){let t="";const s=e.length;for(let n=0;n<s;n++)t+=Xj(e[n]),n!==s-1&&(t+=", ");return t}function Jj(e){var t;return"function"===e.type?`function ${e.name}(${Yj(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${(null==(t=e.outputs)?void 0:t.length)?` returns (${Yj(e.outputs)})`:""}`:"event"===e.type?`event ${e.name}(${Yj(e.inputs)})`:"error"===e.type?`error ${e.name}(${Yj(e.inputs)})`:"constructor"===e.type?`constructor(${Yj(e.inputs)})${"payable"===e.stateMutability?" payable":""}`:"fallback"===e.type?"fallback() external"+("payable"===e.stateMutability?" payable":""):"receive() external payable"}const eU=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,tU=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/,sU=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/,nU=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function iU(e){return nU.test(e)}function aU(e){return $j(nU,e)}const rU=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,oU=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/,lU=/^receive\(\) external payable$/,cU=new Set(["indexed"]),hU=new Set(["calldata","memory","storage"]);class uU extends Wj{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class dU extends Wj{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class pU extends Wj{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class fU extends Wj{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class mU extends Wj{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class gU extends Wj{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class yU extends Wj{constructor({param:e,type:t,modifier:s}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${s}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${s}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class bU extends Wj{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class vU extends Wj{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class wU extends Wj{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class xU extends Wj{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class kU extends Wj{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class AU extends Wj{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}const EU=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function SU(e,t={}){if(function(e){return sU.test(e)}(e))return function(e,t={}){const s=function(e){return $j(sU,e)}(e);if(!s)throw new vU({signature:e,type:"function"});const n=MU(s.parameters),i=[],a=n.length;for(let o=0;o<a;o++)i.push(CU(n[o],{modifiers:hU,structs:t,type:"function"}));const r=[];if(s.returns){const e=MU(s.returns),n=e.length;for(let s=0;s<n;s++)r.push(CU(e[s],{modifiers:hU,structs:t,type:"function"}))}return{name:s.name,type:"function",stateMutability:s.stateMutability??"nonpayable",inputs:i,outputs:r}}(e,t);if(function(e){return tU.test(e)}(e))return function(e,t={}){const s=function(e){return $j(tU,e)}(e);if(!s)throw new vU({signature:e,type:"event"});const n=MU(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(CU(n[r],{modifiers:cU,structs:t,type:"event"}));return{name:s.name,type:"event",inputs:i}}(e,t);if(function(e){return eU.test(e)}(e))return function(e,t={}){const s=function(e){return $j(eU,e)}(e);if(!s)throw new vU({signature:e,type:"error"});const n=MU(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(CU(n[r],{structs:t,type:"error"}));return{name:s.name,type:"error",inputs:i}}(e,t);if(function(e){return rU.test(e)}(e))return function(e,t={}){const s=function(e){return $j(rU,e)}(e);if(!s)throw new vU({signature:e,type:"constructor"});const n=MU(s.parameters),i=[],a=n.length;for(let r=0;r<a;r++)i.push(CU(n[r],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:s.stateMutability??"nonpayable",inputs:i}}(e,t);if(function(e){return oU.test(e)}(e))return function(e){const t=function(e){return $j(oU,e)}(e);if(!t)throw new vU({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(function(e){return lU.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new wU({signature:e})}const PU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,TU=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,BU=/^u?int$/;function CU(e,t){var s,n;const i=function(e,t,s){let n="";if(s)for(const i of Object.entries(s)){if(!i)continue;let e="";for(const t of i[1])e+=`[${t.type}${t.name?`:${t.name}`:""}]`;n+=`(${i[0]}{${e}})`}return t?`${t}:${e}${n}`:e}(e,null==t?void 0:t.type,null==t?void 0:t.structs);if(EU.has(i))return EU.get(i);const a=Qj.test(e),r=$j(a?TU:PU,e);if(!r)throw new fU({param:e});if(r.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||qj.test(e)||Kj.test(e)||DU.test(e)}(r.name))throw new mU({param:e,name:r.name});const o=r.name?{name:r.name}:{},l="indexed"===r.modifier?{indexed:!0}:{},c=(null==t?void 0:t.structs)??{};let h,u={};if(a){h="tuple";const e=MU(r.type),t=[],s=e.length;for(let n=0;n<s;n++)t.push(CU(e[n],{structs:c}));u={components:t}}else if(r.type in c)h="tuple",u={components:c[r.type]};else if(BU.test(r.type))h=`${r.type}256`;else if(h=r.type,"struct"!==(null==t?void 0:t.type)&&!RU(h))throw new pU({type:h});if(r.modifier){if(!(null==(n=null==(s=null==t?void 0:t.modifiers)?void 0:s.has)?void 0:n.call(s,r.modifier)))throw new gU({param:e,type:null==t?void 0:t.type,modifier:r.modifier});if(hU.has(r.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(h,!!r.array))throw new yU({param:e,type:null==t?void 0:t.type,modifier:r.modifier})}const d={type:`${h}${r.array??""}`,...o,...l,...u};return EU.set(i,d),d}function MU(e,t=[],s="",n=0){const i=e.trim().length;for(let a=0;a<i;a++){const i=e[a],r=e.slice(a+1);switch(i){case",":return 0===n?MU(r,[...t,s.trim()]):MU(r,t,`${s}${i}`,n);case"(":return MU(r,t,`${s}${i}`,n+1);case")":return MU(r,t,`${s}${i}`,n-1);default:return MU(r,t,`${s}${i}`,n)}}if(""===s)return t;if(0!==n)throw new AU({current:s,depth:n});return t.push(s.trim()),t}function RU(e){return"address"===e||"bool"===e||"function"===e||"string"===e||qj.test(e)||Kj.test(e)}const DU=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/,IU=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function _U(e,t,s=new Set){const n=[],i=e.length;for(let a=0;a<i;a++){const i=e[a];if(Qj.test(i.type))n.push(i);else{const e=$j(IU,i.type);if(!(null==e?void 0:e.type))throw new bU({abiParameter:i});const{array:a,type:r}=e;if(r in t){if(s.has(r))throw new kU({type:r});n.push({...i,type:`tuple${a??""}`,components:_U(t[r]??[],t,new Set([...s,r]))})}else{if(!RU(r))throw new dU({type:r});n.push(i)}}}return n}function NU(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function LU(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function FU(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const OU=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function jU(e){for(let s=0;s<e.length;s++)e[s]=(t=e[s])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function UU(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),LU(e),e}"function"==typeof Uint8Array.from([]).toHex&&Uint8Array.fromHex;class GU{clone(){return this._cloneInto()}}const HU=BigInt(2**32-1),zU=BigInt(32);function VU(e,t=!1){return t?{h:Number(e&HU),l:Number(e>>zU&HU)}:{h:0|Number(e>>zU&HU),l:0|Number(e&HU)}}function WU(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:r}=VU(e[i],t);[s[i],n[i]]=[a,r]}return[s,n]}const $U=[],qU=[],KU=[],QU=BigInt(0),ZU=BigInt(1),XU=BigInt(2),YU=BigInt(7),JU=BigInt(256),eG=BigInt(113);for(let DV=0,IV=ZU,_V=1,NV=0;DV<24;DV++){[_V,NV]=[NV,(2*_V+3*NV)%5],$U.push(2*(5*NV+_V)),qU.push((DV+1)*(DV+2)/2%64);let e=QU;for(let t=0;t<7;t++)IV=(IV<<ZU^(IV>>YU)*eG)%JU,IV&XU&&(e^=ZU<<(ZU<<BigInt(t))-ZU);KU.push(e)}const[tG,sG]=WU(KU,!0),nG=(e,t,s)=>s>32?((e,t,s)=>t<<s-32|e>>>64-s)(e,t,s):((e,t,s)=>e<<s|t>>>32-s)(e,t,s),iG=(e,t,s)=>s>32?((e,t,s)=>e<<s-32|t>>>64-s)(e,t,s):((e,t,s)=>t<<s|e>>>32-s)(e,t,s);class aG extends GU{constructor(e,t,s,n=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=i,NU(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){OU||jU(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)s[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,a=s[i],r=s[i+1],o=nG(a,r,1)^s[t],l=iG(a,r,1)^s[t+1];for(let s=0;s<50;s+=10)e[n+s]^=o,e[n+s+1]^=l}let t=e[2],i=e[3];for(let s=0;s<24;s++){const n=qU[s],a=nG(t,i,n),r=iG(t,i,n),o=$U[s];t=e[o],i=e[o+1],e[o]=a,e[o+1]=r}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)s[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~s[(t+2)%10]&s[(t+4)%10]}e[0]^=tG[n],e[1]^=sG[n]}s.fill(0)}(this.state32,this.rounds),OU||jU(this.state32),this.posOut=0,this.pos=0}update(e){FU(this);const{blockLen:t,state:s}=this,n=(e=UU(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)s[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){FU(this,!1),LU(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,i=e.length;n<i;){this.posOut>=s&&this.keccak();const a=Math.min(s-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return NU(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(function(e,t){LU(e);const s=t.outputLen;if(e.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new aG(t,s,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=s,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}const rG=(()=>function(e){const t=t=>e().update(UU(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}((()=>new aG(136,1,32))))();function oG(e,t={}){const{as:s=("string"==typeof e?"Hex":"Bytes")}=t,n=rG(function(e){return e instanceof Uint8Array?e:"string"==typeof e?function(e,t={}){const{size:s}=t;let n=e;s&&(vj(e,s),n=Ij(e,s));let i=n.slice(2);i.length%2&&(i=`0${i}`);const a=i.length/2,r=new Uint8Array(a);for(let o=0,l=0;o<a;o++){const e=bj(i.charCodeAt(l++)),t=bj(i.charCodeAt(l++));if(void 0===e||void 0===t)throw new gj(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);r[o]=16*e+t}return r}(e):function(e){return e instanceof Uint8Array?e:new Uint8Array(e)}(e)}(e));return"Bytes"===s?n:Cj(n)}class lG extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const cG=new lG(8192),hG=/^0x[a-fA-F0-9]{40}$/;function uG(e,t={}){const{strict:s=!0}=t;if(!hG.test(e))throw new pG({address:e,cause:new fG});if(s){if(e.toLowerCase()===e)return;if(function(e){if(cG.has(e))return cG.get(e);uG(e,{strict:!1});const t=e.substring(2).toLowerCase(),s=oG(function(e,t={}){const{size:s}=t,n=xj.encode(e);return"number"==typeof s?(function(e,t){if(kj(e)>t)throw new Aj({givenSize:kj(e),maxSize:t})}(n,s),function(e,t){return function(e,t={}){const{dir:s,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new Ej({size:e.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let a=0;a<n;a++){const t="right"===s;i[t?a:n-a-1]=e[t?a:e.length-a-1]}return i}(e,{dir:"right",size:t})}(n,s)):n}(t),{as:"Bytes"}),n=t.split("");for(let a=0;a<40;a+=2)s[a>>1]>>4>=8&&n[a]&&(n[a]=n[a].toUpperCase()),(15&s[a>>1])>=8&&n[a+1]&&(n[a+1]=n[a+1].toUpperCase());const i=`0x${n.join("")}`;return cG.set(e,i),i}(e)!==e)throw new pG({address:e,cause:new mG})}}function dG(e,t={}){const{strict:s=!0}=t??{};try{return uG(e,{strict:s}),!0}catch{return!1}}class pG extends gj{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class fG extends gj{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class mG extends gj{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function gG(e){let t=!0,s="",n=0,i="",a=!1;for(let r=0;r<e.length;r++){const o=e[r];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t)if(0!==n)" "!==o?(i+=o,s+=o):","!==e[r-1]&&","!==s&&",("!==s&&(s="",t=!1);else if(" "===o&&["event","function","error",""].includes(i))i="";else if(i+=o,")"===o){a=!0;break}}if(!a)throw new gj("Unable to normalize signature.");return i}function yG(e,t){const s=typeof e,n=t.type;switch(n){case"address":return dG(e,{strict:!1});case"bool":return"boolean"===s;case"function":case"string":return"string"===s;default:return"tuple"===n&&"components"in t?Object.values(t.components).every(((t,s)=>yG(Object.values(e)[s],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?"number"===s||"bigint"===s:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?"string"===s||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)&&Array.isArray(e)&&e.every((e=>yG(e,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})))}}function bG(e,t,s){for(const n in e){const i=e[n],a=t[n];if("tuple"===i.type&&"tuple"===a.type&&"components"in i&&"components"in a)return bG(i.components,a.components,s[n]);const r=[i.type,a.type];if(r.includes("address")&&r.includes("bytes20")||(r.includes("address")&&r.includes("string")||r.includes("address")&&r.includes("bytes"))&&dG(s[n],{strict:!1}))return r}}function vG(e,t={}){const{prepare:s=!0}=t,n=Array.isArray(e)||"string"==typeof e?function(e){let t;if("string"==typeof e)t=SU(e);else{const s=function(e){const t={},s=e.length;for(let r=0;r<s;r++){const s=e[r];if(!iU(s))continue;const n=aU(s);if(!n)throw new vU({signature:s,type:"struct"});const i=n.properties.split(";"),a=[],o=i.length;for(let e=0;e<o;e++){const t=i[e].trim();if(!t)continue;const s=CU(t,{type:"struct"});a.push(s)}if(!a.length)throw new xU({signature:s});t[n.name]=a}const n={},i=Object.entries(t),a=i.length;for(let r=0;r<a;r++){const[e,s]=i[r];n[e]=_U(s,t)}return n}(e),n=e.length;for(let i=0;i<n;i++){const n=e[i];if(!iU(n)){t=SU(n,s);break}}}if(!t)throw new uU({signature:e});return t}(e):e;return{...n,...s?{hash:xG(n)}:{}}}function wG(e){return _j(xG(e),0,4)}function xG(e){return"string"!=typeof e&&"hash"in e&&e.hash?e.hash:oG(Rj(function(e){return gG("string"==typeof e?e:Jj(e))}(e)))}class kG extends gj{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${gG(Jj(e.abiItem))}\`, and`,`\`${t.type}\` in \`${gG(Jj(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class AG extends gj{constructor({name:e,data:t,type:s="item"}){super(`ABI ${s}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const EG=/^(.*)\[([0-9]*)\]$/,SG=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,PG=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function TG({checksumAddress:e=!1,parameter:t,value:s}){const n=t,i=function(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}(n.type);if(i){const[t,a]=i;return function(e,t){const{checksumAddress:s,length:n,parameter:i}=t,a=null===n;if(!Array.isArray(e))throw new _G(e);if(!a&&e.length!==n)throw new RG({expectedLength:n,givenLength:e.length,type:`${i.type}[${n}]`});let r=!1;const o=[];for(let l=0;l<e.length;l++){const t=TG({checksumAddress:s,parameter:i,value:e[l]});t.dynamic&&(r=!0),o.push(t)}if(a||r){const e=BG(o);if(a){const t=Mj(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Tj(t,e):t}}if(r)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:Tj(...o.map((({encoded:e})=>e)))}}(s,{checksumAddress:e,length:t,parameter:{...n,type:a}})}if("tuple"===n.type)return function(e,t){const{checksumAddress:s,parameter:n}=t;let i=!1;const a=[];for(let r=0;r<n.components.length;r++){const t=n.components[r],o=TG({checksumAddress:s,parameter:t,value:e[Array.isArray(e)?r:t.name]});a.push(o),o.dynamic&&(i=!0)}return{dynamic:i,encoded:i?BG(a):Tj(...a.map((({encoded:e})=>e)))}}(s,{checksumAddress:e,parameter:n});if("address"===n.type)return function(e,t){const{checksum:s=!1}=t;return uG(e,{strict:s}),{dynamic:!1,encoded:Dj(e.toLowerCase())}}(s,{checksum:e});if("bool"===n.type)return function(e){if("boolean"!=typeof e)throw new gj(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Dj(Bj(e))}}(s);if(n.type.startsWith("uint")||n.type.startsWith("int")){const e=n.type.startsWith("int"),[,,t="256"]=PG.exec(n.type)??[];return function(e,{signed:t,size:s}){if("number"==typeof s){const n=2n**(BigInt(s)-(t?1n:0n))-1n,i=t?-n-1n:0n;if(e>n||e<i)throw new Lj({max:n.toString(),min:i.toString(),signed:t,size:s/8,value:e.toString()})}return{dynamic:!1,encoded:Mj(e,{size:32,signed:t})}}(s,{signed:e,size:Number(t)})}if(n.type.startsWith("bytes"))return function(e,{type:t}){const[,s]=t.split("bytes"),n=Nj(e);if(!s){let t=e;return n%32!=0&&(t=Ij(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:Tj(Dj(Mj(n,{size:32})),t)}}if(n!==Number.parseInt(s))throw new DG({expectedSize:Number.parseInt(s),value:e});return{dynamic:!1,encoded:Ij(e)}}(s,{type:n.type});if("string"===n.type)return function(e){const t=Rj(e),s=Math.ceil(Nj(t)/32),n=[];for(let i=0;i<s;i++)n.push(Ij(_j(t,32*i,32*(i+1))));return{dynamic:!0,encoded:Tj(Ij(Mj(Nj(t),{size:32})),...n)}}(s);throw new NG(n.type)}function BG(e){let t=0;for(let a=0;a<e.length;a++){const{dynamic:s,encoded:n}=e[a];t+=s?32:Nj(n)}const s=[],n=[];let i=0;for(let a=0;a<e.length;a++){const{dynamic:r,encoded:o}=e[a];r?(s.push(Mj(t+i,{size:32})),n.push(o),i+=Nj(o)):s.push(o)}return Tj(...s,...n)}function CG(e,t,s){const{checksumAddress:n=!1}={};if(e.length!==t.length)throw new IG({expectedLength:e.length,givenLength:t.length});const i=function({checksumAddress:e,parameters:t,values:s}){const n=[];for(let i=0;i<t.length;i++)n.push(TG({checksumAddress:e,parameter:t[i],value:s[i]}));return n}({checksumAddress:n,parameters:e,values:t}),a=BG(i);return 0===a.length?"0x":a}function MG(e,t){if(e.length!==t.length)throw new IG({expectedLength:e.length,givenLength:t.length});const s=[];for(let n=0;n<e.length;n++){const i=e[n],a=t[n];s.push(MG.encode(i,a))}return Tj(...s)}(MG||(MG={})).encode=function e(t,s,n=!1){if("address"===t){const e=s;return uG(e),Dj(e.toLowerCase(),n?32:0)}if("string"===t)return Rj(s);if("bytes"===t)return s;if("bool"===t)return Dj(Bj(s),n?32:1);const i=t.match(PG);if(i){const[e,t,a="256"]=i,r=Number.parseInt(a)/8;return Mj(s,{size:n?32:r,signed:"int"===t})}const a=t.match(SG);if(a){const[e,t]=a;if(Number.parseInt(t)!==(s.length-2)/2)throw new DG({expectedSize:Number.parseInt(t),value:s});return Ij(s,n?32:0)}const r=t.match(EG);if(r&&Array.isArray(s)){const[t,n]=r,i=[];for(let a=0;a<s.length;a++)i.push(e(n,s[a],!0));return 0===i.length?"0x":Tj(...i)}throw new NG(t)};class RG extends gj{constructor({expectedLength:e,givenLength:t,type:s}){super(`Array length mismatch for type \`${s}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class DG extends gj{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Nj(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class IG extends gj{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class _G extends gj{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class NG extends gj{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function LG(e,...t){const{overloads:s}=e,n=s?function(e,t,s){const n=function(e,t,s){const{args:n=[],prepare:i=!0}=s??{},a=function(e,t={}){const{strict:s=!1}=t;try{return function(e,t={}){const{strict:s=!1}=t;if(!e)throw new Fj(e);if("string"!=typeof e)throw new Fj(e);if(s&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Oj(e);if(!e.startsWith("0x"))throw new Oj(e)}(e,{strict:s}),!0}catch{return!1}}(t,{strict:!1}),r=e.filter((e=>a?"function"===e.type||"error"===e.type?wG(e)===_j(t,0,4):"event"===e.type&&xG(e)===t:"name"in e&&e.name===t));if(0===r.length)throw new AG({name:t});if(1===r.length)return{...r[0],...i?{hash:xG(r[0])}:{}};let o;for(const c of r)if("inputs"in c)if(n&&0!==n.length){if(c.inputs&&0!==c.inputs.length&&c.inputs.length===n.length&&n.every(((e,t)=>{const s="inputs"in c&&c.inputs[t];return!!s&&yG(e,s)}))){if(o&&"inputs"in o&&o.inputs){const e=bG(c.inputs,o.inputs,n);if(e)throw new kG({abiItem:c,type:e[0]},{abiItem:o,type:e[1]})}o=c}}else if(!c.inputs||0===c.inputs.length)return{...c,...i?{hash:xG(c)}:{}};const l=(()=>{if(o)return o;const[e,...t]=r;return{...e,overloads:t}})();if(!l)throw new AG({name:t});return{...l,...i?{hash:xG(l)}:{}}}(e,t,s);if("function"!==n.type)throw new AG({name:t,type:"function"});return n}([e,...s],e.name,{args:t[0]}):e,i=wG(n),a=t.length>0?CG(n.inputs,t[0]):void 0;return a?Tj(i,a):i}function FG(e,t={}){return vG(e,t)}const OG="0x0000000000000000000000000000000000000000";class jG extends II{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");vI(e.outputLen),vI(e.blockLen)}(e);const s=DI(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(s.length>n?e.create().update(s).digest():s);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return xI(this),this.iHash.update(e),this}digestInto(e){xI(this),wI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:s,finished:n,destroyed:i,blockLen:a,outputLen:r}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=r,e.oHash=t._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const UG=(e,t,s)=>new jG(e,t).update(s).digest();UG.create=(e,t)=>new jG(e,t);const GG=BigInt(0),HG=BigInt(1),zG=BigInt(2);function VG(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function WG(e){if(!VG(e))throw new Error("Uint8Array expected")}function $G(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const qG=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function KG(e){WG(e);let t="";for(let s=0;s<e.length;s++)t+=qG[e[s]];return t}function QG(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function ZG(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?GG:BigInt("0x"+e)}function XG(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function YG(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,s=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(s);for(let i=0,a=0;i<s;i++,a+=2){const t=XG(e.charCodeAt(a)),s=XG(e.charCodeAt(a+1));if(void 0===t||void 0===s){const t=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+a)}n[i]=16*t+s}return n}function JG(e){return ZG(KG(e))}function eH(e){return WG(e),ZG(KG(Uint8Array.from(e).reverse()))}function tH(e,t){return YG(e.toString(16).padStart(2*t,"0"))}function sH(e,t){return tH(e,t).reverse()}function nH(e,t,s){let n;if("string"==typeof t)try{n=YG(t)}catch(RV){throw new Error(e+" must be hex string or Uint8Array, cause: "+RV)}else{if(!VG(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof s&&i!==s)throw new Error(e+" of length "+s+" expected, got "+i);return n}function iH(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];WG(s),t+=s.length}const s=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];s.set(t,i),i+=t.length}return s}const aH=e=>"bigint"==typeof e&&GG<=e;function rH(e,t,s){return aH(e)&&aH(t)&&aH(s)&&t<=e&&e<s}function oH(e,t,s,n){if(!rH(t,s,n))throw new Error("expected valid "+e+": "+s+" <= n < "+n+", got "+t)}function lH(e){let t;for(t=0;e>GG;e>>=HG,t+=1);return t}const cH=e=>(zG<<BigInt(e-1))-HG,hH=e=>new Uint8Array(e),uH=e=>Uint8Array.from(e);function dH(e,t,s){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof s)throw new Error("hmacFn must be a function");let n=hH(e),i=hH(e),a=0;const r=()=>{n.fill(1),i.fill(0),a=0},o=(...e)=>s(i,n,...e),l=(e=hH())=>{i=o(uH([0]),e),n=o(),0!==e.length&&(i=o(uH([1]),e),n=o())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const s=[];for(;e<t;){n=o();const t=n.slice();s.push(t),e+=n.length}return iH(...s)};return(e,t)=>{let s;for(r(),l(e);!(s=t(c()));)l();return r(),s}}const pH={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||VG(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function fH(e,t,s={}){const n=(t,s,n)=>{const i=pH[s];if("function"!=typeof i)throw new Error("invalid validator function");const a=e[t];if(!(n&&void 0===a||i(a,e)))throw new Error("param "+String(t)+" is invalid. Expected "+s+", got "+a)};for(const[i,a]of Object.entries(t))n(i,a,!1);for(const[i,a]of Object.entries(s))n(i,a,!0);return e}function mH(e){const t=new WeakMap;return(s,...n)=>{const i=t.get(s);if(void 0!==i)return i;const a=e(s,...n);return t.set(s,a),a}}const gH=Object.freeze(Object.defineProperty({__proto__:null,aInRange:oH,abool:$G,abytes:WG,bitGet:function(e,t){return e>>BigInt(t)&HG},bitLen:lH,bitMask:cH,bitSet:function(e,t,s){return e|(s?HG:GG)<<BigInt(t)},bytesToHex:KG,bytesToNumberBE:JG,bytesToNumberLE:eH,concatBytes:iH,createHmacDrbg:dH,ensureBytes:nH,equalBytes:function(e,t){if(e.length!==t.length)return!1;let s=0;for(let n=0;n<e.length;n++)s|=e[n]^t[n];return 0===s},hexToBytes:YG,hexToNumber:ZG,inRange:rH,isBytes:VG,memoized:mH,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:tH,numberToBytesLE:sH,numberToHexUnpadded:QG,numberToVarBytesBE:function(e){return YG(QG(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},validateObject:fH},Symbol.toStringTag,{value:"Module"})),yH=BigInt(0),bH=BigInt(1),vH=BigInt(2),wH=BigInt(3),xH=BigInt(4),kH=BigInt(5),AH=BigInt(8);function EH(e,t){const s=e%t;return s>=yH?s:t+s}function SH(e,t,s){if(t<yH)throw new Error("invalid exponent, negatives unsupported");if(s<=yH)throw new Error("invalid modulus");if(s===bH)return yH;let n=bH;for(;t>yH;)t&bH&&(n=n*e%s),e=e*e%s,t>>=bH;return n}function PH(e,t,s){let n=e;for(;t-- >yH;)n*=n,n%=s;return n}function TH(e,t){if(e===yH)throw new Error("invert: expected non-zero number");if(t<=yH)throw new Error("invert: expected positive modulus, got "+t);let s=EH(e,t),n=t,i=yH,a=bH;for(;s!==yH;){const e=n%s,t=i-a*(n/s);n=s,s=e,i=a,a=t}if(n!==bH)throw new Error("invert: does not exist");return EH(i,t)}const BH=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function CH(e,t){const s=void 0!==t?t:e.toString(2).length;return{nBitLength:s,nByteLength:Math.ceil(s/8)}}function MH(e,t,s=!1,n={}){if(e<=yH)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=CH(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let r;const o=Object.freeze({ORDER:e,isLE:s,BITS:i,BYTES:a,MASK:cH(i),ZERO:yH,ONE:bH,create:t=>EH(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return yH<=t&&t<e},is0:e=>e===yH,isOdd:e=>(e&bH)===bH,neg:t=>EH(-t,e),eql:(e,t)=>e===t,sqr:t=>EH(t*t,e),add:(t,s)=>EH(t+s,e),sub:(t,s)=>EH(t-s,e),mul:(t,s)=>EH(t*s,e),pow:(e,t)=>function(e,t,s){if(s<yH)throw new Error("invalid exponent, negatives unsupported");if(s===yH)return e.ONE;if(s===bH)return t;let n=e.ONE,i=t;for(;s>yH;)s&bH&&(n=e.mul(n,i)),i=e.sqr(i),s>>=bH;return n}(o,e,t),div:(t,s)=>EH(t*TH(s,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>TH(t,e),sqrt:n.sqrt||(t=>(r||(r=function(e){if(e%xH===wH){const t=(e+bH)/xH;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}if(e%AH===kH){const t=(e-kH)/AH;return function(e,s){const n=e.mul(s,vH),i=e.pow(n,t),a=e.mul(s,i),r=e.mul(e.mul(a,vH),i),o=e.mul(a,e.sub(r,e.ONE));if(!e.eql(e.sqr(o),s))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-bH)/vH;let s,n,i;for(s=e-bH,n=0;s%vH===yH;s/=vH,n++);for(i=vH;i<e&&SH(i,t,e)!==e-bH;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+bH)/xH;return function(e,s){const n=e.pow(s,t);if(!e.eql(e.sqr(n),s))throw new Error("Cannot find square root");return n}}const a=(s+bH)/vH;return function(e,r){if(e.pow(r,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,i),s),c=e.pow(r,a),h=e.pow(r,s);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(h);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const s=e.pow(l,bH<<BigInt(o-t-1));l=e.sqr(s),c=e.mul(c,s),h=e.mul(h,l),o=t}return c}}(e)}(e)),r(o,t))),invertBatch:e=>function(e,t){const s=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(s[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(s[i]=e.mul(t,s[i]),e.mul(t,n))),i),s}(o,e),cmov:(e,t,s)=>s?t:e,toBytes:e=>s?sH(e,a):tH(e,a),fromBytes:e=>{if(e.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);return s?eH(e):JG(e)}});return Object.freeze(o)}function RH(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function DH(e){const t=RH(e);return t+Math.ceil(t/2)}const IH=BigInt(0),_H=BigInt(1);function NH(e,t){const s=t.negate();return e?s:t}function LH(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function FH(e,t){return LH(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const OH=new WeakMap,jH=new WeakMap;function UH(e){return jH.get(e)||1}function GH(e){return fH(e.Fp,BH.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),fH(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...CH(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function HH(e){void 0!==e.lowS&&$G("lowS",e.lowS),void 0!==e.prehash&&$G("prehash",e.prehash)}const{bytesToNumberBE:zH,hexToBytes:VH}=gH;class WH extends Error{constructor(e=""){super(e)}}const $H={Err:WH,_tlv:{encode:(e,t)=>{const{Err:s}=$H;if(e<0||e>256)throw new s("tlv.encode: wrong tag");if(1&t.length)throw new s("tlv.encode: unpadded data");const n=t.length/2,i=QG(n);if(i.length/2&128)throw new s("tlv.encode: long form length too big");const a=n>127?QG(i.length/2|128):"";return QG(e)+a+i+t},decode(e,t){const{Err:s}=$H;let n=0;if(e<0||e>256)throw new s("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new s("tlv.decode: wrong tlv");const i=t[n++];let a=0;if(128&i){const e=127&i;if(!e)throw new s("tlv.decode(long): indefinite length not supported");if(e>4)throw new s("tlv.decode(long): byte length is too big");const r=t.subarray(n,n+e);if(r.length!==e)throw new s("tlv.decode: length bytes not complete");if(0===r[0])throw new s("tlv.decode(long): zero leftmost byte");for(const t of r)a=a<<8|t;if(n+=e,a<128)throw new s("tlv.decode(long): not minimal encoding")}else a=i;const r=t.subarray(n,n+a);if(r.length!==a)throw new s("tlv.decode: wrong value length");return{v:r,l:t.subarray(n+a)}}},_int:{encode(e){const{Err:t}=$H;if(e<qH)throw new t("integer: negative integers are not allowed");let s=QG(e);if(8&Number.parseInt(s[0],16)&&(s="00"+s),1&s.length)throw new t("unexpected DER parsing assertion: unpadded hex");return s},decode(e){const{Err:t}=$H;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return zH(e)}},toSig(e){const{Err:t,_int:s,_tlv:n}=$H,i="string"==typeof e?VH(e):e;WG(i);const{v:a,l:r}=n.decode(48,i);if(r.length)throw new t("invalid signature: left bytes after parsing");const{v:o,l:l}=n.decode(2,a),{v:c,l:h}=n.decode(2,l);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:s.decode(o),s:s.decode(c)}},hexFromSig(e){const{_tlv:t,_int:s}=$H,n=t.encode(2,s.encode(e.r))+t.encode(2,s.encode(e.s));return t.encode(48,n)}},qH=BigInt(0),KH=BigInt(1);BigInt(2);const QH=BigInt(3);function ZH(e){const t=function(e){const t=GH(e);fH(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:n,a:i}=t;if(s){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof s||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=t,n=MH(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return iH(Uint8Array.from([4]),s.toBytes(i.x),s.toBytes(i.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function r(e){const{a:n,b:i}=t,a=s.sqr(e),r=s.mul(a,e);return s.add(s.add(r,s.mul(e,n)),i)}if(!s.eql(s.sqr(t.Gy),r(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:s,nByteLength:n,wrapPrivateKey:i,n:a}=t;if(s&&"bigint"!=typeof e){if(VG(e)&&(e=KG(e)),"string"!=typeof e||!s.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let r;try{r="bigint"==typeof e?e:JG(nH("private key",e,n))}catch(o){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(r=EH(r,a)),oH("private key",r,KH,a),r}function l(e){if(!(e instanceof u))throw new Error("ProjectivePoint expected")}const c=mH(((e,t)=>{const{px:n,py:i,pz:a}=e;if(s.eql(a,s.ONE))return{x:n,y:i};const r=e.is0();null==t&&(t=r?s.ONE:s.inv(a));const o=s.mul(n,t),l=s.mul(i,t),c=s.mul(a,t);if(r)return{x:s.ZERO,y:s.ZERO};if(!s.eql(c,s.ONE))throw new Error("invZ was invalid");return{x:o,y:l}})),h=mH((e=>{if(e.is0()){if(t.allowInfinityPoint&&!s.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!s.isValid(n)||!s.isValid(i))throw new Error("bad point: x or y not FE");const a=s.sqr(i),o=r(n);if(!s.eql(a,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class u{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==n||!s.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!s.isValid(t)||!s.isValid(n))throw new Error("invalid affine point");if(e instanceof u)throw new Error("projective point not allowed");const i=e=>s.eql(e,s.ZERO);return i(t)&&i(n)?u.ZERO:new u(t,n,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,s)=>e.toAffine(t[s]))).map(u.fromAffine)}static fromHex(e){const t=u.fromAffine(a(nH("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return u.BASE.multiply(o(e))}static msm(e,t){return function(e,t,s,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,s)=>{if(!(e instanceof t))throw new Error("invalid point at index "+s)}))}(s,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,s)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+s)}))}(n,t),s.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=lH(BigInt(s.length)),r=a>12?a-3:a>4?a-2:a?2:1,o=(1<<r)-1,l=new Array(o+1).fill(i);let c=i;for(let h=Math.floor((t.BITS-1)/r)*r;h>=0;h-=r){l.fill(i);for(let t=0;t<n.length;t++){const e=n[t],i=Number(e>>BigInt(h)&BigInt(o));l[i]=l[i].add(s[t])}let e=i;for(let t=l.length-1,s=i;t>0;t--)s=s.add(l[t]),e=e.add(s);if(c=c.add(e),0!==h)for(let t=0;t<r;t++)c=c.double()}return c}(u,n,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:n,pz:i}=this,{px:a,py:r,pz:o}=e,c=s.eql(s.mul(t,o),s.mul(a,i)),h=s.eql(s.mul(n,o),s.mul(r,i));return c&&h}negate(){return new u(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=s.mul(n,QH),{px:a,py:r,pz:o}=this;let l=s.ZERO,c=s.ZERO,h=s.ZERO,d=s.mul(a,a),p=s.mul(r,r),f=s.mul(o,o),m=s.mul(a,r);return m=s.add(m,m),h=s.mul(a,o),h=s.add(h,h),l=s.mul(e,h),c=s.mul(i,f),c=s.add(l,c),l=s.sub(p,c),c=s.add(p,c),c=s.mul(l,c),l=s.mul(m,l),h=s.mul(i,h),f=s.mul(e,f),m=s.sub(d,f),m=s.mul(e,m),m=s.add(m,h),h=s.add(d,d),d=s.add(h,d),d=s.add(d,f),d=s.mul(d,m),c=s.add(c,d),f=s.mul(r,o),f=s.add(f,f),d=s.mul(f,m),l=s.sub(l,d),h=s.mul(f,p),h=s.add(h,h),h=s.add(h,h),new u(l,c,h)}add(e){l(e);const{px:n,py:i,pz:a}=this,{px:r,py:o,pz:c}=e;let h=s.ZERO,d=s.ZERO,p=s.ZERO;const f=t.a,m=s.mul(t.b,QH);let g=s.mul(n,r),y=s.mul(i,o),b=s.mul(a,c),v=s.add(n,i),w=s.add(r,o);v=s.mul(v,w),w=s.add(g,y),v=s.sub(v,w),w=s.add(n,a);let x=s.add(r,c);return w=s.mul(w,x),x=s.add(g,b),w=s.sub(w,x),x=s.add(i,a),h=s.add(o,c),x=s.mul(x,h),h=s.add(y,b),x=s.sub(x,h),p=s.mul(f,w),h=s.mul(m,b),p=s.add(h,p),h=s.sub(y,p),p=s.add(y,p),d=s.mul(h,p),y=s.add(g,g),y=s.add(y,g),b=s.mul(f,b),w=s.mul(m,w),y=s.add(y,b),b=s.sub(g,b),b=s.mul(f,b),w=s.add(w,b),g=s.mul(y,w),d=s.add(d,g),g=s.mul(x,w),h=s.mul(v,h),h=s.sub(h,g),g=s.mul(v,y),p=s.mul(x,p),p=s.add(p,g),new u(h,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(u.ZERO)}wNAF(e){return p.wNAFCached(this,e,u.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;oH("scalar",e,qH,i);const a=u.ZERO;if(e===qH)return a;if(this.is0()||e===KH)return this;if(!n||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,u.normalizeZ);let{k1neg:r,k1:o,k2neg:l,k2:c}=n.splitScalar(e),h=a,d=a,f=this;for(;o>qH||c>qH;)o&KH&&(h=h.add(f)),c&KH&&(d=d.add(f)),f=f.double(),o>>=KH,c>>=KH;return r&&(h=h.negate()),l&&(d=d.negate()),d=new u(s.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let a,r;if(oH("scalar",e,KH,i),n){const{k1neg:t,k1:i,k2neg:o,k2:l}=n.splitScalar(e);let{p:c,f:h}=this.wNAF(i),{p:d,f:f}=this.wNAF(l);c=p.constTimeNegate(t,c),d=p.constTimeNegate(o,d),d=new u(s.mul(d.px,n.beta),d.py,d.pz),a=c.add(d),r=h.add(f)}else{const{p:t,f:s}=this.wNAF(e);a=t,r=s}return u.normalizeZ([a,r])[0]}multiplyAndAddUnsafe(e,t,s){const n=u.BASE,i=(e,t)=>t!==qH&&t!==KH&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,s));return a.is0()?void 0:a}toAffine(e){return c(this,e)}isTorsionFree(){const{h:e,isTorsionFree:s}=t;if(e===KH)return!0;if(s)return s(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:s}=t;return e===KH?this:s?s(u,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return $G("isCompressed",e),this.assertValidity(),i(u,this,e)}toHex(e=!0){return $G("isCompressed",e),KG(this.toRawBytes(e))}}u.BASE=new u(t.Gx,t.Gy,s.ONE),u.ZERO=new u(s.ZERO,s.ONE,s.ZERO);const d=t.nBitLength,p=(f=u,m=t.endo?Math.ceil(d/2):d,{constTimeNegate:NH,hasPrecomputes:e=>1!==UH(e),unsafeLadder(e,t,s=f.ZERO){let n=e;for(;t>IH;)t&_H&&(s=s.add(n)),n=n.double(),t>>=_H;return s},precomputeWindow(e,t){const{windows:s,windowSize:n}=FH(t,m),i=[];let a=e,r=a;for(let o=0;o<s;o++){r=a,i.push(r);for(let e=1;e<n;e++)r=r.add(a),i.push(r);a=r.double()}return i},wNAF(e,t,s){const{windows:n,windowSize:i}=FH(e,m);let a=f.ZERO,r=f.BASE;const o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let h=0;h<n;h++){const e=h*i;let n=Number(s&o);s>>=c,n>i&&(n-=l,s+=_H);const u=e,d=e+Math.abs(n)-1,p=h%2!=0,f=n<0;0===n?r=r.add(NH(p,t[u])):a=a.add(NH(f,t[d]))}return{p:a,f:r}},wNAFUnsafe(e,t,s,n=f.ZERO){const{windows:i,windowSize:a}=FH(e,m),r=BigInt(2**e-1),o=2**e,l=BigInt(e);for(let c=0;c<i;c++){const e=c*a;if(s===IH)break;let i=Number(s&r);if(s>>=l,i>a&&(i-=o,s+=_H),0===i)continue;let h=t[e+Math.abs(i)-1];i<0&&(h=h.negate()),n=n.add(h)}return n},getPrecomputes(e,t,s){let n=OH.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&OH.set(t,s(n))),n},wNAFCached(e,t,s){const n=UH(e);return this.wNAF(n,this.getPrecomputes(n,e,s),t)},wNAFCachedUnsafe(e,t,s,n){const i=UH(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,s),t,n)},setWindowSize(e,t){LH(t,m),jH.set(e,t),OH.delete(e)}});var f,m;return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:o,weierstrassEquation:r,isWithinCurveOrder:function(e){return rH(e,KH,t.n)}}}function XH(e){const t=function(e){const t=GH(e);return fH(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:s,n:n}=t,i=s.BYTES+1,a=2*s.BYTES+1;function r(e){return EH(e,n)}function o(e){return TH(e,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:u}=ZH({...t,toBytes(e,t,n){const i=t.toAffine(),a=s.toBytes(i.x),r=iH;return $G("isCompressed",n),n?r(Uint8Array.from([t.hasEvenY()?2:3]),a):r(Uint8Array.from([4]),a,s.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===a&&4===n)return{x:s.fromBytes(r.subarray(0,s.BYTES)),y:s.fromBytes(r.subarray(s.BYTES,2*s.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+a+", got "+t)}{const e=JG(r);if(!rH(e,KH,s.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=s.sqrt(t)}catch(o){const e=o instanceof Error?": "+o.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!=((i&KH)===KH)&&(i=s.neg(i)),{x:e,y:i}}}}),d=e=>KG(tH(e,t.nByteLength));function p(e){return e>n>>KH}const f=(e,t,s)=>JG(e.slice(t,s));class m{constructor(e,t,s){this.r=e,this.s=t,this.recovery=s,this.assertValidity()}static fromCompact(e){const s=t.nByteLength;return e=nH("compactSignature",e,2*s),new m(f(e,0,s),f(e,s,2*s))}static fromDER(e){const{r:t,s:s}=$H.toSig(nH("DER",e));return new m(t,s)}assertValidity(){oH("r",this.r,KH,n),oH("s",this.s,KH,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:a}=this,c=v(nH("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const h=2===a||3===a?n+t.n:n;if(h>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&a?"03":"02",p=l.fromHex(u+d(h)),f=o(h),m=r(-c*f),g=r(i*f),y=l.BASE.multiplyAndAddUnsafe(p,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,r(-this.s),this.recovery):this}toDERRawBytes(){return YG(this.toDERHex())}toDERHex(){return $H.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return YG(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=DH(t.n);return function(e,t,s=!1){const n=e.length,i=RH(t),a=DH(t);if(n<16||n<a||n>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+n);const r=EH(s?eH(e):JG(e),t-bH)+bH;return s?sH(r,i):tH(r,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=VG(e),s="string"==typeof e,n=(t||s)&&e.length;return t?n===i||n===a:s?n===2*i||n===2*a:e instanceof l}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const s=JG(e),n=8*e.length-t.nBitLength;return n>0?s>>BigInt(n):s},v=t.bits2int_modN||function(e){return r(b(e))},w=cH(t.nBitLength);function x(e){return oH("num < 2^"+t.nBitLength,e,qH,w),tH(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,s=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(s)},sign:function(e,n,i=k){const{seed:a,k2sig:h}=function(e,n,i=k){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:h}=t;let{lowS:d,prehash:f,extraEntropy:g}=i;null==d&&(d=!0),e=nH("msgHash",e),HH(i),f&&(e=nH("prehashed msgHash",a(e)));const y=v(e),w=c(n),A=[x(w),x(y)];if(null!=g&&!1!==g){const e=!0===g?h(s.BYTES):g;A.push(nH("extraEntropy",e))}const E=iH(...A),S=y;return{seed:E,k2sig:function(e){const t=b(e);if(!u(t))return;const s=o(t),n=l.BASE.multiply(t).toAffine(),i=r(n.x);if(i===qH)return;const a=r(s*r(S+i*w));if(a===qH)return;let c=(n.x===i?0:2)|Number(n.y&KH),h=a;return d&&p(a)&&(h=function(e){return p(e)?r(-e):e}(a),c^=1),new m(i,h,c)}}}(e,n,i),d=t;return dH(d.hash.outputLen,d.nByteLength,d.hmac)(a,h)},verify:function(e,s,n,i=A){var a;const c=e;s=nH("msgHash",s),n=nH("publicKey",n);const{lowS:h,prehash:u,format:d}=i;if(HH(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const p="string"==typeof c||VG(c),f=!p&&!d&&"object"==typeof c&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!p&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let g,y;try{if(f&&(g=new m(c.r,c.s)),p){try{"compact"!==d&&(g=m.fromDER(c))}catch(T){if(!(T instanceof $H.Err))throw T}g||"der"===d||(g=m.fromCompact(c))}y=l.fromHex(n)}catch(B){return!1}if(!g)return!1;if(h&&g.hasHighS())return!1;u&&(s=t.hash(s));const{r:b,s:w}=g,x=v(s),k=o(w),E=r(x*k),S=r(b*k),P=null==(a=l.BASE.multiplyAndAddUnsafe(y,E,S))?void 0:a.toAffine();return!!P&&r(P.x)===b},ProjectivePoint:l,Signature:m,utils:g}}function YH(e){return{hash:e,hmac:(t,...s)=>UG(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];wI(s),t+=s.length}const s=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];s.set(t,i),i+=t.length}return s}(...s)),randomBytes:NI}}BigInt(4);const JH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ez=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tz=BigInt(1),sz=BigInt(2),nz=(e,t)=>(e+t/sz)/t,iz=MH(JH,void 0,void 0,{sqrt:function(e){const t=JH,s=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),r=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,h=c*c*e%t,u=PH(h,s,t)*h%t,d=PH(u,s,t)*h%t,p=PH(d,sz,t)*c%t,f=PH(p,i,t)*p%t,m=PH(f,a,t)*f%t,g=PH(m,o,t)*m%t,y=PH(g,l,t)*g%t,b=PH(y,o,t)*m%t,v=PH(b,s,t)*h%t,w=PH(v,r,t)*f%t,x=PH(w,n,t)*c%t,k=PH(x,sz,t);if(!iz.eql(iz.sqr(k),e))throw new Error("Cannot find square root");return k}}),az=function(e){const t=t=>XH({...e,...YH(t)});return{...t(XL),create:t}}({a:BigInt(0),b:BigInt(7),Fp:iz,n:ez,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ez,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-tz*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=s,r=BigInt("0x100000000000000000000000000000000"),o=nz(a*e,t),l=nz(-n*e,t);let c=EH(e-o*s-l*i,t),h=EH(-o*n-l*a,t);const u=c>r,d=h>r;if(u&&(c=t-c),d&&(h=t-h),c>r||h>r)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:d,k2:h}}}});BigInt(0),az.ProjectivePoint;const rz=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:az},Symbol.toStringTag,{value:"Module"}));async function oz(e,t){var s,n,i;const{address:a,factory:r,factoryData:o,hash:l,signature:c,universalSignatureVerifierAddress:h=(null==(i=null==(n=null==(s=e.chain)?void 0:s.contracts)?void 0:n.universalSignatureVerifier)?void 0:i.address),...u}=t,d=gD(c)?c:"object"==typeof c&&"r"in c&&"s"in c?function({r:e,s:t,to:s="hex",v:n,yParity:i}){const a=(()=>{if(0===i||1===i)return i;if(n&&(27n===n||28n===n||n>=35n))return n%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),r=`0x${new az.Signature(iI(e),iI(t)).toCompactHex()}${0===a?"1b":"1c"}`;return"hex"===s?r:yI(r)}(c):cI(c),p=await(async()=>r||o?function(e){return f_(e,-32)===pj}(d)?d:function(e){const{address:t,data:s,signature:n,to:i="hex"}=e,a=c_([y_([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,s,n]),pj]);return"hex"===i?a:yI(a)}({address:r,data:o,signature:d}):d)();try{const t=h?{to:h,data:D_({abi:PF,functionName:"isValidSig",args:[a,l,p]}),...u}:{data:IF({abi:PF,args:[a,l,p],bytecode:"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"}),...u},{data:s}=await pD(e,jF,"call")(t);return function(e,t={}){let s=e;if(t.size&&(nI(s,{size:t.size}),s=sI(s)),"0x00"===sI(s))return!1;if("0x01"===sI(s))return!0;throw new eI(s)}(s??"0x0")}catch(f){try{if(cF(i_(a),await sL({hash:l,signature:c})))return!0}catch{}if(f instanceof fN)return!1;throw f}}function lz(e,{emitOnBegin:t=!1,emitMissed:s=!1,onBlockNumber:n,onError:i,poll:a,pollingInterval:r=e.pollingInterval}){let o;return(void 0!==a?!a:"webSocket"===e.transport.type||"fallback"===e.transport.type&&"webSocket"===e.transport.transports[0].config.type)?WF(Z_(["watchBlockNumber",e.uid,t,s]),{onBlockNumber:n,onError:i},(t=>{let s=!0,n=()=>s=!1;return(async()=>{try{const i=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:a}=await i.subscribe({params:["newHeads"],onData(e){var n;if(!s)return;const i=iI(null==(n=e.result)?void 0:n.number);t.onBlockNumber(i,o),o=i},onError(e){var s;null==(s=t.onError)||s.call(t,e)}});n=a,s||n()}catch(a){null==i||i(a)}})(),()=>n()})):WF(Z_(["watchBlockNumber",e.uid,t,s,r]),{onBlockNumber:n,onError:i},(n=>qF((async()=>{var t;try{const t=await pD(e,ZF,"getBlockNumber")({cacheTime:0});if(o){if(t===o)return;if(t-o>1&&s)for(let e=o+1n;e<t;e++)n.onBlockNumber(e,o),o=e}(!o||t>o)&&(n.onBlockNumber(t,o),o=t)}catch(i){null==(t=n.onError)||t.call(n,i)}}),{emitOnBegin:t,interval:r})))}const cz=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,hz=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function uz(e){return{call:t=>jF(e,t),createAccessList:t=>WO(e,t),createBlockFilter:()=>async function(e){const t=B_(e,{method:"eth_newBlockFilter"}),s=await e.request({method:"eth_newBlockFilter"});return{id:s,request:t(s),type:"block"}}(e),createContractEventFilter:t=>C_(e,t),createEventFilter:t=>$O(e,t),createPendingTransactionFilter:()=>qO(e),estimateContractGas:t=>lF(e,t),estimateGas:t=>oF(e,t),getBalance:t=>rF(e,t),getBlobBaseFee:()=>async function(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}(e),getBlock:t=>FL(e,t),getBlockNumber:t=>ZF(e,t),getBlockTransactionCount:t=>async function(e,{blockHash:t,blockNumber:s,blockTag:n="latest"}={}){const i=void 0!==s?hI(s):void 0;let a;return a=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[i||n]},{dedupe:Boolean(i)}),aI(a)}(e,t),getBytecode:t=>KO(e,t),getChainId:()=>sF(e),getCode:t=>KO(e,t),getContractEvents:t=>gF(e,t),getEip712Domain:t=>async function(e,t){const{address:s,factory:n,factoryData:i}=t;try{const[t,a,r,o,l,c,h]=await pD(e,UF,"readContract")({abi:ZO,address:s,functionName:"eip712Domain",factory:n,factoryData:i});return{domain:{name:a,version:r,chainId:Number(o),verifyingContract:l,salt:c},extensions:h,fields:t}}catch(RV){const t=RV;if("ContractFunctionExecutionError"===t.name&&"ContractFunctionZeroDataError"===t.cause.name)throw new QO({address:s});throw t}}(e,t),getEnsAddress:t=>async function(e,t){const{blockNumber:s,blockTag:n,coinType:i,name:a,gatewayUrls:r,strict:o}=t,{chain:l}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!l)throw new Error("client chain not configured. universalResolverAddress is required.");return _F({blockNumber:s,chain:l,contract:"ensUniversalResolver"})})(),h=null==l?void 0:l.ensTlds;if(h&&!h.some((e=>a.endsWith(e))))return null;try{const t=D_({abi:SF,functionName:"addr",...null!=i?{args:[CO(a),BigInt(i)]}:{args:[CO(a)]}}),o={address:c,abi:kF,functionName:"resolve",args:[oI(RO(a)),t,r??[PO]],blockNumber:s,blockTag:n},l=pD(e,UF,"readContract"),h=await l(o);if("0x"===h[0])return null;const u=bF({abi:SF,args:null!=i?[CO(a),BigInt(i)]:void 0,functionName:"addr",data:h[0]});return"0x"===u||"0x00"===sI(u)?null:u}catch(u){if(o)throw u;if(kO(u,"resolve"))return null;throw u}}(e,t),getEnsAvatar:t=>async function(e,{blockNumber:t,blockTag:s,assetGatewayUrls:n,name:i,gatewayUrls:a,strict:r,universalResolverAddress:o}){const l=await pD(e,VO,"getEnsText")({blockNumber:t,blockTag:s,key:"avatar",name:i,universalResolverAddress:o,gatewayUrls:a,strict:r});if(!l)return null;try{return await async function(e,{gatewayUrls:t,record:s}){return/eip155:/i.test(s)?async function(e,{gatewayUrls:t,record:s}){const n=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[s,n,i]=t.split("/"),[a,r]=s.split(":"),[o,l]=n.split(":");if(!a||"eip155"!==a.toLowerCase())throw new IO({reason:"Only EIP-155 supported"});if(!r)throw new IO({reason:"Chain ID not found"});if(!l)throw new IO({reason:"Contract address not found"});if(!i)throw new IO({reason:"Token ID not found"});if(!o)throw new IO({reason:"ERC namespace not found"});return{chainID:Number.parseInt(r),namespace:o.toLowerCase(),contractAddress:l,tokenID:i}}(s),i=await async function(e,{nft:t}){if("erc721"===t.namespace)return UF(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return UF(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new NO({namespace:t.namespace})}(e,{nft:n}),{uri:a,isOnChain:r,isEncoded:o}=GO({uri:i,gatewayUrls:t});if(r&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){const e=o?atob(a.replace("data:application/json;base64,","")):a;return zO({uri:HO(JSON.parse(e)),gatewayUrls:t})}let l=n.tokenID;return"erc1155"===n.namespace&&(l=l.replace("0x","").padStart(64,"0")),async function({gatewayUrls:e,uri:t}){try{const s=await fetch(t).then((e=>e.json()));return await zO({gatewayUrls:e,uri:HO(s)})}catch{throw new _O({uri:t})}}({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,l)})}(e,{gatewayUrls:t,record:s}):zO({uri:s,gatewayUrls:t})}(e,{record:l,gatewayUrls:n})}catch{return null}}(e,t),getEnsName:t=>async function(e,{address:t,blockNumber:s,blockTag:n,gatewayUrls:i,strict:a,universalResolverAddress:r}){let o=r;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=_F({blockNumber:s,chain:e.chain,contract:"ensUniversalResolver"})}const l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const a={address:o,abi:AF,functionName:"reverse",args:[oI(RO(l))],blockNumber:s,blockTag:n},r=pD(e,UF,"readContract"),[c,h]=i?await r({...a,args:[...a.args,i]}):await r(a);return t.toLowerCase()!==h.toLowerCase()?null:c}catch(c){if(a)throw c;if(kO(c,"reverse"))return null;throw c}}(e,t),getEnsResolver:t=>async function(e,t){const{blockNumber:s,blockTag:n,name:i}=t,{chain:a}=e,r=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return _F({blockNumber:s,chain:a,contract:"ensUniversalResolver"})})(),o=null==a?void 0:a.ensTlds;if(o&&!o.some((e=>i.endsWith(e))))throw new Error(`${i} is not a valid ENS TLD (${null==o?void 0:o.join(", ")}) for chain "${a.name}" (id: ${a.id}).`);const[l]=await pD(e,UF,"readContract")({address:r,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[oI(RO(i))],blockNumber:s,blockTag:n});return l}(e,t),getEnsText:t=>VO(e,t),getFeeHistory:t=>async function(e,{blockCount:t,blockNumber:s,blockTag:n="latest",rewardPercentiles:i}){const a=s?hI(s):void 0;return{baseFeePerGas:(r=await e.request({method:"eth_feeHistory",params:[hI(t),a||n,i]},{dedupe:Boolean(a)})).baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:null==(o=r.reward)?void 0:o.map((e=>e.map((e=>BigInt(e)))))};var r,o}(e,t),estimateFeesPerGas:t=>async function(e,t){return UL(e,t)}(e,t),getFilterChanges:e=>XF(0,e),getFilterLogs:e=>async function(e,{filter:t}){const s=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map((e=>fF(e)));return t.abi?pF({abi:t.abi,logs:n,strict:s}):n}(0,e),getGasPrice:()=>OL(e),getLogs:t=>mF(e,t),getProof:t=>async function(e,{address:t,blockNumber:s,blockTag:n,storageKeys:i}){const a=n??"latest",r=void 0!==s?hI(s):void 0;return o=await e.request({method:"eth_getProof",params:[t,i,r||a]}),{...o,balance:o.balance?BigInt(o.balance):void 0,nonce:o.nonce?aI(o.nonce):void 0,storageProof:o.storageProof?(l=o.storageProof,l.map((e=>({...e,value:BigInt(e.value)})))):void 0};var o,l}(e,t),estimateMaxPriorityFeePerGas:t=>async function(e,t){return jL(e,t)}(e,t),getStorageAt:t=>async function(e,{address:t,blockNumber:s,blockTag:n="latest",slot:i}){const a=void 0!==s?hI(s):void 0;return await e.request({method:"eth_getStorageAt",params:[t,i,a||n]})}(e,t),getTransaction:t=>fj(e,t),getTransactionConfirmations:t=>async function(e,{hash:t,transactionReceipt:s}){const[n,i]=await Promise.all([pD(e,ZF,"getBlockNumber")({}),t?pD(e,fj,"getTransaction")({hash:t}):void 0]),a=(null==s?void 0:s.blockNumber)||(null==i?void 0:i.blockNumber);return a?n-a+1n:0n}(e,t),getTransactionCount:t=>GL(e,t),getTransactionReceipt:t=>mj(e,t),multicall:t=>async function(e,t){var s;const{allowFailure:n=!0,batchSize:i,blockNumber:a,blockTag:r,multicallAddress:o,stateOverride:l}=t,c=t.contracts,h=i??("object"==typeof(null==(s=e.batch)?void 0:s.multicall)&&e.batch.multicall.batchSize||1024);let u=o;if(!u){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");u=_F({blockNumber:a,chain:e.chain,contract:"multicall3"})}const d=[[]];let p=0,f=0;for(let b=0;b<c.length;b++){const{abi:e,address:t,args:s,functionName:i}=c[b];try{const n=D_({abi:e,args:s,functionName:i});f+=(n.length-2)/2,h>0&&f>h&&d[p].length>0&&(p++,f=(n.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:n,target:t}]}catch(y){const a=YN(y,{abi:e,address:t,args:s,docsPath:"/docs/contract/multicall",functionName:i});if(!n)throw a;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:t}]}}const m=await Promise.allSettled(d.map((t=>pD(e,UF,"readContract")({abi:vF,address:u,args:[t],blockNumber:a,blockTag:r,functionName:"aggregate3",stateOverride:l})))),g=[];for(let b=0;b<m.length;b++){const e=m[b];if("rejected"===e.status){if(!n)throw e.reason;for(let t=0;t<d[b].length;t++)g.push({status:"failure",error:e.reason,result:void 0});continue}const t=e.value;for(let s=0;s<t.length;s++){const{returnData:e,success:i}=t[s],{callData:a}=d[b][s],{abi:r,address:o,functionName:l,args:h}=c[g.length];try{if("0x"===a)throw new SD;if(!i)throw new vN({data:e});const t=bF({abi:r,args:h,data:e,functionName:l});g.push(n?{result:t,status:"success"}:t)}catch(y){const e=YN(y,{abi:r,address:o,args:h,docsPath:"/docs/contract/multicall",functionName:l});if(!n)throw e;g.push({error:e,result:void 0,status:"failure"})}}}if(g.length!==c.length)throw new wD("multicall results mismatch");return g}(e,t),prepareTransactionRequest:t=>aF(e,t),readContract:t=>UF(e,t),sendRawTransaction:t=>nO(e,t),simulate:t=>Vj(e,t),simulateBlocks:t=>Vj(e,t),simulateCalls:t=>async function(e,t){const{blockNumber:s,blockTag:n,calls:i,stateOverrides:a,traceAssetChanges:r,traceTransfers:o,validation:l}=t,c=t.account?M_(t.account):void 0;if(r&&!c)throw new wD("`account` is required when `traceAssetChanges` is true");const h=c?function(e,t){var s;const{bytecode:n,args:i}=t;return Tj(n,(null==(s=e.inputs)?void 0:s.length)&&(null==i?void 0:i.length)?CG(e.inputs,i):"0x")}(vG("constructor(bytes, bytes)"),{bytecode:TF,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",LG(FG("function getBalance(address)"),[c.address])]}):void 0,u=r?await Promise.all(t.calls.map((async t=>{if(!t.data&&!t.abi)return;const{accessList:s}=await WO(e,{account:c.address,...t,data:t.abi?D_(t):t.data});return s.map((({address:e,storageKeys:t})=>t.length>0?e:null))}))).then((e=>e.flat().filter(Boolean))):[],d=null==a?void 0:a.map((e=>e.address===(null==c?void 0:c.address)?{...e,nonce:0}:e)),p=await Vj(e,{blockNumber:s,blockTag:n,blocks:[...r?[{calls:[{data:h}],stateOverrides:a},{calls:u.map(((e,t)=>({abi:[FG("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:OG,nonce:t}))),stateOverrides:[{address:OG,nonce:0}]}]:[],{calls:[...i,{}].map(((e,t)=>({...e,from:null==c?void 0:c.address,nonce:t}))),stateOverrides:d},...r?[{calls:[{data:h}]},{calls:u.map(((e,t)=>({abi:[FG("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:e,from:OG,nonce:t}))),stateOverrides:[{address:OG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[FG("function decimals() returns (uint256)")],functionName:"decimals",from:OG,nonce:t}))),stateOverrides:[{address:OG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[FG("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:OG,nonce:t}))),stateOverrides:[{address:OG,nonce:0}]},{calls:u.map(((e,t)=>({to:e,abi:[FG("function symbol() returns (string)")],functionName:"symbol",from:OG,nonce:t}))),stateOverrides:[{address:OG,nonce:0}]}]:[]],traceTransfers:o,validation:l}),f=r?p[2]:p[0],[m,g,,y,b,v,w,x]=r?p:[],{calls:k,...A}=f,E=k.slice(0,-1)??[],S=[...(null==m?void 0:m.calls)??[],...(null==g?void 0:g.calls)??[]].map((e=>"success"===e.status?iI(e.data):null)),P=[...(null==y?void 0:y.calls)??[],...(null==b?void 0:b.calls)??[]].map((e=>"success"===e.status?iI(e.data):null)),T=((null==v?void 0:v.calls)??[]).map((e=>"success"===e.status?e.result:null)),B=((null==x?void 0:x.calls)??[]).map((e=>"success"===e.status?e.result:null)),C=((null==w?void 0:w.calls)??[]).map((e=>"success"===e.status?e.result:null)),M=[];for(const[R,D]of P.entries()){const e=S[R];if("bigint"!=typeof D)continue;if("bigint"!=typeof e)continue;const t=T[R-1],s=B[R-1],n=C[R-1],i=0===R?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:u[R-1],decimals:n||t?Number(t??1):void 0,symbol:s??void 0};M.some((e=>e.token.address===i.address))||M.push({token:i,value:{pre:e,post:D,diff:D-e}})}return{assetChanges:M,block:A,results:E}}(e,t),simulateContract:t=>GF(e,t),verifyMessage:t=>async function(e,{address:t,message:s,factory:n,factoryData:i,signature:a,...r}){return oz(e,{address:t,factory:n,factoryData:i,hash:dj(s),signature:a,...r})}(e,t),verifySiweMessage:t=>async function(e,t){const{address:s,domain:n,message:i,nonce:a,scheme:r,signature:o,time:l=new Date,...c}=t,h=function(e){var t,s,n;const{scheme:i,statement:a,...r}=(null==(t=e.match(cz))?void 0:t.groups)??{},{chainId:o,expirationTime:l,issuedAt:c,notBefore:h,requestId:u,...d}=(null==(s=e.match(hz))?void 0:s.groups)??{},p=null==(n=e.split("Resources:")[1])?void 0:n.split("\n- ").slice(1);return{...r,...d,...o?{chainId:Number(o)}:{},...l?{expirationTime:new Date(l)}:{},...c?{issuedAt:new Date(c)}:{},...h?{notBefore:new Date(h)}:{},...u?{requestId:u}:{},...p?{resources:p}:{},...i?{scheme:i}:{},...a?{statement:a}:{}}}(i);if(!h.address)return!1;if(!function(e){const{address:t,domain:s,message:n,nonce:i,scheme:a,time:r=new Date}=e;if(s&&n.domain!==s)return!1;if(i&&n.nonce!==i)return!1;if(a&&n.scheme!==a)return!1;if(n.expirationTime&&r>=n.expirationTime)return!1;if(n.notBefore&&r<n.notBefore)return!1;try{if(!n.address)return!1;if(t&&!cF(n.address,t))return!1}catch{return!1}return!0}({address:s,domain:n,message:h,nonce:a,scheme:r,time:l}))return!1;const u=dj(i);return oz(e,{address:h.address,hash:u,signature:o,...c})}(e,t),verifyTypedData:t=>async function(e,t){const{address:s,factory:n,factoryData:i,signature:a,message:r,primaryType:o,types:l,domain:c,...h}=t;return oz(e,{address:s,factory:n,factoryData:i,hash:tj({message:r,primaryType:o,types:l,domain:c}),signature:a,...h})}(e,t),uninstallFilter:e=>YF(0,e),waitForTransactionReceipt:t=>async function(e,{confirmations:t=1,hash:s,onReplaced:n,pollingInterval:i=e.pollingInterval,retryCount:a=6,retryDelay:r=({count:e})=>200*(1<<e),timeout:o=18e4}){const l=Z_(["waitForTransactionReceipt",e.uid,s]);let c,h,u,d=!1;const{promise:p,resolve:f,reject:m}=LF(),g=o?setTimeout((()=>m(new dN({hash:s}))),o):void 0,y=WF(l,{onReplaced:n,resolve:f,reject:m},(n=>{const o=pD(e,lz,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(i){const l=e=>{clearTimeout(g),o(),e(),y()};let p=i;if(!d)try{if(u){if(t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;return void l((()=>n.resolve(u)))}if(c||(d=!0,await fO((async()=>{c=await pD(e,fj,"getTransaction")({hash:s}),c.blockNumber&&(p=c.blockNumber)}),{delay:r,retryCount:a}),d=!1),u=await pD(e,mj,"getTransactionReceipt")({hash:s}),t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;l((()=>n.resolve(u)))}catch(f){if(f instanceof hN||f instanceof uN){if(!c)return void(d=!1);try{h=c,d=!0;const s=await fO((()=>pD(e,FL,"getBlock")({blockNumber:p,includeTransactions:!0})),{delay:r,retryCount:a,shouldRetry:({error:e})=>e instanceof IL});d=!1;const i=s.transactions.find((({from:e,nonce:t})=>e===h.from&&t===h.nonce));if(!i)return;if(u=await pD(e,mj,"getTransactionReceipt")({hash:i.hash}),t>1&&(!u.blockNumber||p-u.blockNumber+1n<t))return;let o="replaced";i.to===h.to&&i.value===h.value&&i.input===h.input?o="repriced":i.from===i.to&&0n===i.value&&(o="cancelled"),l((()=>{var e;null==(e=n.onReplaced)||e.call(n,{reason:o,replacedTransaction:h,transaction:i,transactionReceipt:u}),n.resolve(u)}))}catch(m){l((()=>n.reject(m)))}}else l((()=>n.reject(f)))}}})}));return p}(e,t),watchBlocks:t=>function(e,{blockTag:t="latest",emitMissed:s=!1,emitOnBegin:n=!1,onBlock:i,onError:a,includeTransactions:r,poll:o,pollingInterval:l=e.pollingInterval}){const c=void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),h=r??!1;let u;return c?WF(Z_(["watchBlocks",e.uid,t,s,n,h,l]),{onBlock:i,onError:a},(i=>qF((async()=>{var n;try{const n=await pD(e,FL,"getBlock")({blockTag:t,includeTransactions:h});if(n.number&&(null==u?void 0:u.number)){if(n.number===u.number)return;if(n.number-u.number>1&&s)for(let t=(null==u?void 0:u.number)+1n;t<n.number;t++){const s=await pD(e,FL,"getBlock")({blockNumber:t,includeTransactions:h});i.onBlock(s,u),u=s}}(!(null==u?void 0:u.number)||"pending"===t&&!(null==n?void 0:n.number)||n.number&&n.number>u.number)&&(i.onBlock(n,u),u=n)}catch(a){null==(n=i.onError)||n.call(i,a)}}),{emitOnBegin:n,interval:l}))):(()=>{let s=!0,r=!0,o=()=>s=!1;return(async()=>{try{n&&pD(e,FL,"getBlock")({blockTag:t,includeTransactions:h}).then((e=>{s&&r&&(i(e,void 0),r=!1)}));const l=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:c}=await l.subscribe({params:["newHeads"],async onData(t){if(!s)return;const n=await pD(e,FL,"getBlock")({blockNumber:t.blockNumber,includeTransactions:h}).catch((()=>{}));s&&(i(n,u),r=!1,u=n)},onError(e){null==a||a(e)}});o=c,s||o()}catch(l){null==a||a(l)}})(),()=>o()})()}(e,t),watchBlockNumber:t=>lz(e,t),watchContractEvent:t=>JF(e,t),watchEvent:t=>function(e,{address:t,args:s,batch:n=!0,event:i,events:a,fromBlock:r,onError:o,onLogs:l,poll:c,pollingInterval:h=e.pollingInterval,strict:u}){const d=void 0!==c?c:"bigint"==typeof r||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),p=u??!1;return d?WF(Z_(["watchEvent",t,s,n,e.uid,i,h,r]),{onLogs:l,onError:o},(o=>{let l,c;void 0!==r&&(l=r-1n);let u=!1;const d=qF((async()=>{var h;if(u)try{let r;if(c)r=await pD(e,XF,"getFilterChanges")({filter:c});else{const n=await pD(e,ZF,"getBlockNumber")({});r=l&&l!==n?await pD(e,mF,"getLogs")({address:t,args:s,event:i,events:a,fromBlock:l+1n,toBlock:n}):[],l=n}if(0===r.length)return;if(n)o.onLogs(r);else for(const e of r)o.onLogs([e])}catch(d){c&&d instanceof MN&&(u=!1),null==(h=o.onError)||h.call(o,d)}else{try{c=await pD(e,$O,"createEventFilter")({address:t,args:s,event:i,events:a,strict:p,fromBlock:r})}catch{}u=!0}}),{emitOnBegin:!0,interval:h});return async()=>{c&&await pD(e,YF,"uninstallFilter")({filter:c}),d()}})):(()=>{let n=!0,r=()=>n=!1;return(async()=>{try{const c=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),h=a??(i?[i]:void 0);let d=[];h&&(d=[h.flatMap((e=>P_({abi:[e],eventName:e.name,args:s})))],i&&(d=d[0]));const{unsubscribe:f}=await c.subscribe({params:["logs",{address:t,topics:d}],onData(e){var t;if(!n)return;const s=e.result;try{const{eventName:e,args:t}=uF({abi:h??[],data:s.data,topics:s.topics,strict:p}),n=fF(s,{args:t,eventName:e});l([n])}catch(i){let e,n;if(i instanceof UD||i instanceof GD){if(u)return;e=i.abiItem.name,n=null==(t=i.abiItem.inputs)?void 0:t.some((e=>!("name"in e&&e.name)))}const a=fF(s,{args:n?[]:{},eventName:e});l([a])}},onError(e){null==o||o(e)}});r=f,n||r()}catch(c){null==o||o(c)}})(),()=>r()})()}(e,t),watchPendingTransactions:t=>function(e,{batch:t=!0,onError:s,onTransactions:n,poll:i,pollingInterval:a=e.pollingInterval}){return(void 0!==i?i:"webSocket"!==e.transport.type)?WF(Z_(["watchPendingTransactions",e.uid,t,a]),{onTransactions:n,onError:s},(s=>{let n;const i=qF((async()=>{var a;try{if(!n)try{return void(n=await pD(e,qO,"createPendingTransactionFilter")({}))}catch(r){throw i(),r}const a=await pD(e,XF,"getFilterChanges")({filter:n});if(0===a.length)return;if(t)s.onTransactions(a);else for(const e of a)s.onTransactions([e])}catch(r){null==(a=s.onError)||a.call(s,r)}}),{emitOnBegin:!0,interval:a});return async()=>{n&&await pD(e,YF,"uninstallFilter")({filter:n}),i()}})):(()=>{let t=!0,i=()=>t=!1;return(async()=>{try{const{unsubscribe:a}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const s=e.result;n([s])},onError(e){null==s||s(e)}});i=a,t||i()}catch(a){null==s||s(a)}})(),()=>i()})()}(e,t)}}async function dz(e,t){var s;const{account:n=e.account,chainId:i,nonce:a}=t;if(!n)throw new eO({docsPath:"/docs/eip7702/prepareAuthorization"});const r=M_(n),o=(()=>{if(t.executor)return"self"===t.executor?t.executor:M_(t.executor)})(),l={address:t.contractAddress??t.address,chainId:i,nonce:a};return void 0===l.chainId&&(l.chainId=(null==(s=e.chain)?void 0:s.id)??await pD(e,sF,"getChainId")({})),void 0===l.nonce&&(l.nonce=await pD(e,GL,"getTransactionCount")({address:r.address,blockTag:"pending"}),("self"===o||(null==o?void 0:o.address)&&cF(o.address,r.address))&&(l.nonce+=1)),l}function pz(e){return{addChain:t=>async function(e,{chain:t}){const{id:s,name:n,nativeCurrency:i,rpcUrls:a,blockExplorers:r}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:hI(s),chainName:n,nativeCurrency:i,rpcUrls:a.default.http,blockExplorerUrls:r?Object.values(r).map((({url:e})=>e)):void 0}]},{dedupe:!0,retryCount:0})}(e,t),deployContract:t=>function(e,t){const{abi:s,args:n,bytecode:i,...a}=t,r=IF({abi:s,args:n,bytecode:i});return aO(e,{...a,...a.authorizationList?{to:null}:{},data:r})}(e,t),getAddresses:()=>async function(e){var t;return"local"===(null==(t=e.account)?void 0:t.type)?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map((e=>n_(e)))}(e),getChainId:()=>sF(e),getPermissions:()=>async function(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}(e),prepareAuthorization:t=>dz(e,t),prepareTransactionRequest:t=>aF(e,t),requestAddresses:()=>async function(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map((e=>i_(e)))}(e),requestPermissions:t=>async function(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}(e,t),sendRawTransaction:t=>nO(e,t),sendTransaction:t=>aO(e,t),signAuthorization:t=>async function(e,t){const{account:s=e.account}=t;if(!s)throw new eO({docsPath:"/docs/eip7702/signAuthorization"});const n=M_(s);if(!n.signAuthorization)throw new tO({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});const i=await dz(e,t);return n.signAuthorization(i)}(e,t),signMessage:t=>async function(e,{account:t=e.account,message:s}){if(!t)throw new eO({docsPath:"/docs/actions/wallet/signMessage"});const n=M_(t);if(n.signMessage)return n.signMessage({message:s});const i="string"==typeof s?dI(s):s.raw instanceof Uint8Array?oI(s.raw):s.raw;return e.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}(e,t),signTransaction:t=>async function(e,t){var s,n,i,a;const{account:r=e.account,chain:o=e.chain,...l}=t;if(!r)throw new eO({docsPath:"/docs/actions/wallet/signTransaction"});const c=M_(r);CL({account:c,...t});const h=await pD(e,sF,"getChainId")({});null!==o&&sO({currentChainId:h,chain:o});const u=(null==o?void 0:o.formatters)||(null==(s=e.chain)?void 0:s.formatters),d=(null==(n=null==u?void 0:u.transactionRequest)?void 0:n.format)||EL;return c.signTransaction?c.signTransaction({...l,chainId:h},{serializer:null==(a=null==(i=e.chain)?void 0:i.serializers)?void 0:a.transaction}):await e.request({method:"eth_signTransaction",params:[{...d(l),chainId:hI(h),from:c.address}]},{retryCount:0})}(e,t),signTypedData:t=>async function(e,t){const{account:s=e.account,domain:n,message:i,primaryType:a}=t;if(!s)throw new eO({docsPath:"/docs/actions/wallet/signTypedData"});const r=M_(s),o={EIP712Domain:lj({domain:n}),...t.types};if(oj({domain:n,message:i,primaryType:a,types:o}),r.signTypedData)return r.signTypedData({domain:n,message:i,primaryType:a,types:o});const l=function(e){const{domain:t,message:s,primaryType:n,types:i}=e,a=(e,t)=>{const s={...t};for(const n of e){const{name:e,type:t}=n;"address"===t&&(s[e]=s[e].toLowerCase())}return s},r=i.EIP712Domain&&t?a(i.EIP712Domain,t):{},o=(()=>{if("EIP712Domain"!==n)return a(i[n],s)})();return Z_({domain:r,message:o,primaryType:n,types:i})}({domain:n,message:i,primaryType:a,types:o});return e.request({method:"eth_signTypedData_v4",params:[r.address,l]},{retryCount:0})}(e,t),switchChain:t=>async function(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:hI(t)}]},{retryCount:0})}(e,t),watchAsset:t=>async function(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}(e,t),writeContract:t=>rO(e,t)}}const fz=XO({id:50312,name:"Somnia Testnet",nativeCurrency:{name:"STT",symbol:"STT",decimals:18},rpcUrls:{default:{http:["https://dream-rpc.somnia.network"]}},blockExplorers:{default:{name:"Somnia Testnet Explorer",url:"https://somnia-testnet.socialscan.io",apiUrl:"https://shannon-explorer.somnia.network/api"}},testnet:!0}),mz=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"URI_SETTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newuri",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],gz=({tokenId:e,title:t,useStarImage:s=!1})=>{const{data:n,isLoading:i}=fR({queryKey:["achievementImage",e],queryFn:async()=>(await fetch(`https://insomnus-backend-production-8a4c3b46c656.herokuapp.com/api/nft/data/${e}`)).json(),enabled:!!e&&!s});return s?Pi.jsx("img",{src:"/star.png",alt:t,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[100px] h-[100px] object-contain z-10"}):i?Pi.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:Pi.jsx("div",{className:"w-6 h-6 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})}):(null==n?void 0:n.image)?Pi.jsx("img",{src:n.image,alt:t,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[100px] h-[100px] object-contain z-10",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):Pi.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center z-10",children:[Pi.jsx("div",{className:"text-xs font-bold text-yellow-400 mb-1 truncate w-full px-2",children:t}),Pi.jsx("div",{className:"text-xs text-gray-300 opacity-60",children:"No Image"})]})},yz=()=>{const{user:e}=Zv(),[t,s]=yi.useState({username:"",email:"",x:"",discord:"",referralCode:"",gold:0,xp:0,walletAddress:""}),[n,i]=yi.useState(!0),{data:a,isLoading:r,error:o}=fR({queryKey:["achievements",null==e?void 0:e.id],queryFn:()=>(async()=>{try{return(await jv.get("/my/achievements")).data}catch(e){throw console.error("Failed to get user achievements:",e),e}})(e.id),enabled:!!(null==e?void 0:e.id)}),{data:l,isLoading:c}=fR({queryKey:["allAchievements"],queryFn:()=>(async()=>{try{return(await jv.get("/achievements")).data.data}catch(e){throw console.error("Failed to get user achievements:",e),e}})()}),{data:h}=fR({queryKey:["mintableItems"],queryFn:async()=>(async()=>{try{return(await jv.get("/nft/eligible")).data.data}catch(e){throw console.error("Failed to check mint eligibility:",e),e}})()});console.log(h,"mint");const u=(null==a?void 0:a.data)||[];console.log(l,"all achievements");const d=(null==h?void 0:h.slice(0,6))||[],[p,f]=yi.useState(!1),[m,g]=yi.useState(!1),[y,b]=yi.useState(!1),[v,w]=yi.useState(!1),[x,k]=yi.useState(""),[A,E]=yi.useState(""),[S,P]=yi.useState(""),[T,B]=yi.useState(""),[C,M]=yi.useState(""),[R,D]=yi.useState(null),[I,_]=yi.useState(!1),[N,L]=yi.useState(!1),[F,O]=yi.useState(""),[j,U]=yi.useState(new Set);yi.useEffect((()=>{(async()=>{var e,t,n,a;try{i(!0);const r=await MC(),o=r.data||r;s({username:o.username||"Unknown User",email:o.email||"",x:(null==(e=o.socials)?void 0:e.x)||"",discord:(null==(t=o.socials)?void 0:t.discord)||"",referralCode:o.referralCode||o.id||"",gold:o.gold||0,xp:o.xp||0,walletAddress:o.walletAddress||""}),k((null==(n=o.socials)?void 0:n.discord)||""),E((null==(a=o.socials)?void 0:a.x)||""),P(o.email||""),B(o.username||"")}catch(r){console.error("Failed to fetch profile:",r)}finally{i(!1)}})()}),[]);const G=async()=>{var e,n,i,a,r;try{const e={username:T||t.username,email:S||t.email,socials:{x:A||t.x,discord:x||t.discord}};await(async e=>{try{return(await jv.put("/profile/update",e)).data}catch(t){throw console.error("Failed to update profile:",t),t}})(e),await(async()=>{var e,t,n,i;try{const a=await MC(),r=a.data||a;s({username:r.username||"Unknown User",email:r.email||"",x:(null==(e=r.socials)?void 0:e.x)||"",discord:(null==(t=r.socials)?void 0:t.discord)||"",referralCode:r.referralCode||r.id||"",gold:r.gold||0,xp:r.xp||0,walletAddress:r.walletAddress||""}),B(r.username||""),P(r.email||""),k((null==(n=r.socials)?void 0:n.discord)||""),E((null==(i=r.socials)?void 0:i.x)||"")}catch(a){console.error("Failed to refresh profile:",a)}})(),f(!1),g(!1),b(!1),w(!1),M("")}catch(o){let s="Failed to update profile. Please try again.";409===(null==(e=o.response)?void 0:e.status)?s="Username already exists. Please choose a different username.":400===(null==(n=o.response)?void 0:n.status)?s="Invalid data provided. Please check your input.":401===(null==(i=o.response)?void 0:i.status)?s="Authentication required. Please log in again.":(null==(r=null==(a=o.response)?void 0:a.data)?void 0:r.message)&&(s=o.response.data.message),M(s),w(!1),B(t.username)}};return n?Pi.jsx("div",{className:"min-h-screen w-full flex items-center justify-center text-white bg-[#170908]",children:Pi.jsx("div",{className:"w-[500px] bg-dark-primary border border-[#392423] p-6",children:Pi.jsxs("div",{className:"flex flex-col items-center",children:[Pi.jsx("div",{className:"w-24 h-24 bg-gray-600 rounded-full mb-4 animate-pulse"}),Pi.jsx("div",{className:"h-8 bg-gray-600 rounded w-32 mb-6 animate-pulse"}),Pi.jsx("div",{className:"space-y-3 w-full",children:[1,2,3,4].map((e=>Pi.jsx("div",{className:"bg-dark-primary border border-[#392423]  p-3 h-12 animate-pulse"},e)))})]})})}):Pi.jsxs("div",{className:"h-screen w-full flex flex-col flex-1 text-heading-4-alagard bg-dark-primary",children:[Pi.jsx("style",{dangerouslySetInnerHTML:{__html:"\n    @keyframes subtle-glow {\n      0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }\n      50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.6), 0 0 25px rgba(255, 215, 0, 0.3); }\n    }\n    .shiny-border {\n      animation: subtle-glow 3s ease-in-out infinite;\n      border: 1px solid rgba(255, 215, 0, 0.4);\n    }\n  "}}),Pi.jsx("h1",{className:"text-heading-3-alagard p-8",style:{color:"#ffae0b"},children:"Profile"}),Pi.jsxs("div",{className:"flex flex-row w-full h-full justify-center p-8 gap-8",children:[Pi.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[C&&Pi.jsx("div",{className:"mb-4 p-3 bg-red-900 text-red-300 rounded text-center font-bold border border-red-600",children:C}),Pi.jsxs("div",{className:"flex flex-col items-center mb-6 bg-dark-secondary border border-dark-tertiary  p-6",children:[Pi.jsx("div",{className:"w-30 h-30 rounded-full overflow-hidden",children:Pi.jsx("img",{src:"/portraits/1.png",alt:"User Portrait",draggable:"false",className:"w-full h-full object-cover scale-110"})}),Pi.jsx("div",{className:"flex items-center space-x-2 bg-dark-secondary",children:v?Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("input",{type:"text",value:T,onChange:e=>B(e.target.value),className:"bg-dark-primary border border-[#4A2D2A] rounded px-3 py-1 text-white text-xl font-bold text-center",placeholder:"Enter username"}),Pi.jsx("button",{onClick:()=>{G()},className:"text-green-400 hover:text-green-300 transition-colors",children:""}),Pi.jsx("button",{onClick:()=>{w(!1),B(t.username),M("")},className:"text-red-400 hover:text-red-300 transition-colors",children:""})]}):Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("h2",{className:"text-xl font-bold text-white",children:t.username}),Pi.jsx("button",{onClick:()=>w(!0),className:"text-white hover:text-red-600 text-sm",children:Pi.jsx(AR,{className:"w-4 h-4"})})]})})]}),Pi.jsxs("div",{className:"space-y-3 bg-dark-secondary",children:[Pi.jsx("div",{className:"bg-dark-secondary border border-dark-tertiary  p-3 flex items-center justify-between",children:Pi.jsxs("div",{className:"flex items-center space-x-3",children:[Pi.jsx(kR,{className:"w-5 h-5 text-gray-400"}),Pi.jsxs("div",{children:[Pi.jsx("span",{className:"text-white font-medium block",children:t.walletAddress?`${t.walletAddress.slice(0,6)}...${t.walletAddress.slice(-4)}`:"No wallet"}),Pi.jsx("span",{className:"text-gray-400 text-sm",children:"Wallet Address"})]})]})}),Pi.jsxs("div",{className:"bg-dark-secondary border border-dark-tertiary  p-3 flex items-center justify-between",children:[Pi.jsxs("div",{className:"flex items-center space-x-3",children:[Pi.jsx(xR,{className:"w-5 h-5 text-gray-400"}),y?Pi.jsx("input",{type:"text",value:S,onChange:e=>P(e.target.value),className:"bg-dark-primary border border-[#4A2D2A] rounded px-2 py-1 text-white text-sm flex-1",placeholder:"Enter Email"}):Pi.jsx("span",{className:"text-white font-medium",children:t.email})]}),Pi.jsx("div",{className:"flex items-center space-x-2",children:y?Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("button",{onClick:()=>{G()},className:"text-green-400 hover:text-green-300 transition-colors text-sm",children:""}),Pi.jsx("button",{onClick:()=>{b(!1),P(t.email)},className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:""})]}):Pi.jsx(Pi.Fragment,{children:Pi.jsx("button",{onClick:()=>b(!0),className:"text-white hover:text-red-600 text-sm",children:Pi.jsx(AR,{className:"w-4 h-4"})})})})]})]})]}),Pi.jsxs("div",{className:"flex-1 flex flex-col gap-4 h-full",children:[Pi.jsxs("div",{className:"h-1/2 flex flex-col",children:[Pi.jsx("h2",{className:"text-2xl font-bold mb-5",children:"Items"}),Pi.jsx("div",{className:"h-full overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#392423 #24110F"},children:Pi.jsx("div",{className:"grid grid-cols-3 gap-6",children:[...Array(6)].map(((e,t)=>{const s=d[t];return Pi.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden group "+(s&&!j.has(s.tokenId)?"shiny-border":""),children:[Pi.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",style:{zIndex:0}}),s?Pi.jsxs(Pi.Fragment,{children:[Pi.jsx(gz,{tokenId:s.tokenId,title:s.title}),Pi.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center z-20",children:Pi.jsx("button",{onClick:()=>(async e=>{var t;try{if(L(!0),O("Connecting to wallet..."),!window.ethereum)return O("Please install MetaMask to mint achievements"),void setTimeout((()=>O("")),5e3);const t=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];O("Please confirm transaction in MetaMask...");const s=function(e){const{key:t="public",name:s="Public Client"}=e;return dO({...e,key:t,name:s,type:"publicClient"}).extend(uz)}({chain:fz,transport:xO()}),n=function(e){const{key:t="wallet",name:s="Wallet Client",transport:n}=e;return dO({...e,key:t,name:s,transport:n,type:"walletClient"}).extend(pz)}({chain:fz,transport:yO(window.ethereum)}),i=function({abi:e,address:t,client:s}){const n=s,[i,a]=n?"public"in n&&"wallet"in n?[n.public,n.wallet]:"public"in n?[n.public,void 0]:"wallet"in n?[void 0,n.wallet]:[n,n]:[void 0,void 0],r=null!=i,o=null!=a,l={};let c=!1,h=!1,u=!1;for(const d of e)if("function"===d.type?"view"===d.stateMutability||"pure"===d.stateMutability?c=!0:h=!0:"event"===d.type&&(u=!0),c&&h&&u)break;return r&&(c&&(l.read=new Proxy({},{get:(s,n)=>(...s)=>{const{args:a,options:r}=oO(s);return pD(i,UF,"readContract")({abi:e,address:t,functionName:n,args:a,...r})}})),h&&(l.simulate=new Proxy({},{get:(s,n)=>(...s)=>{const{args:a,options:r}=oO(s);return pD(i,GF,"simulateContract")({abi:e,address:t,functionName:n,args:a,...r})}})),u&&(l.createEventFilter=new Proxy({},{get:(s,n)=>(...s)=>{const a=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=lO(s,a);return pD(i,C_,"createContractEventFilter")({abi:e,address:t,eventName:n,args:r,...o})}}),l.getEvents=new Proxy({},{get:(s,n)=>(...s)=>{const a=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=lO(s,a);return pD(i,gF,"getContractEvents")({abi:e,address:t,eventName:n,args:r,...o})}}),l.watchEvent=new Proxy({},{get:(s,n)=>(...s)=>{const a=e.find((e=>"event"===e.type&&e.name===n)),{args:r,options:o}=lO(s,a);return pD(i,JF,"watchContractEvent")({abi:e,address:t,eventName:n,args:r,...o})}}))),o&&h&&(l.write=new Proxy({},{get:(s,n)=>(...s)=>{const{args:i,options:r}=oO(s);return pD(a,rO,"writeContract")({abi:e,address:t,functionName:n,args:i,...r})}})),(r||o)&&h&&(l.estimateGas=new Proxy({},{get:(s,n)=>(...s)=>{const{args:r,options:o}=oO(s);return pD(i??a,lF,"estimateContractGas")({abi:e,address:t,functionName:n,args:r,...o,account:o.account??a.account})}})),l.address=t,l.abi=e,l}({address:"0x3A711d5E7e4d69eBef1B7e1b3715f463619A254c",abi:mz,client:{public:s,wallet:n}});O("Minting achievement...");const a=await i.write.mint([t,BigInt(e),BigInt(1),"0x"],{account:t});O("Waiting for confirmation...");const r=await s.waitForTransactionReceipt({hash:a});O("Notifying backend..."),await(async e=>{try{return(await jv.post(`/nft/mint/${e}`)).data}catch(t){throw console.error("Failed to mint achievement NFT:",t),t}})(e),U((t=>new Set([...t,e]))),O("Achievement minted successfully!"),console.log("Mint successful! TX:",r.transactionHash),setTimeout((()=>O("")),3e3)}catch(s){console.error("Minting error:",s),4001===s.code?O("Transaction rejected by user"):s.reason?O(`Error: ${s.reason}`):(null==(t=s.message)?void 0:t.includes("insufficient funds"))?O("Insufficient funds for gas"):O("Failed to mint achievement"),setTimeout((()=>O("")),5e3)}finally{L(!1)}})(s.tokenId),disabled:N,className:"px-3 py-1 text-xs font-bold rounded transition-colors "+(N?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700 text-white"),children:N?"Minting...":"Mint"})}),Pi.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-black/90 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-30 max-w-48",children:[Pi.jsx("div",{className:"font-bold",children:s.title}),Pi.jsx("div",{className:"text-gray-300",children:s.description}),Pi.jsx("div",{className:"text-yellow-400",children:"Click to mint NFT"})]})]}):Pi.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",style:{zIndex:0}})]},t)}))})})]}),Pi.jsxs("div",{className:"h-1/2 flex flex-col",children:[Pi.jsx("h2",{className:"text-2xl font-bold text-heading-4-alagard mb-5",children:"Achievement"}),Pi.jsx("div",{className:"h-full overflow-y-auto pr-2 pb-6",style:{scrollbarWidth:"thin",scrollbarColor:"#392423 #24110F"},children:Pi.jsx("div",{className:"grid grid-cols-3 gap-6",children:c?[...Array(6)].map(((e,t)=>Pi.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden animate-pulse",children:[Pi.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none opacity-50",style:{zIndex:0}}),Pi.jsx("img",{src:"/Frame-8.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none opacity-50",style:{zIndex:0}})]},t))):l&&l.length>0?l.map(((e,t)=>{const s=null==u?void 0:u.some((t=>t.achievement.id===e.id));return Pi.jsxs("div",{className:"relative flex items-center justify-center w-full h-full aspect-square overflow-hidden group cursor-pointer "+(s?"":"opacity-50 grayscale"),title:`${e.title}: ${e.description} (${e.points} points) ${s?" Earned":" Not earned"}`,onClick:()=>D({...e,earned:s}),children:[Pi.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-0"}),Pi.jsx(gz,{tokenId:e.tokenId,title:e.title,useStarImage:!0}),!s&&Pi.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-10"}),Pi.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block bg-black/90 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-30 max-w-48",children:[Pi.jsx("div",{className:"font-bold",children:e.title}),Pi.jsx("div",{className:"text-gray-300",children:e.description}),Pi.jsxs("div",{className:"text-yellow-400",children:[e.points," points"]}),Pi.jsx("div",{className:s?"text-green-400":"text-red-400",children:s?" Earned":" Not earned"})]})]},e.id||t)})):Pi.jsx("div",{className:"col-span-3 text-center text-gray-400",children:"No achievements available"})})})]})]}),F&&Pi.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:Pi.jsx("div",{className:"p-4 rounded-lg shadow-lg max-w-sm "+(F.includes("successfully")?"bg-green-900/90 text-green-300 border border-green-600":F.includes("Error")||F.includes("Failed")||F.includes("rejected")?"bg-red-900/90 text-red-300 border border-red-600":"bg-blue-900/90 text-blue-300 border border-blue-600"),children:Pi.jsx("div",{className:"text-sm font-medium",children:F})})})]}),R&&Pi.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>D(null),children:Pi.jsxs("div",{className:"bg-dark-primary border border-dark-tertiary p-6 max-w-lg w-full mx-4",onClick:e=>e.stopPropagation(),children:[Pi.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Pi.jsx("h3",{className:"text-2xl font-bold text-yellow-400",children:R.title}),Pi.jsx("button",{onClick:()=>D(null),className:"text-gray-400 hover:text-white text-xl",children:""})]}),Pi.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Pi.jsxs("div",{className:"relative w-24 h-24 flex-shrink-0",children:[Pi.jsx("img",{src:"/Frame-7.png",alt:"frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-0"}),Pi.jsx(gz,{tokenId:R.tokenId,title:R.title,useStarImage:!0}),!R.earned&&Pi.jsx("img",{src:"/Frame-8.png",alt:"locked frame",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none z-10"})]}),Pi.jsxs("div",{className:"flex-1",children:[Pi.jsx("div",{className:"text-gray-300 mb-2",children:R.description}),Pi.jsxs("div",{className:"text-yellow-400 font-bold mb-2",children:[R.points," Points"]}),Pi.jsx("div",{className:"font-bold "+(R.earned?"text-green-400":"text-red-400"),children:R.earned?" Earned":" Not Earned"})]})]}),Pi.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:[Pi.jsx("strong",{children:"Token ID:"})," ",R.tokenId]}),R.earned&&Pi.jsx("div",{className:"bg-green-900/20 border border-green-600/30 p-3 rounded text-green-300 text-sm",children:" Congratulations! You've earned this achievement!"})]})})]})};var bz={exports:{}};function vz(){}function wz(){}wz.resetWarningCache=vz,bz.exports=function(){function e(e,t,s,n,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wz,resetWarningCache:vz};return s.PropTypes=s,s}();const xz=Rn(bz.exports);class kz extends Phaser.Scene{constructor(){super("Level"),En(this,"dino"),En(this,"welcome")}editorCreate(){const e=this.add.image(640,288,"dino");e.setInteractive(new Phaser.Geom.Rectangle(0,0,250,250),Phaser.Geom.Rectangle.Contains);const t=this.add.text(640,478,"",{});t.setOrigin(.5,.5),t.text="Phaser 3 + Phaser Editor v4",t.setStyle({fontFamily:"Arial",fontSize:"30px"}),this.dino=e,this.welcome=t,this.events.emit("scene-awake")}create(){this.editorCreate(),this.dino.on("pointerdown",(()=>{this.welcome.text="Hello, World!"}))}}class Az extends Phaser.Scene{constructor(){super("Preload"),En(this,"progressBar")}editorPreload(){this.load.pack("asset-pack","./assets/asset-pack.json")}editorCreate(){const e=this.add.image(505.0120544433594,360,"guapen");e.scaleX=.32715486817515643,e.scaleY=.32715486817515643;const t=this.add.rectangle(553,361,256,20);t.setOrigin(0,0),t.isFilled=!0,t.fillColor=14737632;const s=this.add.rectangle(553.0120849609375,361,256,20);s.setOrigin(0,0),s.fillColor=14737632,s.isStroked=!0;const n=this.add.text(552.0120849609375,329,"",{});n.text="Loading...",n.setStyle({color:"#e0e0e0",fontFamily:"arial",fontSize:"20px"}),this.progressBar=t,this.events.emit("scene-awake")}preload(){try{this.editorCreate(),this.editorPreload();const e=this.progressBar.width;this.load.on("progress",(t=>{this.progressBar.width=t*e})),this.load.on("complete",(()=>{console.log("All assets loaded. Exp texture exists:",this.textures.exists("Exp")),console.log("Health_Potion_01 texture exists:",this.textures.exists("Health_Potion_01"))}))}catch(e){console.error("Error in preload:",e)}}create(){console.log("Assets loaded - Exp:",this.textures.exists("Exp")),console.log("Assets loaded - Health_Potion_01:",this.textures.exists("Health_Potion_01")),console.log("Preload scene complete - waiting for manual game start"),window.EventBus&&window.EventBus.emit("preload-complete"),window.dispatchEvent(new CustomEvent("gamePreloadComplete"))}createFallbackTexture(){try{const e=this.add.graphics();e.fillStyle(65535,1),e.fillCircle(8,8,8),e.generateTexture("Exp",16,16),e.destroy(),console.log("Created fallback Exp texture")}catch(e){console.error("Error creating fallback texture:",e)}}}class Ez extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??32,s??32,n||"zombierun",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<20){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=30,i=Math.cos(s)*n,a=Math.sin(s)*n;t.body.velocity.x+=i,t.body.velocity.y+=a,e.body.velocity.x-=i,e.body.velocity.y-=a}}createAnimations(){this.scene.anims.exists("zombieRunAni")||this.scene.anims.create({key:"zombieRunAni",frames:this.scene.anims.generateFrameNumbers("zombierun",{start:0,end:6}),frameRate:8,repeat:-1}),this.scene.anims.exists("zombieDeath")||this.scene.anims.create({key:"zombieDeath",frames:this.scene.anims.generateFrameNumbers("death_1",{start:0,end:4}),frameRate:6,repeat:0}),this.scene.anims.exists("zombieAttack")||this.scene.anims.create({key:"zombieAttack",frames:this.scene.anims.generateFrameNumbers("zombieAttack",{start:0,end:3}),frameRate:8,repeat:0}),this.scene.anims.exists("zombieIdle")||this.scene.anims.create({key:"zombieIdle",frames:[{key:"zombierun",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){if(!this.isAttacking){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Zombie update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"zombieAttack"===this.anims.currentAnim.key||this.play("zombieAttack"):this.isMoving?(this.anims.isPlaying&&"zombieRunAni"===this.anims.currentAnim.key||this.play("zombieRunAni"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"zombieIdle"===this.anims.currentAnim.key||this.play("zombieIdle")}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("zombieAttack"),this.once("animationcomplete",(e=>{"zombieAttack"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&e.takeDamage(this.damage)})),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.isAttacking=!1,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.spawnRewards(),this.stop(),this.play("zombieDeath",!1),this.once("animationcomplete",(e=>{"zombieDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null))}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,12,6),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Sz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??32,s??32,n||"Zombie2RunAni",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<20){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=30,i=Math.cos(s)*n,a=Math.sin(s)*n;t.body.velocity.x+=i,t.body.velocity.y+=a,e.body.velocity.x-=i,e.body.velocity.y-=a}}createAnimations(){this.scene.anims.exists("zombieRunAni")||this.scene.anims.create({key:"zombieRunAni",frames:this.scene.anims.generateFrameNumbers("Zombie2RunAni",{start:0,end:6}),frameRate:8,repeat:-1}),this.scene.anims.exists("zombieIdle")||this.scene.anims.create({key:"zombieIdle",frames:[{key:"Zombie2RunAni",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("Zombie2DeathAni")||this.scene.anims.create({key:"Zombie2DeathAni",frames:this.scene.anims.generateFrameNumbers("explodedeath",{start:0,end:10}),frameRate:6,repeat:0}),this.scene.anims.exists("zombie2Attack")||this.scene.anims.create({key:"zombie2Attack",frames:this.scene.anims.generateFrameNumbers("assets/Hero/zombie 2/attack.png",{start:0,end:8}),frameRate:8,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Zombie update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"zombie2Attack"===this.anims.currentAnim.key||this.play("zombie2Attack"):this.isMoving&&(this.anims.isPlaying&&"Zombie2RunAni"===this.anims.currentAnim.key||this.play("Zombie2RunAni"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0))}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("zombie1Attack"),this.once("animationcomplete",(e=>{"zombie1Attack"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&e.takeDamage(this.damage)})),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("Zombie2DeathAni",!1),this.once("animationcomplete",(e=>{"Zombie2DeathAni"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Pz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??191,s??94,n||"Police run",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=120,this.attackCooldown=1500,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s.body.velocity.x-=a,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("PoliceDroid")||this.scene.anims.create({key:"PoliceDroid",frames:this.scene.anims.generateFrameNumbers("Police run",{start:0,end:10}),frameRate:8,repeat:-1}),this.scene.anims.exists("PoliceDroidIdle")||this.scene.anims.create({key:"PoliceDroidIdle",frames:[{key:"Police run",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("PoliceDeath")||this.scene.anims.create({key:"PoliceDeath",frames:this.scene.anims.generateFrameNumbers("Police Death",{start:0,end:6}),frameRate:6,repeat:0}),this.scene.anims.exists("PoliceDroidShooter")||this.scene.anims.create({key:"PoliceDroidShooter",frames:this.scene.anims.generateFrameNumbers("Police shooter",{start:0,end:8}),frameRate:10,repeat:0})}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking;const n=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y);this.updateDirection(n),e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.shootAtPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in DroidPolice update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"PoliceDroidShooter"===this.anims.currentAnim.key||this.play("PoliceDroidShooter"):this.isMoving?this.anims.isPlaying&&"PoliceDroid"===this.anims.currentAnim.key||this.play("PoliceDroid"):this.anims.isPlaying&&"PoliceDroidIdle"===this.anims.currentAnim.key||this.play("PoliceDroidIdle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}shootAtPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("PoliceDroidShooter"),this.createMuzzleFlash(),this.createBulletTrail(e),this.once("animationcomplete",(e=>{"PoliceDroidShooter"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(300,(()=>{e&&e.takeDamage&&(e.takeDamage(this.damage),this.createHitEffect(e))})),this.setTint(16755200),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}createMuzzleFlash(){const e=this.scene.add.graphics();let t=this.x,s=this.y;switch(this.lastDirection){case"right":t+=20;break;case"left":t-=20;break;case"up":s-=15;break;case"down":s+=15}e.setPosition(t,s),e.fillCircle(0,0,8),e.fillCircle(0,0,4),this.scene.tweens.add({targets:e,scaleX:1.5,scaleY:1.5,alpha:0,duration:100,onComplete:()=>{e.destroy()}})}createBulletTrail(e){const t=this.scene.add.graphics();t.lineStyle(2,16776960,.8),t.moveTo(this.x,this.y),t.lineTo(e.x,e.y),this.scene.tweens.add({targets:t,alpha:0,duration:200,onComplete:()=>{t.destroy()}})}createHitEffect(e){const t=this.scene.add.graphics();t.setPosition(e.x,e.y),t.fillCircle(0,0,12),t.fillCircle(0,0,6),this.scene.tweens.add({targets:t,scaleX:2,scaleY:2,alpha:0,duration:300,ease:"Power2",onComplete:()=>{t.destroy()}})}attackPlayer(e){this.shootAtPlayer(e)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this),this.stop(),this.play("PoliceDeath",!1),this.once("animationcomplete",(e=>{"PoliceDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,20,10),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.95:1;this.shadow.setScale(e*t)}}}class Tz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??32,s??32,n||"Dagger Bandit-Run",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s.body.velocity.y-=a,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("Assasin Run")||this.scene.anims.create({key:"Assasin Run",frames:this.scene.anims.generateFrameNumbers("Dagger Bandit-Run",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("assassin")||this.scene.anims.create({key:"assassin",frames:[{key:"Dagger Bandit-Run",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("Asassin Death")||this.scene.anims.create({key:"Asassin Death",frames:this.scene.anims.generateFrameNumbers("Dagger Bandit-Death",{start:0,end:5}),frameRate:6,repeat:0,hideOnComplete:!1}),this.scene.anims.exists("Asassin Attack")||this.scene.anims.create({key:"Asassin Attack",frames:this.scene.anims.generateFrameNumbers("assets/Hero/zombie 2/attack.png",{start:0,end:8}),frameRate:8,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Assassinupdate:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"Asassin Attack"===this.anims.currentAnim.key||this.play("Asassin Attack"):this.isMoving?(this.anims.isPlaying&&"Assasin Run"===this.anims.currentAnim.key||this.play("Assasin Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"assassin"===this.anims.currentAnim.key||this.play("assassin")}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("Asassin Attack"),this.once("animationcomplete",(e=>{"Asassin Attack"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&e.takeDamage(this.damage)})),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.spawnRewards(),this.stop(),this.play("Asassin Death",!1),this.once("animationcomplete",(e=>{"Asassin Death"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null))}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,14,26,13),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.7:1;this.shadow.setScale(e*t)}}}class Bz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??32,s??32,n||"run_1",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(24,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s.body.velocity.y-=a,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("assassinTank run")||this.scene.anims.create({key:"assassinTank run",frames:this.scene.anims.generateFrameNumbers("assassintnakRun",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("assassinTankAttack1")||this.scene.anims.create({key:"assassinTankAttack1",frames:this.scene.anims.generateFrameNumbers("assets/Hero/zombie 2/attack.png",{start:0,end:8}),frameRate:8,repeat:0}),this.scene.anims.exists("assassinTank")||this.scene.anims.create({key:"assassinTank",frames:[{key:"run_1",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("AssassinTank Death")||this.scene.anims.create({key:"AssassinTank Death",frames:this.scene.anims.generateFrameNumbers("death",{start:0,end:11}),frameRate:6,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in AssassinTank update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"assassinTankAttack1"===this.anims.currentAnim.key||this.play("assassinTankAttack1"):this.isMoving?(this.anims.isPlaying&&"assassinTank run"===this.anims.currentAnim.key||this.play("assassinTank run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"assassinTank"===this.anims.currentAnim.key||this.play("assassinTank")}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("assassinTankAttack1"),this.once("animationcomplete",(e=>{"assassinTankAttack1"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&e.takeDamage(this.damage)})),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("AssassinTank Death",!1),this.once("animationcomplete",(e=>{"AssassinTank Death"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,20,35,18),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Cz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??32,s??32,n||"Archer Bandit-Run_85x32",i??0),e.physics.add.existing(this,!1),this.body.setSize(16,16,!1),this.body.setOffset(14,32),this.maxHealth=30,this.health=this.maxHealth,this.damage=10,this.speed=50,this.attackRange=5,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y,s.x,s.y)<20){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y,s.x,s.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s.body.velocity.y-=a,s.body.velocity.y-=r}}createAnimations(){this.scene.anims.exists("AssassinArcher run")||this.scene.anims.create({key:"AssassinArcher run",frames:this.scene.anims.generateFrameNumbers("Archer Bandit-Run_85x32",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("Archer Bandit-Attack")||this.scene.anims.create({key:"Archer Bandit-Attack",frames:this.scene.anims.generateFrameNumbers("Archer Bandit-Attack",{start:0,end:8}),frameRate:8,repeat:0}),this.scene.anims.exists("AssasinArcher")||this.scene.anims.create({key:"AssasinArcher",frames:[{key:"Archer Bandit-Run_85x32",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("Archer Bandit-Death")||this.scene.anims.create({key:"Archer Bandit-Death",frames:this.scene.anims.generateFrameNumbers("Archer Bandit-Death_85x32",{start:0,end:10}),frameRate:6,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x+55,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x-10,this.y-10),this.healthBarFg.setPosition(this.x-25,this.y-10);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in AssasinArcher update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"Archer Bandit-Attack"===this.anims.currentAnim.key||this.play("Archer Bandit-Attack"):this.isMoving?(this.anims.isPlaying&&"AssassinArcher run"===this.anims.currentAnim.key||this.play("AssassinArcher run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"AssasinArcher"===this.anims.currentAnim.key||this.play("AssasinArcher")}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.play("Archer Bandit-Attack"),this.once("animationcomplete",(e=>{"Archer Bandit-Attack"===e.key&&(this.isAttacking=!1)})),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&e.takeDamage(this.damage)})),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.clearTint()})),this.health<=0&&this.die()}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("Archer Bandit-Death",!1),this.once("animationcomplete",(e=>{"Archer Bandit-Death"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,0),this.shadow.fillEllipse(0,42,26,13),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Mz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"run_2",i??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(16,32),this.maxHealth=80,this.health=this.maxHealth,this.damage=25,this.speed=30,this.attackRange=40,this.attackCooldown=1500,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<30){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=40,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.5*a,s.body.velocity.y-=.5*r)}}createAnimations(){console.log("Available textures:",Object.keys(this.scene.textures.list)),this.scene.anims.exists("BigDude Run")||this.scene.anims.create({key:"BigDude Run",frames:this.scene.anims.generateFrameNumbers("run_2",{start:0,end:7}),frameRate:6,repeat:-1});const e=["attack1","attack_1","BigDudeAttack1","bigdude_attack1","attack1_2","attack 1","BigDude_Attack1"];let t=null;for(const s of e)if(this.scene.textures.exists(s)){t=s;break}t&&!this.scene.anims.exists("BigDude Attack1")?(console.log("Creating BigDude Attack1 with texture:",t),this.scene.anims.create({key:"BigDude Attack1",frames:this.scene.anims.generateFrameNumbers(t,{start:0,end:7}),frameRate:8,repeat:0})):console.log("BigDude Attack1 texture not found. Checked:",e),this.scene.textures.exists("attack 2t")&&!this.scene.anims.exists("BigDude Attack2")?(console.log("Creating BigDude Attack2 with texture: attack 2t"),this.scene.anims.create({key:"BigDude Attack2",frames:this.scene.anims.generateFrameNumbers("attack 2t",{start:0,end:7}),frameRate:8,repeat:0})):console.log("BigDude Attack2 texture 'attack 2t' not found"),this.scene.anims.exists("BigDude Idle")||this.scene.anims.create({key:"BigDude Idle",frames:[{key:"run_2",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("bigDudeDeath")||this.scene.anims.create({key:"bigDudeDeath",frames:this.scene.anims.generateFrameNumbers("Bidamaged and death",{start:0,end:6}),frameRate:6,repeat:0}),console.log("Created animations:",Object.keys(this.scene.anims.anims.entries))}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,40,6,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-20,this.y-25,40,6,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-20,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=40*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.1,n=Math.sin(e)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.85,this.body.velocity.y*=.85,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.7,this.body.velocity.y*=.7;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5&&!this.isAttacking,e-this.lastAttackTime>this.attackCooldown&&!this.isAttacking&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in BigDude update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<35&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=20*(1-i/35);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.08*e,this.body.velocity.y+=.08*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking||(this.isMoving?(this.anims.isPlaying&&"BigDude Run"===this.anims.currentAnim.key||this.play("BigDude Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"BigDude Idle"===this.anims.currentAnim.key||this.play("BigDude Idle"))}attackPlayer(e){if(!e||!e.takeDamage)return;this.isAttacking=!0,this.body.velocity.x=0,this.body.velocity.y=0;const t=[];let s,n;this.scene.anims.exists("BigDude Attack1")&&t.push("BigDude Attack1"),this.scene.anims.exists("BigDude Attack2")&&t.push("BigDude Attack2"),console.log("Available attacks:",t),t.length>0?(s=t[Math.floor(Math.random()*t.length)],n="BigDude Attack1"===s?300:400,console.log("Playing attack:",s),this.play(s),this.once("animationcomplete",(e=>{e.key===s&&(this.isAttacking=!1,console.log("Attack animation completed:",s))})),this.scene.time.delayedCall(n,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):(console.log("No attack animations found, applying immediate damage"),e.takeDamage(this.damage),this.isAttacking=!1),this.setTint(16746496),this.scene.time.delayedCall(200,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.play("bigDudeDeath",!1),this.once("animationcomplete",(e=>{"bigDudeDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(3,6);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-15,15),t=Phaser.Math.Between(-15,15);this.scene.spawnExperienceOrb(this.x+e,this.y+t,2)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,40,20),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+20);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Rz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??48,s??48,n||"WreackerRun",i??0),e.physics.add.existing(this,!1),this.body.setSize(24,24,!1),this.body.setOffset(12,24),this.maxHealth=50,this.health=this.maxHealth,this.damage=15,this.speed=60,this.attackRange=30,this.attackCooldown=800,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.attackDuration=600,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.7*a,s.body.velocity.y-=.7*r)}}createAnimations(){if(this.scene.anims.exists("WreackerRun")||this.scene.anims.create({key:"WreackerRun",frames:this.scene.anims.generateFrameNumbers("WreackerRun",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("WreackerDeath")||this.scene.anims.create({key:"WreackerDeath",frames:this.scene.anims.generateFrameNumbers("WreackerDeath",{start:0,end:4}),frameRate:6,repeat:0}),!this.scene.anims.exists("WreackerAttack")){const e=this.scene.textures.exists("WreackerAttack")?"WreackerAttack":"WreackerRun";this.scene.anims.create({key:"WreackerAttack",frames:this.scene.anims.generateFrameNumbers(e,{start:0,end:"WreackerAttack"===e?5:3}),frameRate:8,repeat:0}),console.log("Created WreackerAttack animation with texture:",e)}this.scene.anims.exists("Wreacker Idle")||this.scene.anims.create({key:"Wreacker Idle",frames:[{key:"WreackerRun",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-20,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-12),this.healthBarFg.setPosition(this.x-17.5,this.y-12);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(this.isAttacking)this.updateAttack(e);else if(s>this.attackRange)this.moveTowardPlayer(t);else{this.body.velocity.x*=.75,this.body.velocity.y*=.75;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.startAttack(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Wreacker update:",s)}}moveTowardPlayer(e){const t=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y),s=Math.cos(t)*this.speed*.12,n=Math.sin(t)*this.speed*.12;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.88,this.body.velocity.y*=.88,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(t)}startAttack(e){this.isAttacking||(console.log("Starting Wreacker attack animation"),this.isAttacking=!0,this.attackStartTime=this.scene.time.now,this.body.velocity.x=0,this.body.velocity.y=0,this.isMoving=!1,this.off("animationcomplete"),this.stop(),this.play("WreackerAttack",!0),this.once("animationcomplete",(e=>{console.log("Animation completed:",e.key),"WreackerAttack"===e.key&&this.endAttack()})),this.scene.time.delayedCall(this.attackDuration,(()=>{this.isAttacking&&(console.log("Force ending attack via timer"),this.endAttack())})),this.scene.time.delayedCall(250,(()=>{e&&e.takeDamage&&!this.isDead&&this.isAttacking&&(e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})))})))}updateAttack(e){this.body.velocity.x=0,this.body.velocity.y=0,this.isMoving=!1,e-this.attackStartTime>this.attackDuration&&this.endAttack()}endAttack(){console.log("Ending Wreacker attack"),this.isAttacking=!1,this.attackStartTime=0}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<30&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=18*(1-i/30);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking?this.anims.isPlaying&&"WreackerAttack"===this.anims.currentAnim.key||(console.log("Force playing attack animation"),this.play("WreackerAttack",!0)):this.isMoving?(this.anims.isPlaying&&"WreackerRun"===this.anims.currentAnim.key||this.play("WreackerRun"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Wreacker Idle"===this.anims.currentAnim.key||this.play("Wreacker Idle")}attackPlayer(e){this.startAttack(e)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(120,(()=>{this.active&&this.clearTint()})),this.isAttacking&&this.endAttack(),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.isAttacking=!1,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("WreackerDeath",!1),this.once("animationcomplete",(e=>{"WreackerDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,4);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-10,30,15),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=this.isMoving?.9:1,t=this.isAttacking?1.2:1;this.shadow.setScale(e*t)}}}class Dz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"Warrior-Run",i??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(16,32),this.maxHealth=60,this.health=this.maxHealth,this.damage=20,this.speed=45,this.attackRange=35,this.attackCooldown=1e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<28){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=35,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.6*a,s.body.velocity.y-=.6*r)}}createAnimations(){this.scene.anims.exists("Warrior-Run")||this.scene.anims.create({key:"Warrior-Run",frames:this.scene.anims.generateFrameNumbers("Warrior-Run",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("WarriorDeath")||this.scene.anims.create({key:"WarriorDeath",frames:this.scene.anims.generateFrameNumbers("Warrior-Death.png",{start:0,end:12}),frameRate:6,repeat:0}),this.scene.textures.exists("WarriorAttack")&&!this.scene.anims.exists("Warrior Attack")&&this.scene.anims.create({key:"Warrior Attack",frames:this.scene.anims.generateFrameNumbers("WarriorAttack",{start:0,end:5}),frameRate:10,repeat:0}),this.scene.anims.exists("Warrior Idle")||this.scene.anims.create({key:"Warrior Idle",frames:[{key:"Warrior-Run",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,38,6,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-19,this.y-25,38,6,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-19,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=38*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.11,n=Math.sin(e)*this.speed*.11;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.87,this.body.velocity.y*=.87,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.75,this.body.velocity.y*=.75;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>5,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Warrior update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<32&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=19*(1-i/32);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.09*e,this.body.velocity.y+=.09*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Warrior-Run"===this.anims.currentAnim.key||this.play("Warrior-Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Warrior Idle"===this.anims.currentAnim.key||this.play("Warrior Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("Warrior Attack")?(this.play("Warrior Attack"),this.scene.time.delayedCall(300,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16755200),this.scene.time.delayedCall(180,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(140,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.stop(),this.play("WarriorDeath",!1),this.once("animationcomplete",(e=>{"WarriorDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(3,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-13,13),t=Phaser.Math.Between(-13,13);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.8)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,30,15),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Iz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"crawler_run_32x16_v01",i??0),e.physics.add.existing(this,!1),this.body.setSize(24,12,!1),this.body.setOffset(4,4),this.maxHealth=30,this.health=this.maxHealth,this.damage=15,this.speed=45,this.attackRange=25,this.attackCooldown=800,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=30,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.3*a,s.body.velocity.y-=.3*r)}}createAnimations(){this.scene.anims.exists("Crawler Run")||this.scene.anims.create({key:"Crawler Run",frames:this.scene.anims.generateFrameNumbers("crawler_run_32x16_v01",{start:0,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists("CrawlerDeath")||this.scene.anims.create({key:"CrawlerDeath",frames:this.scene.anims.generateFrameNumbers("crawler_death_32x16_v01.png",{start:0,end:6}),frameRate:6,repeat:0}),this.scene.textures.exists("crawler_attack")&&!this.scene.anims.exists("Crawler Attack")&&this.scene.anims.create({key:"Crawler Attack",frames:this.scene.anims.generateFrameNumbers("crawler_attack",{start:0,end:5}),frameRate:12,repeat:0}),this.scene.anims.exists("Crawler Idle")||this.scene.anims.create({key:"Crawler Idle",frames:[{key:"crawler_run_32x16_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-20,30,4,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-15,this.y-20,30,4,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-12),this.healthBarFg.setPosition(this.x-15,this.y-12);const e=this.health/this.maxHealth;this.healthBarFg.width=30*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;if(Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.12,n=Math.sin(e)*this.speed*.12;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.9,this.body.velocity.y*=.9,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>3,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Crawler update:",s)}}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<25&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=15*(1-i/25);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.06*e,this.body.velocity.y+=.06*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Crawler Run"===this.anims.currentAnim.key||this.play("Crawler Run"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Crawler Idle"===this.anims.currentAnim.key||this.play("Crawler Idle")}attackPlayer(e){e&&e.takeDamage&&(this.scene.anims.exists("Crawler Attack")?(this.play("Crawler Attack"),this.scene.time.delayedCall(300,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage)}))):e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{this.active&&this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this),this.stop(),this.play("CrawlerDeath",!1),this.once("animationcomplete",(e=>{"CrawlerDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(1,3);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-10,10),t=Phaser.Math.Between(-10,10);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-16,12,6),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class _z extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"Bomber_Activited_run_v01",i??0),e.physics.add.existing(this,!1),this.body.setSize(28,28,!1),this.body.setOffset(18,20),this.maxHealth=40,this.health=this.maxHealth,this.damage=35,this.speed=35,this.explosionRange=80,this.triggerRange=50,this.explosionDelay=1e3,this.isTriggered=!1,this.triggerTime=0,this.isDead=!1,this.isMoving=!1,this.lastDirection="down",this.flashTimer=0,this.flashInterval=200,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<28){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=35,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&(s.body.velocity.x-=.4*a,s.body.velocity.y-=.4*r)}}createAnimations(){this.scene.anims.exists("Bomber Run")||this.scene.anims.create({key:"Bomber Run",frames:this.scene.anims.generateFrameNumbers("Bomber_Activited_run_v01",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.textures.exists("bomber_explode")&&!this.scene.anims.exists("Bomber Explode")&&this.scene.anims.create({key:"Bomber Explode",frames:this.scene.anims.generateFrameNumbers("bomber_explode",{start:0,end:5}),frameRate:15,repeat:0}),this.scene.anims.exists("BomberDeath")||this.scene.anims.create({key:"BomberDeath",frames:this.scene.anims.generateFrameNumbers("Bomber_Death_v01",{start:0,end:6}),frameRate:6,repeat:0}),this.scene.anims.exists("Bomber Idle")||this.scene.anims.create({key:"Bomber Idle",frames:[{key:"Bomber_Activited_run_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-22,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-22,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-15),this.healthBarFg.setPosition(this.x-17.5,this.y-15);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e,this.isTriggered&&(this.healthBarBg.setFillStyle(16755200),this.healthBarFg.setFillStyle(16711680))}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isTriggered&&s<=this.triggerRange&&this.triggerExplosion(e),this.isTriggered&&(this.handleTriggeredState(e),e-this.triggerTime>=this.explosionDelay))return void this.explode();const n=this.isTriggered?1.5*this.speed:this.speed;if(s>10){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=this.isTriggered?.15:.11,i=Math.cos(e)*n*s,a=Math.sin(e)*n*s;this.body.velocity.x+=i,this.body.velocity.y+=a,this.body.velocity.x*=.88,this.body.velocity.y*=.88,this.isTriggered||this.applyZombieAvoidance();const r=n,o=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(o>r){const e=r/o;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(e)}else{this.body.velocity.x*=.8,this.body.velocity.y*=.8;const e=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=e>3}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Bomber update:",s)}}triggerExplosion(e){this.isTriggered=!0,this.triggerTime=e,this.setTint(16737792),this.scene.sound&&this.scene.sound.get("bomber_trigger")&&this.scene.sound.play("bomber_trigger")}handleTriggeredState(e){const t=this.explosionDelay-(e-this.triggerTime),s=Math.max(50,.2*t);e-this.flashTimer>s&&(16777215===this.tint?this.setTint(16711680):this.clearTint(),this.flashTimer=e)}explode(){this.isDead||(this.isDead=!0,this.body.enable=!1,this.createExplosionEffect(),this.dealExplosionDamage(),this.scene.sound&&this.scene.sound.get("explosion")&&this.scene.sound.play("explosion"),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("BomberDeath",!1),this.once("animationcomplete",(e=>{"BomberDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}createExplosionEffect(){const e=this.scene.add.circle(this.x,this.y,0,16729088,.7);e.setDepth(100),this.scene.tweens.add({targets:e,radius:this.explosionRange,alpha:0,duration:400,ease:"Power2",onComplete:()=>e.destroy()})}dealExplosionDamage(){const e=this.scene.player;if(e&&e.active){const t=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(t<=this.explosionRange){const s=1-t/this.explosionRange,n=Math.floor(this.damage*s);e.takeDamage&&e.takeDamage(n)}}this.scene.zombieGroup&&this.scene.zombieGroup.children.entries.forEach((e=>{if(e===this||e.isDead||!e.active)return;const t=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(t<=this.explosionRange){const s=1-t/this.explosionRange,n=Math.floor(.5*this.damage*s);e.takeDamage&&e.takeDamage(n)}}))}applyZombieAvoidance(){if(!this.scene.zombieGroup)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<30&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=18*(1-i/30);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.07*e,this.body.velocity.y+=.07*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isMoving?(this.anims.isPlaying&&"Bomber Run"===this.anims.currentAnim.key||(this.play("Bomber Run"),this.isTriggered&&(this.anims.msPerFrame=80)),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)):this.anims.isPlaying&&"Bomber Idle"===this.anims.currentAnim.key||this.play("Bomber Idle")}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(120,(()=>{this.active&&!this.isTriggered&&this.clearTint()})),this.health<=0&&this.explode())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,4);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-20,20),t=Phaser.Math.Between(-20,20);this.scene.spawnExperienceOrb(this.x+e,this.y+t,3)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-10,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.9:1,s=this.isTriggered?1.2:1;this.shadow.setScale(e*t*s)}}}class Nz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"saber_run_53x53_v01",i??0),e.physics.add.existing(this,!1),this.body.setSize(36,36,!1),this.body.setOffset(8,8),this.maxHealth=60,this.health=this.maxHealth,this.damage=20,this.speed=55,this.attackRange=35,this.attackCooldown=600,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.dashCooldown=3e3,this.lastDashTime=0,this.dashSpeed=120,this.dashDuration=300,this.isDashing=!1,this.dashStartTime=0,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<32){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=25,a=Math.cos(n)*i,r=Math.sin(n)*i;t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r,s&&!s.isDashing&&(s.body.velocity.x-=.2*a,s.body.velocity.y-=.2*r)}}createAnimations(){this.scene.anims.exists("Saber Run")||this.scene.anims.create({key:"Saber Run",frames:this.scene.anims.generateFrameNumbers("saber_run_53x53_v01",{start:0,end:7}),frameRate:12,repeat:-1}),this.scene.anims.exists("SaberDeath")||this.scene.anims.create({key:"SaberDeath",frames:this.scene.anims.generateFrameNumbers("saber_death_53x53_v01",{start:0,end:17}),frameRate:6,repeat:0}),this.scene.textures.exists("saber_attack")&&!this.scene.anims.exists("Saber Attack")&&this.scene.anims.create({key:"Saber Attack",frames:this.scene.anims.generateFrameNumbers("saber_attack",{start:0,end:5}),frameRate:15,repeat:0}),this.scene.textures.exists("saber_dash")&&!this.scene.anims.exists("Saber Dash")&&this.scene.anims.create({key:"Saber Dash",frames:this.scene.anims.generateFrameNumbers("saber_dash",{start:0,end:3}),frameRate:20,repeat:-1}),this.scene.anims.exists("Saber Idle")||this.scene.anims.create({key:"Saber Idle",frames:[{key:"saber_run_53x53_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,38,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-19,this.y-25,38,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-18),this.healthBarFg.setPosition(this.x-19,this.y-18);const e=this.health/this.maxHealth;this.healthBarFg.width=38*e,this.isDashing?(this.healthBarBg.setFillStyle(43775),this.healthBarFg.setFillStyle(65535)):(this.healthBarBg.setFillStyle(16711680),this.healthBarFg.setFillStyle(65280))}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isDashing&&e-this.lastDashTime>this.dashCooldown&&s>80&&s<200&&this.startDash(t,e),this.isDashing)return void this.handleDash(e);if(s>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.14,n=Math.sin(e)*this.speed*.14;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.92,this.body.velocity.y*=.92,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.isAttacking=!1,this.updateDirection(e)}else{this.body.velocity.x*=.85,this.body.velocity.y*=.85;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>4,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Saber update:",s)}}startDash(e,t){this.isDashing=!0,this.dashStartTime=t,this.lastDashTime=t;const s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.body.velocity.x=Math.cos(s)*this.dashSpeed,this.body.velocity.y=Math.sin(s)*this.dashSpeed,this.setTint(65535),this.scene.sound&&this.scene.sound.get("saber_dash")&&this.scene.sound.play("saber_dash"),this.updateDirection(s)}handleDash(e){e-this.dashStartTime>=this.dashDuration&&(this.isDashing=!1,this.clearTint(),this.body.velocity.x*=.3,this.body.velocity.y*=.3),this.isMoving=!0,this.updateAnimation()}applyZombieAvoidance(){if(!this.scene.zombieGroup||this.isDashing)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<28&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=12*(1-i/28);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.05*e,this.body.velocity.y+=.05*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isDashing?this.scene.anims.exists("Saber Dash")?this.anims.isPlaying&&"Saber Dash"===this.anims.currentAnim.key||this.play("Saber Dash"):this.anims.isPlaying&&"Saber Run"===this.anims.currentAnim.key||this.play("Saber Run"):this.isAttacking?this.scene.anims.exists("Saber Attack")&&(this.anims.isPlaying&&"Saber Attack"===this.anims.currentAnim.key||this.play("Saber Attack")):this.isMoving?this.anims.isPlaying&&"Saber Run"===this.anims.currentAnim.key||this.play("Saber Run"):this.anims.isPlaying&&"Saber Idle"===this.anims.currentAnim.key||this.play("Saber Idle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.scene.anims.exists("Saber Attack")?(this.play("Saber Attack"),this.scene.time.delayedCall(200,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage),this.isAttacking=!1}))):(e.takeDamage(this.damage),this.scene.time.delayedCall(300,(()=>{this.isAttacking=!1}))),this.setTint(16776960),this.scene.time.delayedCall(100,(()=>{this.active&&!this.isDashing&&this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(100,(()=>{!this.active||this.isDashing||this.isAttacking||this.clearTint()})),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.stop(),this.play("SaberDeath",!1),this.once("animationcomplete",(e=>{"SaberDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,2)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,24,12),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+16);const e=this.isMoving?.9:1;this.shadow.setScale(e)}}}class Lz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"guradian_walk224x45",i??0),e.physics.add.existing(this,!1),this.body.setSize(60,40,!1),this.body.setOffset(82,25),this.maxHealth=200,this.health=this.maxHealth,this.damage=35,this.speed=25,this.attackRange=60,this.attackCooldown=2e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isAttacking=!1,this.lastDirection="down",this.chargeAbilityCooldown=8e3,this.lastChargeTime=0,this.isCharging=!1,this.chargeSpeed=100,this.chargeDuration=1e3,this.chargeStartTime=0,this.chargeDistance=150,this.shieldAbilityCooldown=12e3,this.lastShieldTime=0,this.isShielded=!1,this.shieldDuration=4e3,this.shieldStartTime=0,this.createAnimations(),this.addToZombieGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToZombieGroup(e){e.zombieGroup||(e.zombieGroup=e.physics.add.group(),e.physics.add.collider(e.zombieGroup,e.zombieGroup,this.handleZombieCollision,null,e)),e.zombieGroup.add(this)}handleZombieCollision(e,t,s){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<50){const n=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),i=60,a=Math.cos(n)*i,r=Math.sin(n)*i;s===e?(t.body.velocity.x+=2*a,t.body.velocity.y+=2*r,s.body.velocity.x-=.1*a,s.body.velocity.y-=.1*r):s===t?(e.body.velocity.x-=2*a,e.body.velocity.y-=2*r,s.body.velocity.x+=.1*a,s.body.velocity.y+=.1*r):(t.body.velocity.x+=a,t.body.velocity.y+=r,e.body.velocity.x-=a,e.body.velocity.y-=r)}}createAnimations(){this.scene.anims.exists("Guardian Run")||this.scene.anims.create({key:"Guardian Run",frames:this.scene.anims.generateFrameNumbers("guradian_walk224x45",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("guardianDeath")||this.scene.anims.create({key:"guardianDeath",frames:this.scene.anims.generateFrameNumbers("guardian_death_224x45",{start:0,end:6}),frameRate:6,repeat:0}),this.scene.textures.exists("guardian_attack")&&!this.scene.anims.exists("Guardian Attack")&&this.scene.anims.create({key:"Guardian Attack",frames:this.scene.anims.generateFrameNumbers("guardian_attack",{start:0,end:5}),frameRate:10,repeat:0}),this.scene.textures.exists("guardian_charge")&&!this.scene.anims.exists("Guardian Charge")&&this.scene.anims.create({key:"Guardian Charge",frames:this.scene.anims.generateFrameNumbers("guardian_charge",{start:0,end:3}),frameRate:15,repeat:-1}),this.scene.anims.exists("Guardian Idle")||this.scene.anims.create({key:"Guardian Idle",frames:[{key:"guradian_walk224x45",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-30,60,8,6684672),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-30,this.y-30,60,8,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.shieldIndicator=this.scene.add.rectangle(this.x,this.y-40,60,4,43775),this.shieldIndicator.setOrigin(.5,.5),this.shieldIndicator.setDepth(21),this.shieldIndicator.setVisible(!1),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy(),this.shieldIndicator&&this.shieldIndicator.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-20),this.healthBarFg.setPosition(this.x-30,this.y-20),this.shieldIndicator&&(this.shieldIndicator.setPosition(this.x,this.y-30),this.shieldIndicator.setVisible(this.isShielded));const e=this.health/this.maxHealth;this.healthBarFg.width=60*e,e>.6?this.healthBarFg.setFillStyle(65280):e>.3?this.healthBarFg.setFillStyle(16755200):this.healthBarFg.setFillStyle(16711680)}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);if(!this.isShielded&&e-this.lastShieldTime>this.shieldAbilityCooldown&&this.health<.5*this.maxHealth&&this.activateShield(e),this.isShielded&&e-this.shieldStartTime>=this.shieldDuration&&this.deactivateShield(),!this.isCharging&&e-this.lastChargeTime>this.chargeAbilityCooldown&&s>100&&s<300&&this.startCharge(t,e),this.isCharging)return void this.handleCharge(e);if(s>this.attackRange){const e=Phaser.Math.Angle.Between(this.x,this.y,t.x,t.y),s=Math.cos(e)*this.speed*.08,n=Math.sin(e)*this.speed*.08;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.8,this.body.velocity.y*=.8,this.applyZombieAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.isAttacking=!1,this.updateDirection(e)}else{this.body.velocity.x*=.6,this.body.velocity.y*=.6;const s=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);this.isMoving=s>3,e-this.lastAttackTime>this.attackCooldown&&(this.attackPlayer(t),this.lastAttackTime=e)}this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Guardian update:",s)}}activateShield(e){this.isShielded=!0,this.shieldStartTime=e,this.lastShieldTime=e,this.setTint(4491519),this.scene.sound&&this.scene.sound.get("guardian_shield")&&this.scene.sound.play("guardian_shield")}deactivateShield(){this.isShielded=!1,this.clearTint()}startCharge(e,t){this.isCharging=!0,this.chargeStartTime=t,this.lastChargeTime=t;const s=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.body.velocity.x=Math.cos(s)*this.chargeSpeed,this.body.velocity.y=Math.sin(s)*this.chargeSpeed,this.setTint(16729088),this.scene.sound&&this.scene.sound.get("guardian_charge")&&this.scene.sound.play("guardian_charge"),this.updateDirection(s)}handleCharge(e){e-this.chargeStartTime>=this.chargeDuration&&(this.isCharging=!1,this.isShielded||this.clearTint(),this.body.velocity.x*=.2,this.body.velocity.y*=.2);const t=this.scene.player;t&&t.active&&Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)<40&&(t.takeDamage&&t.takeDamage(1.5*this.damage),this.isCharging=!1,this.isShielded||this.clearTint()),this.isMoving=!0,this.updateAnimation()}applyZombieAvoidance(){if(!this.scene.zombieGroup||this.isCharging)return;let e=0,t=0,s=0;this.scene.zombieGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<40&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=8*(1-i/40);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.03*e,this.body.velocity.y+=.03*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isCharging?this.scene.anims.exists("Guardian Charge")?this.anims.isPlaying&&"Guardian Charge"===this.anims.currentAnim.key||this.play("Guardian Charge"):this.anims.isPlaying&&"Guardian Run"===this.anims.currentAnim.key||this.play("Guardian Run"):this.isAttacking?this.scene.anims.exists("Guardian Attack")&&(this.anims.isPlaying&&"Guardian Attack"===this.anims.currentAnim.key||this.play("Guardian Attack")):this.isMoving?this.anims.isPlaying&&"Guardian Run"===this.anims.currentAnim.key||this.play("Guardian Run"):this.anims.isPlaying&&"Guardian Idle"===this.anims.currentAnim.key||this.play("Guardian Idle"),"right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0)}attackPlayer(e){e&&e.takeDamage&&(this.isAttacking=!0,this.scene.anims.exists("Guardian Attack")?(this.play("Guardian Attack"),this.scene.time.delayedCall(500,(()=>{e&&e.takeDamage&&!this.isDead&&e.takeDamage(this.damage),this.isAttacking=!1}))):(e.takeDamage(this.damage),this.scene.time.delayedCall(600,(()=>{this.isAttacking=!1}))),this.setTint(16737792),this.scene.time.delayedCall(200,(()=>{!this.active||this.isCharging||this.isShielded||this.clearTint()})),this.lastAttackTime=this.scene.time.now)}takeDamage(e){this.isDead||(this.isShielded&&(e=Math.floor(.3*e)),this.health-=e,this.updateHealthBar(),this.isShielded||this.isCharging||(this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{!this.active||this.isShielded||this.isCharging||this.clearTint()}))),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.stop(),this.play("guardianDeath",!1),this.once("animationcomplete",(e=>{"guardianDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.scene.zombieGroup&&this.scene.zombieGroup.remove(this),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(8,12);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-30,30),t=Phaser.Math.Between(-30,30);this.scene.spawnExperienceOrb(this.x+e,this.y+t,5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,50,25),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+20);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Fz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??64,s??64,n||"Charger_run_32x32_v01",i??0),e.physics.add.existing(this,!1),this.body.setSize(32,32,!1),this.body.setOffset(0,0),this.maxHealth=60,this.health=this.maxHealth,this.damage=35,this.speed=50,this.chargeSpeed=120,this.attackRange=80,this.chargeRange=150,this.attackCooldown=2e3,this.lastAttackTime=0,this.isDead=!1,this.isMoving=!1,this.isCharging=!1,this.isAttacking=!1,this.chargeStartTime=0,this.chargeDuration=800,this.attackDuration=400,this.chargeDirection={x:0,y:0},this.lastDirection="down",this.createAnimations(),this.addToChargerGroup(e),this.createShadow(),this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}addToChargerGroup(e){e.chargerGroup||(e.chargerGroup=e.physics.add.group(),e.physics.add.collider(e.chargerGroup,e.chargerGroup,this.handleChargerCollision,null,e)),e.chargerGroup.add(this)}handleChargerCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<35){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=50,i=Math.cos(s)*n,a=Math.sin(s)*n;t.body.velocity.x+=i,t.body.velocity.y+=a,e.body.velocity.x-=i,e.body.velocity.y-=a}}createAnimations(){this.scene.anims.exists("Charger Run")||this.scene.anims.create({key:"Charger Run",frames:this.scene.anims.generateFrameNumbers("Charger_run_32x32_v01",{start:0,end:7}),frameRate:8,repeat:-1}),this.scene.anims.exists("chargerDeath")||this.scene.anims.create({key:"chargerDeath",frames:this.scene.anims.generateFrameNumbers("Charger_death_50x31_v01",{start:0,end:4}),frameRate:6,repeat:0}),this.scene.anims.exists("Charger Charge")||this.scene.anims.create({key:"Charger Charge",frames:this.scene.anims.generateFrameNumbers("Charger_run_32x32_v01",{start:0,end:7}),frameRate:12,repeat:-1}),this.scene.anims.exists("chargerAttack")||this.scene.anims.create({key:"chargerAttack",frames:this.scene.anims.generateFrameNumbers("chargerAttack",{start:0,end:9}),frameRate:10,repeat:0}),this.scene.anims.exists("Charger Idle")||this.scene.anims.create({key:"Charger Idle",frames:[{key:"Charger_run_32x32_v01",frame:0}],frameRate:1,repeat:0})}createHealthBar(){this.healthBarBg=this.scene.add.rectangle(this.x,this.y-25,35,5,16711680),this.healthBarBg.setOrigin(.5,.5),this.healthBarBg.setDepth(1),this.healthBarFg=this.scene.add.rectangle(this.x-17.5,this.y-25,35,5,65280),this.healthBarFg.setOrigin(0,.5),this.healthBarFg.setDepth(20),this.on("destroy",(()=>{this.healthBarBg&&this.healthBarBg.destroy(),this.healthBarFg&&this.healthBarFg.destroy()})),this.updateHealthBar()}updateHealthBar(){if(!this.healthBarFg||!this.healthBarBg)return;this.healthBarBg.setPosition(this.x,this.y-20),this.healthBarFg.setPosition(this.x-17.5,this.y-20);const e=this.health/this.maxHealth;this.healthBarFg.width=35*e}update(e,t){if(!this.isDead&&this.active)try{this.updateHealthBar();const t=this.scene.player;if(!t)return;const s=Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y);this.isAttacking?this.updateAttack(e):this.isCharging?this.updateCharge(e):s<=this.attackRange&&s>20&&e-this.lastAttackTime>this.attackCooldown?this.startCharge(t):s>this.attackRange?this.moveTowardPlayer(t):(this.body.velocity.x*=.8,this.body.velocity.y*=.8,this.isMoving=Math.abs(this.body.velocity.x)>5||Math.abs(this.body.velocity.y)>5),this.updateAnimation(),this.updateShadowPosition()}catch(s){console.error("Error in Charger update:",s)}}startCharge(e){this.isCharging=!0,this.chargeStartTime=this.scene.time.now,this.lastAttackTime=this.scene.time.now;const t=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y);this.chargeDirection.x=Math.cos(t),this.chargeDirection.y=Math.sin(t),this.updateDirection(t),this.setTint(16755200),this.scene.time.delayedCall(100,(()=>{this.active&&this.clearTint()}))}updateCharge(e){if(e-this.chargeStartTime<this.chargeDuration){this.body.velocity.x=this.chargeDirection.x*this.chargeSpeed,this.body.velocity.y=this.chargeDirection.y*this.chargeSpeed,this.isMoving=!0;const e=this.scene.player;e&&Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y)<25&&this.startAttack(e)}else this.isCharging=!1,this.body.velocity.x*=.3,this.body.velocity.y*=.3}startAttack(e){this.isAttacking||(this.isAttacking=!0,this.isCharging=!1,this.attackStartTime=this.scene.time.now,this.body.velocity.x=0,this.body.velocity.y=0,this.play("chargerAttack"),this.once("animationcomplete",(e=>{"chargerAttack"===e.key&&this.endAttack()})),this.hitPlayer(e))}updateAttack(e){this.body.velocity.x=0,this.body.velocity.y=0,this.isMoving=!1,e-this.attackStartTime>this.attackDuration&&this.endAttack()}endAttack(){this.isAttacking=!1,this.attackStartTime=0}moveTowardPlayer(e){const t=Phaser.Math.Angle.Between(this.x,this.y,e.x,e.y),s=Math.cos(t)*this.speed*.1,n=Math.sin(t)*this.speed*.1;this.body.velocity.x+=s,this.body.velocity.y+=n,this.body.velocity.x*=.85,this.body.velocity.y*=.85,this.applyChargerAvoidance();const i=this.speed,a=Math.sqrt(this.body.velocity.x*this.body.velocity.x+this.body.velocity.y*this.body.velocity.y);if(a>i){const e=i/a;this.body.velocity.x*=e,this.body.velocity.y*=e}this.isMoving=!0,this.updateDirection(t)}applyChargerAvoidance(){if(!this.scene.chargerGroup)return;let e=0,t=0,s=0;this.scene.chargerGroup.children.entries.forEach((n=>{if(n===this||n.isDead)return;const i=Phaser.Math.Distance.Between(this.x,this.y,n.x,n.y);if(i<40&&i>0){const a=Phaser.Math.Angle.Between(n.x,n.y,this.x,this.y),r=25*(1-i/40);e+=Math.cos(a)*r,t+=Math.sin(a)*r,s++}})),s>0&&(this.body.velocity.x+=.1*e,this.body.velocity.y+=.1*t)}updateDirection(e){const t=Phaser.Math.RadToDeg(e);this.lastDirection=t>=-45&&t<45?"right":t>=45&&t<135?"down":t>=135||t<-135?"left":"up"}updateAnimation(){this.isAttacking||(this.isCharging?this.anims.isPlaying&&"Charger Charge"===this.anims.currentAnim.key||this.play("Charger Charge"):this.isMoving?this.anims.isPlaying&&"Charger Run"===this.anims.currentAnim.key||this.play("Charger Run"):this.anims.isPlaying&&"Charger Idle"===this.anims.currentAnim.key||this.play("Charger Idle")),this.isAttacking||("right"===this.lastDirection?this.setFlipX(!1):"left"===this.lastDirection&&this.setFlipX(!0))}hitPlayer(e){e&&e.takeDamage&&!this.isDead&&(e.takeDamage(this.damage),this.setTint(16729088),this.scene.time.delayedCall(200,(()=>{this.active&&this.clearTint()})))}takeDamage(e){this.isDead||(this.health-=e,this.updateHealthBar(),this.setTint(16711680),this.scene.time.delayedCall(150,(()=>{this.active&&this.clearTint()})),this.isCharging&&(this.isCharging=!1,this.body.velocity.x*=.5,this.body.velocity.y*=.5),this.isAttacking&&this.endAttack(),this.health<=0&&this.die())}die(){this.isDead||(this.isDead=!0,this.isCharging=!1,this.isAttacking=!1,this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene&&this.scene.chargerGroup&&this.scene.chargerGroup.children&&this.scene.chargerGroup.remove(this),this.stop(),this.play("chargerDeath",!1),this.once("animationcomplete",(e=>{"chargerDeath"===e.key&&this.cleanupAndDestroy()})),this.shadow&&(this.shadow.destroy(),this.shadow=null),this.spawnRewards())}spawnRewards(){try{if(this.scene.spawnExperienceOrb){const e=Phaser.Math.Between(2,5);for(let t=0;t<e;t++){const e=Phaser.Math.Between(-12,12),t=Phaser.Math.Between(-12,12);this.scene.spawnExperienceOrb(this.x+e,this.y+t,1.5)}}}catch(e){console.error("Error spawning rewards:",e)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){this.shadow&&(this.shadow.destroy(),this.shadow=null);try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null),this.scene&&this.scene.chargerGroup&&this.scene.chargerGroup.children&&this.scene.chargerGroup.remove(this)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,-14,20,10),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+18);const e=1,t=this.isMoving?.9:1,s=this.isCharging?1.3:1,n=this.isAttacking?1.1:1;this.shadow.setScale(e*t*s*n)}}}const Oz={maxDistanceFromPlayer:450,teleportRange:{min:300,max:350},teleportCheckInterval:100,maxTeleportsPerCheck:10,effects:{teleportOutColor:8913151,teleportInColor:65535,effectDuration:400,mobFlashDuration:10,effectRadius:5,effectDepth:-10},debug:{logTeleportations:!1,showEffectsInDebug:!0}},jz={zombie:{class:Ez,texture:"zombierun",baseHealth:30,baseDamage:10,baseSpeed:50,expValue:10,goldValue:5,spawnWeight:50,minWave:1,expDropChance:.8,goldDropChance:.4},zombieBig:{class:Sz,texture:"Zombie2RunAni",baseHealth:50,baseDamage:20,baseSpeed:40,expValue:20,goldValue:15,spawnWeight:25,minWave:1,expDropChance:.85,goldDropChance:.5},policeDroid:{class:Pz,texture:"Police run",baseHealth:35,baseDamage:1,baseSpeed:55,expValue:15,goldValue:10,spawnWeight:20,minWave:1,expDropChance:.82,goldDropChance:.45},assassin:{class:Tz,texture:"Dagger Bandit-Run",baseHealth:25,baseDamage:25,baseSpeed:70,expValue:25,goldValue:20,spawnWeight:15,minWave:2,expDropChance:.9,goldDropChance:.6},assassinTank:{class:Bz,texture:"assassinTank",baseHealth:80,baseDamage:30,baseSpeed:30,expValue:40,goldValue:35,spawnWeight:8,minWave:2,expDropChance:.95,goldDropChance:.75},assassinArcher:{class:Cz,texture:"assassinArcher",baseHealth:20,baseDamage:18,baseSpeed:45,expValue:30,goldValue:25,spawnWeight:12,minWave:2,expDropChance:.92,goldDropChance:.7},bigDude:{class:Mz,texture:"run_2",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},wreacker:{class:Rz,texture:"WreackerRun",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},choppor:{class:Dz,texture:"Warrior-Run",baseHealth:30,baseDamage:22,baseSpeed:35,expValue:50,goldValue:35,spawnWeight:14,minWave:3,expDropChance:.42,goldDropChance:.6},bomber:{class:_z,texture:"Bomber_Activited_run_v01",baseHealth:10,baseDamage:42,baseSpeed:35,expValue:20,goldValue:15,spawnWeight:14,minWave:4,expDropChance:.42,goldDropChance:.6},saber:{class:Nz,texture:"saber_run_53x53_v01",baseHealth:10,baseDamage:42,baseSpeed:40,expValue:20,goldValue:25,spawnWeight:4,minWave:4,expDropChance:.42,goldDropChance:.6},guardian:{class:Lz,texture:"guradian_walk224x45",baseHealth:90,baseDamage:22,baseSpeed:30,expValue:50,goldValue:35,spawnWeight:14,minWave:4,expDropChance:.42,goldDropChance:.6},crawler:{class:Iz,texture:"crawler_run_32x16_v01",baseHealth:10,baseDamage:12,baseSpeed:45,expValue:20,goldValue:15,spawnWeight:14,minWave:5,expDropChance:.42,goldDropChance:.6},charger:{class:Fz,texture:"harger_run_32x32_v01",baseHealth:90,baseDamage:32,baseSpeed:45,expValue:24,goldValue:35,spawnWeight:14,minWave:5,expDropChance:.42,goldDropChance:.6}};class Uz{constructor(e){this.scene=e,this.gameManager=null,this.player=null,this.mobGroup=null,this.activeMobs=new Map,this.spawnTimer=null,this.waveTimer=null,this.maxMobs=100,this.spawnDelay=2e3,this.currentWave=0,this.waveActive=!1,this.waveMobs=[],this.walkingAreaData=null,this.walkablePositions=[],this.tileSize=32,this.mapWidth=80,this.mapHeight=80,this.isWalkingAreaInitialized=!1,this.teleportConfig=Oz,this.lastTeleportCheck=0,this.lastObstacleCheck=0,this.enableObstacleTeleport=!0,this.stats={totalSpawned:0,totalKilled:0,killsByType:new Map,totalTeleported:0},Object.keys(jz).forEach((e=>{this.stats.killsByType.set(e,0)}))}initialize(e,t){this.gameManager=e,this.player=t,this.setupMobGroup(),this.startSpawning(),this.setupEventListeners()}setupMobGroup(){this.mobGroup=this.scene.physics.add.group(),this.scene.physics.add.collider(this.mobGroup,this.mobGroup,this.handleMobCollision,null,this),this.scene.zombieGroup=this.mobGroup,this.scene.enemies=this.mobGroup}startSpawning(){this.spawnTimer=this.scene.time.addEvent({delay:this.spawnDelay,callback:()=>this.spawnRandomMob(),loop:!0}),this.waveTimer=this.scene.time.addEvent({delay:2e4,callback:()=>this.triggerNextWave(),loop:!1})}triggerNextWave(){const e=this.currentWave+1;this.startWave(e),this.waveTimer&&this.waveTimer.destroy(),this.waveTimer=this.scene.time.addEvent({delay:2e4,callback:()=>this.triggerNextWave(),loop:!1})}setupEventListeners(){var e;(null==(e=this.gameManager)?void 0:e.events)&&this.gameManager.events.on("difficultyUpdated",this.updateDifficulty,this)}spawnMob(e,t,s){const n=jz[e];if(!n)return console.warn(`Unknown mob type: ${e}`),null;try{const i=new n.class(this.scene,t,s);return this.applyStats(i,n),this.setupMobProperties(i,e),this.scene.add.existing(i),this.mobGroup.add(i),this.trackMob(i,e),this.stats.totalSpawned++,i}catch(i){return console.error(`Error spawning ${e}:`,i),null}}applyStats(e,t){var s,n;const i=(null==(n=null==(s=this.gameManager)?void 0:s.gameProgress)?void 0:n.currentDifficulty)||1,a=.1*this.currentWave,r=1+.2*(i-1)+a,o=1+.1*(i-1)+.5*a,l=1+.05*(i-1);e.maxHealth=Math.floor(t.baseHealth*r),e.health=e.maxHealth,e.damage=Math.floor(t.baseDamage*o),e.speed=Math.floor(t.baseSpeed*l),e.expValue=Math.floor(t.expValue*(1+a)),e.goldValue=Math.floor(t.goldValue*(1+a)),e.expDropChance=t.expDropChance,e.goldDropChance=t.goldDropChance}setupMobProperties(e,t){var s;e.mobType=t,e.spawnTime=Date.now(),e.isWaveMob=this.waveActive,this.addSpecialAbilities(e,t);const n=null==(s=e.die)?void 0:s.bind(e);e.die=()=>{this.handleMobDeath(e),n&&n()},e.spawnRewards=()=>this.spawnMobRewards(e)}addSpecialAbilities(e,t){const s={policeDroid:{type:"projectile",range:200,cooldown:2e3,speed:150,color:16711680,size:3},zombieBig:{type:"explosion",range:80,damage:15,color:16729156},assassinArcher:{type:"projectile",range:250,cooldown:2500,speed:120,color:16711680,size:2}}[t];s&&("projectile"===s.type?this.addProjectileAttack(e,s):"explosion"===s.type&&this.addDeathExplosion(e,s))}addProjectileAttack(e,t){e.projectileConfig=t,e.lastProjectileTime=0,e.hasProjectileAttack=!0}addDeathExplosion(e,t){var s;e.explosionConfig=t;const n=null==(s=e.die)?void 0:s.bind(e);e.die=()=>{this.createDeathExplosion(e,t),n&&n()}}updateMobAbilities(e,t){this.getAllActiveMobs().forEach((t=>{t.hasProjectileAttack&&this.updateProjectileAttack(t,e)}))}updateProjectileAttack(e,t){if(!this.player||e.isDead||!e.projectileConfig)return;const s=Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y),n=e.projectileConfig;s<=n.range&&t-e.lastProjectileTime>n.cooldown&&(this.fireProjectile(e,n),e.lastProjectileTime=t)}fireProjectile(e,t){if(!this.player)return;const s=this.scene.add.circle(e.x,e.y,t.size,t.color);s.setStrokeStyle(1,0),this.scene.physics.add.existing(s),s.body.setCircle(t.size),s.setDepth(15);const n=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y);s.body.setVelocity(Math.cos(n)*t.speed,Math.sin(n)*t.speed);const i=this.scene.physics.add.overlap(this.player,s,(()=>{this.player.takeDamage&&this.player.takeDamage(e.damage),this.createHitEffect(s.x,s.y),i.destroy(),s.destroy()}));this.scene.time.delayedCall(3e3,(()=>{s&&s.active&&(i.destroy(),s.destroy())})),this.createMuzzleFlash(e)}createMuzzleFlash(e){const t=this.scene.add.circle(e.x,e.y,12,16776960,.8);t.setDepth(-20),this.scene.tweens.add({targets:t,scale:{from:1,to:2},alpha:{from:.8,to:0},duration:200,onComplete:()=>t.destroy()})}createHitEffect(e,t){const s=this.scene.add.circle(e,t,8,16711680,.7);s.setDepth(25),this.scene.tweens.add({targets:s,scale:{from:.5,to:1.5},alpha:{from:.7,to:0},duration:300,onComplete:()=>s.destroy()})}createDeathExplosion(e,t){if(!this.player)return;const s=this.scene.add.circle(e.x,e.y,t.range,t.color,.6);if(s.setDepth(30),this.scene.tweens.add({targets:s,scale:{from:0,to:1.5},alpha:{from:.6,to:0},duration:500,onComplete:()=>s.destroy()}),Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)<=t.range&&(this.player.takeDamage&&this.player.takeDamage(t.damage),this.player.body)){const t=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y),s=150;this.player.body.velocity.x+=Math.cos(t)*s,this.player.body.velocity.y+=Math.sin(t)*s}this.getAllActiveMobs().forEach((s=>{s===e||s.isDead||Phaser.Math.Distance.Between(e.x,e.y,s.x,s.y)<=t.range&&s.takeDamage&&s.takeDamage(Math.floor(.5*t.damage))})),this.scene.cameras.main.shake(200,.005)}spawnMobRewards(e){try{this.trySpawnExperienceOrb(e),this.trySpawnGoldOrb(e)}catch(t){console.error("Error spawning mob rewards:",t)}}trySpawnExperienceOrb(e){const t=jz[e.mobType];if(!t)return;let s=t.expDropChance||.8;if(e.isSpecialWave&&(s*=1.2),"boss"===e.specialWaveType&&(s=1),"elite"===e.specialWaveType&&(s=Math.min(1,1.1*s)),Math.random()<s){let t=1;e.expValue&&(t=e.expValue>=40?5:e.expValue>=25?3:e.expValue>=15?2:1),Math.random()<.05&&(t*=3),"boss"===e.specialWaveType&&(t*=5),this.scene.spawnExperienceOrb&&this.scene.spawnExperienceOrb(e.x,e.y,t)}}trySpawnGoldOrb(e){const t=jz[e.mobType];if(!t)return;let s=t.goldDropChance||.4;if(e.isSpecialWave&&(s*=1.3),"boss"===e.specialWaveType&&(s=1),"elite"===e.specialWaveType&&(s=Math.min(1,1.2*s)),Math.random()<s){let s=e.goldValue||t.goldValue;Math.random()<.08&&(s*=2),"boss"===e.specialWaveType&&(s*=3),this.scene.spawnGoldOrb&&this.scene.spawnGoldOrb(e.x,e.y,s)}}trackMob(e,t){const s=`mob_${Date.now()}_${Math.random()}`;e.trackingId=s,this.activeMobs.set(s,{mob:e,type:t,spawnTime:Date.now(),isAlive:!0})}spawnRandomMob(){if(!this.player||this.getActiveMobCount()>=this.maxMobs)return;const e=this.selectMobType(),t=this.getSpawnPosition();return this.spawnMob(e,t.x,t.y)}selectMobType(){var e,t;const s=Math.max((null==(t=null==(e=this.gameManager)?void 0:e.gameProgress)?void 0:t.currentDifficulty)||1,this.currentWave),n=Object.keys(jz).filter((e=>jz[e].minWave<=s)),i=[];return n.forEach((e=>{const t=jz[e].spawnWeight;for(let s=0;s<t;s++)i.push(e)})),Phaser.Utils.Array.GetRandom(i)}getSpawnPosition(){if(!this.player)return{x:1280,y:1280};for(let e=0;e<30;e++){const e=Math.random()*Math.PI*2,t=Phaser.Math.Between(300,500),s=this.player.x+Math.cos(e)*t,n=this.player.y+Math.sin(e)*t;if(this.isPositionOnWalkableTile(s,n))return{x:s,y:n}}return{x:this.player.x+400,y:this.player.y}}isValidSpawnPosition(e,t){const s=[this.scene.map_Col_1,this.scene.backGround];for(const i of s)if(i){const s=Math.floor((e-i.x)/this.tileSize),n=Math.floor((t-i.y)/this.tileSize),a=i.getTileAt(s,n);if(a&&a.collides)return!1}const n=[this.scene.stoneStatuePrefab,this.scene.stoneStatuePrefab_1,this.scene.stoneStatuePrefab_2,this.scene.stoneStatuePrefab_3];for(const i of n)if((null==i?void 0:i.active)&&Phaser.Math.Distance.Between(e,t,i.x,i.y)<100)return!1;return!0}setWalkingAreaFromTilemap(e){e&&e.layer?(this.walkingAreaLayer=e,this.mapWidth=e.layer.width,this.mapHeight=e.layer.height,this.tileSize=e.layer.tileWidth||32,this.isWalkingAreaInitialized=!0):console.warn("Invalid tilemap layer provided")}initializeWalkingArea(e,t=80,s=80,n=32){if(e&&Array.isArray(e)){this.mapWidth=t,this.mapHeight=s,this.tileSize=n,this.walkingAreaData=[];for(let n=0;n<s;n++){this.walkingAreaData[n]=[];for(let s=0;s<t;s++){const i=n*t+s;this.walkingAreaData[n][s]=e[i]||0}}this.cacheWalkablePositions(),this.isWalkingAreaInitialized=!0}}cacheWalkablePositions(){if(this.walkablePositions=[],this.walkingAreaData)for(let e=0;e<this.mapHeight;e++)for(let t=0;t<this.mapWidth;t++)if(this.walkingAreaData[e]&&0!==this.walkingAreaData[e][t]){const s=t*this.tileSize+this.tileSize/2,n=e*this.tileSize+this.tileSize/2;this.walkablePositions.push({tileX:t,tileY:e,worldX:s,worldY:n,tileValue:this.walkingAreaData[e][t]})}}isPositionWalkable(e,t){if(!this.isWalkingAreaInitialized)return!0;const s=Math.floor(e/this.tileSize),n=Math.floor(t/this.tileSize);return this.isTileWalkable(s,n)}isTileWalkable(e,t){return!this.walkingAreaData||!(e<0||e>=this.mapWidth||t<0||t>=this.mapHeight)&&this.walkingAreaData[t]&&0!==this.walkingAreaData[t][e]}getRandomWalkablePosition(){if(0===this.walkablePositions.length)return null;const e=Math.floor(Math.random()*this.walkablePositions.length);return{...this.walkablePositions[e]}}getRandomWalkablePositionNear(e,t,s=100,n=300,i=20){if(!this.isWalkingAreaInitialized){const i=Math.random()*Math.PI*2,a=Phaser.Math.Between(s,n);return{worldX:e+Math.cos(i)*a,worldY:t+Math.sin(i)*a}}for(let r=0;r<i;r++){const i=Math.random()*Math.PI*2,a=Phaser.Math.Between(s,n),r=e+Math.cos(i)*a,o=t+Math.sin(i)*a;if(this.isPositionWalkable(r,o))return{worldX:r,worldY:o}}const a=this.getRandomWalkablePosition();return a?{worldX:a.worldX,worldY:a.worldY}:null}getWalkableSpawnPosition(){if(!this.player){const e=this.getRandomWalkablePosition();return e?{x:e.worldX,y:e.worldY}:{x:0,y:0}}const e=this.getRandomWalkablePositionNear(this.player.x,this.player.y,300,500);return e?{x:e.worldX,y:e.worldY}:{x:this.player.x+400,y:this.player.y}}startWave(e){this.currentWave=e,this.waveActive=!0,this.waveMobs=[],PC.emit("wave-notification",{wave:e});const t=this.calculateWaveSize(e),s=this.getSpecialWaveType(e);s?this.startSpecialWave(e,s):this.startNormalWave(e,t)}startNormalWave(e,t){for(let s=0;s<t;s++)this.scene.time.delayedCall(100*s,(()=>{const e=this.selectMobType(),t=this.getSpawnPosition(),s=this.spawnMob(e,t.x,t.y);s&&this.waveMobs.push(s)}))}startSpecialWave(e,t){const s={swarm:{count:Math.min(15+3*e,30),types:["zombie"]},elite:{count:Math.floor(.4*this.calculateWaveSize(e)),types:["assassinTank","assassinArcher"]},mixed:{count:Math.floor(1.3*this.calculateWaveSize(e)),types:Object.keys(jz)},boss:{count:Math.max(1,Math.floor(e/10)),types:["assassinTank"]}}[t];if(s)for(let n=0;n<s.count;n++)this.scene.time.delayedCall(100*n,(()=>{const e=Phaser.Utils.Array.GetRandom(s.types),n=this.getSpawnPosition(),i=this.spawnMob(e,n.x,n.y);i&&(this.applySpecialWaveModifiers(i,t),this.waveMobs.push(i),this.createSpawnPortalEffect(n.x,n.y))}));else this.startNormalWave(e,this.calculateWaveSize(e))}applySpecialWaveModifiers(e,t){const s={elite:{healthMult:2,damageMult:1.5,expMult:2,goldMult:2,expChance:1.2,goldChance:1.3},boss:{healthMult:6,damageMult:3,expMult:10,goldMult:15,expChance:1,goldChance:1,tint:16711680}}[t];s&&(e.maxHealth*=s.healthMult,e.health=e.maxHealth,e.damage*=s.damageMult,e.expValue*=s.expMult,e.goldValue*=s.goldMult,e.expDropChance=Math.min(1,e.expDropChance*s.expChance),e.goldDropChance=Math.min(1,e.goldDropChance*s.goldChance),s.tint&&e.setTint(s.tint)),e.isSpecialWave=!0,e.specialWaveType=t}getSpecialWaveType(e){return e%10==0?"boss":e%7==0?"elite":e%5==0?"swarm":e%8==0?"mixed":null}createSpawnPortalEffect(e,t){const s=this.scene.add.circle(e,t,20,8913151,.8);this.scene.tweens.add({targets:s,scale:{from:0,to:2},alpha:{from:.8,to:0},duration:500,onComplete:()=>s.destroy()})}calculateWaveSize(e){var t,s;const n=Math.floor(1.2*e),i=Math.floor(1.5*((null==(s=null==(t=this.gameManager)?void 0:t.gameProgress)?void 0:s.currentDifficulty)||1));return Math.min(25,8+n+i)}checkWaveCompletion(){this.waveActive&&0===this.waveMobs.filter((e=>e&&e.active&&!e.isDead)).length&&this.completeWave()}completeWave(){this.waveActive=!1;const e=this.currentWave,t=this.waveMobs.length>0?this.waveMobs[0].specialWaveType:null;this.waveMobs=[];let s=100*e,n=50*e;const i={swarm:1.5,elite:2,mixed:1.8,boss:3};t&&i[t]&&(s*=i[t],n*=i[t]),this.gameManager&&(this.gameManager.addExperience(s),this.gameManager.addGold(n))}handleMobDeath(e){if(!e.trackingId)return;if(!this.activeMobs.get(e.trackingId))return;this.cleanupMobHealthBar(e),this.stats.totalKilled++;const t=this.stats.killsByType.get(e.mobType)||0;this.stats.killsByType.set(e.mobType,t+1),this.gameManager&&this.gameManager.addEnemyKill(),this.spawnMobRewards(e),e.isWaveMob&&this.checkWaveCompletion(),this.activeMobs.delete(e.trackingId)}cleanupMobHealthBar(e){try{const t=e.x,s=e.y,n=[];this.scene.children.list.forEach((e=>{e&&e.x&&e.y&&Phaser.Math.Distance.Between(e.x,e.y,t,s-20)<40&&("Rectangle"===e.type&&e.displayWidth<=50&&e.displayHeight<=8||"Container"===e.type&&e.getBounds&&e.getBounds().width<=50||"Graphics"===e.type&&e.displayWidth<=50)&&n.push(e)})),n.forEach((e=>{e&&e.active&&e.destroy&&e.destroy()})),["healthBar","healthBarBg","healthBarContainer","healthBarFill","healthBarBackground"].forEach((t=>{e[t]&&e[t].destroy&&(e[t].destroy(),e[t]=null)}))}catch(t){console.error("Error cleaning up mob health bar:",t)}}handleMobCollision(e,t){if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<25){const s=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y),n=20,i=Math.cos(s)*n,a=Math.sin(s)*n;t.body&&(t.body.velocity.x+=i,t.body.velocity.y+=a),e.body&&(e.body.velocity.x-=i,e.body.velocity.y-=a)}}updateDifficulty(e){this.maxMobs=Math.min(60,30+3*e),this.spawnDelay=Math.max(1e3,3e3-200*e),this.spawnTimer&&(this.spawnTimer.delay=this.spawnDelay)}getActiveMobCount(){return Array.from(this.activeMobs.values()).filter((e=>e.isAlive)).length}getAllActiveMobs(){return Array.from(this.activeMobs.values()).filter((e=>e.isAlive)).map((e=>e.mob))}getMobsByType(e){return Array.from(this.activeMobs.values()).filter((t=>t.type===e&&t.isAlive)).map((e=>e.mob))}killAllMobs(){this.getAllActiveMobs().forEach((e=>{e.takeDamage&&e.takeDamage(9999)}))}getWaveProgress(){return this.waveActive?{completed:!1,remaining:this.waveMobs.filter((e=>e.active&&!e.isDead)).length,total:this.waveMobs.length,waveNumber:this.currentWave,nextWaveTime:0}:{completed:!0,remaining:0,total:0,waveNumber:this.currentWave,nextWaveTime:this.waveTimer?Math.ceil(this.waveTimer.getRemaining()/1e3):0}}getCurrentWave(){return this.currentWave}isWaveActive(){return this.waveActive}getTimeToNextWave(){return this.waveTimer?Math.ceil(this.waveTimer.getRemaining()/1e3):0}checkAndTeleportDistantMobs(){if(!this.player||!this.isWalkingAreaInitialized)return;let e=0;const t=this.teleportConfig;this.getAllActiveMobs().forEach((s=>{e>=t.maxTeleportsPerCheck||Phaser.Math.Distance.Between(s.x,s.y,this.player.x,this.player.y)>t.maxDistanceFromPlayer&&this.teleportMobToWalkableArea(s)&&(e++,this.stats.totalTeleported++,this.createTeleportEffect(s.x,s.y,s))}))}teleportMobToWalkableArea(e){if(!this.player||!e||e.isDead)return!1;for(let s=0;s<30;s++){const t=Math.random()*Math.PI*2,s=Phaser.Math.Between(300,500),n=this.player.x+Math.cos(t)*s,i=this.player.y+Math.sin(t)*s;if(this.isPositionOnWalkableTile(n,i))return e.x=n,e.y=i,e.body&&(e.body.x=n-e.body.width/2,e.body.y=i-e.body.height/2,e.body.velocity.x=0,e.body.velocity.y=0),!0}const t=this.findNearbyWalkableTile(this.player.x,this.player.y,this.scene.walkingArea_1,10);return!!t&&(e.x=t.worldX,e.y=t.worldY,e.body&&(e.body.x=t.worldX-e.body.width/2,e.body.y=t.worldY-e.body.height/2,e.body.velocity.x=0,e.body.velocity.y=0),!0)}isPositionOnWalkableTile(e,t){if(!this.scene.walkingArea_1)return!0;const s=this.scene.walkingArea_1,n=Math.floor((e-s.x)/this.tileSize),i=Math.floor((t-s.y)/this.tileSize),a=s.getTileAt(n,i);return a&&0!==a.index}teleportMobNearPlayer(e){if(!this.player||!e||e.isDead)return!1;const t=this.teleportConfig;let s=this.getRandomWalkablePositionNear(this.player.x,this.player.y,t.teleportRange.min,t.teleportRange.max,30);if(!s){const e=this.getRandomWalkablePosition();if(!e)return!1;s={worldX:e.worldX,worldY:e.worldY}}return e.x=s.worldX,e.y=s.worldY,e.body&&(e.body.x=s.worldX-e.body.width/2,e.body.y=s.worldY-e.body.height/2,e.body.velocity.x=0,e.body.velocity.y=0),!0}teleportMobsOnObstacleTiles(){if(!this.scene.walkingArea_1)return void console.warn("No walkingArea_1 found for obstacle teleportation");const e=this.scene.walkingArea_1;this.getAllActiveMobs().forEach((t=>{if(!t.isDead&&t.active&&this.isMobOnObstacleTile(t,e)){const s=this.findNearbyWalkableTile(t.x,t.y,e);s?(t.x=s.worldX,t.y=s.worldY,t.body&&(t.body.x=s.worldX-t.body.width/2,t.body.y=s.worldY-t.body.height/2,t.body.velocity.x=0,t.body.velocity.y=0),this.createObstacleTeleportEffect(s.worldX,s.worldY),this.stats.totalObstacleTeleports++):console.warn(`Could not find walkable position near mob at (${Math.floor(t.x)}, ${Math.floor(t.y)})`)}}))}isMobOnObstacleTile(e,t){const s=Math.floor((e.x-t.x)/this.tileSize),n=Math.floor((e.y-t.y)/this.tileSize),i=t.getTileAt(s,n);return!!i&&0===i.index}findNearbyWalkableTile(e,t,s,n=5){for(let i=1;i<=n;i++)for(let n=-i;n<=i;n++)for(let a=-i;a<=i;a++){if(Math.abs(n)!==i&&Math.abs(a)!==i)continue;const r=e+n*this.tileSize,o=t+a*this.tileSize,l=Math.floor((r-s.x)/this.tileSize),c=Math.floor((o-s.y)/this.tileSize),h=s.getTileAt(l,c);if(h&&0!==h.index)return{tileX:l,tileY:c,worldX:l*this.tileSize+this.tileSize/2+s.x,worldY:c*this.tileSize+this.tileSize/2+s.y}}return null}createObstacleTeleportEffect(e,t){if(!this.scene.add)return;const s=this.scene.add.circle(e,t,20,16729156,.8);s.setDepth(25),this.scene.tweens.add({targets:s,scale:{from:.5,to:2},alpha:{from:.8,to:0},duration:400,onComplete:()=>s.destroy()})}createTeleportEffect(e,t,s){var n;const i=this.teleportConfig.effects;if((null==(n=this.gameManager)?void 0:n.debugMode)&&!i.showEffectsInDebug)return;const a=this.scene.add.circle(e,t,i.effectRadius,i.teleportOutColor,.7);a.setDepth(i.effectDepth),this.scene.tweens.add({targets:a,scale:{from:.5,to:2},alpha:{from:.7,to:0},duration:i.effectDuration,onComplete:()=>a.destroy()}),this.scene.time.delayedCall(200,(()=>{const e=this.scene.add.circle(s.x,s.y,i.effectRadius,i.teleportInColor,.8);if(e.setDepth(i.effectDepth),this.scene.tweens.add({targets:e,scale:{from:2,to:.5},alpha:{from:.8,to:0},duration:i.effectDuration,onComplete:()=>e.destroy()}),s&&s.active&&!s.isDead){const e=s.tintTopLeft;s.setTint(i.teleportInColor),this.scene.time.delayedCall(i.mobFlashDuration,(()=>{s&&s.active&&!s.isDead&&(e?s.setTint(e):s.clearTint())}))}}))}getStatistics(){return{totalSpawned:this.stats.totalSpawned,totalKilled:this.stats.totalKilled,totalTeleported:this.stats.totalTeleported,totalObstacleTeleports:this.stats.totalObstacleTeleports,activeCount:this.getActiveMobCount(),killsByType:Object.fromEntries(this.stats.killsByType),currentWave:this.currentWave,waveActive:this.waveActive,waveProgress:this.getWaveProgress(),obstacleTeleportEnabled:this.enableObstacleTeleport}}setObstacleTeleportEnabled(e){this.enableObstacleTeleport=e}update(e,t){const s=[];e-this.lastTeleportCheck>this.teleportConfig.teleportCheckInterval&&(this.checkAndTeleportDistantMobs(),this.lastTeleportCheck=e),this.enableObstacleTeleport&&e-this.lastObstacleCheck>2e3&&(this.teleportMobsOnObstacleTiles(),this.lastObstacleCheck=e),this.activeMobs.forEach(((e,t)=>{e.mob.active&&!e.mob.isDead||s.push(t)})),s.forEach((e=>this.activeMobs.delete(e))),this.updateMobAbilities(e,t)}shutdown(){this.spawnTimer&&this.spawnTimer.destroy(),this.waveTimer&&this.waveTimer.destroy(),this.getAllActiveMobs().forEach((e=>{this.cleanupMobHealthBar(e),e.destroy&&e.destroy()})),this.activeMobs.clear(),this.waveMobs=[],this.mobGroup&&this.mobGroup.clear(!0,!0)}}class Gz extends Phaser.GameObjects.Image{constructor(e,t,s,n,i){const a=n||"Exp",r=e.textures.exists(a);super(e,t??8,s??8,r?a:"__WHITE",i),r||this.setTint(65535),e.physics.add.existing(this,!1),this.body.setCircle(8),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.expValue=1,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}setExpValue(e){this.expValue=e;const t=.8+Math.min(e,10)/10*.5;return this.setScale(t),e>=10?this.setTint(33023):e>=5?this.setTint(65450):e>=2?this.setTint(43775):this.setTint(65535),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,i=Math.sqrt(t*t+n*n),a=t/i,r=n/i,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=a*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in ExpOrb update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.expValue;this.isBeingCollected=!0;try{this.scene.playerLevelSystem?this.scene.playerLevelSystem.addExperience(this.expValue):this.scene.gameManager?this.scene.gameManager.addExperience(this.expValue):console.warn("No experience system found to add experience to"),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting experience orb:",e),this.cleanupAndDestroy()}return this.expValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#FFD700",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}class Hz extends Phaser.GameObjects.Image{constructor(e,t,s,n,i){super(e,t??16,s??16,n||"Exp",i),e.physics.add.existing(this,!1),this.body.setCircle(10),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.goldValue=1,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener)}setGoldValue(e){this.goldValue=e;const t=.8+Math.min(e,10)/10*.5;return this.setScale(t),e>=10?this.setTint(16747520):e>=5?this.setTint(16766720):e>=2?this.setTint(16776960):this.setTint(16775885),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,i=Math.sqrt(t*t+n*n),a=t/i,r=n/i,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=a*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in GoldPrefab update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.goldValue;this.isBeingCollected=!0;try{this.scene.gameManager?this.scene.gameManager.addGold(this.goldValue):console.warn("No game manager found to add gold to"),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting gold:",e),this.cleanupAndDestroy()}return this.goldValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#FFD700",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}class zz{constructor(e){this.scene=e,this.gameManager=QC.get(),this.player=null,this.mobManager=new Uz(e),this.expOrbs=null,this.goldOrbs=null,this.enemies=null,this.timers={}}initialize(e){this.player=e,this.mobManager.initialize(this.gameManager,e),this.expOrbs=this.scene.add.group(),this.goldOrbs=this.scene.add.group(),this.enemies=this.mobManager.mobGroup,this.scene.enemies=this.enemies,this.createTextures(),this.setupCollisions(),this.setupTimers(),this.setupControls(),this.setupSceneMethods()}createTextures(){["zombierun","Zombie2RunAni","Police run","Dagger Bandit-Run","assassinTank","assassinArcher"].forEach((e=>{this.scene.textures.exists(e)||this.createMobTexture(e)})),this.createOrbTextures(),this.createVFXTextures()}createOrbTextures(){if(!this.scene.textures.exists("Exp")){const e=this.scene.add.graphics();e.fillGradientStyle(65535,65535,35071,35071,1),e.fillCircle(8,8,7),e.fillStyle(8978431,.6),e.fillCircle(8,8,5),e.fillStyle(16777215,.8),e.fillCircle(8,8,2),e.lineStyle(1,16777215,1),e.strokeCircle(8,8,7),e.generateTexture("Exp",16,16),e.destroy()}if(!this.scene.textures.exists("Gold")){const e=this.scene.add.graphics();e.fillGradientStyle(16766720,16766720,16753920,16753920,1),e.fillCircle(10,10,9),e.fillStyle(16777096,.7),e.fillCircle(10,10,6),e.fillStyle(16777215,.9),e.fillCircle(10,10,3),e.lineStyle(2,16770396,1),e.strokeCircle(10,10,9),e.lineStyle(1,16774799,.8),e.strokeCircle(10,10,10),e.generateTexture("Gold",20,20),e.destroy()}}createVFXTextures(){[{name:"AOE_Fire_Ball_Projectile_VFX_V01",color:16729088,size:16},{name:"AOE_Fire_Blast_Attack_VFX_V01",color:16737792,size:24,alpha:.8},{name:"AOE_Ice_Shard_Projectile_VFX_V01",color:43775,size:12}].forEach((({name:e,color:t,size:s,alpha:n=1})=>{if(!this.scene.textures.exists(e)){const i=this.scene.add.graphics();i.fillStyle(t,n),i.fillCircle(s,s,s),i.generateTexture(e,2*s,2*s),i.destroy()}}))}createMobTexture(e){const t={Police:3355494,Dagger:6697779,assassin:6697779,Tank:4473924,Archer:6702131,Zombie2:5583701},s=Object.keys(t).find((t=>e.includes(t)))?t[Object.keys(t).find((t=>e.includes(t)))]:3368499,n=this.scene.add.graphics();n.fillStyle(s,1),n.fillRect(8,8,16,16),n.fillRect(4,12,4,8),n.fillRect(24,12,4,8),n.generateTexture(e,32,32),n.destroy()}setupCollisions(){this.player&&(this.scene.physics.add.overlap(this.player,this.enemies,((e,t)=>{t.attackPlayer&&t.attackPlayer(e)})),this.scene.physics.add.overlap(this.player,this.goldOrbs,((e,t)=>{this.collectGoldOrb(t)})))}setupTimers(){this.timers.orbSpawn=this.scene.time.addEvent({delay:1e3,callback:()=>this.spawnRandomExperienceOrb(),loop:!0}),this.timers.goldSpawn=this.scene.time.addEvent({delay:2e3,callback:()=>this.spawnRandomGoldOrb(),loop:!0}),this.timers.difficulty=this.scene.time.addEvent({delay:1e3,callback:()=>this.gameManager.updateDifficulty(1e3),loop:!0}),Object.assign(this.scene,{enemySpawnTimer:this.mobManager.spawnTimer,orbSpawnTimer:this.timers.orbSpawn,goldSpawnTimer:this.timers.goldSpawn,difficultyTimer:this.timers.difficulty})}setupSceneMethods(){this.scene.spawnExperienceOrb=(e,t,s)=>this.spawnExperienceOrb(e,t,s),this.scene.spawnGoldOrb=(e,t,s)=>this.spawnGoldOrb(e,t,s)}spawnExperienceOrb(e,t,s=1){try{if(Gz){const n=new Gz(this.scene,e,t);return this.scene.add.existing(n),this.expOrbs.add(n),n.setExpValue(s),n.setDepth(12),n}}catch(n){console.warn("ExpOrb class not available, using fallback")}return this.createFallbackOrb(e,t,s)}spawnGoldOrb(e,t,s=1){try{if(Hz){const n=new Hz(this.scene,e,t);return this.scene.add.existing(n),this.goldOrbs.add(n),n.setGoldValue(s),n.setDepth(12),n}}catch(n){console.warn("GoldPrefab class not available, using fallback")}return this.createFallbackGoldOrb(e,t,s)}createFallbackOrb(e,t,s){const n=this.scene.add.circle(e,t,6,65535);return n.expValue=s||5,this.scene.physics.add.existing(n),n.body.setCircle(6),n.setDepth(12),this.expOrbs.add(n),this.scene.physics.add.overlap(this.player,n,((e,t)=>{this.collectExperienceOrb(t)})),this.setupOrbMovement(n),this.scene.time.delayedCall(3e4,(()=>(null==n?void 0:n.active)&&n.destroy())),n}createFallbackGoldOrb(e,t,s){const n=this.scene.add.circle(e,t,8,16766720);return n.goldValue=s||1,this.scene.physics.add.existing(n),n.body.setCircle(8),n.setDepth(12),this.goldOrbs.add(n),this.scene.physics.add.overlap(this.player,n,((e,t)=>{this.collectGoldOrb(t)})),this.setupGoldOrbMovement(n),this.scene.time.delayedCall(45e3,(()=>(null==n?void 0:n.active)&&n.destroy())),n}setupOrbMovement(e,t=!1){const s=this.scene.time.addEvent({delay:50,callback:()=>{if(this.player&&!this.player.isDead&&e.body&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)<(this.player.pickupRange||50)+(t?20:0)){const s=Phaser.Math.Angle.Between(e.x,e.y,this.player.x,this.player.y),n=t?180:200;e.body.setVelocity(Math.cos(s)*n,Math.sin(s)*n)}},repeat:-1});e.on("destroy",(()=>s.destroy()))}setupGoldOrbMovement(e){this.setupOrbMovement(e,!0)}spawnRandomExperienceOrb(){if(!this.player)return;const{x:e,y:t}=this.getRandomSpawnPosition(),s=this.getRandomOrbValue([1,2,5,10],[.5,.8,.95,1]);return this.spawnExperienceOrb(e,t,s)}spawnRandomGoldOrb(){if(!this.player)return;const{x:e,y:t}=this.getRandomSpawnPosition(250,600),s=this.getRandomOrbValue([1,2,5,10,20],[.4,.7,.9,.98,1]);return this.spawnGoldOrb(e,t,s)}getRandomSpawnPosition(e=200,t=800){const s=Math.random()*Math.PI*2,n=Phaser.Math.Between(e,t);return{x:this.player.x+Math.cos(s)*n,y:this.player.y+Math.sin(s)*n}}getRandomOrbValue(e,t){const s=Math.random();for(let n=t.length-1;n>=0;n--)if(s>t[n])return e[n+1]||e[e.length-1];return e[0]}collectExperienceOrb(e){try{const t=e.expValue||5;this.gameManager&&this.gameManager.addExperience(t),this.createFloatingText(e.x,e.y-20,`+${t} XP`,"#88ff88"),e.destroy()}catch(t){console.error("Error collecting experience orb:",t)}}collectGoldOrb(e){try{const t=e.goldValue||1;this.gameManager&&this.gameManager.addGold(t),this.createFloatingText(e.x,e.y-20,`+${t} Gold`,"#FFD700"),e.destroy()}catch(t){console.error("Error collecting gold orb:",t)}}createFloatingText(e,t,s,n){const i=this.scene.add.text(e,t,s,{fontFamily:"Arial",fontSize:"14px",color:n,stroke:"#000000",strokeThickness:1,fontWeight:"#FFD700"===n?"bold":"normal"});i.setOrigin(.5),this.scene.tweens.add({targets:i,y:t-30,alpha:0,duration:"#FFD700"===n?1200:1e3,onComplete:()=>i.destroy()})}spawnEnemy(e,t,s="zombie"){return this.mobManager.spawnMob(s,e,t)}spawnRandomEnemy(){return this.mobManager.spawnRandomMob()}spawnWave(){const e=(this.scene.currentWave||0)+1;this.scene.currentWave=e,this.mobManager.startWave(e)}setupControls(){const e=this.scene.input.keyboard;e.on("keydown-Z",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"zombie")})),e.on("keydown-X",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"bigDude")})),e.on("keydown-C",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"assassinArcher")})),e.on("keydown-V",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"policeDroid")})),e.on("keydown-B",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"assassin")})),e.on("keydown-N",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"assassinTank")})),e.on("keydown-M",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnEnemy(t.x,t.y,"assassinArcher")})),e.on("keydown-E",(()=>{const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y);this.spawnExperienceOrb(t.x,t.y,1)}))}spawnEnemyAtCursor(e){const t=this.scene.cameras.main.getWorldPoint(this.scene.input.activePointer.x,this.scene.input.activePointer.y);this.spawnEnemy(t.x,t.y,e)}spawnOrbAtCursor(e,t){const s=this.scene.cameras.main.getWorldPoint(this.scene.input.activePointer.x,this.scene.input.activePointer.y);"exp"===e?this.spawnExperienceOrb(s.x,s.y,t):this.spawnGoldOrb(s.x,s.y,t)}spawnMultipleOrbs(e,t){for(let s=0;s<t;s++)"exp"===e?this.spawnRandomExperienceOrb():this.spawnRandomGoldOrb()}checkEnemyBounds(){this.player&&this.mobManager.getAllActiveMobs().forEach((e=>{e.active&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)>600&&this.teleportMobToPlayer(e)}))}checkOrbBounds(){this.player&&[this.expOrbs,this.goldOrbs].forEach((e=>{e&&e.getChildren().forEach((e=>{e.active&&Phaser.Math.Distance.Between(e.x,e.y,this.player.x,this.player.y)>2e3&&e.destroy()}))}))}teleportMobToPlayer(e){const t=Math.random()*Math.PI*2,s=Phaser.Math.Between(300,500);e.x=this.player.x+Math.cos(t)*s,e.y=this.player.y+Math.sin(t)*s,e.body&&e.body.velocity.setTo(0,0);const n=this.scene.add.circle(e.x,e.y,30,3407667,.7);n.setDepth(20),this.scene.tweens.add({targets:n,scale:0,alpha:0,duration:500,onComplete:()=>n.destroy()})}getEnemyCount(){return this.mobManager.getActiveMobCount()}getEnemiesByType(e){return this.mobManager.getMobsByType(e)}getAllEnemies(){return this.mobManager.getAllActiveMobs()}getStatistics(){return this.mobManager.getStatistics()}update(e,t){this.mobManager.update(e,t),this.checkEnemyBounds(),this.checkOrbBounds(),[this.expOrbs,this.goldOrbs].forEach((e=>{e&&e.getChildren().forEach((e=>{e.depth<10&&e.setDepth(12)}))}))}shutdown(){var e;Object.values(this.timers).forEach((e=>null==e?void 0:e.remove())),this.mobManager.shutdown(),[this.expOrbs,this.goldOrbs].forEach((e=>{e&&e.clear(!0,!0)})),(null==(e=this.scene.input)?void 0:e.keyboard)&&["keydown-E","keydown-G","keydown-Z","keydown-V","keydown-X","keydown-B","keydown-N","keydown-M","keydown-K","keydown-O","keydown-P","keydown-W","keydown-L","keydown-C","keydown-["].forEach((e=>this.scene.input.keyboard.removeAllListeners(e)))}}class Vz extends Phaser.GameObjects.Container{constructor(e,t,s,n,i,a,r){super(e,t??0,s??0),this.skillKey=n,this.skillData=i,this.currentLevel=a,this.newLevel=r,this.isNewSkill=0===a,this.createCard(),this.setupInteraction()}createCard(){const e=this.skillData.cardBackground||"card_basic_stats";this.scene.textures.exists(e)?(this.cardBackground=this.scene.add.image(0,0,e),this.cardBackground.setScale(1.4),this.add(this.cardBackground)):(console.warn(`SkillCard: Background texture ${e} not found, using fallback`),this.createFallbackBackground()),this.cardBackground&&(this.glowBackground=this.scene.add.image(0,0,e),this.glowBackground.setScale(1.1),this.glowBackground.setAlpha(0),this.glowBackground.setTint(16777215),this.glowBackground.setBlendMode(Phaser.BlendModes.ADD),this.addAt(this.glowBackground,0)),this.addSkillName(),this.addRomanNumeral(),this.addSkillIcon(),this.addSkillDescription(),this.setSize(240,320)}createFallbackBackground(){const e={basic:16766720,stat:8947848,fire:16729156,ice:4474111,lightning:16746751,holy:16777096,marksman:8947848}[this.skillData.type]||6710886;this.cardBackground=this.scene.add.rectangle(0,0,200,280,e,.8),this.cardBackground.setStrokeStyle(4,16777215,1),this.add(this.cardBackground)}addRomanNumeral(){if(this.newLevel>0&&this.newLevel<=10){const e=`Roman_${this.newLevel}`;if(this.scene.textures.exists(e))this.romanNumeral=this.scene.add.image(-53,-75,e),this.romanNumeral.setScale(.8),this.romanNumeral.setTint(16766720),this.add(this.romanNumeral);else{const e=["","I","II","III","IV","V","VI","VII","VIII","IX","X"];this.romanNumeral=this.scene.add.text(-90,-130,e[this.newLevel],{fontFamily:"Arial",fontSize:"24px",color:"#ffd700",stroke:"#000000",strokeThickness:3}).setOrigin(.5),this.add(this.romanNumeral)}}}addSkillIcon(){const e=this.skillData.icon,t=this.skillData.iconNormal;let s=!1;e&&this.scene.textures.exists(e)?(this.skillIcon=this.scene.add.image(0,-20,e),this.skillIcon.setScale(1),this.add(this.skillIcon),s=!0):t&&this.scene.textures.exists(t)&&(this.skillIcon=this.scene.add.image(0,-20,t),this.skillIcon.setScale(1),this.add(this.skillIcon),s=!0),s||(console.warn(`SkillCard: No icon found for ${this.skillKey}, creating fallback`),this.createFallbackIcon())}createFallbackIcon(){const e={basic:16766720,stat:8947848,fire:16729156,ice:4474111,lightning:16746751,holy:16777096,marksman:8947848}[this.skillData.type]||6710886;this.skillIcon=this.scene.add.circle(0,-20,30,e),this.skillIcon.setStrokeStyle(3,16777215),this.add(this.skillIcon);const t=this.scene.add.text(0,-20,this.skillKey.charAt(0).toUpperCase(),{fontFamily:"Arial",fontSize:"24px",color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5);this.add(t)}addSkillName(){const e=(this.isNewSkill,"#ffff00"),t=(this.isNewSkill,"");this.skillName=this.scene.add.text(10,-83,t+this.skillData.name,{fontSize:"14px",fontFamily:"alagard",color:e,stroke:"#000000",strokeThickness:2,align:"left",wordWrap:{width:200}}).setOrigin(.5),this.add(this.skillName)}addSkillDescription(){this.description=this.scene.add.text(0,40,this.skillData.description,{fontFamily:"alagard",fontSize:"12px",color:"#ffffff",stroke:"#000000",strokeThickness:2,align:"center",wordWrap:{width:100}}).setOrigin(.5),this.add(this.description)}formatStatName(e){return{damage:"Damage",fireRate:"Fire Rate",range:"Range",chainCount:"Chain Count",duration:"Duration",health:"Health",damageMultiplier:"Damage",speedMultiplier:"Speed",rangeMultiplier:"Range"}[e]||e}formatStatValue(e,t){return e.includes("Multiplier")?`+${(100*t).toFixed(0)}%`:"fireRate"===e?`+${t.toFixed(1)}/s`:"duration"===e?`+${(t/1e3).toFixed(1)}s`:`+${Math.round(t)}`}setupInteraction(){this.setInteractive({useHandCursor:!0}),this.on("pointerover",this.onPointerOver,this),this.on("pointerout",this.onPointerOut,this),this.on("pointerdown",this.onPointerDown,this),this.cardBackground.setInteractive({useHandCursor:!0}),this.cardBackground.on("pointerdown",this.onPointerDown,this)}onPointerOver(){this.scene.tweens.add({targets:this,scaleX:.99,scaleY:.99,duration:100,ease:"Back.easeOut"}),this.scene.tweens.add({targets:this.glowBackground,alpha:.4,scaleX:1.05,scaleY:1.05,duration:100,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1.01,scaleY:1.01,duration:150,ease:"Power2"}),this.romanNumeral&&this.scene.tweens.add({targets:this.romanNumeral,scaleX:.9,scaleY:.9,duration:150,ease:"Power2"}),this.skillName&&this.scene.tweens.add({targets:this.skillName,scaleX:1.05,scaleY:1.05,duration:150,ease:"Power2"})}onPointerOut(){this.scene.tweens.add({targets:this,scaleX:.8,scaleY:.8,duration:150,ease:"Power2"}),this.scene.tweens.add({targets:this.glowBackground,alpha:0,scaleX:1.3,scaleY:1.3,duration:150,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1,scaleY:1,alpha:1,duration:150,ease:"Power2"}),this.romanNumeral&&this.scene.tweens.add({targets:this.romanNumeral,scaleX:.8,scaleY:.8,duration:150,ease:"Power2"}),this.skillName&&this.scene.tweens.add({targets:this.skillName,scaleX:1,scaleY:1,duration:150,ease:"Power2"})}onPointerDown(){if(this.scene.tweens.add({targets:this,scaleX:1.05,scaleY:1.05,duration:100,yoyo:!0,ease:"Back.easeOut",onComplete:()=>{this.createSelectionEffect(),this.onSelectCallback?this.onSelectCallback(this.skillKey):console.warn(`No selection callback set for skill card: ${this.skillKey}`)}}),this.scene.tweens.add({targets:this.glowBackground,alpha:.9,scaleX:1.5,scaleY:1.5,duration:100,yoyo:!0,ease:"Power2"}),this.skillIcon&&this.scene.tweens.add({targets:this.skillIcon,scaleX:1.3,scaleY:1.3,duration:100,yoyo:!0,ease:"Back.easeOut"}),this.scene.sound&&this.scene.sound.add)try{const e=this.scene.sound.add("select_sound");e&&e.play({volume:.7})}catch(e){console.log("Sound effect not available:",e)}}setOnSelectCallback(e){return this.onSelectCallback=e,this}updateSkillLevel(e,t){return this.currentLevel=e,this.newLevel=t,this.isNewSkill=0===e,this.removeAll(!0),this.createCard(),this}createSelectionEffect(){for(let t=0;t<12;t++){const e=t/12*Math.PI*2,s=50+50*Math.random(),n=this.scene.add.circle(this.x,this.y,3+4*Math.random(),this.isNewSkill?65280:16766720,.9);n.setDepth(1003),this.scene.tweens.add({targets:n,x:this.x+Math.cos(e)*s,y:this.y+Math.sin(e)*s,scaleX:0,scaleY:0,alpha:0,duration:500,ease:"Power2",onComplete:()=>n.destroy()})}const e=this.scene.add.circle(this.x,this.y,10,16777215,0);e.setStrokeStyle(3,this.isNewSkill?65280:16766720,.8),e.setDepth(1003),this.scene.tweens.add({targets:e,radius:100,alpha:0,duration:600,ease:"Power2",onComplete:()=>e.destroy()})}destroy(){this.scene.tweens.killTweensOf(this),this.scene.tweens.killTweensOf(this.glowBackground),this.skillIcon&&this.scene.tweens.killTweensOf(this.skillIcon),this.romanNumeral&&this.scene.tweens.killTweensOf(this.romanNumeral),this.skillName&&this.scene.tweens.killTweensOf(this.skillName),super.destroy()}}const Wz={slash:{name:"Slash Attack",description:"Melee area attack",type:"basic",unlocked:!0,maxLevel:10,cardBackground:"card_basic_attack",icon:"icon_slash_glow_effect",iconNormal:"icon_slash",stats:{damage:{base:10,perLevel:2},fireRate:{base:1,perLevel:.1},range:{base:70,perLevel:5}},apply:(e,t)=>{e.slashDamage=Wz.slash.stats.damage.base+(t-1)*Wz.slash.stats.damage.perLevel,e.slashFireRate=Wz.slash.stats.fireRate.base+(t-1)*Wz.slash.stats.fireRate.perLevel,e.slashRange=Wz.slash.stats.range.base+(t-1)*Wz.slash.stats.range.perLevel}},fireBullet:{name:"Fire Arrow",description:"Fast piercing fire projectile",type:"fire",unlocked:!1,unlockLevel:3,maxLevel:10,cardBackground:"card_magic_fire",icon:"icon_fire_arrow_glow_effect",iconNormal:"icon_fire_arrow",stats:{damage:{base:8,perLevel:1.5},fireRate:{base:1.2,perLevel:.15},range:{base:300,perLevel:20}},apply:(e,t)=>{e.fireBulletDamage=Wz.fireBullet.stats.damage.base+(t-1)*Wz.fireBullet.stats.damage.perLevel,e.fireBulletFireRate=Wz.fireBullet.stats.fireRate.base+(t-1)*Wz.fireBullet.stats.fireRate.perLevel,e.fireBulletRange=Wz.fireBullet.stats.range.base+(t-1)*Wz.fireBullet.stats.range.perLevel}},fireBomb:{name:"Fire Ball",description:"Explosive area damage",type:"fire",unlocked:!1,unlockLevel:6,maxLevel:10,cardBackground:"card_magic_fire",icon:"icon_fire_ball_glow_effect",iconNormal:"icon_fire_ball",stats:{damage:{base:18,perLevel:3},fireRate:{base:.4,perLevel:.05},range:{base:220,perLevel:15}},apply:(e,t)=>{e.fireBombDamage=Wz.fireBomb.stats.damage.base+(t-1)*Wz.fireBomb.stats.damage.perLevel,e.fireBombFireRate=Wz.fireBomb.stats.fireRate.base+(t-1)*Wz.fireBomb.stats.fireRate.perLevel,e.fireBombRange=Wz.fireBomb.stats.range.base+(t-1)*Wz.fireBomb.stats.range.perLevel}},ice:{name:"Ice Shard",description:"Slowing ice projectile",type:"ice",unlocked:!1,unlockLevel:4,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_ice_shard_glow_effect",iconNormal:"icon_ice_shard",stats:{damage:{base:12,perLevel:2},fireRate:{base:.6,perLevel:.08},range:{base:180,perLevel:12}},apply:(e,t)=>{e.iceDamage=Wz.ice.stats.damage.base+(t-1)*Wz.ice.stats.damage.perLevel,e.iceFireRate=Wz.ice.stats.fireRate.base+(t-1)*Wz.ice.stats.fireRate.perLevel,e.iceRange=Wz.ice.stats.range.base+(t-1)*Wz.ice.stats.range.perLevel}},lightning:{name:"Lightning Chain",description:"Chaining electric attack",type:"lightning",unlocked:!1,unlockLevel:5,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_lightning_chain_glow_effect",iconNormal:"icon_lightning_chain",stats:{damage:{base:20,perLevel:3},fireRate:{base:.5,perLevel:.06},chainCount:{base:10,perLevel:1}},apply:(e,t)=>{e.lightningDamage=Wz.lightning.stats.damage.base+(t-1)*Wz.lightning.stats.damage.perLevel,e.lightningFireRate=Wz.lightning.stats.fireRate.base+(t-1)*Wz.lightning.stats.fireRate.perLevel,e.lightningChainCount=Wz.lightning.stats.chainCount.base+(t-1)*Wz.lightning.stats.chainCount.perLevel}},blindingLight:{name:"Holy Light",description:"Blinding area effect",type:"holy",unlocked:!1,unlockLevel:7,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_holy_light_glow_effect",iconNormal:"icon_holy_light",stats:{range:{base:300,perLevel:25},fireRate:{base:.15,perLevel:.02},duration:{base:4e3,perLevel:300}},apply:(e,t)=>{e.blindingLightRange=Wz.blindingLight.stats.range.base+(t-1)*Wz.blindingLight.stats.range.perLevel,e.blindingLightFireRate=Wz.blindingLight.stats.fireRate.base+(t-1)*Wz.blindingLight.stats.fireRate.perLevel,e.blindingLightDisableDuration=Wz.blindingLight.stats.duration.base+(t-1)*Wz.blindingLight.stats.duration.perLevel}},marksman:{name:"Marksman Shot",description:"High-damage precise shot",type:"marksman",unlocked:!1,unlockLevel:8,maxLevel:10,cardBackground:"card_magic_order",icon:"icon_marksman_glow_effect",iconNormal:"icon_marksman",stats:{damage:{base:35,perLevel:8},fireRate:{base:.3,perLevel:.04},range:{base:400,perLevel:30}},apply:(e,t)=>{e.marksmanDamage=Wz.marksman.stats.damage.base+(t-1)*Wz.marksman.stats.damage.perLevel,e.marksmanFireRate=Wz.marksman.stats.fireRate.base+(t-1)*Wz.marksman.stats.fireRate.perLevel,e.marksmanRange=Wz.marksman.stats.range.base+(t-1)*Wz.marksman.stats.range.perLevel}},armor:{name:"Armor Plating",description:"Reduce incoming damage",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_armor_glow_effect2",iconNormal:"icon_armor",stats:{armorValue:{base:2,perLevel:1.5}},apply:(e,t)=>{const s=Wz.armor.stats.armorValue.base+(t-1)*Wz.armor.stats.armorValue.perLevel;e.armor=(e.armor||0)+s}},attackSpeed:{name:"Attack Speed",description:"Increase all attack rates",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_attack_speed_glow_effect2",iconNormal:"icon_attack_speed",stats:{speedMultiplier:{base:.15,perLevel:.1}},apply:(e,t)=>{const s=1+(Wz.attackSpeed.stats.speedMultiplier.base+(t-1)*Wz.attackSpeed.stats.speedMultiplier.perLevel);["slashFireRate","fireBulletFireRate","fireBombFireRate","iceFireRate","lightningFireRate","blindingLightFireRate"].forEach((t=>{e[t]&&(e[t]*=s)}))}},expGain:{name:"Experience Gain",description:"Gain more experience points",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_exp_gain_glow_effect2",iconNormal:"icon_exp_gain",stats:{expMultiplier:{base:.2,perLevel:.15}},apply:(e,t)=>{const s=1+(Wz.expGain.stats.expMultiplier.base+(t-1)*Wz.expGain.stats.expMultiplier.perLevel);e.expMultiplier=(e.expMultiplier||1)*s}},goldGain:{name:"Gold Gain",description:"Find more gold from enemies",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_gold_gain_glow_effect2",iconNormal:"icon_gold_gain",stats:{goldMultiplier:{base:.25,perLevel:.2}},apply:(e,t)=>{const s=1+(Wz.goldGain.stats.goldMultiplier.base+(t-1)*Wz.goldGain.stats.goldMultiplier.perLevel);e.goldMultiplier=(e.goldMultiplier||1)*s}},maxHealth:{name:"Max Health",description:"Increase maximum health",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_max_healt_glow_effect2",iconNormal:"icon_max_healt",stats:{health:{base:50,perLevel:25}},apply:(e,t)=>{const s=Wz.maxHealth.stats.health.base+(t-1)*Wz.maxHealth.stats.health.perLevel;e.maxHealth+=s,e.health+=s}},attackDamage:{name:"Attack Damage",description:"Increase all attack damage",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_attack_damage_glow_effect2",iconNormal:"icon_attack_damage",stats:{damageMultiplier:{base:.15,perLevel:.1}},apply:(e,t)=>{Wz.attackDamage.stats.damageMultiplier.base,Wz.attackDamage.stats.damageMultiplier.perLevel,Object.keys(Wz).forEach((t=>{var s,n;(null==(s=Wz[t].stats)?void 0:s.damage)&&Wz[t].apply(e,(null==(n=e.skillLevels)?void 0:n[t])||0)}))}},moveSpeed:{name:"Movement Speed",description:"Increase movement speed",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_movement_speed_glow_effect2",iconNormal:"icon_movement_speed",stats:{speedMultiplier:{base:.2,perLevel:.1}},apply:(e,t)=>{const s=1+(Wz.moveSpeed.stats.speedMultiplier.base+(t-1)*Wz.moveSpeed.stats.speedMultiplier.perLevel);e.moveSpeed=(e.baseMoveSpeed||100)*s}},pickupRange:{name:"Pickup Range",description:"Increase item collection radius",type:"stat",unlocked:!0,maxLevel:10,cardBackground:"card_basic_stats",icon:"icon_pickup_range_glow_effect2",iconNormal:"icon_pickup_range",stats:{rangeMultiplier:{base:.25,perLevel:.15}},apply:(e,t)=>{const s=1+(Wz.pickupRange.stats.rangeMultiplier.base+(t-1)*Wz.pickupRange.stats.rangeMultiplier.perLevel);e.pickupRange=(e.basePickupRange||50)*s}}};class $z{constructor(e){this.scene=e,this.isActive=!1,this.pendingLevelUps=0,this.storedState={timers:[],entities:[]},this.skillLevels=Object.keys(Wz).reduce(((e,t)=>(e[t]="slash"===t?1:0,e)),{}),this.playerLevel=1,e.skillUpgradeManager=this}initialize(){this.loadCardAssets()}loadCardAssets(){[{key:"card_basic_attack",path:"./card/card_basic_attack.png"},{key:"card_basic_stats",path:"./card/card_basic_stats.png"},{key:"card_magic_fire",path:"./card/card_magic _fire.png"},{key:"card_magic_order",path:"./card/card_magic_order.png"}].forEach((({key:e,path:t})=>{this.scene.textures.exists(e)||this.scene.load.image(e,t)}));for(let e=1;e<=10;e++){const t=`Roman_${e}`;this.scene.textures.exists(t)||this.scene.load.image(t,`./skill-tiers/Roman_${e}.png`)}this.loadSkillIcons(),this.scene.load.once("complete",(()=>this.setupInitialSkills())),this.scene.load.start()}loadSkillIcons(){[{prefix:"",suffix:"_glow_effect",icons:["icon_slash","icon_fire_arrow","icon_fire_ball","icon_ice_shard","icon_lightning_chain","icon_holy_light","icon_marksman","icon_armor_glow_effect1","icon_attack_damage_glow_effect1","icon_attack_speed_glow_effect1","icon_exp_gain_glow_effect1","icon_gold_gain_glow_effect1","icon_max_healt_glow_effect1","icon_movement_speed_glow_effect1","icon_pickup_range_glow_effect1"]},{prefix:"",suffix:"",icons:["icon_slash","icon_fire_arrow","icon_fire_ball","icon_ice_shard","icon_lightning_chain","icon_holy_light","icon_marksman","icon_armor","icon_attack_damage","icon_attack_speed","icon_exp_gain","icon_gold_gain","icon_max_healt","icon_movement_speed","icon_pickup_range"]}].forEach((({icons:e})=>{e.forEach((e=>{if(!this.scene.textures.exists(e)){const t="icon_holy_light"===e?"icon_holy_light-.png":`${e}.png`;this.scene.load.image(e,`./upgrade-icon/${t}`)}}))}))}setupInitialSkills(){var e;this.scene.player?(Wz.slash.apply(this.scene.player,1),this.scene.player.baseMoveSpeed=this.scene.player.moveSpeed||150,this.scene.player.basePickupRange=this.scene.player.pickupRange||50,null==(e=this.scene.playerAttackSystem)||e.updateStats(),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels})):console.warn("SkillUpgradeManager: Player not found, deferring initial skill setup")}showSkillUpgradeSelection(){this.isActive?this.pendingLevelUps++:(this.isActive=!0,this.pauseGame(),this.createSkillUI())}pauseGame(){var e;["enemySpawnTimer","orbSpawnTimer","difficultyTimer"].forEach((e=>{this.scene[e]&&(this.storedState.timers.push({name:e,paused:this.scene[e].paused}),this.scene[e].paused=!0)})),[this.scene.player,...(null==(e=this.scene.enemies)?void 0:e.getChildren())||[]].forEach((e=>{(null==e?void 0:e.body)&&(this.storedState.entities.push({entity:e,vx:e.body.velocity.x,vy:e.body.velocity.y,enabled:e.body.enable}),e.body.velocity.setTo(0,0),e.body.enable=!1)})),this.originalUpdate=this.scene.update,this.scene.update=()=>{}}createSkillUI(){const e=this.scene.cameras.main;this.overlay=this.scene.add.rectangle(e.width/2,e.height/2,e.width,e.height,0,.8).setScrollFactor(0).setDepth(1e3),this.title=this.scene.add.text(e.width/2,80,"LEVEL UP! Choose Your Upgrade",{fontFamily:"Arial",fontSize:"28px",color:"#ffff00",stroke:"#000000",strokeThickness:4,align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.levelText=this.scene.add.text(e.width/2,110,`Player Level: ${this.playerLevel+1}`,{fontFamily:"Arial",fontSize:"20px",color:"#ffffff",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.container=this.scene.add.container(0,0).setDepth(1001).setScrollFactor(0);const t=this.getAvailableSkillOptions();if(0===t.length)return void this.resumeGame();const s=this.getCardPositions(t.length,e);t.forEach(((e,t)=>{const n=Wz[e],i=this.skillLevels[e],a=i+1;console.log(`SkillUpgradeManager: Creating card for ${e}, level ${i} -> ${a}`);const r=new Vz(this.scene,s[t].x,s[t].y,e,n,i,a);r.setScale(.8).setScrollFactor(0).setDepth(1002),r.setOnSelectCallback((()=>this.selectSkill(e))),r.setInteractive({useHandCursor:!0}),this.container.add(r)})),this.scene.add.existing(this.container)}getCardPositions(e,t){const s=220*(e-1),n=t.width/2-s/2,i=t.height/2+20;return Array.from({length:e},((e,t)=>({x:n+220*t,y:i})))}getAvailableSkillOptions(){const e=Object.keys(Wz).filter((e=>{const t=Wz[e];return this.skillLevels[e]<t.maxLevel&&(t.unlocked||t.unlockLevel&&this.playerLevel>=t.unlockLevel)}));return e.sort((()=>.5-Math.random())).slice(0,Math.min(3,e.length))}selectSkill(e){var t;this.skillLevels[e]++,this.playerLevel++;const s=Wz[e],n=this.skillLevels[e];this.scene.player&&(s.apply(this.scene.player,n),null==(t=this.scene.playerAttackSystem)||t.updateStats(),1===n&&"stat"!==s.type&&this.enableSkillInAttackSystem(e)),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels}),this.scene.tweens.add({targets:[this.overlay,this.title,this.levelText,this.container],alpha:0,duration:300,onComplete:()=>{[this.overlay,this.title,this.levelText,this.container].forEach((e=>null==e?void 0:e.destroy())),this.resumeGame(),this.handlePending()}})}enableSkillInAttackSystem(e){var t,s;const n={fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e];n&&((null==(t=this.scene.playerAttack)?void 0:t.enableAttackType)?this.scene.playerAttack.enableAttackType(n):(null==(s=this.scene.playerAttackSystem)?void 0:s.attackTypes)?this.scene.playerAttackSystem.attackTypes[n]=!0:console.warn(`SkillUpgradeManager: Could not find attack system to enable ${e}`))}resumeGame(){this.storedState.timers.forEach((({name:e,paused:t})=>{this.scene[e]&&(this.scene[e].paused=t)})),this.storedState.entities.forEach((({entity:e,vx:t,vy:s,enabled:n})=>{(null==e?void 0:e.body)&&(e.body.velocity.setTo(t,s),e.body.enable=n)})),this.originalUpdate&&(this.scene.update=this.originalUpdate),this.storedState={timers:[],entities:[]},this.isActive=!1}handlePending(){this.pendingLevelUps>0&&(this.pendingLevelUps--,this.scene.time.delayedCall(500,(()=>this.showSkillUpgradeSelection())))}getSkillLevel(e){return this.skillLevels[e]||0}getSkillInfo(e){return Wz[e]}getPlayerLevel(){return this.playerLevel}getSaveData(){return{skillLevels:this.skillLevels,playerLevel:this.playerLevel}}loadSaveData(e){var t;e&&(this.skillLevels=e.skillLevels||this.skillLevels,this.playerLevel=e.playerLevel||this.playerLevel,Object.keys(this.skillLevels).forEach((e=>{const t=this.skillLevels[e];t>0&&(Wz[e].apply(this.scene.player,t),1===t&&"stat"!==Wz[e].type&&this.enableSkillInAttackSystem(e))})),null==(t=this.scene.playerAttackSystem)||t.updateStats(),PC.emit("skill-levels-updated",{skillLevels:this.skillLevels}))}shutdown(){[this.overlay,this.title,this.levelText,this.container].forEach((e=>null==e?void 0:e.destroy())),this.originalUpdate&&(this.scene.update=this.originalUpdate)}}const qz={speed:{base:20,color:65280,apply:(e,t)=>e.moveSpeed*=1+t/100},damage:{base:15,color:16711680,apply:(e,t)=>{var s;e.damage*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},health:{base:10,color:255,apply:(e,t)=>{e.maxHealth+=50,e.health+=50}},fireRate:{base:10,color:16776960,apply:(e,t)=>{var s;e.fireRate*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},range:{base:15,color:65535,apply:(e,t)=>{var s;e.attackRange*=1+t/100,null==(s=e.scene.playerAttackSystem)||s.updateStats()}},magnet:{base:20,color:16711935,apply:(e,t)=>e.pickupRange*=1+t/100}};class Kz{constructor(e){this.scene=e,this.skillUpgradeManager=new $z(e),this.powerUps=Object.keys(qz).reduce(((e,t)=>({...e,[t]:0})),{}),this.isActive=!1,this.pendingLevelUps=0,this.storedState={timers:[],entities:[]},e.powerUpManager=this}initialize(){this.skillUpgradeManager.initialize(),this.createTextures()}createTextures(){if(!this.scene.textures.exists("blank cards7")){const e=this.scene.add.graphics();e.fillStyle(3355443,1).fillRoundedRect(0,0,200,300,16),e.lineStyle(4,16777215,1).strokeRoundedRect(0,0,200,300,16),e.generateTexture("blank cards7",200,300),e.destroy()}Object.entries(qz).forEach((([e,t])=>{const s=`${e}_icon`;if(this.scene.textures.exists(s))return;const n=this.scene.add.graphics();n.fillStyle(t.color,1).fillCircle(32,32,32),n.fillStyle(16777215,1).fillCircle(32,32,15),n.generateTexture(s,64,64),n.destroy()}))}showPowerUpSelection(){this.skillUpgradeManager.showSkillUpgradeSelection()}pauseGame(){var e;["enemySpawnTimer","orbSpawnTimer","difficultyTimer"].forEach((e=>{this.scene[e]&&(this.storedState.timers.push({name:e,paused:this.scene[e].paused}),this.scene[e].paused=!0)})),[this.scene.player,...(null==(e=this.scene.enemies)?void 0:e.getChildren())||[]].forEach((e=>{(null==e?void 0:e.body)&&(this.storedState.entities.push({entity:e,vx:e.body.velocity.x,vy:e.body.velocity.y,enabled:e.body.enable}),e.body.velocity.setTo(0,0),e.body.enable=!1)})),this.originalUpdate=this.scene.update,this.scene.update=()=>{}}createUI(){const e=this.scene.cameras.main;this.overlay=this.scene.add.rectangle(e.width/2,e.height/2,e.width,e.height,0,.7).setScrollFactor(0).setDepth(1e3),this.title=this.scene.add.text(e.width/2,100,"LEVEL UP! Choose a Power-Up",{fontFamily:"Arial",fontSize:"32px",color:"#ffffff",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.container=this.scene.add.container(0,0).setDepth(1001).setScrollFactor(0);const t=Object.keys(qz).sort((()=>.5-Math.random())).slice(0,3),s=[-220,0,220].map((t=>({x:e.width/2+t,y:e.height/2})));t.forEach(((e,t)=>{const n=this.scene.add.rectangle(s[t].x,s[t].y,150,200,3355443);n.setStrokeStyle(2,16777215),n.setInteractive({useHandCursor:!0}),n.on("pointerdown",(()=>this.selectPowerUp(e)));const i=this.scene.add.text(s[t].x,s[t].y,e,{fontFamily:"Arial",fontSize:"16px",color:"#ffffff"}).setOrigin(.5);this.container.add([n,i])}))}selectPowerUp(e){this.powerUps[e]++;const t=qz[e],s=t.base*(1+.5*(this.powerUps[e]-1));t.apply(this.scene.player,s),this.scene.tweens.add({targets:[this.overlay,this.title,this.container],alpha:0,duration:300,onComplete:()=>{[this.overlay,this.title,this.container].forEach((e=>null==e?void 0:e.destroy())),this.resumeGame(),this.handlePending()}})}resumeGame(){this.storedState.timers.forEach((({name:e,paused:t})=>{this.scene[e]&&(this.scene[e].paused=t)})),this.storedState.entities.forEach((({entity:e,vx:t,vy:s,enabled:n})=>{(null==e?void 0:e.body)&&(e.body.velocity.setTo(t,s),e.body.enable=n)})),this.originalUpdate&&(this.scene.update=this.originalUpdate),this.storedState={timers:[],entities:[]},this.isActive=!1}handlePending(){this.pendingLevelUps>0&&(this.pendingLevelUps--,this.scene.time.delayedCall(500,(()=>this.showPowerUpSelection())))}getSkillLevel(e){var t;return(null==(t=this.skillUpgradeManager)?void 0:t.getSkillLevel(e))||0}getSkillInfo(e){var t;return(null==(t=this.skillUpgradeManager)?void 0:t.getSkillInfo(e))||null}getPlayerLevel(){var e;return(null==(e=this.skillUpgradeManager)?void 0:e.getPlayerLevel())||1}getSaveData(){var e;return(null==(e=this.skillUpgradeManager)?void 0:e.getSaveData())||{}}loadSaveData(e){var t;null==(t=this.skillUpgradeManager)||t.loadSaveData(e)}shutdown(){var e;null==(e=this.skillUpgradeManager)||e.shutdown(),[this.overlay,this.title,this.container].forEach((e=>null==e?void 0:e.destroy())),this.originalUpdate&&(this.scene.update=this.originalUpdate)}}class Qz extends Phaser.GameObjects.Container{constructor(e,t){super(e,0,0),t?(this.player=t,e.add.existing(this),this.setDepth(18),this.slashDamage=t.slashDamage||10,this.slashFireRate=t.slashFireRate||1,this.slashRange=t.slashRange||70,this.slashCooldown=2e3/this.slashFireRate,this.fireBulletDamage=t.fireBulletDamage||8,this.fireBulletFireRate=t.fireBulletFireRate||1.2,this.fireBulletRange=t.fireBulletRange||200,this.fireBulletCooldown=2500/this.fireBulletFireRate,this.fireBulletSpeed=250,this.fireBulletDotDuration=4e3,this.fireBombDamage=t.fireBombDamage||18,this.fireBombFireRate=t.fireBombFireRate||.4,this.fireBombRange=t.fireBombRange||80,this.fireBombCooldown=3e3/this.fireBombFireRate,this.fireBombSpeed=120,this.fireBombExplosionRadius=50,this.fireBombDotDuration=5e3,this.iceDamage=t.iceDamage||12,this.iceFireRate=t.iceFireRate||.6,this.iceRange=t.iceRange||180,this.iceCooldown=2800/this.iceFireRate,this.iceProjectileSpeed=120,this.lightningDamage=t.lightningDamage||20,this.lightningFireRate=t.lightningFireRate||.5,this.lightningRange=t.lightningRange||250,this.lightningCooldown=4e3/this.lightningFireRate,this.lightningProjectileSpeed=200,this.lightningChainCount=t.lightningChainCount||10,this.lightningChainRange=100,this.blindingLightRange=t.blindingLightRange||300,this.blindingLightFireRate=t.blindingLightFireRate||.15,this.blindingLightCooldown=1e4/this.blindingLightFireRate,this.blindingLightDisableDuration=4e3,this.marksmanDamage=t.marksmanDamage||35,this.marksmanFireRate=t.marksmanFireRate||.3,this.marksmanRange=t.marksmanRange||400,this.marksmanCooldown=1500/this.marksmanFireRate,this.marksmanSpeed=400,this.attackTypes={slash:!0,fireBullet:!1,fireBomb:!1,ice:!1,lightning:!1,blindingLight:!1,marksman:!1},this.setupWeaponVisuals(),this.createAttackAnimations(),this.createProjectileGroups(),this.startAttackTimers(),e.events.on("update",this.update,this),e.playerAttack=this,this.connectToSkillSystem()):console.error("PlayerAttack: No player provided to constructor!")}connectToSkillSystem(){try{this.scene.time.delayedCall(200,(()=>{var e;if(null==(e=this.scene.powerUpManager)?void 0:e.skillUpgradeManager){const e=this.scene.powerUpManager.skillUpgradeManager;Object.keys(this.attackTypes).forEach((t=>{const s=this.mapAttackTypeToSkill(t);s&&e.getSkillLevel(s)>0&&(this.attackTypes[t]=!0)})),this.restartAttackTimers()}else console.log("PlayerAttack: Skill upgrade system not available yet")}))}catch(e){console.error("PlayerAttack: Error connecting to skill system:",e)}}mapAttackTypeToSkill(e){return{fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e]}enableAttackType(e){this.attackTypes.hasOwnProperty(e)&&(this.attackTypes[e]=!0,this.createTimerForAttackType(e,!0))}createTimerForAttackType(e,t=!1){const s=this.getCooldownForAttackType(e);t?this.scene.time.delayedCall(100,(()=>{this.triggerAttackByType(e),this.createNormalTimerForAttackType(e,s)})):this.createNormalTimerForAttackType(e,s)}createNormalTimerForAttackType(e,t){switch(e){case"slash":this.slashTimer&&this.slashTimer.destroy(),this.slashTimer=this.scene.time.addEvent({delay:t,callback:this.attemptSlashAttack,callbackScope:this,loop:!0});break;case"fireBullet":this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBulletTimer=this.scene.time.addEvent({delay:t,callback:this.attemptFireBulletAttack,callbackScope:this,loop:!0});break;case"fireBomb":this.fireBombTimer&&this.fireBombTimer.destroy(),this.fireBombTimer=this.scene.time.addEvent({delay:t,callback:this.attemptFireBombAttack,callbackScope:this,loop:!0});break;case"ice":this.iceTimer&&this.iceTimer.destroy(),this.iceTimer=this.scene.time.addEvent({delay:t,callback:this.attemptIceAttack,callbackScope:this,loop:!0});break;case"lightning":this.lightningTimer&&this.lightningTimer.destroy(),this.lightningTimer=this.scene.time.addEvent({delay:t,callback:this.attemptLightningAttack,callbackScope:this,loop:!0});break;case"blindingLight":this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.blindingLightTimer=this.scene.time.addEvent({delay:t,callback:this.attemptBlindingLightAttack,callbackScope:this,loop:!0});break;case"marksman":this.marksmanTimer&&this.marksmanTimer.destroy(),this.marksmanTimer=this.scene.time.addEvent({delay:t,callback:this.attemptMarksmanAttack,callbackScope:this,loop:!0})}}triggerAttackByType(e){switch(e){case"slash":this.attemptSlashAttack();break;case"fireBullet":this.attemptFireBulletAttack();break;case"fireBomb":this.attemptFireBombAttack();break;case"ice":this.attemptIceAttack();break;case"lightning":this.attemptLightningAttack();break;case"blindingLight":this.attemptBlindingLightAttack();break;case"marksman":this.attemptMarksmanAttack()}}getCooldownForAttackType(e){switch(e){case"slash":return this.slashCooldown;case"fireBullet":return this.fireBulletCooldown;case"fireBomb":return this.fireBombCooldown;case"ice":return this.iceCooldown;case"lightning":return this.lightningCooldown;case"blindingLight":return this.blindingLightCooldown;case"marksman":return this.marksmanCooldown;default:return 1e3}}restartAttackTimers(){this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBombTimer&&this.fireBombTimer.destroy(),this.iceTimer&&this.iceTimer.destroy(),this.lightningTimer&&this.lightningTimer.destroy(),this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.marksmanTimer&&this.marksmanTimer.destroy(),this.startAttackTimers()}attemptMarksmanAttack(){const e=this.findNearestEnemyInRange(this.marksmanRange);e&&this.marksmanAttack(e)}marksmanAttack(e){PC.emit("attack-used",{attackType:"marksman",cooldown:this.marksmanCooldown});const t=this.scene.add.circle(this.player.x,this.player.y,3,16777215);this.scene.physics.add.existing(t),t.setDepth(19);const s=this.scene.add.rectangle(this.player.x,this.player.y,20,2,16777215,.8);this.scene.physics.add.existing(s),s.setDepth(18);const n=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.setRotation(n),s.setRotation(n),t.body.setVelocity(Math.cos(n)*this.marksmanSpeed,Math.sin(n)*this.marksmanSpeed),s.body.setVelocity(Math.cos(n)*this.marksmanSpeed,Math.sin(n)*this.marksmanSpeed),t.damage=this.marksmanDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.marksmanRange,t.isMarksmanProjectile=!0,t.trail=s,this.lightningProjectiles.add(t),this.scene.time.delayedCall(2e3,(()=>{t.active&&(t.destroy(),s&&s.active&&s.destroy())}))}setupWeaponVisuals(){this.slashVisual=this.scene.add.arc(0,0,this.slashRange,0,Math.PI/2,!1,65280,.3),this.slashVisual.setVisible(!1),this.slashVisual.setDepth(17),this.add(this.slashVisual),this.slashSprite=this.scene.add.sprite(0,0,"AOE_Basic_Slash_Attack_V01"),this.slashSprite.setVisible(!1),this.slashSprite.setOrigin(.5,.5),this.slashSprite.setDepth(18),this.add(this.slashSprite),this.blindingLightVisual=this.scene.add.circle(0,0,this.blindingLightRange,16777215,0),this.blindingLightVisual.setStrokeStyle(6,16777215,.8),this.blindingLightVisual.setVisible(!1),this.blindingLightVisual.setDepth(19),this.add(this.blindingLightVisual)}createProjectileGroups(){this.fireBulletProjectiles=this.scene.add.group(),this.fireBombProjectiles=this.scene.add.group(),this.iceProjectiles=this.scene.add.group(),this.lightningProjectiles=this.scene.add.group(),this.scene.physics.world.enable(this.fireBulletProjectiles),this.scene.physics.world.enable(this.fireBombProjectiles),this.scene.physics.world.enable(this.iceProjectiles),this.scene.physics.world.enable(this.lightningProjectiles)}createAttackAnimations(){this.scene.anims.exists("slash_attack_v01")||this.scene.anims.create({key:"slash_attack_v01",frames:this.scene.anims.generateFrameNumbers("AOE_Basic_Slash_Attack_V01",{start:0,end:-1}),frameRate:15,repeat:0}),this.scene.anims.exists("fire_bullet")||this.scene.anims.create({key:"fire_bullet",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Ball_Projectile_VFX_V01",{start:0,end:-1}),frameRate:25,repeat:-1}),this.scene.anims.exists("fire_bomb")||this.scene.anims.create({key:"fire_bomb",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Ball_Projectile_VFX_V01",{start:0,end:-1}),frameRate:15,repeat:-1}),this.scene.textures.exists("AOE_Fire_Blast_Attack_VFX_V01")&&(this.scene.anims.exists("fire_explosion")||this.scene.anims.create({key:"fire_explosion",frames:this.scene.anims.generateFrameNumbers("AOE_Fire_Blast_Attack_VFX_V01",{start:0,end:-1}),frameRate:25,repeat:0})),this.scene.anims.exists("ice_projectile")||this.scene.anims.create({key:"ice_projectile",frames:this.scene.anims.generateFrameNumbers("AOE_Ice_Shard_Projectile_VFX_V01",{start:0,end:-1}),frameRate:16,repeat:-1}),this.scene.anims.exists("ice_explosion")||this.scene.anims.create({key:"ice_explosion",frames:this.scene.anims.generateFrameNumbers("AOE_Ice_Shard_v01",{start:0,end:-1}),frameRate:20,repeat:0}),this.scene.anims.exists("lightning_projectile")||this.scene.anims.create({key:"lightning_projectile",frames:this.scene.anims.generateFrameNumbers("lighting_chain_projectile_attack_VFX_128x32_v01",{start:0,end:-1}),frameRate:24,repeat:-1}),this.scene.anims.exists("lightning_hit")||this.scene.anims.create({key:"lightning_hit",frames:this.scene.anims.generateFrameNumbers("lighting_chain_attack_hit_projectile_VFX_72x96_v01",{start:0,end:-1}),frameRate:30,repeat:0})}startAttackTimers(){this.attackTypes.slash&&(this.slashTimer=this.scene.time.addEvent({delay:this.slashCooldown,callback:this.attemptSlashAttack,callbackScope:this,loop:!0}),console.log(`PlayerAttack: Slash timer created with ${this.slashCooldown}ms delay`)),this.attackTypes.fireBullet&&(this.fireBulletTimer=this.scene.time.addEvent({delay:this.fireBulletCooldown,callback:this.attemptFireBulletAttack,callbackScope:this,loop:!0})),this.attackTypes.fireBomb&&(this.fireBombTimer=this.scene.time.addEvent({delay:this.fireBombCooldown,callback:this.attemptFireBombAttack,callbackScope:this,loop:!0})),this.attackTypes.ice&&(this.iceTimer=this.scene.time.addEvent({delay:this.iceCooldown,callback:this.attemptIceAttack,callbackScope:this,loop:!0})),this.attackTypes.lightning&&(this.lightningTimer=this.scene.time.addEvent({delay:this.lightningCooldown,callback:this.attemptLightningAttack,callbackScope:this,loop:!0})),this.attackTypes.blindingLight&&(this.blindingLightTimer=this.scene.time.addEvent({delay:this.blindingLightCooldown,callback:this.attemptBlindingLightAttack,callbackScope:this,loop:!0})),this.attackTypes.marksman&&(this.marksmanTimer=this.scene.time.addEvent({delay:this.marksmanCooldown,callback:this.attemptMarksmanAttack,callbackScope:this,loop:!0}))}attemptSlashAttack(){const e=this.findEnemiesInSlashRange();e.length>0&&this.slashAttack(e)}findEnemiesInSlashRange(){if(!this.player)return[];if(void 0===this.player.x||void 0===this.player.y)return[];const e=[];return this.scene.enemies&&this.scene.enemies.children?this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{if(!t||void 0===t.x||void 0===t.y)return void console.warn("PlayerAttack: Invalid enemy found:",t);const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&e.push({enemy:t,distance:s})})):console.log("PlayerAttack: No scene.enemies group found or it's empty"),this.scene.breakableVases&&this.scene.breakableVases.children&&this.scene.breakableVases.getChildren().filter((e=>e.active&&!e.isBroken)).forEach((t=>{if(!t||void 0===t.x||void 0===t.y)return void console.warn("PlayerAttack: Invalid vase found:",t);const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&e.push({enemy:t,distance:s,isVase:!0})})),this.scene.children&&this.scene.children.list&&this.scene.children.list.forEach((t=>{var s;if(t&&t.active&&!t.isBroken&&t.canBeAttacked&&("BreakableVase"===t.constructor.name||"Vase"===(null==(s=t.texture)?void 0:s.key)||t.onPlayerAttack||t.takeDamage&&t.dropLoot)&&void 0!==t.x&&void 0!==t.y){const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.slashRange&&(e.some((e=>e.enemy===t))||e.push({enemy:t,distance:s,isVase:!0}))}})),e}slashAttack(e){PC.emit("attack-used",{attackType:"slash",cooldown:this.slashCooldown}),this.showSlashIndicator(),this.x=this.player.x,this.y=this.player.y,this.slashSprite.setPosition(0,0),this.slashSprite.setVisible(!0),this.slashSprite.play("slash_attack_v01"),e.forEach((({enemy:e,distance:t,isVase:s})=>{s&&e.onPlayerAttack?e.onPlayerAttack(this.slashDamage):e.takeDamage?e.takeDamage(this.slashDamage):console.warn("PlayerAttack: Enemy has no takeDamage method!",e)})),this.scene.time.delayedCall(300,(()=>{this.slashSprite.setVisible(!1)})),this.slashSprite.setVisible(!0),this.slashSprite.setScale(1.4),this.slashSprite.setDepth(18),this.slashSprite.play("slash_attack_v01"),this.slashSprite.once("animationcomplete",(()=>{this.slashSprite.setVisible(!1),this.slashSprite.setScale(1)})),e.forEach((e=>{e.enemy.active&&!e.enemy.isDead&&(e.isVase?e.enemy.onPlayerAttack&&e.enemy.onPlayerAttack(this.slashDamage):e.enemy.takeDamage&&e.enemy.takeDamage(this.slashDamage))})),this.showSlashIndicator()}attemptBlindingLightAttack(){const e=this.findEnemiesInBlindingLightRange();e.length>0&&this.blindingLightAttack(e)}findEnemiesInBlindingLightRange(){if(!this.scene.enemies||!this.player)return[];const e=[];return this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.blindingLightRange&&e.push({enemy:t,distance:s})})),this.scene.zombieGroup&&this.scene.zombieGroup.children&&this.scene.zombieGroup.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{const s=Phaser.Math.Distance.Between(this.player.x,this.player.y,t.x,t.y);s<=this.blindingLightRange&&e.push({enemy:t,distance:s})})),e}blindingLightAttack(e){PC.emit("attack-used",{attackType:"blindingLight",cooldown:this.blindingLightCooldown}),this.x=this.player.x,this.y=this.player.y,this.applyPlayerInvincibility(3e3);for(let t=0;t<3;t++)this.scene.time.delayedCall(100*t,(()=>{this.createBlindingLightRing(t)}));e.forEach((e=>{e.enemy.active&&!e.enemy.isDead&&this.applyBlindEffect(e.enemy,this.blindingLightDisableDuration)})),this.createScreenFlash()}createBlindingLightRing(e){const t=this.scene.add.circle(this.player.x,this.player.y,20,16777215,0);t.setStrokeStyle(4-e,16777215,.9-.2*e),t.setDepth(20),this.scene.tweens.add({targets:t,radius:this.blindingLightRange+50*e,alpha:0,duration:800+200*e,ease:"Power2",onComplete:()=>t.destroy()})}createScreenFlash(){const e=this.scene.add.rectangle(this.scene.cameras.main.centerX,this.scene.cameras.main.centerY,this.scene.cameras.main.width,this.scene.cameras.main.height,16777215,.8);e.setDepth(100),e.setScrollFactor(0),this.scene.tweens.add({targets:e,alpha:0,duration:500,ease:"Power2",onComplete:()=>e.destroy()})}applyBlindEffect(e,t){e&&!e.isDead&&(e.blindTimer&&e.blindTimer.destroy(),void 0===e.originalTint&&(e.originalTint=e.tint),e.setTint(16777215),e.isBlinded=!0,void 0!==e.canAttack&&(e.originalCanAttack=e.canAttack,e.canAttack=!1),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),e.speed=.3*e.originalSpeed,e.blindTimer=this.scene.time.delayedCall(t,(()=>{this.clearBlindEffect(e)})))}clearBlindEffect(e){e&&(e.blindTimer&&(e.blindTimer.destroy(),e.blindTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint(),void 0!==e.originalCanAttack&&(e.canAttack=e.originalCanAttack),void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.isBlinded=!1)}applyPlayerInvincibility(e){this.player&&(this.player.invincibilityTimer&&this.player.invincibilityTimer.destroy(),void 0===this.player.originalTint&&(this.player.originalTint=this.player.tint),this.player.isInvincible=!0,this.player.isInvulnerable=!0,this.player.invincibilityTween=this.scene.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power2",yoyo:!0,repeat:-1}),this.player.setTint(16766720),this.createProtectiveAura(),this.player.invincibilityTimer=this.scene.time.delayedCall(e,(()=>{this.clearPlayerInvincibility()})))}createProtectiveAura(){if(!this.player)return;const e=this.scene.add.circle(this.player.x,this.player.y,40,16766720,0);e.setStrokeStyle(3,16766720,.6),e.setDepth(this.player.depth-1),this.player.protectiveAura=e,this.scene.tweens.add({targets:e,scaleX:1.2,scaleY:1.2,alpha:.3,duration:800,ease:"Sine.easeInOut",yoyo:!0,repeat:-1})}clearPlayerInvincibility(){this.player&&(this.player.isInvincible=!1,this.player.isInvulnerable=!1,this.player.invincibilityTween&&(this.player.invincibilityTween.stop(),this.player.invincibilityTween=null),this.player.setAlpha(1),void 0!==this.player.originalTint?this.player.setTint(this.player.originalTint):this.player.clearTint(),this.player.protectiveAura&&(this.player.protectiveAura.destroy(),this.player.protectiveAura=null),this.player.invincibilityTimer&&(this.player.invincibilityTimer.destroy(),this.player.invincibilityTimer=null))}attemptFireBulletAttack(){const e=this.findNearestEnemyInRange(this.fireBulletRange);e&&this.fireBulletAttack(e)}fireBulletAttack(e){PC.emit("attack-used",{attackType:"fireBullet",cooldown:this.fireBulletCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Fire_Ball_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(.6),t.setDepth(18),t.play("fire_bullet");const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.body.setVelocity(Math.cos(s)*this.fireBulletSpeed,Math.sin(s)*this.fireBulletSpeed),t.damage=this.fireBulletDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.fireBulletRange,t.isFireBullet=!0,t.hitEnemies=[],this.fireBulletProjectiles.add(t)}attemptFireBombAttack(){const e=this.findNearestEnemyInRange(this.fireBombRange);e&&this.fireBombAttack(e)}fireBombAttack(e){PC.emit("attack-used",{attackType:"fireBomb",cooldown:this.fireBombCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Fire_Ball_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(1),t.setDepth(18),t.play("fire_bomb"),t.setTint(16737792);const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.body.setVelocity(Math.cos(s)*this.fireBombSpeed,Math.sin(s)*this.fireBombSpeed),t.damage=this.fireBombDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.fireBombRange,t.targetX=e.x,t.targetY=e.y,t.isFireBomb=!0,t.hasExploded=!1,this.fireBombProjectiles.add(t)}explodeFireBomb(e){e.active&&!e.hasExploded&&(e.hasExploded=!0,e.body.setVelocity(0,0),this.scene.time.delayedCall(500,(()=>{if(e.active){if(this.scene.anims.exists("fire_explosion")){const t=this.scene.add.sprite(e.x,e.y,"AOE_Fire_Blast_Attack_VFX_V01");t.setScale(2),t.setDepth(19),t.play("fire_explosion"),t.once("animationcomplete",(()=>t.destroy()))}this.scene.enemies&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=this.fireBombExplosionRadius&&(t.isVase&&t.onPlayerAttack?t.onPlayerAttack(e.damage):t.takeDamage&&(t.takeDamage(e.damage),this.applyBurnEffect(t,.4*e.damage,this.fireBombDotDuration)))})),e.destroy()}})))}attemptIceAttack(){const e=this.findNearestEnemyInRange(this.iceRange);e&&this.iceProjectileAttack(e)}iceProjectileAttack(e){PC.emit("attack-used",{attackType:"ice",cooldown:this.iceCooldown});const t=this.scene.add.sprite(this.player.x,this.player.y,"AOE_Ice_Shard_Projectile_VFX_V01");this.scene.physics.add.existing(t),t.setScale(.8),t.setDepth(18),t.play("ice_projectile");const s=Phaser.Math.Angle.Between(this.player.x,this.player.y,e.x,e.y);t.setRotation(s),t.body.setVelocity(Math.cos(s)*this.iceProjectileSpeed,Math.sin(s)*this.iceProjectileSpeed),t.damage=this.iceDamage,t.startX=this.player.x,t.startY=this.player.y,t.maxRange=this.iceRange,t.isIceProjectile=!0,this.iceProjectiles.add(t)}createIceExplosionEffect(e,t){if(this.scene.anims.exists("ice_explosion")){const s=this.scene.add.sprite(e,t,"AOE_Ice_Shard_v01");s.setScale(.8),s.setOrigin(.5,.5),s.setDepth(19),s.play("ice_explosion"),s.once("animationcomplete",(()=>s.destroy()))}}attemptLightningAttack(){const e=this.findNearestEnemyInRange(this.lightningRange);e&&this.lightningChainAttack(e)}lightningChainAttack(e){PC.emit("attack-used",{attackType:"lightning",cooldown:this.lightningCooldown}),this.performLightningChain(this.player,e,0,[])}performLightningChain(e,t,s,n){if(s>=this.lightningChainCount||!t||n.includes(t))return;n.push(t);const i=this.scene.add.sprite(e.x,e.y,"lighting_chain_projectile_attack_VFX_128x32_v01");this.scene.physics.add.existing(i),i.setScale(.7),i.setDepth(19),i.play("lightning_projectile");const a=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y);i.setRotation(a),i.body.setVelocity(Math.cos(a)*this.lightningProjectileSpeed,Math.sin(a)*this.lightningProjectileSpeed),i.damage=this.lightningDamage*(1-.15*s),i.startX=e.x,i.startY=e.y,i.targetEnemy=t,i.chainDepth=s,i.hitTargets=n,i.isLightningProjectile=!0,this.lightningProjectiles.add(i)}hitLightningTarget(e){if(!e.active||!e.targetEnemy)return;const t=e.targetEnemy;t.takeDamage&&t.active&&!t.isDead&&(t.takeDamage(e.damage),this.applyStunEffect(t,1e3));const s=this.scene.add.sprite(t.x,t.y,"lighting_chain_attack_hit_projectile_VFX_72x96_v01");if(s.setScale(.8),s.setDepth(20),s.play("lightning_hit"),s.once("animationcomplete",(()=>s.destroy())),e.chainDepth<this.lightningChainCount-1){const s=this.findNearestEnemyInChainRange(t,e.hitTargets);s&&this.scene.time.delayedCall(100,(()=>{this.performLightningChain(t,s,e.chainDepth+1,e.hitTargets)}))}e.destroy()}findNearestEnemyInChainRange(e,t){if(!this.scene.enemies||!this.scene.enemies.children)return null;let s=null,n=this.lightningChainRange;return this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead&&!t.includes(e))).forEach((t=>{const i=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);i<=this.lightningChainRange&&i<n&&(n=i,s=t)})),s}applyStunEffect(e,t){e&&!e.isDead&&(e.stunTimer&&e.stunTimer.destroy(),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),void 0===e.originalTint&&(e.originalTint=e.tint),e.speed=0,e.setTint(16776960),e.isStunned=!0,e.stunTimer=this.scene.time.delayedCall(t,(()=>{this.clearStunEffect(e)})))}clearStunEffect(e){e&&(void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.stunTimer&&(e.stunTimer.destroy(),e.stunTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint(),e.isStunned=!1)}applyBurnEffect(e,t,s){if(!e||e.isDead)return;e.burnTimer&&e.burnTimer.destroy(),void 0===e.originalTint&&(e.originalTint=e.tint),e.setTint(16729088);const n=s/500,i=t/n;let a=0;e.burnTimer=this.scene.time.addEvent({delay:500,callback:()=>{e&&!e.isDead&&e.active?(e.takeDamage&&e.takeDamage(i),a++,a>=n&&this.clearBurnEffect(e)):this.clearBurnEffect(e)},repeat:n-1})}clearBurnEffect(e){e&&(e.burnTimer&&(e.burnTimer.destroy(),e.burnTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint())}applySlowEffect(e,t,s){e&&!e.isDead&&(e.slowTimer&&e.slowTimer.destroy(),void 0===e.originalSpeed&&(e.originalSpeed=e.speed||50),void 0===e.originalTint&&(e.originalTint=e.tint),e.speed=e.originalSpeed*(1-t),e.setTint(8969727),e.slowTimer=this.scene.time.delayedCall(s,(()=>{this.clearSlowEffect(e)})))}clearSlowEffect(e){e&&(void 0!==e.originalSpeed&&(e.speed=e.originalSpeed),e.slowTimer&&(e.slowTimer.destroy(),e.slowTimer=null),void 0!==e.originalTint?e.setTint(e.originalTint):e.clearTint())}findNearestEnemyInRange(e){if(!this.player)return null;let t=null,s=e;return this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((n=>{const i=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);i<=e&&i<s&&(s=i,t=n)})),this.scene.breakableVases&&this.scene.breakableVases.children&&this.scene.breakableVases.getChildren().filter((e=>e.active&&!e.isBroken)).forEach((n=>{const i=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);i<=e&&i<s&&(s=i,t=n,t.isVase=!0)})),this.scene.children&&this.scene.children.list&&this.scene.children.list.forEach((n=>{var i;if(n&&n.active&&!n.isBroken&&n.canBeAttacked&&("BreakableVase"===n.constructor.name||"Vase"===(null==(i=n.texture)?void 0:i.key)||n.onPlayerAttack||n.takeDamage&&n.dropLoot)){const i=Phaser.Math.Distance.Between(this.player.x,this.player.y,n.x,n.y);i<=e&&i<s&&(s=i,t=n,t.isVase=!0,console.log("Found vase target via fallback detection:",n))}})),t}showSlashIndicator(){this.slashVisual.setVisible(!0),this.slashVisual.setAlpha(.5);const e=this.scene.add.circle(this.player.x,this.player.y,10,65280,0);e.setStrokeStyle(1,16776960,.8),e.setDepth(17),this.scene.tweens.add({targets:e,radius:this.slashRange,alpha:0,duration:400,ease:"Power2",onComplete:()=>e.destroy()}),this.scene.time.delayedCall(300,(()=>{this.slashVisual.setVisible(!1)}))}update(){this.player&&this.player.protectiveAura&&this.player.protectiveAura.setPosition(this.player.x,this.player.y),this.fireBulletProjectiles&&this.fireBulletProjectiles.children&&this.fireBulletProjectiles.children.entries&&this.fireBulletProjectiles.children.entries.forEach((e=>{e.active&&e.isFireBullet&&(Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?e.destroy():[this.scene.enemies,this.scene.zombieGroup,this.scene.breakableVases].filter((e=>e&&e.children)).forEach((t=>{t&&t.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{e.hitEnemies.includes(t)||Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=20&&(e.hitEnemies.push(t),t.isVase&&t.onPlayerAttack?t.onPlayerAttack(e.damage):t.takeDamage&&(t.takeDamage(e.damage),this.applyBurnEffect(t,.3*e.damage,this.fireBulletDotDuration)))}))})))})),this.fireBombProjectiles&&this.fireBombProjectiles.children&&this.fireBombProjectiles.children.entries&&this.fireBombProjectiles.children.entries.forEach((e=>{e.active&&e.isFireBomb&&(Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?this.explodeFireBomb(e):[this.scene.enemies,this.scene.zombieGroup,this.scene.breakableVases].filter((e=>e&&e.children)).forEach((t=>{t&&t.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=25&&this.explodeFireBomb(e)}))})))})),this.iceProjectiles&&this.iceProjectiles.children&&this.iceProjectiles.children.entries&&this.iceProjectiles.children.entries.forEach((e=>{if(e.active&&e.isIceProjectile)return Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=e.maxRange?(this.createIceExplosionEffect(e.x,e.y),void e.destroy()):void(this.scene.enemies&&this.scene.enemies.children&&this.scene.enemies.getChildren().filter((e=>e.active&&!e.isDead)).forEach((t=>{if(Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<=20)return t.isVase&&t.onPlayerAttack?(t.onPlayerAttack(e.damage),this.createIceExplosionEffect(e.x,e.y)):t.takeDamage&&(t.takeDamage(e.damage),this.applySlowEffect(t,.5,2e3),this.createIceExplosionEffect(e.x,e.y)),void e.destroy()})))})),this.lightningProjectiles&&this.lightningProjectiles.children&&this.lightningProjectiles.children.entries&&this.lightningProjectiles.children.entries.forEach((e=>{e.active&&e.isLightningProjectile&&(e.targetEnemy&&e.targetEnemy.active?Phaser.Math.Distance.Between(e.x,e.y,e.targetEnemy.x,e.targetEnemy.y)<=25?this.hitLightningTarget(e):Phaser.Math.Distance.Between(e.startX,e.startY,e.x,e.y)>=this.lightningRange&&e.destroy():e.destroy())}))}updateStats(){if(this.player&&this.scene&&this.scene.active)try{if(this.slashDamage=this.player.slashDamage||10,this.slashFireRate=this.player.slashFireRate||1,this.slashRange=this.player.slashRange||70,this.slashCooldown=2e3/this.slashFireRate,this.fireBulletDamage=this.player.fireBulletDamage||8,this.fireBulletFireRate=this.player.fireBulletFireRate||1.2,this.fireBulletRange=this.player.fireBulletRange||300,this.fireBulletCooldown=2500/this.fireBulletFireRate,this.fireBombDamage=this.player.fireBombDamage||18,this.fireBombFireRate=this.player.fireBombFireRate||.4,this.fireBombRange=this.player.fireBombRange||220,this.fireBombCooldown=3e3/this.fireBombFireRate,this.iceDamage=this.player.iceDamage||12,this.iceFireRate=this.player.iceFireRate||.6,this.iceRange=this.player.iceRange||180,this.iceCooldown=2800/this.iceFireRate,this.lightningDamage=this.player.lightningDamage||20,this.lightningFireRate=this.player.lightningFireRate||.5,this.lightningRange=this.player.lightningRange||250,this.lightningCooldown=4e3/this.lightningFireRate,this.lightningChainCount=this.player.lightningChainCount||10,this.blindingLightRange=this.player.blindingLightRange||300,this.blindingLightFireRate=this.player.blindingLightFireRate||.15,this.blindingLightCooldown=1e4/this.blindingLightFireRate,this.blindingLightDisableDuration=this.player.blindingLightDisableDuration||4e3,this.marksmanDamage=this.player.marksmanDamage||35,this.marksmanFireRate=this.player.marksmanFireRate||.3,this.marksmanRange=this.player.marksmanRange||400,this.marksmanCooldown=1500/this.marksmanFireRate,this.slashTimer&&(this.slashTimer.delay=this.slashCooldown),this.fireBulletTimer&&(this.fireBulletTimer.delay=this.fireBulletCooldown),this.fireBombTimer&&(this.fireBombTimer.delay=this.fireBombCooldown),this.iceTimer&&(this.iceTimer.delay=this.iceCooldown),this.lightningTimer&&(this.lightningTimer.delay=this.lightningCooldown),this.blindingLightTimer&&(this.blindingLightTimer.delay=this.blindingLightCooldown),this.marksmanTimer&&(this.marksmanTimer.delay=this.marksmanCooldown),this.slashVisual&&this.slashVisual.setRadius&&"function"==typeof this.slashVisual.setRadius)try{this.slashVisual.setRadius(this.slashRange)}catch(e){console.warn("Error setting slash visual radius:",e)}if(this.blindingLightVisual&&this.blindingLightVisual.setRadius&&"function"==typeof this.blindingLightVisual.setRadius)try{this.blindingLightVisual.setRadius(this.blindingLightRange)}catch(e){console.warn("Error setting blinding light visual radius:",e)}}catch(e){console.error("Error in PlayerAttack.updateStats:",e)}}destroy(){this.slashTimer&&this.slashTimer.destroy(),this.fireBulletTimer&&this.fireBulletTimer.destroy(),this.fireBombTimer&&this.fireBombTimer.destroy(),this.iceTimer&&this.iceTimer.destroy(),this.lightningTimer&&this.lightningTimer.destroy(),this.blindingLightTimer&&this.blindingLightTimer.destroy(),this.marksmanTimer&&this.marksmanTimer.destroy(),this.scene.enemies&&this.scene.enemies.getChildren().forEach((e=>{this.clearBurnEffect(e),this.clearSlowEffect(e),this.clearStunEffect(e),this.clearBlindEffect(e)})),this.clearPlayerInvincibility(),this.fireBulletProjectiles.destroy(!0),this.fireBombProjectiles.destroy(!0),this.iceProjectiles.destroy(!0),this.lightningProjectiles.destroy(!0),super.destroy()}}class Zz extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t??10,s??10),this.background=e.add.rectangle(0,0,300,30,0,.7),this.background.setOrigin(0,0),this.add(this.background),this.levelText=e.add.text(10,15,"LEVEL: 1",{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#ffffff",stroke:"#000000",strokeThickness:4,align:"left"}),this.levelText.setOrigin(0,.5),this.add(this.levelText),this.expText=e.add.text(120,15,"EXP: 0/100",{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#ffff00",stroke:"#000000",strokeThickness:4,align:"left"}),this.expText.setOrigin(0,.5),this.add(this.expText),this.setScrollFactor(0),this.setDepth(1e3),this.level=1,this.experience=0,this.nextLevelExp=100,this.onLevelUpCallbacks=[],e.playerLevelSystem=this,this.updateText(),this.updateExpBar()}addExperience(e){try{return console.log(`Adding ${e} experience points`),("number"!=typeof e||isNaN(e))&&(console.warn("Invalid experience amount:",e),e=1),this.experience+=e,this.checkLevelUp(),this.updateText(),this.updateExpBar(),this}catch(t){return console.error("Error adding experience:",t),this}}checkLevelUp(){if(this.experience>=this.nextLevelExp){this.level++,this.experience-=this.nextLevelExp,this.nextLevelExp=Math.floor(100*Math.pow(1.2,this.level-1));try{this.onLevelUpCallbacks.forEach((e=>e(this.level)))}catch(e){console.error("Error in level up callback:",e)}this.updateExpBar(),this.checkLevelUp()}}updateText(){this.levelText.setText(`LEVEL: ${this.level}`),this.expText.setText(`EXP: ${this.experience}/${this.nextLevelExp}`);const e=Math.max(204,this.levelText.width+this.expText.width+30);this.background.width=e,this.progressBarFill&&this.updateProgressBar(),this.updateExpBar()}onLevelUp(e){return"function"==typeof e&&this.onLevelUpCallbacks.push(e),this}getLevel(){return this.level}getLevelProgress(){return this.experience/this.nextLevelExp}setUIPosition(e,t){return this.setPosition(e,t),console.log("UI Position set to:",e,t),this}createProgressBar(e,t,s,n){try{return this.progressBarBg&&(this.progressBarBg.destroy(),this.progressBarFill.destroy()),this.progressBarBg=this.scene.add.rectangle(0,40,s,n,0,.7),this.progressBarBg.setScrollFactor(0),this.progressBarBg.setOrigin(0,.5),this.progressBarBg.setDepth(99),this.add(this.progressBarBg),this.progressBarFill=this.scene.add.rectangle(2,40,0,n-4,65535,1),this.progressBarFill.setScrollFactor(0),this.progressBarFill.setOrigin(0,.5),this.progressBarFill.setDepth(99),this.add(this.progressBarFill),this.progressBarWidth=s-4,this.updateProgressBar(),this}catch(i){return console.error("Error creating progress bar:",i),this}}updateProgressBar(){try{if(this.progressBarFill&&this.progressBarWidth){const e=this.getLevelProgress(),t=this.progressBarWidth*e;this.progressBarFill.width=t}}catch(e){console.error("Error updating progress bar:",e)}}updateExpBar(){try{const e={currentExp:this.experience,maxExp:this.nextLevelExp,level:this.level,experience:this.experience,maxExperience:this.nextLevelExp,exp:this.experience,maxExp:this.nextLevelExp,lvl:this.level};PC.emit("player-exp-updated",e),PC.emit("player-stats-updated",e),window.dispatchEvent(new CustomEvent("playerExpUpdated",{detail:e})),window.dispatchEvent(new CustomEvent("playerStatsUpdated",{detail:e}))}catch(e){console.error("Error updating exp bar:",e)}}}class Xz extends Phaser.Scene{constructor(e){super(e),this.initializeProperties()}initializeProperties(){this.gameManager=null,this.gameplayManager=null,this.powerUpManager=null,this.playerAttackSystem=null,this.playerAttack=null,this.playerLevelSystem=null,this.player=null,this.isTeleporting=!1,this.debugMode=!1,this.gameStartTime=0,this.enemiesKilled=0,this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemies=null,this.experienceOrbs=null,this.goldOrbs=null,this.zombieGroup=null,this.staticObstacles=null,this.collisionLayers=[],this.statsContainer=null,this.statsUpdateTimer=null,this.upgradeDebugText=null,this.enemySpawnTimer=null}preload(){this.loadEssentialAssets()}loadEssentialAssets(){const e=[{type:"image",key:"Exp",path:HC.ASSETS.PICKUPS.EXP},{type:"image",key:"Health_Potion_01",path:HC.ASSETS.PICKUPS.HEALTH_POTION}],t=[{key:"AOE_Fire_Ball_Projectile_VFX_V01",path:HC.ASSETS.EFFECTS.FIRE_BALL,config:HC.ASSETS.SPRITESHEETS.FIRE_BALL},{key:"AOE_Fire_Blast_Attack_VFX_V01",path:HC.ASSETS.EFFECTS.FIRE_BLAST,config:HC.ASSETS.SPRITESHEETS.FIRE_BLAST},{key:"AOE_Ice_Shard_Projectile_VFX_V01",path:HC.ASSETS.EFFECTS.ICE_SHARD,config:HC.ASSETS.SPRITESHEETS.ICE_SHARD}];e.forEach((e=>this.load.image(e.key,e.path))),t.forEach((e=>this.load.spritesheet(e.key,e.path,e.config)))}create(){this.initializeCore(),this.initializeManagers(),this.initializeUI(),this.setupEventListeners(),PC.emit("current-scene-ready",this)}initializeCore(){this.gameManager=this.game.registry.get("gameManager")||new QC,this.game.registry.set("gameManager",this.gameManager),this.gameManager.setCurrentScene(this),this.gameStartTime=Date.now(),this.resetGameState(),this.initializeCollisionSystem()}resetGameState(){this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemiesKilled=0,this.isTeleporting=!1}initializeManagers(){try{this.initializePowerUpManager(),this.initializeGameplayManager()}catch(e){console.error("Manager initialization failed:",e)}}initializePowerUpManager(){this.powerUpManager||(this.powerUpManager=new Kz(this),this.powerUpManager.initialize())}initializeGameplayManager(){var e,t;try{this.gameplayManager||(this.gameplayManager=new zz(this),null==(t=(e=this.gameplayManager).initialize)||t.call(e))}catch(s){console.warn("GameplayManager initialization failed:",s),this.gameplayManager=null}}initializeUI(){this.createStatsDisplay()}initializePlayerSystems(){this.player?(this.setupPlayerLevel(),this.setupPlayerAttack(),this.setupLevelUpCallback(),this.setupInitialSkills()):console.warn("Player not found, cannot initialize player systems")}setupPlayerLevel(){this.playerLevelSystem=new Zz(this,20,20),this.add.existing(this.playerLevelSystem)}setupPlayerAttack(){this.playerAttack=new Qz(this,this.player),this.add.existing(this.playerAttack),this.playerAttackSystem=this.playerAttack}setupLevelUpCallback(){this.playerLevelSystem.onLevelUp((e=>{var t;(null==(t=this.powerUpManager)?void 0:t.skillUpgradeManager)?(this.powerUpManager.skillUpgradeManager.playerLevel=e,this.powerUpManager.skillUpgradeManager.showSkillUpgradeSelection()):console.error("PowerUpManager or SkillUpgradeManager not found!")}))}setupInitialSkills(){var e,t;null==(t=null==(e=this.powerUpManager)?void 0:e.skillUpgradeManager)||t.setupInitialSkills()}initializeCollisionSystem(){["enemies","experienceOrbs","goldOrbs","zombieGroup"].forEach((e=>{this[e]=this.physics.add.group()})),this.staticObstacles=this.physics.add.staticGroup()}createStatsDisplay(){try{this.createStatsContainer(),this.createStatsBackground(),this.createStatsTexts(),this.startStatsUpdateTimer()}catch(e){console.error("Stats display creation failed:",e)}}createStatsContainer(){const{x:e,y:t}=HC.UI.STATS_DISPLAY.POSITION;this.statsContainer=this.add.container(this.cameras.main.width+e,t),this.statsContainer.setScrollFactor(0),this.statsContainer.setDepth(1e3)}createStatsBackground(){const{width:e,height:t}=HC.UI.STATS_DISPLAY.SIZE,{color:s,alpha:n}=HC.UI.STATS_DISPLAY.BACKGROUND,i=this.add.rectangle(-e,0,e,t,s,n);i.setOrigin(0,0),this.statsContainer.add(i)}createStatsTexts(){const e=HC.UI.STATS_DISPLAY.TEXT_STYLE;[{key:"levelText",text:"Level: 1"},{key:"expText",text:"EXP: 0/100"},{key:"killsText",text:"Kills: 0"},{key:"goldText",text:"Gold: 0"},{key:"timeText",text:"Time: 00:00"},{key:"waveText",text:"Wave: 0"}].forEach(((t,s)=>{this[t.key]=this.add.text(-190,10+15*s,t.text,e),this.statsContainer.add(this[t.key])}))}startStatsUpdateTimer(){this.statsUpdateTimer=this.time.addEvent({delay:HC.UI.STATS_DISPLAY.UPDATE_INTERVAL,callback:this.updateStatsDisplay,callbackScope:this,loop:!0})}updateStatsDisplay(){if(this.gameManager)try{const e=Date.now()-this.gameStartTime,t=this.getGameStats();this.updateStatTexts(t,e)}catch(e){console.error("Stats display update failed:",e)}}getGameStats(){var e,t;return(null==(t=null==(e=this.gameplayManager)?void 0:e.mobManager)?void 0:t.getStatistics())||{}}updateStatTexts(e,t){[{element:this.levelText,text:`Level: ${this.getPlayerLevel()}`},{element:this.expText,text:`EXP: ${this.getPlayerExp()}`},{element:this.killsText,text:`Kills: ${e.totalKilled||this.enemiesKilled}`},{element:this.goldText,text:`Gold: ${this.gameManager.gold||0}`},{element:this.timeText,text:`Time: ${this.formatTime(t)}`},{element:this.waveText,text:`Wave: ${e.currentWave||this.currentWave}`}].forEach((e=>{var t;null==(t=e.element)||t.setText(e.text)}))}getPlayerLevel(){var e;return(null==(e=this.playerLevelSystem)?void 0:e.getLevel())||1}getPlayerExp(){return this.playerLevelSystem?`${this.playerLevelSystem.experience}/${this.playerLevelSystem.nextLevelExp}`:"0/100"}formatTime(e){const t=Math.floor(e/1e3),s=t%60;return`${Math.floor(t/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}setupEventListeners(){this.setupWindowEventListeners(),this.setupKeyboardListeners()}setupWindowEventListeners(){window.addEventListener("gameStateUpdated",this.updateStatsDisplay.bind(this)),window.addEventListener("levelUp",this.updateStatsDisplay.bind(this))}setupKeyboardListeners(){this.input.keyboard.on(`keydown-${HC.DEBUG.CONTROLS.TOGGLE_DEBUG}`,(()=>{this.debugMode=!this.debugMode}))}onPlayerCreated(e){this.player=e,this.initializePlayerSystems(),this.setupExperienceCollection()}setupExperienceCollection(){this.player&&this.experienceOrbs&&(this.physics.add.overlap(this.player,this.experienceOrbs,((e,t)=>{this.collectExperience(t)})),this.enemies&&this.physics.add.overlap(this.player,this.enemies,this.handleEnemyCollision.bind(this)),this.zombieGroup&&this.physics.add.overlap(this.player,this.zombieGroup,this.handleZombieCollision.bind(this)))}collectExperience(e){if(this.playerLevelSystem){const t=e.expValue||1;this.playerLevelSystem.addExperience(t)}e.destroy()}handleEnemyCollision(e,t){}handleZombieCollision(e,t){}addExperience(e){var t;null==(t=this.playerLevelSystem)||t.addExperience(e)}trackEnemyKill(e){var t,s;this.enemiesKilled++,null==(t=this.playerLevelSystem)||t.addExperience(HC.PLAYER.COMBAT.EXP_PER_KILL),null==(s=this.gameManager)||s.trackEnemyKill()}removeZombie(e){var t,s;null==(t=this.zombieGroup)||t.remove(e),null==(s=this.enemies)||s.remove(e)}addEnemyToGroups(e){var t,s;e&&(null==(t=this.enemies)||t.add(e),this.isZombieType(e)&&(null==(s=this.zombieGroup)||s.add(e)))}isZombieType(e){return e.isZombie||e.constructor.name.toLowerCase().includes("zombie")}startEnemySpawning(){var e,t,s;if(null==(e=this.gameplayManager)?void 0:e.mobManager)try{return void(null==(s=(t=this.gameplayManager.mobManager).startSpawning)||s.call(t))}catch(n){console.warn("GameplayManager spawning failed:",n)}this.ensureEnemyGroups()}ensureEnemyGroups(){this.enemies||(this.enemies=this.physics.add.group()),this.zombieGroup||(this.zombieGroup=this.physics.add.group())}spawnBasicEnemy(){var e;(null==(e=this.player)?void 0:e.active)&&this.player.isDead}setupPlayerAttack(){var e,t;if(this.player)if(this.playerAttack)console.log("PlayerAttack system already exists");else try{this.playerAttack=new Qz(this,this.player),this.add.existing(this.playerAttack),this.playerAttackSystem=this.playerAttack,null==(t=(e=this.playerAttack).setActive)||t.call(e,!0)}catch(s){console.error("PlayerAttack initialization failed:",s)}else console.warn("Cannot setup player attack - player not found")}showPowerUpSelection(){var e;null==(e=this.powerUpManager)||e.showPowerUpSelection()}getPlayerLevel(){var e;return(null==(e=this.playerLevelSystem)?void 0:e.getLevel())||1}update(e,t){try{this.debugMode&&this.upgradeDebugText&&this.updateDebugDisplay()}catch(s){console.error("BaseGameScene update error:",s)}}updateDebugDisplay(){if(this.upgradeDebugText)try{this.upgradeDebugText.setText(debugInfo)}catch(e){console.error("Debug display update failed:",e)}}getPlayerHealthDisplay(){var e,t;return this.player?`${(null==(e=this.player.health)?void 0:e.toFixed(1))||0}/${(null==(t=this.player.maxHealth)?void 0:t.toFixed(1))||100}`:"0/100"}shutdown(){try{this.cleanupTimers(),this.cleanupEventListeners(),this.cleanupManagers(),this.cleanupPhysicsGroups(),this.cleanupUI(),this.resetState()}catch(e){console.error("BaseGameScene shutdown error:",e)}}cleanupTimers(){["statsUpdateTimer","enemySpawnTimer"].forEach((e=>{this[e]&&(this[e].destroy(),this[e]=null)}))}cleanupEventListeners(){window.removeEventListener("gameStateUpdated",this.updateStatsDisplay),window.removeEventListener("levelUp",this.updateStatsDisplay),this.input.keyboard.removeAllListeners()}cleanupManagers(){["gameplayManager","powerUpManager"].forEach((e=>{var t,s;this[e]&&(null==(s=(t=this[e]).shutdown)||s.call(t),this[e]=null)}))}cleanupPhysicsGroups(){["enemies","experienceOrbs","goldOrbs","zombieGroup"].forEach((e=>{this[e]=null})),this.staticObstacles&&(this.staticObstacles.clear(!0,!0),this.staticObstacles=null)}cleanupUI(){this.statsContainer&&(this.statsContainer.destroy(),this.statsContainer=null)}resetState(){var e;this.collisionLayers=[],this.enemiesKilled=0,this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.gameStartTime=0,null==(e=this.gameManager)||e.saveGame(),this.gameManager&&(this.gameManager.currentWave=0)}registerCollisionLayer(e,t){e&&this.collisionLayers.push({layer:e,name:t})}registerStaticObstacle(e,t){e&&this.staticObstacles&&this.staticObstacles.add(e)}setupZombieObstacleCollisions(){this.zombieGroup&&this.staticObstacles&&this.physics.add.collider(this.zombieGroup,this.staticObstacles),this.collisionLayers.forEach((({layer:e})=>{this.zombieGroup&&e&&this.physics.add.collider(this.zombieGroup,e)}))}}class Yz extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??24,s??24,n||"Player_Character_Idle_Animation_v01",i??0),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(24,24,!1),this.body.setOffset(12,12);const a=e.cameras.main;a.startFollow(this,!0,.1,.1),a.setZoom(3.15),a.fadeIn(1e3),this.moveSpeed=150,this.lastDirection="down",this.isMovingToTarget=!1,this.maxHealth=100,this.health=this.maxHealth,this.isInvulnerable=!1,this.invulnerabilityTime=500,this.isDead=!1,this.damage=10,this.armor=0,this.critChance=.05,this.critDamage=1.5,this.fireRate=1,this.attackRange=100,this.pickupRange=50,this.isMoving=!1,this.animationSpeed=200,this.currentAnimFrame=0,this.animationTimer=0,this.gameManager=e.game.registry.get("gameManager"),this.gameManager&&(this.gameManager.applyPlayerStats(this),this.isDead=!1,this.alive=!0,this.isInvulnerable=!1,console.log("Player stats after applying menu upgrades:",{maxHealth:this.maxHealth,health:this.health,damage:this.damage,moveSpeed:this.moveSpeed,armor:this.armor,isAlive:!this.isDead})),this.updateHPBar(),this.createAnimations(),this.createShadow(),this.setupMouseTracking(),this.scene.input.on("pointerdown",this.handlePointerDown,this),this.scene.input.on("pointerup",this.handlePointerUp,this),e.events.on("update",this.update,this),e.add.existing(this),this.baseMoveSpeed=this.moveSpeed,this.basePickupRange=this.pickupRange,e.player=this,e.onPlayerCreated&&"function"==typeof e.onPlayerCreated?e.onPlayerCreated(this):console.log("PlayerPrefab: Scene does not have onPlayerCreated method, but scene.player is set")}updateHPBar(){const e={currentHP:this.health,maxHP:this.maxHealth,health:this.health,maxHealth:this.maxHealth,hp:this.health,maxHp:this.maxHealth};PC.emit("player-health-updated",e),PC.emit("player-hp-changed",e),this.gameManager&&this.gameManager.playerStats&&(this.gameManager.playerStats.health=this.health,this.gameManager.playerStats.maxHealth=this.maxHealth),window.dispatchEvent(new CustomEvent("playerHealthUpdated",{detail:e}))}createAnimations(){this.scene.anims.exists("PlayerRunningAni")||this.scene.anims.create({key:"PlayerRunningAni",frames:this.scene.anims.generateFrameNumbers("Player_Character_Running_Animation_v01",{start:0,end:-1}),frameRate:10,repeat:-1}),this.scene.anims.exists("PlayerIdleAni")||this.scene.anims.create({key:"PlayerIdleAni",frames:[{key:"Player_Character_Idle_Animation_v01",frame:0}],frameRate:1,repeat:0}),this.scene.anims.exists("PlayerDeathAni")||this.scene.anims.create({key:"PlayerDeathAni",frames:this.scene.anims.generateFrameNumbers("Player_Character_Death_Animation_v01",{start:0,end:-1}),frameRate:6,repeat:0})}setupMouseTracking(){this.scene.input.on("pointermove",(e=>{if(!this.isDead&&this.isMovingToTarget){const t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x-this.x,n=t.y-this.y;Math.abs(s)>Math.abs(n)?this.lastDirection=s>0?"right":"left":this.lastDirection=n>0?"down":"up"}}))}handlePointerDown(e){if(e.leftButtonDown()&&!this.isDead){const t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x,n=t.y;if(Phaser.Math.Distance.Between(this.x,this.y,s,n)>10){this.isMovingToTarget=!0;const e=s-this.x,t=n-this.y;Math.abs(e)>Math.abs(t)?this.lastDirection=e>0?"right":"left":this.lastDirection=t>0?"down":"up",this.updatePlayerAnimation()}}}handlePointerUp(e){e.leftButtonDown()||(this.isMovingToTarget=!1)}update(e,t){if(this.isDead)return;if(!this.scene||!this.scene.input||!this.scene.input.keyboard)return;const s=this.scene.input.keyboard,n=s.addKey("W").isDown,i=s.addKey("S").isDown,a=s.addKey("A").isDown,r=s.addKey("D").isDown;this.body.velocity.x=0,this.body.velocity.y=0;let o=n||i||a||r,l=0,c=0,h=this.isMoving;if(this.isMoving=!1,o){if(this.isMovingToTarget=!1,a&&(l-=1),r&&(l+=1),n&&(c-=1),i&&(c+=1),0!==l||0!==c){this.isMoving=!0;const e=new Phaser.Math.Vector2(l,c).normalize();this.body.velocity.x=e.x*this.moveSpeed,this.body.velocity.y=e.y*this.moveSpeed,Math.abs(e.x)>Math.abs(e.y)?this.lastDirection=e.x>0?"right":"left":this.lastDirection=e.y>0?"down":"up"}}else if(this.isMovingToTarget&&this.scene.input&&this.scene.input.activePointer){const e=this.scene.input.activePointer,t=this.scene.cameras.main.getWorldPoint(e.x,e.y),s=t.x,n=t.y;if(Phaser.Math.Distance.Between(this.x,this.y,s,n)>5){this.isMoving=!0;const e=Phaser.Math.Angle.Between(this.x,this.y,s,n);this.body.velocity.x=Math.cos(e)*this.moveSpeed,this.body.velocity.y=Math.sin(e)*this.moveSpeed;const t=s-this.x,i=n-this.y;Math.abs(t)>Math.abs(i)?this.lastDirection=t>0?"right":"left":this.lastDirection=i>0?"down":"up"}}this.updatePlayerAnimation(e,t),h!==this.isMoving&&this.updatePlayerFrame(),this.updateShadowPosition()}updatePlayerAnimation(e,t){this.isDead||(this.isMoving?(this.setFlipX("left"===this.lastDirection),this.scene.anims.exists("PlayerRunningAni")&&(this.anims.isPlaying&&"PlayerRunningAni"===this.anims.currentAnim.key||this.anims.play("PlayerRunningAni"))):(this.scene.anims.exists("PlayerIdleAni")?this.anims.isPlaying&&"PlayerIdleAni"===this.anims.currentAnim.key||this.anims.play("PlayerIdleAni"):(this.anims.isPlaying&&this.anims.stop(),this.setFrame(0)),this.setFlipX("left"===this.lastDirection)))}updatePlayerFrame(){if(!this.isDead&&!this.anims.isPlaying){let e=this.isMoving?this.currentAnimFrame:0;switch(this.lastDirection){case"right":this.setFrame(2+e);break;case"left":this.setFrame(1+e);break;case"up":this.setFrame(3+e);break;case"down":this.setFrame(0+e)}}}takeDamage(e,t="Unknown"){if(this.isInvulnerable||this.isDead)return;const s=Math.max(1,e-(this.armor||0));this.health-=s,this.gameManager&&this.gameManager.isGameRunning&&(this.gameManager.currentRunStats.damageTaken+=s),console.log(`Player took ${s} damage from ${t}. Health: ${this.health}/${this.maxHealth}`),this.updateHPBar(),this.showDamageEffect(s),this.setTint(16711680);const n=("up"===this.lastDirection||"down"===this.lastDirection||this.lastDirection,0);if(this.scene.tweens.add({targets:this,x:this.x+("left"===this.lastDirection||"right"===this.lastDirection?0*n:0),y:this.y+("up"===this.lastDirection||"down"===this.lastDirection?0*n:0),duration:100,yoyo:!0,ease:"Power2"}),this.scene.sound&&this.scene.sound.add)try{this.scene.cache.audio.exists("player_hit")&&this.scene.sound.add("player_hit").play({volume:.5})}catch(i){console.warn("Could not play hit sound:",i)}this.makeInvulnerable(),this.health<=0&&this.die(t)}makeInvulnerable(){this.isInvulnerable||(this.isInvulnerable=!0,this.scene.tweens.add({targets:this,alpha:.3,duration:100,yoyo:!0,repeat:9,ease:"Power2",onComplete:()=>{this.alpha=1,this.clearTint()}}),this.scene.time.delayedCall(this.invulnerabilityTime,(()=>{this.isInvulnerable=!1})))}showDamageEffect(e){try{const t=this.scene.add.text(this.x,this.y-30,`-${e}`,{fontFamily:"Arial",fontSize:"18px",color:"#ff4444",stroke:"#000000",strokeThickness:2,fontStyle:"bold"});t.setOrigin(.5),t.setDepth(1e3),this.scene.tweens.add({targets:t,y:t.y-50,x:t.x+Phaser.Math.Between(-10,10),alpha:0,scale:{from:1,to:1.5},duration:1500,ease:"Power2",onComplete:()=>{t.destroy()}}),e>20&&this.scene.cameras.main.shake(200,.01)}catch(t){console.error("Error showing damage effect:",t)}}die(e="Skill Issue"){this.isDead||(this.isDead=!0,this.health=0,this.shadow&&this.scene.tweens.add({targets:this.shadow,alpha:0,duration:500,onComplete:()=>{this.shadow&&(this.shadow.destroy(),this.shadow=null)}}),this.updateHPBar(),this.body.velocity.x=0,this.body.velocity.y=0,this.body.enable=!1,this.scene.input.keyboard.enabled=!1,this.scene.input.off("pointerdown",this.handlePointerDown,this),this.scene.input.off("pointerup",this.handlePointerUp,this),this.scene.enemySpawnTimer&&(this.scene.enemySpawnTimer.paused=!0),this.scene.orbSpawnTimer&&(this.scene.orbSpawnTimer.paused=!0),this.scene.difficultyTimer&&(this.scene.difficultyTimer.paused=!0),this.scene.enemies&&this.scene.enemies.getChildren().forEach((e=>{e.body&&(e.body.enable=!1),e.updateListener&&this.scene.events.off("update",e.updateListener)})),this.scene.anims.exists("PlayerDeathAni")?(this.anims.play("PlayerDeathAni"),this.on("animationcomplete",(t=>{"PlayerDeathAni"===t.key&&this.scene.time.delayedCall(500,(()=>{this.gameManager&&this.gameManager.handlePlayerDeath(e),this.applyDeathEffects()}))}))):this.scene.time.delayedCall(1e3,(()=>{this.gameManager&&this.gameManager.handlePlayerDeath(e),this.applyDeathEffects()})))}applyDeathEffects(){this.shadow&&(this.shadow.destroy(),this.shadow=null),this.scene.tweens.add({targets:this,angle:90,alpha:.3,scaleX:0,scaleY:0,duration:500,ease:"Power2"}),this.scene.time.delayedCall(500,(()=>{window.returnToMenu&&window.returnToMenu()}))}heal(e){if(this.isDead)return;const t=this.health;this.health=Math.min(this.health+e,this.maxHealth);const s=this.health-t;s>0&&(console.log(`Player healed for ${s}. Health: ${this.health}/${this.maxHealth}`),this.updateHPBar(),this.showHealEffect(s),this.setTint(65280),this.scene.tweens.add({targets:this,scaleX:1.1,scaleY:1.1,duration:150,yoyo:!0,ease:"Power2"}),this.scene.time.delayedCall(200,(()=>{this.clearTint()})))}showHealEffect(e){try{const t=this.scene.add.text(this.x,this.y-30,`+${e}`,{fontFamily:"Arial",fontSize:"16px",color:"#44ff44",stroke:"#000000",strokeThickness:2,fontStyle:"bold"});t.setOrigin(.5),t.setDepth(1e3),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,scale:{from:1,to:1.2},duration:1200,ease:"Power2",onComplete:()=>{t.destroy()}})}catch(t){console.error("Error showing heal effect:",t)}}createShadow(){this.shadow=this.scene.add.graphics(),this.shadow.setDepth(0),this.shadow.fillStyle(0,.2),this.shadow.fillEllipse(0,0,20,8),this.updateShadowPosition()}updateShadowPosition(){if(this.shadow&&!this.isDead){this.shadow.setPosition(this.x,this.y+12);const e=1,t=this.isMoving?.9:1;this.shadow.setScale(e*t)}}}class Jz extends Phaser.GameObjects.Container{constructor(e,t,s){super(e,t??1009,s??1208),En(this,"rock_pillars_coming_from_darkness_bg_00"),En(this,"statues_far_from_platforms_bg_40"),En(this,"crystals1_improved_refraction_80"),En(this,"crystals1_improved_refraction_110"),En(this,"crystals1_improved_refraction_60"),En(this,"crystals1_improved_refraction"),En(this,"crystals1_improved_refraction_1"),En(this,"crystals1_improved_refraction_2"),En(this,"crystals1_improved_refraction_3"),En(this,"crystals1_improved_refraction_4"),En(this,"crystals1_improved_refraction_5"),En(this,"crystals1_improved_refraction_6"),En(this,"crystals1_improved_refraction_7"),En(this,"crystals1_improved_refraction_8"),En(this,"crystals1_improved_refraction_9"),En(this,"crystals1_improved_refraction_10"),En(this,"crystals1_improved_refraction_11"),En(this,"crystals1_improved_refraction_12"),En(this,"crystals1_improved_refraction_13"),En(this,"crystals1_improved_refraction_14"),En(this,"crystals1_improved_refraction_15"),En(this,"crystals1_improved_refraction_16"),En(this,"crystals1_improved_refraction_17"),En(this,"crystals1_improved_refraction_18"),En(this,"crystals1_improved_refraction_19"),En(this,"crystals1_improved_refraction_20"),En(this,"crystals1_improved_refraction_21"),En(this,"crystals1_improved_refraction_22"),this.blendMode=Phaser.BlendModes.SKIP_CHECK;const n=e.add.image(14,124,"rock pillars coming from darkness-bg_0",0);this.add(n);const i=e.add.image(16,-18,"statues-far from platforms-bg_4",0);this.add(i);const a=e.add.image(-12,71,"Crystals1-improved refraction_8",0);this.add(a);const r=e.add.image(5,86,"Crystals1-improved refraction_11",0);this.add(r);const o=e.add.image(27,87,"Crystals1-improved refraction_6",0);this.add(o);const l=e.add.image(42,71,"Crystals1-improved refraction_8",0);this.add(l);const c=e.add.image(-22,97,"Crystals1-improved refraction_6",0);this.add(c);const h=e.add.image(4,111,"Crystals1-improved refraction_6",0);this.add(h);const u=e.add.image(29,117,"Crystals1-improved refraction_6",0);this.add(u);const d=e.add.image(-24,119,"Crystals1-improved refraction_6",0);this.add(d);const p=e.add.image(-31,148,"Crystals1-improved refraction_6",0);this.add(p);const f=e.add.image(2,139,"Crystals1-improved refraction_6",0);this.add(f);const m=e.add.image(24,139,"Crystals1-improved refraction_11",0);this.add(m);const g=e.add.image(48,96,"Crystals1-improved refraction_11",0);this.add(g);const y=e.add.image(57,119,"Crystals1-improved refraction_11",0);this.add(y);const b=e.add.image(41,143,"Crystals1-improved refraction_11",0);this.add(b);const v=e.add.image(64,151,"Crystals1-improved refraction_11",0);this.add(v);const w=e.add.image(-15,154,"Crystals1-improved refraction_11",0);this.add(w);const x=e.add.image(-31,176,"Crystals1-improved refraction_11",0);this.add(x);const k=e.add.image(-9,192,"Crystals1-improved refraction_11",0);this.add(k);const A=e.add.image(18,200,"Crystals1-improved refraction_11",0);this.add(A);const E=e.add.image(39,196,"Crystals1-improved refraction_11",0);this.add(E);const S=e.add.image(66,175,"Crystals1-improved refraction_11",0);this.add(S);const P=e.add.image(2,169,"Crystals1-improved refraction_6",0);this.add(P);const T=e.add.image(35,167,"Crystals1-improved refraction_8",0);this.add(T);const B=e.add.image(14,60,"Crystals1-improved refraction_11",0);this.add(B);const C=e.add.image(-13,50,"Crystals1-improved refraction_11",0);this.add(C);const M=e.add.image(33,54,"Crystals1-improved refraction_6",0);this.add(M),this.rock_pillars_coming_from_darkness_bg_00=n,this.statues_far_from_platforms_bg_40=i,this.crystals1_improved_refraction_80=a,this.crystals1_improved_refraction_110=r,this.crystals1_improved_refraction_60=o,this.crystals1_improved_refraction=l,this.crystals1_improved_refraction_1=c,this.crystals1_improved_refraction_2=h,this.crystals1_improved_refraction_3=u,this.crystals1_improved_refraction_4=d,this.crystals1_improved_refraction_5=p,this.crystals1_improved_refraction_6=f,this.crystals1_improved_refraction_7=m,this.crystals1_improved_refraction_8=g,this.crystals1_improved_refraction_9=y,this.crystals1_improved_refraction_10=b,this.crystals1_improved_refraction_11=v,this.crystals1_improved_refraction_12=w,this.crystals1_improved_refraction_13=x,this.crystals1_improved_refraction_14=k,this.crystals1_improved_refraction_15=A,this.crystals1_improved_refraction_16=E,this.crystals1_improved_refraction_17=S,this.crystals1_improved_refraction_18=P,this.crystals1_improved_refraction_19=T,this.crystals1_improved_refraction_20=B,this.crystals1_improved_refraction_21=C,this.crystals1_improved_refraction_22=M,e.physics.add.existing(this,!1),this.body=this.body||{},this.body.allowGravity=!1,this.body.setSize(120,75),this.body.setOffset(-45,135),this.body.moves=!1,this.body.immovable=!0,this.isStatueInvisible=!1,this.isPlayerInvisible=!1,this.statueTop=this.y-95,this.statueBottom=this.y+200,this.updateListener=()=>this.checkPlayerPosition(),e.events.on("update",this.updateListener)}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}checkPlayerPosition(){if(!this.player||!this.scene)return;const e=Math.abs(this.player.x+10-this.x-25)<55;this.player.y>this.statueTop&&this.player.y<this.statueBottom&&e?(this.isStatueInvisible||this.scene.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isStatueInvisible=!0}}),this.isPlayerInvisible||this.scene.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isStatueInvisible&&this.scene.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isStatueInvisible=!1}}),this.isPlayerInvisible&&this.scene.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}destroy(){this.scene&&this.scene.events.off("update",this.updateListener),super.destroy()}}class eV extends Phaser.GameObjects.Image{constructor(e,t,s,n,i){const a=n||"Health_Potion_01",r=e.textures.exists(a);super(e,t??16,s??16,r?a:"__WHITE",i),r||this.setTint(65280),e.physics.add.existing(this,!1),this.body.setCircle(6),this.body.setCollideWorldBounds(!1),this.body.setBounce(0,0),this.body.setDrag(10,10),this.healValue=15,this.magneticRange=100,this.magneticForce=150,this.maxForce=300,this.initialY=s,this.floatOffset=5,this.floatSpeed=1.5,this.floatTime=Math.random()*Math.PI*2,this.isBeingCollected=!1,this.isAttracted=!1,this.updateListener=this.update.bind(this),e.events.on("update",this.updateListener),this.setScale(.25)}setHealValue(e){this.healValue=e;const t=.2+Math.min(e,50)/50*.15;return this.setScale(t),this.scene.textures.exists("Health_Potion_01")||(e>=50?this.setTint(65416):e>=25?this.setTint(56678):e>=10?this.setTint(47940):this.setTint(43571)),this}update(e,t){if(!this.isBeingCollected&&this.active)try{const e=this.scene.player;if(!e)return;this.isAttracted||(this.floatTime+=t/1e3,this.y=this.initialY+Math.sin(this.floatTime*this.floatSpeed)*this.floatOffset);const s=Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y);if(s<=this.magneticRange){this.isAttracted=!0;const t=e.x-this.x,n=e.y-this.y,i=Math.sqrt(t*t+n*n),a=t/i,r=n/i,o=1-s/this.magneticRange,l=this.magneticForce+(this.maxForce-this.magneticForce)*o;this.body.velocity.x=a*l,this.body.velocity.y=r*l,this.initialY=this.y,s<15&&this.collect()}else this.isAttracted=!1,0===this.body.velocity.x&&0===this.body.velocity.y||(this.body.velocity.x*=.95,this.body.velocity.y*=.95,Math.abs(this.body.velocity.x)<1&&(this.body.velocity.x=0),Math.abs(this.body.velocity.y)<1&&(this.body.velocity.y=0))}catch(s){console.error("Error in HealthOrb update:",s),this.destroy()}}collect(){if(this.isBeingCollected)return this.healValue;this.isBeingCollected=!0;try{const e=this.scene.player;if(e&&e.heal)e.heal(this.healValue);else if(e&&void 0!==e.health){const t=e.maxHealth||100,s=e.health;e.health=Math.min(e.health+this.healValue,t);const n=e.health-s;this.scene.gameManager&&this.scene.gameManager.updateHealthDisplay&&this.scene.gameManager.updateHealthDisplay(),this.createFloatingText(`+${n} HP`)}else this.scene.gameManager&&this.scene.gameManager.healPlayer?(this.scene.gameManager.healPlayer(this.healValue),this.createFloatingText(`+${this.healValue} HP`)):(console.warn("No healing system found to heal player"),this.createFloatingText(`+${this.healValue} HP`));this.scene.sound&&this.scene.sound.get("heal")&&this.scene.sound.play("heal",{volume:.4}),this.scene.tweens.add({targets:this,scale:{from:this.scale,to:0},alpha:{from:1,to:0},duration:200,onComplete:()=>{this.cleanupAndDestroy()}})}catch(e){console.error("Error collecting health orb:",e),this.cleanupAndDestroy()}return this.healValue}createFloatingText(e){try{const t=this.scene.add.text(this.x,this.y-20,e,{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#00ff00",stroke:"#000000",strokeThickness:1});t.setOrigin(.5),this.scene.tweens.add({targets:t,y:t.y-40,alpha:0,duration:1e3,onComplete:()=>{t.destroy()}})}catch(t){console.error("Error creating floating text:",t)}}cleanupAndDestroy(){try{this.scene&&this.updateListener&&this.scene.events.off("update",this.updateListener)}catch(e){console.error("Error removing update listener:",e)}this.destroy()}destroy(e){try{this.scene&&this.updateListener&&(this.scene.events.off("update",this.updateListener),this.updateListener=null)}catch(t){console.error("Error in destroy method:",t)}super.destroy(e)}}const tV=class e extends Phaser.GameObjects.Image{constructor(e,t,s,n,i){super(e,t??16,s??16,n||"Vase",i??0);try{if(!e||!e.physics)return void console.error("BreakableVase: Scene or physics not ready");this.maxHealth=1,this.health=this.maxHealth,this.isBroken=!1,this.canBeAttacked=!0,this.originalTint=16777215,this.dropChance={gold:.4,experience:.7,healing:.2},this.dropAmounts={gold:{min:1,max:3},experience:{min:2,max:5},healing:{min:10,max:25}},this.setTint(this.originalTint),this.setInteractive(),this.randomizeTexture(),this.createPhysicsBodyImmediate(e)}catch(a){console.error("Error in BreakableVase constructor:",a)}}createPhysicsBodyImmediate(e){try{e.breakableVases||(e.breakableVases=e.physics.add.staticGroup(),console.log("BreakableVase: Created breakableVases group")),e.physics.add.existing(this,!0),this.body?(this.body.setSize(28,28),this.body.setOffset(2,2),e.breakableVases.add(this)):e.time.delayedCall(50,(()=>{this.createPhysicsBody(e)}))}catch(t){this.canBeAttacked=!0,this.isInCollisionSystem=!0}}createPhysicsBody(e){try{if(!e||!e.physics||this.body)return;if(e.physics.add.existing(this,!0),!this.body)return;this.body.setSize(28,28),this.body.setOffset(2,2),e.time.delayedCall(16,(()=>{this.addToVaseGroup(e)}))}catch(t){console.error("Error creating physics body for BreakableVase:",t)}}addToVaseGroup(e){try{if(!e.physics.world||e.physics.world.isPaused)return void e.time.delayedCall(50,(()=>this.addToVaseGroup(e)));if(!this.body||!this.body.enable)return;this.addToPhysicsGroup(e)||(this.canBeAttacked=!0,this.isInCollisionSystem=!0)}catch(t){console.error("Error adding BreakableVase to group:",t),this.canBeAttacked=!0,this.isInCollisionSystem=!0}}addToPhysicsGroup(e){try{if(e.breakableVases||(e.breakableVases=e.physics.add.staticGroup(),console.log("BreakableVase: Created breakableVases group in addToPhysicsGroup")),!e.breakableVases.children)return console.warn("BreakableVase: Group children not available"),!1;if(e.breakableVases&&e.breakableVases.add&&"function"==typeof e.breakableVases.add){let s=!1;try{s=e.breakableVases.contains&&e.breakableVases.contains(this)}catch(t){console.warn("Contains check failed, proceeding with add:",t),s=!1}return s?(console.log("BreakableVase: Already in group"),!0):(e.breakableVases.add(this),console.log("BreakableVase: Successfully added to group"),!0)}return console.warn("BreakableVase: Group add method not available"),!1}catch(s){return console.error("Error in addToPhysicsGroup:",s),!1}}randomizeTexture(){try{const t=e.VASE_FRAMES.filter((t=>!e.EXCLUDED_FRAMES.includes(t))),s=t[Math.floor(Math.random()*t.length)];this.scene.textures.exists(this.texture.key)&&this.scene.textures.get(this.texture.key).has(s)&&this.setFrame(s)}catch(t){this.setFrame(0)}}takeDamage(e=1){return!(this.isBroken||!this.canBeAttacked)&&(this.health-=e,this.setTint(16737894),this.scene.time.delayedCall(100,(()=>{this.active&&this.setTint(this.originalTint)})),this.health<=0&&(this.breakVase(),!0))}breakVase(){if(!this.isBroken){if(this.isBroken=!0,this.canBeAttacked=!1,this.createBreakEffect(),this.dropLoot(),this.scene.breakableVases&&this.scene.breakableVases.remove)try{this.scene.breakableVases.remove(this)}catch(e){console.warn("Error removing vase from group:",e)}if(this.body&&this.scene.physics&&this.scene.physics.world)try{this.scene.physics.world.disable(this)}catch(e){console.warn("Error disabling physics body:",e)}this.destroy()}}createBreakEffect(){try{const e=this.scene.add.particles(this.x,this.y,"__WHITE",{speed:{min:50,max:100},scale:{start:.3,end:0},lifespan:300,quantity:8,tint:[9127187,10506797,13468991]});this.scene.time.delayedCall(500,(()=>{e.active&&e.destroy()})),this.scene.sound&&this.scene.sound.get("vase_break")&&this.scene.sound.play("vase_break",{volume:.3})}catch(e){console.error("Error creating break effect:",e)}}dropLoot(){try{let n=0;if(Math.random()<this.dropChance.gold){const t=Phaser.Math.Between(this.dropAmounts.gold.min,this.dropAmounts.gold.max);for(let s=0;s<t;s++){const t=Phaser.Math.Between(-16,16),s=Phaser.Math.Between(-16,16);try{const e=new Hz(this.scene,this.x+t,this.y+s);e.setGoldValue(1),this.scene.add.existing(e),n++}catch(e){console.error("Error creating gold orb:",e)}}}if(Math.random()<this.dropChance.experience){const e=Phaser.Math.Between(this.dropAmounts.experience.min,this.dropAmounts.experience.max),s=Phaser.Math.Between(-16,16),i=Phaser.Math.Between(-16,16);try{const t=new Gz(this.scene,this.x+s,this.y+i);t.setExpValue(e),this.scene.add.existing(t),n++}catch(t){console.error("Error creating experience orb:",t)}}if(Math.random()<this.dropChance.healing){const e=Phaser.Math.Between(this.dropAmounts.healing.min,this.dropAmounts.healing.max),t=Phaser.Math.Between(-16,16),i=Phaser.Math.Between(-16,16);try{const s=new eV(this.scene,this.x+t,this.y+i);s.setHealValue(e),this.scene.add.existing(s),n++}catch(s){console.error("Error creating health orb:",s)}}}catch(n){console.error("Error dropping loot:",n)}}createFloatingText(e,t=this.x,s=this.y-20,n="#ffffff"){try{const i=this.scene.add.text(t,s,e,{fontFamily:"Arial, sans-serif",fontSize:"12px",color:n,stroke:"#000000",strokeThickness:1});i.setOrigin(.5),this.scene.tweens.add({targets:i,y:i.y-30,alpha:0,duration:1e3,onComplete:()=>{i.destroy()}})}catch(i){console.error("Error creating floating text:",i)}}onPlayerAttack(e=1){return this.takeDamage(e)}static spawnVasesOnTilemap(t,s,n=.3){t.breakableVases||(t.breakableVases=t.physics.add.staticGroup());const i=s.tilemap,a=s.layer;for(let r=0;r<a.height;r++)for(let s=0;s<a.width;s++){const o=i.getTileAt(s,r,!1,a.name);if(o&&o.index>0&&Math.random()<n){const n=o.pixelX+o.width/2,l=o.pixelY+o.height/2,c=new e(t,n,l,"Vase");t.add.existing(c),i.removeTileAt(s,r,!1,a.name)}}}};En(tV,"VASE_FRAMES",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]),En(tV,"EXCLUDED_FRAMES",[21,22,23,24]);let sV=tV;class nV{constructor(e){if(this.scene=e,this.spawnedVases=[],this.maxVases=25,this.spawnChance=.1,this.respawnEnabled=!1,this.respawnDelay=3e4,this.respawnChance=.1,e&&e.physics){if(!e.breakableVases)try{e.breakableVases=e.physics.add.staticGroup(),console.log("VaseSpawner: Created breakableVases group")}catch(t){return void console.error("VaseSpawner: Error creating breakableVases group:",t)}this.respawnEnabled&&this.setupRespawnTimer()}else console.error("VaseSpawner: Scene or physics not ready")}spawnVasesOnTilemap(e,t={}){const s={spawnChance:t.spawnChance||this.spawnChance,maxVases:t.maxVases||this.maxVases,textureKey:t.textureKey||"Vase",excludeTileIndices:t.excludeTileIndices||[0],targetTileIndex:t.targetTileIndex||null,...t};if(!e||!e.tilemap||!e.layer)return console.error("VaseSpawner: Invalid tilemap layer provided"),0;const n=e.tilemap,i=e.layer;let a=0,r=0;const o=Math.min(i.height,100),l=Math.min(i.width,100);for(let h=0;h<o;h++){for(let t=0;t<l&&!(a>=s.maxVases);t++){const o=n.getTileAt(t,h,!1,i.name);if(o&&void 0!==o.index&&null!==o.index&&0!==o.index){r++;const l=o.width||32,u=o.height||32,d=void 0!==o.pixelX?o.pixelX:t*l,p=void 0!==o.pixelY?o.pixelY:h*u;r<=5&&console.log(`Tile at ${t},${h}: index ${o.index}, pixelX: ${d}, pixelY: ${p}`);let f=!1;if(f=null!==s.targetTileIndex?o.index===s.targetTileIndex:!s.excludeTileIndices.includes(o.index),f&&Math.random()<s.spawnChance){const r=d+l/2+(e.x||0),o=p+u/2+(e.y||0),f=this.createVase(r,o,s.textureKey);if(f&&(f.spawnPosition={x:r,y:o},this.spawnedVases.push(f.spawnPosition),a++,!1!==s.removeTiles))try{n.removeTileAt(t,h,!1,i.name)}catch(c){console.warn("Failed to remove tile:",c)}}}}if(a>=s.maxVases)break}return console.log(`VaseSpawner: Spawned ${a} vases from ${r} tiles checked`),a}createVase(e,t,s="Vase"){try{if(!this.scene||!this.scene.physics||!this.scene.add)return console.error("VaseSpawner: Scene not ready for vase creation"),null;if(!this.scene.textures.exists(s)&&(console.warn(`VaseSpawner: Texture '${s}' does not exist, using default`),s="Vase",!this.scene.textures.exists(s)))return console.error("VaseSpawner: No valid texture available"),null;const n=new sV(this.scene,e,t,s);return n?(this.scene.add.existing(n),n.setVisible(!0),n.setActive(!0),n):(console.error("VaseSpawner: Failed to create vase"),null)}catch(n){return console.error("Error creating vase:",n),null}}setupVaseCollision(e){if(e&&e.active){if(!this.scene.breakableVases){console.warn("VaseSpawner: breakableVases group not found, creating it");try{this.scene.breakableVases=this.scene.physics.add.staticGroup()}catch(t){return void console.error("VaseSpawner: Failed to create breakableVases group:",t)}}try{this.scene.breakableVases&&this.scene.breakableVases.add?(this.scene.breakableVases.add(e),console.log("VaseSpawner: Vase added to collision group")):console.warn("VaseSpawner: breakableVases group has no add method")}catch(t){console.error("VaseSpawner: Error adding vase to collision group:",t)}}else console.warn("VaseSpawner: Invalid vase provided to setupVaseCollision")}setupRespawnTimer(){this.respawnEnabled&&(this.respawnTimer=this.scene.time.addEvent({delay:this.respawnDelay,callback:this.attemptRespawn,callbackScope:this,loop:!0}))}attemptRespawn(){if(!this.respawnEnabled||0===this.spawnedVases.length)return;let e=0;try{e=this.getGroupSize(this.scene.breakableVases)}catch(n){console.warn("VaseSpawner: Error getting current vase count for respawn:",n),e=0}const t=Math.floor(this.maxVases/4);let s=0;for(const i of this.spawnedVases){if(s>=t)break;if(e+s>=this.maxVases)break;let a=null;try{a=this.findVaseAtPosition(i.x,i.y)}catch(n){console.warn("VaseSpawner: Error checking for existing vase:",n)}!a&&Math.random()<this.respawnChance&&this.createVase(i.x,i.y)&&(s++,this.createSpawnEffect(i.x,i.y))}s>0&&console.log(`VaseSpawner: Respawned ${s} vases`)}getGroupSize(e){if(!e)return 0;try{if(e.children){if(void 0!==e.children.size)return e.children.size;if(e.children.entries&&Array.isArray(e.children.entries))return e.children.entries.length;if(e.children.list&&Array.isArray(e.children.list))return e.children.list.length}return void 0!==e.size?e.size:void 0!==e.length?e.length:0}catch(t){return console.warn("VaseSpawner: Error getting group size:",t),0}}findVaseAtPosition(e,t){if(!this.scene.breakableVases)return null;try{const s=this.scene.breakableVases;let n=[];s.children?s.children.entries&&Array.isArray(s.children.entries)?n=s.children.entries:s.children.list&&Array.isArray(s.children.list)&&(n=s.children.list):Array.isArray(s)&&(n=s);for(const i of n)if(i&&i.active&&Phaser.Math.Distance.Between(i.x,i.y,e,t)<32)return i;return null}catch(s){return console.warn("VaseSpawner: Error finding vase at position:",s),null}}createSpawnEffect(e,t){try{const s=this.scene.add.circle(e,t,20,65280,.3);this.scene.tweens.add({targets:s,scale:{from:0,to:1.5},alpha:{from:.5,to:0},duration:500,onComplete:()=>s.destroy()})}catch(s){console.error("Error creating spawn effect:",s)}}destroy(){try{if(this.respawnTimer&&(this.respawnTimer.destroy(),this.respawnTimer=null),this.scene.breakableVases)try{this.scene.breakableVases.clear(!0,!0)}catch(e){console.warn("VaseSpawner: Error clearing breakableVases group:",e)}this.spawnedVases=[],console.log("VaseSpawner: Cleanup completed")}catch(e){console.error("VaseSpawner: Error during destroy:",e)}}getStatistics(){const e=this.getGroupSize(this.scene.breakableVases);return{maxVases:this.maxVases,activeVases:e,totalSpawnPositions:this.spawnedVases.length,respawnEnabled:this.respawnEnabled,spawnChance:this.spawnChance}}}class iV extends Xz{constructor(){super("MainMapScene"),En(this,"map_Col_1"),En(this,"walkingArea_1"),En(this,"backGround_1"),En(this,"backGround"),En(this,"wall_RD_1"),En(this,"wall_Upper_1"),En(this,"wall_RU_1"),En(this,"wall_down_1"),En(this,"survive_Zone_1"),En(this,"gold_AC_1"),En(this,"map"),En(this,"bed_1"),En(this,"vase_AC_1"),En(this,"playerPrefab"),En(this,"stoneStatuePrefab"),En(this,"stoneStatuePrefab_1"),En(this,"stoneStatuePrefab_2"),En(this,"stoneStatuePrefab_3"),En(this,"torchAnim"),En(this,"vase_1"),En(this,"mainMap"),this.initializeSceneState()}initializeSceneState(){this.portals=[],this.activePortal=null,this.portalTimer=null,this.portalActivationInterval=HC.PORTAL.ACTIVATION_INTERVAL,this.availableScenes=HC.PORTAL.AVAILABLE_SCENES,this.isTeleporting=!1,this.vaseSpawner=null,this.playerLevelSystem=null,this.mobManager=null,this.gameTimer=null,this.gameStartTime=0,this.gameTime=0,this.isGameRunning=!1,this.enemySpawnTimer=null,this.waveTimer=null,this.difficultyTimer=null}create(){this.setupWorld(),super.create(),this.editorCreate(),this.initializeAllSystems()}setupWorld(){const{WIDTH:e,HEIGHT:t}=HC.WORLD;this.cameras.main.setBounds(0,0,e,t),this.physics.world.setBounds(e,t)}initializeAllSystems(){try{this.setupCollisions(),this.player=this.playerPrefab,this.onPlayerCreated(this.player),this.initializeManagers(),["setupZombieCollisionSystem","setupHPBarIntegration","setupVaseSpawning","initializeMobManager","setupLavaAnimations","ensureEnemyGroups"].forEach((e=>{"function"==typeof this[e]&&this[e]()})),this.time.delayedCall(200,(()=>{this.setupMobCollisions()})),this.startEnemySpawning()}catch(e){console.error("Error initializing systems:",e)}}initializeMobManager(){if(this.gameManager&&this.player)try{this.mobManager=new Uz(this),this.mobManager.initialize(this.gameManager,this.player),this.walkingArea_1&&this.mobManager.setWalkingAreaFromTilemap(this.walkingArea_1),this.gameplayManager={mobManager:this.mobManager},this.mobManager.startWave(HC.WAVE.INITIAL_WAVE),this.time.delayedCall(100,(()=>{this.setupMobCollisions()}))}catch(e){console.error("MobManager initialization failed:",e)}}startEnemySpawning(){this.startGameTimer(),this.startMobSpawning(),this.startWaveTimer(),PC.emit("timer-start",{gameTime:this.gameTime,currentWave:this.currentWave||HC.WAVE.INITIAL_WAVE,isGameRunning:!0})}startGameTimer(){this.gameStartTime=Date.now(),this.gameTime=0,this.isGameRunning=!0,this.gameTimer=this.time.addEvent({delay:1e3,callback:this.updateGameTime,callbackScope:this,loop:!0})}startMobSpawning(){this.mobManager?this.mobManager.startWave(HC.WAVE.INITIAL_WAVE):(console.warn("MobManager not available, starting basic spawning"),this.startBasicEnemySpawning())}startWaveTimer(){this.waveTimer=this.time.addEvent({delay:HC.WAVE.ADVANCE_TIMER,callback:this.advanceWave,callbackScope:this,loop:!0})}updateGameTime(){this.isGameRunning&&(this.gameTime=Math.floor((Date.now()-this.gameStartTime)/1e3),this.updateTimerDisplay())}updateTimerDisplay(){try{const e=Math.floor(this.gameTime/60),t=this.gameTime%60,s=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;PC.emit("timer-updated",{gameTime:this.gameTime,formattedTime:s,currentWave:this.currentWave||HC.WAVE.INITIAL_WAVE,isGameRunning:this.isGameRunning})}catch(e){console.error("Error updating timer display:",e)}}startBasicEnemySpawning(){try{this.enemySpawnTimer=this.time.addEvent({delay:1e3,callback:()=>{console.log("Basic enemy spawn triggered")},loop:!0})}catch(e){console.error("Error in basic enemy spawning:",e)}}ensureEnemyGroups(){var e,t,s;try{!this.enemies&&(null==(e=this.gameplayManager)?void 0:e.enemies)?this.enemies=this.gameplayManager.enemies:this.enemies||(this.enemies=this.physics.add.group()),(null==(s=null==(t=this.gameplayManager)?void 0:t.mobManager)?void 0:s.mobGroup)&&(this.enemies=this.gameplayManager.mobManager.mobGroup),this.zombieGroup||(this.zombieGroup=this.physics.add.group()),this.breakableVases||(this.breakableVases=this.physics.add.staticGroup()),this.connectAttackSystem()}catch(n){console.error("Error ensuring enemy groups:",n)}}connectAttackSystem(){try{this.playerAttackSystem?this.playerAttackSystem.scene=this:console.warn("PlayerAttack system not yet created")}catch(e){console.error("Error connecting attack system:",e)}}advanceWave(){this.currentWave=(this.currentWave||HC.WAVE.INITIAL_WAVE)+1,PC.emit("wave-updated",{wave:this.currentWave})}trackEnemyKill(e){"function"==typeof this.removeZombie&&this.removeZombie(e),"function"==typeof super.trackEnemyKill&&super.trackEnemyKill(e),this.grantKillRewards(),this.enemiesKilled=(this.enemiesKilled||0)+1,this.enemiesKilled%HC.WAVE.ENEMIES_PER_ADVANCE==0&&this.advanceWave()}grantKillRewards(){if(this.playerLevelSystem?this.playerLevelSystem.addExperience(HC.PLAYER.COMBAT.EXP_PER_KILL):console.error("playerLevelSystem not found!"),this.gameManager){const{BASE_GOLD_REWARD:e,MAX_GOLD_REWARD:t}=HC.PLAYER.COMBAT,s=Math.floor(Math.random()*(t-e+1))+e;this.gameManager.addGold(s)}}editorCreate(){const e=this.add.tilemap("mainMap");e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("Fire-candelabrum","Fire-candelabrum"),e.addTilesetImage("side way-Sheet","side way-Sheet"),e.addTilesetImage("Tileset 3","Tileset 3"),e.addTilesetImage("Wall_3","Wall_3"),e.addTilesetImage("rock pillars coming from darkness-bg_2","rock pillars coming from darkness-bg_2"),e.addTilesetImage("Crystals1-improved refraction_11","Crystals1-improved refraction_11"),e.addTilesetImage("Crystals1-improved refraction_6","Crystals1-improved refraction_6"),e.addTilesetImage("Crystals1-improved refraction_8","Crystals1-improved refraction_8"),e.addTilesetImage("Survive_Zone","Survive_Zone"),e.addTilesetImage("statues-far from platforms-bg_4","statues-far from platforms-bg_4"),e.addTilesetImage("statues-far from platforms-bg_2","statues-far from platforms-bg_2"),e.addTilesetImage("statues-far from platforms-bg_1","statues-far from platforms-bg_1"),e.addTilesetImage("statues-far from platforms-bg_0","statues-far from platforms-bg_0"),e.addTilesetImage("statues-far from platforms-bg_5","statues-far from platforms-bg_5"),e.addTilesetImage("Gold","Gold"),e.addTilesetImage("Bed","Bed"),e.addTilesetImage("Atlas-props","Atlas-props"),e.addTilesetImage("platform2","platform2"),e.addTilesetImage("platform1","platform1"),e.addTilesetImage("lavafal-for Tiled-spritesheet-16frames","lavafal-for Tiled-spritesheet-16frames");const t=e.createLayer("Map_Col",["Bed"],0,0),s=e.createLayer("WalkingArea",["Tileset 3"],-18,8),n=e.createLayer("BackGround",["Wall_3"],-18,8),i=e.createLayer("BackGround_1",["lavafal-for Tiled-spritesheet-16frames"],0,0),a=e.createLayer("Wall_RD",["Tileset 3"],-18,-20),r=e.createLayer("Wall_Upper",["Tileset 3"],12,12),o=e.createLayer("Wall_RU",["Tileset 3"],-18,-20),l=e.createLayer("Wall_down",["Tileset 3"],-18,12),c=e.createLayer("Survive_Zone",["Survive_Zone"],-18,8),h=e.createLayer("Gold_AC",["Gold"],-18,-24),u=e.createLayer("Map_",["platform1","platform2"],0,0),d=e.createLayer("Bed",["Bed"],0,0),p=e.createLayer("Vase_AC",["Atlas-props"],-18,8),f=new Yz(this,1258,1286);this.add.existing(f);const m=new Jz(this,944,869);this.add.existing(m);const g=new Jz(this,944,1417);this.add.existing(g);const y=new Jz(this,1592,1417);this.add.existing(y);const b=new Jz(this,1592,869);this.add.existing(b);const v=this.add.sprite(734,1993,"Fire-candelabrum",0);v.play("TorchAnim"),this.add.sprite(1253,1993,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1799,1993,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,1737,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,1231,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(2017,656,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,1737,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,1231,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(514,656,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(770,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1283,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(1831,485,"Fire-candelabrum",0).play("TorchAnim"),this.add.sprite(72,57,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(2482,57,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(2482,2420,"golden monument anim-going up-packed sheet",53).play("TelAnimation"),this.add.sprite(72,2420,"golden monument anim-going up-packed sheet",53).play("TelAnimation");const w=e.createLayer("Vase",["Atlas-props"],0,0);w.setVisible(!1),this.map_Col_1=t,this.walkingArea_1=s,this.backGround_1=n,this.backGround=i,this.wall_RD_1=a,this.wall_Upper_1=r,this.wall_RU_1=o,this.wall_down_1=l,this.survive_Zone_1=c,this.gold_AC_1=h,this.map=u,this.bed_1=d,this.vase_AC_1=p,this.playerPrefab=f,this.stoneStatuePrefab=m,this.stoneStatuePrefab_1=g,this.stoneStatuePrefab_2=y,this.stoneStatuePrefab_3=b,this.torchAnim=v,this.vase_1=w,this.mainMap=e,this.events.emit("scene-awake")}setupCollisions(){try{this.setupWalkingAreaCollisions(),this.setupStatueCollisions(),this.setupTilemapCollisions()}catch(e){console.error("Error setting up collisions:",e)}}setupWalkingAreaCollisions(){this.walkingArea_1&&this.playerPrefab&&(this.walkingArea_1.setCollisionByExclusion([]),this.walkingArea_1.layer.data.forEach((e=>{e.forEach((e=>{e&&0===e.index?e.setCollision(!0,!0,!0,!0):e&&0!==e.index&&e.setCollision(!1,!1,!1,!1)}))})),this.physics.add.collider(this.playerPrefab,this.walkingArea_1))}setupStatueCollisions(){[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach((e=>{var t;(null==e?void 0:e.active)&&this.playerPrefab&&(null==(t=e.setupCollision)||t.call(e,this.playerPrefab))}))}setupTilemapCollisions(){this.playerPrefab&&[this.map_Col_1,this.backGround].forEach((e=>{e&&(this.physics.add.collider(this.playerPrefab,e),e.setCollisionBetween(0,1e4))}))}setupMobCollisions(){var e;const t=(null==(e=this.mobManager)?void 0:e.mobGroup)||this.zombieGroup||this.enemies;t&&(this.walkingArea_1&&this.physics.add.collider(t,this.walkingArea_1),[this.map_Col_1,this.backGround].forEach((e=>{e&&this.physics.add.collider(t,e)})),[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach(((e,s)=>{(null==e?void 0:e.active)&&this.physics.add.collider(t,e)})))}setupLavaAnimations(){try{this.backGround.getTilesWithin().forEach((e=>{e&&6956===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"lava0").play("lava0")}))}catch(e){console.error("Error setting up water animations:",e)}}setupPortalSystem(){try{this.createPortals(),this.startPortalTimer()}catch(e){console.error("Portal system setup failed:",e)}}createPortals(){const e=this.findPortalSprites();HC.PORTAL.POSITIONS.forEach(((t,s)=>{const n=this.createPortal(t,e[s],s);this.portals.push(n),this.deactivatePortal(n)}))}findPortalSprites(){const e=this.children.list.filter((e=>{var t;return e instanceof Phaser.GameObjects.Sprite&&"golden monument anim-going up-packed sheet"===(null==(t=e.texture)?void 0:t.key)}));return HC.PORTAL.POSITIONS.map((t=>e.find((e=>Math.abs(e.x-t.x)<10&&Math.abs(e.y-t.y)<10))))}createPortal(e,t,s){const n=this.add.zone(e.x,e.y,HC.PORTAL.OVERLAP_SIZE,HC.PORTAL.OVERLAP_SIZE);return this.physics.world.enable(n),n.body.setImmovable(!0),{id:s,zone:n,sprite:t,x:e.x,y:e.y,isActive:!1,originalTint:HC.PORTAL.COLORS.ORIGINAL_TINT,activeTint:HC.PORTAL.COLORS.ACTIVE_TINT,glowEffect:null}}startPortalTimer(){this.portalTimer&&this.portalTimer.destroy(),this.portalTimer=this.time.addEvent({delay:HC.PORTAL.ACTIVATION_INTERVAL,callback:this.activateRandomPortal,callbackScope:this,loop:!0})}activateRandomPortal(){var e;if(!(null==(e=this.scene)?void 0:e.isActive())||this.isTeleporting)return;this.deactivateCurrentPortal();const t=this.portals[Math.floor(Math.random()*this.portals.length)],s=HC.PORTAL.AVAILABLE_SCENES[Math.floor(Math.random()*HC.PORTAL.AVAILABLE_SCENES.length)];this.activatePortal(t,s)}deactivateCurrentPortal(){this.activePortal&&(this.deactivatePortal(this.activePortal),this.activePortal=null)}activatePortal(e,t){var s;(null==(s=null==e?void 0:e.sprite)?void 0:s.active)&&(e.isActive=!0,e.destinationScene=t,this.activePortal=e,this.applyPortalVisualEffects(e),this.setupPortalCollision(e))}applyPortalVisualEffects(e){e.sprite.setTint(e.activeTint);const t=this.add.circle(e.x,e.y,HC.PORTAL.GLOW_RADIUS,HC.PORTAL.COLORS.GLOW_COLOR,.3);t.setDepth(e.sprite.depth-1),e.glowEffect=t,e.activeTween=this.tweens.add({targets:[e.sprite,t],alpha:{from:1,to:.7},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}setupPortalCollision(e){var t;(null==(t=this.player)?void 0:t.active)&&(e.overlapHandler=this.physics.add.overlap(this.player,e.zone,(()=>this.handlePortalCollision(e))))}handlePortalCollision(e){this.isValidPortalTeleport(e)&&this.initiateTeleport(e)}isValidPortalTeleport(e){var t;return(null==e?void 0:e.isActive)&&!this.isTeleporting&&e.destinationScene&&(null==(t=this.scene)?void 0:t.isActive())}initiateTeleport(e){var t;this.isTeleporting=!0,(null==(t=this.player)?void 0:t.active)&&"function"==typeof this.createTeleportEffect&&this.createTeleportEffect(this.player.x,this.player.y),this.saveGameBeforeTeleport(),this.cleanupBeforeTeleport(),this.time.delayedCall(HC.PORTAL.TELEPORT_DELAY,(()=>{this.executeSceneTransition(e.destinationScene)})),this.deactivatePortal(e),this.activePortal=null}saveGameBeforeTeleport(){var e;if(null==(e=this.gameManager)?void 0:e.saveGame)try{this.gameManager.saveGame()}catch(t){console.warn("Failed to save before teleport:",t)}}executeSceneTransition(e){var t,s,n;if(null==(t=this.scene)?void 0:t.isActive())try{(null==(n=null==(s=this.scene.manager)?void 0:s.keys)?void 0:n[e])?this.scene.start(e):this.scene.start("MainMapScene")}catch(i){console.error("Scene transition failed:",i),this.isTeleporting=!1}}deactivatePortal(e){var t,s,n;try{if(!e)return;e.isActive=!1,e.destinationScene=null,(null==(t=e.sprite)?void 0:t.active)&&(e.sprite.setTint(e.originalTint),e.sprite.setScale(1),e.sprite.setAlpha(1)),(null==(s=e.glowEffect)?void 0:s.active)&&(e.glowEffect.destroy(),e.glowEffect=null),e.activeTween&&this.tweens&&(this.tweens.remove(e.activeTween),e.activeTween=null),e.overlapHandler&&(null==(n=this.physics)?void 0:n.world)&&(this.physics.world.removeCollider(e.overlapHandler),e.overlapHandler=null)}catch(i){console.error("Error deactivating portal:",i)}}cleanupBeforeTeleport(){try{["enemySpawnTimer","waveTimer","difficultyTimer","portalTimer"].forEach((e=>{this[e]&&!this[e].hasDispatched&&(this[e].destroy(),this[e]=null)})),[{obj:this.gameplayManager,prop:"enemies"},{obj:this.gameplayManager,prop:"expOrbs"},{obj:this,prop:"enemies"},{obj:this,prop:"zombieGroup"},{obj:this,prop:"experienceOrbs"}].forEach((({obj:e,prop:t})=>{var s;(null==(s=null==e?void 0:e[t])?void 0:s.active)&&"function"==typeof e[t].clear&&e[t].clear(!0,!0)})),this.currentWave=0,this.isWaveActive=!1,this.waveEnemiesRemaining=0,this.enemiesKilled=0}catch(e){console.error("Error during portal teleport cleanup:",e)}}setupZombieCollisionSystem(){try{this.map_Col_1&&this.registerCollisionLayer(this.map_Col_1,"Map Collision"),this.backGround&&this.registerCollisionLayer(this.backGround,"Background Collision"),[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach(((e,t)=>{(null==e?void 0:e.active)&&this.registerStaticObstacle(e,`Stone Statue ${t+1}`)})),"function"==typeof this.setupZombieObstacleCollisions&&this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up zombie collision system:",e)}}setupCollisions(){try{this.setupStatueCollisions(),this.setupTilemapCollisions()}catch(e){console.error("Error setting up player collisions:",e)}}setupStatueCollisions(){[this.stoneStatuePrefab,this.stoneStatuePrefab_1,this.stoneStatuePrefab_2,this.stoneStatuePrefab_3].forEach((e=>{var t;(null==e?void 0:e.active)&&this.playerPrefab&&(null==(t=e.setupCollision)||t.call(e,this.playerPrefab))}))}setupTilemapCollisions(){this.playerPrefab&&[this.map_Col_1,this.backGround].forEach((e=>{e&&(this.physics.add.collider(this.playerPrefab,e),e.setCollisionBetween(0,1e4))}))}setupHPBarIntegration(){this.ensurePlayerHealth(),this.updateHPBar(),this.updateGoldDisplay(),this.setupHealthEventListeners()}ensurePlayerHealth(){if(this.player&&(!this.player.health||!this.player.maxHealth)){console.warn("Player missing HP values, applying defaults");const{health:e,maxHealth:t}=HC.PLAYER.DEFAULTS;this.player.health=e,this.player.maxHealth=t}}setupHealthEventListeners(){PC.on("request-initial-gold",(()=>{this.time.delayedCall(50,(()=>this.updateGoldDisplay()))})),PC.on("main-scene-started",(()=>{this.time.delayedCall(200,(()=>this.updateGoldDisplay()))}))}playerTakeDamage(e){this.player&&(this.player.health=Math.max(0,this.player.health-e),this.updateHPBar(),this.showDamageEffect(),this.player.health<=0&&this.handlePlayerDeath())}showDamageEffect(){var e;(null==(e=this.player)?void 0:e.setTint)&&(this.player.setTint(HC.UI.HEALTH_BAR.DAMAGE_TINT),this.time.delayedCall(HC.UI.HEALTH_BAR.EFFECT_DURATION,(()=>{var e,t;null==(t=null==(e=this.player)?void 0:e.clearTint)||t.call(e)})))}playerHeal(e){this.player&&(this.player.health=Math.min(this.player.maxHealth,this.player.health+e),this.updateHPBar(),this.showHealEffect())}showHealEffect(){var e;(null==(e=this.player)?void 0:e.setTint)&&(this.player.setTint(HC.UI.HEALTH_BAR.HEAL_TINT),this.time.delayedCall(HC.UI.HEALTH_BAR.EFFECT_DURATION,(()=>{var e,t;null==(t=null==(e=this.player)?void 0:e.clearTint)||t.call(e)})))}updateHPBar(){if(!this.player)return;const e={currentHP:this.player.health||HC.PLAYER.DEFAULTS.health,maxHP:this.player.maxHealth||HC.PLAYER.DEFAULTS.maxHealth,health:this.player.health||HC.PLAYER.DEFAULTS.health,maxHealth:this.player.maxHealth||HC.PLAYER.DEFAULTS.maxHealth};PC.emit("player-health-updated",e)}updateGoldDisplay(){var e;const t=(null==(e=this.gameManager)?void 0:e.getGold())||HC.BALANCE.GOLD.STARTING_AMOUNT,s={gold:t,totalGold:t,currentGold:t};PC.emit("player-gold-updated",s),PC.emit("player-stats-updated",s)}handlePlayerDeath(){var e;(null==(e=this.player)?void 0:e.setAlpha)&&this.player.setAlpha(.5),this.time.delayedCall(2e3,(()=>{var e;this.player.health=this.player.maxHealth,(null==(e=this.player)?void 0:e.setAlpha)&&this.player.setAlpha(1),this.updateHPBar()}))}setupVaseSpawning(){try{if(!this.physics||!this.add)return void console.error("Scene not ready for vase spawning");if(!this.textures.exists("Vase"))return void console.error("Vase texture not loaded, skipping vase spawning");this.vaseSpawner=new nV(this),this.vase_1?this.vaseSpawner.spawnVasesOnTilemap(this.vase_1,{spawnChance:HC.BALANCE.VASES.SPAWN_CHANCE,maxVases:HC.BALANCE.VASES.MAX_COUNT,textureKey:"Vase",targetTileIndex:null,excludeTileIndices:[0],removeTiles:!1}):console.error("vase_1 layer not found!"),this.setupVaseAttackCollision()}catch(e){console.error("Error setting up vase spawning:",e)}}setupVaseAttackCollision(){var e;try{(null==(e=this.gameManager)?void 0:e.debugMode)&&this.input.on("pointerdown",(e=>{this.breakableVases&&this.breakableVases.children.entries.forEach((t=>{t.active&&t.getBounds().contains(e.worldX,e.worldY)&&t.onPlayerAttack(1)}))}))}catch(t){console.error("Error setting up vase attack collision:",t)}}setupPlayerLevelSystem(){var e;try{this.playerLevelSystem=new Zz(this,10,50);const{level:t,experience:s,nextLevelExp:n}=HC.PLAYER.DEFAULTS;this.playerLevelSystem.level=t,this.playerLevelSystem.experience=s,this.playerLevelSystem.nextLevelExp=n,this.playerLevelSystem.updateText(),this.playerLevelSystem.updateExpBar(),(null==(e=this.gameManager)?void 0:e.debugMode)&&HC.DEBUG.ENABLED}catch(t){console.error("Error setting up Player Level System:",t)}}update(e,t){var s;null==(s=super.update)||s.call(this,e,t);try{this.updateCamera(),this.updateManagers(e,t)}catch(n){console.error("Update loop error:",n)}}updateCamera(){var e,t;(null==(e=this.player)?void 0:e.active)&&!this.player.isDead&&(null==(t=this.cameras)?void 0:t.main)&&this.cameras.main.startFollow(this.player,!0,.1,.1)}updateManagers(e,t){this.mobManager&&this.mobManager.update(e,t)}shutdown(){var e;try{this.stopGameSystems(),this.cleanupTimers(),this.cleanupPortals(),this.cleanupManagers(),this.cleanupEventListeners(),null==(e=super.shutdown)||e.call(this)}catch(t){console.error("Shutdown error:",t)}}stopGameSystems(){this.isGameRunning=!1,PC.emit("timer-stop")}cleanupTimers(){["portalTimer","gameTimer","enemySpawnTimer","waveTimer","difficultyTimer"].forEach((e=>{this[e]&&!this[e].hasDispatched&&(this[e].destroy(),this[e]=null)}))}cleanupPortals(){this.portals.forEach((e=>this.deactivatePortal(e))),this.portals=[],this.activePortal=null,this.isTeleporting=!1}cleanupManagers(){this.playerLevelSystem&&(this.playerLevelSystem.destroy(),this.playerLevelSystem=null),this.mobManager&&(this.mobManager.shutdown(),this.mobManager=null),window.currentGameScene===this&&delete window.currentGameScene}cleanupEventListeners(){["request-initial-gold","main-scene-started","wave-updated"].forEach((e=>PC.removeListener(e)))}}class aV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??1125,s??954,n||"animated lamp posts-4",i??0),this.play("LampPostsAnimation1animated lamp posts"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(40,10),this.body.setOffset(15,75),this.body.moves=!1,this.body.immovable=!0,this.isLampInvisible=!1,this.isPlayerInvisible=!1,this.lampTop=this.y-45,this.lampBottom=this.y+20,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-20))<45;this.player.y>this.lampTop&&this.player.y<this.lampBottom&&t?(this.isLampInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isLampInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isLampInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isLampInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class rV extends Xz{constructor(){super("MiniMapDarkForastScene"),En(this,"tile_Layer"),En(this,"road_1"),En(this,"tall_Grass_1"),En(this,"rampt_1"),En(this,"base_1"),En(this,"scrift_1"),En(this,"pad_1"),En(this,"cliff_1"),En(this,"tree"),En(this,"tree_1"),En(this,"tree_2"),En(this,"river_1"),En(this,"playerPrefab"),En(this,"shrine_1"),En(this,"lampPrefab"),En(this,"lampPrefab_1"),En(this,"lampPrefab_2"),En(this,"lampPrefab_3"),En(this,"lampPrefab_4"),En(this,"lampPrefab_5"),En(this,"telAnimation"),En(this,"miniMapDarkForast")}editorCreate(){const e=this.add.tilemap("MiniMapDarkForast");e.addTilesetImage("Tree_pattern","Tree_pattern"),e.addTilesetImage("GroundTileset_V02","GroundTileset_V02"),e.addTilesetImage("AncientScript_V01-Sheet","AncientScript_V01-Sheet"),e.addTilesetImage("shrine-buff available animation-295x311","shrine-buff available animation-295x311"),e.addTilesetImage("animated lamp posts-4","animated lamp posts-4"),e.addTilesetImage("animated lamp posts-5","animated lamp posts-5"),e.addTilesetImage("stronghold - embranchment section","stronghold - embranchment section"),e.addTilesetImage("Lift_Platform","Lift_Platform"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("carriage - no tent","carriage - no tent"),e.addTilesetImage("bone - big - 2","bone - big - 2"),e.addTilesetImage("bone - big - 1","bone - big - 1"),e.addTilesetImage("RiverShallowSheet_v01","RiverShallowSheet_v01"),e.addTilesetImage("tree - color scheme 1 - 2","tree - color scheme 1 - 2"),e.addTilesetImage("tree - color scheme 1 - 1","tree - color scheme 1 - 1"),e.addTilesetImage("tree - color scheme 4 - 1","tree - color scheme 4 - 1"),e.addTilesetImage("tree - color scheme 5 - 1","tree - color scheme 5 - 1"),e.addTilesetImage("tree - naked 1","tree - naked 1");const t=e.createLayer("Tile Layer 2",["GroundTileset_V02"],0,0),s=e.createLayer("Road",["GroundTileset_V02"],0,0),n=e.createLayer("Tall Grass",["GroundTileset_V02"],0,0),i=e.createLayer("Rampt",["GroundTileset_V02"],0,0),a=e.createLayer("Base",["GroundTileset_V02","AncientScript_V01-Sheet"],0,0),r=e.createLayer("Scrift",["AncientScript_V01-Sheet"],0,0),o=e.createLayer("Pad",["Lift_Platform"],16,4),l=e.createLayer("Cliff",["GroundTileset_V02"],0,0),c=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),h=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),u=e.createLayer("Tree",["tree - color scheme 4 - 1","tree - color scheme 1 - 2","tree - color scheme 1 - 1","Tree_pattern","tree - naked 1"],0,0),d=e.createLayer("River",["RiverShallowSheet_v01"],0,0),p=new Yz(this,1180,715);this.add.existing(p);const f=e.createLayer("Shrine",["shrine-buff available animation-295x311"],0,0);this.add.image(266,243,"tree - color scheme 5 - 1",0),this.add.image(85,590,"tree - color scheme 5 - 1",0),this.add.image(72,2066,"tree - color scheme 5 - 1",0),this.add.image(183,965,"tree - color scheme 5 - 1",0);const m=new aV(this,654,758);this.add.existing(m),m.flipX=!0,m.flipY=!1;const g=new aV(this,654,927);this.add.existing(g),g.flipX=!0,g.flipY=!1;const y=new aV(this,1404,1558);this.add.existing(y);const b=new aV(this,1185,1558);this.add.existing(b),b.flipX=!0,b.flipY=!1;const v=new aV(this,1906,896);this.add.existing(v);const w=new aV(this,1906,759);this.add.existing(w);const x=this.add.sprite(1263,393,"golden monument anim-going up-packed sheet",53);x.play("TelAnimation"),this.tile_Layer=t,this.road_1=s,this.tall_Grass_1=n,this.rampt_1=i,this.base_1=a,this.scrift_1=r,this.pad_1=o,this.cliff_1=l,this.tree=c,this.tree_1=h,this.tree_2=u,this.river_1=d,this.playerPrefab=p,this.shrine_1=f,this.lampPrefab=m,this.lampPrefab_1=g,this.lampPrefab_2=y,this.lampPrefab_3=b,this.lampPrefab_4=v,this.lampPrefab_5=w,this.telAnimation=x,this.miniMapDarkForast=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{this.editorCreate(),super.create(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning()}catch(e){console.error("Error in MiniMapDarkForastScene create:",e)}}setupCollisions(){try{this.lampPrefab&&this.lampPrefab.setupCollision(this.playerPrefab),this.lampPrefab_1&&this.lampPrefab_1.setupCollision(this.playerPrefab),this.lampPrefab_2&&this.lampPrefab_2.setupCollision(this.playerPrefab),this.lampPrefab_3&&this.lampPrefab_3.setupCollision(this.playerPrefab),this.lampPrefab_4&&this.lampPrefab_4.setupCollision(this.playerPrefab),this.lampPrefab_5&&this.lampPrefab_5.setupCollision(this.playerPrefab),this.cliff_1&&(this.physics.add.collider(this.playerPrefab,this.cliff_1),this.cliff_1.setCollisionBetween(0,1e4)),this.rampt_1&&(this.physics.add.collider(this.playerPrefab,this.rampt_1),this.rampt_1.setCollisionBetween(0,1e4)),this.base_1&&(this.physics.add.collider(this.playerPrefab,this.base_1),this.base_1.setCollisionBetween(0,1e4))}catch(e){console.error("Error setting up dark forest collisions:",e)}}setupZombieCollisionSystem(){try{this.cliff_1&&this.registerCollisionLayer(this.cliff_1,"Cliff Collision"),this.rampt_1&&this.registerCollisionLayer(this.rampt_1,"Ramp Collision"),this.base_1&&this.registerCollisionLayer(this.base_1,"Base Collision"),[this.lampPrefab,this.lampPrefab_1,this.lampPrefab_2,this.lampPrefab_3,this.lampPrefab_4,this.lampPrefab_5].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Forest Lamp ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up dark forest zombie collision system:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapDarkForastScene update:",s)}}shutdown(){super.shutdown()}}class oV extends Xz{constructor(){super("MiniMapBossFightScene"),En(this,"floor_1"),En(this,"bg_1"),En(this,"lava_floor_1"),En(this,"fire_animation_1"),En(this,"floating_plat_form_Chain_1"),En(this,"floating_plat_form_Floating_Col_1"),En(this,"floating_plat_form_Floatind_platform_1"),En(this,"gate_1"),En(this,"wall_wall_bottom_1"),En(this,"lift_1"),En(this,"floating_plat_form_Chain_shadow_1"),En(this,"wall_Wall_side_1"),En(this,"pillar_1"),En(this,"decoration_1"),En(this,"stoneStatuePrefab_1"),En(this,"stoneStatuePrefab"),En(this,"telAnimation"),En(this,"playerPrefab"),En(this,"miniMapBossFight")}editorCreate(){const e=this.add.tilemap("MiniMapBossFight");e.addTilesetImage("Tileset 4 - transp","Tileset 4"),e.addTilesetImage("Tileset 2","Tileset 2"),e.addTilesetImage("pillars-bg_5","pillars-bg_5"),e.addTilesetImage("pillars-bg_0","pillars-bg_0"),e.addTilesetImage("floor","floor"),e.addTilesetImage("Decor corner","Decor corner"),e.addTilesetImage("TorchBowlRegular_V01-Sheet","TorchBowlRegular_V01-Sheet"),e.addTilesetImage("side way-Sheet","side way-Sheet"),e.addTilesetImage("Lift_Platform","Lift_Platform"),e.addTilesetImage("Floading_flat_form","Floading_flat_form"),e.addTilesetImage("animated lava river spritesheet","animated lava river spritesheet"),e.addTilesetImage("floor_Lava_Crack","floor_Lava_Crack"),e.addTilesetImage("static idle","static idle"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("rock pillars coming from darkness-bg_2","rock pillars coming from darkness-bg_2"),e.addTilesetImage("Crystals2-improved refraction_25","Crystals2-improved refraction_25"),e.addTilesetImage("Crystals2-improved refraction_3","Crystals2-improved refraction_3"),e.addTilesetImage("Crystals2-improved refraction_9","Crystals2-improved refraction_9"),e.addTilesetImage("Crystals2-improved refraction_19","Crystals2-improved refraction_19"),e.addTilesetImage("AncientScript_V01","AncientScript_V01");const t=e.createLayer("Floor",["floor","floor_Lava_Crack"],0,0),s=e.createLayer("bg",["Tileset 4 - transp"],0,0),n=e.createLayer("lava floor",["animated lava river spritesheet"],0,0),i=e.createLayer("fire animation",["TorchBowlRegular_V01-Sheet"],0,0),a=e.createLayer("Floating plat form/Chain",["Floading_flat_form"],0,0),r=e.createLayer("Floating plat form/Floating Col",["Floading_flat_form"],0,0),o=e.createLayer("Floating plat form/Floatind platform",["Floading_flat_form"],0,0),l=e.createLayer("Gate",["side way-Sheet"],0,0),c=e.createLayer("wall/wall bottom",["Tileset 4 - transp"],0,0),h=e.createLayer("lift",["Lift_Platform"],0,0),u=e.createLayer("Floating plat form/Chain shadow",["Floading_flat_form"],0,0),d=e.createLayer("wall/Wall side",["Tileset 4 - transp"],0,0),p=e.createLayer("pillar",["pillars-bg_5","pillars-bg_0","Decor corner"],0,0),f=e.createLayer("Decoration",["Crystals2-improved refraction_3","Crystals2-improved refraction_9","Crystals2-improved refraction_25","Crystals2-improved refraction_19","AncientScript_V01"],0,0),m=new Jz(this,1610,1451);this.add.existing(m);const g=new Jz(this,856,1451);this.add.existing(g);const y=this.add.sprite(1280,844,"golden monument anim-going up-packed sheet",53);y.play("TelAnimation");const b=new Yz(this,978,1191);this.add.existing(b),this.add.sprite(618,1797,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(1935,1797,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(1935,872,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.add.sprite(618,872,"TorchBowlRegular_V01-Sheet",0).play("Torch1Anim"),this.floor_1=t,this.bg_1=s,this.lava_floor_1=n,this.fire_animation_1=i,this.floating_plat_form_Chain_1=a,this.floating_plat_form_Floating_Col_1=r,this.floating_plat_form_Floatind_platform_1=o,this.gate_1=l,this.wall_wall_bottom_1=c,this.lift_1=h,this.floating_plat_form_Chain_shadow_1=u,this.wall_Wall_side_1=d,this.pillar_1=p,this.decoration_1=f,this.stoneStatuePrefab_1=m,this.stoneStatuePrefab=g,this.telAnimation=y,this.playerPrefab=b,this.miniMapBossFight=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupLavaAnimations()}catch(e){console.error("Error in MiniMapBossFightScene create:",e)}}setupCollisions(){try{this.lava_floor_1.setDepth(1),this.floating_plat_form_Floating_Col_1.setDepth(2),this.floating_plat_form_Floatind_platform_1.setDepth(3),this.stoneStatuePrefab.setDepth(4),this.stoneStatuePrefab_1.setDepth(4),this.playerPrefab.setDepth(4),this.decoration_1.setDepth(4),this.telAnimation.setDepth(4),this.floating_plat_form_Chain_1.setDepth(4),this.stoneStatuePrefab_1.setupCollision(this.playerPrefab),this.stoneStatuePrefab.setupCollision(this.playerPrefab),this.physics.add.collider(this.playerPrefab,this.floating_plat_form_Floating_Col_1),this.floating_plat_form_Floating_Col_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up boss fight collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.floating_plat_form_Floating_Col_1,"Platform Collision"),[this.stoneStatuePrefab,this.stoneStatuePrefab_1].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Boss Arena Statue ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up boss fight zombie collision system:",e)}}setupLavaAnimations(){try{const e=this.lava_floor_1.getTilesWithin(),t=this.add.container(0,0);t.setDepth(1),this.lavaSprites=[],e.forEach((e=>{if(e&&-1!==e.index){let s=null;switch(e.index){case 2309:s="lava0";break;case 2307:s="lava9";break;case 2275:s="lava6";break;case 2311:s="lava3";break;case 2343:s="lava12";break;case 2324:s="lava10";break;case 2290:s="lava7.1";break;case 2276:s="lava4.1";break;case 2328:s="lava1.1"}if(s){const n=this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"animated lava river spritesheet");n.play(s),t.add(n),this.lavaSprites.push(n),e.visible=!1}}}))}catch(e){console.error("Error setting up lava animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapBossFightScene update:",s)}}shutdown(){super.shutdown()}}let lV=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??65,s??105,n||"TreePalmSheet_01",i??0),this.play("Tree1"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(30,15),this.body.setOffset(70,135),this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-85))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}};class cV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??669,s??803,n||"TreePalmSheet_02",i??0),this.play("Tree2"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(20,15),this.body.setOffset(50,105),this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-55))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class hV extends Phaser.GameObjects.Sprite{constructor(e,t,s,n,i){super(e,t??48,s??80,n||"TreePalmSheet_03",i??0),this.play("Tree3"),e.add.existing(this),e.physics.add.existing(this,!1),this.body.allowGravity=!1,this.body.setSize(20,15),this.body.setOffset(40,105),this.body.moves=!1,this.body.immovable=!0,this.isTreeInvisible=!1,this.isPlayerInvisible=!1,this.treeTop=this.y-125,this.treeBottom=this.y+55,e.events.on("update",(()=>{if(!this.player)return;const t=Math.abs(this.player.x-(this.x+this.body.offset.x-50))<45;this.player.y>this.treeTop&&this.player.y<this.treeBottom-20&&t?(this.isTreeInvisible||e.tweens.add({targets:this,alpha:.4,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!0}}),this.isPlayerInvisible||e.tweens.add({targets:this.player,alpha:.3,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!0}})):(this.isTreeInvisible&&e.tweens.add({targets:this,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isTreeInvisible=!1}}),this.isPlayerInvisible&&e.tweens.add({targets:this.player,alpha:1,duration:200,ease:"Power1",onComplete:()=>{this.isPlayerInvisible=!1}}))}))}setupCollision(e){this.scene&&e&&(this.scene.physics.add.collider(e,this,null,null,this),this.player=e)}destroy(){this.scene&&this.scene.events.off("update"),super.destroy()}}class uV extends Xz{constructor(){super("MiniMapBeachScene"),En(this,"beachTreePrefab"),En(this,"beachTree1Prefab"),En(this,"beachTreePrefab2"),En(this,"water_1"),En(this,"ground_1"),En(this,"bridge_1"),En(this,"respawn_point_1"),En(this,"block_1"),En(this,"recked_ship_1"),En(this,"decor_1"),En(this,"block"),En(this,"skull_stone_1"),En(this,"playerPrefab"),En(this,"miniMapBeachBiom")}editorCreate(){const e=this.add.tilemap("MiniMapBeachBiom");e.addTilesetImage("beach - standard - with thick foam - spritesheet","beach - standard - with thick foam - spritesheet"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("rocky skull structure-sand","rocky skull structure-sand"),e.addTilesetImage("stranded ship-sand","stranded ship-sand"),e.addTilesetImage("TreePalmSheet_03","TreePalmSheet_03"),e.addTilesetImage("TreePalmSheet_01","TreePalmSheet_01"),e.addTilesetImage("TreePalmSheet_02","TreePalmSheet_02"),e.addTilesetImage("bones_17","bones_17"),e.addTilesetImage("bones_15","bones_15"),e.addTilesetImage("bones_16","bones_16"),e.addTilesetImage("TreePalmSheet_02","TreePalmSheet_02"),e.addTilesetImage("BeachDeckSheet","BeachDeckSheet");const t=new lV(this,1402,842);this.add.existing(t);const s=new cV(this,1081,870);this.add.existing(s),s.flipX=!0,s.flipY=!1;const n=new hV(this,1201,816);this.add.existing(n);const i=e.createLayer("water",["beach - standard - with thick foam - spritesheet"],0,0),a=e.createLayer("Ground",["beach - standard - with thick foam - spritesheet"],0,0),r=e.createLayer("bridge",["BeachDeckSheet"],0,-9),o=e.createLayer("respawn point",[],0,0),l=e.createLayer("Block",["BeachDeckSheet"],0,0),c=e.createLayer("Recked ship",["stranded ship-sand","golden monument anim-going up-packed sheet"],0,0),h=e.createLayer("decor",["bones_15","bones_16","bones_17"],0,0),u=e.createLayer("Block",["BeachDeckSheet"],0,0),d=e.createLayer("Skull stone",["rocky skull structure-sand"],4,5),p=new Yz(this,846,1110);this.add.existing(p),this.beachTreePrefab=t,this.beachTree1Prefab=s,this.beachTreePrefab2=n,this.water_1=i,this.ground_1=a,this.bridge_1=r,this.respawn_point_1=o,this.block_1=l,this.recked_ship_1=c,this.decor_1=h,this.block=u,this.skull_stone_1=d,this.playerPrefab=p,this.miniMapBeachBiom=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,2560,2560),this.physics.world.bounds.width=2560,this.physics.world.bounds.height=2560;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupWaterAnimations()}catch(e){console.error("Error in MiniMapBeachScene create:",e)}}setupCollisions(){try{this.playerPrefab.setDepth(2),this.bridge_1.setDepth(1),this.beachTreePrefab.setupCollision(this.playerPrefab),this.beachTree1Prefab.setupCollision(this.playerPrefab),this.beachTreePrefab2.setupCollision(this.playerPrefab),this.physics.add.collider(this.playerPrefab,this.block_1),this.block_1.setCollisionBetween(0,1e4),this.physics.add.collider(this.playerPrefab,this.water_1),this.water_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up beach collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.block_1,"Beach Blocks"),this.registerCollisionLayer(this.water_1,"Water Collision"),[this.beachTreePrefab,this.beachTree1Prefab,this.beachTreePrefab2].forEach(((e,t)=>{e&&this.registerStaticObstacle(e,`Beach Tree ${t+1}`)})),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up beach zombie collision system:",e)}}setupWaterAnimations(){try{this.water_1.getTilesWithin().forEach((e=>{e&&227===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water_1").play("Water0")})),this.ground_1.getTilesWithin().forEach((e=>{e&&103===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.1").play("water.r"),e&&174===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.2").play("water.r.d"),e&&70===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.3").play("water.r.u"),e&&69===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.4").play("water12"),e&&37===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.5").play("water11"),e&&36===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.6").play("water13"),e&&107===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.7").play("water1"),e&&137===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.8").play("water2"),e&&138===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.9").play("water3"),e&&73===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.10").play("water4"),e&&72===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.11").play("water5"),e&&173===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.12").play("water6"),e&&141===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.13").play("water7"),e&&140===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.14").play("water8"),e&&172===e.index&&this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"water.15").play("water9")}))}catch(e){console.error("Error setting up water animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapBeachScene update:",s)}}shutdown(){super.shutdown()}}class dV extends Xz{constructor(){super("MiniMapLavaScene"),En(this,"bG_lava_1"),En(this,"bG_Platform_1"),En(this,"bG_Platform_L__1"),En(this,"bG_Stairs_1"),En(this,"bG_Totem_platform_1"),En(this,"decor_Shard_rocks_1"),En(this,"decor_Decor_1"),En(this,"traps_Statue_1"),En(this,"playerPrefab"),En(this,"miniMapLava")}editorCreate(){const e=this.add.tilemap("MiniMapLava");e.addTilesetImage("platform1","platform1"),e.addTilesetImage("animated lava river spritesheet","animated lava river spritesheet"),e.addTilesetImage("golden monument anim-going up-packed sheet","golden monument anim-going up-packed sheet"),e.addTilesetImage("tileset","tileset"),e.addTilesetImage("spike-pack-horizontal-attack","spike-pack-horizontal-attack"),e.addTilesetImage("spike-pack-horizontal-retreat","spike-pack-horizontal-retreat"),e.addTilesetImage("spike-pack-vertical-attack","spike-pack-vertical-attack"),e.addTilesetImage("spike-pack-vertical-retreat","spike-pack-vertical-retreat"),e.addTilesetImage("tumor-destroy","tumor-destroy"),e.addTilesetImage("egg-ish prop-explosion","egg-ish prop-explosion"),e.addTilesetImage("lava ball-falling","lava ball-falling"),e.addTilesetImage("nasty structure_0","nasty structure_0"),e.addTilesetImage("big eye-loop","big eye-loop"),e.addTilesetImage("crusher-stand-retreat-v2","crusher-stand-retreat-v2"),e.addTilesetImage("crusher-retreat-v2","crusher-retreat-v2"),e.addTilesetImage("crusher-smash-pentagram FX","crusher-smash-pentagram FX"),e.addTilesetImage("spitfire device-vertical-starting","spitfire device-vertical-starting"),e.addTilesetImage("spitfire device-multidirectional-firing-loop-8frames","spitfire device-multidirectional-firing-loop-8frames"),e.addTilesetImage("spitfire device-horizontal-starting","spitfire device-horizontal-starting"),e.addTilesetImage("spitfire device-vertical-firing-loop-flame","spitfire device-vertical-firing-loop-flame"),e.addTilesetImage("spitfire device-diagonal-firing-loop-flame","spitfire device-diagonal-firing-loop-flame"),e.addTilesetImage("tormented souls tile-9-hand3","tormented souls tile-9-hand3"),e.addTilesetImage("tormented souls tile-7-hand1","tormented souls tile-7-hand1"),e.addTilesetImage("tormented souls tile-8-hand2","tormented souls tile-8-hand2"),e.addTilesetImage("tiny volcanos_0","tiny volcanos_0"),e.addTilesetImage("spears with dead bodies_0","spears with dead bodies_0"),e.addTilesetImage("spears with dead bodies_1","spears with dead bodies_1"),e.addTilesetImage("spears with dead bodies_2","spears with dead bodies_2"),e.addTilesetImage("spears with dead bodies_3","spears with dead bodies_3"),e.addTilesetImage("spears with dead bodies_4","spears with dead bodies_4"),e.addTilesetImage("spears with dead bodies_5","spears with dead bodies_5"),e.addTilesetImage("statues_0","statues_0"),e.addTilesetImage("statues_3","statues_3"),e.addTilesetImage("towers_0","towers_0"),e.addTilesetImage("sharp rocks_0","sharp rocks_0"),e.addTilesetImage("sharp rocks_1","sharp rocks_1"),e.addTilesetImage("sharp rocks_2","sharp rocks_2"),e.addTilesetImage("sharp rocks_3","sharp rocks_3"),e.addTilesetImage("sharp rocks_4","sharp rocks_4"),e.addTilesetImage("rock-formations on lava-_0","rock-formations on lava-_0"),e.addTilesetImage("rock-formations on lava-_1","rock-formations on lava-_1"),e.addTilesetImage("rock-formations on lava-_2","rock-formations on lava-_2"),e.addTilesetImage("rock-formations on lava-_3","rock-formations on lava-_3"),e.addTilesetImage("rock-formations on lava-_4","rock-formations on lava-_4"),e.addTilesetImage("rocks1-_0","rocks1-_0"),e.addTilesetImage("rocks1-_1","rocks1-_1"),e.addTilesetImage("rocks1-_2","rocks1-_2"),e.addTilesetImage("rocks1-_3","rocks1-_3"),e.addTilesetImage("rocks1-_4","rocks1-_4"),e.addTilesetImage("rocks1-_5","rocks1-_5"),e.addTilesetImage("rocks1-_6","rocks1-_6"),e.addTilesetImage("rocks1-_7","rocks1-_7"),e.addTilesetImage("tormented souls Manu hand","tormented souls Manu hand"),e.addTilesetImage("spike-1-attack","spike-1-attack"),e.addTilesetImage("spike-3-retreat","spike-3-retreat"),e.addTilesetImage("big rocks_1","big rocks_1"),e.addTilesetImage("big rocks_11","big rocks_11"),e.addTilesetImage("towers_2","towers_2"),e.addTilesetImage("chest-anims-shaking","chest-anims-shaking");const t=e.createLayer("BG/lava",["animated lava river spritesheet"],0,0),s=e.createLayer("BG/Platform",["platform1","tileset"],0,0),n=e.createLayer("BG/Platform L@",["platform1","tileset"],0,0),i=e.createLayer("BG/Stairs",["tileset","crusher-stand-retreat-v2"],0,0),a=e.createLayer("BG/Totem platform",["tileset"],0,0),r=e.createLayer("decor/Shard rocks",["rock-formations on lava-_2","rock-formations on lava-_0","sharp rocks_0","rock-formations on lava-_4","sharp rocks_2","sharp rocks_3","sharp rocks_1","rock-formations on lava-_3","rock-formations on lava-_1","rocks1-_7","rocks1-_4","sharp rocks_4","big rocks_1","rocks1-_2","rocks1-_0","rocks1-_6","rocks1-_1","rocks1-_3"],0,0),o=e.createLayer("decor/Decor",["rock-formations on lava-_2","rocks1-_0","spears with dead bodies_1","spears with dead bodies_4","spears with dead bodies_2","spears with dead bodies_5","rock-formations on lava-_4","spears with dead bodies_0","spears with dead bodies_3","rock-formations on lava-_3","big rocks_1","big rocks_11","rocks1-_5","towers_2","rock-formations on lava-_1","rocks1-_4"],0,0),l=e.createLayer("Traps/Statue",["statues_0","statues_3"],0,0);this.add.sprite(668,2510,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(898,2687,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(1901,1667,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(1436,1698,"tumor-destroy",0).play("TumorDestroyAni"),this.add.sprite(2412,546,"tumor-destroy",0).play("TumorDestroyAni");const c=new Yz(this,644,2600);this.add.existing(c),this.bG_lava_1=t,this.bG_Platform_1=s,this.bG_Platform_L__1=n,this.bG_Stairs_1=i,this.bG_Totem_platform_1=a,this.decor_Shard_rocks_1=r,this.decor_Decor_1=o,this.traps_Statue_1=l,this.playerPrefab=c,this.miniMapLava=e,this.events.emit("scene-awake")}preload(){super.preload()}create(){this.cameras.main.setBounds(0,0,3200,3200),this.physics.world.bounds.width=3200,this.physics.world.bounds.height=3200;try{super.create(),this.editorCreate(),this.setupCollisions(),this.player=this.playerPrefab,this.initializeManagers(),this.setupPlayerAttack(),this.setupTestControls(),this.setupZombieCollisionSystem(),this.startEnemySpawning(),this.setupLavaAnimations()}catch(e){console.error("Error in MiniMapLavaScene create:",e)}}setupCollisions(){try{this.bG_lava_1.setDepth(1),this.bG_Platform_1.setDepth(2),this.playerPrefab.setDepth(2),this.bG_Stairs_1.setDepth(2),this.bG_Totem_platform_1.setDepth(2),this.decor_Decor_1.setDepth(2),this.traps_Statue_1.setDepth(2),this.bG_Platform_L__1.setDepth(2),this.physics.add.collider(this.playerPrefab,this.bG_lava_1),this.bG_lava_1.setCollisionBetween(0,1e4)}catch(e){console.error("Error setting up lava scene collisions:",e)}}setupZombieCollisionSystem(){try{this.registerCollisionLayer(this.bG_lava_1,"Lava Collision"),this.setupZombieObstacleCollisions()}catch(e){console.error("Error setting up lava scene zombie collision system:",e)}}setupLavaAnimations(){try{this.lavaContainer=this.add.container(0,0);const e=this.bG_lava_1.getTilesWithin();this.lavaSprites=[],e.forEach((e=>{if(e&&-1!==e.index){let t=null;if(391===e.index&&(t="lava0"),t){const s=this.add.sprite(e.pixelX+e.width/2,e.pixelY+e.height/2,"animated lava river spritesheet");s.play(t),this.lavaContainer.add(s),this.lavaSprites.push(s),e.visible=!1}}}))}catch(e){console.error("Error setting up lava animations:",e)}}trackEnemyKill(e){this.removeZombie(e),super.trackEnemyKill(e)}update(e,t){super.update(e,t);try{this.player&&!this.player.isDead&&this.cameras.main.startFollow(this.player,!0,.1,.1)}catch(s){console.error("Error in MiniMapLavaScene update:",s)}}shutdown(){super.shutdown()}}const pV={type:Phaser.AUTO,width:1920,height:1080,backgroundColor:"#242424",parent:"game-container",physics:{default:"arcade",arcade:{debug:!1,tileBias:32}},render:{pixelArt:!0},scale:{mode:Phaser.Scale.WIDTH_CONTROLS_HEIGHT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1920,height:1080,min:{width:1280,height:720},max:{width:2560,height:1440}}};class fV extends Phaser.Scene{constructor(){super("Boot")}preload(){this.load.pack("pack","./assets/preload-asset-pack.json")}create(){window.dispatchEvent(new CustomEvent("gameBootComplete")),this.scene.start("Preload"),PC.emit("current-scene-ready",this)}}let mV=null;window.startGameManually=function(){if(mV){const e=mV.registry.get("gameManager");e&&e.startNewRun(),mV.scene.start("MainMapScene")}},window.stopGameManually=function(){if(console.log("Manual game stop requested"),mV){const e=mV.registry.get("gameManager");e&&e.isGameRunning&&e.handlePlayerDeath("Manual Exit"),mV.scene.getScenes(!0).forEach((e=>{"Boot"!==e.scene.key&&"Preload"!==e.scene.key&&mV.scene.stop(e.scene.key)}))}};const gV=({isVisible:e,deathData:t,onComplete:s})=>{const[n,i]=yi.useState(!1);return yi.useEffect((()=>{if(!e)return void i(!1);const t=setTimeout((()=>{i(!0)}),2e3);return()=>clearTimeout(t)}),[e]),e?Pi.jsxs("div",{className:"death-screen-overlay",children:[Pi.jsxs("div",{className:"death-screen-container",children:[Pi.jsx("div",{className:"game-over-svg",children:Pi.jsx("img",{src:"/gameOver.svg",alt:"Game Over",className:"svg-image game-over-image"})}),t&&Pi.jsx("div",{className:"death-info",children:t.score&&Pi.jsxs("p",{className:"death-score",children:["Final Score: ",t.score]})}),n&&Pi.jsx("div",{className:"return-menu-svg",children:Pi.jsx("img",{src:"/returnToMenu.svg",alt:"returnToMenu",className:"svg-image return-menu-image",onClick:()=>{s&&s()}})})]}),Pi.jsx("style",{jsx:!0,children:"\n        .death-screen-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          background: linear-gradient(45deg, #1a1a1a, #2d1b1b, #1a1a1a);\n          background-size: 400% 400%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n          animation: backgroundShift 4s ease-in-out infinite;\n        }\n\n        .death-screen-container {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          text-align: center;\n          padding: 40px;\n          max-width: 800px;\n          width: 90%;\n          height: 100%;\n        }\n\n        .return-menu-svg {\n          margin-top: 40px;\n          animation: returnButtonEntrance 0.8s ease-out;\n        }\n\n        .svg-image {\n          max-width: 100%;\n          height: auto;\n          display: block;\n        }\n\n        .return-menu-image {\n          max-width: 300px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));\n        }\n\n        .return-menu-image:active {\n          transform: scale(0.95);\n        }\n\n        .death-reason {\n          color: #ff8888;\n          font-size: 1.4rem;\n          margin-bottom: 15px;\n          font-weight: bold;\n          text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n        }\n\n        .death-score {\n          color: #cccccc;\n          font-size: 1.2rem;\n          font-weight: bold;\n          text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n        }\n\n        @keyframes backgroundShift {\n          0%,\n          100% {\n            background-position: 0% 50%;\n          }\n          50% {\n            background-position: 100% 50%;\n          }\n        }\n\n        @keyframes gameOverEntrance {\n          0% {\n            opacity: 0;\n            transform: translateY(-50px) scale(0.5);\n          }\n          50% {\n            opacity: 0.8;\n            transform: translateY(-10px) scale(1.1);\n          }\n          100% {\n            opacity: 1;\n            transform: translateY(0) scale(1);\n          }\n        }\n\n        @keyframes returnButtonEntrance {\n          0% {\n            opacity: 0;\n            transform: translateY(30px);\n          }\n          100% {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes fadeInDelayed {\n          from {\n            opacity: 0;\n          }\n          to {\n            opacity: 1;\n          }\n        }\n\n        @keyframes pulseGlow {\n          0%,\n          100% {\n            filter: drop-shadow(0 0 20px rgba(255, 68, 68, 0.3));\n          }\n          50% {\n            filter: drop-shadow(0 0 30px rgba(255, 68, 68, 0.6));\n          }\n        }\n\n        @media (max-width: 768px) {\n          .death-screen-container {\n            padding: 20px;\n          }\n\n          .game-over-image {\n            max-width: 350px;\n          }\n\n          .return-menu-image {\n            max-width: 250px;\n          }\n\n          .death-reason {\n            font-size: 1.2rem;\n          }\n\n          .death-score {\n            font-size: 1rem;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .game-over-image {\n            max-width: 280px;\n          }\n\n          .return-menu-image {\n            max-width: 200px;\n          }\n\n          .death-reason {\n            font-size: 1rem;\n          }\n\n          .death-score {\n            font-size: 0.9rem;\n          }\n        }\n      "})]}):null};gV.propTypes={isVisible:xz.bool.isRequired,deathData:xz.object,onComplete:xz.func.isRequired};const yV=yi.forwardRef((function({currentActiveScene:e,showModal:t,autoStart:s=!1,onReturnToMainMenu:n},i){const a=yi.useRef(),{gameManager:r}=XC(),o=yi.useRef(!1),[l,c]=yi.useState(!1),[h,u]=yi.useState(null);return yi.useLayoutEffect((()=>{var e;return void 0===a.current&&(a.current=((e,t=null,s=!1)=>{console.log("Initializing Phaser game...",{parent:e,autoStartGame:s});const n=t||new QC,i={...pV,parent:e};return mV=new Phaser.Game(i),mV.registry.set("gameManager",n),console.log("GameManager initialized and registered with Phaser"),mV.scene.add("Boot",fV,!0),mV.scene.add("Preload",Az),mV.scene.add("Level",kz),mV.scene.add("MainMapScene",iV),mV.scene.add("MiniMapDarkForastScene",rV),mV.scene.add("MiniMapBossFightScene",oV),mV.scene.add("MiniMapBeachScene",uV),mV.scene.add("MiniMapLavaScene",dV),window.game=mV,window.EventBus=PC,PC.on("return-to-menu",(()=>{console.log("Return to menu event received"),n&&n.isGameRunning&&n.handlePlayerDeath("Manual Exit"),PC.emit("game-stopped")})),PC.on("change-scene",((e,t)=>{console.log(`Changing scene to: ${e}`),mV.scene.isActive(e)?mV.scene.restart(e,t):mV.scene.start(e,t)})),PC.on("player-health-update",(e=>{PC.emit("player-health-updated",e)})),PC.on("game-state-update",(e=>{PC.emit("game-state-updated",e),window.dispatchEvent(new CustomEvent("gameStateUpdated",{detail:e}))})),s&&setTimeout((()=>{n&&n.startNewRun(),mV.scene.start("MainMapScene")}),1e3),mV})("game-container",r,!1),null!==i&&(i.current={game:a.current,scene:null,gameManager:r,startGame:()=>{console.log("Manual game start triggered"),a.current&&r&&!o.current&&(o.current=!0,r.applyPassiveUpgrades&&r.applyPassiveUpgrades(),r.startNewRun&&r.startNewRun(),setTimeout((()=>{a.current.scene.start("MainMapScene"),PC.emit("game-started")}),100))},stopGame:()=>{console.log("Manual game stop triggered"),a.current&&o.current&&(o.current=!1,a.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&a.current.scene.stop(e.key)})),r&&r.isGameRunning&&r.handlePlayerDeath("Manual Exit"),PC.emit("game-stopped"))},pauseGame:()=>{a.current&&o.current&&(a.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&a.current.scene.pause(e.key)})),PC.emit("game-paused"))},resumeGame:()=>{a.current&&o.current&&(a.current.scene.getScenes(!1).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&a.current.scene.resume(e.key)})),PC.emit("game-resumed"))},getCurrentScene:()=>a.current&&a.current.scene.getScenes(!0).find((e=>"Boot"!==e.key&&"Preload"!==e.key))||null}),s&&(null==(e=null==i?void 0:i.current)?void 0:e.startGame)&&setTimeout((()=>{i.current.startGame()}),100)),()=>{a.current&&(console.log("Destroying Phaser game"),o.current=!1,a.current.destroy(!0),a.current=void 0)}}),[i,r,s]),yi.useEffect((()=>{const s=t=>{var s,n;console.log("Scene ready:",null==(s=null==t?void 0:t.scene)?void 0:s.key),e&&"function"==typeof e&&e(t),i&&i.current&&(i.current.scene=t),"MainMapScene"===(null==(n=null==t?void 0:t.scene)?void 0:n.key)&&PC.emit("main-scene-started")},n=e=>{console.log("Player death detected:",e),o.current=!1,u(e),a.current&&a.current.scene.getScenes(!0).forEach((e=>{"Boot"!==e.key&&"Preload"!==e.key&&a.current.scene.stop(e.key)})),c(!0),PC.emit("game-over",e)},r=()=>{var e;console.log("Return to menu requested"),(null==(e=null==i?void 0:i.current)?void 0:e.stopGame)&&i.current.stopGame(),PC.emit("return-to-menu")},l=()=>{t&&t("PAUSE_MENU")};return PC.on("current-scene-ready",s),PC.on("player-died",n),PC.on("return-to-menu",r),PC.on("pause-game",l),window.addEventListener("playerDeath",(e=>n(e.detail))),window.addEventListener("returnToMenu",r),()=>{PC.removeListener("current-scene-ready",s),PC.removeListener("player-died",n),PC.removeListener("return-to-menu",r),PC.removeListener("pause-game",l),window.removeEventListener("playerDeath",(e=>n(e.detail))),window.removeEventListener("returnToMenu",r)}}),[e,t,i]),yi.useEffect((()=>{const e=e=>{"Escape"===e.key&&o.current&&PC.emit("pause-game")};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("div",{id:"game-container",className:"game-container",style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#242424",margin:0,padding:0,overflow:"hidden"}}),Pi.jsx(gV,{isVisible:l,deathData:h,onComplete:()=>{c(!1),u(null),n&&"function"==typeof n?n():(console.log("No onReturnToMainMenu function provided"),PC.emit("navigate-to-main-menu"))},loadingDuration:3e3})]})}));yV.propTypes={currentActiveScene:xz.func,showModal:xz.func,autoStart:xz.bool,onReturnToMainMenu:xz.func};class bV{constructor(){this.gameManager=null,this.currentScene=null,this.isConnected=!1,this.sessionId=null,this.sessionEnding=!1,this.lastSyncTime=0,this.syncInterval=5e3,this.maps=[],this.mapsLoading=!1,this.mapsError=null,this.batchDataCache={sessionId:null,mobKills:new Map,skillUsage:new Map,consumablesUsed:0},this.lastBatchSendTime=0,this.batchSendInterval=1e4,this.setupMutations(),this.init(),this.fetchMaps()}init(){this.startPolling(),this.setupEventEnhancement(),this.isConnected=!0,console.log("GameBridge connected"),console.log("GameBridge: Mutations setup complete"),PC.emit("bridge-connected")}startPolling(){setInterval((()=>{this.updateGameReferences(),this.syncGameData()}),100)}updateGameReferences(){var e,t,s,n,i;const a=null==(t=null==(e=window.game)?void 0:e.registry)?void 0:t.get("gameManager"),r=window.gameManager,o=null==(s=window.currentGameScene)?void 0:s.gameManager,l=a||r||o||null;l&&l!==this.gameManager&&(this.gameManager=l,console.log("GameBridge: GameManager connected"));const c=null==(i=null==(n=window.game)?void 0:n.scene)?void 0:i.getScene("MainMapScene"),h=window.currentGameScene,u=c||h||null;u&&u!==this.currentScene&&(this.currentScene=u,console.log("GameBridge: Scene connected"),(u.player||u.playerPrefab)&&(this.player=u.player||u.playerPrefab,console.log("GameBridge: Player connected")))}syncGameData(){if(!this.gameManager||!this.currentScene)return;const e=this.getPlayerData();PC.emit("bridge-player-data",e);const t=this.getGameProgress();PC.emit("bridge-game-progress",t);const s=Date.now();this.sessionId&&s-this.lastSyncTime>this.syncInterval&&(this.syncToBackend(e,t),this.lastSyncTime=s),this.checkForMobKills(),this.sessionId&&s-this.lastBatchSendTime>this.batchSendInterval?(console.log("GameBridge: Batch sync interval reached, attempting to send batch data"),this.sendBatchDataToBackend(),this.lastBatchSendTime=s):s%3e4<100&&(console.log("GameBridge: Batch sync debug - sessionId:",!!this.sessionId,"timeSinceLastBatch:",s-this.lastBatchSendTime,"interval:",this.batchSendInterval),console.log("GameBridge: Current batch data cache:",{mobKills:this.batchDataCache.mobKills.size,skillUsage:this.batchDataCache.skillUsage.size,consumables:this.batchDataCache.consumablesUsed}))}getPlayerData(){var e,t,s;const n={health:100,maxHealth:100,healthPercentage:100,experience:0,maxExperience:100,level:1,experiencePercentage:0,gold:500,isAlive:!0,isInGame:!1},i=this.player||(null==(e=this.currentScene)?void 0:e.player)||(null==(t=this.currentScene)?void 0:t.playerPrefab);if(i&&(n.health=void 0!==i.health?i.health:n.health,n.maxHealth=void 0!==i.maxHealth?i.maxHealth:n.maxHealth,n.isAlive=!1!==i.alive&&i.health>0),null==(s=this.gameManager)?void 0:s.playerStats){const e=this.gameManager.playerStats;n.health=void 0!==e.health?e.health:n.health,n.maxHealth=void 0!==e.maxHealth?e.maxHealth:n.maxHealth,n.experience=void 0!==e.experience?e.experience:n.experience,n.maxExperience=void 0!==e.nextLevelExp?e.nextLevelExp:n.maxExperience,n.level=void 0!==e.level?e.level:n.level}return this.gameManager&&(n.gold=void 0!==this.gameManager.gold?this.gameManager.gold:n.gold,n.isInGame=this.gameManager.isGameRunning||!1),n.healthPercentage=n.maxHealth>0?Math.max(0,n.health/n.maxHealth*100):0,n.experiencePercentage=n.maxExperience>0?n.experience/n.maxExperience*100:0,n}getGameProgress(){var e,t,s,n,i;const a={gameTime:0,formattedTime:"00:00",currentWave:1,survivalTime:0,isGameRunning:!1};if(this.gameManager&&(a.survivalTime=this.gameManager.getCurrentSurvivalTime(),a.isGameRunning=this.gameManager.isGameRunning),null==(t=null==(e=this.currentScene)?void 0:e.uiManager)?void 0:t.timer){const e=this.currentScene.uiManager.timer.elapsed||0;a.gameTime=e;const t=Math.floor(e/60),s=Math.floor(e%60);a.formattedTime=`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}return(null==(n=null==(s=this.currentScene)?void 0:s.uiManager)?void 0:n.lastWave)?a.currentWave=this.currentScene.uiManager.lastWave:(null==(i=this.currentScene)?void 0:i.currentWave)&&(a.currentWave=this.currentScene.currentWave),a}setupEventEnhancement(){PC.on("player-health-updated",(e=>{const t={...e,percentage:e.maxHP>0?e.currentHP/e.maxHP*100:0,isLowHealth:e.currentHP<.25*e.maxHP,isCritical:e.currentHP<.1*e.maxHP};PC.emit("bridge-health-updated",t)})),PC.on("player-gold-updated",(e=>{const t={...e,formatted:this.formatNumber(e.gold||0)};PC.emit("bridge-gold-updated",t)})),PC.on("game-started",(()=>{console.log("GameBridge: Game started event received"),this.startSession()})),PC.on("player-died",(e=>{console.log("GameBridge: Player death event received",e),this.endSession(e)})),PC.on("attack-used",(e=>{console.log("GameBridge: Attack used event received",e);const t="3c0f31b5-b7c9-4b10-9971-c0c9b2bb0fff";console.log("GameBridge: Adding skill usage for:",t),this.addSkillUsage(t)})),this.lastKnownKills=0,PC.on("mob-killed",(e=>{console.log("GameBridge: Mob killed event received",e),this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592")})),PC.on("enemy-defeated",(e=>{console.log("GameBridge: Enemy defeated event received",e),this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592")})),PC.on("consumable-used",(e=>{console.log("GameBridge: Consumable used event received",e),this.addConsumableUsed()})),PC.on("item-consumed",(e=>{console.log("GameBridge: Item consumed event received",e),"consumable"!==e.type&&"consumable"!==e.category||this.addConsumableUsed()})),PC.on("health-potion-used",(e=>{console.log("GameBridge: Health potion used event received",e),this.addConsumableUsed()}))}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}setupMutations(){console.log("GameBridge: Setting up mutations for API calls"),this.startSessionMutation={mutationFn:IC,onSuccess:e=>{console.log("GameBridge: Start session mutation success",e),this.sessionId=e.sessionId,this.lastSyncTime=Date.now(),PC.emit("bridge-session-started",{sessionId:this.sessionId})},onError:e=>{console.error("GameBridge: Start session mutation error",e)}},this.saveCheckpointMutation={mutationFn:_C,onSuccess:(e,t)=>{console.log("GameBridge: Save checkpoint mutation success",e,t)},onError:(e,t)=>{console.error("GameBridge: Save checkpoint mutation error",e,t)}},this.endSessionMutation={mutationFn:NC,onSuccess:(e,t)=>{console.log("GameBridge: End session mutation success",e,t),PC.emit("bridge-session-ended",{sessionId:this.sessionId,deathData:t}),this.sessionId=null},onError:(e,t)=>{console.error("GameBridge: End session mutation error",e,t)}}}async startSession(){var e;try{console.log("GameBridge: Starting session...");const t=this.getMainMap(),s=t?t.id:"87224afa-25e3-4bce-8fce-0981f854e6b6",n={userId:this.getCurrentUserId(),mapId:s};console.log("GameBridge: Session data prepared",n);const i=await IC(n);console.log("GameBridge: Session API response",i),this.sessionId=null==(e=i.data)?void 0:e.id,this.lastSyncTime=Date.now(),this.lastBatchSendTime=Date.now(),this.resetBatchData(),this.lastKnownKills=0,console.log("GameBridge: Session started successfully!"),console.log("GameBridge: Session ID:",this.sessionId),console.log("GameBridge: Session data:",n),PC.emit("bridge-session-started",{sessionId:this.sessionId})}catch(t){console.error("GameBridge: Failed to start session",t),console.error("GameBridge: Error details",t.message,t.stack)}}async syncToBackend(e,t){if(this.sessionId)try{console.log("GameBridge: Starting backend sync...");const t={sessionId:this.sessionId,xp:e.experience||0,gold:e.gold||0,position:this.getPlayerPosition(),skillsUsed:this.getSkillsUsedWithCounts()};console.log("GameBridge: Checkpoint data prepared",t);const s=await _C(t);console.log("GameBridge: Checkpoint API response",s),console.log("GameBridge: Checkpoint saved:",t)}catch(s){console.error("GameBridge: Failed to save checkpoint",s),console.error("GameBridge: Checkpoint error details",s.message,s.stack)}else console.log("GameBridge: No session ID available for sync")}getPlayerPosition(){var e;return(null==(e=this.currentScene)?void 0:e.player)?`x${Math.floor(this.currentScene.player.x||0)}y${Math.floor(this.currentScene.player.y||0)}`:this.player?`x${Math.floor(this.player.x||0)}y${Math.floor(this.player.y||0)}`:"x0y0"}getSkillsUsedWithCounts(){var e,t,s;return(null==(t=null==(e=this.gameManager)?void 0:e.playerStats)?void 0:t.skillsUsed)?this.gameManager.playerStats.skillsUsed.map((e=>({skillId:e.skillId,uses:e.uses||e.count||1}))):(null==(s=this.currentScene)?void 0:s.skillsUsed)?this.currentScene.skillsUsed:[]}async endSession(e={}){if(this.sessionEnding)console.log("GameBridge: Session already ending, ignoring duplicate call");else{this.sessionId||console.log("GameBridge: No session ID available, but still sending death data"),this.sessionEnding=!0;try{console.log("GameBridge: Ending session...",e);const t={userId:this.getCurrentUserId(),deathReason:this.getDeathReason(e),causeOfDeath:this.getDeathReason(e),survivalTime:e.survivalTime||this.getGameProgress().survivalTime||0,enemiesKilled:e.enemiesKilled||0,goldEarned:e.goldEarned||0,maxLevel:e.maxLevel||1,kills:this.formatKillsData(e),skillsUsed:this.getSkillsUsed(),perfectRun:this.isPerfectRun(e),achievementPoints:this.calculateAchievementPoints(e)};console.log("GameBridge: Death payload prepared",t),console.log("GameBridge: Attempting to send death data to API...");const s=await NC(t);console.log("GameBridge: End session API response",s),console.log("GameBridge: Session ended with death data:",t),PC.emit("bridge-session-ended",{sessionId:this.sessionId,deathData:t}),await this.forceSendBatchData(),PC.emit("invalidate-dashboard-data"),console.log("GameBridge: Dashboard data invalidation requested"),this.sessionId=null}catch(t){console.error("GameBridge: Failed to end session",t),console.error("GameBridge: End session error details",t.message,t.stack)}finally{this.sessionEnding=!1}}}getCurrentUserId(){const e=localStorage.getItem("access_token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));return t.userId||t.sub}catch(RV){console.warn("Failed to parse user ID from token")}return null}getCurrentMapId(){var e,t,s,n;return(null==(e=this.currentScene)?void 0:e.mapId)?this.currentScene.mapId:(null==(s=null==(t=this.currentScene)?void 0:t.scene)?void 0:s.key)?this.getMapIdFromSceneKey(this.currentScene.scene.key):(null==(n=this.gameManager)?void 0:n.currentMapId)?this.gameManager.currentMapId:"a1b32a8b-0ff3-432c-b787-dd1713f580d9"}getMapIdFromSceneKey(e){return{MainMapScene:"a1b32a8b-0ff3-432c-b787-dd1713f580d9",MiniMapBeachScene:"b2c43b9c-1aa4-543d-c898-ee2824g691ea",MiniMapDarkForastScene:"c3d54cad-2bb5-654e-d9a9-ff3935h7a2fb",MiniMapLavaScene:"d4e65dbe-3cc6-765f-eaba-004046i8b3gc",MiniMapBossFightScene:"e5f76ecf-4dd7-876g-fbc-115157j9c4hd"}[e]||"a1b32a8b-0ff3-432c-b787-dd1713f580d9"}getDeathReason(e){return e.deathReason?e.deathReason:0===e.enemiesKilled?"You barely survived the first wave":e.survivalTime<30?"Quick death, better luck next time":"You have failed emperor"}formatKillsData(e){const t=[];return e.enemiesKilled&&t.push({type:"regular",count:e.enemiesKilled}),e.bossKills&&t.push({type:"boss",count:e.bossKills}),0===t.length&&t.push({type:"regular",count:0}),t}getSkillsUsed(){var e,t,s;return(null==(t=null==(e=this.gameManager)?void 0:e.playerStats)?void 0:t.skillsUsed)?this.gameManager.playerStats.skillsUsed.map((e=>({skillId:e.skillId,tier:e.tier||e.level||1}))):(null==(s=this.currentScene)?void 0:s.skillsUsed)?this.currentScene.skillsUsed.map((e=>({skillId:e.skillId,tier:e.tier||e.level||1}))):[]}isPerfectRun(e){const t=this.getPlayerData();return t.health===t.maxHealth&&e.survivalTime>60&&e.enemiesKilled>10}calculateAchievementPoints(e){let t=0;return t+=10*(e.survivalTime||0),t+=100*(e.enemiesKilled||0),t+=1e3*(e.bossKills||0),this.isPerfectRun(e)&&(t*=2),t}async fetchMaps(){this.mapsLoading=!0,this.mapsError=null;try{console.log("GameBridge: Fetching maps...");const e=await TC();this.maps=e||[],console.log("GameBridge: Maps fetched successfully",this.maps.data),PC.emit("bridge-maps-loaded",this.maps)}catch(e){console.error("GameBridge: Failed to fetch maps",e),this.mapsError=e.message||"Failed to fetch maps",PC.emit("bridge-maps-error",this.mapsError)}finally{this.mapsLoading=!1}}getMaps(){return{data:this.maps,loading:this.mapsLoading,error:this.mapsError}}getMapById(e){return this.maps.find((t=>t.id===e))||null}getMainMap(){var e;const t=Array.isArray(this.maps)?this.maps:(null==(e=this.maps)?void 0:e.data)||[];return t.find((e=>{var t,s;return e.isMain||(null==(t=e.name)?void 0:t.toLowerCase().includes("main"))||"main"===(null==(s=e.type)?void 0:s.toLowerCase())}))||t[0]}getCurrentMap(){const e=this.getCurrentMapId();return this.getMapById(e)}async refreshMaps(){await this.fetchMaps()}getGameState(){return{player:this.getPlayerData(),progress:this.getGameProgress(),connected:this.isConnected,sessionId:this.sessionId,maps:this.getMaps()}}isGameReady(){return!(!this.gameManager||!this.currentScene)}async forceSyncToBackend(){if(!this.sessionId)return void console.warn("GameBridge: No active session to sync");console.log("GameBridge: Force sync requested");const e=this.getPlayerData(),t=this.getGameProgress();console.log("GameBridge: Force sync data",{playerData:e,gameProgress:t}),await this.syncToBackend(e,t)}getSessionInfo(){return{sessionId:this.sessionId,isActive:!!this.sessionId,lastSyncTime:this.lastSyncTime}}addMobKill(e){if(!e)return;const t=this.batchDataCache.mobKills.get(e)||0;this.batchDataCache.mobKills.set(e,t+1),console.log(`GameBridge: Mob kill tracked - ${e}, count: ${t+1}`)}addSkillUsage(e){if(!e)return;const t=this.batchDataCache.skillUsage.get(e)||0;this.batchDataCache.skillUsage.set(e,t+1),console.log(`GameBridge: Skill usage tracked - ${e}, count: ${t+1}`)}addConsumableUsed(){this.batchDataCache.consumablesUsed+=1,console.log(`GameBridge: Consumable used tracked, total: ${this.batchDataCache.consumablesUsed}`)}resetBatchData(){this.batchDataCache.mobKills.clear(),this.batchDataCache.skillUsage.clear(),this.batchDataCache.consumablesUsed=0,this.batchDataCache.sessionId=this.sessionId,console.log("GameBridge: Batch data cache reset")}getBatchDataPayload(){const e=Array.from(this.batchDataCache.mobKills.entries()).map((([e,t])=>({mobId:e,count:t}))),t=Array.from(this.batchDataCache.skillUsage.entries()).map((([e,t])=>({skillId:e,count:t})));return{sessionId:this.sessionId||this.batchDataCache.sessionId,mobKills:e,skillUsage:t,consumablesUsed:this.batchDataCache.consumablesUsed}}async sendBatchDataToBackend(){if(console.log("GameBridge: sendBatchDataToBackend called"),console.log("GameBridge: sessionId:",this.sessionId),console.log("GameBridge: batchDataCache.sessionId:",this.batchDataCache.sessionId),!this.sessionId&&!this.batchDataCache.sessionId)return void console.log("GameBridge: No session ID available for batch data sync - EXITING");const e=this.getBatchDataPayload();if(console.log("GameBridge: Generated batch payload:",e),0===e.mobKills.length&&0===e.skillUsage.length&&0===e.consumablesUsed)return console.log("GameBridge: No meaningful batch data to send - EXITING"),console.log("GameBridge: - mobKills:",e.mobKills.length),console.log("GameBridge: - skillUsage:",e.skillUsage.length),void console.log("GameBridge: - consumablesUsed:",e.consumablesUsed);try{console.log("GameBridge: Attempting to send batch data...",e);const t=await(async e=>{try{return(await jv.post("/log-batch-events",e)).data}catch(t){throw console.error("Failed to send batch data:",t),t}})(e);console.log("GameBridge: Batch data sent successfully",t),this.resetBatchData(),PC.emit("bridge-batch-data-sent",{payload:e,response:t})}catch(t){console.error("GameBridge: Failed to send batch data",t),console.error("GameBridge: Error details:",t.message,t.stack),PC.emit("bridge-batch-data-error",{error:t,payload:e})}}async forceSendBatchData(){console.log("GameBridge: Force batch data send requested"),await this.sendBatchDataToBackend()}addTestBatchData(){console.log("GameBridge: Adding test batch data"),this.addMobKill("test-goblin"),this.addMobKill("test-skeleton"),this.addSkillUsage("test-fireball"),this.addSkillUsage("test-heal"),this.addConsumableUsed(),console.log("GameBridge: Test data added, current cache:",this.getBatchDataPayload())}logBatchDataStructure(){const e=this.getBatchDataPayload();return console.log("=== BATCH DATA STRUCTURE ==="),console.log("sessionId:",e.sessionId),console.log("mobKills:",e.mobKills),console.log("skillUsage:",e.skillUsage),console.log("consumablesUsed:",e.consumablesUsed),console.log("=== JSON STRUCTURE ==="),console.log(JSON.stringify(e,null,2)),e}checkForMobKills(){if(!this.gameManager||!this.gameManager.lastRunStats)return;const e=this.gameManager.lastRunStats.enemiesKilled||0;if(e>this.lastKnownKills){const t=e-this.lastKnownKills;console.log(`GameBridge: Detected ${t} new mob kills (${this.lastKnownKills} -> ${e})`);for(let e=0;e<t;e++)this.addMobKill("065666a3-41cb-4f51-a4c8-4b74a04eb592");this.lastKnownKills=e}}}let vV=null;const wV=()=>(vV||(vV=new bV,window.bridgeInstance=vV,window.getBridge=wV),vV),xV=({showGoldIcon:e=!0})=>{const[t,s]=yi.useState({currentHP:100,maxHP:100,gold:500,kills:0}),[n,i]=yi.useState(!0),[a,r]=yi.useState(!1),o=yi.useRef(!1);if(yi.useEffect((()=>{const e=e=>{console.log("HPBar: Health update received:",e),s((t=>({...t,currentHP:e.currentHP||e.health||e.hp||t.currentHP,maxHP:e.maxHP||e.maxHealth||e.maxHp||t.maxHP}))),r(!0),o.current=!0,i(!0)},t=e=>{if(s((t=>({currentHP:e.health||t.currentHP,maxHP:e.maxHealth||t.maxHP,gold:e.gold||t.gold,kills:e.kills||e.enemiesKilled||t.kills}))),e.health>0&&e.maxHealth>0)return r(!0),o.current=!0,void i(!0);o.current||!1!==e.isInGame&&!1!==e.isAlive?!1!==e.isInGame&&i(!0):(i(!1),r(!1),o.current=!1)},n=e=>{s((t=>({...t,gold:e.gold||e.totalGold||t.gold})))},a=e=>{s((t=>({...t,kills:e.kills||e.enemiesKilled||t.kills+1})))},l=e=>{if(e&&e.detail){const{currentRunStats:t}=e.detail;t&&s((e=>({...e,kills:t.enemiesKilled||e.kills})))}};PC.on("player-health-updated",e),PC.on("player-hp-changed",e),PC.on("bridge-player-data",t),PC.on("player-gold-updated",n),PC.on("bridge-gold-updated",n),PC.on("player-kill-updated",a),PC.on("enemy-killed",a),PC.on("game-state-updated",l);const c=()=>{console.log("HPBar: Game started - showing HP bar and marking as active"),r(!0),o.current=!0,i(!0),s((e=>({...e,kills:0})))},h=()=>{console.log("HPBar: Game ended - marking as inactive"),r(!1),o.current=!1};PC.on("game-started",c),PC.on("main-scene-started",c),PC.on("current-scene-ready",c),PC.on("new-run-started",c),PC.on("player-death",h),PC.on("game-ended",h);const u=wV().getGameState();u&&u.player&&t(u.player);const d=setTimeout((()=>{console.log("HPBar: Fallback timer - ensuring HP bar is visible"),i(!0)}),2e3);return()=>{clearTimeout(d),PC.off("player-health-updated",e),PC.off("player-hp-changed",e),PC.off("bridge-player-data",t),PC.off("player-gold-updated",n),PC.off("bridge-gold-updated",n),PC.off("player-kill-updated",a),PC.off("enemy-killed",a),PC.off("game-state-updated",l),PC.off("game-started",c),PC.off("main-scene-started",c),PC.off("current-scene-ready",c),PC.off("new-run-started",c),PC.off("player-death",h),PC.off("game-ended",h)}}),[]),!n)return null;const l=Math.max(0,Math.min(100,t.currentHP/t.maxHP*100)),c=l<25,h=l<10;return Pi.jsx("div",{children:n&&Pi.jsxs("div",{style:{position:"fixed",top:"2vh",left:"2vw",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px"},children:[Pi.jsxs("div",{style:{position:"relative",width:"300px",height:"50px"},children:[Pi.jsx("div",{style:{position:"absolute",top:"0px",left:"0px",width:"200%",height:"250%",backgroundImage:"url(/assets/HUD/HUD_HP_BG_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),Pi.jsx("div",{style:{position:"absolute",top:"26px",left:"60px",width:`calc((165% - 24px) * ${l/100})`,height:"calc(140% - 12px)",backgroundColor:l>50?"#4CAF50":l>25?"#FF9800":"#F44336",borderRadius:"3px",zIndex:2,transition:"width 0.3s ease-in-out, background-color 0.3s ease-in-out"}}),Pi.jsx("div",{style:{position:"absolute",top:"26px",left:"60px",width:"160%",height:"140%",backgroundImage:"url(./assets/HUD/HUD_HP_Indicator_Frame_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:3}}),Pi.jsxs("div",{style:{position:"absolute",top:"130%",left:"100%",transform:"translate(-50%, -50%)",color:c?"#ff6b6b":"white",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:4,pointerEvents:"none"},children:[Math.ceil(t.currentHP),"/",t.maxHP]}),c&&Pi.jsx("div",{style:{position:"absolute",top:"55px",left:"150px",transform:"translateX(-50%)",color:h?"#ff4444":"#ff8844",fontSize:"12px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.9)",zIndex:4},children:h?"CRITICAL!":"LOW HEALTH!"})]}),e&&Pi.jsxs("div",{style:{display:"flex",alignItems:"right",gap:"15px",marginTop:"65px",marginLeft:"40px"},children:[Pi.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"rgba(0,0,0,0.7)",padding:"10px 25px",borderRadius:"25px",border:"2px solid #FFD700",minWidth:"150px",marginTop:"10px"},children:[Pi.jsx("div",{style:{width:"30px",height:"30px",backgroundImage:"url(./assets/HUD/HUD_Gold_Icon_V01.png)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",marginTop:"0px"}}),Pi.jsx("span",{style:{color:"#FFD700",fontSize:"20px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginTop:"4px"},children:t.gold.toLocaleString()})]}),Pi.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"rgba(0,0,0,0.7)",padding:"10px 25px",borderRadius:"25px",border:"2px solid #ff6b6b",marginTop:"10px",minWidth:"150px"},children:[Pi.jsx("div",{style:{width:"30px",height:"30px",borderRadius:"50%",display:"flex",marginTop:"4px",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"bold",color:"white",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:""}),Pi.jsx("span",{style:{color:"#ff6b6b",fontSize:"20px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",minWidth:"80px",marginTop:"4px"},children:t.kills.toLocaleString()})]})]})]})})},kV=()=>{const[e,t]=yi.useState({currentExp:0,maxExp:100,level:1}),[s,n]=yi.useState([]),[i,a]=yi.useState({}),[r,o]=yi.useState({}),[l,c]=yi.useState({}),[h,u]=yi.useState(!0),d=yi.useRef({}),p={slash:{name:"Slash Attack",icon:"/upgrade-icon/icon_slash.png",glowIcon:"/upgrade-icon/icon_slash_glow_effect.png",defaultCooldown:1e3,keybind:"1"},fireBullet:{name:"Fire Arrow",icon:"/upgrade-icon/icon_fire_arrow.png",glowIcon:"/upgrade-icon/icon_fire_arrow_glow_effect.png",defaultCooldown:800,keybind:"2"},fireBomb:{name:"Fire Ball",icon:"/upgrade-icon/icon_fire_ball.png",glowIcon:"/upgrade-icon/icon_fire_ball_glow_effect.png",defaultCooldown:2500,keybind:"3"},ice:{name:"Ice Shard",icon:"/upgrade-icon/icon_ice_shard.png",glowIcon:"/upgrade-icon/icon_ice_shard_glow_effect.png",defaultCooldown:1600,keybind:"4"},lightning:{name:"Lightning Chain",icon:"/upgrade-icon/icon_lightning_chain.png",glowIcon:"/upgrade-icon/icon_lightning_chain_glow_effect.png",defaultCooldown:2e3,keybind:"5"},blindingLight:{name:"Holy Light",icon:"/upgrade-icon/icon_holy_light-.png",glowIcon:"/upgrade-icon/icon_holy_light_glow_effect.png",defaultCooldown:6e3,keybind:"6"},marksman:{name:"Marksman Shot",icon:"/upgrade-icon/icon_marksman.png",glowIcon:"/upgrade-icon/icon_marksman_glow_effect.png",defaultCooldown:3300,keybind:"7"}},f=()=>{Object.keys(d.current).forEach((e=>{d.current[e]&&(clearInterval(d.current[e]),delete d.current[e])}))},m=e=>{d.current[e]&&(clearInterval(d.current[e]),delete d.current[e])};yi.useEffect((()=>{const e=e=>{t((t=>({...t,currentExp:e.currentExp??e.experience??e.exp??t.currentExp,maxExp:e.maxExp??e.maxExperience??e.maxExp??t.maxExp,level:e.level??e.lvl??t.level})))},s=e=>{t((t=>({...t,currentExp:e.currentExp??e.experience??e.exp??t.currentExp,maxExp:e.maxExp??e.maxExperience??e.maxExp??t.maxExp,level:e.level??e.lvl??t.level})))},n=e=>{e.skillLevels&&(c(e.skillLevels),g(e.skillLevels))},i=e=>{const{skillKey:t,cooldown:s}=e;t&&p[t]&&s&&!isNaN(s)&&s>0&&(o((e=>({...e,[t]:s}))),a((e=>({...e,[t]:s}))),(e=>{m(e);const t=setInterval((()=>{a((t=>{const s=t[e];if(!s||s<=0){m(e);const{[e]:s,...n}=t;return n}const n=Math.max(0,s-100);return{...t,[e]:n}}))}),100);d.current[e]=t})(t))},r=e=>{const t={slash:"slash",fireBullet:"fireBullet",fireBomb:"fireBomb",ice:"ice",lightning:"lightning",blindingLight:"blindingLight",marksman:"marksman"}[e.attackType||e.type];if(t&&p[t]){const s=e.cooldown||p[t].defaultCooldown;!isNaN(s)&&s>0&&i({skillKey:t,cooldown:s})}},l=()=>{u(!0)},h=()=>{u(!1),f(),a({}),o({})},y=()=>{u(!1),f(),a({}),o({})};PC.on("player-exp-updated",e),PC.on("player-experience-updated",e),PC.on("player-stats-updated",s),PC.on("skill-levels-updated",n),PC.on("skill-used",i),PC.on("attack-used",r),PC.on("player-attack-used",r),PC.on("game-started",l),PC.on("game-stopped",h),PC.on("player-death",y),PC.on("main-scene-started",l);const b=t=>{t.detail&&e(t.detail)},v=e=>{e.detail&&s(e.detail)},w=e=>{e.detail&&n(e.detail)},x=e=>{e.detail&&r(e.detail)};return window.addEventListener("playerExpUpdated",b),window.addEventListener("playerExperienceUpdated",b),window.addEventListener("playerStatsUpdated",v),window.addEventListener("skillLevelsUpdated",w),window.addEventListener("playerDeath",y),window.addEventListener("attackUsed",x),window.addEventListener("playerAttackUsed",x),()=>{f(),PC.removeListener("player-exp-updated",e),PC.removeListener("player-experience-updated",e),PC.removeListener("player-stats-updated",s),PC.removeListener("skill-levels-updated",n),PC.removeListener("skill-used",i),PC.removeListener("attack-used",r),PC.removeListener("player-attack-used",r),PC.removeListener("game-started",l),PC.removeListener("game-stopped",h),PC.removeListener("player-death",y),PC.removeListener("main-scene-started",l),window.removeEventListener("playerExpUpdated",b),window.removeEventListener("playerExperienceUpdated",b),window.removeEventListener("playerStatsUpdated",v),window.removeEventListener("skillLevelsUpdated",w),window.removeEventListener("playerDeath",y),window.removeEventListener("attackUsed",x),window.removeEventListener("playerAttackUsed",x)}}),[]);const g=e=>{const t=Object.keys(p).filter((t=>e[t]>0)).slice(0,7);n(t)};if(!h)return null;const y=Math.max(0,Math.min(100,e.currentExp/e.maxExp*100));return Pi.jsxs("div",{style:{position:"fixed",bottom:"3vh",left:"50%",transform:"translateX(-50%)",zIndex:9999},children:[Pi.jsxs("div",{style:{position:"relative",width:"600px",height:"180px"},children:[Pi.jsx("div",{style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",backgroundImage:"url(/assets/HUD/HUD_Skill_Table_XP_BG_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:2}}),Pi.jsx("div",{style:{position:"absolute",left:"48px",top:"26px",width:`calc((26.3vw) * ${y/100})`,height:"24px",backgroundImage:"url(/assets/HUD/HUD_Skill_Table_XP_Indicator_Animation_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1,transition:"width 0.5s ease-in-out"}}),Pi.jsx("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"15px",zIndex:2},children:[1,2,3,4,5,6,7].map((e=>{const t=s[e-1],n=t?p[t]:null,a=t&&i[t]&&i[t]>0&&!isNaN(i[t]),o=t?(e=>{const t=i[e],s=r[e];return!t||!s||isNaN(t)||isNaN(s)||t<=0||s<=0?0:Math.min(100,Math.max(0,t/s*100))})(t):0,c=t?l[t]:0,h=t?(e=>{const t=i[e];if(!t||t<=0||isNaN(t))return"";const s=Math.ceil(t/1e3);return s>0?s.toString():""})(t):"";return Pi.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",backgroundColor:n?"rgba(30, 30, 30, 0.8)":"rgba(0,0,0,0.5)",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s ease",boxShadow:n&&!a?"0 0 10px rgba(255, 215, 0, 0.3)":"none"},title:n?`${n.name} (Auto) - Level ${c}`:`Skill Slot ${e}`,children:[n&&Pi.jsx("img",{src:n.icon,alt:n.name,style:{width:"60px",height:"60px",opacity:a?.5:1,filter:a?"grayscale(50%)":"none",transition:"all 0.2s ease"}}),a&&Pi.jsxs(Pi.Fragment,{children:[Pi.jsx("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:`${o}%`,backgroundColor:"rgba(0, 0, 0, 0.7)",transition:"height 0.1s ease-out",zIndex:3}}),h&&Pi.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#FF6B6B",fontSize:"16px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",zIndex:4},children:h})]}),n&&c>0&&Pi.jsx("div",{style:{position:"absolute",top:"-3px",right:"-3px",width:"18px",height:"18px",backgroundColor:"#4A90E2",border:"1px solid #FFD700",borderRadius:"50%",color:"white",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",zIndex:5},children:c}),n&&!a&&Pi.jsx("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundImage:`url(${n.glowIcon})`,backgroundSize:"80% 80%",backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:.3,animation:"skillGlow 2s ease-in-out infinite alternate",pointerEvents:"none",zIndex:1}})]},e)}))}),Pi.jsxs("div",{style:{position:"absolute",left:"24px",color:"#FFD700",fontSize:"20px",top:"-5px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:3,pointerEvents:"none"},children:["Lv.",e.level]}),Pi.jsxs("div",{style:{position:"absolute",top:"-5px",right:"24px",color:"white",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",zIndex:3,pointerEvents:"none"},children:[Math.floor(e.currentExp),"/",e.maxExp]})]}),Pi.jsx("style",{jsx:!0,children:"\n                @keyframes skillGlow {\n                    0% { opacity: 0.1; }\n                    100% { opacity: 0.4; }\n                }\n            "})]})},AV=()=>{const[e,t]=yi.useState("00:00"),[s,n]=yi.useState(1),[i,a]=yi.useState(!1);return yi.useEffect((()=>{const e=()=>{a(!0)},s=()=>{a(!1)},i=e=>{e.formattedTime&&t(e.formattedTime),void 0!==e.currentWave&&n(e.currentWave)},r=e=>{void 0!==e.wave&&n(e.wave)};return PC.on("timer-start",e),PC.on("timer-stop",s),PC.on("timer-updated",i),PC.on("wave-updated",r),PC.on("wave-notification",r),()=>{PC.off("timer-start",e),PC.off("timer-stop",s),PC.off("timer-updated",i),PC.off("wave-updated",r),PC.off("wave-notification",r)}}),[]),yi.useEffect((()=>(window.reactTimerState={time:e,currentWave:s,isGameRunning:i,getGameScene:()=>{var e,t,s,n,i;return(null==(t=null==(e=window.game)?void 0:e.scene)?void 0:t.getScene("MainMapScene"))||(null==(i=null==(n=null==(s=window.game)?void 0:s.scene)?void 0:n.scenes)?void 0:i.find((e=>"MainMapScene"===e.scene.key)))||window.currentGameScene}},()=>{delete window.reactTimerState})),[e,s,i]),Pi.jsx("div",{style:{position:"fixed",top:"2vh",left:"50%",transform:"translateX(-50%)",zIndex:9999},children:Pi.jsxs("div",{style:{position:"relative",width:"280px",height:"120px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Pi.jsx("div",{style:{position:"absolute",top:"0px",left:"50%",transform:"translateX(-50%)",width:"240px",height:"80px",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Top_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),Pi.jsx("div",{style:{position:"absolute",top:"35%",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:Pi.jsx("div",{style:{color:"white",fontSize:"40px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",letterSpacing:"1px"},children:e})}),Pi.jsx("div",{style:{position:"absolute",top:"65%",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3},children:Pi.jsxs("div",{style:{color:"#FFD700",fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",letterSpacing:"1px"},children:["WAVE ",s]})}),Pi.jsx("div",{style:{position:"absolute",top:"80%",left:"50%",transform:"translateX(-50%)",width:"200px",height:"60px",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Bottom_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",zIndex:1}}),!1]})})},EV=()=>{const[e,t]=yi.useState(null);return yi.useEffect((()=>{const e=e=>{const s={id:Date.now(),text:`WAVE ${e.wave||e.value||1}`,timestamp:Date.now()};t(s),setTimeout((()=>{t(null)}),3e3)};return PC.on("wave-notification",e),()=>{PC.removeListener("wave-notification",e)}}),[]),e?Pi.jsxs("div",{style:{position:"fixed",bottom:"20vh",left:"50%",transform:"translateX(-50%)",width:"220px",height:"80px",zIndex:1e4,pointerEvents:"none",backgroundImage:"url(/assets/HUD/HUD_Timer_Shroud_Top_V01.png)",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",display:"flex",alignItems:"center",justifyContent:"center",animation:"simpleFade 3s ease-in-out forwards"},children:[Pi.jsx("div",{style:{color:"#FFD700",marginTop:"5vh",fontSize:"20px",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,1)",letterSpacing:"1px",textAlign:"center",whiteSpace:"nowrap"},children:e.text}),Pi.jsx("style",{jsx:!0,children:"\n                @keyframes simpleFade {\n                    0% { opacity: 0; }\n                    20% { opacity: 1; }\n                    80% { opacity: 1; }\n                    100% { opacity: 0; }\n                }\n            "})]}):null},SV=({children:e})=>{const{user:t,isLoading:s}=Zv();return s?Pi.jsx("div",{children:"Loading..."}):t?e:Pi.jsx(Wg,{to:"/login",replace:!0})},PV=({children:e})=>{const{user:t,isLoading:s}=Zv();return s?Pi.jsx("div",{children:"Loading..."}):t?Pi.jsx(Wg,{to:"/",replace:!0}):e};function TV(){const e=yi.useRef(),[t,s]=yi.useState("menu"),[n,i]=yi.useState(!1),[a,r]=yi.useState(null),[o,l]=yi.useState(!1),[c,h]=yi.useState(null),[u,d]=yi.useState(3),{setGameControls:p}=Yv(),f=Mg(),m=Ig(),g=()=>{var t;s("playing"),i(!0),(null==(t=e.current)?void 0:t.startGame)&&e.current.startGame()},y=()=>{var t;s("menu"),i(!1),(null==(t=e.current)?void 0:t.stopGame)&&e.current.stopGame()};return yi.useEffect((()=>{p&&p({startGame:g,returnToMenu:y,gameState:t})}),[p,t]),yi.useEffect((()=>{"true"===new URLSearchParams(f.search).get("autostart")&&"menu"===t&&(console.log("Auto-starting game from URL parameter"),setTimeout((()=>{g()}),500))}),[f.search,t]),yi.useEffect((()=>{let e;return"paused"===t&&(e=setTimeout((()=>{s("playing")}),3e3)),()=>{e&&clearTimeout(e)}}),[t]),yi.useEffect((()=>{let e;return"paused"===t&&(d(3),e=setInterval((()=>{d((t=>t<=1?(clearInterval(e),0):t-1))}),1e3)),()=>{e&&clearInterval(e)}}),[t]),yi.useEffect((()=>{const e=()=>{s("playing"),i(!0)},n=e=>{console.log("Game over event received:",e),h(e),l(!0),i(!1)},a=()=>{y()};PC.on("game-started",e),PC.on("game-over",n),PC.on("return-to-menu",a);const r=e=>{"Escape"===e.key&&"playing"===t&&y()};return document.addEventListener("keydown",r),()=>{PC.removeListener("game-started",e),PC.removeListener("game-over",n),PC.removeListener("return-to-menu",a),document.removeEventListener("keydown",r)}}),[t,m]),Pi.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",overflow:"hidden"},children:["menu"===t&&!o&&Pi.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10},children:Pi.jsx(eM,{onStartGame:g})}),Pi.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,overflow:"hidden",display:"playing"===t?"block":"none"},children:Pi.jsx(yV,{ref:e,currentActiveScene:e=>{var t;"MainMapScene"===(null==(t=null==e?void 0:e.scene)?void 0:t.key)&&i(!0)},showModal:(e,t)=>{switch(console.log("Game modal requested:",{id:e,modalData:t}),e){case"PAUSE_MENU":s("paused");break;case"GAME_OVER":console.log("Game over - showing death loading screen",t),h(t),l(!0),i(!1)}},autoStart:!1})}),"playing"===t&&!o&&Pi.jsxs(Pi.Fragment,{children:[n&&Pi.jsx(xV,{showGoldIcon:!0}),n&&Pi.jsx(kV,{}),n&&Pi.jsx(AV,{}),n&&Pi.jsx(EV,{}),Pi.jsx("div",{style:{position:"fixed",top:"2vh",right:"2vw",color:"white",fontSize:"14px",background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"4px",zIndex:1e3},children:"Press ESC to return to menu"})]}),"paused"===t&&!o&&Pi.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"linear-gradient(45deg, #1a1a1a, #2d1b1b, #1a1a1a)",backgroundSize:"400% 400%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"backgroundShift 4s ease-in-out infinite"},children:Pi.jsxs("div",{className:"bg-cover p-5 rounded-lg text-white text-center w-[500px] h-[200px] flex flex-col justify-center items-center gap-[32px]",children:[Pi.jsx("div",{children:Pi.jsx("img",{src:"GamePause.png",className:"w-140 h-auto",alt:""})}),Pi.jsx("div",{className:"text-2xl text-yellow-400 font-bold",children:u}),Pi.jsxs("div",{className:"flex gap-[10px]",children:[Pi.jsx("button",{onClick:()=>s("playing"),className:"bg-cover bg-center bg-no-repeat w-[200px] h-[50px] border-none cursor-pointer transition-transform duration-200 hover:scale-105",style:{backgroundImage:"url('./Resume.png')"}}),Pi.jsx("button",{onClick:y,className:"bg-cover bg-center bg-no-repeat w-[200px] pr-50 h-[50px] border-none cursor-pointer transition-transform duration-200 hover:scale-105",style:{backgroundImage:"url('./PauseGame.png')"}})]})]})}),Pi.jsx(gV,{isVisible:o,deathData:c,onComplete:()=>{console.log("Death loading complete - navigating to dashboard"),l(!1),h(null),s("menu"),m("/")}})]})}function BV(){return Pi.jsx("div",{className:"App",children:Pi.jsxs(Qg,{children:[Pi.jsx(qg,{path:"/login",element:Pi.jsx(PV,{children:Pi.jsx(kC,{})})}),Pi.jsxs(qg,{path:"/",element:Pi.jsx(SV,{children:Pi.jsx(cM,{})}),children:[Pi.jsx(qg,{index:!0,element:Pi.jsx(mR,{})}),Pi.jsx(qg,{path:"leaderboard",element:Pi.jsx(gR,{})}),Pi.jsx(qg,{path:"quest",element:Pi.jsx(yR,{})}),Pi.jsx(qg,{path:"market",element:Pi.jsx(bR,{})}),Pi.jsx(qg,{path:"guide",element:Pi.jsx(wR,{})}),Pi.jsx(qg,{path:"about",element:Pi.jsx(SV,{children:Pi.jsxs("div",{className:"p-8",children:[Pi.jsx("h1",{className:"text-display-1-alagard-bold",children:"Alagard title"}),Pi.jsx("h1",{className:"text-display-1-pixelify-bold",children:"Pixelify title"}),Pi.jsx("h2",{className:"text-heading-1-alagard",children:"Alagard heading"}),Pi.jsx("h2",{className:"text-heading-1-pixelify-bold",children:"Pixelify heading"}),Pi.jsx("p",{className:"text-body-1-alagard",children:"Alagard body text"}),Pi.jsx("p",{className:"text-body-2-pixelify-bold",children:"Pixelify body text"}),Pi.jsx("button",{className:"text-button-56-alagard",children:"Alagard button"}),Pi.jsx("button",{className:"text-button-48-pixelify",children:"Pixelify button"})]})})}),Pi.jsx(qg,{path:"account",element:Pi.jsx(yz,{})}),Pi.jsx(qg,{path:"*",element:Pi.jsx(Wg,{to:"/",replace:!0})})]}),Pi.jsx(qg,{path:"/game/*",element:Pi.jsx(SV,{children:Pi.jsx(Jv,{children:Pi.jsx(TV,{})})})})]})})}const CV=new tR({defaultOptions:{queries:{staleTime:3e5,retry:1}}});function MV(){return Pi.jsx(hR,{client:CV,children:Pi.jsx(Qv,{children:Pi.jsx(YC,{children:Pi.jsx(fy,{children:Pi.jsx(BV,{})})})})})}Ti.createRoot(document.getElementById("root")).render(Pi.jsx(bi.StrictMode,{children:Pi.jsx(MV,{})}));export{wD as B,wN as H,TO as a,l_ as b,jF as c,Q_ as d,y_ as e,gD as f,pN as g,cF as i,PO as l,Z_ as s};
